(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-8c8f9f2e","chunk-6a4d4ab3"],{"030f":function(t,e,n){(function(t){(function(){"use strict";var e=function(t){var e=typeof t;return null===t?"null":"object"===e&&(Array.prototype.isPrototypeOf(t)||t.constructor&&"Array"===t.constructor.name)?"array":"object"===e&&(String.prototype.isPrototypeOf(t)||t.constructor&&"String"===t.constructor.name)?"string":e},n=function(t){return function(n){return e(n)===t}},r=function(t){return function(e){return typeof e===t}},o=function(t){return function(e){return t===e}},i=n("string"),a=n("object"),u=n("array"),s=r("boolean"),l=o(void 0),c=function(t){return null===t||void 0===t},f=function(t){return!c(t)},d=r("function"),h=r("number"),p=function(t,e){if(u(t)){for(var n=0,r=t.length;n<r;++n)if(!e(t[n]))return!1;return!0}return!1},g=function(){},m=function(t){return function(){return t()}},v=function(t,e){return function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return t(e.apply(null,n))}},y=function(t,e){return function(n){return t(e(n))}},b=function(t){return function(){return t}},x=function(t){return t};function w(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];return function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];var o=e.concat(n);return t.apply(null,o)}}var _=function(t){return function(e){return!t(e)}},S=function(t){return function(){throw new Error(t)}},C=b(!1),M=b(!0),T=tinymce.util.Tools.resolve("tinymce.ThemeManager"),k=function(){return k=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n],e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},k.apply(this,arguments)};function D(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"===typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(t);o<r.length;o++)e.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(t,r[o])&&(n[r[o]]=t[r[o]])}return n}function A(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),o=0;for(e=0;e<n;e++)for(var i=arguments[e],a=0,u=i.length;a<u;a++,o++)r[o]=i[a];return r}var I,O=function(){return L},L=function(){var t=function(t){return t.isNone()},e=function(t){return t()},n=function(t){return t},r={fold:function(t,e){return t()},is:C,isSome:C,isNone:M,getOr:n,getOrThunk:e,getOrDie:function(t){throw new Error(t||"error: getOrDie called on none.")},getOrNull:b(null),getOrUndefined:b(void 0),or:n,orThunk:e,map:O,each:g,bind:O,exists:C,forall:M,filter:O,equals:t,equals_:t,toArray:function(){return[]},toString:b("none()")};return r}(),E=function(t){var e=b(t),n=function(){return o},r=function(e){return e(t)},o={fold:function(e,n){return n(t)},is:function(e){return t===e},isSome:M,isNone:C,getOr:e,getOrThunk:e,getOrDie:e,getOrNull:e,getOrUndefined:e,or:n,orThunk:n,map:function(e){return E(e(t))},each:function(e){e(t)},bind:r,exists:r,forall:r,filter:function(e){return e(t)?o:L},toArray:function(){return[t]},toString:function(){return"some("+t+")"},equals:function(e){return e.is(t)},equals_:function(e,n){return e.fold(C,function(e){return n(t,e)})}};return o},N=function(t){return null===t||void 0===t?L:E(t)},R={some:E,none:O,from:N},P=Array.prototype.slice,z=Array.prototype.indexOf,B=Array.prototype.push,V=function(t,e){return z.call(t,e)},H=function(t,e){var n=V(t,e);return-1===n?R.none():R.some(n)},F=function(t,e){return V(t,e)>-1},W=function(t,e){for(var n=0,r=t.length;n<r;n++){var o=t[n];if(e(o,n))return!0}return!1},U=function(t,e){for(var n=[],r=0;r<t;r++)n.push(e(r));return n},G=function(t,e){for(var n=[],r=0;r<t.length;r+=e){var o=P.call(t,r,r+e);n.push(o)}return n},j=function(t,e){for(var n=t.length,r=new Array(n),o=0;o<n;o++){var i=t[o];r[o]=e(i,o)}return r},X=function(t,e){for(var n=0,r=t.length;n<r;n++){var o=t[n];e(o,n)}},Y=function(t,e){for(var n=t.length-1;n>=0;n--){var r=t[n];e(r,n)}},q=function(t,e){for(var n=[],r=[],o=0,i=t.length;o<i;o++){var a=t[o],u=e(a,o)?n:r;u.push(a)}return{pass:n,fail:r}},Z=function(t,e){for(var n=[],r=0,o=t.length;r<o;r++){var i=t[r];e(i,r)&&n.push(i)}return n},$=function(t,e,n){return Y(t,function(t){n=e(n,t)}),n},K=function(t,e,n){return X(t,function(t){n=e(n,t)}),n},J=function(t,e,n){for(var r=0,o=t.length;r<o;r++){var i=t[r];if(e(i,r))return R.some(i);if(n(i,r))break}return R.none()},Q=function(t,e){return J(t,e,C)},tt=function(t,e){for(var n=0,r=t.length;n<r;n++){var o=t[n];if(e(o,n))return R.some(n)}return R.none()},et=function(t){for(var e=[],n=0,r=t.length;n<r;++n){if(!u(t[n]))throw new Error("Arr.flatten item "+n+" was not an array, input: "+t);B.apply(e,t[n])}return e},nt=function(t,e){return et(j(t,e))},rt=function(t,e){for(var n=0,r=t.length;n<r;++n){var o=t[n];if(!0!==e(o,n))return!1}return!0},ot=function(t){var e=P.call(t,0);return e.reverse(),e},it=function(t,e){return Z(t,function(t){return!F(e,t)})},at=function(t,e){for(var n={},r=0,o=t.length;r<o;r++){var i=t[r];n[String(i)]=e(i,r)}return n},ut=function(t,e){var n=P.call(t,0);return n.sort(e),n},st=function(t,e){return e>=0&&e<t.length?R.some(t[e]):R.none()},lt=function(t){return st(t,0)},ct=function(t){return st(t,t.length-1)},ft=d(Array.from)?Array.from:function(t){return P.call(t)},dt=function(t,e){for(var n=0;n<t.length;n++){var r=e(t[n],n);if(r.isSome())return r}return R.none()},ht=function(t){var e=function(e){return t===e},n=function(e){return ht(t)},r=function(e){return ht(t)},o=function(e){return ht(e(t))},i=function(e){return ht(t)},a=function(e){e(t)},u=function(e){return e(t)},s=function(e,n){return n(t)},l=function(e){return e(t)},c=function(e){return e(t)},f=function(){return R.some(t)};return{is:e,isValue:M,isError:C,getOr:b(t),getOrThunk:b(t),getOrDie:b(t),or:n,orThunk:r,fold:s,map:o,mapError:i,each:a,bind:u,exists:l,forall:c,toOptional:f}},pt=function(t){var e=function(t){return t()},n=function(){return S(String(t))()},r=function(t){return t},o=function(t){return t()},i=function(e){return pt(t)},a=function(e){return pt(e(t))},u=function(e){return pt(t)},s=function(e,n){return e(t)};return{is:C,isValue:C,isError:M,getOr:x,getOrThunk:e,getOrDie:n,or:r,orThunk:o,fold:s,map:i,mapError:a,each:g,bind:u,exists:C,forall:M,toOptional:R.none}},gt=function(t,e){return t.fold(function(){return pt(e)},ht)},mt={value:ht,error:pt,fromOption:gt};(function(t){t[t["Error"]=0]="Error",t[t["Value"]=1]="Value"})(I||(I={}));var vt=function(t,e,n){return t.stype===I.Error?e(t.serror):n(t.svalue)},yt=function(t){var e=[],n=[];return X(t,function(t){vt(t,function(t){return n.push(t)},function(t){return e.push(t)})}),{values:e,errors:n}},bt=function(t,e){return t.stype===I.Error?{stype:I.Error,serror:e(t.serror)}:t},xt=function(t,e){return t.stype===I.Value?{stype:I.Value,svalue:e(t.svalue)}:t},wt=function(t,e){return t.stype===I.Value?e(t.svalue):t},_t=function(t,e){return t.stype===I.Error?e(t.serror):t},St=function(t){return{stype:I.Value,svalue:t}},Ct=function(t){return{stype:I.Error,serror:t}},Mt=function(t){return vt(t,mt.error,mt.value)},Tt=function(t){return t.fold(Ct,St)},kt={fromResult:Tt,toResult:Mt,svalue:St,partition:yt,serror:Ct,bind:wt,bindError:_t,map:xt,mapError:bt,fold:vt},Dt=Object.keys,At=Object.hasOwnProperty,It=function(t,e){for(var n=Dt(t),r=0,o=n.length;r<o;r++){var i=n[r],a=t[i];e(a,i)}},Ot=function(t,e){return Lt(t,function(t,n){return{k:n,v:e(t,n)}})},Lt=function(t,e){var n={};return It(t,function(t,r){var o=e(t,r);n[o.k]=o.v}),n},Et=function(t){return function(e,n){t[n]=e}},Nt=function(t,e,n,r){var o={};return It(t,function(t,o){(e(t,o)?n:r)(t,o)}),o},Rt=function(t,e){var n={};return Nt(t,e,Et(n),g),n},Pt=function(t,e){var n=[];return It(t,function(t,r){n.push(e(t,r))}),n},zt=function(t,e){for(var n=Dt(t),r=0,o=n.length;r<o;r++){var i=n[r],a=t[i];if(e(a,i,t))return R.some(a)}return R.none()},Bt=function(t){return Pt(t,function(t){return t})},Vt=function(t,e){return Ht(t,e)?R.from(t[e]):R.none()},Ht=function(t,e){return At.call(t,e)},Ft=function(t,e){return Ht(t,e)&&void 0!==t[e]&&null!==t[e]},Wt=function(t){if(!u(t))throw new Error("cases must be an array");if(0===t.length)throw new Error("there must be at least one case");var e=[],n={};return X(t,function(r,o){var i=Dt(r);if(1!==i.length)throw new Error("one and only one name per case");var a=i[0],s=r[a];if(void 0!==n[a])throw new Error("duplicate key detected:"+a);if("cata"===a)throw new Error("cannot have a case named cata (sorry)");if(!u(s))throw new Error("case arguments must be an array");e.push(a),n[a]=function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];var i=n.length;if(i!==s.length)throw new Error("Wrong number of arguments to case "+a+". Expected "+s.length+" ("+s+"), got "+i);var u=function(t){var r=Dt(t);if(e.length!==r.length)throw new Error("Wrong number of arguments to match. Expected: "+e.join(",")+"\nActual: "+r.join(","));var o=rt(e,function(t){return F(r,t)});if(!o)throw new Error("Not all branches were specified when using match. Specified: "+r.join(", ")+"\nRequired: "+e.join(", "));return t[a].apply(null,n)};return{fold:function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];if(e.length!==t.length)throw new Error("Wrong number of arguments to fold. Expected "+t.length+", got "+e.length);var i=e[o];return i.apply(null,n)},match:u,log:function(t){console.log(t,{constructors:e,constructor:a,params:n})}}}}),n},Ut={generate:Wt},Gt=Object.prototype.hasOwnProperty,jt=function(t,e){return e},Xt=function(t,e){var n=a(t)&&a(e);return n?qt(t,e):e},Yt=function(t){return function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];if(0===e.length)throw new Error("Can't merge zero objects");for(var r={},o=0;o<e.length;o++){var i=e[o];for(var a in i)Gt.call(i,a)&&(r[a]=t(r[a],i[a]))}return r}},qt=Yt(Xt),Zt=Yt(jt),$t=function(t){var e,n=!1;return function(){for(var r=[],o=0;o<arguments.length;o++)r[o]=arguments[o];return n||(n=!0,e=t.apply(null,r)),e}},Kt=Ut.generate([{strict:[]},{defaultedThunk:["fallbackThunk"]},{asOption:[]},{asDefaultedOptionThunk:["fallbackThunk"]},{mergeWithThunk:["baseThunk"]}]),Jt=function(t){return Kt.defaultedThunk(b(t))},Qt=function(t){return Kt.mergeWithThunk(b(t))},te=Kt.strict,ee=Kt.asOption,ne=Kt.defaultedThunk,re=(Kt.asDefaultedOptionThunk,Kt.mergeWithThunk),oe=(Ut.generate([{bothErrors:["error1","error2"]},{firstError:["error1","value2"]},{secondError:["value1","error2"]},{bothValues:["value1","value2"]}]),function(t){var e=[],n=[];return X(t,function(t){t.fold(function(t){e.push(t)},function(t){n.push(t)})}),{errors:e,values:n}}),ie=function(t,e){var n={};return It(t,function(t,r){F(e,r)||(n[r]=t)}),n},ae=function(t,e){var n;return n={},n[t]=e,n},ue=function(t){var e={};return X(t,function(t){e[t.key]=t.value}),e},se=function(t,e){return ie(t,e)},le=function(t,e){return ae(t,e)},ce=function(t){return ue(t)},fe=function(t,e){return 0===t.length?mt.value(e):mt.value(qt(e,Zt.apply(void 0,t)))},de=function(t){return mt.error(et(t))},he=function(t,e){var n=oe(t);return n.errors.length>0?de(n.errors):fe(n.values,e)},pe=function(t,e){return t.length>0?kt.svalue(qt(e,Zt.apply(void 0,t))):kt.svalue(e)},ge=function(t){return v(kt.serror,et)(t)},me=function(t,e){var n=kt.partition(t);return n.errors.length>0?ge(n.errors):pe(n.values,e)},ve=function(t){var e=kt.partition(t);return e.errors.length>0?ge(e.errors):kt.svalue(e.values)},ye={consolidateObj:me,consolidateArr:ve},be=function(t){return a(t)&&Dt(t).length>100?" removed due to size":JSON.stringify(t,null,2)},xe=function(t){var e=t.length>10?t.slice(0,10).concat([{path:[],getErrorInfo:function(){return"... (only showing first ten failures)"}}]):t;return j(e,function(t){return"Failed path: ("+t.path.join(" > ")+")\n"+t.getErrorInfo()})},we=function(t,e){return kt.serror([{path:t,getErrorInfo:e}])},_e=function(t,e,n){return we(t,function(){return'Could not find valid *strict* value for "'+e+'" in '+be(n)})},Se=function(t,e){return we(t,function(){return'Choice schema did not contain choice key: "'+e+'"'})},Ce=function(t,e,n){return we(t,function(){return'The chosen schema: "'+n+'" did not exist in branches: '+be(e)})},Me=function(t,e){return we(t,function(){return"There are unsupported fields: ["+e.join(", ")+"] specified"})},Te=function(t,e){return we(t,function(){return e})},ke=Ut.generate([{field:["key","okey","presence","prop"]},{state:["okey","instantiator"]}]),De=function(t,e,n){return Vt(e,n).fold(function(){return _e(t,n,e)},kt.svalue)},Ae=function(t,e,n){var r=Vt(t,e).fold(function(){return n(t)},x);return kt.svalue(r)},Ie=function(t,e){return kt.svalue(Vt(t,e))},Oe=function(t,e,n){var r=Vt(t,e).map(function(e){return!0===e?n(t):e});return kt.svalue(r)},Le=function(t,e,n,r){return n.fold(function(n,o,i,a){var u=function(e){var i=a.extract(t.concat([n]),r,e);return kt.map(i,function(t){return ae(o,r(t))})},s=function(e){return e.fold(function(){var t=ae(o,r(R.none()));return kt.svalue(t)},function(e){var i=a.extract(t.concat([n]),r,e);return kt.map(i,function(t){return ae(o,r(R.some(t)))})})};return function(){return i.fold(function(){return kt.bind(De(t,e,n),u)},function(t){return kt.bind(Ae(e,n,t),u)},function(){return kt.bind(Ie(e,n),s)},function(t){return kt.bind(Oe(e,n,t),s)},function(t){var r=t(e),o=kt.map(Ae(e,n,b({})),function(t){return qt(r,t)});return kt.bind(o,u)})}()},function(t,n){var o=n(e);return kt.svalue(ae(t,r(o)))})},Ee=function(t,e,n,r){var o=j(n,function(n){return Le(t,e,n,r)});return ye.consolidateObj(o,{})},Ne=function(t){var e=function(e,n,r){return t().extract(e,n,r)},n=function(){return t().toString()};return{extract:e,toString:n}},Re=function(t){var e=function(e,n,r){return kt.bindError(t(r,n),function(t){return Te(e,t)})},n=function(){return"val"};return{extract:e,toString:n}},Pe=function(t){return Dt(Rt(t,function(t){return void 0!==t&&null!==t}))},ze=function(t){var e=Be(t),n=$(t,function(t,e){return e.fold(function(e){return qt(t,le(e,!0))},b(t))},{}),r=function(t,r,o){var i=s(o)?[]:Pe(o),a=Z(i,function(t){return!Ft(n,t)});return 0===a.length?e.extract(t,r,o):Me(t,a)};return{extract:r,toString:e.toString}},Be=function(t){var e=function(e,n,r){return Ee(e,r,t,n)},n=function(){var e=j(t,function(t){return t.fold(function(t,e,n,r){return t+" -> "+r.toString()},function(t,e){return"state("+t+")"})});return"obj{\n"+e.join("\n")+"}"};return{extract:e,toString:n}},Ve=function(t){var e=function(e,n,r){var o=j(r,function(r,o){return t.extract(e.concat(["["+o+"]"]),n,r)});return ye.consolidateArr(o)},n=function(){return"array("+t.toString()+")"};return{extract:e,toString:n}},He=function(t){var e=function(e,n,r){for(var o=[],i=0,a=t;i<a.length;i++){var u=a[i],s=u.extract(e,n,r);if(s.stype===I.Value)return s;o.push(s)}return ye.consolidateArr(o)},n=function(){return"oneOf("+j(t,function(t){return t.toString()}).join(", ")+")"};return{extract:e,toString:n}},Fe=function(t,e){var n=function(e,n){return Ve(Re(t)).extract(e,x,n)},r=function(t,r,o){var i=Dt(o),a=n(t,i);return kt.bind(a,function(n){var i=j(n,function(t){return ke.field(t,t,te(),e)});return Be(i).extract(t,r,o)})},o=function(){return"setOf("+e.toString()+")"};return{extract:r,toString:o}},We=function(t,e){var n=$t(function(){return e()}),r=function(t,e,r){return n().extract(t,e,r)},o=function(){return n().toString()};return{extract:r,toString:o}},Ue=b(Re(kt.svalue)),Ge=v(Ve,Be),je=ke.state,Xe=ke.field,Ye=function(t,e,n,r,o){var i=Vt(r,o);return i.fold(function(){return Ce(t,r,o)},function(r){return r.extract(t.concat(["branch: "+o]),e,n)})},qe=function(t,e){var n=function(n,r,o){var i=Vt(o,t);return i.fold(function(){return Se(n,t)},function(t){return Ye(n,r,o,e,t)})},r=function(){return"chooseOn("+t+"). Possible values: "+Dt(e)};return{extract:n,toString:r}},Ze=Re(kt.svalue),$e=function(t){return Ge(t)},Ke=function(){return Ve(Ze)},Je=Ne,Qe=function(t){return Re(function(e){return t(e).fold(kt.serror,kt.svalue)})},tn=function(t,e){return Fe(function(e){return kt.fromResult(t(e))},e)},en=function(t,e,n,r){var o=e.extract([t],n,r);return kt.mapError(o,function(t){return{input:r,errors:t}})},nn=function(t,e,n){return kt.toResult(en(t,e,x,n))},rn=function(t){return t.fold(function(t){throw new Error(an(t))},x)},on=function(t,e,n){return rn(nn(t,e,n))},an=function(t){return"Errors: \n"+xe(t.errors).join("\n")+"\n\nInput object: "+be(t.input)},un=function(t,e){return qe(t,e)},sn=function(t,e){return qe(t,Ot(e,Be))},ln=function(t,e){return We(t,e)},cn=b(Ze),fn=function(t,e){return Re(function(n){var r=typeof n;return t(n)?kt.svalue(n):kt.serror("Expected type: "+e+" but got: "+r)})},dn=fn(h,"number"),hn=fn(i,"string"),pn=fn(s,"boolean"),gn=fn(d,"function"),mn=function(t){var e=function(t,e){var n=t.next();while(!n.done){if(!e(n.value))return!1;n=t.next()}return!0};if(Object(t)!==t)return!0;switch({}.toString.call(t).slice(8,-1)){case"Boolean":case"Number":case"String":case"Date":case"RegExp":case"Blob":case"FileList":case"ImageData":case"ImageBitmap":case"ArrayBuffer":return!0;case"Array":case"Object":return Object.keys(t).every(function(e){return mn(t[e])});case"Map":return e(t.keys(),mn)&&e(t.values(),mn);case"Set":return e(t.keys(),mn);default:return!1}},vn=Re(function(t){return mn(t)?kt.svalue(t):kt.serror("Expected value to be acceptable for sending via postMessage")}),yn=function(t){return Qe(function(e){return F(t,e)?mt.value(e):mt.error('Unsupported value: "'+e+'", choose one of "'+t.join(", ")+'".')})},bn=function(t){return Xe(t,t,te(),Ue())},xn=function(t,e){return Xe(t,t,te(),e)},wn=function(t){return xn(t,dn)},_n=function(t){return xn(t,hn)},Sn=function(t,e){return Xe(t,t,te(),yn(e))},Cn=function(t){return xn(t,pn)},Mn=function(t){return xn(t,gn)},Tn=function(t,e){return Xe(t,t,ee(),Re(function(n){return kt.serror("The field: "+t+" is forbidden. "+e)}))},kn=function(t,e){return Xe(t,t,te(),Be(e))},Dn=function(t,e){return Xe(t,t,te(),Ge(e))},An=function(t,e){return Xe(t,t,te(),Ve(e))},In=function(t){return Xe(t,t,ee(),Ue())},On=function(t,e){return Xe(t,t,ee(),e)},Ln=function(t){return On(t,dn)},En=function(t){return On(t,hn)},Nn=function(t){return On(t,gn)},Rn=function(t,e){return On(t,Ve(e))},Pn=function(t,e){return On(t,Be(e))},zn=function(t,e){return On(t,ze(e))},Bn=function(t,e){return Xe(t,t,Jt(e),Ue())},Vn=function(t,e,n){return Xe(t,t,Jt(e),n)},Hn=function(t,e){return Vn(t,e,dn)},Fn=function(t,e){return Vn(t,e,hn)},Wn=function(t,e,n){return Vn(t,e,yn(n))},Un=function(t,e){return Vn(t,e,pn)},Gn=function(t,e){return Vn(t,e,gn)},jn=function(t,e){return Vn(t,e,vn)},Xn=function(t,e,n){return Vn(t,e,Ve(n))},Yn=function(t,e,n){return Vn(t,e,Be(n))},qn=function(t,e){return je(t,e)},Zn=function(t){var e=t,n=function(){return e},r=function(t){e=t};return{get:n,set:r}},$n=function(t,e){var n=e||document,r=n.createElement("div");if(r.innerHTML=t,!r.hasChildNodes()||r.childNodes.length>1)throw console.error("HTML does not have a single root node",t),new Error("HTML must have a single root node");return Qn(r.childNodes[0])},Kn=function(t,e){var n=e||document,r=n.createElement(t);return Qn(r)},Jn=function(t,e){var n=e||document,r=n.createTextNode(t);return Qn(r)},Qn=function(t){if(null===t||void 0===t)throw new Error("Node cannot be null or undefined");return{dom:t}},tr=function(t,e,n){return R.from(t.dom.elementFromPoint(e,n)).map(Qn)},er={fromHtml:$n,fromTag:Kn,fromText:Jn,fromDom:Qn,fromPoint:tr},nr=function(t,e,n,r){var o=t.isiOS()&&!0===/ipad/i.test(n),i=t.isiOS()&&!o,a=t.isiOS()||t.isAndroid(),u=a||r("(pointer:coarse)"),s=o||!i&&a&&r("(min-device-width:768px)"),l=i||a&&!s,c=e.isSafari()&&t.isiOS()&&!1===/safari/i.test(n),f=!l&&!s&&!c;return{isiPad:b(o),isiPhone:b(i),isTablet:b(s),isPhone:b(l),isTouch:b(u),isAndroid:t.isAndroid,isiOS:t.isiOS,isWebView:b(c),isDesktop:b(f)}},rr=function(t,e){for(var n=0;n<t.length;n++){var r=t[n];if(r.test(e))return r}},or=function(t,e){var n=rr(t,e);if(!n)return{major:0,minor:0};var r=function(t){return Number(e.replace(n,"$"+t))};return ur(r(1),r(2))},ir=function(t,e){var n=String(e).toLowerCase();return 0===t.length?ar():or(t,n)},ar=function(){return ur(0,0)},ur=function(t,e){return{major:t,minor:e}},sr={nu:ur,detect:ir,unknown:ar},lr=function(t,e){var n=String(e).toLowerCase();return Q(t,function(t){return t.search(n)})},cr=function(t,e){return lr(t,e).map(function(t){var n=sr.detect(t.versionRegexes,e);return{current:t.name,version:n}})},fr=function(t,e){return lr(t,e).map(function(t){var n=sr.detect(t.versionRegexes,e);return{current:t.name,version:n}})},dr={detectBrowser:cr,detectOs:fr},hr=function(t,e,n){return""===e||t.length>=e.length&&t.substr(n,n+e.length)===e},pr=function(t,e){return-1!==t.indexOf(e)},gr=function(t,e){return hr(t,e,t.length-e.length)},mr=function(t){return function(e){return e.replace(t,"")}},vr=mr(/^\s+|\s+$/g),yr=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,br=function(t){return function(e){return pr(e,t)}},xr=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:function(t){return pr(t,"edge/")&&pr(t,"chrome")&&pr(t,"safari")&&pr(t,"applewebkit")}},{name:"Chrome",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,yr],search:function(t){return pr(t,"chrome")&&!pr(t,"chromeframe")}},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:function(t){return pr(t,"msie")||pr(t,"trident")}},{name:"Opera",versionRegexes:[yr,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:br("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:br("firefox")},{name:"Safari",versionRegexes:[yr,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:function(t){return(pr(t,"safari")||pr(t,"mobile/"))&&pr(t,"applewebkit")}}],wr=[{name:"Windows",search:br("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:function(t){return pr(t,"iphone")||pr(t,"ipad")},versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:br("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"OSX",search:br("mac os x"),versionRegexes:[/.*?mac\ os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:br("linux"),versionRegexes:[]},{name:"Solaris",search:br("sunos"),versionRegexes:[]},{name:"FreeBSD",search:br("freebsd"),versionRegexes:[]},{name:"ChromeOS",search:br("cros"),versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/]}],_r={browsers:b(xr),oses:b(wr)},Sr="Edge",Cr="Chrome",Mr="IE",Tr="Opera",kr="Firefox",Dr="Safari",Ar=function(){return Ir({current:void 0,version:sr.unknown()})},Ir=function(t){var e=t.current,n=t.version,r=function(t){return function(){return e===t}};return{current:e,version:n,isEdge:r(Sr),isChrome:r(Cr),isIE:r(Mr),isOpera:r(Tr),isFirefox:r(kr),isSafari:r(Dr)}},Or={unknown:Ar,nu:Ir,edge:b(Sr),chrome:b(Cr),ie:b(Mr),opera:b(Tr),firefox:b(kr),safari:b(Dr)},Lr="Windows",Er="iOS",Nr="Android",Rr="Linux",Pr="OSX",zr="Solaris",Br="FreeBSD",Vr="ChromeOS",Hr=function(){return Fr({current:void 0,version:sr.unknown()})},Fr=function(t){var e=t.current,n=t.version,r=function(t){return function(){return e===t}};return{current:e,version:n,isWindows:r(Lr),isiOS:r(Er),isAndroid:r(Nr),isOSX:r(Pr),isLinux:r(Rr),isSolaris:r(zr),isFreeBSD:r(Br),isChromeOS:r(Vr)}},Wr={unknown:Hr,nu:Fr,windows:b(Lr),ios:b(Er),android:b(Nr),linux:b(Rr),osx:b(Pr),solaris:b(zr),freebsd:b(Br),chromeos:b(Vr)},Ur=function(t,e){var n=_r.browsers(),r=_r.oses(),o=dr.detectBrowser(n,t).fold(Or.unknown,Or.nu),i=dr.detectOs(r,t).fold(Wr.unknown,Wr.nu),a=nr(i,o,t,e);return{browser:o,os:i,deviceType:a}},Gr={detect:Ur},jr=function(t){return window.matchMedia(t).matches},Xr=$t(function(){return Gr.detect(navigator.userAgent,jr)}),Yr=function(){return Xr()},qr=function(t,e,n){return 0!==(t.compareDocumentPosition(e)&n)},Zr=function(t,e){return qr(t,e,Node.DOCUMENT_POSITION_CONTAINED_BY)},$r=9,Kr=11,Jr=1,Qr=3,to=function(t,e){var n=t.dom;if(n.nodeType!==Jr)return!1;var r=n;if(void 0!==r.matches)return r.matches(e);if(void 0!==r.msMatchesSelector)return r.msMatchesSelector(e);if(void 0!==r.webkitMatchesSelector)return r.webkitMatchesSelector(e);if(void 0!==r.mozMatchesSelector)return r.mozMatchesSelector(e);throw new Error("Browser lacks native selectors")},eo=function(t){return t.nodeType!==Jr&&t.nodeType!==$r&&t.nodeType!==Kr||0===t.childElementCount},no=function(t,e){var n=void 0===e?document:e.dom;return eo(n)?[]:j(n.querySelectorAll(t),er.fromDom)},ro=function(t,e){var n=void 0===e?document:e.dom;return eo(n)?R.none():R.from(n.querySelector(t)).map(er.fromDom)},oo=function(t,e){return t.dom===e.dom},io=function(t,e){var n=t.dom,r=e.dom;return n!==r&&n.contains(r)},ao=function(t,e){return Zr(t.dom,e.dom)},uo=function(t,e){return Yr().browser.isIE()?ao(t,e):io(t,e)},so=function(t){return d(t)?t:C},lo=function(t,e,n){var r=t.dom,o=so(n);while(r.parentNode){r=r.parentNode;var i=er.fromDom(r),a=e(i);if(a.isSome())return a;if(o(i))break}return R.none()},co=function(t,e,n){var r=e(t),o=so(n);return r.orThunk(function(){return o(t)?R.none():lo(t,e,o)})},fo=function(t,e){return oo(t.element,e.event.target)},ho=function(t){if(!Ft(t,"can")&&!Ft(t,"abort")&&!Ft(t,"run"))throw new Error("EventHandler defined by: "+JSON.stringify(t,null,2)+" does not have can, abort, or run!");return on("Extracting event.handler",ze([Bn("can",M),Bn("abort",C),Bn("run",g)]),t)},po=function(t,e){return function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return K(t,function(t,r){return t&&e(r).apply(void 0,n)},!0)}},go=function(t,e){return function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return K(t,function(t,r){return t||e(r).apply(void 0,n)},!1)}},mo=function(t){return d(t)?{can:M,abort:C,run:t}:t},vo=function(t){var e=po(t,function(t){return t.can}),n=go(t,function(t){return t.abort}),r=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];X(t,function(t){t.run.apply(void 0,e)})};return ho({can:e,abort:n,run:r})},yo=b,bo=yo("touchstart"),xo=yo("touchmove"),wo=yo("touchend"),_o=yo("touchcancel"),So=yo("mousedown"),Co=yo("mousemove"),Mo=yo("mouseout"),To=yo("mouseup"),ko=yo("mouseover"),Do=yo("focusin"),Ao=yo("focusout"),Io=yo("keydown"),Oo=yo("keyup"),Lo=yo("input"),Eo=yo("change"),No=yo("click"),Ro=yo("transitionend"),Po=yo("selectstart"),zo=function(t){return b("alloy."+t)},Bo={tap:zo("tap")},Vo=zo("focus"),Ho=zo("blur.post"),Fo=zo("paste.post"),Wo=zo("receive"),Uo=zo("execute"),Go=zo("focus.item"),jo=Bo.tap,Xo=zo("longpress"),Yo=zo("sandbox.close"),qo=zo("typeahead.cancel"),Zo=zo("system.init"),$o=zo("system.touchmove"),Ko=zo("system.touchend"),Jo=zo("system.scroll"),Qo=zo("system.resize"),ti=zo("system.attached"),ei=zo("system.detached"),ni=zo("system.dismissRequested"),ri=zo("system.repositionRequested"),oi=zo("focusmanager.shifted"),ii=zo("slotcontainer.visibility"),ai=zo("change.tab"),ui=zo("dismiss.tab"),si=zo("highlight"),li=zo("dehighlight"),ci=function(t,e){pi(t,t.element,e,{})},fi=function(t,e,n){pi(t,t.element,e,n)},di=function(t){ci(t,Uo())},hi=function(t,e,n){pi(t,e,n,{})},pi=function(t,e,n,r){var o=k({target:e},r);t.getSystem().triggerEvent(n,e,o)},gi=function(t,e,n,r){t.getSystem().triggerEvent(n,e,r.event)},mi=function(t){return ce(t)},vi=function(t,e){return{key:t,value:ho({abort:e})}},yi=function(t,e){return{key:t,value:ho({can:e})}},bi=function(t){return{key:t,value:ho({run:function(t,e){e.event.prevent()}})}},xi=function(t,e){return{key:t,value:ho({run:e})}},wi=function(t,e,n){return{key:t,value:ho({run:function(t,r){e.apply(void 0,[t,r].concat(n))}})}},_i=function(t){return function(e){return xi(t,e)}},Si=function(t){return function(e){return{key:t,value:ho({run:function(t,n){fo(t,n)&&e(t,n)}})}}},Ci=function(t,e){return xi(t,function(n,r){n.getSystem().getByUid(e).each(function(e){gi(e,e.element,t,r)})})},Mi=function(t,e,n){var r=e.partUids[n];return Ci(t,r)},Ti=function(t,e){return xi(t,function(t,n){var r=n.event,o=t.getSystem().getByDom(r.target).fold(function(){var e=co(r.target,function(e){return t.getSystem().getByDom(e).toOptional()},C);return e.getOr(t)},function(t){return t});e(t,o,n)})},ki=function(t){return xi(t,function(t,e){e.cut()})},Di=function(t){return xi(t,function(t,e){e.stop()})},Ai=function(t,e){return Si(t)(e)},Ii=Si(ti()),Oi=Si(ei()),Li=Si(Zo()),Ei=_i(Uo()),Ni=("undefined"!==typeof window?window:Function("return this;")(),function(t){var e=t.dom.nodeName;return e.toLowerCase()}),Ri=function(t){return t.dom.nodeType},Pi=function(t){return function(e){return Ri(e)===t}},zi=Pi(Jr),Bi=Pi(Qr),Vi=Pi($r),Hi=Pi(Kr),Fi=function(t){return er.fromDom(t.dom.ownerDocument)},Wi=function(t){return Vi(t)?t:Fi(t)},Ui=function(t){return er.fromDom(Wi(t).dom.documentElement)},Gi=function(t){return er.fromDom(Wi(t).dom.defaultView)},ji=function(t){return R.from(t.dom.parentNode).map(er.fromDom)},Xi=function(t){return ji(t)},Yi=function(t){return R.from(t.dom.offsetParent).map(er.fromDom)},qi=function(t){return R.from(t.dom.nextSibling).map(er.fromDom)},Zi=function(t){return j(t.dom.childNodes,er.fromDom)},$i=function(t,e){var n=t.dom.childNodes;return R.from(n[e]).map(er.fromDom)},Ki=function(t){return $i(t,0)},Ji=function(t){return Hi(t)&&f(t.dom.host)},Qi=d(Element.prototype.attachShadow)&&d(Node.prototype.getRootNode),ta=b(Qi),ea=Qi?function(t){return er.fromDom(t.dom.getRootNode())}:Wi,na=function(t){return Ji(t)?t:er.fromDom(Wi(t).dom.body)},ra=function(t){return oa(t).isSome()},oa=function(t){var e=ea(t);return Ji(e)?R.some(e):R.none()},ia=function(t){return er.fromDom(t.dom.host)},aa=function(t){if(ta()&&f(t.target)){var e=er.fromDom(t.target);if(zi(e)&&ua(e)&&t.composed&&t.composedPath){var n=t.composedPath();if(n)return lt(n)}}return R.from(t.target)},ua=function(t){return f(t.dom.shadowRoot)},sa=function(t,e){var n=ji(t);n.each(function(n){n.dom.insertBefore(e.dom,t.dom)})},la=function(t,e){var n=qi(t);n.fold(function(){var n=ji(t);n.each(function(t){fa(t,e)})},function(t){sa(t,e)})},ca=function(t,e){var n=Ki(t);n.fold(function(){fa(t,e)},function(n){t.dom.insertBefore(e.dom,n.dom)})},fa=function(t,e){t.dom.appendChild(e.dom)},da=function(t,e,n){$i(t,n).fold(function(){fa(t,e)},function(t){sa(t,e)})},ha=function(t,e){X(e,function(e){sa(t,e)})},pa=function(t,e){X(e,function(e){fa(t,e)})},ga=function(t){t.dom.textContent="",X(Zi(t),function(t){ma(t)})},ma=function(t){var e=t.dom;null!==e.parentNode&&e.parentNode.removeChild(e)},va=function(t){var e=Zi(t);e.length>0&&ha(t,e),ma(t)},ya=function(t,e){var n=e||document,r=n.createElement("div");return r.innerHTML=t,Zi(er.fromDom(r))},ba=function(t){return t.dom.innerHTML},xa=function(t,e){var n=Fi(t),r=n.dom,o=er.fromDom(r.createDocumentFragment()),i=ya(e,r);pa(o,i),ga(t),fa(t,o)},wa=function(t){var e=er.fromTag("div"),n=er.fromDom(t.dom.cloneNode(!0));return fa(e,n),ba(e)},_a=function(t,e,n){if(!(i(n)||s(n)||h(n)))throw console.error("Invalid call to Attribute.set. Key ",e,":: Value ",n,":: Element ",t),new Error("Attribute value was not simple");t.setAttribute(e,n+"")},Sa=function(t,e,n){_a(t.dom,e,n)},Ca=function(t,e){var n=t.dom;It(e,function(t,e){_a(n,e,t)})},Ma=function(t,e){var n=t.dom.getAttribute(e);return null===n?void 0:n},Ta=function(t,e){return R.from(Ma(t,e))},ka=function(t,e){var n=t.dom;return!(!n||!n.hasAttribute)&&n.hasAttribute(e)},Da=function(t,e){t.dom.removeAttribute(e)},Aa=function(t,e){return er.fromDom(t.dom.cloneNode(e))},Ia=function(t){return Aa(t,!1)},Oa=function(t){if(Ji(t))return"#shadow-root";var e=Ia(t);return wa(e)},La=function(t){return Oa(t)},Ea=function(t,e,n){return oo(e,t.element)&&!oo(e,n)},Na=mi([yi(Vo(),function(t,e){var n=e.event,r=n.originator,o=n.target;return!Ea(t,r,o)||(console.warn(Vo()+" did not get interpreted by the desired target. \nOriginator: "+La(r)+"\nTarget: "+La(o)+"\nCheck the "+Vo()+" event handlers"),!1)})]),Ra=Object.freeze({__proto__:null,events:Na}),Pa=0,za=function(t){var e=new Date,n=e.getTime(),r=Math.floor(1e9*Math.random());return Pa++,t+"_"+r+Pa+String(n)},Ba=b("alloy-id-"),Va=b("data-alloy-id"),Ha=Ba(),Fa=Va(),Wa=function(t,e){var n=za(Ha+t);return Ua(e,n),n},Ua=function(t,e){Object.defineProperty(t.dom,Fa,{value:e,writable:!0})},Ga=function(t){var e=zi(t)?t.dom[Fa]:null;return R.from(e)},ja=function(t){return za(t)},Xa=x,Ya=function(t){var e=function(e){return function(){throw new Error("The component must be in a context to send: "+e+(t?"\n"+La(t().element)+" is not in context.":""))}};return{debugInfo:b("fake"),triggerEvent:e("triggerEvent"),triggerFocus:e("triggerFocus"),triggerEscape:e("triggerEscape"),build:e("build"),addToWorld:e("addToWorld"),removeFromWorld:e("removeFromWorld"),addToGui:e("addToGui"),removeFromGui:e("removeFromGui"),getByUid:e("getByUid"),getByDom:e("getByDom"),broadcast:e("broadcast"),broadcastOn:e("broadcastOn"),broadcastEvent:e("broadcastEvent"),isConnected:C}},qa=Ya(),Za=function(t,e,n){var r=n.toString(),o=r.indexOf(")")+1,i=r.indexOf("("),a=r.substring(i+1,o-1).split(/,\s*/);return t.toFunctionAnnotation=function(){return{name:e,parameters:$a(a.slice(0,1).concat(a.slice(3)))}},t},$a=function(t){return j(t,function(t){return gr(t,"/*")?t.substring(0,t.length-"/*".length):t})},Ka=function(t,e){var n=t.toString(),r=n.indexOf(")")+1,o=n.indexOf("("),i=n.substring(o+1,r-1).split(/,\s*/);return t.toFunctionAnnotation=function(){return{name:e,parameters:$a(i)}},t},Ja=function(t,e){var n=e.toString(),r=n.indexOf(")")+1,o=n.indexOf("("),i=n.substring(o+1,r-1).split(/,\s*/);return t.toFunctionAnnotation=function(){return{name:"OVERRIDE",parameters:$a(i.slice(1))}},t},Qa=za("alloy-premade"),tu=function(t){return le(Qa,t)},eu=function(t){return Vt(t,Qa)},nu=function(t){return Ja(function(e){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];return t.apply(void 0,A([e.getApis(),e],n))},t)},ru={init:function(){return ou({readState:function(){return"No State required"}})}},ou=function(t){return t},iu=function(t,e){var n=j(e,function(t){return Pn(t.name(),[bn("config"),Bn("state",ru)])}),r=nn("component.behaviours",Be(n),t.behaviours).fold(function(e){throw new Error(an(e)+"\nComplete spec:\n"+JSON.stringify(t,null,2))},function(t){return t});return{list:e,data:Ot(r,function(t){var e=t.map(function(t){return{config:t.config,state:t.state.init(t.config)}});return function(){return e}})}},au=function(t){return t.list},uu=function(t){return t.data},su=function(t,e){var n={};return It(t,function(t,r){It(t,function(t,o){var i=Vt(n,o).getOr([]);n[o]=i.concat([e(r,t)])})}),n},lu=function(t){return{classes:void 0!==t.classes?t.classes:[],attributes:void 0!==t.attributes?t.attributes:{},styles:void 0!==t.styles?t.styles:{}}},cu=function(t,e){return k(k({},t),{attributes:k(k({},t.attributes),e.attributes),styles:k(k({},t.styles),e.styles),classes:t.classes.concat(e.classes)})},fu=function(t,e,n,r){var o=k({},e);X(n,function(e){o[e.name()]=e.exhibit(t,r)});var i=su(o,function(t,e){return{name:t,modification:e}}),a=function(t){return $(t,function(t,e){return k(k({},e.modification),t)},{})},u=$(i.classes,function(t,e){return e.modification.concat(t)},[]),s=a(i.attributes),l=a(i.styles);return lu({classes:u,attributes:s,styles:l})},du=function(t,e,n,r){try{var o=ut(n,function(n,o){var i=n[e],a=o[e],u=r.indexOf(i),s=r.indexOf(a);if(-1===u)throw new Error("The ordering for "+t+" does not have an entry for "+i+".\nOrder specified: "+JSON.stringify(r,null,2));if(-1===s)throw new Error("The ordering for "+t+" does not have an entry for "+a+".\nOrder specified: "+JSON.stringify(r,null,2));return u<s?-1:s<u?1:0});return mt.value(o)}catch(i){return mt.error([i])}},hu=function(t,e){return{handler:t,purpose:e}},pu=function(t,e){return{cHandler:t,purpose:e}},gu=function(t,e){return pu(w.apply(void 0,[t.handler].concat(e)),t.purpose)},mu=function(t){return t.cHandler},vu=function(t,e){return{name:t,handler:e}},yu=function(t,e){var n={};return X(t,function(t){n[t.name()]=t.handlers(e)}),n},bu=function(t,e,n){var r=k(k({},n),yu(e,t));return su(r,vu)},xu=function(t,e,n,r){var o=bu(t,n,r);return Cu(o,e)},wu=function(t){var e=mo(t);return function(t,n){for(var r=[],o=2;o<arguments.length;o++)r[o-2]=arguments[o];var i=[t,n].concat(r);e.abort.apply(void 0,i)?n.stop():e.can.apply(void 0,i)&&e.run.apply(void 0,i)}},_u=function(t,e){return mt.error(["The event ("+t+') has more than one behaviour that listens to it.\nWhen this occurs, you must specify an event ordering for the behaviours in your spec (e.g. [ "listing", "toggling" ]).\nThe behaviours that can trigger it are: '+JSON.stringify(j(e,function(t){return t.name}),null,2)])},Su=function(t,e,n){var r=e[n];return r?du("Event: "+n,"name",t,r).map(function(t){var e=j(t,function(t){return t.handler});return vo(e)}):_u(n,t)},Cu=function(t,e){var n=Pt(t,function(t,n){var r=1===t.length?mt.value(t[0].handler):Su(t,e,n);return r.map(function(r){var o=wu(r),i=t.length>1?Z(e[n],function(e){return W(t,function(t){return t.name===e})}).join(" > "):t[0].name;return le(n,hu(o,i))})});return he(n,{})},Mu="alloy.base.behaviour",Tu=function(t){var e;return nn("custom.definition",Be([Xe("dom","dom",te(),Be([bn("tag"),Bn("styles",{}),Bn("classes",[]),Bn("attributes",{}),In("value"),In("innerHtml")])),bn("components"),bn("uid"),Bn("events",{}),Bn("apis",{}),Xe("eventOrder","eventOrder",Qt((e={},e[Uo()]=["disabling",Mu,"toggling","typeaheadevents"],e[Vo()]=[Mu,"focusing","keying"],e[Zo()]=[Mu,"disabling","toggling","representing"],e[Lo()]=[Mu,"representing","streaming","invalidating"],e[ei()]=[Mu,"representing","item-events","tooltipping"],e[So()]=["focusing",Mu,"item-type-events"],e[bo()]=["focusing",Mu,"item-type-events"],e[ko()]=["item-type-events","tooltipping"],e[Wo()]=["receiving","reflecting","tooltipping"],e)),cn()),In("domModification")]),t)},ku=function(t){return k(k({},t.dom),{uid:t.uid,domChildren:j(t.components,function(t){return t.element})})},Du=function(t){return t.domModification.fold(function(){return lu({})},lu)},Au=function(t){return t.events},Iu=function(t,e){var n=Ma(t,e);return void 0===n||""===n?[]:n.split(" ")},Ou=function(t,e,n){var r=Iu(t,e),o=r.concat([n]);return Sa(t,e,o.join(" ")),!0},Lu=function(t,e,n){var r=Z(Iu(t,e),function(t){return t!==n});return r.length>0?Sa(t,e,r.join(" ")):Da(t,e),!1},Eu=function(t){return void 0!==t.dom.classList},Nu=function(t){return Iu(t,"class")},Ru=function(t,e){return Ou(t,"class",e)},Pu=function(t,e){return Lu(t,"class",e)},zu=function(t,e){Eu(t)?t.dom.classList.add(e):Ru(t,e)},Bu=function(t){var e=Eu(t)?t.dom.classList:Nu(t);0===e.length&&Da(t,"class")},Vu=function(t,e){if(Eu(t)){var n=t.dom.classList;n.remove(e)}else Pu(t,e);Bu(t)},Hu=function(t,e){return Eu(t)&&t.dom.classList.contains(e)},Fu=function(t,e){X(e,function(e){zu(t,e)})},Wu=function(t,e){X(e,function(e){Vu(t,e)})},Uu=function(t){return void 0!==t.style&&d(t.style.getPropertyValue)},Gu=function(t){var e=Bi(t)?t.dom.parentNode:t.dom;if(void 0===e||null===e||null===e.ownerDocument)return!1;var n=e.ownerDocument;return oa(er.fromDom(e)).fold(function(){return n.body.contains(e)},y(Gu,ia))},ju=function(){return Xu(er.fromDom(document))},Xu=function(t){var e=t.dom.body;if(null===e||void 0===e)throw new Error("Body is not available yet");return er.fromDom(e)},Yu=function(t,e,n){if(!i(n))throw console.error("Invalid call to CSS.set. Property ",e,":: Value ",n,":: Element ",t),new Error("CSS value must be a string: "+n);Uu(t)&&t.style.setProperty(e,n)},qu=function(t,e){Uu(t)&&t.style.removeProperty(e)},Zu=function(t,e,n){var r=t.dom;Yu(r,e,n)},$u=function(t,e){var n=t.dom;It(e,function(t,e){Yu(n,e,t)})},Ku=function(t,e){var n=t.dom;It(e,function(t,e){t.fold(function(){qu(n,e)},function(t){Yu(n,e,t)})})},Ju=function(t,e){var n=t.dom,r=window.getComputedStyle(n),o=r.getPropertyValue(e);return""!==o||Gu(t)?o:Qu(n,e)},Qu=function(t,e){return Uu(t)?t.style.getPropertyValue(e):""},ts=function(t,e){var n=t.dom,r=Qu(n,e);return R.from(r).filter(function(t){return t.length>0})},es=function(t){var e={},n=t.dom;if(Uu(n))for(var r=0;r<n.style.length;r++){var o=n.style.item(r);e[o]=n.style[o]}return e},ns=function(t,e,n){var r=er.fromTag(t);Zu(r,e,n);var o=ts(r,e);return o.isSome()},rs=function(t,e){var n=t.dom;qu(n,e),Ta(t,"style").map(vr).is("")&&Da(t,"style")},os=function(t){return t.dom.offsetWidth},is=function(t){return t.dom.value},as=function(t,e){if(void 0===e)throw new Error("Value.set was undefined");t.dom.value=e},us=function(t){var e=er.fromTag(t.tag);Ca(e,t.attributes),Fu(e,t.classes),$u(e,t.styles),t.innerHtml.each(function(t){return xa(e,t)});var n=t.domChildren;return pa(e,n),t.value.each(function(t){as(e,t)}),t.uid,Ua(e,t.uid),e},ss=function(t){var e=Vt(t,"behaviours").getOr({}),n=Z(Dt(e),function(t){return void 0!==e[t]});return j(n,function(t){return e[t].me})},ls=function(t,e){return iu(t,e)},cs=function(t){var e=ss(t);return ls(t,e)},fs=function(t,e,n){var r=ku(t),o=Du(t),i={"alloy.base.modification":o},a=e.length>0?fu(n,i,e,r):o;return cu(r,a)},ds=function(t,e,n){var r={"alloy.base.behaviour":Au(t)};return xu(n,t.eventOrder,e,r).getOrDie()},hs=function(t){var e=function(){return b},n=Zn(qa),r=rn(Tu(t)),o=cs(t),i=au(o),a=uu(o),u=fs(r,i,a),s=us(u),l=ds(r,i,a),c=Zn(r.components),f=function(t){n.set(t)},h=function(){n.set(Ya(e))},p=function(){var t=Zi(s),e=nt(t,function(t){return n.get().getByDom(t).fold(function(){return[]},function(t){return[t]})});c.set(e)},g=function(e){var n=a,r=d(n[e.name()])?n[e.name()]:function(){throw new Error("Could not find "+e.name()+" in "+JSON.stringify(t,null,2))};return r()},m=function(t){return d(a[t.name()])},v=function(){return r.apis},y=function(t){return a[t]().map(function(t){return t.state.readState()}).getOr("not enabled")},b={getSystem:n.get,config:g,hasConfigured:m,spec:t,readState:y,getApis:v,connect:f,disconnect:h,element:s,syncComponents:p,components:c.get,events:l};return b},ps=function(t){var e=Vt(t,"components").getOr([]);return j(e,bs)},gs=function(t){var e=Xa(t),n=e.events,r=D(e,["events"]),o=ps(r),i=k(k({},r),{events:k(k({},Ra),n),components:o});return mt.value(hs(i))},ms=function(t){var e=er.fromText(t);return vs({element:e})},vs=function(t){var e=on("external.component",ze([bn("element"),In("uid")]),t),n=Zn(Ya()),r=function(t){n.set(t)},o=function(){n.set(Ya(function(){return i}))};e.uid.each(function(t){Ua(e.element,t)});var i={getSystem:n.get,config:R.none,hasConfigured:C,connect:r,disconnect:o,getApis:function(){return{}},element:e.element,spec:t,readState:b("No state"),syncComponents:g,components:b([]),events:{}};return tu(i)},ys=ja,bs=function(t){return eu(t).fold(function(){var e=t.hasOwnProperty("uid")?t:k({uid:ys("")},t);return gs(e).getOrDie()},function(t){return t})},xs=tu,ws=function(t,e){var n=function(e,n){if(!h(n)&&!n.match(/^[0-9]+$/))throw new Error(t+".set accepts only positive integer values. Value was "+n);var r=e.dom;Uu(r)&&(r.style[t]=n+"px")},r=function(n){var r=e(n);if(r<=0||null===r){var o=Ju(n,t);return parseFloat(o)||0}return r},o=r,i=function(t,e){return K(e,function(e,n){var r=Ju(t,n),o=void 0===r?0:parseInt(r,10);return isNaN(o)?e:e+o},0)},a=function(t,e,n){var r=i(t,n),o=e>r?e-r:0;return o};return{set:n,get:r,getOuter:o,aggregate:i,max:a}},_s=ws("height",function(t){var e=t.dom;return Gu(t)?e.getBoundingClientRect().height:e.offsetHeight}),Ss=function(t){return _s.get(t)},Cs=function(t){return _s.getOuter(t)},Ms=function(t,e){var n=["margin-top","border-top-width","padding-top","padding-bottom","border-bottom-width","margin-bottom"],r=_s.max(t,e,n);Zu(t,"max-height",r+"px")},Ts=function(t,e){var n=function(n,r){return Ts(t+n,e+r)};return{left:t,top:e,translate:n}},ks=Ts,Ds=function(t){var e=t.getBoundingClientRect();return ks(e.left,e.top)},As=function(t,e){return void 0!==t?t:void 0!==e?e:0},Is=function(t){var e=t.dom.ownerDocument,n=e.body,r=e.defaultView,o=e.documentElement;if(n===t.dom)return ks(n.offsetLeft,n.offsetTop);var i=As(null===r||void 0===r?void 0:r.pageYOffset,o.scrollTop),a=As(null===r||void 0===r?void 0:r.pageXOffset,o.scrollLeft),u=As(o.clientTop,n.clientTop),s=As(o.clientLeft,n.clientLeft);return Os(t).translate(a-s,i-u)},Os=function(t){var e=t.dom,n=e.ownerDocument,r=n.body;return r===e?ks(r.offsetLeft,r.offsetTop):Gu(t)?Ds(e):ks(0,0)},Ls=ws("width",function(t){return t.dom.offsetWidth}),Es=function(t,e){return Ls.set(t,e)},Ns=function(t){return Ls.get(t)},Rs=function(t){return Ls.getOuter(t)},Ps=function(t,e){var n=["margin-left","border-left-width","padding-left","padding-right","border-right-width","margin-right"],r=Ls.max(t,e,n);Zu(t,"max-width",r+"px")},zs=function(t,e,n,r,o,i,a){return{target:t,x:e,y:n,stop:r,prevent:o,kill:i,raw:a}},Bs=function(t){var e=er.fromDom(aa(t).getOr(t.target)),n=function(){return t.stopPropagation()},r=function(){return t.preventDefault()},o=v(r,n);return zs(e,t.clientX,t.clientY,n,r,o,t)},Vs=function(t,e){return function(n){t(n)&&e(Bs(n))}},Hs=function(t,e,n,r,o){var i=Vs(n,r);return t.dom.addEventListener(e,i,o),{unbind:w(Us,t,e,i,o)}},Fs=function(t,e,n,r){return Hs(t,e,n,r,!1)},Ws=function(t,e,n,r){return Hs(t,e,n,r,!0)},Us=function(t,e,n,r){t.dom.removeEventListener(e,n,r)},Gs=function(t){var e=void 0!==t?t.dom:document,n=e.body.scrollLeft||e.documentElement.scrollLeft,r=e.body.scrollTop||e.documentElement.scrollTop;return ks(n,r)},js=function(t,e,n){var r=void 0!==n?n.dom:document,o=r.defaultView;o&&o.scrollTo(t,e)},Xs=function(t){var e=void 0===t?window:t;return R.from(e["visualViewport"])},Ys=function(t,e,n,r){return{x:t,y:e,width:n,height:r,right:t+n,bottom:e+r}},qs=function(t){var e=void 0===t?window:t,n=e.document,r=Gs(er.fromDom(n));return Xs(e).fold(function(){var t=e.document.documentElement,n=t.clientWidth,o=t.clientHeight;return Ys(r.left,r.top,n,o)},function(t){return Ys(Math.max(t.pageLeft,r.left),Math.max(t.pageTop,r.top),t.width,t.height)})},Zs=function(t,e){var n=t.view(e);return n.fold(b([]),function(e){var n=t.owner(e),r=Zs(t,n);return[e].concat(r)})},$s=function(t,e){var n=e.owner(t),r=Zs(e,n);return R.some(r)},Ks=function(t){var e,n=t.dom===document?R.none():R.from(null===(e=t.dom.defaultView)||void 0===e?void 0:e.frameElement);return n.map(er.fromDom)},Js=function(t){return Fi(t)},Qs=Object.freeze({__proto__:null,view:Ks,owner:Js}),tl=function(t){var e=er.fromDom(document),n=Gs(e),r=$s(t,Qs);return r.fold(w(Is,t),function(e){var r=Os(t),o=$(e,function(t,e){var n=Os(e);return{left:t.left+n.left,top:t.top+n.top}},{left:0,top:0});return ks(o.left+r.left+n.left,o.top+r.top+n.top)})},el=function(t,e,n){return{point:t,width:e,height:n}},nl=function(t,e,n,r){return{x:t,y:e,width:n,height:r}},rl=function(t,e,n,r){return{x:t,y:e,width:n,height:r,right:t+n,bottom:e+r}},ol=function(t){var e=Is(t),n=Rs(t),r=Cs(t);return rl(e.left,e.top,n,r)},il=function(t){var e=tl(t),n=Rs(t),r=Cs(t);return rl(e.left,e.top,n,r)},al=function(){return qs(window)};function ul(t,e,n,r,o){return t(n,r)?R.some(n):d(o)&&o(n)?R.none():e(n,r,o)}var sl,ll=function(t,e,n){var r=t.dom,o=d(n)?n:C;while(r.parentNode){r=r.parentNode;var i=er.fromDom(r);if(e(i))return R.some(i);if(o(i))break}return R.none()},cl=function(t,e,n){var r=function(t,e){return e(t)};return ul(r,ll,t,e,n)},fl=function(t,e){var n=function(t){for(var r=0;r<t.childNodes.length;r++){var o=er.fromDom(t.childNodes[r]);if(e(o))return R.some(o);var i=n(t.childNodes[r]);if(i.isSome())return i}return R.none()};return n(t.dom)},dl=function(t,e,n){return cl(t,e,n).isSome()},hl=function(t,e,n){return ll(t,function(t){return to(t,e)},n)},pl=function(t,e){return ro(e,t)},gl=function(t,e,n){var r=function(t,e){return to(t,e)};return ul(r,hl,t,e,n)},ml=function(t){var e=cl(t,function(t){if(!zi(t))return!1;var e=Ma(t,"id");return void 0!==e&&e.indexOf("aria-owns")>-1});return e.bind(function(t){var e=Ma(t,"id"),n=ea(t);return pl(n,'[aria-owns="'+e+'"]')})},vl=function(){var t=za("aria-owns"),e=function(e){Sa(e,"aria-owns",t)},n=function(t){Da(t,"aria-owns")};return{id:t,link:e,unlink:n}},yl=function(t,e){return ml(e).exists(function(e){return bl(t,e)})},bl=function(t,e){return dl(e,function(e){return oo(e,t.element)},C)||yl(t,e)},xl="unknown";(function(t){t[t["STOP"]=0]="STOP",t[t["NORMAL"]=1]="NORMAL",t[t["LOGGING"]=2]="LOGGING"})(sl||(sl={}));var wl,_l=Zn({}),Sl=function(t,e){var n=[],r=(new Date).getTime();return{logEventCut:function(t,e,r){n.push({outcome:"cut",target:e,purpose:r})},logEventStopped:function(t,e,r){n.push({outcome:"stopped",target:e,purpose:r})},logNoParent:function(t,e,r){n.push({outcome:"no-parent",target:e,purpose:r})},logEventNoHandlers:function(t,e){n.push({outcome:"no-handlers-left",target:e})},logEventResponse:function(t,e,r){n.push({outcome:"response",purpose:r,target:e})},write:function(){var o=(new Date).getTime();F(["mousemove","mouseover","mouseout",Zo()],t)||console.log(t,{event:t,time:o-r,target:e.dom,sequence:j(n,function(t){return F(["cut","stopped","response"],t.outcome)?"{"+t.purpose+"} "+t.outcome+" at ("+La(t.target)+")":t.outcome})})}}},Cl=function(t,e,n){var r=Vt(_l.get(),t).orThunk(function(){var e=Dt(_l.get());return dt(e,function(e){return t.indexOf(e)>-1?R.some(_l.get()[e]):R.none()})}).getOr(sl.NORMAL);switch(r){case sl.NORMAL:return n(Al());case sl.LOGGING:var o=Sl(t,e),i=n(o);return o.write(),i;case sl.STOP:return!0}},Ml=["alloy/data/Fields","alloy/debugging/Debugging"],Tl=function(){var t=new Error;if(void 0!==t.stack){var e=t.stack.split("\n");return Q(e,function(t){return t.indexOf("alloy")>0&&!W(Ml,function(e){return t.indexOf(e)>-1})}).getOr(xl)}return xl},kl={logEventCut:g,logEventStopped:g,logNoParent:g,logEventNoHandlers:g,logEventResponse:g,write:g},Dl=function(t,e,n){return Cl(t,e,n)},Al=b(kl),Il=b([bn("menu"),bn("selectedMenu")]),Ol=b([bn("item"),bn("selectedItem")]),Ll=(b(Be(Ol().concat(Il()))),b(Be(Ol()))),El=kn("initSize",[bn("numColumns"),bn("numRows")]),Nl=function(){return xn("markers",Ll())},Rl=function(){return kn("markers",[bn("backgroundMenu")].concat(Il()).concat(Ol()))},Pl=function(t){return kn("markers",j(t,bn))},zl=function(t,e,n){Tl();return Xe(e,e,n,Qe(function(t){return mt.value(function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return t.apply(void 0,e)})}))},Bl=function(t){return zl("onHandler",t,Jt(g))},Vl=function(t){return zl("onKeyboardHandler",t,Jt(R.none))},Hl=function(t){return zl("onHandler",t,te())},Fl=function(t){return zl("onKeyboardHandler",t,te())},Wl=function(t,e){return qn(t,b(e))},Ul=function(t){return qn(t,x)},Gl=b(El),jl=function(t,e,n,r,o,i){return{x:t,y:e,bubble:n,direction:r,boundsRestriction:o,label:i}},Xl=Ut.generate([{southeast:[]},{southwest:[]},{northeast:[]},{northwest:[]},{south:[]},{north:[]},{east:[]},{west:[]}]),Yl=function(t,e,n,r,o,i,a,u,s){return t.fold(e,n,r,o,i,a,u,s)},ql=function(t,e,n,r){return t.fold(e,e,r,r,e,r,n,n)},Zl=function(t,e,n,r){return t.fold(e,r,e,r,n,n,e,r)},$l=Xl.southeast,Kl=Xl.southwest,Jl=Xl.northeast,Ql=Xl.northwest,tc=Xl.south,ec=Xl.north,nc=Xl.east,rc=Xl.west,oc=function(t,e){switch(e){case 1:return t.x;case 0:return t.x+t.width;case 2:return t.y;case 3:return t.y+t.height}},ic=function(t,e){return at(["left","right","top","bottom"],function(n){return Vt(e,n).map(function(e){return oc(t,e)})})},ac=function(t,e,n){var r=function(t,r){var o="top"===t||"bottom"===t?n.top:n.left;return Vt(e,t).bind(x).bind(function(e){return"left"===t||"top"===t?e>=r?R.some(e):R.none():e<=r?R.some(e):R.none()}).map(function(t){return t+o}).getOr(r)},o=r("left",t.x),i=r("top",t.y),a=r("right",t.right),u=r("bottom",t.bottom);return rl(o,i,a-o,u-i)},uc=function(t){return t.x},sc=function(t,e){return t.x+t.width/2-e.width/2},lc=function(t,e){return t.x+t.width-e.width},cc=function(t,e){return t.y-e.height},fc=function(t){return t.y+t.height},dc=function(t,e){return t.y+t.height/2-e.height/2},hc=function(t){return t.x+t.width},pc=function(t,e){return t.x-e.width},gc=function(t,e,n){return jl(uc(t),fc(t),n.southeast(),$l(),ic(t,{left:1,top:3}),"layout-se")},mc=function(t,e,n){return jl(lc(t,e),fc(t),n.southwest(),Kl(),ic(t,{right:0,top:3}),"layout-sw")},vc=function(t,e,n){return jl(uc(t),cc(t,e),n.northeast(),Jl(),ic(t,{left:1,bottom:2}),"layout-ne")},yc=function(t,e,n){return jl(lc(t,e),cc(t,e),n.northwest(),Ql(),ic(t,{right:0,bottom:2}),"layout-nw")},bc=function(t,e,n){return jl(sc(t,e),cc(t,e),n.north(),ec(),ic(t,{bottom:2}),"layout-n")},xc=function(t,e,n){return jl(sc(t,e),fc(t),n.south(),tc(),ic(t,{top:3}),"layout-s")},wc=function(t,e,n){return jl(hc(t),dc(t,e),n.east(),nc(),ic(t,{left:0}),"layout-e")},_c=function(t,e,n){return jl(pc(t,e),dc(t,e),n.west(),rc(),ic(t,{right:1}),"layout-w")},Sc=function(){return[gc,mc,vc,yc,xc,bc,wc,_c]},Cc=function(){return[mc,gc,yc,vc,xc,bc,wc,_c]},Mc=function(){return[vc,yc,gc,mc,bc,xc]},Tc=function(){return[yc,vc,mc,gc,bc,xc]},kc=function(){return[gc,mc,vc,yc,xc,bc]},Dc=function(){return[mc,gc,yc,vc,xc,bc]},Ac=function(t,e){return e.universal?t:Z(t,function(t){return F(e.channels,t)})},Ic=function(t){return mi([xi(Wo(),function(e,n){var r=t.channels,o=Dt(r),i=n,a=Ac(o,i);X(a,function(t){var n=r[t],o=n.schema,a=on("channel["+t+"] data\nReceiver: "+La(e.element),o,i.data);n.onReceive(e,a)})})])},Oc=Object.freeze({__proto__:null,events:Ic}),Lc=[xn("channels",tn(mt.value,ze([Hl("onReceive"),Bn("schema",cn())])))],Ec=function(t,e,n){return Ei(function(r){n(r,t,e)})},Nc=function(t,e,n){return Li(function(r,o){n(r,t,e)})},Rc=function(t,e,n,r,o,i){var a=ze(t),u=Pn(e,[zn("config",t)]);return Vc(a,u,e,n,r,o,i)},Pc=function(t,e,n,r,o,i){var a=t,u=Pn(e,[On("config",t)]);return Vc(a,u,e,n,r,o,i)},zc=function(t,e,n){var r=function(r){for(var o=[],i=1;i<arguments.length;i++)o[i-1]=arguments[i];var a=[r].concat(o);return r.config({name:b(t)}).fold(function(){throw new Error("We could not find any behaviour configuration for: "+t+". Using API: "+n)},function(t){var n=Array.prototype.slice.call(a,1);return e.apply(void 0,[r,t.config,t.state].concat(n))})};return Za(r,n,e)},Bc=function(t){return{key:t,value:void 0}},Vc=function(t,e,n,r,o,i,a){var u=function(t){return Ft(t,n)?t[n]():R.none()},s=Ot(o,function(t,e){return zc(n,t,e)}),l=Ot(i,function(t,e){return Ka(t,e)}),c=k(k(k({},l),s),{revoke:w(Bc,n),config:function(e){var r=on(n+"-config",t,e);return{key:n,value:{config:r,me:c,configAsRaw:$t(function(){return on(n+"-config",t,e)}),initialConfig:e,state:a}}},schema:b(e),exhibit:function(t,e){return u(t).bind(function(t){return Vt(r,"exhibit").map(function(n){return n(e,t.config,t.state)})}).getOr(lu({}))},name:b(n),handlers:function(t){return u(t).map(function(t){var e=Vt(r,"events").getOr(function(){return{}});return e(t.config,t.state)}).getOr({})}});return c},Hc=function(t){return ce(t)},Fc=ze([bn("fields"),bn("name"),Bn("active",{}),Bn("apis",{}),Bn("state",ru),Bn("extra",{})]),Wc=function(t){var e=on("Creating behaviour: "+t.name,Fc,t);return Rc(e.fields,e.name,e.active,e.apis,e.extra,e.state)},Uc=ze([bn("branchKey"),bn("branches"),bn("name"),Bn("active",{}),Bn("apis",{}),Bn("state",ru),Bn("extra",{})]),Gc=function(t){var e=on("Creating behaviour: "+t.name,Uc,t);return Pc(sn(e.branchKey,e.branches),e.name,e.active,e.apis,e.extra,e.state)},jc=b(void 0),Xc=Wc({fields:Lc,name:"receiving",active:Oc}),Yc=function(t,e){return lu({classes:[],styles:e.useFixed()?{}:{position:"relative"}})},qc=Object.freeze({__proto__:null,exhibit:Yc}),Zc=function(){return er.fromDom(document)},$c=function(t){return t.dom.focus()},Kc=function(t){return t.dom.blur()},Jc=function(t){var e=ea(t).dom;return t.dom===e.activeElement},Qc=function(t){return void 0===t&&(t=Zc()),R.from(t.dom.activeElement).map(er.fromDom)},tf=function(t){return Qc(ea(t)).filter(function(e){return t.dom.contains(e.dom)})},ef=function(t,e){var n=ea(e),r=Qc(n).bind(function(t){var n=function(e){return oo(t,e)};return n(e)?R.some(e):fl(e,n)}),o=t(e);return r.each(function(t){Qc(n).filter(function(e){return oo(e,t)}).fold(function(){$c(t)},g)}),o},nf=function(t,e,n,r,o){return{position:t,left:e,top:n,right:r,bottom:o}},rf=function(t,e){var n=function(t){return t+"px"};Ku(t,{position:R.some(e.position),left:e.left.map(n),top:e.top.map(n),right:e.right.map(n),bottom:e.bottom.map(n)})},of=Ut.generate([{none:[]},{relative:["x","y","width","height"]},{fixed:["x","y","width","height"]}]),af=function(t,e,n,r,o,i){var a=e.x-n,u=e.y-r,s=e.width,l=e.height,c=o-(a+s),f=i-(u+l),d=R.some(a),h=R.some(u),p=R.some(c),g=R.some(f),m=R.none();return Yl(e.direction,function(){return nf(t,d,h,m,m)},function(){return nf(t,m,h,p,m)},function(){return nf(t,d,m,m,g)},function(){return nf(t,m,m,p,g)},function(){return nf(t,d,h,m,m)},function(){return nf(t,d,m,m,g)},function(){return nf(t,d,h,m,m)},function(){return nf(t,m,h,p,m)})},uf=function(t,e){return t.fold(function(){return nf("absolute",R.some(e.x),R.some(e.y),R.none(),R.none())},function(t,n,r,o){return af("absolute",e,t,n,r,o)},function(t,n,r,o){return af("fixed",e,t,n,r,o)})},sf=function(t,e){var n=w(tl,e),r=t.fold(n,n,function(){var t=Gs();return tl(e).translate(-t.left,-t.top)}),o=Rs(e),i=Cs(e);return rl(r.left,r.top,o,i)},lf=function(t,e){return e.fold(function(){return t.fold(al,al,rl)},function(e){return t.fold(e,e,function(){var n=e(),r=cf(t,n.x,n.y);return rl(r.left,r.top,n.width,n.height)})})},cf=function(t,e,n){var r=ks(e,n),o=function(){var t=Gs();return r.translate(-t.left,-t.top)};return t.fold(b(r),b(r),o)},ff=function(t,e,n,r){return t.fold(e,n,r)},df=(of.none,of.relative),hf=of.fixed,pf=function(t,e){return{anchorBox:t,origin:e}},gf=function(t,e){return pf(t,e)},mf=function(t,e,n,r){var o=t+e;return o>r?n:o<n?r:o},vf=function(t,e,n){return Math.min(Math.max(t,e),n)},yf=Ut.generate([{fit:["reposition"]},{nofit:["reposition","deltaW","deltaH"]}]),bf=function(t,e,n,r,o){var i=o.x,a=o.y,u=o.width,s=o.height,l=t>=i,c=e>=a,f=l&&c,d=t+n<=i+u,h=e+r<=a+s,p=d&&h,g=Math.abs(Math.min(n,l?i+u-t:i-(t+n))),m=Math.abs(Math.min(r,c?a+s-e:a-(e+r))),v=Math.max(o.x,o.right-n),y=Math.max(o.y,o.bottom-r),b=vf(t,o.x,v),x=vf(e,o.y,y);return{originInBounds:f,sizeInBounds:p,limitX:b,limitY:x,deltaW:g,deltaH:m}},xf=function(t,e,n,r){var o=t.x,i=t.y,a=t.bubble.offset,u=a.left,s=a.top,l=ac(r,t.boundsRestriction,a),c=l.y,f=l.bottom,d=l.x,h=l.right,p=o+u,g=i+s,m=bf(p,g,e,n,l),v=m.originInBounds,y=m.sizeInBounds,x=m.limitX,w=m.limitY,_=m.deltaW,S=m.deltaH,C=b(w+S-c),M=b(f-w),T=ql(t.direction,M,M,C),k=b(x+_-d),D=b(h-x),A=Zl(t.direction,D,D,k),I={x:x,y:w,width:_,height:S,maxHeight:T,maxWidth:A,direction:t.direction,classes:{on:t.bubble.classesOn,off:t.bubble.classesOff},label:t.label,candidateYforTest:g};return v&&y?yf.fit(I):yf.nofit(I,_,S)},wf=function(t,e,n,r,o){var i=n.width,a=n.height,u=function(t,u,s,l){var c=t(e,n,r),f=xf(c,i,a,o);return f.fold(yf.fit,function(t,e,n){var r=n>l||e>s;return r?yf.nofit(t,e,n):yf.nofit(u,s,l)})},s=K(t,function(t,e){var n=w(u,e);return t.fold(yf.fit,n)},yf.nofit({x:e.x,y:e.y,width:n.width,height:n.height,maxHeight:n.height,maxWidth:n.width,direction:$l(),classes:{on:[],off:[]},label:"none",candidateYforTest:e.y},-1,-1));return s.fold(x,x)},_f=function(t){return{width:Rs(t),height:Cs(t)}},Sf=function(t,e,n,r){rs(e,"max-height"),rs(e,"max-width");var o=_f(e);return wf(r.preference,t,o,n,r.bounds)},Cf=function(t,e){var n=e.classes;Wu(t,n.off),Fu(t,n.on)},Mf=function(t,e,n){var r=n.maxHeightFunction;r(t,e.maxHeight)},Tf=function(t,e,n){var r=n.maxWidthFunction;r(t,e.maxWidth)},kf=function(t,e,n){rf(t,uf(n.origin,e))},Df=function(t,e){Ms(t,Math.floor(e))},Af=b(function(t,e){Df(t,e),$u(t,{"overflow-x":"hidden","overflow-y":"auto"})}),If=b(function(t,e){Df(t,e)}),Of=function(t,e,n){return void 0===t[e]?n:t[e]},Lf=function(t,e,n,r,o,i){var a=Of(i,"maxHeightFunction",Af()),u=Of(i,"maxWidthFunction",g),s=t.anchorBox,l=t.origin,c={bounds:lf(l,o),origin:l,preference:r,maxHeightFunction:a,maxWidthFunction:u};Ef(s,e,n,c)},Ef=function(t,e,n,r){var o=Sf(t,e,n,r);kf(e,o,r),Cf(e,o),Mf(e,o,r),Tf(e,o,r)},Nf=["valignCentre","alignLeft","alignRight","alignCentre","top","bottom","left","right"],Rf=function(t,e,n){var r=function(t){return Vt(n,t).getOr([])},o=function(t,e,n){var o=it(Nf,n);return{offset:ks(t,e),classesOn:nt(n,r),classesOff:nt(o,r)}};return{southeast:function(){return o(-t,e,["top","alignLeft"])},southwest:function(){return o(t,e,["top","alignRight"])},south:function(){return o(-t/2,e,["top","alignCentre"])},northeast:function(){return o(-t,-e,["bottom","alignLeft"])},northwest:function(){return o(t,-e,["bottom","alignRight"])},north:function(){return o(-t/2,-e,["bottom","alignCentre"])},east:function(){return o(t,-e/2,["valignCentre","left"])},west:function(){return o(-t,-e/2,["valignCentre","right"])},innerNorthwest:function(){return o(-t,e,["top","alignRight"])},innerNortheast:function(){return o(t,e,["top","alignLeft"])},innerNorth:function(){return o(-t/2,e,["top","alignCentre"])},innerSouthwest:function(){return o(-t,-e,["bottom","alignRight"])},innerSoutheast:function(){return o(t,-e,["bottom","alignLeft"])},innerSouth:function(){return o(-t/2,-e,["bottom","alignCentre"])},innerWest:function(){return o(t,-e/2,["valignCentre","right"])},innerEast:function(){return o(-t,-e/2,["valignCentre","left"])}}},Pf=function(){return Rf(0,0,{})},zf=function(t){return t},Bf=function(t,e){return function(n){return"rtl"===Vf(n)?e:t}},Vf=function(t){return"rtl"===Ju(t,"direction")?"rtl":"ltr"};(function(t){t["TopToBottom"]="toptobottom",t["BottomToTop"]="bottomtotop"})(wl||(wl={}));var Hf,Ff="data-alloy-vertical-dir",Wf=function(t){return dl(t,function(t){return zi(t)&&Ma(t,"data-alloy-vertical-dir")===wl.BottomToTop})},Uf=function(){return Pn("layouts",[bn("onLtr"),bn("onRtl"),In("onBottomLtr"),In("onBottomRtl")])},Gf=function(t,e,n,r,o,i,a){var u=a.map(Wf).getOr(!1),s=e.layouts.map(function(e){return e.onLtr(t)}),l=e.layouts.map(function(e){return e.onRtl(t)}),c=u?e.layouts.bind(function(e){return e.onBottomLtr.map(function(e){return e(t)})}).or(s).getOr(o):s.getOr(n),f=u?e.layouts.bind(function(e){return e.onBottomRtl.map(function(e){return e(t)})}).or(l).getOr(i):l.getOr(r),d=Bf(c,f);return d(t)},jf=function(t,e,n){var r=e.hotspot,o=sf(n,r.element),i=Gf(t.element,e,kc(),Dc(),Mc(),Tc(),R.some(e.hotspot.element));return R.some(zf({anchorBox:o,bubble:e.bubble.getOr(Pf()),overrides:e.overrides,layouts:i,placer:R.none()}))},Xf=[bn("hotspot"),In("bubble"),Bn("overrides",{}),Uf(),Wl("placement",jf)],Yf=function(t,e,n){var r=cf(n,e.x,e.y),o=rl(r.left,r.top,e.width,e.height),i=Gf(t.element,e,Sc(),Cc(),Sc(),Cc(),R.none());return R.some(zf({anchorBox:o,bubble:e.bubble,overrides:e.overrides,layouts:i,placer:R.none()}))},qf=[bn("x"),bn("y"),Bn("height",0),Bn("width",0),Bn("bubble",Pf()),Bn("overrides",{}),Uf(),Wl("placement",Yf)],Zf=Ut.generate([{screen:["point"]},{absolute:["point","scrollLeft","scrollTop"]}]),$f=function(t){return t.fold(x,function(t,e,n){return t.translate(-e,-n)})},Kf=function(t){return t.fold(x,x)},Jf=function(t){return K(t,function(t,e){return t.translate(e.left,e.top)},ks(0,0))},Qf=function(t){var e=j(t,$f);return Jf(e)},td=function(t){var e=j(t,Kf);return Jf(e)},ed=Zf.screen,nd=Zf.absolute,rd=function(t,e,n){var r=Gi(n.root).dom,o=function(e){var n=Fi(e),r=Fi(t.element);return oo(n,r)};return R.from(r.frameElement).map(er.fromDom).filter(o).map(Is)},od=function(t,e,n){var r=Fi(t.element),o=Gs(r),i=rd(t,e,n).getOr(o);return nd(i,o.left,o.top)},id=function(t,e,n,r){var o=t,i=e,a=n,u=r;t<0&&(o=0,a=n+t),e<0&&(i=0,u=r+e);var s=ed(ks(o,i));return R.some(el(s,a,u))},ad=function(t,e,n,r,o){return t.map(function(t){var i=[e,t.point],a=ff(r,function(){return td(i)},function(){return td(i)},function(){return Qf(i)}),u=nl(a.left,a.top,t.width,t.height),s=n.showAbove?Mc():kc(),l=n.showAbove?Tc():Dc(),c=Gf(o,n,s,l,s,l,R.none());return zf({anchorBox:u,bubble:n.bubble.getOr(Pf()),overrides:n.overrides,layouts:c,placer:R.none()})})},ud=function(t,e,n){var r=od(t,n,e);return e.node.filter(Gu).bind(function(o){var i=o.dom.getBoundingClientRect(),a=id(i.left,i.top,i.width,i.height),u=e.node.getOr(t.element);return ad(a,r,e,n,u)})},sd=[bn("node"),bn("root"),In("bubble"),Uf(),Bn("overrides",{}),Bn("showAbove",!1),Wl("placement",ud)],ld="\ufeff",cd=" ",fd=function(t,e,n,r){return{start:t,soffset:e,finish:n,foffset:r}},dd={create:fd},hd=Ut.generate([{before:["element"]},{on:["element","offset"]},{after:["element"]}]),pd=function(t,e,n,r){return t.fold(e,n,r)},gd=function(t){return t.fold(x,x,x)},md=hd.before,vd=hd.on,yd=hd.after,bd={before:md,on:vd,after:yd,cata:pd,getStart:gd},xd=Ut.generate([{domRange:["rng"]},{relative:["startSitu","finishSitu"]},{exact:["start","soffset","finish","foffset"]}]),wd=function(t){return xd.exact(t.start,t.soffset,t.finish,t.foffset)},_d=function(t){return t.match({domRange:function(t){return er.fromDom(t.startContainer)},relative:function(t,e){return bd.getStart(t)},exact:function(t,e,n,r){return t}})},Sd=xd.domRange,Cd=xd.relative,Md=xd.exact,Td=function(t){var e=_d(t);return Gi(e)},kd=dd.create,Dd={domRange:Sd,relative:Cd,exact:Md,exactFromRange:wd,getWin:Td,range:kd},Ad=function(t,e){e.fold(function(e){t.setStartBefore(e.dom)},function(e,n){t.setStart(e.dom,n)},function(e){t.setStartAfter(e.dom)})},Id=function(t,e){e.fold(function(e){t.setEndBefore(e.dom)},function(e,n){t.setEnd(e.dom,n)},function(e){t.setEndAfter(e.dom)})},Od=function(t,e,n){var r=t.document.createRange();return Ad(r,e),Id(r,n),r},Ld=function(t,e,n,r,o){var i=t.document.createRange();return i.setStart(e.dom,n),i.setEnd(r.dom,o),i},Ed=function(t){return{left:t.left,top:t.top,right:t.right,bottom:t.bottom,width:t.width,height:t.height}},Nd=function(t){var e=t.getClientRects(),n=e.length>0?e[0]:t.getBoundingClientRect();return n.width>0||n.height>0?R.some(n).map(Ed):R.none()},Rd=Ut.generate([{ltr:["start","soffset","finish","foffset"]},{rtl:["start","soffset","finish","foffset"]}]),Pd=function(t,e,n){return e(er.fromDom(n.startContainer),n.startOffset,er.fromDom(n.endContainer),n.endOffset)},zd=function(t,e){return e.match({domRange:function(t){return{ltr:b(t),rtl:R.none}},relative:function(e,n){return{ltr:$t(function(){return Od(t,e,n)}),rtl:$t(function(){return R.some(Od(t,n,e))})}},exact:function(e,n,r,o){return{ltr:$t(function(){return Ld(t,e,n,r,o)}),rtl:$t(function(){return R.some(Ld(t,r,o,e,n))})}}})},Bd=function(t,e){var n=e.ltr();if(n.collapsed){var r=e.rtl().filter(function(t){return!1===t.collapsed});return r.map(function(t){return Rd.rtl(er.fromDom(t.endContainer),t.endOffset,er.fromDom(t.startContainer),t.startOffset)}).getOrThunk(function(){return Pd(t,Rd.ltr,n)})}return Pd(t,Rd.ltr,n)},Vd=function(t,e){var n=zd(t,e);return Bd(t,n)},Hd=function(t,e){var n=Vd(t,e);return n.match({ltr:function(e,n,r,o){var i=t.document.createRange();return i.setStart(e.dom,n),i.setEnd(r.dom,o),i},rtl:function(e,n,r,o){var i=t.document.createRange();return i.setStart(r.dom,o),i.setEnd(e.dom,n),i}})},Fd=(Rd.ltr,Rd.rtl,function(t,e){var n=function(n){if(!t(n))throw new Error("Can only get "+e+" value of a "+e+" node");return r(n).getOr("")},r=function(e){return t(e)?R.from(e.dom.nodeValue):R.none()},o=function(n,r){if(!t(n))throw new Error("Can only set raw "+e+" value of a "+e+" node");n.dom.nodeValue=r};return{get:n,getOption:r,set:o}}),Wd=Fd(Bi,"text"),Ud=function(t){return Wd.get(t)},Gd=function(t){return Wd.getOption(t)},jd=function(t){return"img"===Ni(t)?1:Gd(t).fold(function(){return Zi(t).length},function(t){return t.length})},Xd=function(t){return Gd(t).filter(function(t){return 0!==t.trim().length||t.indexOf(cd)>-1}).isSome()},Yd=["img","br"],qd=function(t){var e=Xd(t);return e||F(Yd,Ni(t))},Zd=function(t){return $d(t,qd)},$d=function(t,e){var n=function(t){for(var r=Zi(t),o=r.length-1;o>=0;o--){var i=r[o];if(e(i))return R.some(i);var a=n(i);if(a.isSome())return a}return R.none()};return n(t)},Kd=function(t,e){return no(e,t)},Jd=function(t,e,n,r){var o=Fi(t),i=o.dom.createRange();return i.setStart(t.dom,e),i.setEnd(n.dom,r),i},Qd=function(t,e,n,r){var o=Jd(t,e,n,r),i=oo(t,n)&&e===r;return o.collapsed&&!i},th=function(t){return R.from(t.getSelection())},eh=function(t){if(t.rangeCount>0){var e=t.getRangeAt(0),n=t.getRangeAt(t.rangeCount-1);return R.some(dd.create(er.fromDom(e.startContainer),e.startOffset,er.fromDom(n.endContainer),n.endOffset))}return R.none()},nh=function(t){if(null===t.anchorNode||null===t.focusNode)return eh(t);var e=er.fromDom(t.anchorNode),n=er.fromDom(t.focusNode);return Qd(e,t.anchorOffset,n,t.focusOffset)?R.some(dd.create(e,t.anchorOffset,n,t.focusOffset)):eh(t)},rh=function(t){return th(t).filter(function(t){return t.rangeCount>0}).bind(nh)},oh=function(t,e){var n=Hd(t,e);return Nd(n)},ih=function(t,e){return{element:t,offset:e}},ah=function(t,e){var n=Zi(t);if(0===n.length)return ih(t,e);if(e<n.length)return ih(n[e],0);var r=n[n.length-1],o=Bi(r)?Ud(r).length:Zi(r).length;return ih(r,o)},uh=function(t,e){return Bi(t)?ih(t,e):ah(t,e)},sh=function(t,e){var n=e.getSelection.getOrThunk(function(){return function(){return rh(t)}});return n().map(function(t){var e=uh(t.start,t.soffset),n=uh(t.finish,t.foffset);return Dd.range(e.element,e.offset,n.element,n.offset)})},lh=function(t,e,n){var r=Gi(e.root).dom,o=od(t,n,e),i=sh(r,e).bind(function(t){var e=oh(r,Dd.exactFromRange(t)).orThunk(function(){var e=er.fromText(ld);return sa(t.start,e),oh(r,Dd.exact(e,0,e,1)).map(function(t){return ma(e),t})});return e.bind(function(t){return id(t.left,t.top,t.width,t.height)})}),a=sh(r,e).bind(function(t){return zi(t.start)?R.some(t.start):Xi(t.start)}),u=a.getOr(t.element);return ad(i,o,e,n,u)},ch=[In("getSelection"),bn("root"),In("bubble"),Uf(),Bn("overrides",{}),Bn("showAbove",!1),Wl("placement",lh)],fh=function(t){return t.x+t.width},dh=function(t,e){return t.x-e.width},hh=function(t,e){return t.y-e.height+t.height},ph=function(t){return t.y},gh=function(t,e,n){return jl(fh(t),ph(t),n.southeast(),$l(),ic(t,{left:0,top:2}),"link-layout-se")},mh=function(t,e,n){return jl(dh(t,e),ph(t),n.southwest(),Kl(),ic(t,{right:1,top:2}),"link-layout-sw")},vh=function(t,e,n){return jl(fh(t),hh(t,e),n.northeast(),Jl(),ic(t,{left:0,bottom:3}),"link-layout-ne")},yh=function(t,e,n){return jl(dh(t,e),hh(t,e),n.northwest(),Ql(),ic(t,{right:1,bottom:3}),"link-layout-nw")},bh=function(){return[gh,mh,vh,yh]},xh=function(){return[mh,gh,yh,vh]},wh=function(t,e,n){var r=sf(n,e.item.element),o=Gf(t.element,e,bh(),xh(),bh(),xh(),R.none());return R.some(zf({anchorBox:r,bubble:Pf(),overrides:e.overrides,layouts:o,placer:R.none()}))},_h=[bn("item"),Uf(),Bn("overrides",{}),Wl("placement",wh)],Sh=sn("anchor",{selection:ch,node:sd,hotspot:Xf,submenu:_h,makeshift:qf}),Ch=function(){var t=document.documentElement;return hf(0,0,t.clientWidth,t.clientHeight)},Mh=function(t){var e=Is(t.element),n=t.element.dom.getBoundingClientRect();return df(e.left,e.top,n.width,n.height)},Th=function(t,e,n,r,o){var i=gf(n.anchorBox,e);Lf(i,o.element,n.bubble,n.layouts,r,n.overrides)},kh=function(t,e,n,r,o){Dh(t,e,n,r,o,R.none())},Dh=function(t,e,n,r,o,i){var a=i.map(ol);return Ah(t,e,n,r,o,a)},Ah=function(t,e,n,r,o,i){var a=on("positioning anchor.info",Sh,r);ef(function(){Zu(o.element,"position","fixed");var n=ts(o.element,"visibility");Zu(o.element,"visibility","hidden");var r=e.useFixed()?Ch():Mh(t),u=a.placement,s=i.map(b).or(e.getBounds);u(t,a,r).each(function(e){var n=e.placer.getOr(Th);n(t,r,e,s,o)}),n.fold(function(){rs(o.element,"visibility")},function(t){Zu(o.element,"visibility",t)}),ts(o.element,"left").isNone()&&ts(o.element,"top").isNone()&&ts(o.element,"right").isNone()&&ts(o.element,"bottom").isNone()&&ts(o.element,"position").is("fixed")&&rs(o.element,"position")},o.element)},Ih=function(t,e,n){return e.useFixed()?"fixed":"absolute"},Oh=Object.freeze({__proto__:null,position:kh,positionWithin:Dh,positionWithinBounds:Ah,getMode:Ih}),Lh=[Bn("useFixed",C),In("getBounds")],Eh=Wc({fields:Lh,name:"positioning",active:qc,apis:Oh}),Nh=function(t){ci(t,ei());var e=t.components();X(e,Nh)},Rh=function(t){var e=t.components();X(e,Rh),ci(t,ti())},Ph=function(t,e){fa(t.element,e.element)},zh=function(t){X(t.components(),function(t){return ma(t.element)}),ga(t.element),t.syncComponents()},Bh=function(t,e){var n=t.components();zh(t);var r=it(n,e);X(r,function(e){Nh(e),t.getSystem().removeFromWorld(e)}),X(e,function(e){e.getSystem().isConnected()?Ph(t,e):(t.getSystem().addToWorld(e),Ph(t,e),Gu(t.element)&&Rh(e)),t.syncComponents()})},Vh=function(t,e){Hh(t,e,fa)},Hh=function(t,e,n){t.getSystem().addToWorld(e),n(t.element,e.element),Gu(t.element)&&Rh(e),t.syncComponents()},Fh=function(t){Nh(t),ma(t.element),t.getSystem().removeFromWorld(t)},Wh=function(t){var e=ji(t.element).bind(function(e){return t.getSystem().getByDom(e).toOptional()});Fh(t),e.each(function(t){t.syncComponents()})},Uh=function(t){var e=t.components();X(e,Fh),ga(t.element),t.syncComponents()},Gh=function(t,e){Xh(t,e,fa)},jh=function(t,e){Xh(t,e,la)},Xh=function(t,e,n){n(t,e.element);var r=Zi(e.element);X(r,function(t){e.getByDom(t).each(Rh)})},Yh=function(t){var e=Zi(t.element);X(e,function(e){t.getByDom(e).each(Nh)}),ma(t.element)},qh=function(t,e,n,r){n.get().each(function(e){Uh(t)});var o=e.getAttachPoint(t);Vh(o,t);var i=t.getSystem().build(r);return Vh(t,i),n.set(i),i},Zh=function(t,e,n,r){var o=qh(t,e,n,r);return e.onOpen(t,o),o},$h=function(t,e,n,r){return n.get().map(function(){return qh(t,e,n,r)})},Kh=function(t,e,n,r,o){op(t,e),Zh(t,e,n,r),o(),ap(t,e)},Jh=function(t,e,n){n.get().each(function(r){Uh(t),Wh(t),e.onClose(t,r),n.clear()})},Qh=function(t,e,n){return n.isOpen()},tp=function(t,e,n,r){return Qh(t,e,n)&&n.get().exists(function(n){return e.isPartOf(t,n,r)})},ep=function(t,e,n){return n.get()},np=function(t,e,n,r){ts(t.element,e).fold(function(){Da(t.element,n)},function(e){Sa(t.element,n,e)}),Zu(t.element,e,r)},rp=function(t,e,n){Ta(t.element,n).fold(function(){return rs(t.element,e)},function(n){return Zu(t.element,e,n)})},op=function(t,e,n){var r=e.getAttachPoint(t);Zu(t.element,"position",Eh.getMode(r)),np(t,"visibility",e.cloakVisibilityAttr,"hidden")},ip=function(t){return W(["top","left","right","bottom"],function(e){return ts(t,e).isSome()})},ap=function(t,e,n){ip(t.element)||rs(t.element,"position"),rp(t,"visibility",e.cloakVisibilityAttr)},up=Object.freeze({__proto__:null,cloak:op,decloak:ap,open:Zh,openWhileCloaked:Kh,close:Jh,isOpen:Qh,isPartOf:tp,getState:ep,setContent:$h}),sp=function(t,e){return mi([xi(Yo(),function(n,r){Jh(n,t,e)})])},lp=Object.freeze({__proto__:null,events:sp}),cp=[Bl("onOpen"),Bl("onClose"),bn("isPartOf"),bn("getAttachPoint"),Bn("cloakVisibilityAttr","data-precloak-visibility")],fp=function(){var t=Zn(R.none()),e=b("not-implemented"),n=function(){return t.get().isSome()},r=function(e){t.set(R.some(e))},o=function(){return t.get()},i=function(){t.set(R.none())};return ou({readState:e,isOpen:n,clear:i,set:r,get:o})},dp=Object.freeze({__proto__:null,init:fp}),hp=Wc({fields:cp,name:"sandboxing",active:lp,apis:up,state:dp}),pp=b("dismiss.popups"),gp=b("reposition.popups"),mp=b("mouse.released"),vp=ze([Bn("isExtraPart",C),Pn("fireEventInstead",[Bn("event",ni())])]),yp=function(t){var e,n=on("Dismissal",vp,t);return e={},e[pp()]={schema:ze([bn("target")]),onReceive:function(t,e){if(hp.isOpen(t)){var r=hp.isPartOf(t,e.target)||n.isExtraPart(t,e.target);r||n.fireEventInstead.fold(function(){return hp.close(t)},function(e){return ci(t,e.event)})}}},e},bp=ze([Pn("fireEventInstead",[Bn("event",ri())]),Mn("doReposition")]),xp=function(t){var e,n=on("Reposition",bp,t);return e={},e[gp()]={onReceive:function(t){hp.isOpen(t)&&n.fireEventInstead.fold(function(){return n.doReposition(t)},function(e){return ci(t,e.event)})}},e},wp=function(t,e,n){e.store.manager.onLoad(t,e,n)},_p=function(t,e,n){e.store.manager.onUnload(t,e,n)},Sp=function(t,e,n,r){e.store.manager.setValue(t,e,n,r)},Cp=function(t,e,n){return e.store.manager.getValue(t,e,n)},Mp=function(t,e,n){return n},Tp=Object.freeze({__proto__:null,onLoad:wp,onUnload:_p,setValue:Sp,getValue:Cp,getState:Mp}),kp=function(t,e){var n=t.resetOnDom?[Ii(function(n,r){wp(n,t,e)}),Oi(function(n,r){_p(n,t,e)})]:[Nc(t,e,wp)];return mi(n)},Dp=Object.freeze({__proto__:null,events:kp}),Ap=function(){var t=Zn(null),e=function(){return{mode:"memory",value:t.get()}},n=function(){return null===t.get()},r=function(){t.set(null)};return ou({set:t.set,get:t.get,isNotSet:n,clear:r,readState:e})},Ip=function(){var t=g;return ou({readState:t})},Op=function(){var t=Zn({}),e=Zn({}),n=function(){return{mode:"dataset",dataByValue:t.get(),dataByText:e.get()}},r=function(){t.set({}),e.set({})},o=function(n){return Vt(t.get(),n).orThunk(function(){return Vt(e.get(),n)})},i=function(n){var r=t.get(),o=e.get(),i={},a={};X(n,function(t){i[t.value]=t,Vt(t,"meta").each(function(e){Vt(e,"text").each(function(e){a[e]=t})})}),t.set(k(k({},r),i)),e.set(k(k({},o),a))};return ou({readState:n,lookup:o,update:i,clear:r})},Lp=function(t){return t.store.manager.state(t)},Ep=Object.freeze({__proto__:null,memory:Ap,dataset:Op,manual:Ip,init:Lp}),Np=function(t,e,n,r){var o=e.store;n.update([r]),o.setValue(t,r),e.onSetValue(t,r)},Rp=function(t,e,n){var r=e.store,o=r.getDataKey(t);return n.lookup(o).fold(function(){return r.getFallbackEntry(o)},function(t){return t})},Pp=function(t,e,n){var r=e.store;r.initialValue.each(function(r){Np(t,e,n,r)})},zp=function(t,e,n){n.clear()},Bp=[In("initialValue"),bn("getFallbackEntry"),bn("getDataKey"),bn("setValue"),Wl("manager",{setValue:Np,getValue:Rp,onLoad:Pp,onUnload:zp,state:Op})],Vp=function(t,e,n){return e.store.getValue(t)},Hp=function(t,e,n,r){e.store.setValue(t,r),e.onSetValue(t,r)},Fp=function(t,e,n){e.store.initialValue.each(function(n){e.store.setValue(t,n)})},Wp=[bn("getValue"),Bn("setValue",g),In("initialValue"),Wl("manager",{setValue:Hp,getValue:Vp,onLoad:Fp,onUnload:g,state:ru.init})],Up=function(t,e,n,r){n.set(r),e.onSetValue(t,r)},Gp=function(t,e,n){return n.get()},jp=function(t,e,n){e.store.initialValue.each(function(t){n.isNotSet()&&n.set(t)})},Xp=function(t,e,n){n.clear()},Yp=[In("initialValue"),Wl("manager",{setValue:Up,getValue:Gp,onLoad:jp,onUnload:Xp,state:Ap})],qp=[Vn("store",{mode:"memory"},sn("mode",{memory:Yp,manual:Wp,dataset:Bp})),Bl("onSetValue"),Bn("resetOnDom",!1)],Zp=Wc({fields:qp,name:"representing",active:Dp,apis:Tp,extra:{setValueFrom:function(t,e){var n=Zp.getValue(e);Zp.setValue(t,n)}},state:Ep}),$p=function(t,e){return Yn(t,{},j(e,function(e){return Tn(e.name(),"Cannot configure "+e.name()+" for "+t)}).concat([qn("dump",x)]))},Kp=function(t){return t.dump},Jp=function(t,e){return k(k({},t.dump),Hc(e))},Qp={field:$p,augment:Jp,get:Kp},tg="placeholder",eg=Ut.generate([{single:["required","valueThunk"]},{multiple:["required","valueThunks"]}]),ng=function(t){return Ht(t,"uiType")},rg=function(t,e,n,r){return t.exists(function(t){return t!==n.owner})?eg.single(!0,b(n)):Vt(r,n.name).fold(function(){throw new Error("Unknown placeholder component: "+n.name+"\nKnown: ["+Dt(r)+"]\nNamespace: "+t.getOr("none")+"\nSpec: "+JSON.stringify(n,null,2))},function(t){return t.replace()})},og=function(t,e,n,r){return ng(n)&&n.uiType===tg?rg(t,e,n,r):eg.single(!1,b(n))},ig=function(t,e,n,r){var o=og(t,e,n,r);return o.fold(function(o,i){var a=ng(n)?i(e,n.config,n.validated):i(e),u=Vt(a,"components").getOr([]),s=nt(u,function(n){return ig(t,e,n,r)});return[k(k({},a),{components:s})]},function(t,r){if(ng(n)){var o=r(e,n.config,n.validated),i=n.validated.preprocess.getOr(x);return i(o)}return r(e)})},ag=function(t,e,n,r){return nt(n,function(n){return ig(t,e,n,r)})},ug=function(t,e){var n=!1,r=function(){return n},o=function(){if(n)throw new Error("Trying to use the same placeholder more than once: "+t);return n=!0,e},i=function(){return e.fold(function(t,e){return t},function(t,e){return t})};return{name:b(t),required:i,used:r,replace:o}},sg=function(t,e,n,r){var o=Ot(r,function(t,e){return ug(e,t)}),i=ag(t,e,n,o);return It(o,function(n){if(!1===n.used()&&n.required())throw new Error("Placeholder: "+n.name()+" was not found in components list\nNamespace: "+t.getOr("none")+"\nComponents: "+JSON.stringify(e.components,null,2))}),i},lg=eg.single,cg=eg.multiple,fg=b(tg),dg=Ut.generate([{required:["data"]},{external:["data"]},{optional:["data"]},{group:["data"]}]),hg=Bn("factory",{sketch:x}),pg=Bn("schema",[]),gg=bn("name"),mg=Xe("pname","pname",ne(function(t){return"<alloy."+za(t.name)+">"}),cn()),vg=qn("schema",function(){return[In("preprocess")]}),yg=Bn("defaults",b({})),bg=Bn("overrides",b({})),xg=Be([hg,pg,gg,mg,yg,bg]),wg=Be([hg,pg,gg,yg,bg]),_g=Be([hg,pg,gg,mg,yg,bg]),Sg=Be([hg,vg,gg,bn("unit"),mg,yg,bg]),Cg=function(t){return t.fold(R.some,R.none,R.some,R.some)},Mg=function(t){var e=function(t){return t.name};return t.fold(e,e,e,e)},Tg=function(t){return t.fold(x,x,x,x)},kg=function(t,e){return function(n){var r=on("Converting part type",e,n);return t(r)}},Dg=kg(dg.required,xg),Ag=kg(dg.external,wg),Ig=kg(dg.optional,_g),Og=kg(dg.group,Sg),Lg=b("entirety"),Eg=Object.freeze({__proto__:null,required:Dg,external:Ag,optional:Ig,group:Og,asNamedPart:Cg,name:Mg,asCommon:Tg,original:Lg}),Ng=function(t,e,n,r){return qt(e.defaults(t,n,r),n,{uid:t.partUids[e.name]},e.overrides(t,n,r))},Rg=function(t,e,n){var r={},o={};return X(n,function(t){t.fold(function(t){r[t.pname]=lg(!0,function(e,n,r){return t.factory.sketch(Ng(e,t,n,r))})},function(t){var n=e.parts[t.name];o[t.name]=b(t.factory.sketch(Ng(e,t,n[Lg()]),n))},function(t){r[t.pname]=lg(!1,function(e,n,r){return t.factory.sketch(Ng(e,t,n,r))})},function(t){r[t.pname]=cg(!0,function(e,n,r){var o=e[t.name];return j(o,function(n){return t.factory.sketch(qt(t.defaults(e,n,r),n,t.overrides(e,n)))})})})}),{internals:b(r),externals:b(o)}},Pg=function(t,e){var n={};return X(e,function(e){Cg(e).each(function(e){var r=zg(t,e.pname);n[e.name]=function(n){var o=on("Part: "+e.name+" in "+t,Be(e.schema),n);return k(k({},r),{config:n,validated:o})}})}),n},zg=function(t,e){return{uiType:fg(),owner:t,name:e}},Bg=function(t,e,n){return{uiType:fg(),owner:t,name:e,config:n,validated:{}}},Vg=function(t){return nt(t,function(t){return t.fold(R.none,R.some,R.none,R.none).map(function(t){return kn(t.name,t.schema.concat([Ul(Lg())]))}).toArray()})},Hg=function(t){return j(t,Mg)},Fg=function(t,e,n){return Rg(t,e,n)},Wg=function(t,e,n){return sg(R.some(t),e,e.components,n)},Ug=function(t,e,n){var r=e.partUids[n];return t.getSystem().getByUid(r).toOptional()},Gg=function(t,e,n){return Ug(t,e,n).getOrDie("Could not find part: "+n)},jg=function(t,e,n){var r={},o=e.partUids,i=t.getSystem();return X(n,function(t){r[t]=b(i.getByUid(o[t]))}),r},Xg=function(t,e){var n=t.getSystem();return Ot(e.partUids,function(t,e){return b(n.getByUid(t))})},Yg=function(t){return Dt(t.partUids)},qg=function(t,e,n){var r={},o=e.partUids,i=t.getSystem();return X(n,function(t){r[t]=b(i.getByUid(o[t]).getOrDie())}),r},Zg=function(t,e){var n=Hg(e);return ce(j(n,function(e){return{key:e,value:t+"-"+e}}))},$g=function(t){return Xe("partUids","partUids",re(function(e){return Zg(e.uid,t)}),cn())},Kg=Object.freeze({__proto__:null,generate:Pg,generateOne:Bg,schemas:Vg,names:Hg,substitutes:Fg,components:Wg,defaultUids:Zg,defaultUidsSchema:$g,getAllParts:Xg,getAllPartNames:Yg,getPart:Ug,getPartOrDie:Gg,getParts:jg,getPartsOrDie:qg}),Jg=function(t,e){var n=t.length>0?[kn("parts",t)]:[];return n.concat([bn("uid"),Bn("dom",{}),Bn("components",[]),Ul("originalSpec"),Bn("debug.sketcher",{})]).concat(e)},Qg=function(t,e,n,r,o){var i=Jg(r,o);return on(t+" [SpecSchema]",ze(i.concat(e)),n)},tm=function(t,e,n,r){var o=rm(r),i=Qg(t,e,o,[],[]);return n(i,o)},em=function(t,e,n,r,o){var i=rm(o),a=Vg(n),u=$g(n),s=Qg(t,e,i,a,[u]),l=Fg(t,s,n),c=Wg(t,s,l.internals());return r(s,c,i,l.externals())},nm=function(t){return Ht(t,"uid")},rm=function(t){return nm(t)?t:k(k({},t),{uid:ja("uid")})},om=function(t){return void 0!==t.uid},im=ze([bn("name"),bn("factory"),bn("configFields"),Bn("apis",{}),Bn("extraApis",{})]),am=ze([bn("name"),bn("factory"),bn("configFields"),bn("partFields"),Bn("apis",{}),Bn("extraApis",{})]),um=function(t){var e=on("Sketcher for "+t.name,im,t),n=function(t){return tm(e.name,e.configFields,e.factory,t)},r=Ot(e.apis,nu),o=Ot(e.extraApis,function(t,e){return Ka(t,e)});return k(k({name:e.name,configFields:e.configFields,sketch:n},r),o)},sm=function(t){var e=on("Sketcher for "+t.name,am,t),n=function(t){return em(e.name,e.configFields,e.partFields,e.factory,t)},r=Pg(e.name,e.partFields),o=Ot(e.apis,nu),i=Ot(e.extraApis,function(t,e){return Ka(t,e)});return k(k({name:e.name,partFields:e.partFields,configFields:e.configFields,sketch:n,parts:r},o),i)},lm=function(t){for(var e=[],n=function(t){e.push(t)},r=0;r<t.length;r++)t[r].each(n);return e},cm=function(t){for(var e=[],n=0;n<t.length;n++){var r=t[n];if(!r.isSome())return R.none();e.push(r.getOrDie())}return R.some(e)},fm=function(t,e,n){return t.isSome()&&e.isSome()?R.some(n(t.getOrDie(),e.getOrDie())):R.none()},dm=function(t,e,n,r){return t.isSome()&&e.isSome()&&n.isSome()?R.some(r(t.getOrDie(),e.getOrDie(),n.getOrDie())):R.none()},hm=function(t,e){return void 0!==t&&null!==t?R.some(e(t)):R.none()},pm=function(t,e){return t?R.some(e):R.none()},gm=function(t){return"input"===Ni(t)&&"radio"!==Ma(t,"type")||"textarea"===Ni(t)},mm=function(t,e,n){return e.find(t)},vm=Object.freeze({__proto__:null,getCurrent:mm}),ym=[bn("find")],bm=Wc({fields:ym,name:"composing",apis:vm}),xm=function(t,e,n,r){var o=Kd(t.element,"."+e.highlightClass);X(o,function(n){W(r,function(t){return t.element===n})||(Vu(n,e.highlightClass),t.getSystem().getByDom(n).each(function(n){e.onDehighlight(t,n),ci(n,li())}))})},wm=function(t,e,n){return xm(t,e,n,[])},_m=function(t,e,n,r){Dm(t,e,n,r)&&(Vu(r.element,e.highlightClass),e.onDehighlight(t,r),ci(r,li()))},Sm=function(t,e,n,r){xm(t,e,n,[r]),Dm(t,e,n,r)||(zu(r.element,e.highlightClass),e.onHighlight(t,r),ci(r,si()))},Cm=function(t,e,n){Om(t,e).each(function(r){Sm(t,e,n,r)})},Mm=function(t,e,n){Lm(t,e).each(function(r){Sm(t,e,n,r)})},Tm=function(t,e,n,r){Im(t,e,n,r).fold(function(t){throw t},function(r){Sm(t,e,n,r)})},km=function(t,e,n,r){var o=Pm(t,e),i=Q(o,r);i.each(function(r){Sm(t,e,n,r)})},Dm=function(t,e,n,r){return Hu(r.element,e.highlightClass)},Am=function(t,e,n){return pl(t.element,"."+e.highlightClass).bind(function(e){return t.getSystem().getByDom(e).toOptional()})},Im=function(t,e,n,r){var o=Kd(t.element,"."+e.itemClass);return R.from(o[r]).fold(function(){return mt.error(new Error("No element found with index "+r))},t.getSystem().getByDom)},Om=function(t,e,n){return pl(t.element,"."+e.itemClass).bind(function(e){return t.getSystem().getByDom(e).toOptional()})},Lm=function(t,e,n){var r=Kd(t.element,"."+e.itemClass),o=r.length>0?R.some(r[r.length-1]):R.none();return o.bind(function(e){return t.getSystem().getByDom(e).toOptional()})},Em=function(t,e,n,r){var o=Kd(t.element,"."+e.itemClass),i=tt(o,function(t){return Hu(t,e.highlightClass)});return i.bind(function(e){var n=mf(e,r,0,o.length-1);return t.getSystem().getByDom(o[n]).toOptional()})},Nm=function(t,e,n){return Em(t,e,n,-1)},Rm=function(t,e,n){return Em(t,e,n,1)},Pm=function(t,e,n){var r=Kd(t.element,"."+e.itemClass);return lm(j(r,function(e){return t.getSystem().getByDom(e).toOptional()}))},zm=Object.freeze({__proto__:null,dehighlightAll:wm,dehighlight:_m,highlight:Sm,highlightFirst:Cm,highlightLast:Mm,highlightAt:Tm,highlightBy:km,isHighlighted:Dm,getHighlighted:Am,getFirst:Om,getLast:Lm,getPrevious:Nm,getNext:Rm,getCandidates:Pm}),Bm=[bn("highlightClass"),bn("itemClass"),Bl("onHighlight"),Bl("onDehighlight")],Vm=Wc({fields:Bm,name:"highlighting",apis:zm}),Hm=[8],Fm=[9],Wm=[13],Um=[27],Gm=[32],jm=[37],Xm=[38],Ym=[39],qm=[40],Zm=function(t,e,n){var r=ot(t.slice(0,e)),o=ot(t.slice(e+1));return Q(r.concat(o),n)},$m=function(t,e,n){var r=ot(t.slice(0,e));return Q(r,n)},Km=function(t,e,n){var r=t.slice(0,e),o=t.slice(e+1);return Q(o.concat(r),n)},Jm=function(t,e,n){var r=t.slice(e+1);return Q(r,n)},Qm=function(t){return function(e){var n=e.raw;return F(t,n.which)}},tv=function(t){return function(e){return rt(t,function(t){return t(e)})}},ev=function(t){var e=t.raw;return!0===e.shiftKey},nv=function(t){var e=t.raw;return!0===e.ctrlKey},rv=_(ev),ov=function(t,e){return{matches:t,classification:e}},iv=function(t,e){var n=Q(t,function(t){return t.matches(e)});return n.map(function(t){return t.classification})},av=function(t,e,n){var r=e.exists(function(t){return n.exists(function(e){return oo(e,t)})});r||fi(t,oi(),{prevFocus:e,newFocus:n})},uv=function(){var t=function(t){return tf(t.element)},e=function(e,n){var r=t(e);e.getSystem().triggerFocus(n,e.element);var o=t(e);av(e,r,o)};return{get:t,set:e}},sv=function(){var t=function(t){return Vm.getHighlighted(t).map(function(t){return t.element})},e=function(e,n){var r=t(e);e.getSystem().getByDom(n).fold(g,function(t){Vm.highlight(e,t)});var o=t(e);av(e,r,o)};return{get:t,set:e}};(function(t){t["OnFocusMode"]="onFocus",t["OnEnterOrSpaceMode"]="onEnterOrSpace",t["OnApiMode"]="onApi"})(Hf||(Hf={}));var lv=function(t,e,n,r,o){var i=function(){return t.concat([Bn("focusManager",uv()),Vn("focusInside","onFocus",Qe(function(t){return F(["onFocus","onEnterOrSpace","onApi"],t)?mt.value(t):mt.error("Invalid value for focusInside")})),Wl("handler",s),Wl("state",e),Wl("sendFocusIn",o)])},a=function(t,e,n,r,o){var i=n(t,e,r,o);return iv(i,e.event).bind(function(n){return n(t,e,r,o)})},u=function(t,e){var i=t.focusInside!==Hf.OnFocusMode?R.none():o(t).map(function(n){return xi(Vo(),function(r,o){n(r,t,e),o.stop()})}),u=function(n,r){var i=Qm(Gm.concat(Wm))(r.event);t.focusInside===Hf.OnEnterOrSpaceMode&&i&&fo(n,r)&&o(t).each(function(o){o(n,t,e),r.stop()})},s=[xi(Io(),function(r,o){a(r,o,n,t,e).fold(function(){u(r,o)},function(t){o.stop()})}),xi(Oo(),function(n,o){a(n,o,r,t,e).each(function(t){o.stop()})})];return mi(i.toArray().concat(s))},s={schema:i,processKey:a,toEvents:u};return s},cv=function(t){var e=[In("onEscape"),In("onEnter"),Bn("selector",'[data-alloy-tabstop="true"]:not(:disabled)'),Bn("firstTabstop",0),Bn("useTabstopAt",M),In("visibilitySelector")].concat([t]),n=function(t,e){var n=t.visibilitySelector.bind(function(t){return gl(e,t)}).getOr(e);return Ss(n)>0},r=function(t,e){var r=Kd(t.element,e.selector),o=Z(r,function(t){return n(e,t)});return R.from(o[e.firstTabstop])},o=function(t,e){return e.focusManager.get(t).bind(function(t){return gl(t,e.selector)})},i=function(t,e){return n(t,e)&&t.useTabstopAt(e)},a=function(t,e,n){r(t,e).each(function(n){e.focusManager.set(t,n)})},u=function(t,e,n,r,o){return o(e,n,function(t){return i(r,t)}).fold(function(){return r.cyclic?R.some(!0):R.none()},function(e){return r.focusManager.set(t,e),R.some(!0)})},s=function(t,e,n,r){var i=Kd(t.element,n.selector);return o(t,n).bind(function(e){var o=tt(i,w(oo,e));return o.bind(function(e){return u(t,i,e,n,r)})})},l=function(t,e,n){var r=n.cyclic?Zm:$m;return s(t,e,n,r)},c=function(t,e,n){var r=n.cyclic?Km:Jm;return s(t,e,n,r)},f=function(t,e,n){return n.onEnter.bind(function(n){return n(t,e)})},d=function(t,e,n){return n.onEscape.bind(function(n){return n(t,e)})},h=b([ov(tv([ev,Qm(Fm)]),l),ov(Qm(Fm),c),ov(Qm(Um),d),ov(tv([rv,Qm(Wm)]),f)]),p=b([]);return lv(e,ru.init,h,p,function(){return R.some(a)})},fv=cv(qn("cyclic",C)),dv=cv(qn("cyclic",M)),hv=function(t,e,n){return hi(t,n,Uo()),R.some(!0)},pv=function(t,e,n){var r=gm(n)&&Qm(Gm)(e.event);return r?R.none():hv(t,e,n)},gv=function(t,e){return R.some(!0)},mv=[Bn("execute",pv),Bn("useSpace",!1),Bn("useEnter",!0),Bn("useControlEnter",!1),Bn("useDown",!1)],vv=function(t,e,n){return n.execute(t,e,t.element)},yv=function(t,e,n,r){var o=n.useSpace&&!gm(t.element)?Gm:[],i=n.useEnter?Wm:[],a=n.useDown?qm:[],u=o.concat(i).concat(a);return[ov(Qm(u),vv)].concat(n.useControlEnter?[ov(tv([nv,Qm(Wm)]),vv)]:[])},bv=function(t,e,n,r){return n.useSpace&&!gm(t.element)?[ov(Qm(Gm),gv)]:[]},xv=lv(mv,ru.init,yv,bv,function(){return R.none()}),wv=function(){var t=Zn(R.none()),e=function(e,n){t.set(R.some({numRows:e,numColumns:n}))},n=function(){return t.get().map(function(t){return t.numRows})},r=function(){return t.get().map(function(t){return t.numColumns})};return ou({readState:function(){return t.get().map(function(t){return{numRows:String(t.numRows),numColumns:String(t.numColumns)}}).getOr({numRows:"?",numColumns:"?"})},setGridSize:e,getNumRows:n,getNumColumns:r})},_v=function(t){return t.state(t)},Sv=Object.freeze({__proto__:null,flatgrid:wv,init:_v}),Cv=function(t){return function(e,n,r,o){var i=t(e.element);return Dv(i,e,n,r,o)}},Mv=function(t,e){var n=Bf(t,e);return Cv(n)},Tv=function(t,e){var n=Bf(e,t);return Cv(n)},kv=function(t){return function(e,n,r,o){return Dv(t,e,n,r,o)}},Dv=function(t,e,n,r,o){var i=r.focusManager.get(e).bind(function(n){return t(e.element,n,r,o)});return i.map(function(t){return r.focusManager.set(e,t),!0})},Av=kv,Iv=kv,Ov=kv,Lv=function(t){return t.offsetWidth<=0&&t.offsetHeight<=0},Ev=function(t){return!Lv(t.dom)},Nv=function(t,e){return tt(t,e).map(function(e){return{index:e,candidates:t}})},Rv=function(t,e,n){var r=function(t){return oo(t,e)},o=Kd(t,n),i=Z(o,Ev);return Nv(i,r)},Pv=function(t,e){return tt(t,function(t){return oo(e,t)})},zv=function(t,e,n,r){var o=Math.floor(e/n),i=e%n;return r(o,i).bind(function(e){var r=e.row*n+e.column;return r>=0&&r<t.length?R.some(t[r]):R.none()})},Bv=function(t,e,n,r,o){return zv(t,e,r,function(e,i){var a=e===n-1,u=a?t.length-e*r:r,s=mf(i,o,0,u-1);return R.some({row:e,column:s})})},Vv=function(t,e,n,r,o){return zv(t,e,r,function(e,i){var a=mf(e,o,0,n-1),u=a===n-1,s=u?t.length-a*r:r,l=vf(i,0,s-1);return R.some({row:a,column:l})})},Hv=function(t,e,n,r){return Bv(t,e,n,r,1)},Fv=function(t,e,n,r){return Bv(t,e,n,r,-1)},Wv=function(t,e,n,r){return Vv(t,e,n,r,-1)},Uv=function(t,e,n,r){return Vv(t,e,n,r,1)},Gv=[bn("selector"),Bn("execute",pv),Vl("onEscape"),Bn("captureTab",!1),Gl()],jv=function(t,e,n){pl(t.element,e.selector).each(function(n){e.focusManager.set(t,n)})},Xv=function(t,e){return e.focusManager.get(t).bind(function(t){return gl(t,e.selector)})},Yv=function(t,e,n,r){return Xv(t,n).bind(function(r){return n.execute(t,e,r)})},qv=function(t){return function(e,n,r,o){return Rv(e,n,r.selector).bind(function(e){return t(e.candidates,e.index,o.getNumRows().getOr(r.initSize.numRows),o.getNumColumns().getOr(r.initSize.numColumns))})}},Zv=function(t,e,n){return n.captureTab?R.some(!0):R.none()},$v=function(t,e,n){return n.onEscape(t,e)},Kv=qv(Fv),Jv=qv(Hv),Qv=qv(Wv),ty=qv(Uv),ey=b([ov(Qm(jm),Mv(Kv,Jv)),ov(Qm(Ym),Tv(Kv,Jv)),ov(Qm(Xm),Av(Qv)),ov(Qm(qm),Iv(ty)),ov(tv([ev,Qm(Fm)]),Zv),ov(tv([rv,Qm(Fm)]),Zv),ov(Qm(Um),$v),ov(Qm(Gm.concat(Wm)),Yv)]),ny=b([ov(Qm(Gm),gv)]),ry=lv(Gv,wv,ey,ny,function(){return R.some(jv)}),oy=function(t,e,n,r){var o=function(t){return"button"===Ni(t)&&"disabled"===Ma(t,"disabled")},i=function(t,e,n){var a=mf(e,r,0,n.length-1);return a===t?R.none():o(n[a])?i(t,a,n):R.from(n[a])};return Rv(t,n,e).bind(function(t){var e=t.index,n=t.candidates;return i(e,e,n)})},iy=[bn("selector"),Bn("getInitial",R.none),Bn("execute",pv),Vl("onEscape"),Bn("executeOnMove",!1),Bn("allowVertical",!0)],ay=function(t,e){return e.focusManager.get(t).bind(function(t){return gl(t,e.selector)})},uy=function(t,e,n){return ay(t,n).bind(function(r){return n.execute(t,e,r)})},sy=function(t,e,n){e.getInitial(t).orThunk(function(){return pl(t.element,e.selector)}).each(function(n){e.focusManager.set(t,n)})},ly=function(t,e,n){return oy(t,n.selector,e,-1)},cy=function(t,e,n){return oy(t,n.selector,e,1)},fy=function(t){return function(e,n,r,o){return t(e,n,r,o).bind(function(){return r.executeOnMove?uy(e,n,r):R.some(!0)})}},dy=function(t,e,n){return n.onEscape(t,e)},hy=function(t,e,n,r){var o=jm.concat(n.allowVertical?Xm:[]),i=Ym.concat(n.allowVertical?qm:[]);return[ov(Qm(o),fy(Mv(ly,cy))),ov(Qm(i),fy(Tv(ly,cy))),ov(Qm(Wm),uy),ov(Qm(Gm),uy),ov(Qm(Um),dy)]},py=b([ov(Qm(Gm),gv)]),gy=lv(iy,ru.init,hy,py,function(){return R.some(sy)}),my=function(t,e,n){return R.from(t[e]).bind(function(t){return R.from(t[n]).map(function(t){return{rowIndex:e,columnIndex:n,cell:t}})})},vy=function(t,e,n,r){var o=t[e],i=o.length,a=mf(n,r,0,i-1);return my(t,e,a)},yy=function(t,e,n,r){var o=mf(n,r,0,t.length-1),i=t[o].length,a=vf(e,0,i-1);return my(t,o,a)},by=function(t,e,n,r){var o=t[e],i=o.length,a=vf(n+r,0,i-1);return my(t,e,a)},xy=function(t,e,n,r){var o=vf(n+r,0,t.length-1),i=t[o].length,a=vf(e,0,i-1);return my(t,o,a)},wy=function(t,e,n){return vy(t,e,n,1)},_y=function(t,e,n){return vy(t,e,n,-1)},Sy=function(t,e,n){return yy(t,n,e,-1)},Cy=function(t,e,n){return yy(t,n,e,1)},My=function(t,e,n){return by(t,e,n,-1)},Ty=function(t,e,n){return by(t,e,n,1)},ky=function(t,e,n){return xy(t,n,e,-1)},Dy=function(t,e,n){return xy(t,n,e,1)},Ay=[kn("selectors",[bn("row"),bn("cell")]),Bn("cycles",!0),Bn("previousSelector",R.none),Bn("execute",pv)],Iy=function(t,e,n){var r=e.previousSelector(t).orThunk(function(){var n=e.selectors;return pl(t.element,n.cell)});r.each(function(n){e.focusManager.set(t,n)})},Oy=function(t,e,n){return tf(t.element).bind(function(r){return n.execute(t,e,r)})},Ly=function(t,e){return j(t,function(t){return Kd(t,e.selectors.cell)})},Ey=function(t,e){return function(n,r,o){var i=o.cycles?t:e;return gl(r,o.selectors.row).bind(function(t){var e=Kd(t,o.selectors.cell);return Pv(e,r).bind(function(e){var r=Kd(n,o.selectors.row);return Pv(r,t).bind(function(t){var n=Ly(r,o);return i(n,t,e).map(function(t){return t.cell})})})})}},Ny=Ey(_y,My),Ry=Ey(wy,Ty),Py=Ey(Sy,ky),zy=Ey(Cy,Dy),By=b([ov(Qm(jm),Mv(Ny,Ry)),ov(Qm(Ym),Tv(Ny,Ry)),ov(Qm(Xm),Av(Py)),ov(Qm(qm),Iv(zy)),ov(Qm(Gm.concat(Wm)),Oy)]),Vy=b([ov(Qm(Gm),gv)]),Hy=lv(Ay,ru.init,By,Vy,function(){return R.some(Iy)}),Fy=[bn("selector"),Bn("execute",pv),Bn("moveOnTab",!1)],Wy=function(t,e,n){return n.focusManager.get(t).bind(function(r){return n.execute(t,e,r)})},Uy=function(t,e,n){pl(t.element,e.selector).each(function(n){e.focusManager.set(t,n)})},Gy=function(t,e,n){return oy(t,n.selector,e,-1)},jy=function(t,e,n){return oy(t,n.selector,e,1)},Xy=function(t,e,n,r){return n.moveOnTab?Ov(Gy)(t,e,n,r):R.none()},Yy=function(t,e,n,r){return n.moveOnTab?Ov(jy)(t,e,n,r):R.none()},qy=b([ov(Qm(Xm),Ov(Gy)),ov(Qm(qm),Ov(jy)),ov(tv([ev,Qm(Fm)]),Xy),ov(tv([rv,Qm(Fm)]),Yy),ov(Qm(Wm),Wy),ov(Qm(Gm),Wy)]),Zy=b([ov(Qm(Gm),gv)]),$y=lv(Fy,ru.init,qy,Zy,function(){return R.some(Uy)}),Ky=[Vl("onSpace"),Vl("onEnter"),Vl("onShiftEnter"),Vl("onLeft"),Vl("onRight"),Vl("onTab"),Vl("onShiftTab"),Vl("onUp"),Vl("onDown"),Vl("onEscape"),Bn("stopSpaceKeyup",!1),In("focusIn")],Jy=function(t,e,n){return[ov(Qm(Gm),n.onSpace),ov(tv([rv,Qm(Wm)]),n.onEnter),ov(tv([ev,Qm(Wm)]),n.onShiftEnter),ov(tv([ev,Qm(Fm)]),n.onShiftTab),ov(tv([rv,Qm(Fm)]),n.onTab),ov(Qm(Xm),n.onUp),ov(Qm(qm),n.onDown),ov(Qm(jm),n.onLeft),ov(Qm(Ym),n.onRight),ov(Qm(Gm),n.onSpace),ov(Qm(Um),n.onEscape)]},Qy=function(t,e,n){return n.stopSpaceKeyup?[ov(Qm(Gm),gv)]:[]},tb=lv(Ky,ru.init,Jy,Qy,function(t){return t.focusIn}),eb=fv.schema(),nb=dv.schema(),rb=gy.schema(),ob=ry.schema(),ib=Hy.schema(),ab=xv.schema(),ub=$y.schema(),sb=tb.schema(),lb=Object.freeze({__proto__:null,acyclic:eb,cyclic:nb,flow:rb,flatgrid:ob,matrix:ib,execution:ab,menu:ub,special:sb}),cb=function(t){return Ft(t,"setGridSize")},fb=Gc({branchKey:"mode",branches:lb,name:"keying",active:{events:function(t,e){var n=t.handler;return n.toEvents(t,e)}},apis:{focusIn:function(t,e,n){e.sendFocusIn(e).fold(function(){t.getSystem().triggerFocus(t.element,t.element)},function(r){r(t,e,n)})},setGridSize:function(t,e,n,r,o){cb(n)?n.setGridSize(r,o):console.error("Layout does not support setGridSize")}},state:Sv}),db=function(t,e,n,r){ef(function(){var e=j(r,t.getSystem().build);Bh(t,e)},t.element)},hb=function(t,e,n,r){var o=t.getSystem().build(r);Hh(t,o,n)},pb=function(t,e,n,r){hb(t,e,fa,r)},gb=function(t,e,n,r){hb(t,e,ca,r)},mb=function(t,e,n,r){var o=vb(t),i=Q(o,function(t){return oo(r.element,t.element)});i.each(Wh)},vb=function(t,e){return t.components()},yb=function(t,e,n,r,o){var i=vb(t);return R.from(i[r]).map(function(i){return mb(t,e,n,i),o.each(function(n){hb(t,e,function(t,e){da(t,e,r)},n)}),i})},bb=function(t,e,n,r,o){var i=vb(t);return tt(i,r).bind(function(r){return yb(t,e,n,r,o)})},xb=Object.freeze({__proto__:null,append:pb,prepend:gb,remove:mb,replaceAt:yb,replaceBy:bb,set:db,contents:vb}),wb=Wc({fields:[],name:"replacing",apis:xb}),_b=function(t,e){var n=mi(e);return Wc({fields:[bn("enabled")],name:t,active:{events:b(n)}})},Sb=function(t,e){var n=_b(t,e);return{key:t,value:{config:{},me:n,configAsRaw:b({}),initialConfig:{},state:ru}}},Cb=function(t,e){e.ignore||($c(t.element),e.onFocus(t))},Mb=function(t,e){e.ignore||Kc(t.element)},Tb=function(t){return Jc(t.element)},kb=Object.freeze({__proto__:null,focus:Cb,blur:Mb,isFocused:Tb}),Db=function(t,e){var n=e.ignore?{}:{attributes:{tabindex:"-1"}};return lu(n)},Ab=function(t){return mi([xi(Vo(),function(e,n){Cb(e,t),n.stop()})].concat(t.stopMousedown?[xi(So(),function(t,e){e.event.prevent()})]:[]))},Ib=Object.freeze({__proto__:null,exhibit:Db,events:Ab}),Ob=[Bl("onFocus"),Bn("stopMousedown",!1),Bn("ignore",!1)],Lb=Wc({fields:Ob,name:"focusing",active:Ib,apis:kb}),Eb=function(t){var e=function(){var e=Zn(t),n=function(){return e.get()},r=function(t){return e.set(t)},o=function(){return e.set(t)},i=function(){return e.get()};return{get:n,set:r,clear:o,readState:i}};return{init:e}},Nb=function(t,e,n){var r=e.aria;r.update(t,r,n.get())},Rb=function(t,e,n){e.toggleClass.each(function(e){n.get()?zu(t.element,e):Vu(t.element,e)})},Pb=function(t,e,n){Vb(t,e,n,!n.get())},zb=function(t,e,n){n.set(!0),Rb(t,e,n),Nb(t,e,n)},Bb=function(t,e,n){n.set(!1),Rb(t,e,n),Nb(t,e,n)},Vb=function(t,e,n,r){var o=r?zb:Bb;o(t,e,n)},Hb=function(t,e,n){return n.get()},Fb=function(t,e,n){Vb(t,e,n,e.selected)},Wb=Object.freeze({__proto__:null,onLoad:Fb,toggle:Pb,isOn:Hb,on:zb,off:Bb,set:Vb}),Ub=function(){return lu({})},Gb=function(t,e){var n=Ec(t,e,Pb),r=Nc(t,e,Fb);return mi(et([t.toggleOnExecute?[n]:[],[r]]))},jb=Object.freeze({__proto__:null,exhibit:Ub,events:Gb}),Xb=function(t,e,n){Sa(t.element,"aria-pressed",n),e.syncWithExpanded&&Zb(t,e,n)},Yb=function(t,e,n){Sa(t.element,"aria-selected",n)},qb=function(t,e,n){Sa(t.element,"aria-checked",n)},Zb=function(t,e,n){Sa(t.element,"aria-expanded",n)},$b=[Bn("selected",!1),In("toggleClass"),Bn("toggleOnExecute",!0),Vn("aria",{mode:"none"},sn("mode",{pressed:[Bn("syncWithExpanded",!1),Wl("update",Xb)],checked:[Wl("update",qb)],expanded:[Wl("update",Zb)],selected:[Wl("update",Yb)],none:[Wl("update",g)]}))],Kb=Wc({fields:$b,name:"toggling",active:jb,apis:Wb,state:Eb(!1)}),Jb=function(){var t=function(t,e){e.stop(),di(t)};return[xi(No(),t),xi(jo(),t),ki(bo()),ki(So())]},Qb=function(t){var e=function(t){return Ei(function(e,n){t(e),n.stop()})};return mi(et([t.map(e).toArray(),Jb()]))},tx="alloy.item-hover",ex="alloy.item-focus",nx=function(t){(tf(t.element).isNone()||Lb.isFocused(t))&&(Lb.isFocused(t)||Lb.focus(t),fi(t,tx,{item:t}))},rx=function(t){fi(t,ex,{item:t})},ox=b(tx),ix=b(ex),ax=function(t){return{dom:t.dom,domModification:k(k({},t.domModification),{attributes:k(k(k({role:t.toggling.isSome()?"menuitemcheckbox":"menuitem"},t.domModification.attributes),{"aria-haspopup":t.hasSubmenu}),t.hasSubmenu?{"aria-expanded":!1}:{})}),behaviours:Qp.augment(t.itemBehaviours,[t.toggling.fold(Kb.revoke,function(t){return Kb.config(k({aria:{mode:"checked"}},t))}),Lb.config({ignore:t.ignoreFocus,stopMousedown:t.ignoreFocus,onFocus:function(t){rx(t)}}),fb.config({mode:"execution"}),Zp.config({store:{mode:"memory",initialValue:t.data}}),Sb("item-type-events",A(Jb(),[xi(ko(),nx),xi(Go(),Lb.focus)]))]),components:t.components,eventOrder:t.eventOrder}},ux=[bn("data"),bn("components"),bn("dom"),Bn("hasSubmenu",!1),In("toggling"),Qp.field("itemBehaviours",[Kb,Lb,fb,Zp]),Bn("ignoreFocus",!1),Bn("domModification",{}),Wl("builder",ax),Bn("eventOrder",{})],sx=function(t){return{dom:t.dom,components:t.components,events:mi([Di(Go())])}},lx=[bn("dom"),bn("components"),Wl("builder",sx)],cx=b("item-widget"),fx=b([Dg({name:"widget",overrides:function(t){return{behaviours:Hc([Zp.config({store:{mode:"manual",getValue:function(e){return t.data},setValue:g}})])}}})]),dx=function(t){var e=Fg(cx(),t,fx()),n=Wg(cx(),t,e.internals()),r=function(e){return Ug(e,t,"widget").map(function(t){return fb.focusIn(t),t})},o=function(e,n){return gm(n.event.target)?R.none():function(){return t.autofocus?(n.setSource(e.element),R.none()):R.none()}()};return{dom:t.dom,components:n,domModification:t.domModification,events:mi([Ei(function(t,e){r(t).each(function(t){e.stop()})}),xi(ko(),nx),xi(Go(),function(e,n){t.autofocus?r(e):Lb.focus(e)})]),behaviours:Qp.augment(t.widgetBehaviours,[Zp.config({store:{mode:"memory",initialValue:t.data}}),Lb.config({ignore:t.ignoreFocus,onFocus:function(t){rx(t)}}),fb.config({mode:"special",focusIn:t.autofocus?function(t){r(t)}:jc(),onLeft:o,onRight:o,onEscape:function(e,n){return Lb.isFocused(e)||t.autofocus?t.autofocus?(n.setSource(e.element),R.none()):R.none():(Lb.focus(e),R.some(!0))}})])}},hx=[bn("uid"),bn("data"),bn("components"),bn("dom"),Bn("autofocus",!1),Bn("ignoreFocus",!1),Qp.field("widgetBehaviours",[Zp,Lb,fb]),Bn("domModification",{}),$g(fx()),Wl("builder",dx)],px=sn("type",{widget:hx,item:ux,separator:lx}),gx=function(t,e){return{mode:"flatgrid",selector:"."+t.markers.item,initSize:{numColumns:e.initSize.numColumns,numRows:e.initSize.numRows},focusManager:t.focusManager}},mx=function(t,e){return{mode:"matrix",selectors:{row:e.rowSelector,cell:"."+t.markers.item},focusManager:t.focusManager}},vx=function(t,e){return{mode:"menu",selector:"."+t.markers.item,moveOnTab:e.moveOnTab,focusManager:t.focusManager}},yx=b([Og({factory:{sketch:function(t){var e=on("menu.spec item",px,t);return e.builder(e)}},name:"items",unit:"item",defaults:function(t,e){return e.hasOwnProperty("uid")?e:k(k({},e),{uid:ja("item")})},overrides:function(t,e){return{type:e.type,ignoreFocus:t.fakeFocus,domModification:{classes:[t.markers.item]}}}})]),bx=b([bn("value"),bn("items"),bn("dom"),bn("components"),Bn("eventOrder",{}),$p("menuBehaviours",[Vm,Zp,bm,fb]),Vn("movement",{mode:"menu",moveOnTab:!0},sn("mode",{grid:[Gl(),Wl("config",gx)],matrix:[Wl("config",mx),bn("rowSelector")],menu:[Bn("moveOnTab",!0),Wl("config",vx)]})),Nl(),Bn("fakeFocus",!1),Bn("focusManager",uv()),Bl("onHighlight")]),xx=b("alloy.menu-focus"),wx=function(t,e,n,r){return{uid:t.uid,dom:t.dom,markers:t.markers,behaviours:Jp(t.menuBehaviours,[Vm.config({highlightClass:t.markers.selectedItem,itemClass:t.markers.item,onHighlight:t.onHighlight}),Zp.config({store:{mode:"memory",initialValue:t.value}}),bm.config({find:R.some}),fb.config(t.movement.config(t,t.movement))]),events:mi([xi(ix(),function(t,e){var n=e.event;t.getSystem().getByDom(n.target).each(function(n){Vm.highlight(t,n),e.stop(),fi(t,xx(),{menu:t,item:n})})}),xi(ox(),function(t,e){var n=e.event.item;Vm.highlight(t,n)})]),components:e,eventOrder:t.eventOrder,domModification:{attributes:{role:"menu"}}}},_x=sm({name:"Menu",configFields:bx(),partFields:yx(),factory:wx}),Sx=function(t){return Lt(t,function(t,e){return{k:t,v:e}})},Cx=function(t,e,n,r){return Vt(n,r).bind(function(r){return Vt(t,r).bind(function(r){var o=Cx(t,e,n,r);return R.some([r].concat(o))})}).getOr([])},Mx=function(t,e){var n={};It(t,function(t,e){X(t,function(t){n[t]=e})});var r=e,o=Sx(e),i=Ot(o,function(t,e){return[e].concat(Cx(n,r,o,e))});return Ot(n,function(t){return Vt(i,t).getOr([t])})},Tx=function(){var t=Zn({}),e=Zn({}),n=Zn({}),r=Zn(R.none()),o=Zn({}),i=function(){t.set({}),e.set({}),n.set({}),r.set(R.none())},a=function(){return r.get().isNone()},u=function(t,n){var r;e.set(k(k({},e.get()),(r={},r[t]={type:"prepared",menu:n},r)))},s=function(i,a,u,s){r.set(R.some(i)),t.set(u),e.set(a),o.set(s);var l=Mx(s,u);n.set(l)},l=function(e){return zt(t.get(),function(t,n){return t===e})},c=function(t,e,n){return g(t).bind(function(r){return l(t).bind(function(t){return e(t).map(function(t){return{triggeredMenu:r,triggeringItem:t,triggeringPath:n}})})})},f=function(t,e){var o=Z(v(t).toArray(),function(t){return g(t).isSome()});return Vt(n.get(),t).bind(function(t){var n=ot(o.concat(t)),i=nt(n,function(t,o){return c(t,e,n.slice(0,o+1)).fold(function(){return r.get().is(t)?[]:[R.none()]},function(t){return[R.some(t)]})});return cm(i)})},d=function(e){return Vt(t.get(),e).map(function(t){var r=Vt(n.get(),e).getOr([]);return[t].concat(r)})},h=function(t){return Vt(n.get(),t).bind(function(t){return t.length>1?R.some(t.slice(1)):R.none()})},p=function(t){return Vt(n.get(),t)},g=function(t){return m(t).bind(kx)},m=function(t){return Vt(e.get(),t)},v=function(e){return Vt(t.get(),e)},y=function(t){var e=o.get();return it(Dt(e),t)},b=function(){return r.get().bind(g)},x=function(){return e.get()};return{setMenuBuilt:u,setContents:s,expand:d,refresh:p,collapse:h,lookupMenu:m,lookupItem:v,otherMenus:y,getPrimary:b,getMenus:x,clear:i,isClear:a,getTriggeringPath:f}},kx=function(t){return"prepared"===t.type?R.some(t.menu):R.none()},Dx={init:Tx,extractPreparedMenu:kx},Ax=function(t,e){var n,r=Zn(R.none()),o=function(e,n,r){return Ot(r,function(r,o){var i=function(){return _x.sketch(k(k({},r),{value:o,markers:t.markers,fakeFocus:t.fakeFocus,onHighlight:t.onHighlight,focusManager:t.fakeFocus?sv():uv()}))};return o===n?{type:"prepared",menu:e.getSystem().build(i())}:{type:"notbuilt",nbMenu:i}})},i=Dx.init(),a=function(e){var n=o(e,t.data.primary,t.data.menus),r=l();return i.setContents(t.data.primary,n,t.data.expansions,r),i.getPrimary()},u=function(t){return Zp.getValue(t).value},s=function(t,e,n){return dt(e,function(t){if(!t.getSystem().isConnected())return R.none();var e=Vm.getCandidates(t);return Q(e,function(t){return u(t)===n})})},l=function(e){return Ot(t.data.menus,function(t,e){return nt(t.items,function(t){return"separator"===t.type?[]:[t.data.value]})})},c=function(t,e){Vm.highlight(t,e),Vm.getHighlighted(e).orThunk(function(){return Vm.getFirst(e)}).each(function(e){hi(t,e.element,Go())})},f=function(t,e){return lm(j(e,function(e){return t.lookupMenu(e).bind(function(t){return"prepared"===t.type?R.some(t.menu):R.none()})}))},d=function(e,n,r){var o=f(n,n.otherMenus(r));X(o,function(n){Wu(n.element,[t.markers.backgroundMenu]),t.stayInDom||wb.remove(e,n)})},h=function(e){return r.get().getOrThunk(function(){var n={},o=Kd(e.element,"."+t.markers.item),i=Z(o,function(t){return"true"===Ma(t,"aria-haspopup")});return X(i,function(t){e.getSystem().getByDom(t).each(function(t){var e=u(t);n[e]=t})}),r.set(R.some(n)),n})},p=function(t,e){var n=h(t);It(n,function(t,n){var r=F(e,n);Sa(t.element,"aria-expanded",r)})},m=function(e,n,r){return R.from(r[0]).bind(function(o){return n.lookupMenu(o).bind(function(o){if("notbuilt"===o.type)return R.none();var i=o.menu,a=f(n,r.slice(1));return X(a,function(e){zu(e.element,t.markers.backgroundMenu)}),Gu(i.element)||wb.append(e,xs(i)),Wu(i.element,[t.markers.backgroundMenu]),c(e,i),d(e,n,r),R.some(i)})})};(function(t){t[t["HighlightSubmenu"]=0]="HighlightSubmenu",t[t["HighlightParent"]=1]="HighlightParent"})(n||(n={}));var v=function(t,e,n){if("notbuilt"===n.type){var r=t.getSystem().build(n.nbMenu());return i.setMenuBuilt(e,r),r}return n.menu},y=function(e,r,o){void 0===o&&(o=n.HighlightSubmenu);var a=u(r);return i.expand(a).bind(function(a){return p(e,a),R.from(a[0]).bind(function(u){return i.lookupMenu(u).bind(function(s){var l=v(e,u,s);return Gu(l.element)||wb.append(e,xs(l)),t.onOpenSubmenu(e,r,l,ot(a)),o===n.HighlightSubmenu?(Vm.highlightFirst(l),m(e,i,a)):(Vm.dehighlightAll(l),R.some(r))})})})},b=function(e,n){var r=u(n);return i.collapse(r).bind(function(r){return p(e,r),m(e,i,r).map(function(r){return t.onCollapseMenu(e,n,r),r})})},x=function(t,e){var n=u(e);return i.refresh(n).bind(function(e){return p(t,e),m(t,i,e)})},w=function(t,e){return gm(e.element)?R.none():y(t,e,n.HighlightSubmenu)},_=function(t,e){return gm(e.element)?R.none():b(t,e)},S=function(e,n){return b(e,n).orThunk(function(){return t.onEscape(e,n).map(function(){return e})})},C=function(e){return function(n,r){return gl(r.getSource(),"."+t.markers.item).bind(function(t){return n.getSystem().getByDom(t).toOptional().bind(function(t){return e(n,t).map(M)})})}},T=mi([xi(xx(),function(t,e){var n=e.event.item;i.lookupItem(u(n)).each(function(){var n=e.event.menu;Vm.highlight(t,n);var r=u(e.event.item);i.refresh(r).each(function(e){return d(t,i,e)})})}),Ei(function(e,r){var o=r.event.target;e.getSystem().getByDom(o).each(function(r){var o=u(r);0===o.indexOf("collapse-item")&&b(e,r),y(e,r,n.HighlightSubmenu).fold(function(){t.onExecute(e,r)},g)})}),Ii(function(e,n){a(e).each(function(n){wb.append(e,xs(n)),t.onOpenMenu(e,n),t.highlightImmediately&&c(e,n)})})].concat(t.navigateOnHover?[xi(ox(),function(e,r){var o=r.event.item;x(e,o),y(e,o,n.HighlightParent),t.onHover(e,o)})]:[])),D=function(t){return Vm.getHighlighted(t).bind(Vm.getHighlighted)},A=function(t){D(t).each(function(e){b(t,e)})},I=function(t){i.getPrimary().each(function(e){c(t,e)})},O=function(t){return R.from(t.components()[0]).filter(function(t){return"menu"===Ma(t.element,"role")})},L=function(e){var n=i.getPrimary().bind(function(t){return D(e).bind(function(t){var n=u(t),r=Bt(i.getMenus()),o=lm(j(r,Dx.extractPreparedMenu));return i.getTriggeringPath(n,function(t){return s(e,o,t)})}).map(function(e){return{primary:t,triggeringPath:e}})});n.fold(function(){O(e).each(function(n){t.onRepositionMenu(e,n,[])})},function(n){var r=n.primary,o=n.triggeringPath;t.onRepositionMenu(e,r,o)})},E={collapseMenu:A,highlightPrimary:I,repositionMenus:L};return{uid:t.uid,dom:t.dom,markers:t.markers,behaviours:Jp(t.tmenuBehaviours,[fb.config({mode:"special",onRight:C(w),onLeft:C(_),onEscape:C(S),focusIn:function(t,e){i.getPrimary().each(function(e){hi(t,e.element,Go())})}}),Vm.config({highlightClass:t.markers.selectedMenu,itemClass:t.markers.menu}),bm.config({find:function(t){return Vm.getHighlighted(t)}}),wb.config({})]),eventOrder:t.eventOrder,apis:E,events:T}},Ix=b("collapse-item"),Ox=function(t,e,n){return{primary:t,menus:e,expansions:n}},Lx=function(t,e){return{primary:t,menus:le(t,e),expansions:{}}},Ex=function(t){return{value:za(Ix()),meta:{text:t}}},Nx=um({name:"TieredMenu",configFields:[Fl("onExecute"),Fl("onEscape"),Hl("onOpenMenu"),Hl("onOpenSubmenu"),Bl("onRepositionMenu"),Bl("onCollapseMenu"),Bn("highlightImmediately",!0),kn("data",[bn("primary"),bn("menus"),bn("expansions")]),Bn("fakeFocus",!1),Bl("onHighlight"),Bl("onHover"),Rl(),bn("dom"),Bn("navigateOnHover",!0),Bn("stayInDom",!1),$p("tmenuBehaviours",[fb,Vm,bm,wb]),Bn("eventOrder",{})],apis:{collapseMenu:function(t,e){t.collapseMenu(e)},highlightPrimary:function(t,e){t.highlightPrimary(e)},repositionMenus:function(t,e){t.repositionMenus(e)}},factory:Ax,extraApis:{tieredData:Ox,singleData:Lx,collapseItem:Ex}}),Rx=function(t,e,n,r,o){var i=function(){return t.lazySink(e)},a="horizontal"===r.type?{layouts:{onLtr:function(){return kc()},onRtl:function(){return Dc()}}}:{},u=function(t){return 2===t.length},s=function(t){return u(t)?a:{}};return Nx.sketch({dom:{tag:"div"},data:r.data,markers:r.menu.markers,highlightImmediately:r.menu.highlightImmediately,onEscape:function(){return hp.close(e),t.onEscape.map(function(t){return t(e)}),R.some(!0)},onExecute:function(){return R.some(!0)},onOpenMenu:function(t,e){Eh.positionWithinBounds(i().getOrDie(),n,e,o())},onOpenSubmenu:function(t,e,n,r){var o=i().getOrDie();Eh.position(o,k({anchor:"submenu",item:e},s(r)),n)},onRepositionMenu:function(t,e,r){var a=i().getOrDie();Eh.positionWithinBounds(a,n,e,o()),X(r,function(t){var e=s(t.triggeringPath);Eh.position(a,k({anchor:"submenu",item:t.triggeringItem},e),t.triggeredMenu)})}})},Px=function(t,e){var n=function(e,n){var r=t.getRelated(e);return r.exists(function(t){return bl(t,n)})},r=function(t,e){hp.setContent(t,e)},o=function(t,e,n){i(t,e,n,R.none())},i=function(t,e,n,r){a(t,e,n,function(){return r.map(function(t){return ol(t)})})},a=function(e,n,r,o){var i=t.lazySink(e).getOrDie();hp.openWhileCloaked(e,r,function(){return Eh.positionWithinBounds(i,n,e,o())}),Zp.setValue(e,R.some({mode:"position",anchor:n,getBounds:o}))},u=function(t,e,n){s(t,e,n,function(){return R.none()})},s=function(e,n,r,o){var i=Rx(t,e,n,r,o);hp.open(e,i),Zp.setValue(e,R.some({mode:"menu",menu:i}))},l=function(t){hp.isOpen(t)&&(Zp.setValue(t,R.none()),hp.close(t))},c=function(t){return hp.getState(t)},f=function(e){hp.isOpen(e)&&Zp.getValue(e).each(function(n){switch(n.mode){case"menu":hp.getState(e).each(function(t){Nx.repositionMenus(t)});break;case"position":var r=t.lazySink(e).getOrDie();Eh.positionWithinBounds(r,n.anchor,e,n.getBounds());break}})},d={setContent:r,showAt:o,showWithin:i,showWithinBounds:a,showMenuAt:u,showMenuWithinBounds:s,hide:l,getContent:c,reposition:f,isOpen:hp.isOpen};return{uid:t.uid,dom:t.dom,behaviours:Jp(t.inlineBehaviours,[hp.config({isPartOf:function(t,e,r){return bl(e,r)||n(t,r)},getAttachPoint:function(e){return t.lazySink(e).getOrDie()},onOpen:function(e){t.onShow(e)},onClose:function(e){t.onHide(e)}}),Zp.config({store:{mode:"memory",initialValue:R.none()}}),Xc.config({channels:k(k({},yp(k({isExtraPart:e.isExtraPart},t.fireDismissalEventInstead.map(function(t){return{fireEventInstead:{event:t.event}}}).getOr({})))),xp(k(k({},t.fireRepositionEventInstead.map(function(t){return{fireEventInstead:{event:t.event}}}).getOr({})),{doReposition:f})))})]),eventOrder:t.eventOrder,apis:d}},zx=um({name:"InlineView",configFields:[bn("lazySink"),Bl("onShow"),Bl("onHide"),Nn("onEscape"),$p("inlineBehaviours",[hp,Zp,Xc]),Pn("fireDismissalEventInstead",[Bn("event",ni())]),Pn("fireRepositionEventInstead",[Bn("event",ri())]),Bn("getRelated",R.none),Bn("isExtraPart",C),Bn("eventOrder",R.none)],factory:Px,apis:{showAt:function(t,e,n,r){t.showAt(e,n,r)},showWithin:function(t,e,n,r,o){t.showWithin(e,n,r,o)},showWithinBounds:function(t,e,n,r,o){t.showWithinBounds(e,n,r,o)},showMenuAt:function(t,e,n,r){t.showMenuAt(e,n,r)},showMenuWithinBounds:function(t,e,n,r,o){t.showMenuWithinBounds(e,n,r,o)},hide:function(t,e){t.hide(e)},isOpen:function(t,e){return t.isOpen(e)},getContent:function(t,e){return t.getContent(e)},setContent:function(t,e,n){t.setContent(e,n)},reposition:function(t,e){t.reposition(e)}}}),Bx=function(t){return t.x},Vx=function(t,e){return t.x+t.width/2-e.width/2},Hx=function(t,e){return t.x+t.width-e.width},Fx=function(t){return t.y},Wx=function(t,e){return t.y+t.height-e.height},Ux=function(t,e,n){return jl(Hx(t,e),Wx(t,e),n.innerSoutheast(),Ql(),ic(t,{right:0,bottom:3}),"layout-inner-se")},Gx=function(t,e,n){return jl(Bx(t),Wx(t,e),n.innerSouthwest(),Jl(),ic(t,{left:1,bottom:3}),"layout-inner-sw")},jx=function(t,e,n){return jl(Hx(t,e),Fx(t),n.innerNortheast(),Kl(),ic(t,{right:0,top:2}),"layout-inner-ne")},Xx=function(t,e,n){return jl(Bx(t),Fx(t),n.innerNorthwest(),$l(),ic(t,{left:1,top:2}),"layout-inner-nw")},Yx=function(t,e,n){return jl(Vx(t,e),Fx(t),n.innerNorth(),tc(),ic(t,{top:2}),"layout-inner-n")},qx=function(t,e,n){return jl(Vx(t,e),Wx(t,e),n.innerSouth(),ec(),ic(t,{bottom:3}),"layout-inner-s")},Zx=tinymce.util.Tools.resolve("tinymce.util.Delay"),$x=function(t){var e=Qb(t.action),n=t.dom.tag,r=function(e){return Vt(t.dom,"attributes").bind(function(t){return Vt(t,e)})},o=function(){if("button"===n){var t=r("type").getOr("button"),e=r("role").map(function(t){return{role:t}}).getOr({});return k({type:t},e)}var o=r("role").getOr("button");return{role:o}};return{uid:t.uid,dom:t.dom,components:t.components,events:e,behaviours:Qp.augment(t.buttonBehaviours,[Lb.config({}),fb.config({mode:"execution",useSpace:!0,useEnter:!0})]),domModification:{attributes:o()},eventOrder:t.eventOrder}},Kx=um({name:"Button",factory:$x,configFields:[Bn("uid",void 0),bn("dom"),Bn("components",[]),Qp.field("buttonBehaviours",[Lb,fb]),In("action"),In("role"),Bn("eventOrder",{})]}),Jx=function(t){var e=om(t)&&Ft(t,"uid")?t.uid:ja("memento"),n=function(t){return t.getSystem().getByUid(e).getOrDie()},r=function(t){return t.getSystem().getByUid(e).toOptional()},o=function(){return k(k({},t),{uid:e})};return{get:n,getOpt:r,asSpec:o}},Qx=function(t){return R.from(t()["temporary-placeholder"]).getOr("!not found!")},tw=function(t,e){return R.from(e()[t.toLowerCase()]).getOrThunk(function(){return Qx(e)})},ew=function(t,e,n){return R.from(e()[t.toLowerCase()]).or(n).getOrThunk(function(){return Qx(e)})},nw=function(t,e){return dt(t,function(t){return R.from(e()[t.toLowerCase()])}).getOrThunk(function(){return Qx(e)})},rw={success:"checkmark",error:"warning",err:"error",warning:"warning",warn:"warning",info:"info"},ow=function(t){var e=Jx({dom:{tag:"p",innerHtml:t.translationProvider(t.text)},behaviours:Hc([wb.config({})])}),n=function(t){return{dom:{tag:"div",classes:["tox-bar"],attributes:{style:"width: "+t+"%"}}}},r=function(t){return{dom:{tag:"div",classes:["tox-text"],innerHtml:t+"%"}}},o=Jx({dom:{tag:"div",classes:t.progress?["tox-progress-bar","tox-progress-indicator"]:["tox-progress-bar"]},components:[{dom:{tag:"div",classes:["tox-bar-container"]},components:[n(0)]},r(0)],behaviours:Hc([wb.config({})])}),i=function(t,e){t.getSystem().isConnected()&&o.getOpt(t).each(function(t){wb.set(t,[{dom:{tag:"div",classes:["tox-bar-container"]},components:[n(e)]},r(e)])})},a=function(t,n){if(t.getSystem().isConnected()){var r=e.get(t);wb.set(r,[ms(n)])}},u={updateProgress:i,updateText:a},s=et([t.icon.toArray(),t.level.toArray(),t.level.bind(function(t){return R.from(rw[t])}).toArray()]),l=Jx(Kx.sketch({dom:{tag:"button",classes:["tox-notification__dismiss","tox-button","tox-button--naked","tox-button--icon"]},components:[{dom:{tag:"div",classes:["tox-icon"],innerHtml:tw("close",t.iconProvider),attributes:{"aria-label":t.translationProvider("Close")}}}],action:function(e){t.onAction(e)}})),c=[{dom:{tag:"div",classes:["tox-notification__icon"],innerHtml:nw(s,t.iconProvider)}},{dom:{tag:"div",classes:["tox-notification__body"]},components:[e.asSpec()],behaviours:Hc([wb.config({})])}];return{uid:t.uid,dom:{tag:"div",attributes:{role:"alert"},classes:t.level.map(function(t){return["tox-notification","tox-notification--in","tox-notification--"+t]}).getOr(["tox-notification","tox-notification--in"])},behaviours:Hc([Lb.config({}),Sb("notification-events",[xi(Do(),function(t){l.getOpt(t).each(Lb.focus)})])]),components:c.concat(t.progress?[o.asSpec()]:[]).concat(t.closeButton?[l.asSpec()]:[]),apis:u}},iw=um({name:"Notification",factory:ow,configFields:[In("level"),bn("progress"),bn("icon"),bn("onAction"),bn("text"),bn("iconProvider"),bn("translationProvider"),Un("closeButton",!0)],apis:{updateProgress:function(t,e,n){t.updateProgress(e,n)},updateText:function(t,e,n){t.updateText(e,n)}}});function aw(t,e,n){var r=e.backstage,o=function(t){switch(t){case"bc-bc":return qx;case"tc-tc":return Yx;case"tc-bc":return bc;case"bc-tc":default:return xc}},i=function(t){X(t,function(t){return t.moveTo(0,0)})},a=function(t){t.length>0&&(lt(t).each(function(t){return t.moveRel(null,"banner")}),X(t,function(e,n){n>0&&e.moveRel(t[n-1].getEl(),"bc-tc")}))},u=function(t){i(t),a(t)},s=function(t,i){var a=!t.closeButton&&t.timeout&&(t.timeout>0||t.timeout<0),u=function(){i(),zx.hide(l)},s=bs(iw.sketch({text:t.text,level:F(["success","error","warning","warn","info"],t.type)?t.type:void 0,progress:!0===t.progressBar,icon:R.from(t.icon),closeButton:!a,onAction:u,iconProvider:r.shared.providers.icons,translationProvider:r.shared.providers.translate})),l=bs(zx.sketch(k({dom:{tag:"div",classes:["tox-notifications-container"]},lazySink:e.backstage.shared.getSink,fireDismissalEventInstead:{}},r.shared.header.isPositionedAtTop()?{}:{fireRepositionEventInstead:{}})));return n.add(l),t.timeout>0&&Zx.setTimeout(function(){u()},t.timeout),{close:u,moveTo:function(t,e){zx.showAt(l,{anchor:"makeshift",x:t,y:e},xs(s))},moveRel:function(t,n){if("banner"!==n){var r=o(n),i={anchor:"node",root:ju(),node:R.some(er.fromDom(t)),layouts:{onRtl:function(){return[r]},onLtr:function(){return[r]}}};zx.showAt(l,i,xs(s))}else zx.showAt(l,e.backstage.shared.anchors.banner(),xs(s))},text:function(t){iw.updateText(s,t)},settings:t,getEl:function(){return s.element.dom},progressBar:{value:function(t){iw.updateProgress(s,t)}}}},l=function(t){t.close()},c=function(t){return t.settings};return{open:s,close:l,reposition:u,getArgs:c}}var uw,sw=function(t,e){var n=null,r=function(){null!==n&&(clearTimeout(n),n=null)},o=function(){for(var r=[],o=0;o<arguments.length;o++)r[o]=arguments[o];null===n&&(n=setTimeout(function(){t.apply(null,r),n=null},e))};return{cancel:r,throttle:o}},lw=function(t,e){var n=null,r=function(){null!==n&&(clearTimeout(n),n=null)},o=function(){for(var r=[],o=0;o<arguments.length;o++)r[o]=arguments[o];null!==n&&clearTimeout(n),n=setTimeout(function(){t.apply(null,r),n=null},e)};return{cancel:r,throttle:o}},cw=tinymce.util.Tools.resolve("tinymce.dom.TextSeeker"),fw=function(t,e){return t.isBlock(e)||F(["BR","IMG","HR","INPUT"],e.nodeName)||"false"===t.getContentEditable(e)},dw=function(t,e,n,r,o){var i=cw(t,function(e){return fw(t,e)});return R.from(i.backwards(e,n,r,o))},hw="[data-mce-autocompleter]",pw=function(t,e){return gw(er.fromDom(t.selection.getNode())).getOrThunk(function(){var n=er.fromHtml('<span data-mce-autocompleter="1" data-mce-bogus="1"></span>',t.getDoc());return fa(n,er.fromDom(e.extractContents())),e.insertNode(n.dom),ji(n).each(function(t){return t.dom.normalize()}),Zd(n).map(function(e){t.selection.setCursorLocation(e.dom,jd(e))}),n})},gw=function(t){return gl(t,hw)},mw=function(t){return t.collapsed&&3===t.startContainer.nodeType},vw=function(t){return t.toString().replace(/\u00A0/g," ").replace(/\uFEFF/g,"")},yw=function(t){return""!==t&&-1!=="  \f\n\r\t\v".indexOf(t)},bw=function(t,e){return t.substring(e.length)},xw=function(t,e,n){var r;for(r=e-1;r>=0;r--){var o=t.charAt(r);if(yw(o))return R.none();if(o===n)break}return R.some(r)},ww=function(t,e,n,r){if(void 0===r&&(r=0),!mw(e))return R.none();var o=function(t,e,r){return xw(r,e,n).getOr(e)},i=t.getParent(e.startContainer,t.isBlock)||t.getRoot();return dw(t,e.startContainer,e.startOffset,o,i).bind(function(t){var o=e.cloneRange();if(o.setStart(t.container,t.offset),o.setEnd(e.endContainer,e.endOffset),o.collapsed)return R.none();var i=vw(o),a=i.lastIndexOf(n);return 0!==a||bw(i,n).length<r?R.none():R.some({text:bw(i,n),range:o,triggerChar:n})})},_w=function(t,e,n,r){return void 0===r&&(r=0),gw(er.fromDom(e.startContainer)).fold(function(){return ww(t,e,n,r)},function(e){var r=t.createRng();r.selectNode(e.dom);var o=vw(r);return R.some({range:r,text:bw(o,n),triggerChar:n})})},Sw=function(t,e){e.on("keypress compositionend",t.onKeypress.throttle),e.on("remove",t.onKeypress.cancel);var n=function(t,e){fi(t,Io(),{raw:e})};e.on("keydown",function(e){var r=function(){return t.getView().bind(Vm.getHighlighted)};8===e.which&&t.onKeypress.throttle(e),t.isActive()&&(27===e.which&&t.cancelIfNecessary(),t.isMenuOpen()?13===e.which?(r().each(di),e.preventDefault()):40===e.which?(r().fold(function(){t.getView().each(Vm.highlightFirst)},function(t){n(t,e)}),e.preventDefault(),e.stopImmediatePropagation()):37!==e.which&&38!==e.which&&39!==e.which||r().each(function(t){n(t,e),e.preventDefault(),e.stopImmediatePropagation()}):13!==e.which&&38!==e.which&&40!==e.which||t.cancelIfNecessary())}),e.on("NodeChange",function(e){t.isActive()&&!t.isProcessingAction()&&gw(er.fromDom(e.element)).isNone()&&t.cancelIfNecessary()})},Cw={setup:Sw},Mw=tinymce.util.Tools.resolve("tinymce.util.Promise"),Tw=function(t,e){return{container:t,offset:e}},kw=function(t){return t.nodeType===Qr},Dw=function(t){return t.nodeType===Jr},Aw=function(t){if(kw(t))return Tw(t,t.data.length);var e=t.childNodes;return e.length>0?Aw(e[e.length-1]):Tw(t,e.length)},Iw=function(t,e){var n=t.childNodes;return n.length>0&&e<n.length?Iw(n[e],0):n.length>0&&Dw(t)&&n.length===e?Aw(n[n.length-1]):Tw(t,e)},Ow=function(t,e){return dw(t,e.container,e.offset,function(t,e){return 0===e?-1:e},t.getRoot()).filter(function(t){var e=t.container.data.charAt(t.offset-1);return!yw(e)}).isSome()},Lw=function(t){return function(e){var n=Iw(e.startContainer,e.startOffset);return!Ow(t,n)}},Ew=function(t,e,n){return dt(n.triggerChars,function(n){return _w(t,e,n)})},Nw=function(t,e){var n=e(),r=t.selection.getRng();return Ew(t.dom,r,n).bind(function(n){return Rw(t,e,n)})},Rw=function(t,e,n,r){void 0===r&&(r={});var o=e(),i=t.selection.getRng(),a=i.startContainer.nodeValue,u=Z(o.lookupByChar(n.triggerChar),function(e){return n.text.length>=e.minChars&&e.matches.getOrThunk(function(){return Lw(t.dom)})(n.range,a,n.text)});if(0===u.length)return R.none();var s=Mw.all(j(u,function(t){var e=t.fetch(n.text,t.maxResults,r);return e.then(function(e){return{matchText:n.text,items:e,columns:t.columns,onAction:t.onAction,highlightOn:t.highlightOn}})}));return R.some({lookupData:s,context:n})},Pw=Be([_n("type"),En("text")]),zw=function(t){return nn("separatormenuitem",Pw,t)},Bw=Be([Bn("type","autocompleteitem"),Bn("active",!1),Bn("disabled",!1),Bn("meta",{}),_n("value"),En("text"),En("icon")]),Vw=Be([_n("type"),_n("ch"),Hn("minChars",1),Bn("columns",1),Hn("maxResults",10),Nn("matches"),Mn("fetch"),Mn("onAction"),Xn("highlightOn",[],hn)]),Hw=function(t){return nn("Autocompleter.Separator",Pw,t)},Fw=function(t){return nn("Autocompleter.Item",Bw,t)},Ww=function(t){return nn("Autocompleter",Vw,t)},Uw=[Un("disabled",!1),En("tooltip"),En("icon"),En("text"),Gn("onSetup",function(){return g})],Gw=Be([_n("type"),Mn("onAction")].concat(Uw)),jw=function(t){return nn("toolbarbutton",Gw,t)},Xw=[Un("active",!1)].concat(Uw),Yw=Be(Xw.concat([_n("type"),Mn("onAction")])),qw=function(t){return nn("ToggleButton",Yw,t)},Zw=[Gn("predicate",C),Wn("scope","node",["node","editor"]),Wn("position","selection",["node","selection","line"])],$w=Uw.concat([Bn("type","contextformbutton"),Bn("primary",!1),Mn("onAction"),qn("original",x)]),Kw=Xw.concat([Bn("type","contextformbutton"),Bn("primary",!1),Mn("onAction"),qn("original",x)]),Jw=Uw.concat([Bn("type","contextformbutton")]),Qw=Xw.concat([Bn("type","contextformtogglebutton")]),t_=sn("type",{contextformbutton:$w,contextformtogglebutton:Kw}),e_=Be([Bn("type","contextform"),Gn("initValue",function(){return""}),En("label"),An("commands",t_),On("launch",sn("type",{contextformbutton:Jw,contextformtogglebutton:Qw}))].concat(Zw)),n_=function(t){return nn("ContextForm",e_,t)},r_=Be([Bn("type","contexttoolbar"),_n("items")].concat(Zw)),o_=function(t){return nn("ContextToolbar",r_,t)},i_=function(t){var e={};return X(t,function(t){e[t]={}}),Dt(e)},a_=function(t){var e=t.ui.registry.getAll().popups,n=Ot(e,function(t){return Ww(t).fold(function(t){throw new Error(an(t))},function(t){return t})}),r=i_(Pt(n,function(t){return t.ch})),o=Bt(n),i=function(t){return Z(o,function(e){return e.ch===t})};return{dataset:n,triggerChars:r,lookupByChar:i}};(function(t){t[t["CLOSE_ON_EXECUTE"]=0]="CLOSE_ON_EXECUTE",t[t["BUBBLE_TO_SANDBOX"]=1]="BUBBLE_TO_SANDBOX"})(uw||(uw={}));var u_,s_=uw,l_="tox-menu-nav__js",c_="tox-collection__item",f_="tox-swatch",d_={normal:l_,color:f_},h_="tox-collection__item--enabled",p_="tox-collection__group-heading",g_="tox-collection__item-icon",m_="tox-collection__item-label",v_="tox-collection__item-accessory",y_="tox-collection__item-caret",b_="tox-collection__item-checkmark",x_="tox-collection__item--active",w_="tox-collection__item-icon-rtl",__="tox-collection__item-container",S_="tox-collection__item-container--column",C_="tox-collection__item-container--row",M_="tox-collection__item-container--align-right",T_="tox-collection__item-container--align-left",k_="tox-collection__item-container--valign-top",D_="tox-collection__item-container--valign-middle",A_="tox-collection__item-container--valign-bottom",I_=function(t){return Vt(d_,t).getOr(l_)},O_=function(t){return"color"===t?"tox-swatches":"tox-menu"},L_=function(t){return{backgroundMenu:"tox-background-menu",selectedMenu:"tox-selected-menu",selectedItem:"tox-collection__item--active",hasIcons:"tox-menu--has-icons",menu:O_(t),tieredMenu:"tox-tiered-menu"}},E_=function(t){var e=L_(t);return{backgroundMenu:e.backgroundMenu,selectedMenu:e.selectedMenu,menu:e.menu,selectedItem:e.selectedItem,item:I_(t)}},N_=function(t,e,n){var r=L_(n);return{tag:"div",classes:et([[r.menu,"tox-menu-"+e+"-column"],t?[r.hasIcons]:[]])}},R_=[_x.parts.items({})],P_=function(t,e,n){var r=L_(n),o={tag:"div",classes:et([[r.tieredMenu]])};return{dom:o,markers:E_(n)}},z_=function(t,e){return function(n){var r=G(n,e);return j(r,function(e){return{dom:t,components:e}})}},B_=function(t){return{dom:{tag:"div",classes:["tox-menu","tox-swatches-menu"]},components:[{dom:{tag:"div",classes:["tox-swatches"]},components:[_x.parts.items({preprocess:"auto"!==t?z_({tag:"div",classes:["tox-swatches__row"]},t):x})]}]}},V_=function(t){return{dom:{tag:"div",classes:["tox-menu","tox-collection","tox-collection--toolbar","tox-collection--toolbar-lg"]},components:[_x.parts.items({preprocess:z_({tag:"div",classes:["tox-collection__group"]},t)})]}},H_=function(t,e){var n=[],r=[];return X(t,function(t,o){e(t,o)?(r.length>0&&n.push(r),r=[],Ht(t.dom,"innerHtml")&&r.push(t)):r.push(t)}),r.length>0&&n.push(r),j(n,function(t){return{dom:{tag:"div",classes:["tox-collection__group"]},components:t}})},F_=function(t,e,n){return{dom:{tag:"div",classes:["tox-menu","tox-collection"].concat(1===t?["tox-collection--list"]:["tox-collection--grid"])},components:[_x.parts.items({preprocess:function(n){return"auto"!==t&&t>1?z_({tag:"div",classes:["tox-collection__group"]},t)(n):H_(n,function(t,n){return"separator"===e[n].type})}})]}},W_=function(t,e){return{dom:{tag:"div",classes:["tox-collection","tox-collection--horizontal"]},components:[_x.parts.items({preprocess:function(e){return H_(e,function(e,n){return"separator"===t[n].type})}})]}},U_=function(t){return W(t,function(t){return"icon"in t&&void 0!==t.icon})},G_=function(t){return console.error(an(t)),console.log(t),R.none()},j_=function(t,e,n,r,o){var i=W_(n);return{value:t,dom:i.dom,components:i.components,items:n}},X_=function(t,e,n,r,o){if("color"===o){var i=B_(r);return{value:t,dom:i.dom,components:i.components,items:n}}if("normal"===o&&"auto"===r){i=F_(r,n);return{value:t,dom:i.dom,components:i.components,items:n}}if("normal"===o&&1===r){i=F_(1,n);return{value:t,dom:i.dom,components:i.components,items:n}}if("normal"===o){i=F_(r,n);return{value:t,dom:i.dom,components:i.components,items:n}}if("listpreview"===o&&"auto"!==r){i=V_(r);return{value:t,dom:i.dom,components:i.components,items:n}}return{value:t,dom:N_(e,r,o),components:R_,items:n}},Y_=[_n("type"),_n("src"),En("alt"),Xn("classes",[],hn)],q_=Be(Y_),Z_=[_n("type"),_n("text"),En("name"),Xn("classes",["tox-collection__item-label"],hn)],$_=Be(Z_),K_=Je(function(){return un("type",{cardimage:q_,cardtext:$_,cardcontainer:J_})}),J_=Be([_n("type"),Fn("direction","horizontal"),Fn("align","left"),Fn("valign","middle"),An("items",K_)]),Q_=[Un("disabled",!1),En("text"),En("shortcut"),Xe("value","value",ne(function(){return za("menuitem-value")}),cn()),Bn("meta",{})],tS=Be([_n("type"),En("label"),An("items",K_),Gn("onSetup",function(){return g}),Gn("onAction",g)].concat(Q_)),eS=function(t){return nn("cardmenuitem",tS,t)},nS=Be([_n("type"),Un("active",!1),En("icon")].concat(Q_)),rS=function(t){return nn("choicemenuitem",nS,t)},oS=["inserttable","colorswatch"],iS=Be([_n("type"),Sn("fancytype",oS),Gn("onAction",g)]),aS=function(t){return nn("fancymenuitem",iS,t)},uS=Be([_n("type"),Gn("onSetup",function(){return g}),Gn("onAction",g),En("icon")].concat(Q_)),sS=function(t){return nn("menuitem",uS,t)},lS=Be([_n("type"),Mn("getSubmenuItems"),Gn("onSetup",function(){return g}),En("icon")].concat(Q_)),cS=function(t){return nn("nestedmenuitem",lS,t)},fS=Be([_n("type"),En("icon"),Un("active",!1),Gn("onSetup",function(){return g}),Mn("onAction")].concat(Q_)),dS=function(t){return nn("togglemenuitem",fS,t)},hS=function(t,e,n){var r=Kd(t.element,"."+n);if(r.length>0){var o=tt(r,function(t){var n=t.dom.getBoundingClientRect().top,o=r[0].dom.getBoundingClientRect().top;return Math.abs(n-o)>e}).getOr(r.length);return R.some({numColumns:o,numRows:Math.ceil(r.length/o)})}return R.none()},pS=function(t,e){return Hc([Sb(t,e)])},gS=function(t){return pS(za("unnamed-events"),t)},mS={namedEvents:pS,unnamedEvents:gS},vS=za("tooltip.exclusive"),yS=za("tooltip.show"),bS=za("tooltip.hide"),xS=function(t,e,n){t.getSystem().broadcastOn([vS],{})},wS=function(t,e,n,r){n.getTooltip().each(function(t){t.getSystem().isConnected()&&wb.set(t,r)})},_S=Object.freeze({__proto__:null,hideAllExclusive:xS,setComponents:wS}),SS=function(t,e){var n=function(n){e.getTooltip().each(function(r){Wh(r),t.onHide(n,r),e.clearTooltip()}),e.clearTimer()},r=function(n){if(!e.isShowing()){xS(n);var r=t.lazySink(n).getOrDie(),o=n.getSystem().build({dom:t.tooltipDom,components:t.tooltipComponents,events:mi("normal"===t.mode?[xi(ko(),function(t){ci(n,yS)}),xi(Mo(),function(t){ci(n,bS)})]:[]),behaviours:Hc([wb.config({})])});e.setTooltip(o),Vh(r,o),t.onShow(n,o),Eh.position(r,t.anchor(n),o)}};return mi(et([[xi(yS,function(n){e.resetTimer(function(){r(n)},t.delay)}),xi(bS,function(r){e.resetTimer(function(){n(r)},t.delay)}),xi(Wo(),function(t,e){var r=e;r.universal||F(r.channels,vS)&&n(t)}),Oi(function(t){n(t)})],"normal"===t.mode?[xi(Do(),function(t){ci(t,yS)}),xi(Ho(),function(t){ci(t,bS)}),xi(ko(),function(t){ci(t,yS)}),xi(Mo(),function(t){ci(t,bS)})]:[xi(si(),function(t,e){ci(t,yS)}),xi(li(),function(t){ci(t,bS)})]]))},CS=Object.freeze({__proto__:null,events:SS}),MS=[bn("lazySink"),bn("tooltipDom"),Bn("exclusive",!0),Bn("tooltipComponents",[]),Bn("delay",300),Wn("mode","normal",["normal","follow-highlight"]),Bn("anchor",function(t){return{anchor:"hotspot",hotspot:t,layouts:{onLtr:b([xc,bc,gc,vc,mc,yc]),onRtl:b([xc,bc,gc,vc,mc,yc])}}}),Bl("onHide"),Bl("onShow")],TS=function(){var t=Zn(R.none()),e=Zn(R.none()),n=function(){return e.get()},r=function(t){e.set(R.some(t))},o=function(){e.set(R.none())},i=function(){t.get().each(function(t){clearTimeout(t)})},a=function(e,n){i(),t.set(R.some(setTimeout(function(){e()},n)))},u=function(){return e.get().isSome()},s=b("not-implemented");return ou({getTooltip:n,isShowing:u,setTooltip:r,clearTooltip:o,clearTimer:i,resetTimer:a,readState:s})},kS=Object.freeze({__proto__:null,init:TS}),DS=Wc({fields:MS,name:"tooltipping",active:CS,state:kS,apis:_S}),AS=function(t){return t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")},IS=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),OS=tinymce.util.Tools.resolve("tinymce.util.I18n"),LS=["input","button","textarea","select"],ES=function(t,e,n){var r=e.disabled()?FS:WS;r(t,e)},NS=function(t,e){return!0===e.useNative&&F(LS,Ni(t.element))},RS=function(t){return ka(t.element,"disabled")},PS=function(t){Sa(t.element,"disabled","disabled")},zS=function(t){Da(t.element,"disabled")},BS=function(t){return"true"===Ma(t.element,"aria-disabled")},VS=function(t){Sa(t.element,"aria-disabled","true")},HS=function(t){Sa(t.element,"aria-disabled","false")},FS=function(t,e,n){e.disableClass.each(function(e){zu(t.element,e)});var r=NS(t,e)?PS:VS;r(t),e.onDisabled(t)},WS=function(t,e,n){e.disableClass.each(function(e){Vu(t.element,e)});var r=NS(t,e)?zS:HS;r(t),e.onEnabled(t)},US=function(t,e){return NS(t,e)?RS(t):BS(t)},GS=function(t,e,n,r){var o=r?FS:WS;o(t,e)},jS=Object.freeze({__proto__:null,enable:WS,disable:FS,isDisabled:US,onLoad:ES,set:GS}),XS=function(t,e){return lu({classes:e.disabled()?e.disableClass.toArray():[]})},YS=function(t,e){return mi([vi(Uo(),function(e,n){return US(e,t)}),Nc(t,e,ES)])},qS=Object.freeze({__proto__:null,exhibit:XS,events:YS}),ZS=[Gn("disabled",C),Bn("useNative",!0),In("disableClass"),Bl("onDisabled"),Bl("onEnabled")],$S=Wc({fields:ZS,name:"disabling",active:qS,apis:jS}),KS=tinymce.util.Tools.resolve("tinymce.EditorManager"),JS=function(t){var e=t.getParam("skin"),n=t.getParam("skin_url");if(!1!==e){var r=e||"oxide";n=n?t.documentBaseURI.toAbsolute(n):KS.baseURL+"/skins/ui/"+r}return n},QS=function(t){return t.getParam("readonly",!1,"boolean")},tC=function(t){return!1===t.getParam("skin")},eC=function(t){return t.getParam("height",Math.max(t.getElement().offsetHeight,200))},nC=function(t){return t.getParam("width",IS.DOM.getStyle(t.getElement(),"width"))},rC=function(t){return R.from(t.getParam("min_width")).filter(h)},oC=function(t){return R.from(t.getParam("min_height")).filter(h)},iC=function(t){return R.from(t.getParam("max_width")).filter(h)},aC=function(t){return R.from(t.getParam("max_height")).filter(h)},uC=function(t){return R.from(t.getParam("style_formats")).filter(u)},sC=function(t){return t.getParam("style_formats_merge",!1,"boolean")},lC=function(t){return t.getParam("lineheight_formats","1 1.1 1.2 1.3 1.4 1.5 2","string").split(" ")},cC=function(t){return t.getParam("removed_menuitems","")},fC=function(t){return!1!==t.getParam("menubar",!0,"boolean")},dC=function(t){var e=t.getParam("toolbar",!0),n=!0===e,r=i(e),o=u(e)&&e.length>0;return!pC(t)&&(o||r||n)},hC=function(t){var e=U(9,function(e){return t.getParam("toolbar"+(e+1),!1,"string")}),n=Z(e,function(t){return"string"===typeof t});return n.length>0?R.some(n):R.none()},pC=function(t){return hC(t).fold(function(){var e=t.getParam("toolbar",[],"string[]");return e.length>0},M)};(function(t){t["default"]="wrap",t["floating"]="floating",t["sliding"]="sliding",t["scrolling"]="scrolling"})(u_||(u_={}));var gC,mC=function(t){return t.getParam("toolbar_mode","","string")};(function(t){t["auto"]="auto",t["top"]="top",t["bottom"]="bottom"})(gC||(gC={}));var vC,yC=function(t){return t.getParam("toolbar_groups",{},"object")},bC=function(t){return t.getParam("toolbar_location",gC.auto,"string")},xC=function(t){return bC(t)===gC.bottom},wC=function(t){return t.getParam("fixed_toolbar_container","","string")},_C=function(t){return t.getParam("fixed_toolbar_container_target")},SC=function(t){return t.getParam("toolbar_persist",!1,"boolean")},CC=function(t){if(!t.inline)return R.none();var e=wC(t);if(e.length>0)return pl(ju(),e);var n=_C(t);return f(n)?R.some(er.fromDom(n)):R.none()},MC=function(t){return t.inline&&CC(t).isSome()},TC=function(t){var e=CC(t);return e.getOrThunk(function(){return na(ea(er.fromDom(t.getElement())))})},kC=function(t){return t.inline&&!fC(t)&&!dC(t)&&!pC(t)},DC=function(t){var e=t.getParam("toolbar_sticky",!1,"boolean");return(e||t.inline)&&!MC(t)&&!kC(t)},AC=function(t){return t.getParam("draggable_modal",!1,"boolean")},IC=function(t){var e=t.getParam("menu");return e?Ot(e,function(t){return k(k({},t),{items:t.items})}):{}},OC=function(t){return t.getParam("menubar")},LC=function(t){return t.getParam("toolbar",!0)},EC=function(t){return t.getParam("file_picker_callback")},NC=function(t){return t.getParam("file_picker_types")},RC=function(t){return t.getParam("file_browser_callback_types")},PC=function(t){return!1===t.getParam("typeahead_urls")},zC=function(t){return t.getParam("anchor_top","#top")},BC=function(t){return t.getParam("anchor_bottom","#bottom")},VC=function(t){var e=t.getParam("file_picker_validator_handler",void 0,"function");return void 0===e?t.getParam("filepicker_validator_handler",void 0,"function"):e},HC="silver.readonly",FC=Be([Cn("readonly")]),WC=function(t,e){var n=t.outerContainer,r=n.element;e&&(t.mothership.broadcastOn([pp()],{target:r}),t.uiMothership.broadcastOn([pp()],{target:r})),t.mothership.broadcastOn([HC],{readonly:e}),t.uiMothership.broadcastOn([HC],{readonly:e})},UC=function(t,e){t.on("init",function(){t.mode.isReadOnly()&&WC(e,!0)}),t.on("SwitchMode",function(){return WC(e,t.mode.isReadOnly())}),QS(t)&&t.setMode("readonly")},GC=function(){var t;return Xc.config({channels:(t={},t[HC]={schema:FC,onReceive:function(t,e){$S.set(t,e.readonly)}},t)})},jC=function(t){return $S.config({disabled:t,disableClass:"tox-collection__item--state-disabled"})},XC=function(t){return $S.config({disabled:t})},YC=function(t){return $S.config({disabled:t,disableClass:"tox-tbtn--disabled"})},qC=function(t){return $S.config({disabled:t,disableClass:"tox-tbtn--disabled",useNative:!1})},ZC={item:jC,button:XC,splitButton:YC,toolbarButton:qC},$C=function(t,e){var n=t.getApi(e);return function(t){t(n)}},KC=function(t,e){return Ii(function(n){var r=$C(t,n);r(function(n){var r=t.onSetup(n);d(r)&&e.set(r)})})},JC=function(t,e){return Oi(function(n){return $C(t,n)(e.get())})},QC=function(t,e){return Ei(function(n,r){$C(t,n)(t.onAction),t.triggersSubmenu||e!==s_.CLOSE_ON_EXECUTE||(n.getSystem().isConnected()&&ci(n,Yo()),r.stop())})},tM=(vC={},vC[Uo()]=["disabling","alloy.base.behaviour","toggling","item-events"],vC),eM=function(t){return nt(t,function(t){return t.toArray()})},nM=function(t,e,n,r){var o=Zn(g);return{type:"item",dom:e.dom,components:eM(e.optComponents),data:t.data,eventOrder:tM,hasSubmenu:t.triggersSubmenu,itemBehaviours:Hc([Sb("item-events",[QC(t,n),KC(t,o),JC(t,o)]),ZC.item(function(){return t.disabled||r.isDisabled()}),GC(),wb.config({})].concat(t.itemBehaviours))}},rM=function(t){return{value:t.value,meta:k({text:t.text.getOr("")},t.meta)}},oM=tinymce.util.Tools.resolve("tinymce.Env"),iM=function(t){var e={alt:"&#x2325;",ctrl:"&#x2303;",shift:"&#x21E7;",meta:"&#x2318;",access:"&#x2303;&#x2325;"},n={meta:"Ctrl",access:"Shift+Alt"},r=oM.mac?e:n,o=t.split("+"),i=j(o,function(t){var e=t.toLowerCase().trim();return Ht(r,e)?r[e]:t});return oM.mac?i.join(""):i.join("+")},aM=function(t){return{dom:{tag:"div",classes:[g_],innerHtml:t}}},uM=function(t){return{dom:{tag:"div",classes:[m_]},components:[ms(OS.translate(t))]}},sM=function(t,e){return{dom:{tag:"div",classes:e,innerHtml:t}}},lM=function(t,e){return{dom:{tag:"div",classes:[m_]},components:[{dom:{tag:t.tag,styles:t.styles},components:[ms(OS.translate(e))]}]}},cM=function(t){return{dom:{tag:"div",classes:[v_],innerHtml:iM(t)}}},fM=function(t){return{dom:{tag:"div",classes:[b_],innerHtml:tw("checkmark",t)}}},dM=function(t){return{dom:{tag:"div",classes:[y_],innerHtml:tw("chevron-right",t)}}},hM=function(t){return{dom:{tag:"div",classes:[y_],innerHtml:tw("chevron-down",t)}}},pM=function(t,e){var n="vertical"===t.direction?S_:C_,r="left"===t.align?T_:M_,o=function(){switch(t.valign){case"top":return k_;case"middle":return D_;case"bottom":return A_}};return{dom:{tag:"div",classes:[__,n,r,o()]},components:e}},gM=function(t,e,n){return{dom:{tag:"img",classes:e,attributes:{src:t,alt:n.getOr("")}}}},mM=function(t,e,n,r){var o="custom",i="remove",a=function(){var a=f_,u=n.getOr(""),s=t.map(function(t){return{title:r.translate(t)}}).getOr({}),l={tag:"div",attributes:s,classes:[a]};return k(k({},l),e===o?{tag:"button",classes:A(l.classes,["tox-swatches__picker-btn"]),innerHtml:u}:e===i?{classes:A(l.classes,["tox-swatch--remove"]),innerHtml:u}:{attributes:k(k({},l.attributes),{"data-mce-color":e}),styles:{"background-color":e}})};return{dom:a(),optComponents:[]}},vM=function(t,e){var n=e.map(function(t){return{attributes:{title:OS.translate(t)}}}).getOr({});return k({tag:"div",classes:[l_,c_].concat(t?[w_]:[])},n)},yM=function(t,e,n,r,o){var i=n?e.or(R.some("")).map(aM):R.none(),a=t.checkMark,u=t.htmlContent.fold(function(){return t.textContent.map(r)},function(t){return R.some(sM(t,[m_]))}),s={dom:vM(o,t.ariaLabel),optComponents:[i,u,t.shortcutContent.map(cM),a,t.caret]};return s},bM=["list-num-default","list-num-lower-alpha","list-num-lower-greek","list-num-lower-roman","list-num-upper-alpha","list-num-upper-roman"],xM=["list-bull-circle","list-bull-default","list-bull-square"],wM=function(t,e,n,r){void 0===r&&(r=R.none());var o=function(t){return t.map(function(t){return OS.isRtl()&&F(bM,t)?t+"-rtl":t})},i=OS.isRtl()&&t.iconContent.exists(function(t){return F(xM,t)}),a=o(t.iconContent).map(function(t){return ew(t,e.icons,r)}),u=R.from(t.meta).fold(function(){return uM},function(t){return Ht(t,"style")?w(lM,t.style):uM});return"color"===t.presets?mM(t.ariaLabel,t.value,a,e):yM(t,a,n,u,i)},_M=function(t,e){return Vt(t,"tooltipWorker").map(function(t){return[DS.config({lazySink:e.getSink,tooltipDom:{tag:"div",classes:["tox-tooltip-worker-container"]},tooltipComponents:[],anchor:function(t){return{anchor:"submenu",item:t,overrides:{maxHeightFunction:If}}},mode:"follow-highlight",onShow:function(e,n){t(function(t){DS.setComponents(e,[vs({element:er.fromDom(t)})])})}})]}).getOr([])},SM=function(t){return IS.DOM.encode(t)},CM=function(t,e){var n=OS.translate(t),r=SM(n);if(e.length>0){var o=new RegExp(AS(e),"gi");return r.replace(o,function(t){return'<span class="tox-autocompleter-highlight">'+t+"</span>"})}return r},MM=function(t,e,n,r,o,i,a,u){void 0===u&&(u=!0);var s=wM({presets:r,textContent:R.none(),htmlContent:n?t.text.map(function(t){return CM(t,e)}):R.none(),ariaLabel:t.text,iconContent:t.icon,shortcutContent:R.none(),checkMark:R.none(),caret:R.none(),value:t.value},a.providers,u,t.icon);return nM({data:rM(t),disabled:t.disabled,getApi:b({}),onAction:function(e){return o(t.value,t.meta)},onSetup:b(g),triggersSubmenu:!1,itemBehaviours:_M(t.meta,a)},s,i,a.providers)},TM=function(t,e){return j(t,function(t){switch(t.type){case"cardcontainer":return pM(t,TM(t.items,e));case"cardimage":return gM(t.src,t.classes,t.alt);case"cardtext":var n=t.name.exists(function(t){return F(e.cardText.highlightOn,t)}),r=n?R.from(e.cardText.matchText).getOr(""):"";return sM(CM(t.text,r),t.classes)}})},kM=function(t,e,n,r){var o=function(t){return{isDisabled:function(){return $S.isDisabled(t)},setDisabled:function(e){$S.set(t,e),X(Kd(t.element,"*"),function(n){t.getSystem().getByDom(n).each(function(t){t.hasConfigured($S)&&$S.set(t,e)})})}}},i={dom:vM(!1,t.label),optComponents:[R.some({dom:{tag:"div",classes:[__,C_]},components:TM(t.items,r)})]};return nM({data:rM(k({text:R.none()},t)),disabled:t.disabled,getApi:o,onAction:t.onAction,onSetup:t.onSetup,triggersSubmenu:!1,itemBehaviours:R.from(r.itemBehaviours).getOr([])},i,e,n.providers)},DM=function(t,e,n,r,o,i,a,u){void 0===u&&(u=!0);var s=function(t){return{setActive:function(e){Kb.set(t,e)},isActive:function(){return Kb.isOn(t)},isDisabled:function(){return $S.isDisabled(t)},setDisabled:function(e){return $S.set(t,e)}}},l=wM({presets:n,textContent:e?t.text:R.none(),htmlContent:R.none(),ariaLabel:t.text,iconContent:t.icon,shortcutContent:e?t.shortcut:R.none(),checkMark:e?R.some(fM(a.icons)):R.none(),caret:R.none(),value:t.value},a,u);return qt(nM({data:rM(t),disabled:t.disabled,getApi:s,onAction:function(e){return r(t.value)},onSetup:function(t){return t.setActive(o),g},triggersSubmenu:!1,itemBehaviours:[]},l,i,a),{toggling:{toggleClass:h_,toggleOnExecute:!1,selected:t.active}})},AM=Pg(cx(),fx()),IM=function(t){return{value:t}},OM=/^#?([a-f\d])([a-f\d])([a-f\d])$/i,LM=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i,EM=function(t){return OM.test(t)||LM.test(t)},NM=function(t){var e=t.value.replace(OM,function(t,e,n,r){return e+e+n+n+r+r});return{value:e}},RM=function(t){var e=NM(t),n=LM.exec(e.value);return null===n?["FFFFFF","FF","FF","FF"]:n},PM=function(t){var e=t.toString(16);return(1===e.length?"0"+e:e).toUpperCase()},zM=function(t){var e=PM(t.red)+PM(t.green)+PM(t.blue);return IM(e)},BM=Math.min,VM=Math.max,HM=Math.round,FM=/^rgb\((\d+),\s*(\d+),\s*(\d+)\)/,WM=/^rgba\((\d+),\s*(\d+),\s*(\d+),\s*(\d?(?:\.\d+)?)\)/,UM=function(t,e,n,r){return{red:t,green:e,blue:n,alpha:r}},GM=function(t){var e=parseInt(t,10);return e.toString()===t&&e>=0&&e<=255},jM=function(t){var e,n,r,o=(t.hue||0)%360,i=t.saturation/100,a=t.value/100;if(i=VM(0,BM(i,1)),a=VM(0,BM(a,1)),0===i)return e=n=r=HM(255*a),UM(e,n,r,1);var u=o/60,s=a*i,l=s*(1-Math.abs(u%2-1)),c=a-s;switch(Math.floor(u)){case 0:e=s,n=l,r=0;break;case 1:e=l,n=s,r=0;break;case 2:e=0,n=s,r=l;break;case 3:e=0,n=l,r=s;break;case 4:e=l,n=0,r=s;break;case 5:e=s,n=0,r=l;break;default:e=n=r=0}return e=HM(255*(e+c)),n=HM(255*(n+c)),r=HM(255*(r+c)),UM(e,n,r,1)},XM=function(t){var e=RM(t),n=parseInt(e[1],16),r=parseInt(e[2],16),o=parseInt(e[3],16);return UM(n,r,o,1)},YM=function(t,e,n,r){var o=parseInt(t,10),i=parseInt(e,10),a=parseInt(n,10),u=parseFloat(r);return UM(o,i,a,u)},qM=function(t){if("transparent"===t)return R.some(UM(0,0,0,0));var e=FM.exec(t);if(null!==e)return R.some(YM(e[1],e[2],e[3],"1"));var n=WM.exec(t);return null!==n?R.some(YM(n[1],n[2],n[3],n[4])):R.none()},ZM=function(t){return"rgba("+t.red+","+t.green+","+t.blue+","+t.alpha+")"},$M=UM(255,0,0,1),KM=function(t){return t.fire("SkinLoaded")},JM=function(t,e){return t.fire("SkinLoadError",e)},QM=function(t){return t.fire("ResizeEditor")},tT=function(t,e){return t.fire("ResizeContent",e)},eT=function(t,e){return t.fire("ScrollContent",e)},nT=function(t,e){return t.fire("TextColorChange",e)},rT=tinymce.util.Tools.resolve("tinymce.util.LocalStorage"),oT="tinymce-custom-colors";function iT(t){void 0===t&&(t=10);var e=rT.getItem(oT),n=i(e)?JSON.parse(e):[],r=function(e){var n=t-e.length;return n<0?e.slice(0,t):e},o=r(n),a=function(e){H(o,e).each(u),o.unshift(e),o.length>t&&o.pop(),rT.setItem(oT,JSON.stringify(o))},u=function(t){o.splice(t,1)},s=function(){return o.slice(0)};return{add:a,state:s}}var aT,uT="choiceitem",sT=[{type:uT,text:"Light Green",value:"#BFEDD2"},{type:uT,text:"Light Yellow",value:"#FBEEB8"},{type:uT,text:"Light Red",value:"#F8CAC6"},{type:uT,text:"Light Purple",value:"#ECCAFA"},{type:uT,text:"Light Blue",value:"#C2E0F4"},{type:uT,text:"Green",value:"#2DC26B"},{type:uT,text:"Yellow",value:"#F1C40F"},{type:uT,text:"Red",value:"#E03E2D"},{type:uT,text:"Purple",value:"#B96AD9"},{type:uT,text:"Blue",value:"#3598DB"},{type:uT,text:"Dark Turquoise",value:"#169179"},{type:uT,text:"Orange",value:"#E67E23"},{type:uT,text:"Dark Red",value:"#BA372A"},{type:uT,text:"Dark Purple",value:"#843FA1"},{type:uT,text:"Dark Blue",value:"#236FA1"},{type:uT,text:"Light Gray",value:"#ECF0F1"},{type:uT,text:"Medium Gray",value:"#CED4D9"},{type:uT,text:"Gray",value:"#95A5A6"},{type:uT,text:"Dark Gray",value:"#7E8C8D"},{type:uT,text:"Navy Blue",value:"#34495E"},{type:uT,text:"Black",value:"#000000"},{type:uT,text:"White",value:"#ffffff"}],lT=iT(10),cT=function(t){var e=[],n=document.createElement("canvas");n.height=1,n.width=1;for(var r=n.getContext("2d"),o=function(t,e){var n=255,r=e/255,o=Math.round(t*r+n*(1-r));return("0"+o.toString(16)).slice(-2).toUpperCase()},i=function(t){if(/^[0-9A-Fa-f]{6}$/.test(t))return"#"+t.toUpperCase();r.clearRect(0,0,n.width,n.height),r.fillStyle="#FFFFFF",r.fillStyle=t,r.fillRect(0,0,1,1);var e=r.getImageData(0,0,1,1).data,i=e[0],a=e[1],u=e[2],s=e[3];return"#"+o(i,s)+o(a,s)+o(u,s)},a=0;a<t.length;a+=2)e.push({text:t[a+1],value:i(t[a]),type:"choiceitem"});return e},fT=function(t,e){return t.getParam("color_cols",e,"number")},dT=function(t){return!1!==t.getParam("custom_colors")},hT=function(t){return t.getParam("color_map")},pT=function(t){var e=hT(t);return void 0!==e?cT(e):sT},gT=function(){return j(lT.state(),function(t){return{type:uT,text:t,value:t}})},mT=function(t){lT.add(t)},vT=function(t,e){var n;return t.dom.getParents(t.selection.getStart(),function(t){var r;(r=t.style["forecolor"===e?"color":"background-color"])&&(n=n||r)}),n},yT=function(t,e,n){t.undoManager.transact(function(){t.focus(),t.formatter.apply(e,{value:n}),t.nodeChanged()})},bT=function(t,e){t.undoManager.transact(function(){t.focus(),t.formatter.remove(e,{value:null},null,!0),t.nodeChanged()})},xT=function(t){t.addCommand("mceApplyTextcolor",function(e,n){yT(t,e,n)}),t.addCommand("mceRemoveTextcolor",function(e){bT(t,e)})},wT=function(t){return Math.max(5,Math.ceil(Math.sqrt(t)))},_T=function(t){var e=pT(t),n=wT(e.length);return fT(t,n)},ST=function(t){var e="choiceitem",n={type:e,text:"Remove color",icon:"color-swatch-remove-color",value:"remove"},r={type:e,text:"Custom color",icon:"color-picker",value:"custom"};return t?[n,r]:[n]},CT=function(t,e,n,r){if("custom"===n){var o=IT(t);o(function(n){n.each(function(n){mT(n),t.execCommand("mceApplyTextcolor",e,n),r(n)})},"#000000")}else"remove"===n?(r(""),t.execCommand("mceRemoveTextcolor",e)):(r(n),t.execCommand("mceApplyTextcolor",e,n))},MT=function(t,e){return t.concat(gT().concat(ST(e)))},TT=function(t,e){return function(n){n(MT(t,e))}},kT=function(t,e,n){var r="forecolor"===e?"tox-icon-text-color__color":"tox-icon-highlight-bg-color__color";t.setIconFill(r,n)},DT=function(t,e,n,r,o){t.ui.registry.addSplitButton(e,{tooltip:r,presets:"color",icon:"forecolor"===e?"text-color":"highlight-bg-color",select:function(e){var r=R.from(vT(t,n));return r.bind(function(t){return qM(t).map(function(t){var n=zM(t).value;return pr(e.toLowerCase(),n)})}).getOr(!1)},columns:_T(t),fetch:TT(pT(t),dT(t)),onAction:function(e){null!==o.get()&&CT(t,n,o.get(),g)},onItemAction:function(r,i){CT(t,n,i,function(n){o.set(n),nT(t,{name:e,color:n})})},onSetup:function(n){null!==o.get()&&kT(n,e,o.get());var r=function(t){t.name===e&&kT(n,t.name,t.color)};return t.on("TextColorChange",r),function(){t.off("TextColorChange",r)}}})},AT=function(t,e,n,r){t.ui.registry.addNestedMenuItem(e,{text:r,icon:"forecolor"===e?"text-color":"highlight-bg-color",getSubmenuItems:function(){return[{type:"fancymenuitem",fancytype:"colorswatch",onAction:function(e){CT(t,n,e.value,g)}}]}})},IT=function(t){return function(e,n){var r=!1,o=function(n){var o=n.getData(),i=o.colorpicker;r?(e(R.from(i)),n.close()):t.windowManager.alert(t.translate(["Invalid hex color code: {0}",i]))},i=function(t,e){"hex-valid"===e.name&&(r=e.value)},a={colorpicker:n};t.windowManager.open({title:"Color Picker",size:"normal",body:{type:"panel",items:[{type:"colorpicker",name:"colorpicker",label:"Color"}]},buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:a,onAction:i,onSubmit:o,onClose:g,onCancel:function(){e(R.none())}})}},OT=function(t){xT(t);var e=Zn(null),n=Zn(null);DT(t,"forecolor","forecolor","Text color",e),DT(t,"backcolor","hilitecolor","Background color",n),AT(t,"forecolor","forecolor","Text color"),AT(t,"backcolor","hilitecolor","Background color")},LT=function(t,e,n,r,o,i,a,u){var s=U_(e),l="color"!==o?"normal":"color",c=ET(e,n,r,l,i,a,u);return X_(t,s,c,r,o)},ET=function(t,e,n,r,o,i,a){return lm(j(t,function(u){return"choiceitem"===u.type?rS(u).fold(G_,function(s){return R.some(DM(s,1===n,r,e,i(u.value),o,a,U_(t)))}):R.none()}))},NT=function(t,e){var n=E_(e);if(1===t)return{mode:"menu",moveOnTab:!0};if("auto"===t)return{mode:"grid",selector:"."+n.item,initSize:{numColumns:1,numRows:1}};var r="color"===e?"tox-swatches__row":"tox-collection__group";return{mode:"matrix",rowSelector:"."+r}},RT=function(t,e){return 1===t?{mode:"menu",moveOnTab:!1,selector:".tox-collection__item"}:"auto"===t?{mode:"flatgrid",selector:".tox-collection__item",initSize:{numColumns:1,numRows:1}}:{mode:"matrix",selectors:{row:"color"===e?".tox-swatches__row":".tox-collection__group",cell:"color"===e?"."+f_:"."+c_}}},PT=function(t,e){var n=MT(e.colorinput.getColors(),e.colorinput.hasCustomColors()),r=e.colorinput.getColorCols(),o="color",i=LT(za("menu-value"),n,function(e){t.onAction({value:e})},r,o,s_.CLOSE_ON_EXECUTE,C,e.shared.providers),a=k(k({},i),{markers:E_(o),movement:NT(r,o)});return{type:"widget",data:{value:za("widget-id")},dom:{tag:"div",classes:["tox-fancymenuitem"]},autofocus:!0,components:[AM.widget(_x.sketch(a))]}},zT=za("cell-over"),BT=za("cell-execute"),VT=function(t,e,n){var r,o=function(n){return fi(n,zT,{row:t,col:e})},i=function(n){return fi(n,BT,{row:t,col:e})},a=function(t,e){e.stop(),i(t)};return bs({dom:{tag:"div",attributes:(r={role:"button"},r["aria-labelledby"]=n,r)},behaviours:Hc([Sb("insert-table-picker-cell",[xi(ko(),Lb.focus),xi(Uo(),i),xi(No(),a),xi(jo(),a)]),Kb.config({toggleClass:"tox-insert-table-picker__selected",toggleOnExecute:!1}),Lb.config({onFocus:o})])})},HT=function(t,e,n){for(var r=[],o=0;o<e;o++){for(var i=[],a=0;a<n;a++)i.push(VT(o,a,t));r.push(i)}return r},FT=function(t,e,n,r,o){for(var i=0;i<r;i++)for(var a=0;a<o;a++)Kb.set(t[i][a],i<=e&&a<=n)},WT=function(t){return nt(t,function(t){return j(t,xs)})},UT=function(t,e){return ms(e+1+"x"+(t+1))},GT=function(t){var e=10,n=10,r=za("size-label"),o=HT(r,e,n),i=Jx({dom:{tag:"span",classes:["tox-insert-table-picker__label"],attributes:{id:r}},components:[ms("0x0")],behaviours:Hc([wb.config({})])});return{type:"widget",data:{value:za("widget-id")},dom:{tag:"div",classes:["tox-fancymenuitem"]},autofocus:!0,components:[AM.widget({dom:{tag:"div",classes:["tox-insert-table-picker"]},components:WT(o).concat(i.asSpec()),behaviours:Hc([Sb("insert-table-picker",[Ti(zT,function(t,r,a){var u=a.event.row,s=a.event.col;FT(o,u,s,e,n),wb.set(i.get(t),[UT(u,s)])}),Ti(BT,function(e,n,r){t.onAction({numRows:r.event.row+1,numColumns:r.event.col+1}),ci(e,Yo())})]),fb.config({initSize:{numRows:e,numColumns:n},mode:"flatgrid",selector:'[role="button"]'})])})]}},jT={inserttable:GT,colorswatch:PT},XT=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)?R.some(t[e]):R.none()},YT=function(t,e){return XT(jT,t.fancytype).map(function(n){return n(t,e)})},qT=function(t,e,n,r,o){void 0===r&&(r=!0),void 0===o&&(o=!1);var i=o?hM(n.icons):dM(n.icons),a=function(t){return{isDisabled:function(){return $S.isDisabled(t)},setDisabled:function(e){return $S.set(t,e)}}},u=wM({presets:"normal",iconContent:t.icon,textContent:t.text,htmlContent:R.none(),ariaLabel:t.text,caret:R.some(i),checkMark:R.none(),shortcutContent:t.shortcut},n,r);return nM({data:rM(t),getApi:a,disabled:t.disabled,onAction:g,onSetup:t.onSetup,triggersSubmenu:!0,itemBehaviours:[]},u,e,n)},ZT=function(t,e,n,r){void 0===r&&(r=!0);var o=function(t){return{isDisabled:function(){return $S.isDisabled(t)},setDisabled:function(e){return $S.set(t,e)}}},i=wM({presets:"normal",iconContent:t.icon,textContent:t.text,htmlContent:R.none(),ariaLabel:t.text,caret:R.none(),checkMark:R.none(),shortcutContent:t.shortcut},n,r);return nM({data:rM(t),getApi:o,disabled:t.disabled,onAction:t.onAction,onSetup:t.onSetup,triggersSubmenu:!1,itemBehaviours:[]},i,e,n)},$T=function(t){var e=t.text.fold(function(){return{}},function(t){return{innerHtml:t}});return{type:"separator",dom:k({tag:"div",classes:[c_,p_]},e),components:[]}},KT=function(t,e,n,r){void 0===r&&(r=!0);var o=function(t){return{setActive:function(e){Kb.set(t,e)},isActive:function(){return Kb.isOn(t)},isDisabled:function(){return $S.isDisabled(t)},setDisabled:function(e){return $S.set(t,e)}}},i=wM({iconContent:t.icon,textContent:t.text,htmlContent:R.none(),ariaLabel:t.text,checkMark:R.some(fM(n.icons)),caret:R.none(),shortcutContent:t.shortcut,presets:"normal",meta:t.meta},n,r);return qt(nM({data:rM(t),disabled:t.disabled,getApi:o,onAction:t.onAction,onSetup:t.onSetup,triggersSubmenu:!1,itemBehaviours:[]},i,e,n),{toggling:{toggleClass:h_,toggleOnExecute:!1,selected:t.active}})},JT=MM,QT=$T,tk=ZT,ek=qT,nk=KT,rk=YT,ok=kM;(function(t){t[t["ContentFocus"]=0]="ContentFocus",t[t["UiFocus"]=1]="UiFocus"})(aT||(aT={}));var ik=function(t,e,n,r,o){var i=n.shared.providers,a=function(t){return o?k(k({},t),{shortcut:R.none(),icon:t.text.isSome()?R.none():t.icon}):t};switch(t.type){case"menuitem":return sS(t).fold(G_,function(t){return R.some(tk(a(t),e,i,r))});case"nestedmenuitem":return cS(t).fold(G_,function(t){return R.some(ek(a(t),e,i,r,o))});case"togglemenuitem":return dS(t).fold(G_,function(t){return R.some(nk(a(t),e,i,r))});case"separator":return zw(t).fold(G_,function(t){return R.some(QT(t))});case"fancymenuitem":return aS(t).fold(G_,function(t){return rk(a(t),n)});default:return console.error("Unknown item in general menu",t),R.none()}},ak=function(t,e,n,r,o,i,a){var u=1===r,s=!u||U_(t);return lm(j(t,function(t){switch(t.type){case"separator":return Hw(t).fold(G_,function(t){return R.some(QT(t))});case"cardmenuitem":return eS(t).fold(G_,function(t){return R.some(ok(k(k({},t),{onAction:function(e){t.onAction(e),n(t.value,t.meta)}}),o,i,{itemBehaviours:_M(t.meta,i),cardText:{matchText:e,highlightOn:a}}))});case"autocompleteitem":default:return Fw(t).fold(G_,function(t){return R.some(JT(t,e,u,"normal",n,o,i,s))})}}))},uk=function(t,e,n,r,o){var i=U_(e),a=lm(j(e,function(t){var e=function(t){return o?!t.hasOwnProperty("text"):i},a=function(t){return ik(t,n,r,e(t),o)};return"nestedmenuitem"===t.type&&t.getSubmenuItems().length<=0?a(k(k({},t),{disabled:!0})):a(t)})),u=o?j_:X_;return u(t,i,a,1,"normal")},sk=function(t){return Nx.singleData(t.value,t)},lk=function(t,e,n,r){var o=n===aT.ContentFocus?sv():uv(),i=NT(e,r),a=E_(r);return{dom:t.dom,components:t.components,items:t.items,value:t.value,markers:{selectedItem:a.selectedItem,item:a.item},movement:i,fakeFocus:n===aT.ContentFocus,focusManager:o,menuBehaviours:mS.unnamedEvents("auto"!==e?[]:[Ii(function(t,e){hS(t,4,a.item).each(function(e){var n=e.numColumns,r=e.numRows;fb.setGridSize(t,r,n)})})])}},ck=function(t,e){var n=Zn(R.none()),r=Zn(!1),o=bs(zx.sketch({dom:{tag:"div",classes:["tox-autocompleter"]},components:[],fireDismissalEventInstead:{},inlineBehaviours:Hc([Sb("dismissAutocompleter",[xi(ni(),function(){return s()})])]),lazySink:e.getSink})),i=function(){return zx.isOpen(o)},a=function(){return n.get().isSome()},u=function(){a()&&zx.hide(o)},s=function(){if(a()){var e=n.get().map(function(t){return t.element});gw(e.getOr(er.fromDom(t.selection.getNode()))).each(va),u(),n.set(R.none()),r.set(!1)}},l=$t(function(){return a_(t)}),c=function(n,o){var i=dt(o,function(t){return R.from(t.columns)}).getOr(1);return nt(o,function(o){var a=o.items;return ak(a,o.matchText,function(e,i){var a=t.selection.getRng();_w(t.dom,a,n).fold(function(){return console.error("Lost context. Cursor probably moved")},function(t){var n=t.range,a={hide:function(){s()},reload:function(t){u(),p(t)}};r.set(!0),o.onAction(a,n,e,i),r.set(!1)})},i,s_.BUBBLE_TO_SANDBOX,e,o.highlightOn)})},f=function(e){if(!a()){var o=pw(t,e.range);n.set(R.some({triggerChar:e.triggerChar,element:o,matchLength:e.text.length})),r.set(!1)}},d=function(e,n,r,i){e.matchLength=n.text.length;var a=dt(r,function(t){return R.from(t.columns)}).getOr(1);zx.showAt(o,{anchor:"node",root:er.fromDom(t.getBody()),node:R.from(e.element)},_x.sketch(lk(X_("autocompleter-value",!0,i,a,"normal"),a,aT.ContentFocus,"normal"))),zx.getContent(o).each(Vm.highlightFirst)},h=function(e){return n.get().map(function(n){return _w(t.dom,t.selection.getRng(),n.triggerChar).bind(function(n){return Rw(t,l,n,e)})}).getOrThunk(function(){return Nw(t,l)})},p=function(t){h(t).fold(s,function(t){f(t.context),t.lookupData.then(function(e){n.get().map(function(n){var r=t.context;if(n.triggerChar===r.triggerChar){var o=c(r.triggerChar,e);o.length>0?d(n,r,e,o):r.text.length-n.matchLength>=10?s():u()}})})})},g=lw(function(t){27!==t.which&&p()},50),m={onKeypress:g,cancelIfNecessary:s,isMenuOpen:i,isActive:a,isProcessingAction:r.get,getView:function(){return zx.getContent(o)}};!1===t.hasPlugin("rtc")&&Cw.setup(m,t)},fk={register:ck},dk=M,hk=function(t,e,n){return Fs(t,e,dk,n)},pk=function(t,e,n){return Ws(t,e,dk,n)},gk=Bs,mk=function(t,e,n){return gl(t,e,n).isSome()},vk=function(t,e){var n=null,r=function(){for(var r=[],o=0;o<arguments.length;o++)r[o]=arguments[o];n=setTimeout(function(){t.apply(null,r),n=null},e)},o=function(){null!==n&&(clearTimeout(n),n=null)};return{cancel:o,schedule:r}},yk=5,bk=400,xk=function(t){var e=t.raw;return void 0===e.touches||1!==e.touches.length?R.none():R.some(e.touches[0])},wk=function(t,e){var n=Math.abs(t.clientX-e.x),r=Math.abs(t.clientY-e.y);return n>yk||r>yk},_k=function(t){var e=Zn(R.none()),n=Zn(!1),r=vk(function(e){t.triggerEvent(Xo(),e),n.set(!0)},bk),o=function(t){return xk(t).each(function(o){r.cancel();var i={x:o.clientX,y:o.clientY,target:t.target};r.schedule(t),n.set(!1),e.set(R.some(i))}),R.none()},i=function(t){return r.cancel(),xk(t).each(function(t){e.get().each(function(n){wk(t,n)&&e.set(R.none())})}),R.none()},a=function(o){r.cancel();var i=function(t){return oo(t.target,o.target)};return e.get().filter(i).map(function(e){return n.get()?(o.prevent(),!1):t.triggerEvent(jo(),o)})},u=ce([{key:bo(),value:o},{key:xo(),value:i},{key:wo(),value:a}]),s=function(t,e){return Vt(u,e).bind(function(e){return e(t)})};return{fireIfReady:s}},Sk=function(t){var e=t.raw;return e.which===Hm[0]&&!F(["input","textarea"],Ni(t.target))&&!mk(t.target,'[contenteditable="true"]')},Ck=function(){return Yr().browser.isFirefox()},Mk=ze([Mn("triggerEvent"),Bn("stopBackspace",!0)]),Tk=function(t,e){return Ck()?pk(t,"focus",e):hk(t,"focusin",e)},kk=function(t,e){return Ck()?pk(t,"blur",e):hk(t,"focusout",e)},Dk=function(t,e){var n=on("Getting GUI events settings",Mk,e),r=["touchstart","touchmove","touchend","touchcancel","gesturestart","mousedown","mouseup","mouseover","mousemove","mouseout","click"],o=_k(n),i=j(r.concat(["selectstart","input","contextmenu","change","transitionend","drag","dragstart","dragend","dragenter","dragleave","dragover","drop","keyup"]),function(e){return hk(t,e,function(t){o.fireIfReady(t,e).each(function(e){e&&t.kill()});var r=n.triggerEvent(e,t);r&&t.kill()})}),a=Zn(R.none()),u=hk(t,"paste",function(t){o.fireIfReady(t,"paste").each(function(e){e&&t.kill()});var e=n.triggerEvent("paste",t);e&&t.kill(),a.set(R.some(setTimeout(function(){n.triggerEvent(Fo(),t)},0)))}),s=hk(t,"keydown",function(t){var e=n.triggerEvent("keydown",t);e?t.kill():!0===n.stopBackspace&&Sk(t)&&t.prevent()}),l=Tk(t,function(t){var e=n.triggerEvent("focusin",t);e&&t.kill()}),c=Zn(R.none()),f=kk(t,function(t){var e=n.triggerEvent("focusout",t);e&&t.kill(),c.set(R.some(setTimeout(function(){n.triggerEvent(Ho(),t)},0)))}),d=function(){X(i,function(t){t.unbind()}),s.unbind(),l.unbind(),f.unbind(),u.unbind(),a.get().each(clearTimeout),c.get().each(clearTimeout)};return{unbind:d}},Ak=function(t,e){var n=Vt(t,"target").getOr(e);return Zn(n)},Ik=function(t,e){var n=Zn(!1),r=Zn(!1),o=function(){n.set(!0)},i=function(){r.set(!0)};return{stop:o,cut:i,isStopped:n.get,isCut:r.get,event:t,setSource:e.set,getSource:e.get}},Ok=function(t){var e=Zn(!1),n=function(){e.set(!0)};return{stop:n,cut:g,isStopped:e.get,isCut:C,event:t,setSource:S("Cannot set source of a broadcasted event"),getSource:S("Cannot get source of a broadcasted event")}},Lk=Ut.generate([{stopped:[]},{resume:["element"]},{complete:[]}]),Ek=function(t,e,n,r,o,i){var a=t(e,r),u=Ik(n,o);return a.fold(function(){return i.logEventNoHandlers(e,r),Lk.complete()},function(t){var n=t.descHandler,r=mu(n);return r(u),u.isStopped()?(i.logEventStopped(e,t.element,n.purpose),Lk.stopped()):u.isCut()?(i.logEventCut(e,t.element,n.purpose),Lk.complete()):ji(t.element).fold(function(){return i.logNoParent(e,t.element,n.purpose),Lk.complete()},function(r){return i.logEventResponse(e,t.element,n.purpose),Lk.resume(r)})})},Nk=function(t,e,n,r,o,i){return Ek(t,e,n,r,o,i).fold(M,function(r){return Nk(t,e,n,r,o,i)},C)},Rk=function(t,e,n,r,o){var i=Ak(n,r);return Ek(t,e,n,r,i,o)},Pk=function(t,e,n){var r=Ok(e);return X(t,function(t){var e=t.descHandler,n=mu(e);n(r)}),r.isStopped()},zk=function(t,e,n,r){return Bk(t,e,n,n.target,r)},Bk=function(t,e,n,r,o){var i=Ak(n,r);return Nk(t,e,n,r,i,o)},Vk=function(t,e){return{element:t,descHandler:e}},Hk=function(t,e){return{id:t,descHandler:e}},Fk=function(){var t={},e=function(e,n,r){It(r,function(r,o){var i=void 0!==t[o]?t[o]:{};i[n]=gu(r,e),t[o]=i})},n=function(t,e){return Ga(e).fold(function(){return R.none()},function(n){return t.bind(function(t){return Vt(t,n)}).map(function(t){return Vk(e,t)})})},r=function(e){return Vt(t,e).map(function(t){return Pt(t,function(t,e){return Hk(e,t)})}).getOr([])},o=function(e,r,o){var i=Vt(t,r);return co(o,function(t){return n(i,t)},e)},i=function(e){It(t,function(t,n){t.hasOwnProperty(e)&&delete t[e]})};return{registerId:e,unregisterId:i,filterByType:r,find:o}},Wk=function(){var t=Fk(),e={},n=function(t){var e=t.element;return Ga(e).fold(function(){return Wa("uid-",t.element)},function(t){return t})},r=function(t,n){var r=e[n];if(r!==t)throw new Error('The tagId "'+n+'" is already used by: '+La(r.element)+"\nCannot use it for: "+La(t.element)+"\nThe conflicting element is"+(Gu(r.element)?" ":" not ")+"already in the DOM");i(t)},o=function(o){var i=n(o);Ft(e,i)&&r(o,i);var a=[o];t.registerId(a,i,o.events),e[i]=o},i=function(n){Ga(n.element).each(function(n){delete e[n],t.unregisterId(n)})},a=function(e){return t.filterByType(e)},u=function(e,n,r){return t.find(e,n,r)},s=function(t){return Vt(e,t)};return{find:u,filter:a,register:o,unregister:i,getById:s}},Uk=function(t){var e=t.dom,n=e.attributes,r=D(e,["attributes"]);return{uid:t.uid,dom:k({tag:"div",attributes:k({role:"presentation"},n)},r),components:t.components,behaviours:Kp(t.containerBehaviours),events:t.events,domModification:t.domModification,eventOrder:t.eventOrder}},Gk=um({name:"Container",factory:Uk,configFields:[Bn("components",[]),$p("containerBehaviours",[]),Bn("events",{}),Bn("domModification",{}),Bn("eventOrder",{})]}),jk=function(t){var e=function(e){return ji(t.element).fold(M,function(t){return oo(e,t)})},n=Wk(),r=function(t,r){return n.find(e,t,r)},o=Dk(t.element,{triggerEvent:function(t,e){return Dl(t,e.target,function(n){return zk(r,t,e,n)})}}),i={debugInfo:b("real"),triggerEvent:function(t,e,n){Dl(t,e,function(o){return Bk(r,t,n,e,o)})},triggerFocus:function(t,e){Ga(t).fold(function(){$c(t)},function(n){Dl(Vo(),t,function(n){return Rk(r,Vo(),{originator:e,kill:g,prevent:g,target:t},t,n),!1})})},triggerEscape:function(t,e){i.triggerEvent("keydown",t.element,e.event)},getByUid:function(t){return m(t)},getByDom:function(t){return v(t)},build:bs,addToGui:function(t){s(t)},removeFromGui:function(t){l(t)},addToWorld:function(t){a(t)},removeFromWorld:function(t){u(t)},broadcast:function(t){d(t)},broadcastOn:function(t,e){h(t,e)},broadcastEvent:function(t,e){p(t,e)},isConnected:M},a=function(t){t.connect(i),Bi(t.element)||(n.register(t),X(t.components(),a),i.triggerEvent(Zo(),t.element,{target:t.element}))},u=function(t){Bi(t.element)||(X(t.components(),u),n.unregister(t)),t.disconnect()},s=function(e){Vh(t,e)},l=function(t){Wh(t)},c=function(){o.unbind(),ma(t.element)},f=function(t){var e=n.filter(Wo());X(e,function(e){var n=e.descHandler,r=mu(n);r(t)})},d=function(t){f({universal:!0,data:t})},h=function(t,e){f({universal:!1,channels:t,data:e})},p=function(t,e){var r=n.filter(t);return Pk(r,e)},m=function(t){return n.getById(t).fold(function(){return mt.error(new Error('Could not find component with uid: "'+t+'" in system.'))},mt.value)},v=function(t){var e=Ga(t).getOr("not found");return m(e)};return a(t),{root:t,element:t.element,destroy:c,add:s,remove:l,getByUid:m,getByDom:v,addToWorld:a,removeFromWorld:u,broadcast:d,broadcastOn:h,broadcastEvent:p}},Xk=function(t,e){return{dom:{tag:"div",classes:["tox-bar","tox-form__controls-h-stack"]},components:j(t.items,e.interpreter)}},Yk=b([Bn("prefix","form-field"),$p("fieldBehaviours",[bm,Zp])]),qk=b([Ig({schema:[bn("dom")],name:"label"}),Ig({factory:{sketch:function(t){return{uid:t.uid,dom:{tag:"span",styles:{display:"none"},attributes:{"aria-hidden":"true"},innerHtml:t.text}}}},schema:[bn("text")],name:"aria-descriptor"}),Dg({factory:{sketch:function(t){var e=se(t,["factory"]);return t.factory.sketch(e)}},schema:[bn("factory")],name:"field"})]),Zk=function(t,e,n,r){var o=Jp(t.fieldBehaviours,[bm.config({find:function(e){return Ug(e,t,"field")}}),Zp.config({store:{mode:"manual",getValue:function(t){return bm.getCurrent(t).bind(Zp.getValue)},setValue:function(t,e){bm.getCurrent(t).each(function(t){Zp.setValue(t,e)})}}})]),i=mi([Ii(function(e,n){var r=jg(e,t,["label","field","aria-descriptor"]);r.field().each(function(e){var n=za(t.prefix);r.label().each(function(t){Sa(t.element,"for",n),Sa(e.element,"id",n)}),r["aria-descriptor"]().each(function(n){var r=za(t.prefix);Sa(n.element,"id",r),Sa(e.element,"aria-describedby",r)})})})]),a={getField:function(e){return Ug(e,t,"field")},getLabel:function(e){return Ug(e,t,"label")}};return{uid:t.uid,dom:t.dom,components:e,behaviours:o,events:i,apis:a}},$k=sm({name:"FormField",configFields:Yk(),partFields:qk(),factory:Zk,apis:{getField:function(t,e){return t.getField(e)},getLabel:function(t,e){return t.getLabel(e)}}}),Kk=function(t,e){return lu({attributes:ce([{key:e.tabAttr,value:"true"}])})},Jk=Object.freeze({__proto__:null,exhibit:Kk}),Qk=[Bn("tabAttr","data-alloy-tabstop")],tD=Wc({fields:Qk,name:"tabstopping",active:Jk}),eD=tinymce.util.Tools.resolve("tinymce.html.Entities"),nD=function(t,e,n,r){var o=oD(t,e,n,r);return $k.sketch(o)},rD=function(t,e){return nD(t,e,[],[])},oD=function(t,e,n,r){return{dom:aD(n),components:t.toArray().concat([e]),fieldBehaviours:Hc(r)}},iD=function(){return aD([])},aD=function(t){return{tag:"div",classes:["tox-form__group"].concat(t)}},uD=function(t,e){return $k.parts.label({dom:{tag:"label",classes:["tox-label"],innerHtml:e.translate(t)}})},sD=za("form-component-change"),lD=za("form-close"),cD=za("form-cancel"),fD=za("form-action"),dD=za("form-submit"),hD=za("form-block"),pD=za("form-unblock"),gD=za("form-tabchange"),mD=za("form-resize"),vD=function(t,e){var n,r=t.label.map(function(t){return uD(t,e)}),o=function(t){return function(e,n){gl(n.event.target,"[data-collection-item-value]").each(function(r){t(e,n,r,Ma(r,"data-collection-item-value"))})}},i=function(n,r){var o=j(r,function(n){var r=OS.translate(n.text),o=1===t.columns?'<div class="tox-collection__item-label">'+r+"</div>":"",i='<div class="tox-collection__item-icon">'+n.icon+"</div>",a={_:" "," - ":" ","-":" "},u=r.replace(/\_| \- |\-/g,function(t){return a[t]}),s=e.isDisabled()?" tox-collection__item--state-disabled":"";return'<div class="tox-collection__item'+s+'" tabindex="-1" data-collection-item-value="'+eD.encodeAllRaw(n.value)+'" title="'+u+'" aria-label="'+u+'">'+i+o+"</div>"}),i="auto"!==t.columns&&t.columns>1?G(o,t.columns):[o],a=j(i,function(t){return'<div class="tox-collection__group">'+t.join("")+"</div>"});xa(n.element,a.join(""))},a=o(function(n,r,o,i){r.stop(),e.isDisabled()||fi(n,fD,{name:t.name,value:i})}),u=[xi(ko(),o(function(t,e,n){$c(n)})),xi(No(),a),xi(jo(),a),xi(Do(),o(function(t,e,n){pl(t.element,"."+x_).each(function(t){Vu(t,x_)}),zu(n,x_)})),xi(Ao(),o(function(t){pl(t.element,"."+x_).each(function(t){Vu(t,x_)})})),Ei(o(function(e,n,r,o){fi(e,fD,{name:t.name,value:o})}))],s=function(t,e){return j(Kd(t.element,".tox-collection__item"),e)},l=$k.parts.field({dom:{tag:"div",classes:["tox-collection"].concat(1!==t.columns?["tox-collection--grid"]:["tox-collection--list"])},components:[],factory:{sketch:x},behaviours:Hc([$S.config({disabled:e.isDisabled,onDisabled:function(t){s(t,function(t){zu(t,"tox-collection__item--state-disabled"),Sa(t,"aria-disabled",!0)})},onEnabled:function(t){s(t,function(t){Vu(t,"tox-collection__item--state-disabled"),Da(t,"aria-disabled")})}}),GC(),wb.config({}),Zp.config({store:{mode:"memory",initialValue:[]},onSetValue:function(e,n){i(e,n),"auto"===t.columns&&hS(e,5,"tox-collection__item").each(function(t){var n=t.numRows,r=t.numColumns;fb.setGridSize(e,n,r)}),ci(e,mD)}}),tD.config({}),fb.config(RT(t.columns,"normal")),Sb("collection-events",u)]),eventOrder:(n={},n[Uo()]=["disabling","alloy.base.behaviour","collection-events"],n)}),c=["tox-form__group--collection"];return nD(r,l,c,[])},yD=b([In("data"),Bn("inputAttributes",{}),Bn("inputStyles",{}),Bn("tag","input"),Bn("inputClasses",[]),Bl("onSetValue"),Bn("styles",{}),Bn("eventOrder",{}),$p("inputBehaviours",[Zp,Lb]),Bn("selectOnFocus",!0)]),bD=function(t){return Hc([Lb.config({onFocus:t.selectOnFocus?function(t){var e=t.element,n=is(e);e.dom.setSelectionRange(0,n.length)}:g})])},xD=function(t){return k(k({},bD(t)),Jp(t.inputBehaviours,[Zp.config({store:k(k({mode:"manual"},t.data.map(function(t){return{initialValue:t}}).getOr({})),{getValue:function(t){return is(t.element)},setValue:function(t,e){var n=is(t.element);n!==e&&as(t.element,e)}}),onSetValue:t.onSetValue})]))},wD=function(t){return{tag:t.tag,attributes:k({type:"text"},t.inputAttributes),styles:t.inputStyles,classes:t.inputClasses}},_D=function(t,e){return{uid:t.uid,dom:wD(t),components:[],behaviours:xD(t),eventOrder:t.eventOrder}},SD=um({name:"Input",configFields:yD(),factory:_D}),CD={},MD={exports:CD};(function(e,n,r,o){(function(o){if("object"===typeof n&&"undefined"!==typeof r)r.exports=o();else if("function"===typeof e&&e.amd)e([],o);else{var i;i="undefined"!==typeof window?window:"undefined"!==typeof t?t:"undefined"!==typeof self?self:this,i.EphoxContactWrapper=o()}})(function(){return function(){function t(e,n,r){function i(u,s){if(!n[u]){if(!e[u]){var l="function"==typeof o&&o;if(!s&&l)return l(u,!0);if(a)return a(u,!0);var c=new Error("Cannot find module '"+u+"'");throw c.code="MODULE_NOT_FOUND",c}var f=n[u]={exports:{}};e[u][0].call(f.exports,function(t){var n=e[u][1][t];return i(n||t)},f,f.exports,t,e,n,r)}return n[u].exports}for(var a="function"==typeof o&&o,u=0;u<r.length;u++)i(r[u]);return i}return t}()({1:[function(t,e,n){var r,o,i=e.exports={};function a(){throw new Error("setTimeout has not been defined")}function u(){throw new Error("clearTimeout has not been defined")}function s(t){if(r===setTimeout)return setTimeout(t,0);if((r===a||!r)&&setTimeout)return r=setTimeout,setTimeout(t,0);try{return r(t,0)}catch(e){try{return r.call(null,t,0)}catch(e){return r.call(this,t,0)}}}function l(t){if(o===clearTimeout)return clearTimeout(t);if((o===u||!o)&&clearTimeout)return o=clearTimeout,clearTimeout(t);try{return o(t)}catch(e){try{return o.call(null,t)}catch(e){return o.call(this,t)}}}(function(){try{r="function"===typeof setTimeout?setTimeout:a}catch(t){r=a}try{o="function"===typeof clearTimeout?clearTimeout:u}catch(t){o=u}})();var c,f=[],d=!1,h=-1;function p(){d&&c&&(d=!1,c.length?f=c.concat(f):h=-1,f.length&&g())}function g(){if(!d){var t=s(p);d=!0;var e=f.length;while(e){c=f,f=[];while(++h<e)c&&c[h].run();h=-1,e=f.length}c=null,d=!1,l(t)}}function m(t,e){this.fun=t,this.array=e}function v(){}i.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];f.push(new m(t,e)),1!==f.length||d||s(g)},m.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=v,i.addListener=v,i.once=v,i.off=v,i.removeListener=v,i.removeAllListeners=v,i.emit=v,i.prependListener=v,i.prependOnceListener=v,i.listeners=function(t){return[]},i.binding=function(t){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(t){throw new Error("process.chdir is not supported")},i.umask=function(){return 0}},{}],2:[function(t,e,n){(function(t){(function(n){var r=setTimeout;function o(){}function i(t,e){return function(){t.apply(e,arguments)}}function a(t){if("object"!==typeof this)throw new TypeError("Promises must be constructed via new");if("function"!==typeof t)throw new TypeError("not a function");this._state=0,this._handled=!1,this._value=void 0,this._deferreds=[],d(t,this)}function u(t,e){while(3===t._state)t=t._value;0!==t._state?(t._handled=!0,a._immediateFn(function(){var n=1===t._state?e.onFulfilled:e.onRejected;if(null!==n){var r;try{r=n(t._value)}catch(o){return void l(e.promise,o)}s(e.promise,r)}else(1===t._state?s:l)(e.promise,t._value)})):t._deferreds.push(e)}function s(t,e){try{if(e===t)throw new TypeError("A promise cannot be resolved with itself.");if(e&&("object"===typeof e||"function"===typeof e)){var n=e.then;if(e instanceof a)return t._state=3,t._value=e,void c(t);if("function"===typeof n)return void d(i(n,e),t)}t._state=1,t._value=e,c(t)}catch(r){l(t,r)}}function l(t,e){t._state=2,t._value=e,c(t)}function c(t){2===t._state&&0===t._deferreds.length&&a._immediateFn(function(){t._handled||a._unhandledRejectionFn(t._value)});for(var e=0,n=t._deferreds.length;e<n;e++)u(t,t._deferreds[e]);t._deferreds=null}function f(t,e,n){this.onFulfilled="function"===typeof t?t:null,this.onRejected="function"===typeof e?e:null,this.promise=n}function d(t,e){var n=!1;try{t(function(t){n||(n=!0,s(e,t))},function(t){n||(n=!0,l(e,t))})}catch(r){if(n)return;n=!0,l(e,r)}}a.prototype["catch"]=function(t){return this.then(null,t)},a.prototype.then=function(t,e){var n=new this.constructor(o);return u(this,new f(t,e,n)),n},a.all=function(t){var e=Array.prototype.slice.call(t);return new a(function(t,n){if(0===e.length)return t([]);var r=e.length;function o(i,a){try{if(a&&("object"===typeof a||"function"===typeof a)){var u=a.then;if("function"===typeof u)return void u.call(a,function(t){o(i,t)},n)}e[i]=a,0===--r&&t(e)}catch(s){n(s)}}for(var i=0;i<e.length;i++)o(i,e[i])})},a.resolve=function(t){return t&&"object"===typeof t&&t.constructor===a?t:new a(function(e){e(t)})},a.reject=function(t){return new a(function(e,n){n(t)})},a.race=function(t){return new a(function(e,n){for(var r=0,o=t.length;r<o;r++)t[r].then(e,n)})},a._immediateFn="function"===typeof t?function(e){t(e)}:function(t){r(t,0)},a._unhandledRejectionFn=function(t){"undefined"!==typeof console&&console&&console.warn("Possible Unhandled Promise Rejection:",t)},a._setImmediateFn=function(t){a._immediateFn=t},a._setUnhandledRejectionFn=function(t){a._unhandledRejectionFn=t},"undefined"!==typeof e&&e.exports?e.exports=a:n.Promise||(n.Promise=a)})(this)}).call(this,t("timers").setImmediate)},{timers:3}],3:[function(t,e,n){(function(e,r){var o=t("process/browser.js").nextTick,i=Function.prototype.apply,a=Array.prototype.slice,u={},s=0;function l(t,e){this._id=t,this._clearFn=e}n.setTimeout=function(){return new l(i.call(setTimeout,window,arguments),clearTimeout)},n.setInterval=function(){return new l(i.call(setInterval,window,arguments),clearInterval)},n.clearTimeout=n.clearInterval=function(t){t.close()},l.prototype.unref=l.prototype.ref=function(){},l.prototype.close=function(){this._clearFn.call(window,this._id)},n.enroll=function(t,e){clearTimeout(t._idleTimeoutId),t._idleTimeout=e},n.unenroll=function(t){clearTimeout(t._idleTimeoutId),t._idleTimeout=-1},n._unrefActive=n.active=function(t){clearTimeout(t._idleTimeoutId);var e=t._idleTimeout;e>=0&&(t._idleTimeoutId=setTimeout(function(){t._onTimeout&&t._onTimeout()},e))},n.setImmediate="function"===typeof e?e:function(t){var e=s++,r=!(arguments.length<2)&&a.call(arguments,1);return u[e]=!0,o(function(){u[e]&&(r?t.apply(null,r):t.call(null),n.clearImmediate(e))}),e},n.clearImmediate="function"===typeof r?r:function(t){delete u[t]}}).call(this,t("timers").setImmediate,t("timers").clearImmediate)},{"process/browser.js":1,timers:3}],4:[function(t,e,n){var r=t("promise-polyfill"),o=function(){return"undefined"!==typeof window?window:Function("return this;")()}();e.exports={boltExport:o.Promise||r}},{"promise-polyfill":2}]},{},[4])(4)})})(void 0,CD,MD,void 0);var TD,kD=MD.exports.boltExport,DD=function(t){var e=R.none(),n=[],r=function(t){return DD(function(e){o(function(n){e(t(n))})})},o=function(t){a()?s(t):n.push(t)},i=function(t){a()||(e=R.some(t),u(n),n=[])},a=function(){return e.isSome()},u=function(t){X(t,s)},s=function(t){e.each(function(e){setTimeout(function(){t(e)},0)})};return t(i),{get:o,map:r,isReady:a}},AD=function(t){return DD(function(e){e(t)})},ID={nu:DD,pure:AD},OD=function(t){setTimeout(function(){throw t},0)},LD=function(t){var e=function(e){t().then(e,OD)},n=function(e){return LD(function(){return t().then(e)})},r=function(e){return LD(function(){return t().then(function(t){return e(t).toPromise()})})},o=function(e){return LD(function(){return t().then(function(){return e.toPromise()})})},i=function(){return ID.nu(e)},a=function(){var e=null;return LD(function(){return null===e&&(e=t()),e})},u=t;return{map:n,bind:r,anonBind:o,toLazy:i,toCached:a,toPromise:u,get:e}},ED=function(t){return LD(function(){return new kD(t)})},ND=function(t){return LD(function(){return kD.resolve(t)})},RD={nu:ED,pure:ND},PD=["input","textarea"],zD=function(t){var e=Ni(t);return F(PD,e)},BD=function(t,e){var n=e.getRoot(t).getOr(t.element);Vu(n,e.invalidClass),e.notify.each(function(e){zD(t.element)&&Sa(t.element,"aria-invalid",!1),e.getContainer(t).each(function(t){xa(t,e.validHtml)}),e.onValid(t)})},VD=function(t,e,n,r){var o=e.getRoot(t).getOr(t.element);zu(o,e.invalidClass),e.notify.each(function(e){zD(t.element)&&Sa(t.element,"aria-invalid",!0),e.getContainer(t).each(function(t){xa(t,r)}),e.onInvalid(t,r)})},HD=function(t,e,n){return e.validator.fold(function(){return RD.pure(mt.value(!0))},function(e){return e.validate(t)})},FD=function(t,e,n){return e.notify.each(function(e){e.onValidate(t)}),HD(t,e).map(function(r){return t.getSystem().isConnected()?r.fold(function(r){return VD(t,e,n,r),mt.error(r)},function(n){return BD(t,e),mt.value(n)}):mt.error("No longer in system")})},WD=function(t,e){var n=e.getRoot(t).getOr(t.element);return Hu(n,e.invalidClass)},UD=Object.freeze({__proto__:null,markValid:BD,markInvalid:VD,query:HD,run:FD,isInvalid:WD}),GD=function(t,e){return t.validator.map(function(n){return mi([xi(n.onEvent,function(n){FD(n,t,e).get(x)})].concat(n.validateOnLoad?[Ii(function(n){FD(n,t,e).get(g)})]:[]))}).getOr({})},jD=Object.freeze({__proto__:null,events:GD}),XD=[bn("invalidClass"),Bn("getRoot",R.none),Pn("notify",[Bn("aria","alert"),Bn("getContainer",R.none),Bn("validHtml",""),Bl("onValid"),Bl("onInvalid"),Bl("onValidate")]),Pn("validator",[bn("validate"),Bn("onEvent","input"),Bn("validateOnLoad",!0)])],YD=Wc({fields:XD,name:"invalidating",active:jD,apis:UD,extra:{validation:function(t){return function(e){var n=Zp.getValue(e);return RD.pure(t(n))}}}}),qD=function(t,e,n,r){return n.getOrCreate(t,e,r)},ZD=Object.freeze({__proto__:null,getCoupled:qD}),$D=[xn("others",tn(mt.value,cn()))],KD=function(){var t={},e=function(e,n,r){var o=Dt(n.others);if(o)return Vt(t,r).getOrThunk(function(){var o=Vt(n.others,r).getOrDie("No information found for coupled component: "+r),i=o(e),a=e.getSystem().build(i);return t[r]=a,a});throw new Error("Cannot find coupled component: "+r+". Known coupled components: "+JSON.stringify(o,null,2))},n=b({});return ou({readState:n,getOrCreate:e})},JD=Object.freeze({__proto__:null,init:KD}),QD=Wc({fields:$D,name:"coupling",apis:ZD,state:JD}),tA=b("sink"),eA=b(Ig({name:tA(),overrides:b({dom:{tag:"div"},behaviours:Hc([Eh.config({useFixed:M})]),events:mi([ki(Io()),ki(So()),ki(No())])})}));(function(t){t[t["HighlightFirst"]=0]="HighlightFirst",t[t["HighlightNone"]=1]="HighlightNone"})(TD||(TD={}));var nA,rA=function(t,e){var n=t.getHotspot(e).getOr(e),r="hotspot",o=t.getAnchorOverrides();return t.layouts.fold(function(){return{anchor:r,hotspot:n,overrides:o}},function(t){return{anchor:r,hotspot:n,overrides:o,layouts:t}})},oA=function(t,e,n){var r=t.fetch;return r(n).map(e)},iA=function(t,e,n,r,o,i,a){var u=oA(t,e,r),s=cA(r,t);return u.map(function(t){return t.bind(function(t){return R.from(Nx.sketch(k(k({},i.menu()),{uid:ja(""),data:t,highlightImmediately:a===TD.HighlightFirst,onOpenMenu:function(t,e){var r=s().getOrDie();Eh.position(r,n,e),hp.decloak(o)},onOpenSubmenu:function(t,e,n){var r=s().getOrDie();Eh.position(r,{anchor:"submenu",item:e},n),hp.decloak(o)},onRepositionMenu:function(t,e,r){var o=s().getOrDie();Eh.position(o,n,e),X(r,function(t){Eh.position(o,{anchor:"submenu",item:t.triggeringItem},t.triggeredMenu)})},onEscape:function(){return Lb.focus(r),hp.close(o),R.some(!0)}})))})})},aA=function(t,e,n,r,o,i,a){var u=rA(t,n),s=iA(t,e,u,n,r,o,a);return s.map(function(t){return t.fold(function(){hp.isOpen(r)&&hp.close(r)},function(t){hp.cloak(r),hp.open(r,t),i(r)}),r})},uA=function(t,e,n,r,o,i,a){return hp.close(r),RD.pure(r)},sA=function(t,e,n,r,o,i){var a=QD.getCoupled(n,"sandbox"),u=hp.isOpen(a),s=u?uA:aA;return s(t,e,n,a,r,o,i)},lA=function(t,e,n){var r=bm.getCurrent(e).getOr(e),o=Ns(t.element);n?Zu(r.element,"min-width",o+"px"):Es(r.element,o)},cA=function(t,e){return t.getSystem().getByUid(e.uid+"-"+tA()).map(function(t){return function(){return mt.value(t)}}).getOrThunk(function(){return e.lazySink.fold(function(){return function(){return mt.error(new Error("No internal sink is specified, nor could an external sink be found"))}},function(e){return function(){return e(t)}})})},fA=function(t){hp.getState(t).each(function(t){Nx.repositionMenus(t)})},dA=function(t,e,n){var r=vl(),o=function(o,i){var a=rA(t,e);r.link(e.element),t.matchWidth&&lA(a.hotspot,i,t.useMinWidth),t.onOpen(a,o,i),void 0!==n&&void 0!==n.onOpen&&n.onOpen(o,i)},i=function(t,o){r.unlink(e.element),void 0!==n&&void 0!==n.onClose&&n.onClose(t,o)},a=cA(e,t);return{dom:{tag:"div",classes:t.sandboxClasses,attributes:{id:r.id,role:"listbox"}},behaviours:Qp.augment(t.sandboxBehaviours,[Zp.config({store:{mode:"memory",initialValue:e}}),hp.config({onOpen:o,onClose:i,isPartOf:function(t,n,r){return bl(n,r)||bl(e,r)},getAttachPoint:function(){return a().getOrDie()}}),bm.config({find:function(t){return hp.getState(t).bind(function(t){return bm.getCurrent(t)})}}),Xc.config({channels:k(k({},yp({isExtraPart:C})),xp({doReposition:fA}))})])}},hA=function(t){var e=QD.getCoupled(t,"sandbox");fA(e)},pA=function(){return[Bn("sandboxClasses",[]),Qp.field("sandboxBehaviours",[bm,Xc,hp,Zp])]},gA=b([bn("dom"),bn("fetch"),Bl("onOpen"),Vl("onExecute"),Bn("getHotspot",R.some),Bn("getAnchorOverrides",b({})),Uf(),$p("dropdownBehaviours",[Kb,QD,fb,Lb]),bn("toggleClass"),Bn("eventOrder",{}),In("lazySink"),Bn("matchWidth",!1),Bn("useMinWidth",!1),In("role")].concat(pA())),mA=b([Ag({schema:[Rl()],name:"menu",defaults:function(t){return{onExecute:t.onExecute}}}),eA()]),vA=function(t,e,n,r){var o,i=function(e){return Vt(t.dom,"attributes").bind(function(t){return Vt(t,e)})},a=function(t){hp.getState(t).each(function(t){Nx.highlightPrimary(t)})},u=function(e){var n=a;sA(t,function(t){return t},e,r,n,TD.HighlightFirst).get(g)},s={expand:function(e){Kb.isOn(e)||sA(t,function(t){return t},e,r,g,TD.HighlightNone).get(g)},open:function(e){Kb.isOn(e)||sA(t,function(t){return t},e,r,g,TD.HighlightFirst).get(g)},isOpen:Kb.isOn,close:function(e){Kb.isOn(e)&&sA(t,function(t){return t},e,r,g,TD.HighlightFirst).get(g)},repositionMenus:function(t){Kb.isOn(t)&&hA(t)}},l=function(t,e){return di(t),R.some(!0)};return{uid:t.uid,dom:t.dom,components:e,behaviours:Jp(t.dropdownBehaviours,[Kb.config({toggleClass:t.toggleClass,aria:{mode:"expanded"}}),QD.config({others:{sandbox:function(e){return dA(t,e,{onOpen:function(){return Kb.on(e)},onClose:function(){return Kb.off(e)}})}}}),fb.config({mode:"special",onSpace:l,onEnter:l,onDown:function(t,e){if(yA.isOpen(t)){var n=QD.getCoupled(t,"sandbox");a(n)}else yA.open(t);return R.some(!0)},onEscape:function(t,e){return yA.isOpen(t)?(yA.close(t),R.some(!0)):R.none()}}),Lb.config({})]),events:Qb(R.some(u)),eventOrder:k(k({},t.eventOrder),(o={},o[Uo()]=["disabling","toggling","alloy.base.behaviour"],o)),apis:s,domModification:{attributes:k(k({"aria-haspopup":"true"},t.role.fold(function(){return{}},function(t){return{role:t}})),"button"===t.dom.tag?{type:i("type").getOr("button")}:{})}}},yA=sm({name:"Dropdown",configFields:gA(),partFields:mA(),factory:vA,apis:{open:function(t,e){return t.open(e)},expand:function(t,e){return t.expand(e)},close:function(t,e){return t.close(e)},isOpen:function(t,e){return t.isOpen(e)},repositionMenus:function(t,e){return t.repositionMenus(e)}}}),bA=function(){return lu({styles:{"-webkit-user-select":"none","user-select":"none","-ms-user-select":"none","-moz-user-select":"-moz-none"},attributes:{unselectable:"on"}})},xA=function(){return mi([vi(Po(),M)])},wA=Object.freeze({__proto__:null,events:xA,exhibit:bA}),_A=Wc({fields:[],name:"unselecting",active:wA}),SA=function(t,e){return yA.sketch({dom:t.dom,components:t.components,toggleClass:"mce-active",dropdownBehaviours:Hc([ZC.button(e.providers.isDisabled),GC(),_A.config({}),tD.config({})]),layouts:t.layouts,sandboxClasses:["tox-dialog__popups"],lazySink:e.getSink,fetch:function(n){return RD.nu(function(e){return t.fetch(e)}).map(function(r){return R.from(sk(qt(LT(za("menu-value"),r,function(e){t.onItemAction(n,e)},t.columns,t.presets,s_.CLOSE_ON_EXECUTE,C,e.providers),{movement:NT(t.columns,t.presets)})))})},parts:{menu:P_(!1,1,t.presets)}})},CA=za("color-input-change"),MA=za("color-swatch-change"),TA=za("color-picker-cancel"),kA=function(t,e,n){var r=$k.parts.field({factory:SD,inputClasses:["tox-textfield"],onSetValue:function(t){return YD.run(t).get(g)},inputBehaviours:Hc([$S.config({disabled:e.providers.isDisabled}),GC(),tD.config({}),YD.config({invalidClass:"tox-textbox-field-invalid",getRoot:function(t){return ji(t.element)},notify:{onValid:function(t){var e=Zp.getValue(t);fi(t,CA,{color:e})}},validator:{validateOnLoad:!1,validate:function(t){var e=Zp.getValue(t);if(0===e.length)return RD.pure(mt.value(!0));var n=er.fromTag("span");Zu(n,"background-color",e);var r=ts(n,"background-color").fold(function(){return mt.error("blah")},function(t){return mt.value(e)});return RD.pure(r)}}})]),selectOnFocus:!1}),o=t.label.map(function(t){return uD(t,e.providers)}),i=function(t,e){fi(t,MA,{value:e})},a=function(t,e){u.getOpt(t).each(function(t){"custom"===e?n.colorPicker(function(e){e.fold(function(){return ci(t,TA)},function(e){i(t,e),mT(e)})},"#ffffff"):i(t,"remove"===e?"":e)})},u=Jx(SA({dom:{tag:"span",attributes:{"aria-label":e.providers.translate("Color swatch")}},layouts:{onRtl:function(){return[mc,gc,xc]},onLtr:function(){return[gc,mc,xc]}},components:[],fetch:TT(n.getColors(),n.hasCustomColors()),columns:n.getColorCols(),presets:"color",onItemAction:a},e));return $k.sketch({dom:{tag:"div",classes:["tox-form__group"]},components:o.toArray().concat([{dom:{tag:"div",classes:["tox-color-input"]},components:[r,u.asSpec()]}]),fieldBehaviours:Hc([Sb("form-field-events",[xi(CA,function(e,n){u.getOpt(e).each(function(t){Zu(t.element,"background-color",n.event.color)}),fi(e,sD,{name:t.name})}),xi(MA,function(t,e){$k.getField(t).each(function(n){Zp.setValue(n,e.event.value),bm.getCurrent(t).each(Lb.focus)})}),xi(TA,function(t,e){$k.getField(t).each(function(e){bm.getCurrent(t).each(Lb.focus)})})])])})},DA=Ig({schema:[bn("dom")],name:"label"}),AA=function(t){return Ig({name:t+"-edge",overrides:function(e){var n=e.model.manager.edgeActions[t];return n.fold(function(){return{}},function(t){return{events:mi([wi(bo(),function(e,n,r){return t(e,r)},[e]),wi(So(),function(e,n,r){return t(e,r)},[e]),wi(Co(),function(e,n,r){r.mouseIsDown.get()&&t(e,r)},[e])])}})}})},IA=AA("top-left"),OA=AA("top"),LA=AA("top-right"),EA=AA("right"),NA=AA("bottom-right"),RA=AA("bottom"),PA=AA("bottom-left"),zA=AA("left"),BA=Dg({name:"thumb",defaults:b({dom:{styles:{position:"absolute"}}}),overrides:function(t){return{events:mi([Mi(bo(),t,"spectrum"),Mi(xo(),t,"spectrum"),Mi(wo(),t,"spectrum"),Mi(So(),t,"spectrum"),Mi(Co(),t,"spectrum"),Mi(To(),t,"spectrum")])}}}),VA=Dg({schema:[qn("mouseIsDown",function(){return Zn(!1)})],name:"spectrum",overrides:function(t){var e=t.model,n=e.manager,r=function(e,r){return n.getValueFromEvent(r).map(function(r){return n.setValueFrom(e,t,r)})};return{behaviours:Hc([fb.config({mode:"special",onLeft:function(e){return n.onLeft(e,t)},onRight:function(e){return n.onRight(e,t)},onUp:function(e){return n.onUp(e,t)},onDown:function(e){return n.onDown(e,t)}}),Lb.config({})]),events:mi([xi(bo(),r),xi(xo(),r),xi(So(),r),xi(Co(),function(e,n){t.mouseIsDown.get()&&r(e,n)})])}}}),HA=[DA,zA,EA,OA,RA,IA,LA,PA,NA,BA,VA],FA="slider.change.value",WA=b(FA),UA=function(t){return-1!==t.type.indexOf("touch")},GA=function(t){var e=t.event.raw;if(UA(e)){var n=e;return void 0!==n.touches&&1===n.touches.length?R.some(n.touches[0]).map(function(t){return ks(t.clientX,t.clientY)}):R.none()}var r=e;return void 0!==r.clientX?R.some(r).map(function(t){return ks(t.clientX,t.clientY)}):R.none()},jA="top",XA="right",YA="bottom",qA="left",ZA=function(t){return t.model.minX},$A=function(t){return t.model.minY},KA=function(t){return t.model.minX-1},JA=function(t){return t.model.minY-1},QA=function(t){return t.model.maxX},tI=function(t){return t.model.maxY},eI=function(t){return t.model.maxX+1},nI=function(t){return t.model.maxY+1},rI=function(t,e,n){return e(t)-n(t)},oI=function(t){return rI(t,QA,ZA)},iI=function(t){return rI(t,tI,$A)},aI=function(t){return oI(t)/2},uI=function(t){return iI(t)/2},sI=function(t){return t.stepSize},lI=function(t){return t.snapToGrid},cI=function(t){return t.snapStart},fI=function(t){return t.rounded},dI=function(t,e){return void 0!==t[e+"-edge"]},hI=function(t){return dI(t,qA)},pI=function(t){return dI(t,XA)},gI=function(t){return dI(t,jA)},mI=function(t){return dI(t,YA)},vI=function(t){return t.model.value.get()},yI=function(t){return{x:t}},bI=function(t){return{y:t}},xI=function(t,e){return{x:t,y:e}},wI=function(t,e){fi(t,WA(),{value:e})},_I=function(t,e){wI(t,xI(KA(e),JA(e)))},SI=function(t,e){wI(t,bI(JA(e)))},CI=function(t,e){wI(t,xI(aI(e),JA(e)))},MI=function(t,e){wI(t,xI(eI(e),JA(e)))},TI=function(t,e){wI(t,yI(eI(e)))},kI=function(t,e){wI(t,xI(eI(e),uI(e)))},DI=function(t,e){wI(t,xI(eI(e),nI(e)))},AI=function(t,e){wI(t,bI(nI(e)))},II=function(t,e){wI(t,xI(aI(e),nI(e)))},OI=function(t,e){wI(t,xI(KA(e),nI(e)))},LI=function(t,e){wI(t,yI(KA(e)))},EI=function(t,e){wI(t,xI(KA(e),uI(e)))},NI=function(t,e,n,r){return t<e?t:t>n?n:t===e?e-1:Math.max(e,t-r)},RI=function(t,e,n,r){return t>n?t:t<e?e:t===n?n+1:Math.min(n,t+r)},PI=function(t,e,n){return Math.max(e,Math.min(n,t))},zI=function(t,e,n,r,o){return o.fold(function(){var o=t-e,i=Math.round(o/r)*r;return PI(e+i,e-1,n+1)},function(e){var o=(t-e)%r,i=Math.round(o/r),a=Math.floor((t-e)/r),u=Math.floor((n-e)/r),s=Math.min(u,a+i),l=e+s*r;return Math.max(e,l)})},BI=function(t,e,n){return Math.min(n,Math.max(t,e))-e},VI=function(t){var e=t.min,n=t.max,r=t.range,o=t.value,i=t.step,a=t.snap,u=t.snapStart,s=t.rounded,l=t.hasMinEdge,c=t.hasMaxEdge,f=t.minBound,d=t.maxBound,h=t.screenRange,p=l?e-1:e,g=c?n+1:n;if(o<f)return p;if(o>d)return g;var m=BI(o,f,d),v=PI(m/h*r+e,p,g);return a&&v>=e&&v<=n?zI(v,e,n,i,u):s?Math.round(v):v},HI=function(t){var e=t.min,n=t.max,r=t.range,o=t.value,i=t.hasMinEdge,a=t.hasMaxEdge,u=t.maxBound,s=t.maxOffset,l=t.centerMinEdge,c=t.centerMaxEdge;return o<e?i?0:l:o>n?a?u:c:(o-e)/r*s},FI="top",WI="right",UI="bottom",GI="left",jI="width",XI="height",YI=function(t){return t.element.dom.getBoundingClientRect()},qI=function(t,e){return t[e]},ZI=function(t){var e=YI(t);return qI(e,GI)},$I=function(t){var e=YI(t);return qI(e,WI)},KI=function(t){var e=YI(t);return qI(e,FI)},JI=function(t){var e=YI(t);return qI(e,UI)},QI=function(t){var e=YI(t);return qI(e,jI)},tO=function(t){var e=YI(t);return qI(e,XI)},eO=function(t,e,n){return(t+e)/2-n},nO=function(t,e){var n=YI(t),r=YI(e),o=qI(n,GI),i=qI(n,WI),a=qI(r,GI);return eO(o,i,a)},rO=function(t,e){var n=YI(t),r=YI(e),o=qI(n,FI),i=qI(n,UI),a=qI(r,FI);return eO(o,i,a)},oO=function(t,e){fi(t,WA(),{value:e})},iO=function(t){return{x:t}},aO=function(t,e,n){var r={min:ZA(e),max:QA(e),range:oI(e),value:n,step:sI(e),snap:lI(e),snapStart:cI(e),rounded:fI(e),hasMinEdge:hI(e),hasMaxEdge:pI(e),minBound:ZI(t),maxBound:$I(t),screenRange:QI(t)};return VI(r)},uO=function(t,e,n){var r=aO(t,e,n),o=iO(r);return oO(t,o),r},sO=function(t,e){var n=ZA(e);oO(t,iO(n))},lO=function(t,e){var n=QA(e);oO(t,iO(n))},cO=function(t,e,n){var r=t>0?RI:NI,o=r(vI(n).x,ZA(n),QA(n),sI(n));return oO(e,iO(o)),R.some(o)},fO=function(t){return function(e,n){return cO(t,e,n).map(M)}},dO=function(t){var e=GA(t);return e.map(function(t){return t.left})},hO=function(t,e,n,r,o){var i=0,a=QI(t),u=r.bind(function(e){return R.some(nO(e,t))}).getOr(i),s=o.bind(function(e){return R.some(nO(e,t))}).getOr(a),l={min:ZA(e),max:QA(e),range:oI(e),value:n,hasMinEdge:hI(e),hasMaxEdge:pI(e),minBound:ZI(t),minOffset:i,maxBound:$I(t),maxOffset:a,centerMinEdge:u,centerMaxEdge:s};return HI(l)},pO=function(t,e,n,r,o,i){var a=hO(e,i,n,r,o);return ZI(e)-ZI(t)+a},gO=function(t,e,n,r){var o=vI(n),i=pO(t,r.getSpectrum(t),o.x,r.getLeftEdge(t),r.getRightEdge(t),n),a=Ns(e.element)/2;Zu(e.element,"left",i-a+"px")},mO=fO(-1),vO=fO(1),yO=R.none,bO=R.none,xO={"top-left":R.none(),top:R.none(),"top-right":R.none(),right:R.some(TI),"bottom-right":R.none(),bottom:R.none(),"bottom-left":R.none(),left:R.some(LI)},wO=Object.freeze({__proto__:null,setValueFrom:uO,setToMin:sO,setToMax:lO,findValueOfOffset:aO,getValueFromEvent:dO,findPositionOfValue:pO,setPositionFromValue:gO,onLeft:mO,onRight:vO,onUp:yO,onDown:bO,edgeActions:xO}),_O=function(t,e){fi(t,WA(),{value:e})},SO=function(t){return{y:t}},CO=function(t,e,n){var r={min:$A(e),max:tI(e),range:iI(e),value:n,step:sI(e),snap:lI(e),snapStart:cI(e),rounded:fI(e),hasMinEdge:gI(e),hasMaxEdge:mI(e),minBound:KI(t),maxBound:JI(t),screenRange:tO(t)};return VI(r)},MO=function(t,e,n){var r=CO(t,e,n),o=SO(r);return _O(t,o),r},TO=function(t,e){var n=$A(e);_O(t,SO(n))},kO=function(t,e){var n=tI(e);_O(t,SO(n))},DO=function(t,e,n){var r=t>0?RI:NI,o=r(vI(n).y,$A(n),tI(n),sI(n));return _O(e,SO(o)),R.some(o)},AO=function(t){return function(e,n){return DO(t,e,n).map(M)}},IO=function(t){var e=GA(t);return e.map(function(t){return t.top})},OO=function(t,e,n,r,o){var i=0,a=tO(t),u=r.bind(function(e){return R.some(rO(e,t))}).getOr(i),s=o.bind(function(e){return R.some(rO(e,t))}).getOr(a),l={min:$A(e),max:tI(e),range:iI(e),value:n,hasMinEdge:gI(e),hasMaxEdge:mI(e),minBound:KI(t),minOffset:i,maxBound:JI(t),maxOffset:a,centerMinEdge:u,centerMaxEdge:s};return HI(l)},LO=function(t,e,n,r,o,i){var a=OO(e,i,n,r,o);return KI(e)-KI(t)+a},EO=function(t,e,n,r){var o=vI(n),i=LO(t,r.getSpectrum(t),o.y,r.getTopEdge(t),r.getBottomEdge(t),n),a=Ss(e.element)/2;Zu(e.element,"top",i-a+"px")},NO=R.none,RO=R.none,PO=AO(-1),zO=AO(1),BO={"top-left":R.none(),top:R.some(SI),"top-right":R.none(),right:R.none(),"bottom-right":R.none(),bottom:R.some(AI),"bottom-left":R.none(),left:R.none()},VO=Object.freeze({__proto__:null,setValueFrom:MO,setToMin:TO,setToMax:kO,findValueOfOffset:CO,getValueFromEvent:IO,findPositionOfValue:LO,setPositionFromValue:EO,onLeft:NO,onRight:RO,onUp:PO,onDown:zO,edgeActions:BO}),HO=function(t,e){fi(t,WA(),{value:e})},FO=function(t,e){return{x:t,y:e}},WO=function(t,e,n){var r=aO(t,e,n.left),o=CO(t,e,n.top),i=FO(r,o);return HO(t,i),i},UO=function(t,e,n,r){var o=t>0?RI:NI,i=e?vI(r).x:o(vI(r).x,ZA(r),QA(r),sI(r)),a=e?o(vI(r).y,$A(r),tI(r),sI(r)):vI(r).y;return HO(n,FO(i,a)),R.some(i)},GO=function(t,e){return function(n,r){return UO(t,e,n,r).map(M)}},jO=function(t,e){var n=ZA(e),r=$A(e);HO(t,FO(n,r))},XO=function(t,e){var n=QA(e),r=tI(e);HO(t,FO(n,r))},YO=function(t){return GA(t)},qO=function(t,e,n,r){var o=vI(n),i=pO(t,r.getSpectrum(t),o.x,r.getLeftEdge(t),r.getRightEdge(t),n),a=LO(t,r.getSpectrum(t),o.y,r.getTopEdge(t),r.getBottomEdge(t),n),u=Ns(e.element)/2,s=Ss(e.element)/2;Zu(e.element,"left",i-u+"px"),Zu(e.element,"top",a-s+"px")},ZO=GO(-1,!1),$O=GO(1,!1),KO=GO(-1,!0),JO=GO(1,!0),QO={"top-left":R.some(_I),top:R.some(CI),"top-right":R.some(MI),right:R.some(kI),"bottom-right":R.some(DI),bottom:R.some(II),"bottom-left":R.some(OI),left:R.some(EI)},tL=Object.freeze({__proto__:null,setValueFrom:WO,setToMin:jO,setToMax:XO,getValueFromEvent:YO,setPositionFromValue:qO,onLeft:ZO,onRight:$O,onUp:KO,onDown:JO,edgeActions:QO}),eL=[Bn("stepSize",1),Bn("onChange",g),Bn("onChoose",g),Bn("onInit",g),Bn("onDragStart",g),Bn("onDragEnd",g),Bn("snapToGrid",!1),Bn("rounded",!0),In("snapStart"),xn("model",sn("mode",{x:[Bn("minX",0),Bn("maxX",100),qn("value",function(t){return Zn(t.mode.minX)}),bn("getInitialValue"),Wl("manager",wO)],y:[Bn("minY",0),Bn("maxY",100),qn("value",function(t){return Zn(t.mode.minY)}),bn("getInitialValue"),Wl("manager",VO)],xy:[Bn("minX",0),Bn("maxX",100),Bn("minY",0),Bn("maxY",100),qn("value",function(t){return Zn({x:t.mode.minX,y:t.mode.minY})}),bn("getInitialValue"),Wl("manager",tL)]})),$p("sliderBehaviours",[fb,Zp]),qn("mouseIsDown",function(){return Zn(!1)})],nL=function(t,e,n,r){var o,i=function(e){return Gg(e,t,"thumb")},a=function(e){return Gg(e,t,"spectrum")},u=function(e){return Ug(e,t,"left-edge")},s=function(e){return Ug(e,t,"right-edge")},l=function(e){return Ug(e,t,"top-edge")},c=function(e){return Ug(e,t,"bottom-edge")},f=t.model,d=f.manager,h=function(e,n){d.setPositionFromValue(e,n,t,{getLeftEdge:u,getRightEdge:s,getTopEdge:l,getBottomEdge:c,getSpectrum:a})},p=function(t,e){f.value.set(e);var n=i(t);h(t,n)},g=function(e,n){p(e,n);var r=i(e);return t.onChange(e,r,n),R.some(!0)},m=function(e){d.setToMin(e,t)},v=function(e){d.setToMax(e,t)},y=function(e){var n=function(){Ug(e,t,"thumb").each(function(n){var r=f.value.get();t.onChoose(e,n,r)})},r=t.mouseIsDown.get();t.mouseIsDown.set(!1),r&&n()},b=function(e,n){n.stop(),t.mouseIsDown.set(!0),t.onDragStart(e,i(e))},x=function(e,n){n.stop(),t.onDragEnd(e,i(e)),y(e)};return{uid:t.uid,dom:t.dom,components:e,behaviours:Jp(t.sliderBehaviours,[fb.config({mode:"special",focusIn:function(e){return Ug(e,t,"spectrum").map(fb.focusIn).map(M)}}),Zp.config({store:{mode:"manual",getValue:function(t){return f.value.get()}}}),Xc.config({channels:(o={},o[mp()]={onReceive:y},o)})]),events:mi([xi(WA(),function(t,e){g(t,e.event.value)}),Ii(function(e,n){var r=f.getInitialValue();f.value.set(r);var o=i(e);h(e,o);var u=a(e);t.onInit(e,o,u,f.value.get())}),xi(bo(),b),xi(wo(),x),xi(So(),b),xi(To(),x)]),apis:{resetToMin:m,resetToMax:v,setValue:p,refresh:h},domModification:{styles:{position:"relative"}}}},rL=sm({name:"Slider",configFields:eL,partFields:HA,factory:nL,apis:{setValue:function(t,e,n){t.setValue(e,n)},resetToMin:function(t,e){t.resetToMin(e)},resetToMax:function(t,e){t.resetToMax(e)},refresh:function(t,e){t.refresh(e)}}}),oL=function(t,e,n){return{hue:t,saturation:e,value:n}},iL=function(t){var e=0,n=0,r=0,o=t.red/255,i=t.green/255,a=t.blue/255,u=Math.min(o,Math.min(i,a)),s=Math.max(o,Math.max(i,a));if(u===s)return r=u,oL(0,0,100*r);var l=o===u?i-a:a===u?o-i:a-o;return e=o===u?3:a===u?1:5,e=60*(e-l/(s-u)),n=(s-u)/s,r=s,oL(Math.round(e),Math.round(100*n),Math.round(100*r))},aL=function(t){return iL(XM(t))},uL=function(t){return zM(jM(t))},sL=za("rgb-hex-update"),lL=za("slider-update"),cL=za("palette-update"),fL=function(t,e){var n=rL.parts.spectrum({dom:{tag:"div",classes:[e("hue-slider-spectrum")],attributes:{role:"presentation"}}}),r=rL.parts.thumb({dom:{tag:"div",classes:[e("hue-slider-thumb")],attributes:{role:"presentation"}}});return rL.sketch({dom:{tag:"div",classes:[e("hue-slider")],attributes:{role:"presentation"}},rounded:!1,model:{mode:"y",getInitialValue:b({y:0})},components:[n,r],sliderBehaviours:Hc([Lb.config({})]),onChange:function(t,e,n){fi(t,lL,{value:n})}})},dL="form",hL=[$p("formBehaviours",[Zp])],pL=function(t){return"<alloy.field."+t+">"},gL=function(t){var e=function(){var t=[],e=function(e,n){return t.push(e),Bg(dL,pL(e),n)};return{field:e,record:function(){return t}}}(),n=t(e),r=e.record(),o=j(r,function(t){return Dg({name:t,pname:pL(t)})});return em(dL,hL,o,vL,n)},mL=function(t,e){return t.fold(function(){return mt.error(e)},mt.value)},vL=function(t,e){return{uid:t.uid,dom:t.dom,components:e,behaviours:Jp(t.formBehaviours,[Zp.config({store:{mode:"manual",getValue:function(e){var n=Xg(e,t);return Ot(n,function(t,e){return t().bind(function(t){var n=bm.getCurrent(t);return mL(n,new Error("Cannot find a current component to extract the value from for form part '"+e+"': "+La(t.element)))}).map(Zp.getValue)})},setValue:function(e,n){It(n,function(n,r){Ug(e,t,r).each(function(t){bm.getCurrent(t).each(function(t){Zp.setValue(t,n)})})})}}})]),apis:{getField:function(e,n){return Ug(e,t,n).bind(bm.getCurrent)}}}},yL={getField:nu(function(t,e,n){return t.getField(e,n)}),sketch:gL},bL=za("valid-input"),xL=za("invalid-input"),wL=za("validating-input"),_L="colorcustom.rgb.",SL=function(t,e,n,r){var o=function(n,r){return YD.config({invalidClass:e("invalid"),notify:{onValidate:function(t){fi(t,wL,{type:n})},onValid:function(t){fi(t,bL,{type:n,value:Zp.getValue(t)})},onInvalid:function(t){fi(t,xL,{type:n,value:Zp.getValue(t)})}},validator:{validate:function(e){var n=Zp.getValue(e),o=r(n)?mt.value(!0):mt.error(t("aria.input.invalid"));return RD.pure(o)},validateOnLoad:!1}})},i=function(n,r,i,a,u){var s=t(_L+"range"),l=$k.parts.label({dom:{tag:"label",innerHtml:i,attributes:{"aria-label":a}}}),c=$k.parts.field({data:u,factory:SD,inputAttributes:k({type:"text"},"hex"===r?{"aria-live":"polite"}:{}),inputClasses:[e("textfield")],inputBehaviours:Hc([o(r,n),tD.config({})]),onSetValue:function(t){if(YD.isInvalid(t)){var e=YD.run(t);e.get(g)}}}),f=[l,c],d="hex"!==r?[$k.parts["aria-descriptor"]({text:s})]:[],h=f.concat(d);return{dom:{tag:"div",attributes:{role:"presentation"}},components:h}},a=function(t,e){var n=zM(e);return yL.getField(t,"hex").each(function(e){Lb.isFocused(e)||Zp.setValue(t,{hex:n.value})}),n},u=function(t,e){var n=e.red,r=e.green,o=e.blue;Zp.setValue(t,{red:n,green:r,blue:o})},s=Jx({dom:{tag:"div",classes:[e("rgba-preview")],styles:{"background-color":"white"},attributes:{role:"presentation"}}}),l=function(t,e){s.getOpt(t).each(function(t){Zu(t.element,"background-color","#"+e.value)})},c=function(){var o={red:Zn(R.some(255)),green:Zn(R.some(255)),blue:Zn(R.some(255)),hex:Zn(R.some("ffffff"))},c=function(t,e){var n=XM(e);u(t,n),p(n)},f=function(t){return o[t].get()},d=function(t,e){o[t].set(e)},h=function(){return f("red").bind(function(t){return f("green").bind(function(e){return f("blue").map(function(n){return UM(t,e,n,1)})})})},p=function(t){var e=t.red,n=t.green,r=t.blue;d("red",R.some(e)),d("green",R.some(n)),d("blue",R.some(r))},g=function(t,e){var n=e.event;"hex"!==n.type?d(n.type,R.none()):r(t)},m=function(t,e){n(t);var r=IM(e);d("hex",R.some(e));var o=XM(r);u(t,o),p(o),fi(t,sL,{hex:r}),l(t,r)},v=function(t,e,n){var r=parseInt(n,10);d(e,R.some(r)),h().each(function(e){var n=a(t,e);fi(t,sL,{hex:n}),l(t,n)})},y=function(t){return"hex"===t.type},b=function(t,e){var n=e.event;y(n)?m(t,n.value):v(t,n.type,n.value)},x=function(e){return{label:t(_L+e+".label"),description:t(_L+e+".description")}},w=x("red"),_=x("green"),S=x("blue"),C=x("hex");return qt(yL.sketch(function(n){return{dom:{tag:"form",classes:[e("rgb-form")],attributes:{"aria-label":t("aria.color.picker")}},components:[n.field("red",$k.sketch(i(GM,"red",w.label,w.description,255))),n.field("green",$k.sketch(i(GM,"green",_.label,_.description,255))),n.field("blue",$k.sketch(i(GM,"blue",S.label,S.description,255))),n.field("hex",$k.sketch(i(EM,"hex",C.label,C.description,"ffffff"))),s.asSpec()],formBehaviours:Hc([YD.config({invalidClass:e("form-invalid")}),Sb("rgb-form-events",[xi(bL,b),xi(xL,g),xi(wL,g)])])}}),{apis:{updateHex:function(t,e){Zp.setValue(t,{hex:e.value}),c(t,e),l(t,e)}}})},f=um({factory:c,name:"RgbForm",configFields:[],apis:{updateHex:function(t,e,n){t.updateHex(e,n)}},extraApis:{}});return f},CL=function(t,e){var n=rL.parts.spectrum({dom:{tag:"canvas",attributes:{role:"presentation"},classes:[e("sv-palette-spectrum")]}}),r=rL.parts.thumb({dom:{tag:"div",attributes:{role:"presentation"},classes:[e("sv-palette-thumb")],innerHtml:"<div class="+e("sv-palette-inner-thumb")+' role="presentation"></div>'}}),o=function(t,e){var n=t.width,r=t.height,o=t.getContext("2d");if(null!==o){o.fillStyle=e,o.fillRect(0,0,n,r);var i=o.createLinearGradient(0,0,n,0);i.addColorStop(0,"rgba(255,255,255,1)"),i.addColorStop(1,"rgba(255,255,255,0)"),o.fillStyle=i,o.fillRect(0,0,n,r);var a=o.createLinearGradient(0,0,0,r);a.addColorStop(0,"rgba(0,0,0,0)"),a.addColorStop(1,"rgba(0,0,0,1)"),o.fillStyle=a,o.fillRect(0,0,n,r)}},i=function(t,e){var n=t.components()[0].element.dom,r=oL(e,100,100),i=jM(r);o(n,ZM(i))},a=function(t,e){var n=iL(XM(e));rL.setValue(t,{x:n.saturation,y:100-n.value})},u=function(t){var i=b({x:0,y:0}),a=function(t,e,n){fi(t,cL,{value:n})},u=function(t,e,n,r){o(n.element.dom,ZM($M))},s=Hc([bm.config({find:R.some}),Lb.config({})]);return rL.sketch({dom:{tag:"div",attributes:{role:"presentation"},classes:[e("sv-palette")]},model:{mode:"xy",getInitialValue:i},rounded:!1,components:[n,r],onChange:a,onInit:u,sliderBehaviours:s})},s=um({factory:u,name:"SaturationBrightnessPalette",configFields:[],apis:{setHue:function(t,e,n){i(e,n)},setThumb:function(t,e,n){a(e,n)}},extraApis:{}});return s},ML=function(t,e){var n=function(n){var r=SL(t,e,n.onValidHex,n.onInvalidHex),o=CL(t,e),i=function(t){return(100-t)/100*360},a=function(t){return 100-t/360*100},u={paletteRgba:Zn($M),paletteHue:Zn(0)},s=Jx(fL(t,e)),l=Jx(o.sketch({})),c=Jx(r.sketch({})),f=function(t,e,n){l.getOpt(t).each(function(t){o.setHue(t,n)})},d=function(t,e){c.getOpt(t).each(function(t){r.updateHex(t,e)})},h=function(t,e,n){s.getOpt(t).each(function(t){rL.setValue(t,{y:a(n)})})},p=function(t,e){l.getOpt(t).each(function(t){o.setThumb(t,e)})},g=function(t,e){var n=XM(t);u.paletteRgba.set(n),u.paletteHue.set(e)},m=function(t,e,n,r){g(e,n),X(r,function(r){r(t,e,n)})},v=function(){var t=[d];return function(e,n){var r=n.event.value,o=u.paletteHue.get(),i=oL(o,r.x,100-r.y),a=uL(i);m(e,a,o,t)}},y=function(){var t=[f,d];return function(e,n){var r=i(n.event.value.y),o=u.paletteRgba.get(),a=iL(o),s=oL(r,a.saturation,a.value),l=uL(s);m(e,l,r,t)}},b=function(){var t=[f,h,p];return function(e,n){var r=n.event.hex,o=aL(r);m(e,r,o.hue,t)}};return{uid:n.uid,dom:n.dom,components:[l.asSpec(),s.asSpec(),c.asSpec()],behaviours:Hc([Sb("colour-picker-events",[xi(sL,b()),xi(cL,v()),xi(lL,y())]),bm.config({find:function(t){return c.getOpt(t)}}),fb.config({mode:"acyclic"})])}},r=um({name:"ColourPicker",configFields:[bn("dom"),Bn("onValidHex",g),Bn("onInvalidHex",g)],factory:n});return r},TL=function(){return bm.config({find:R.some})},kL=function(t){return bm.config({find:t.getOpt})},DL=function(t){return bm.config({find:function(e){return $i(e.element,t).bind(function(t){return e.getSystem().getByDom(t).toOptional()})}})},AL={self:TL,memento:kL,childAt:DL},IL={"colorcustom.rgb.red.label":"R","colorcustom.rgb.red.description":"Red component","colorcustom.rgb.green.label":"G","colorcustom.rgb.green.description":"Green component","colorcustom.rgb.blue.label":"B","colorcustom.rgb.blue.description":"Blue component","colorcustom.rgb.hex.label":"#","colorcustom.rgb.hex.description":"Hex color code","colorcustom.rgb.range":"Range 0 to 255","colorcustom.sb.saturation":"Saturation","colorcustom.sb.brightness":"Brightness","colorcustom.sb.picker":"Saturation and Brightness Picker","colorcustom.sb.palette":"Saturation and Brightness Palette","colorcustom.sb.instructions":"Use arrow keys to select saturation and brightness, on x and y axes","colorcustom.hue.hue":"Hue","colorcustom.hue.slider":"Hue Slider","colorcustom.hue.palette":"Hue Palette","colorcustom.hue.instructions":"Use arrow keys to select a hue","aria.color.picker":"Color Picker","aria.input.invalid":"Invalid input"},OL=function(t){return IL[t]},LL=function(t){return OL(t)},EL=function(t){var e=function(t){return"tox-"+t},n=ML(LL,e),r=function(t){fi(t,fD,{name:"hex-valid",value:!0})},o=function(t){fi(t,fD,{name:"hex-valid",value:!1})},i=Jx(n.sketch({dom:{tag:"div",classes:[e("color-picker-container")],attributes:{role:"presentation"}},onValidHex:r,onInvalidHex:o}));return{dom:{tag:"div"},components:[i.asSpec()],behaviours:Hc([Zp.config({store:{mode:"manual",getValue:function(t){var e=i.get(t),n=bm.getCurrent(e),r=n.bind(function(t){var e=Zp.getValue(t);return e.hex});return r.map(function(t){return"#"+t}).getOr("")},setValue:function(t,e){var n=/^#([a-fA-F0-9]{3}(?:[a-fA-F0-9]{3})?)/,r=n.exec(e),o=i.get(t),a=bm.getCurrent(o);a.fold(function(){console.log("Can not find form")},function(t){Zp.setValue(t,{hex:R.from(r[1]).getOr("")}),yL.getField(t,"hex").each(function(t){ci(t,Lo())})})}}}),AL.self()])}},NL=tinymce.util.Tools.resolve("tinymce.Resource"),RL=function(t){return Object.prototype.hasOwnProperty.call(t,"init")},PL=function(t){var e=Zn(R.none()),n=Jx({dom:{tag:t.tag}}),r=Zn(R.none());return{dom:{tag:"div",classes:["tox-custom-editor"]},behaviours:Hc([Sb("custom-editor-events",[Ii(function(o){n.getOpt(o).each(function(n){(RL(t)?t.init(n.element.dom):NL.load(t.scriptId,t.scriptUrl).then(function(e){return e(n.element.dom,t.settings)})).then(function(t){r.get().each(function(e){t.setValue(e)}),r.set(R.none()),e.set(R.some(t))})})})]),Zp.config({store:{mode:"manual",getValue:function(){return e.get().fold(function(){return r.get().getOr("")},function(t){return t.getValue()})},setValue:function(t,n){e.get().fold(function(){r.set(R.some(n))},function(t){return t.setValue(n)})}}}),AL.self()]),components:[n.asSpec()]}},zL=tinymce.util.Tools.resolve("tinymce.util.Tools"),BL=Be([Bn("preprocess",x),Bn("postprocess",x)]),VL=function(t,e){var n=on("RepresentingConfigs.memento processors",BL,e);return Zp.config({store:{mode:"manual",getValue:function(e){var r=t.get(e),o=Zp.getValue(r);return n.postprocess(o)},setValue:function(e,r){var o=n.preprocess(r),i=t.get(e);Zp.setValue(i,o)}}})},HL=function(t,e,n){return Zp.config(qt({store:{mode:"manual",getValue:e,setValue:n}},t.map(function(t){return{store:{initialValue:t}}}).getOr({})))},FL=function(t,e,n){return HL(t,function(t){return e(t.element)},function(t,e){return n(t.element,e)})},WL=function(t){return FL(t,is,as)},UL=function(t){return FL(t,ba,xa)},GL=function(t){return Zp.config({store:{mode:"memory",initialValue:t}})},jL={memento:VL,withElement:FL,withComp:HL,domValue:WL,domHtml:UL,memory:GL},XL="jpeg,jpg,jpe,jfi,jif,jfif,png,gif,bmp,webp",YL=function(t,e){var n=zL.explode(e.getSetting("images_file_types",XL,"string")),r=function(t){return W(n,function(e){return gr(t.name.toLowerCase(),"."+e.toLowerCase())})};return Z(ft(t),r)},qL=function(t,e){var n=function(t,e){e.stop()},r=function(t){return function(e,n){X(t,function(t){t(e,n)})}},o=function(t,e){if(!$S.isDisabled(t)){var n=e.event.raw;a(t,n.dataTransfer.files)}},i=function(t,e){var n=e.event.raw.target;a(t,n.files)},a=function(n,r){Zp.setValue(n,YL(r,e)),fi(n,sD,{name:t.name})},u=Jx({dom:{tag:"input",attributes:{type:"file",accept:"image/*"},styles:{display:"none"}},behaviours:Hc([Sb("input-file-events",[ki(No()),ki(jo())])])}),s=function(t){return{uid:t.uid,dom:{tag:"div",classes:["tox-dropzone-container"]},behaviours:Hc([jL.memory([]),AL.self(),$S.config({}),Kb.config({toggleClass:"dragenter",toggleOnExecute:!1}),Sb("dropzone-events",[xi("dragenter",r([n,Kb.toggle])),xi("dragleave",r([n,Kb.toggle])),xi("dragover",n),xi("drop",r([n,o])),xi(Eo(),i)])]),components:[{dom:{tag:"div",classes:["tox-dropzone"],styles:{}},components:[{dom:{tag:"p",innerHtml:e.translate("Drop an image here")}},Kx.sketch({dom:{tag:"button",innerHtml:e.translate("Browse for an image"),styles:{position:"relative"},classes:["tox-button","tox-button--secondary"]},components:[u.asSpec()],action:function(t){var e=u.get(t);e.element.dom.click()},buttonBehaviours:Hc([tD.config({}),ZC.button(e.isDisabled),GC()])})]}]}},l=t.label.map(function(t){return uD(t,e)}),c=$k.parts.field({factory:{sketch:s}});return nD(l,c,["tox-form__group--stretched"],[])},ZL=function(t,e){return{dom:{tag:"div",classes:["tox-form__grid","tox-form__grid--"+t.columns+"col"]},components:j(t.items,e.interpreter)}},$L=za("alloy-fake-before-tabstop"),KL=za("alloy-fake-after-tabstop"),JL=function(t){return{dom:{tag:"div",styles:{width:"1px",height:"1px",outline:"none"},attributes:{tabindex:"0"},classes:t},behaviours:Hc([Lb.config({ignore:!0}),tD.config({})])}},QL=function(t){return{dom:{tag:"div",classes:["tox-navobj"]},components:[JL([$L]),t,JL([KL])],behaviours:Hc([AL.childAt(1)])}},tE=function(t,e){fi(t,Io(),{raw:{which:9,shiftKey:e}})},eE=function(t,e){var n=e.element;Hu(n,$L)?tE(t,!0):Hu(n,KL)&&tE(t,!1)},nE=function(t){return mk(t,["."+$L,"."+KL].join(","),C)},rE=!(Yr().browser.isIE()||Yr().browser.isEdge()),oE=function(t){var e=Zn("");return{getValue:function(t){return e.get()},setValue:function(n,r){if(t)Sa(n.element,"srcdoc",r);else{Sa(n.element,"src","javascript:''");var o=n.element.dom.contentWindow.document;o.open(),o.write(r),o.close()}e.set(r)}}},iE=function(t,e){var n=rE&&t.sandboxed,r=k(k({},t.label.map(function(t){return{title:t}}).getOr({})),n?{sandbox:"allow-scripts allow-same-origin"}:{}),o=oE(n),i=t.label.map(function(t){return uD(t,e)}),a=function(t){return QL({uid:t.uid,dom:{tag:"iframe",attributes:r},behaviours:Hc([tD.config({}),Lb.config({}),jL.withComp(R.none(),o.getValue,o.setValue)])})},u=$k.parts.field({factory:{sketch:a}});return nD(i,u,["tox-form__group--stretched"],[])},aE=function(t,e){return lE(document.createElement("canvas"),t,e)},uE=function(t){var e=aE(t.width,t.height),n=sE(e);return n.drawImage(t,0,0),e},sE=function(t){return t.getContext("2d")},lE=function(t,e,n){return t.width=e,t.height=n,t},cE=function(t){return t.naturalWidth||t.width},fE=function(t){return t.naturalHeight||t.height},dE=function(){var t=function(t){if("object"!==typeof this)throw new TypeError("Promises must be constructed via new");if("function"!==typeof t)throw new TypeError("not a function");this._state=null,this._value=null,this._deferreds=[],c(t,r(a,this),r(u,this))},e=window,n=t.immediateFn||"function"===typeof e.setImmediate&&e.setImmediate||function(t){return setTimeout(t,1)},r=function(t,e){return function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return t.apply(e,n)}},o=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)};function i(t){var e=this;null!==this._state?n(function(){var n=e._state?t.onFulfilled:t.onRejected;if(null!==n){var r;try{r=n(e._value)}catch(o){return void t.reject(o)}t.resolve(r)}else(e._state?t.resolve:t.reject)(e._value)}):this._deferreds.push(t)}function a(t){try{if(t===this)throw new TypeError("A promise cannot be resolved with itself.");if(t&&("object"===typeof t||"function"===typeof t)){var e=t.then;if("function"===typeof e)return void c(r(e,t),r(a,this),r(u,this))}this._state=!0,this._value=t,s.call(this)}catch(n){u.call(this,n)}}function u(t){this._state=!1,this._value=t,s.call(this)}function s(){for(var t=0,e=this._deferreds;t<e.length;t++){var n=e[t];i.call(this,n)}this._deferreds=[]}function l(t,e,n,r){this.onFulfilled="function"===typeof t?t:null,this.onRejected="function"===typeof e?e:null,this.resolve=n,this.reject=r}var c=function(t,e,n){var r=!1;try{t(function(t){r||(r=!0,e(t))},function(t){r||(r=!0,n(t))})}catch(o){if(r)return;r=!0,n(o)}};return t.prototype.catch=function(t){return this.then(null,t)},t.prototype.then=function(e,n){var r=this;return new t(function(t,o){i.call(r,new l(e,n,t,o))})},t.all=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=Array.prototype.slice.call(1===e.length&&o(e[0])?e[0]:e);return new t(function(t,e){if(0===r.length)return t([]);for(var n=r.length,o=function(i,a){try{if(a&&("object"===typeof a||"function"===typeof a)){var u=a.then;if("function"===typeof u)return void u.call(a,function(t){o(i,t)},e)}r[i]=a,0===--n&&t(r)}catch(s){e(s)}},i=0;i<r.length;i++)o(i,r[i])})},t.resolve=function(e){return e&&"object"===typeof e&&e.constructor===t?e:new t(function(t){t(e)})},t.reject=function(e){return new t(function(t,n){n(e)})},t.race=function(e){return new t(function(t,n){for(var r=0,o=e;r<o.length;r++){var i=o[r];i.then(t,n)}})},t},hE=window.Promise?window.Promise:dE(),pE=function(t){return new hE(function(e,n){var r=URL.createObjectURL(t),o=new Image,i=function(){o.removeEventListener("load",a),o.removeEventListener("error",u)},a=function(){i(),e(o)},u=function(){i(),n("Unable to load data of type "+t.type+": "+r)};o.addEventListener("load",a),o.addEventListener("error",u),o.src=r,o.complete&&setTimeout(a,0)})},gE=function(t){var e=t.split(","),n=/data:([^;]+)/.exec(e[0]);if(!n)return R.none();for(var r=n[1],o=e[1],i=1024,a=atob(o),u=a.length,s=Math.ceil(u/i),l=new Array(s),c=0;c<s;++c){for(var f=c*i,d=Math.min(f+i,u),h=new Array(d-f),p=f,g=0;p<d;++g,++p)h[g]=a[p].charCodeAt(0);l[c]=new Uint8Array(h)}return R.some(new Blob(l,{type:r}))},mE=function(t){return new hE(function(e,n){gE(t).fold(function(){n("uri is not base64: "+t)},e)})},vE=function(t,e,n){return e=e||"image/png",d(HTMLCanvasElement.prototype.toBlob)?new hE(function(r,o){t.toBlob(function(t){t?r(t):o()},e,n)}):mE(t.toDataURL(e,n))},yE=function(t,e,n){return e=e||"image/png",t.toDataURL(e,n)},bE=function(t){return pE(t).then(function(t){wE(t);var e=aE(cE(t),fE(t)),n=sE(e);return n.drawImage(t,0,0),e})},xE=function(t){return new hE(function(e){var n=new FileReader;n.onloadend=function(){e(n.result)},n.readAsDataURL(t)})},wE=function(t){URL.revokeObjectURL(t.src)},_E=function(t,e,n){var r=e.type,o=b(r),i=function(){return hE.resolve(e)},a=b(n),u=function(){return n.split(",")[1]},s=function(e,n){return t.then(function(t){return vE(t,e,n)})},l=function(e,n){return t.then(function(t){return yE(t,e,n)})},c=function(t,e){return l(t,e).then(function(t){return t.split(",")[1]})},f=function(){return t.then(uE)};return{getType:o,toBlob:i,toDataURL:a,toBase64:u,toAdjustedBlob:s,toAdjustedDataURL:l,toAdjustedBase64:c,toCanvas:f}},SE=function(t){return xE(t).then(function(e){return _E(bE(t),t,e)})},CE=function(t,e){return vE(t,e).then(function(e){return _E(hE.resolve(t),e,t.toDataURL())})},ME=function(t){return SE(t)},TE=function(t,e,n){var r="string"===typeof t?parseFloat(t):t;return r>n?r=n:r<e&&(r=e),r},kE=function(){return[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1]},DE=[0,.01,.02,.04,.05,.06,.07,.08,.1,.11,.12,.14,.15,.16,.17,.18,.2,.21,.22,.24,.25,.27,.28,.3,.32,.34,.36,.38,.4,.42,.44,.46,.48,.5,.53,.56,.59,.62,.65,.68,.71,.74,.77,.8,.83,.86,.89,.92,.95,.98,1,1.06,1.12,1.18,1.24,1.3,1.36,1.42,1.48,1.54,1.6,1.66,1.72,1.78,1.84,1.9,1.96,2,2.12,2.25,2.37,2.5,2.62,2.75,2.87,3,3.2,3.4,3.6,3.8,4,4.3,4.7,4.9,5,5.5,6,6.5,6.8,7,7.3,7.5,7.8,8,8.4,8.7,9,9.4,9.6,9.8,10],AE=function(t,e){for(var n,r=[],o=new Array(25),i=0;i<5;i++){for(var a=0;a<5;a++)r[a]=e[a+5*i];for(a=0;a<5;a++){n=0;for(var u=0;u<5;u++)n+=t[a+5*u]*r[u];o[a+5*i]=n}}return o},IE=function(t,e){var n;return e=TE(e,-1,1),e*=100,e<0?n=127+e/100*127:(n=e%1,n=0===n?DE[e]:DE[Math.floor(e)]*(1-n)+DE[Math.floor(e)+1]*n,n=127*n+127),AE(t,[n/127,0,0,0,.5*(127-n),0,n/127,0,0,.5*(127-n),0,0,n/127,0,.5*(127-n),0,0,0,1,0,0,0,0,0,1])},OE=function(t,e){return e=TE(255*e,-255,255),AE(t,[1,0,0,0,e,0,1,0,0,e,0,0,1,0,e,0,0,0,1,0,0,0,0,0,1])},LE=function(t,e,n,r){return e=TE(e,0,2),n=TE(n,0,2),r=TE(r,0,2),AE(t,[e,0,0,0,0,0,n,0,0,0,0,0,r,0,0,0,0,0,1,0,0,0,0,0,1])},EE=function(t,e){return t.toCanvas().then(function(n){return NE(n,t.getType(),e)})},NE=function(t,e,n){var r=sE(t),o=function(t,e){for(var n,r,o,i,a=t.data,u=e[0],s=e[1],l=e[2],c=e[3],f=e[4],d=e[5],h=e[6],p=e[7],g=e[8],m=e[9],v=e[10],y=e[11],b=e[12],x=e[13],w=e[14],_=e[15],S=e[16],C=e[17],M=e[18],T=e[19],k=0;k<a.length;k+=4)n=a[k],r=a[k+1],o=a[k+2],i=a[k+3],a[k]=n*u+r*s+o*l+i*c+f,a[k+1]=n*d+r*h+o*p+i*g+m,a[k+2]=n*v+r*y+o*b+i*x+w,a[k+3]=n*_+r*S+o*C+i*M+T;return t},i=o(r.getImageData(0,0,t.width,t.height),n);return r.putImageData(i,0,0),CE(t,e)},RE=function(t,e){return t.toCanvas().then(function(n){return PE(n,t.getType(),e)})},PE=function(t,e,n){var r=sE(t),o=function(t,e,n){for(var r=function(t,e,n){return t>n?t=n:t<e&&(t=e),t},o=Math.round(Math.sqrt(n.length)),i=Math.floor(o/2),a=t.data,u=e.data,s=t.width,l=t.height,c=0;c<l;c++)for(var f=0;f<s;f++){for(var d=0,h=0,p=0,g=0;g<o;g++)for(var m=0;m<o;m++){var v=r(f+m-i,0,s-1),y=r(c+g-i,0,l-1),b=4*(y*s+v),x=n[g*o+m];d+=a[b]*x,h+=a[b+1]*x,p+=a[b+2]*x}var w=4*(c*s+f);u[w]=r(d,0,255),u[w+1]=r(h,0,255),u[w+2]=r(p,0,255)}return e},i=r.getImageData(0,0,t.width,t.height),a=r.getImageData(0,0,t.width,t.height);return a=o(i,a,n),r.putImageData(a,0,0),CE(t,e)},zE=function(t){var e=function(e,n,r){for(var o=sE(e),i=new Array(256),a=function(t,e){for(var n=t.data,r=0;r<n.length;r+=4)n[r]=e[n[r]],n[r+1]=e[n[r+1]],n[r+2]=e[n[r+2]];return t},u=0;u<i.length;u++)i[u]=t(u,r);var s=a(o.getImageData(0,0,e.width,e.height),i);return o.putImageData(s,0,0),CE(e,n)};return function(t,n){return t.toCanvas().then(function(r){return e(r,t.getType(),n)})}},BE=function(t){return function(e,n){return EE(e,t(kE(),n))}},VE=function(t){return function(e){return EE(e,t)}},HE=function(t){return function(e){return RE(e,t)}},FE=VE([-1,0,0,0,255,0,-1,0,0,255,0,0,-1,0,255,0,0,0,1,0,0,0,0,0,1]),WE=BE(OE),UE=BE(IE),GE=function(t,e,n,r){return EE(t,LE(kE(),e,n,r))},jE=HE([0,-1,0,-1,5,-1,0,-1,0]),XE=zE(function(t,e){return 255*Math.pow(t/255,1-e)}),YE=function(t,e,n){var r=cE(t),o=fE(t),i=e/r,a=n/o,u=!1;(i<.5||i>2)&&(i=i<.5?.5:2,u=!0),(a<.5||a>2)&&(a=a<.5?.5:2,u=!0);var s=qE(t,i,a);return u?s.then(function(t){return YE(t,e,n)}):s},qE=function(t,e,n){return new hE(function(r){var o=cE(t),i=fE(t),a=Math.floor(o*e),u=Math.floor(i*n),s=aE(a,u),l=sE(s);l.drawImage(t,0,0,o,i,0,0,a,u),r(s)})},ZE=function(t,e){void 0===e&&(e=2);var n=Math.pow(10,e),r=Math.round(t*n);return Math.ceil(r/n)},$E=function(t,e){return t.toCanvas().then(function(n){return KE(n,t.getType(),e)})},KE=function(t,e,n){var r=n<0?360+n:n,o=r*Math.PI/180,i=t.width,a=t.height,u=Math.sin(o),s=Math.cos(o),l=ZE(Math.abs(i*s)+Math.abs(a*u)),c=ZE(Math.abs(i*u)+Math.abs(a*s)),f=aE(l,c),d=sE(f);return d.translate(l/2,c/2),d.rotate(o),d.drawImage(t,-i/2,-a/2),CE(f,e)},JE=function(t,e){return t.toCanvas().then(function(n){return QE(n,t.getType(),e)})},QE=function(t,e,n){var r=aE(t.width,t.height),o=sE(r);return"v"===n?(o.scale(1,-1),o.drawImage(t,0,-r.height)):(o.scale(-1,1),o.drawImage(t,-r.width,0)),CE(r,e)},tN=function(t,e,n,r,o){return t.toCanvas().then(function(i){return eN(i,t.getType(),e,n,r,o)})},eN=function(t,e,n,r,o,i){var a=aE(o,i),u=sE(a);return u.drawImage(t,-n,-r),CE(a,e)},nN=function(t,e,n){return t.toCanvas().then(function(r){return YE(r,e,n).then(function(e){return CE(e,t.getType())})})},rN=function(t){return FE(t)},oN=function(t){return jE(t)},iN=function(t,e){return XE(t,e)},aN=function(t,e,n,r){return GE(t,e,n,r)},uN=function(t,e){return WE(t,e)},sN=function(t,e){return UE(t,e)},lN=function(t,e){return JE(t,e)},cN=function(t,e,n,r,o){return tN(t,e,n,r,o)},fN=function(t,e,n){return nN(t,e,n)},dN=function(t,e){return $E(t,e)},hN=function(t,e){return k({dom:{tag:"span",innerHtml:t,classes:["tox-icon","tox-tbtn__icon-wrap"]}},e)},pN=function(t,e){return hN(tw(t,e),{})},gN=function(t,e){return hN(tw(t,e),{behaviours:Hc([wb.config({})])})},mN=function(t,e,n){return{dom:{tag:"span",innerHtml:n.translate(t),classes:[e+"__select-label"]},behaviours:Hc([wb.config({})])}},vN=za("toolbar.button.execute"),yN=function(t){return Ei(function(e,n){$C(t,e)(function(n){fi(e,vN,{buttonApi:n}),t.onAction(n)})})},bN=(nA={},nA[Uo()]=["disabling","alloy.base.behaviour","toggling","toolbar-button-events"],nA),xN=za("update-menu-text"),wN=za("update-menu-icon"),_N=function(t,e,n){var r=Zn(g),o=t.text.map(function(t){return Jx(mN(t,e,n.providers))}),i=t.icon.map(function(t){return Jx(gN(t,n.providers.icons))}),a=function(t,e){var n=Zp.getValue(t);return Lb.focus(n),fi(n,"keydown",{raw:e.event.raw}),yA.close(n),R.some(!0)},u=t.role.fold(function(){return{}},function(t){return{role:t}}),s=t.tooltip.fold(function(){return{}},function(t){var e=n.providers.translate(t);return{title:e,"aria-label":e}}),l=Jx(yA.sketch(k(k(k({},t.uid?{uid:t.uid}:{}),u),{dom:{tag:"button",classes:[e,e+"--select"].concat(j(t.classes,function(t){return e+"--"+t})),attributes:k({},s)},components:eM([i.map(function(t){return t.asSpec()}),o.map(function(t){return t.asSpec()}),R.some({dom:{tag:"div",classes:[e+"__select-chevron"],innerHtml:tw("chevron-down",n.providers.icons)}})]),matchWidth:!0,useMinWidth:!0,dropdownBehaviours:Hc(A(t.dropdownBehaviours,[ZC.button(function(){return t.disabled||n.providers.isDisabled()}),GC(),_A.config({}),wb.config({}),Sb("dropdown-events",[KC(t,r),JC(t,r)]),Sb("menubutton-update-display-text",[xi(xN,function(t,e){o.bind(function(e){return e.getOpt(t)}).each(function(t){wb.set(t,[ms(n.providers.translate(e.event.text))])})}),xi(wN,function(t,e){i.bind(function(e){return e.getOpt(t)}).each(function(t){wb.set(t,[gN(e.event.icon,n.providers.icons)])})})])])),eventOrder:qt(bN,{mousedown:["focusing","alloy.base.behaviour","item-type-events","normal-dropdown-events"]}),sandboxBehaviours:Hc([fb.config({mode:"special",onLeft:a,onRight:a})]),lazySink:n.getSink,toggleClass:e+"--active",parts:{menu:P_(!1,t.columns,t.presets)},fetch:function(e){return RD.nu(w(t.fetch,e))}})));return l.asSpec()},SN=function(t){return i(t)},CN=function(t){return"separator"===t.type},MN=function(t){return Ht(t,"getSubmenuItems")},TN={type:"separator"},kN=function(t,e){var n=K(t,function(t,n){return SN(n)?""===n?t:"|"===n?t.length>0&&!CN(t[t.length-1])?t.concat([TN]):t:Ht(e,n.toLowerCase())?t.concat([e[n.toLowerCase()]]):t:t.concat([n])},[]);return n.length>0&&CN(n[n.length-1])&&n.pop(),n},DN=function(t,e){var n=t.getSubmenuItems(),r=ON(n,e),o=qt(r.menus,le(t.value,r.items)),i=qt(r.expansions,le(t.value,t.value));return{item:t,menus:o,expansions:i}},AN=function(t,e){return MN(t)?DN(t,e):{item:t,menus:{},expansions:{}}},IN=function(t){if(CN(t))return t;var e=Vt(t,"value").getOrThunk(function(){return za("generated-menu-item")});return qt({value:e},t)},ON=function(t,e){var n=kN(i(t)?t.split(" "):t,e);return $(n,function(t,n){var r=IN(n),o=AN(r,e);return{menus:qt(t.menus,o.menus),items:[o.item].concat(t.items),expansions:qt(t.expansions,o.expansions)}},{menus:{},expansions:{},items:[]})},LN=function(t,e,n,r){var o=za("primary-menu"),i=ON(t,n.shared.providers.menuItems());if(0===i.items.length)return R.none();var a=uk(o,i.items,e,n,r),u=Ot(i.menus,function(t,r){return uk(r,t,e,n,!1)}),s=qt(u,le(o,a));return R.from(Nx.tieredData(o,s,i.expansions))},EN=function(t){return{isDisabled:function(){return $S.isDisabled(t)},setDisabled:function(e){return $S.set(t,e)},setActive:function(e){var n=t.element;e?(zu(n,"tox-tbtn--enabled"),Sa(n,"aria-pressed",!0)):(Vu(n,"tox-tbtn--enabled"),Da(n,"aria-pressed"))},isActive:function(){return Hu(t.element,"tox-tbtn--enabled")}}},NN=function(t,e,n,r){return _N({text:t.text,icon:t.icon,tooltip:t.tooltip,role:r,fetch:function(e,r){t.fetch(function(t){r(LN(t,s_.CLOSE_ON_EXECUTE,n,!1))})},onSetup:t.onSetup,getApi:EN,columns:1,presets:"normal",classes:[],dropdownBehaviours:[tD.config({})]},e,n.shared)},RN=function(t,e,n){var r=function(t){return function(r){var o=!r.isActive();r.setActive(o),t.storage.set(o),n.shared.getSink().each(function(n){e().getOpt(n).each(function(e){$c(e.element),fi(e,fD,{name:t.name,value:t.storage.get()})})})}},o=function(t){return function(e){e.setActive(t.storage.get())}};return function(e){e(j(t,function(t){var e=t.text.fold(function(){return{}},function(t){return{text:t}});return k(k({type:t.type,active:!1},e),{onAction:r(t),onSetup:o(t)})}))}},PN=function(t,e,n,r,o,i){void 0===n&&(n=[]);var a=e.fold(function(){return{}},function(t){return{action:t}}),u=k({buttonBehaviours:Hc([ZC.button(function(){return t.disabled||i.isDisabled()}),GC(),tD.config({}),Sb("button press",[bi("click"),bi("mousedown")])].concat(n)),eventOrder:{click:["button press","alloy.base.behaviour"],mousedown:["button press","alloy.base.behaviour"]}},a),s=qt(u,{dom:r});return qt(s,{components:o})},zN=function(t,e,n,r){void 0===r&&(r=[]);var o=t.tooltip.map(function(t){return{"aria-label":n.translate(t),title:n.translate(t)}}).getOr({}),i={tag:"button",classes:["tox-tbtn"],attributes:o},a=t.icon.map(function(t){return pN(t,n.icons)}),u=eM([a]);return PN(t,e,r,i,u,n)},BN=function(t,e,n,r){void 0===r&&(r=[]);var o=zN(t,R.some(e),n,r);return Kx.sketch(o)},VN=function(t,e,n,r,o){void 0===r&&(r=[]),void 0===o&&(o=[]);var i=n.translate(t.text),a=t.icon?t.icon.map(function(t){return pN(t,n.icons)}):R.none(),u=a.isSome()?eM([a]):[],s=a.isSome()?{}:{innerHtml:i},l=A(t.primary||t.borderless?["tox-button"]:["tox-button","tox-button--secondary"],a.isSome()?["tox-button--icon"]:[],t.borderless?["tox-button--naked"]:[],o),c=k(k({tag:"button",classes:l},s),{attributes:{title:i}});return PN(t,e,r,c,u,n)},HN=function(t,e,n,r,o){void 0===r&&(r=[]),void 0===o&&(o=[]);var i=VN(t,R.some(e),n,r,o);return Kx.sketch(i)},FN=function(t,e){return function(n){"custom"===e?fi(n,fD,{name:t,value:{}}):"submit"===e?ci(n,dD):"cancel"===e?ci(n,cD):console.error("Unknown button type: ",e)}},WN=function(t,e){return"menu"===e},UN=function(t,e){return"custom"===e||"cancel"===e||"submit"===e},GN=function(t,e,n){if(WN(t,e)){var r=function(){return a},o=t,i=k(k({},t),{onSetup:function(e){return e.setDisabled(t.disabled),g},fetch:RN(o.items,r,n)}),a=Jx(NN(i,"tox-tbtn",n,R.none()));return a.asSpec()}if(UN(t,e)){var u=FN(t.name,e),s=k(k({},t),{borderless:!1});return HN(s,u,n.shared.providers,[])}console.error("Unknown footer button type: ",e)},jN=function(t,e){var n=FN(t.name,"custom");return rD(R.none(),$k.parts.field(k({factory:Kx},VN(t,R.some(n),e,[jL.memory(""),AL.self()]))))},XN=b([Bn("field1Name","field1"),Bn("field2Name","field2"),Hl("onLockedChange"),Pl(["lockClass"]),Bn("locked",!1),Qp.field("coupledFieldBehaviours",[bm,Zp])]),YN=function(t,e,n){return Ug(t,e,n).bind(bm.getCurrent)},qN=function(t,e){return Dg({factory:$k,name:t,overrides:function(t){return{fieldBehaviours:Hc([Sb("coupled-input-behaviour",[xi(Lo(),function(n){YN(n,t,e).each(function(e){Ug(n,t,"lock").each(function(r){Kb.isOn(r)&&t.onLockedChange(n,e,r)})})})])])}}})},ZN=b([qN("field1","field2"),qN("field2","field1"),Dg({factory:Kx,schema:[bn("dom")],name:"lock",overrides:function(t){return{buttonBehaviours:Hc([Kb.config({selected:t.locked,toggleClass:t.markers.lockClass,aria:{mode:"pressed"}})])}}})]),$N=function(t,e,n,r){return{uid:t.uid,dom:t.dom,components:e,behaviours:Qp.augment(t.coupledFieldBehaviours,[bm.config({find:R.some}),Zp.config({store:{mode:"manual",getValue:function(e){var n,r=qg(e,t,["field1","field2"]);return n={},n[t.field1Name]=Zp.getValue(r.field1()),n[t.field2Name]=Zp.getValue(r.field2()),n},setValue:function(e,n){var r=qg(e,t,["field1","field2"]);Ft(n,t.field1Name)&&Zp.setValue(r.field1(),n[t.field1Name]),Ft(n,t.field2Name)&&Zp.setValue(r.field2(),n[t.field2Name])}}})]),apis:{getField1:function(e){return Ug(e,t,"field1")},getField2:function(e){return Ug(e,t,"field2")},getLock:function(e){return Ug(e,t,"lock")}}}},KN=sm({name:"FormCoupledInputs",configFields:XN(),partFields:ZN(),factory:$N,apis:{getField1:function(t,e){return t.getField1(e)},getField2:function(t,e){return t.getField2(e)},getLock:function(t,e){return t.getLock(e)}}}),JN=function(t){var e={"":0,px:0,pt:1,mm:1,pc:2,ex:2,em:2,ch:2,rem:2,cm:3,in:4,"%":4},n=function(t){return t in e?e[t]:1},r=t.value.toFixed(n(t.unit));return-1!==r.indexOf(".")&&(r=r.replace(/\.?0*$/,"")),r+t.unit},QN=function(t){var e=/^\s*(\d+(?:\.\d+)?)\s*(|cm|mm|in|px|pt|pc|em|ex|ch|rem|vw|vh|vmin|vmax|%)\s*$/,n=e.exec(t);if(null!==n){var r=parseFloat(n[1]),o=n[2];return mt.value({value:r,unit:o})}return mt.error(t)},tR=function(t,e){var n={"":96,px:96,pt:72,cm:2.54,pc:12,mm:25.4,in:1},r=function(t){return Object.prototype.hasOwnProperty.call(n,t)};return t.unit===e?R.some(t.value):r(t.unit)&&r(e)?n[t.unit]===n[e]?R.some(t.value):R.some(t.value/n[t.unit]*n[e]):R.none()},eR=function(t){return R.none()},nR=function(t,e){return function(n){return tR(n,e).map(function(n){return{value:n*t,unit:e}})}},rR=function(t,e){var n=QN(t).toOptional(),r=QN(e).toOptional();return fm(n,r,function(t,e){return tR(t,e.unit).map(function(t){return e.value/t}).map(function(t){return nR(t,e.unit)}).getOr(eR)}).getOr(eR)},oR=function(t,e){var n=eR,r=za("ratio-event"),o=KN.parts.lock({dom:{tag:"button",classes:["tox-lock","tox-button","tox-button--naked","tox-button--icon"],attributes:{title:e.translate(t.label.getOr("Constrain proportions"))}},components:[{dom:{tag:"span",classes:["tox-icon","tox-lock-icon__lock"],innerHtml:tw("lock",e.icons)}},{dom:{tag:"span",classes:["tox-icon","tox-lock-icon__unlock"],innerHtml:tw("unlock",e.icons)}}],buttonBehaviours:Hc([$S.config({disabled:function(){return t.disabled||e.isDisabled()}}),GC(),tD.config({})])}),i=function(t){return{dom:{tag:"div",classes:["tox-form__group"]},components:t}},a=function(n){return $k.parts.field({factory:SD,inputClasses:["tox-textfield"],inputBehaviours:Hc([$S.config({disabled:function(){return t.disabled||e.isDisabled()}}),GC(),tD.config({}),Sb("size-input-events",[xi(Do(),function(t,e){fi(t,r,{isField1:n})}),xi(Eo(),function(e,n){fi(e,sD,{name:t.name})})])]),selectOnFocus:!1})},u=function(t){return{dom:{tag:"label",classes:["tox-label"],innerHtml:e.translate(t)}}},s=KN.parts.field1(i([$k.parts.label(u("Width")),a(!0)])),l=KN.parts.field2(i([$k.parts.label(u("Height")),a(!1)]));return KN.sketch({dom:{tag:"div",classes:["tox-form__group"]},components:[{dom:{tag:"div",classes:["tox-form__controls-h-stack"]},components:[s,l,i([u("&nbsp;"),o])]}],field1Name:"width",field2Name:"height",locked:!0,markers:{lockClass:"tox-locked"},onLockedChange:function(t,e,r){QN(Zp.getValue(t)).each(function(t){n(t).each(function(t){Zp.setValue(e,JN(t))})})},coupledFieldBehaviours:Hc([$S.config({disabled:function(){return t.disabled||e.isDisabled()},onDisabled:function(t){KN.getField1(t).bind($k.getField).each($S.disable),KN.getField2(t).bind($k.getField).each($S.disable),KN.getLock(t).each($S.disable)},onEnabled:function(t){KN.getField1(t).bind($k.getField).each($S.enable),KN.getField2(t).bind($k.getField).each($S.enable),KN.getLock(t).each($S.enable)}}),GC(),Sb("size-input-events2",[xi(r,function(t,e){var r=e.event.isField1,o=r?KN.getField1(t):KN.getField2(t),i=r?KN.getField2(t):KN.getField1(t),a=o.map(Zp.getValue).getOr(""),u=i.map(Zp.getValue).getOr("");n=rR(a,u)})])])})},iR=b(za("undo")),aR=b(za("redo")),uR=b(za("zoom")),sR=b(za("back")),lR=b(za("apply")),cR=b(za("swap")),fR=b(za("transform")),dR=b(za("temp-transform")),hR=b(za("transform-apply")),pR={undo:iR,redo:aR,zoom:uR,back:sR,apply:lR,swap:cR,transform:fR,tempTransform:dR,transformApply:hR},gR=b("save-state"),mR=b("disable"),vR=b("enable"),yR={formActionEvent:fD,saveState:gR,disable:mR,enable:vR},bR=function(t,e){var n=function(t,n,r,o){return Jx(HN({name:t,text:t,disabled:r,primary:o,icon:R.none(),borderless:!1},n,e))},r=function(t,n,r,o){return Jx(BN({name:t,icon:R.some(t),tooltip:R.some(n),disabled:o,primary:!1,borderless:!1},r,e))},o=function(t,e){t.map(function(t){var n=t.get(e);n.hasConfigured($S)&&$S.disable(n)})},i=function(t,e){t.map(function(t){var n=t.get(e);n.hasConfigured($S)&&$S.enable(n)})},a={tag:"div",classes:["tox-image-tools__toolbar","tox-image-tools-edit-panel"]},u=g,s=function(t,e,n){fi(t,e,n)},l=function(t){return ci(t,yR.disable())},c=function(t){return ci(t,yR.enable())},f=function(t,e){l(t),s(t,pR.transform(),{transform:e}),c(t)},d=function(t,e){l(t),s(t,pR.tempTransform(),{transform:e}),c(t)},h=function(t){return function(){at.getOpt(t).each(function(t){wb.set(t,[ot])})}},p=function(t,e){l(t),s(t,pR.transformApply(),{transform:e,swap:h(t)}),c(t)},m=function(){return n("Back",function(t){return s(t,pR.back(),{swap:h(t)})},!1,!1)},v=function(){return Jx({dom:{tag:"div",classes:["tox-spacer"]},behaviours:Hc([$S.config({})])})},y=function(){return n("Apply",function(t){return s(t,pR.apply(),{swap:h(t)})},!0,!0)},x=function(){return function(e){var n=t.getRect();return cN(e,n.x,n.y,n.w,n.h)}},w=[m(),v(),n("Apply",function(e){var n=x();p(e,n),t.hideCrop()},!1,!0)],_=Gk.sketch({dom:a,components:w.map(function(t){return t.asSpec()}),containerBehaviours:Hc([Sb("image-tools-crop-buttons-events",[xi(yR.disable(),function(t,e){o(w,t)}),xi(yR.enable(),function(t,e){i(w,t)})])])}),S=Jx(oR({name:"size",label:R.none(),constrain:!0,disabled:!1},e)),C=function(t,e){return function(n){return fN(n,t,e)}},M=[m(),v(),S,v(),n("Apply",function(t){S.getOpt(t).each(function(e){var n=Zp.getValue(e),r=parseInt(n.width,10),o=parseInt(n.height,10),i=C(r,o);p(t,i)})},!1,!0)],T=Gk.sketch({dom:a,components:M.map(function(t){return t.asSpec()}),containerBehaviours:Hc([Sb("image-tools-resize-buttons-events",[xi(yR.disable(),function(t,e){o(M,t)}),xi(yR.enable(),function(t,e){i(M,t)})])])}),k=function(t,e){return function(n){return t(n,e)}},D=k(lN,"h"),A=k(lN,"v"),I=k(dN,-90),O=k(dN,90),L=function(t,e){d(t,e)},E=[m(),v(),r("flip-horizontally","Flip horizontally",function(t){L(t,D)},!1),r("flip-vertically","Flip vertically",function(t){L(t,A)},!1),r("rotate-left","Rotate counterclockwise",function(t){L(t,I)},!1),r("rotate-right","Rotate clockwise",function(t){L(t,O)},!1),v(),y()],N=Gk.sketch({dom:a,components:E.map(function(t){return t.asSpec()}),containerBehaviours:Hc([Sb("image-tools-fliprotate-buttons-events",[xi(yR.disable(),function(t,e){o(E,t)}),xi(yR.enable(),function(t,e){i(E,t)})])])}),P=function(t,n,r,o,i){var a=rL.parts.label({dom:{tag:"label",classes:["tox-label"],innerHtml:e.translate(t)}}),u=rL.parts.spectrum({dom:{tag:"div",classes:["tox-slider__rail"],attributes:{role:"presentation"}}}),s=rL.parts.thumb({dom:{tag:"div",classes:["tox-slider__handle"],attributes:{role:"presentation"}}});return Jx(rL.sketch({dom:{tag:"div",classes:["tox-slider"],attributes:{role:"presentation"}},model:{mode:"x",minX:r,maxX:i,getInitialValue:b({x:o})},components:[a,u,s],sliderBehaviours:Hc([Lb.config({})]),onChoose:n}))},z=function(t,e,n,r,o){var i=function(t,n,r){var o=k(e,r.x/100);f(t,o)};return P(t,i,n,r,o)},B=function(t,e,n,r,o){return[m(),z(t,e,n,r,o),y()]},V=function(t,e,n,r,u){var s=B(t,e,n,r,u);return Gk.sketch({dom:a,components:s.map(function(t){return t.asSpec()}),containerBehaviours:Hc([Sb("image-tools-filter-panel-buttons-events",[xi(yR.disable(),function(t,e){o(s,t)}),xi(yR.enable(),function(t,e){i(s,t)})])])})},H=[m(),v(),y()],F=Gk.sketch({dom:a,components:H.map(function(t){return t.asSpec()})}),W=V("Brightness",uN,-100,0,100),U=V("Contrast",sN,-100,0,100),G=V("Gamma",iN,-100,0,100),j=function(t,e,n){return function(r){return aN(r,t,e,n)}},X=function(t){var e=function(t,e,n){var r=Y.getOpt(t),o=Z.getOpt(t),i=q.getOpt(t);r.each(function(e){o.each(function(n){i.each(function(r){var o=Zp.getValue(e).x/100,i=Zp.getValue(r).x/100,a=Zp.getValue(n).x/100,u=j(o,i,a);f(t,u)})})})};return P(t,e,0,100,200)},Y=X("R"),q=X("G"),Z=X("B"),$=[m(),Y,q,Z,y()],K=Gk.sketch({dom:a,components:$.map(function(t){return t.asSpec()})}),J=function(t,e,n){return function(r){var o=function(){at.getOpt(r).each(function(e){wb.set(e,[t]),n(e)})};s(r,pR.swap(),{transform:e,swap:o})}},Q=function(e){t.showCrop()},tt=function(e){S.getOpt(e).each(function(e){var n=t.getMeasurements(),r=n.width,o=n.height;Zp.setValue(e,{width:r,height:o})})},et=R.some(oN),nt=R.some(rN),rt=[r("crop","Crop",J(_,R.none(),Q),!1),r("resize","Resize",J(T,R.none(),tt),!1),r("orientation","Orientation",J(N,R.none(),u),!1),r("brightness","Brightness",J(W,R.none(),u),!1),r("sharpen","Sharpen",J(F,et,u),!1),r("contrast","Contrast",J(U,R.none(),u),!1),r("color-levels","Color levels",J(K,R.none(),u),!1),r("gamma","Gamma",J(G,R.none(),u),!1),r("invert","Invert",J(F,nt,u),!1)],ot=Gk.sketch({dom:a,components:rt.map(function(t){return t.asSpec()})}),it=Gk.sketch({dom:{tag:"div"},components:[ot],containerBehaviours:Hc([wb.config({})])}),at=Jx(it),ut=function(t){return at.getOpt(t).map(function(t){var e=t.components()[0];return e.components()[e.components().length-1]})};return{memContainer:at,getApplyButton:ut}},xR=tinymce.util.Tools.resolve("tinymce.geom.Rect"),wR=tinymce.util.Tools.resolve("tinymce.dom.DomQuery"),_R=tinymce.util.Tools.resolve("tinymce.util.Observable"),SR=tinymce.util.Tools.resolve("tinymce.util.VK"),CR=function(t){var e=Math.max,n=t.documentElement,r=t.body,o=e(n.scrollWidth,r.scrollWidth),i=e(n.clientWidth,r.clientWidth),a=e(n.offsetWidth,r.offsetWidth),u=e(n.scrollHeight,r.scrollHeight),s=e(n.clientHeight,r.clientHeight),l=e(n.offsetHeight,r.offsetHeight);return{width:o<a?i:o,height:u<l?s:u}},MR=function(t){var e,n;if(t.changedTouches)for(e="screenX screenY pageX pageY clientX clientY".split(" "),n=0;n<e.length;n++)t[e[n]]=t.changedTouches[0][e[n]]};function TR(t,e){var n,r,o,i,a=e.document||document,u=a.getElementById(e.handle||t),s=function(t){var s,f=CR(a);MR(t),t.preventDefault(),r=t.button;var d=u;o=t.screenX,i=t.screenY,s=window.getComputedStyle?window.getComputedStyle(d,null).getPropertyValue("cursor"):d.runtimeStyle.cursor,n=wR("<div></div>").css({position:"absolute",top:0,left:0,width:f.width,height:f.height,zIndex:2147483647,opacity:1e-4,cursor:s}).appendTo(a.body),wR(a).on("mousemove touchmove",l).on("mouseup touchend",c),e.start(t)},l=function(t){if(MR(t),t.button!==r)return c(t);t.deltaX=t.screenX-o,t.deltaY=t.screenY-i,t.preventDefault(),e.drag(t)},c=function(t){MR(t),wR(a).off("mousemove touchmove",l).off("mouseup touchend",c),n.remove(),e.stop&&e.stop(t)},f=function(){wR(u).off()};return wR(u).on("mousedown touchstart",s),{destroy:f}}var kR=0,DR=function(t,e,n,r,o){var i,a="tox-",u=a+"crid-"+kR++,s=[{name:"move",xMul:0,yMul:0,deltaX:1,deltaY:1,deltaW:0,deltaH:0,label:"Crop Mask"},{name:"nw",xMul:0,yMul:0,deltaX:1,deltaY:1,deltaW:-1,deltaH:-1,label:"Top Left Crop Handle"},{name:"ne",xMul:1,yMul:0,deltaX:0,deltaY:1,deltaW:1,deltaH:-1,label:"Top Right Crop Handle"},{name:"sw",xMul:0,yMul:1,deltaX:1,deltaY:0,deltaW:-1,deltaH:1,label:"Bottom Left Crop Handle"},{name:"se",xMul:1,yMul:1,deltaX:0,deltaY:0,deltaW:1,deltaH:1,label:"Bottom Right Crop Handle"}],l=["top","right","bottom","left"],c=function(t,e){return{x:e.x+t.x,y:e.y+t.y,w:e.w,h:e.h}},f=function(t,e){return{x:e.x-t.x,y:e.y-t.y,w:e.w,h:e.h}},d=function(){return f(n,t)},h=function(e,r,o,i){var a,u,s,l,c;a=r.x,u=r.y,s=r.w,l=r.h,a+=o*e.deltaX,u+=i*e.deltaY,s+=o*e.deltaW,l+=i*e.deltaH,s<20&&(s=20),l<20&&(l=20),c=t=xR.clamp({x:a,y:u,w:s,h:l},n,"move"===e.name),c=f(n,c),_.fire("updateRect",{rect:c}),b(c)},p=function(){var e=function(e){var n;return TR(u,{document:r.ownerDocument,handle:u+"-"+e.name,start:function(){n=t},drag:function(t){h(e,n,t.deltaX,t.deltaY)}})};wR('<div id="'+u+'" class="'+a+'croprect-container" role="grid" aria-dropeffect="execute">').appendTo(r),zL.each(l,function(t){wR("#"+u,r).append('<div id="'+u+"-"+t+'"class="'+a+'croprect-block" style="display: none" data-mce-bogus="all">')}),zL.each(s,function(t){wR("#"+u,r).append('<div id="'+u+"-"+t.name+'" class="'+a+"croprect-handle "+a+"croprect-handle-"+t.name+'"style="display: none" data-mce-bogus="all" role="gridcell" tabindex="-1" aria-label="'+t.label+'" aria-grabbed="false" title="'+t.label+'">')}),i=zL.map(s,e),m(t),wR(r).on("focusin focusout",function(t){wR(t.target).attr("aria-grabbed","focus"===t.type?"true":"false")}),wR(r).on("keydown",function(e){var n;zL.each(s,function(t){if(e.target.id===u+"-"+t.name)return n=t,!1});var r=function(t,e,r,o,i){t.stopPropagation(),t.preventDefault(),h(n,r,o,i)};switch(e.keyCode){case SR.LEFT:r(e,n,t,-10,0);break;case SR.RIGHT:r(e,n,t,10,0);break;case SR.UP:r(e,n,t,0,-10);break;case SR.DOWN:r(e,n,t,0,10);break;case SR.ENTER:case SR.SPACEBAR:e.preventDefault(),o();break}})},g=function(t){var e=zL.map(s,function(t){return"#"+u+"-"+t.name}).concat(zL.map(l,function(t){return"#"+u+"-"+t})).join(",");t?wR(e,r).show():wR(e,r).hide()},m=function(t){var n=function(t,e){e.h<0&&(e.h=0),e.w<0&&(e.w=0),wR("#"+u+"-"+t,r).css({left:e.x,top:e.y,width:e.w,height:e.h})};zL.each(s,function(e){wR("#"+u+"-"+e.name,r).css({left:t.w*e.xMul+t.x,top:t.h*e.yMul+t.y})}),n("top",{x:e.x,y:e.y,w:e.w,h:t.y-e.y}),n("right",{x:t.x+t.w,y:t.y,w:e.w-t.x-t.w+e.x,h:t.h}),n("bottom",{x:e.x,y:t.y+t.h,w:e.w,h:e.h-t.y-t.h+e.y}),n("left",{x:e.x,y:t.y,w:t.x-e.x,h:t.h}),n("move",t)},v=function(e){t=e,m(t)},y=function(n){e=n,m(t)},b=function(t){v(c(n,t))},x=function(e){n=e,m(t)},w=function(){zL.each(i,function(t){t.destroy()}),i=[]};p();var _=zL.extend({toggleVisibility:g,setClampRect:x,setRect:v,getInnerRect:d,setInnerRect:b,setViewPortRect:y,destroy:w},_R);return _},AR={create:DR},IR=function(t){return new Mw(function(e){var n=function(){t.removeEventListener("load",n),e(t)};t.complete?e(t):t.addEventListener("load",n)})},OR=function(t){var e=Jx({dom:{tag:"div",classes:["tox-image-tools__image-bg"],attributes:{role:"presentation"}}}),n=Zn(1),r=Zn(R.none()),o=Zn({x:0,y:0,w:1,h:1}),i=Zn({x:0,y:0,w:1,h:1}),a=function(t,i){p.getOpt(t).each(function(t){var a=n.get(),u=Ns(t.element),s=Ss(t.element),l=i.dom.naturalWidth*a,c=i.dom.naturalHeight*a,f=Math.max(0,u/2-l/2),d=Math.max(0,s/2-c/2),h={left:f.toString()+"px",top:d.toString()+"px",width:l.toString()+"px",height:c.toString()+"px",position:"absolute"};$u(i,h),e.getOpt(t).each(function(t){$u(t.element,h)}),r.get().each(function(t){var e=o.get();t.setRect({x:e.x*a+f,y:e.y*a+d,w:e.w*a,h:e.h*a}),t.setClampRect({x:f,y:d,w:l,h:c}),t.setViewPortRect({x:0,y:0,w:u,h:s})})})},u=function(t,e){p.getOpt(t).each(function(t){var r=Ns(t.element),o=Ss(t.element),i=e.dom.naturalWidth,a=e.dom.naturalHeight,u=Math.min(r/i,o/a);u>=1?n.set(1):n.set(u)})},s=function(t,e){var n=er.fromTag("img");return Sa(n,"src",e),IR(n.dom).then(function(){return p.getOpt(t).map(function(t){var e=vs({element:n});wb.replaceAt(t,1,R.some(e));var r=i.get(),s={x:0,y:0,w:n.dom.naturalWidth,h:n.dom.naturalHeight};i.set(s);var l=xR.inflate(s,-20,-20);return o.set(l),r.w===s.w&&r.h===s.h||u(t,n),a(t,n),n})})},l=function(t,e){var r=n.get(),o=e>0?Math.min(2,r+.1):Math.max(.1,r-.1);n.set(o),p.getOpt(t).each(function(t){var e=t.components()[1].element;a(t,e)})},c=function(){r.get().each(function(t){t.toggleVisibility(!0)})},f=function(){r.get().each(function(t){t.toggleVisibility(!1)})},d=function(){return o.get()},h=Gk.sketch({dom:{tag:"div",classes:["tox-image-tools__image"]},components:[e.asSpec(),{dom:{tag:"img",attributes:{src:t}}},{dom:{tag:"div"},behaviours:Hc([Sb("image-panel-crop-events",[Ii(function(t){p.getOpt(t).each(function(t){var e=t.element.dom,i=AR.create({x:10,y:10,w:100,h:100},{x:0,y:0,w:200,h:200},{x:0,y:0,w:200,h:200},e,g);i.toggleVisibility(!1),i.on("updateRect",function(t){var e=t.rect,r=n.get(),i={x:Math.round(e.x/r),y:Math.round(e.y/r),w:Math.round(e.w/r),h:Math.round(e.h/r)};o.set(i)}),r.set(R.some(i))})})])])}],containerBehaviours:Hc([wb.config({}),Sb("image-panel-events",[Ii(function(e){s(e,t)})])])}),p=Jx(h),m=function(){var t=i.get();return{width:t.w,height:t.h}};return{memContainer:p,updateSrc:s,zoom:l,showCrop:c,hideCrop:f,getRect:d,getMeasurements:m}},LR=function(t,e,n,r,o){return BN({name:t,icon:R.some(e),disabled:n,tooltip:R.some(t),primary:!1,borderless:!1},r,o)},ER=function(t,e){e?$S.enable(t):$S.disable(t)},NR=function(t){var e=function(t,e,o){n.getOpt(t).each(function(t){ER(t,e)}),r.getOpt(t).each(function(t){ER(t,o)})},n=Jx(LR("Undo","undo",!0,function(t){fi(t,pR.undo(),{direction:1})},t)),r=Jx(LR("Redo","redo",!0,function(t){fi(t,pR.redo(),{direction:1})},t)),o=Gk.sketch({dom:{tag:"div",classes:["tox-image-tools__toolbar","tox-image-tools__sidebar"]},components:[n.asSpec(),r.asSpec(),LR("Zoom in","zoom-in",!1,function(t){fi(t,pR.zoom(),{direction:1})},t),LR("Zoom out","zoom-out",!1,function(t){fi(t,pR.zoom(),{direction:-1})},t)]});return{container:o,updateButtonUndoStates:e}};function RR(){var t=[],e=-1,n=function(n){var r=t.splice(++e);return t.push(n),{state:n,removed:r}},r=function(){if(i())return t[--e]},o=function(){if(a())return t[++e]},i=function(){return e>0},a=function(){return-1!==e&&e<t.length-1};return{data:t,add:n,undo:r,redo:o,canUndo:i,canRedo:a}}var PR,zR=function(t){var e=Zn(t),n=Zn(R.none()),r=RR();r.add(t);var o=function(){return e.get()},i=function(t){e.set(t)},a=function(){return n.get().fold(function(){return e.get()},function(t){return t})},u=function(t){var e=s(t);return f(),n.set(R.some(e)),e.url},s=function(t){return{blob:t,url:URL.createObjectURL(t)}},l=function(t){URL.revokeObjectURL(t.url)},c=function(t){zL.each(t,l)},f=function(){n.get().each(l),n.set(R.none())},d=function(t){var e=s(t);i(e);var n=r.add(e).removed;return c(n),e.url},h=function(t){var e=s(t);return n.set(R.some(e)),e.url},p=function(t){return n.get().fold(g,function(e){d(e.blob),t()})},m=function(){var t=r.undo();return i(t),t.url},v=function(){var t=r.redo();return i(t),t.url},y=function(){var t=r.canUndo(),e=r.canRedo();return{undoEnabled:t,redoEnabled:e}};return{getBlobState:o,setBlobState:i,addBlobState:d,getTempState:a,updateTempState:u,addTempState:h,applyTempState:p,destroyTempState:f,undo:m,redo:v,getHistoryStates:y}},BR=function(t,e){var n=zR(t.currentState),r=function(t,e){var n=e.event.direction;C.zoom(t,n)},o=function(t){var e=n.getHistoryStates();M.updateButtonUndoStates(t,e.undoEnabled,e.redoEnabled),fi(t,yR.formActionEvent,{name:yR.saveState(),value:e.undoEnabled})},i=function(t){M.updateButtonUndoStates(t,!1,!1)},a=function(t,e){var r=n.undo();f(t,r).then(function(e){c(t),o(t)})},u=function(t,e){var r=n.redo();f(t,r).then(function(e){c(t),o(t)})},s=function(t){return t.toBlob()},l=function(t){fi(t,yR.formActionEvent,{name:yR.disable(),value:{}})},c=function(t){T.getApplyButton(t).each(function(t){$S.enable(t)}),fi(t,yR.formActionEvent,{name:yR.enable(),value:{}})},f=function(t,e){return l(t),C.updateSrc(t,e)},d=function(t,e,n,r,i){return l(t),ME(e).then(n).then(s).then(r).then(function(e){return f(t,e).then(function(e){return o(t),i(),c(t),e})}).catch(function(e){return console.log(e),c(t),e})},h=function(t,e,r){var o=n.getBlobState().blob,i=function(t){return n.updateTempState(t)};d(t,o,e,i,r)},p=function(t,e){var r=n.getTempState().blob,o=function(t){return n.addTempState(t)};d(t,r,e,o,g)},m=function(t,e,r){var o=n.getBlobState().blob,i=function(e){var r=n.addBlobState(e);return y(t),r};d(t,o,e,i,r)},v=function(t,e){var r=function(){y(t);var n=e.event.swap;n()};n.applyTempState(r)},y=function(t){var e=n.getBlobState().url;return n.destroyTempState(),o(t),e},b=function(t){var e=y(t);f(t,e).then(function(e){c(t)})},x=function(t,e){b(t);var n=e.event.swap;n(),C.hideCrop()},w=function(t,e){return h(t,e.event.transform,g)},_=function(t,e){return p(t,e.event.transform)},S=function(t,e){return m(t,e.event.transform,e.event.swap)},C=OR(t.currentState.url),M=NR(e),T=bR(C,e),k=function(t,e){i(t);var n=e.event.transform,r=e.event.swap;n.fold(function(){r()},function(e){h(t,e,r)})};return{dom:{tag:"div",attributes:{role:"presentation"}},components:[T.memContainer.asSpec(),C.memContainer.asSpec(),M.container],behaviours:Hc([Zp.config({store:{mode:"manual",getValue:function(){return n.getBlobState()}}}),Sb("image-tools-events",[xi(pR.undo(),a),xi(pR.redo(),u),xi(pR.zoom(),r),xi(pR.back(),x),xi(pR.apply(),v),xi(pR.transform(),w),xi(pR.tempTransform(),_),xi(pR.transformApply(),S),xi(pR.swap(),k)]),AL.self()])}},VR=function(t,e){var n={dom:{tag:"label",innerHtml:e.providers.translate(t.label),classes:["tox-label"]}},r=j(t.items,e.interpreter);return{dom:{tag:"div",classes:["tox-form__group"]},components:[n].concat(r),behaviours:Hc([AL.self(),wb.config({}),jL.domHtml(R.none()),fb.config({mode:"acyclic"})])}},HR=function(t){return!Ht(t,"items")},FR="data-value",WR=function(t,e,n,r){return j(n,function(n){return HR(n)?{type:"togglemenuitem",text:n.text,value:n.value,active:n.value===r,onAction:function(){Zp.setValue(t,n.value),fi(t,sD,{name:e}),Lb.focus(t)}}:{type:"nestedmenuitem",text:n.text,getSubmenuItems:function(){return WR(t,e,n.items,r)}}})},UR=function(t,e){return dt(t,function(t){return HR(t)?pm(t.value===e,t):UR(t.items,e)})},GR=function(t,e){var n=e.shared.providers,r=lt(t.items).filter(HR),o=t.label.map(function(t){return uD(t,n)}),i=$k.parts.field({dom:{},factory:{sketch:function(n){return _N({uid:n.uid,text:r.map(function(t){return t.text}),icon:R.none(),tooltip:t.label,role:R.none(),fetch:function(n,r){var o=WR(n,t.name,t.items,Zp.getValue(n));r(LN(o,s_.CLOSE_ON_EXECUTE,e,!1))},onSetup:b(g),getApi:b({}),columns:1,presets:"normal",classes:[],dropdownBehaviours:[tD.config({}),Zp.config({store:{mode:"manual",initialValue:r.map(function(t){return t.value}).getOr(""),getValue:function(t){return Ma(t.element,FR)},setValue:function(e,n){UR(t.items,n).each(function(t){Sa(e.element,FR,t.value),fi(e,xN,{text:t.text})})}}})]},"tox-listbox",e.shared)}}}),a={dom:{tag:"div",classes:["tox-listboxfield"]},components:[i]};return $k.sketch({dom:{tag:"div",classes:["tox-form__group"]},components:et([o.toArray(),[a]]),fieldBehaviours:Hc([$S.config({disabled:b(t.disabled),onDisabled:function(t){$k.getField(t).each($S.disable)},onEnabled:function(t){$k.getField(t).each($S.enable)}})])})},jR=function(t,e){return{dom:{tag:"div",classes:t.classes},components:j(t.items,e.shared.interpreter)}},XR=function(t,e){var n=j(t.options,function(t){return{dom:{tag:"option",value:t.value,innerHtml:t.text}}}),r=t.data.map(function(t){return le("initialValue",t)}).getOr({});return{uid:t.uid,dom:{tag:"select",classes:t.selectClasses,attributes:t.selectAttributes},components:n,behaviours:Jp(t.selectBehaviours,[Lb.config({}),Zp.config({store:k({mode:"manual",getValue:function(t){return is(t.element)},setValue:function(e,n){var r=Q(t.options,function(t){return t.value===n});r.isSome()&&as(e.element,n)}},r)})])}},YR=um({name:"HtmlSelect",configFields:[bn("options"),$p("selectBehaviours",[Lb,Zp]),Bn("selectClasses",[]),Bn("selectAttributes",{}),In("data")],factory:XR}),qR=function(t,e){var n=j(t.items,function(t){return{text:e.translate(t.text),value:t.value}}),r=t.label.map(function(t){return uD(t,e)}),o=$k.parts.field({dom:{},selectAttributes:{size:t.size},options:n,factory:YR,selectBehaviours:Hc([$S.config({disabled:function(){return t.disabled||e.isDisabled()}}),tD.config({}),Sb("selectbox-change",[xi(Eo(),function(e,n){fi(e,sD,{name:t.name})})])])}),i=t.size>1?R.none():R.some({dom:{tag:"div",classes:["tox-selectfield__icon-js"],innerHtml:tw("chevron-down",e.icons)}}),a={dom:{tag:"div",classes:["tox-selectfield"]},components:et([[o],i.toArray()])};return $k.sketch({dom:{tag:"div",classes:["tox-form__group"]},components:et([r.toArray(),[a]]),fieldBehaviours:Hc([$S.config({disabled:function(){return t.disabled||e.isDisabled()},onDisabled:function(t){$k.getField(t).each($S.disable)},onEnabled:function(t){$k.getField(t).each($S.enable)}}),GC()])})},ZR=function(t,e){var n=function(t){return{dom:{tag:"th",innerHtml:e.translate(t)}}},r=function(t){return{dom:{tag:"thead"},components:[{dom:{tag:"tr"},components:j(t,n)}]}},o=function(t){return{dom:{tag:"td",innerHtml:e.translate(t)}}},i=function(t){return{dom:{tag:"tr"},components:j(t,o)}},a=function(t){return{dom:{tag:"tbody"},components:j(t,i)}};return{dom:{tag:"table",classes:["tox-dialog__table"]},components:[r(t.header),a(t.cells)],behaviours:Hc([tD.config({}),Lb.config({})])}},$R=function(t,e){var n=t.label.map(function(t){return uD(t,e)}),r=[$S.config({disabled:function(){return t.disabled||e.isDisabled()}}),GC(),fb.config({mode:"execution",useEnter:!0!==t.multiline,useControlEnter:!0===t.multiline,execute:function(t){return ci(t,dD),R.some(!0)}}),Sb("textfield-change",[xi(Lo(),function(e,n){fi(e,sD,{name:t.name})}),xi(Fo(),function(e,n){fi(e,sD,{name:t.name})})]),tD.config({})],o=t.validation.map(function(t){return YD.config({getRoot:function(t){return ji(t.element)},invalidClass:"tox-invalid",validator:{validate:function(e){var n=Zp.getValue(e),r=t.validator(n);return RD.pure(!0===r?mt.value(n):mt.error(r))},validateOnLoad:t.validateOnLoad}})}).toArray(),i=t.placeholder.fold(b({}),function(t){return{placeholder:e.translate(t)}}),a=t.inputMode.fold(b({}),function(t){return{inputmode:t}}),u=k(k({},i),a),s=$k.parts.field({tag:!0===t.multiline?"textarea":"input",inputAttributes:u,inputClasses:[t.classname],inputBehaviours:Hc(et([r,o])),selectOnFocus:!1,factory:SD}),l=t.flex?["tox-form__group--stretched"]:[],c=l.concat(t.maximized?["tox-form-group--maximize"]:[]),f=[$S.config({disabled:function(){return t.disabled||e.isDisabled()},onDisabled:function(t){$k.getField(t).each($S.disable)},onEnabled:function(t){$k.getField(t).each($S.enable)}}),GC()];return nD(n,s,c,f)},KR=function(t,e){return $R({name:t.name,multiline:!1,label:t.label,inputMode:t.inputMode,placeholder:t.placeholder,flex:!1,disabled:t.disabled,classname:"tox-textfield",validation:R.none(),maximized:t.maximized},e)},JR=function(t,e){return $R({name:t.name,multiline:!0,label:t.label,inputMode:R.none(),placeholder:t.placeholder,flex:!0,disabled:t.disabled,classname:"tox-textarea",validation:R.none(),maximized:t.maximized},e)},QR=function(t,e){var n=t.stream.streams,r=n.setup(t,e);return mi([xi(t.event,r),Oi(function(){return e.cancel()})].concat(t.cancelEvent.map(function(t){return[xi(t,function(){return e.cancel()})]}).getOr([])))},tP=Object.freeze({__proto__:null,events:QR}),eP=function(t){var e=Zn(null),n=function(){return{timer:null!==e.get()?"set":"unset"}},r=function(t){e.set(t)},o=function(){var t=e.get();null!==t&&t.cancel()};return ou({readState:n,setTimer:r,cancel:o})},nP=function(t){return t.stream.streams.state(t)},rP=Object.freeze({__proto__:null,throttle:eP,init:nP}),oP=function(t,e){var n=t.stream,r=lw(t.onStream,n.delay);return e.setTimer(r),function(t,e){r.throttle(t,e),n.stopEvent&&e.stop()}},iP=[xn("stream",sn("mode",{throttle:[bn("delay"),Bn("stopEvent",!0),Wl("streams",{setup:oP,state:eP})]})),Bn("event","input"),In("cancelEvent"),Hl("onStream")],aP=Wc({fields:iP,name:"streaming",active:tP,state:rP}),uP=function(t,e,n){var r=Zp.getValue(n);Zp.setValue(e,r),lP(e)},sP=function(t,e){var n=t.element,r=is(n),o=n.dom;"number"!==Ma(n,"type")&&e(o,r)},lP=function(t){sP(t,function(t,e){return t.setSelectionRange(e.length,e.length)})},cP=function(t,e){sP(t,function(t,n){return t.setSelectionRange(e,n.length)})},fP=function(t,e,n){if(t.selectsOver){var r=Zp.getValue(e),o=t.getDisplayText(r),i=Zp.getValue(n),a=t.getDisplayText(i);return 0===a.indexOf(o)?R.some(function(){uP(t,e,n),cP(e,o.length)}):R.none()}return R.none()},dP=b("alloy.typeahead.itemexecute"),hP=function(t,e,n,r){var o=function(e,n,o){t.previewing.set(!1);var i=QD.getCoupled(e,"sandbox");if(hp.isOpen(i))bm.getCurrent(i).each(function(t){Vm.getHighlighted(t).fold(function(){o(t)},function(){gi(i,t.element,"keydown",n)})});else{var u=function(t){bm.getCurrent(t).each(o)};aA(t,a(e),e,i,r,u,TD.HighlightFirst).get(g)}},i=bD(t),a=function(t){return function(e){return e.map(function(e){var n=Bt(e.menus),r=nt(n,function(t){return Z(t.items,function(t){return"item"===t.type})}),o=Zp.getState(t);return o.update(j(r,function(t){return t.data})),e})}},u=[Lb.config({}),Zp.config({onSetValue:t.onSetValue,store:k({mode:"dataset",getDataKey:function(t){return is(t.element)},getFallbackEntry:function(t){return{value:t,meta:{}}},setValue:function(e,n){as(e.element,t.model.getDisplayText(n))}},t.initialData.map(function(t){return le("initialValue",t)}).getOr({}))}),aP.config({stream:{mode:"throttle",delay:t.responseTime,stopEvent:!1},onStream:function(e,n){var o=QD.getCoupled(e,"sandbox"),i=Lb.isFocused(e);if(i&&is(e.element).length>=t.minChars){var u=bm.getCurrent(o).bind(function(t){return Vm.getHighlighted(t).map(Zp.getValue)});t.previewing.set(!0);var s=function(e){bm.getCurrent(o).each(function(e){u.fold(function(){t.model.selectsOver&&Vm.highlightFirst(e)},function(t){Vm.highlightBy(e,function(e){var n=Zp.getValue(e);return n.value===t.value}),Vm.getHighlighted(e).orThunk(function(){return Vm.highlightFirst(e),R.none()})})})};aA(t,a(e),e,o,r,s,TD.HighlightFirst).get(g)}},cancelEvent:qo()}),fb.config({mode:"special",onDown:function(t,e){return o(t,e,Vm.highlightFirst),R.some(!0)},onEscape:function(t){var e=QD.getCoupled(t,"sandbox");return hp.isOpen(e)?(hp.close(e),R.some(!0)):R.none()},onUp:function(t,e){return o(t,e,Vm.highlightLast),R.some(!0)},onEnter:function(e){var n=QD.getCoupled(e,"sandbox"),r=hp.isOpen(n);if(r&&!t.previewing.get())return bm.getCurrent(n).bind(function(t){return Vm.getHighlighted(t)}).map(function(t){return fi(e,dP(),{item:t}),!0});var o=Zp.getValue(e);return ci(e,qo()),t.onExecute(n,e,o),r&&hp.close(n),R.some(!0)}}),Kb.config({toggleClass:t.markers.openClass,aria:{mode:"expanded"}}),QD.config({others:{sandbox:function(e){return dA(t,e,{onOpen:function(){return Kb.on(e)},onClose:function(){return Kb.off(e)}})}}}),Sb("typeaheadevents",[Ei(function(e){var n=g;sA(t,a(e),e,r,n,TD.HighlightFirst).get(g)}),xi(dP(),function(e,n){var r=QD.getCoupled(e,"sandbox");uP(t.model,e,n.event.item),ci(e,qo()),t.onItemExecute(e,r,n.event.item,Zp.getValue(e)),hp.close(r),lP(e)})].concat(t.dismissOnBlur?[xi(Ho(),function(t){var e=QD.getCoupled(t,"sandbox");tf(e.element).isNone()&&hp.close(e)})]:[]))];return{uid:t.uid,dom:wD(qt(t,{inputAttributes:{role:"combobox","aria-autocomplete":"list","aria-haspopup":"true"}})),behaviours:k(k({},i),Jp(t.typeaheadBehaviours,u)),eventOrder:t.eventOrder}},pP=b([In("lazySink"),bn("fetch"),Bn("minChars",5),Bn("responseTime",1e3),Bl("onOpen"),Bn("getHotspot",R.some),Bn("getAnchorOverrides",b({})),Bn("layouts",R.none()),Bn("eventOrder",{}),Yn("model",{},[Bn("getDisplayText",function(t){return void 0!==t.meta&&void 0!==t.meta.text?t.meta.text:t.value}),Bn("selectsOver",!0),Bn("populateFromBrowse",!0)]),Bl("onSetValue"),Vl("onExecute"),Bl("onItemExecute"),Bn("inputClasses",[]),Bn("inputAttributes",{}),Bn("inputStyles",{}),Bn("matchWidth",!0),Bn("useMinWidth",!1),Bn("dismissOnBlur",!0),Pl(["openClass"]),In("initialData"),$p("typeaheadBehaviours",[Lb,Zp,aP,fb,Kb,QD]),qn("previewing",function(){return Zn(!0)})].concat(yD()).concat(pA())),gP=b([Ag({schema:[Rl()],name:"menu",overrides:function(t){return{fakeFocus:!0,onHighlight:function(e,n){t.previewing.get()?e.getSystem().getByUid(t.uid).each(function(r){fP(t.model,r,n).fold(function(){return Vm.dehighlight(e,n)},function(t){return t()})}):e.getSystem().getByUid(t.uid).each(function(e){t.model.populateFromBrowse&&uP(t.model,e,n)}),t.previewing.set(!1)},onExecute:function(e,n){return e.getSystem().getByUid(t.uid).toOptional().map(function(t){return fi(t,dP(),{item:n}),!0})},onHover:function(e,n){t.previewing.set(!1),e.getSystem().getByUid(t.uid).each(function(e){t.model.populateFromBrowse&&uP(t.model,e,n)})}}}})]),mP=sm({name:"Typeahead",configFields:pP(),partFields:gP(),factory:hP}),vP=function(t){var e=function(){return vP(t.toCached())},n=function(e){return vP(t.bind(function(t){return t.fold(function(t){return RD.pure(mt.error(t))},function(t){return e(t)})}))},r=function(e){return vP(t.map(function(t){return t.bind(e)}))},o=function(e){return vP(t.map(function(t){return t.map(e)}))},i=function(e){return vP(t.map(function(t){return t.mapError(e)}))},a=function(e,n){return t.map(function(t){return t.fold(e,n)})},u=function(e,n){return vP(RD.nu(function(r){var o=!1,i=setTimeout(function(){o=!0,r(mt.error(n()))},e);t.get(function(t){o||(clearTimeout(i),r(t))})}))};return k(k({},t),{toCached:e,bindFuture:n,bindResult:r,mapResult:o,mapError:i,foldResult:a,withTimeout:u})},yP=function(t){return vP(RD.nu(t))},bP=function(t){return vP(RD.pure(mt.value(t)))},xP=function(t){return vP(RD.pure(mt.error(t)))},wP=function(t){return vP(RD.pure(t))},_P=function(t){return vP(t.map(mt.value))},SP=function(t){return yP(function(e){t.then(function(t){e(mt.value(t))},function(t){e(mt.error(t))})})},CP={nu:yP,wrap:vP,pure:bP,value:bP,error:xP,fromResult:wP,fromFuture:_P,fromPromise:SP},MP={type:"separator"},TP=function(t){return{type:"menuitem",value:t.url,text:t.title,meta:{attach:t.attach},onAction:g}},kP=function(t,e){return{type:"menuitem",value:e,text:t,meta:{attach:void 0},onAction:g}},DP=function(t){return j(t,TP)},AP=function(t,e){return Z(e,function(e){return e.type===t})},IP=function(t,e){return DP(AP(t,e))},OP=function(t){return IP("header",t.targets)},LP=function(t){return IP("anchor",t.targets)},EP=function(t){return R.from(t.anchorTop).map(function(t){return kP("<top>",t)}).toArray()},NP=function(t){return R.from(t.anchorBottom).map(function(t){return kP("<bottom>",t)}).toArray()},RP=function(t){return j(t,function(t){return kP(t,t)})},PP=function(t){return K(t,function(t,e){var n=0===t.length||0===e.length;return n?t.concat(e):t.concat(MP,e)},[])},zP=function(t,e){var n=t.toLowerCase();return Z(e,function(t){var e=void 0!==t.meta&&void 0!==t.meta.text?t.meta.text:t.text;return pr(e.toLowerCase(),n)||pr(t.value.toLowerCase(),n)})},BP=function(t,e,n){var r=Zp.getValue(e),o=void 0!==r.meta.text?r.meta.text:r.value,i=n.getLinkInformation();return i.fold(function(){return[]},function(e){var r=zP(o,RP(n.getHistory(t)));return"file"===t?PP([r,zP(o,OP(e)),zP(o,et([EP(e),LP(e),NP(e)]))]):r})},VP=za("aria-invalid"),HP=function(t,e,n){var r,o=e.shared.providers,i=function(e){var r=Zp.getValue(e);n.addToHistory(r.value,t.filetype)},a=$k.parts.field({factory:mP,dismissOnBlur:!0,inputClasses:["tox-textfield"],sandboxClasses:["tox-dialog__popups"],inputAttributes:{"aria-errormessage":VP,type:"url"},minChars:0,responseTime:0,fetch:function(r){var o=BP(t.filetype,r,n),i=LN(o,s_.BUBBLE_TO_SANDBOX,e,!1);return RD.pure(i)},getHotspot:function(t){return h.getOpt(t)},onSetValue:function(t,e){t.hasConfigured(YD)&&YD.run(t).get(g)},typeaheadBehaviours:Hc(et([n.getValidationHandler().map(function(e){return YD.config({getRoot:function(t){return ji(t.element)},invalidClass:"tox-control-wrap--status-invalid",notify:{onInvalid:function(t,e){l.getOpt(t).each(function(t){Sa(t.element,"title",o.translate(e))})}},validator:{validate:function(n){var r=Zp.getValue(n);return CP.nu(function(n){e({type:t.filetype,url:r.value},function(t){if("invalid"===t.status){var e=mt.error(t.message);n(e)}else{var r=mt.value(t.message);n(r)}})})},validateOnLoad:!1}})}).toArray(),[$S.config({disabled:function(){return t.disabled||o.isDisabled()}}),tD.config({}),Sb("urlinput-events",et(["file"===t.filetype?[xi(Lo(),function(e){fi(e,sD,{name:t.name})})]:[],[xi(Eo(),function(e){fi(e,sD,{name:t.name}),i(e)}),xi(Fo(),function(e){fi(e,sD,{name:t.name}),i(e)})]]))]])),eventOrder:(r={},r[Lo()]=["streaming","urlinput-events","invalidating"],r),model:{getDisplayText:function(t){return t.value},selectsOver:!1,populateFromBrowse:!1},markers:{openClass:"tox-textfield--popup-open"},lazySink:e.shared.getSink,parts:{menu:P_(!1,1,"normal")},onExecute:function(t,e,n){fi(e,dD,{})},onItemExecute:function(e,n,r,o){i(e),fi(e,sD,{name:t.name})}}),u=t.label.map(function(t){return uD(t,o)}),s=function(t,e,n,r){return void 0===n&&(n=t),void 0===r&&(r=t),{dom:{tag:"div",classes:["tox-icon","tox-control-wrap__status-icon-"+t],innerHtml:tw(n,o.icons),attributes:k({title:o.translate(r),"aria-live":"polite"},e.fold(function(){return{}},function(t){return{id:t}}))}}},l=Jx(s("invalid",R.some(VP),"warning")),c=Jx({dom:{tag:"div",classes:["tox-control-wrap__status-icon-wrap"]},components:[l.asSpec()]}),f=n.getUrlPicker(t.filetype),d=za("browser.url.event"),h=Jx({dom:{tag:"div",classes:["tox-control-wrap"]},components:[a,c.asSpec()],behaviours:Hc([$S.config({disabled:function(){return t.disabled||o.isDisabled()}})])}),p=Jx(HN({name:t.name,icon:R.some("browse"),text:t.label.getOr(""),disabled:t.disabled,primary:!1,borderless:!0},function(t){return ci(t,d)},o,[],["tox-browse-url"])),m=function(){return{dom:{tag:"div",classes:["tox-form__controls-h-stack"]},components:et([[h.asSpec()],f.map(function(){return p.asSpec()}).toArray()])}},v=function(e){bm.getCurrent(e).each(function(n){var r=Zp.getValue(n),o=k({fieldname:t.name},r);f.each(function(r){r(o).get(function(r){Zp.setValue(n,r),fi(e,sD,{name:t.name})})})})};return $k.sketch({dom:iD(),components:u.toArray().concat([m()]),fieldBehaviours:Hc([$S.config({disabled:function(){return t.disabled||o.isDisabled()},onDisabled:function(t){$k.getField(t).each($S.disable),p.getOpt(t).each($S.disable)},onEnabled:function(t){$k.getField(t).each($S.enable),p.getOpt(t).each($S.enable)}}),GC(),Sb("url-input-events",[xi(d,v)])])})},FP=function(t,e){return Gk.sketch({dom:{tag:"div",attributes:{role:"alert"},classes:["tox-notification","tox-notification--in","tox-notification--"+t.level]},components:[{dom:{tag:"div",classes:["tox-notification__icon"]},components:[Kx.sketch({dom:{tag:"button",classes:["tox-button","tox-button--naked","tox-button--icon"],innerHtml:tw(t.icon,e.icons),attributes:{title:e.translate(t.iconTooltip)}},action:function(e){fi(e,fD,{name:"alert-banner",value:t.url})}})]},{dom:{tag:"div",classes:["tox-notification__body"],innerHtml:e.translate(t.text)}}]})},WP=function(t,e){var n=Zp.config({store:{mode:"manual",getValue:function(t){var e=t.element.dom;return e.checked},setValue:function(t,e){var n=t.element.dom;n.checked=e}}}),r=function(t){return t.element.dom.click(),R.some(!0)},o=$k.parts.field({factory:{sketch:x},dom:{tag:"input",classes:["tox-checkbox__input"],attributes:{type:"checkbox"}},behaviours:Hc([AL.self(),$S.config({disabled:function(){return t.disabled||e.isDisabled()}}),tD.config({}),Lb.config({}),n,fb.config({mode:"special",onEnter:r,onSpace:r,stopSpaceKeyup:!0}),Sb("checkbox-events",[xi(Eo(),function(e,n){fi(e,sD,{name:t.name})})])])}),i=$k.parts.label({dom:{tag:"span",classes:["tox-checkbox__label"],innerHtml:e.translate(t.label)},behaviours:Hc([_A.config({})])}),a=function(t){var n="checked"===t?"selected":"unselected";return{dom:{tag:"span",classes:["tox-icon","tox-checkbox-icon__"+t],innerHtml:tw(n,e.icons)}}},u=Jx({dom:{tag:"div",classes:["tox-checkbox__icons"]},components:[a("checked"),a("unchecked")]});return $k.sketch({dom:{tag:"label",classes:["tox-checkbox"]},components:[o,u.asSpec(),i],fieldBehaviours:Hc([$S.config({disabled:function(){return t.disabled||e.isDisabled()},disableClass:"tox-checkbox--disabled",onDisabled:function(t){$k.getField(t).each($S.disable)},onEnabled:function(t){$k.getField(t).each($S.enable)}}),GC()])})},UP=function(t){return"presentation"===t.presets?Gk.sketch({dom:{tag:"div",classes:["tox-form__group"],innerHtml:t.html}}):Gk.sketch({dom:{tag:"div",classes:["tox-form__group"],innerHtml:t.html,attributes:{role:"document"}},containerBehaviours:Hc([tD.config({}),Lb.config({})])})},GP=function(t){return function(e,n,r){return Vt(n,"name").fold(function(){return t(n,r)},function(o){return e.field(o,t(n,r))})}},jP=function(t){return function(e,n,r){var o=qt(n,{source:"dynamic"});return GP(t)(e,o,r)}},XP={bar:GP(function(t,e){return Xk(t,e.shared)}),collection:GP(function(t,e){return vD(t,e.shared.providers)}),alertbanner:GP(function(t,e){return FP(t,e.shared.providers)}),input:GP(function(t,e){return KR(t,e.shared.providers)}),textarea:GP(function(t,e){return JR(t,e.shared.providers)}),label:GP(function(t,e){return VR(t,e.shared)}),iframe:jP(function(t,e){return iE(t,e.shared.providers)}),button:GP(function(t,e){return jN(t,e.shared.providers)}),checkbox:GP(function(t,e){return WP(t,e.shared.providers)}),colorinput:GP(function(t,e){return kA(t,e.shared,e.colorinput)}),colorpicker:GP(EL),dropzone:GP(function(t,e){return qL(t,e.shared.providers)}),grid:GP(function(t,e){return ZL(t,e.shared)}),listbox:GP(function(t,e){return GR(t,e)}),selectbox:GP(function(t,e){return qR(t,e.shared.providers)}),sizeinput:GP(function(t,e){return oR(t,e.shared.providers)}),urlinput:GP(function(t,e){return HP(t,e,e.urlinput)}),customeditor:GP(PL),htmlpanel:GP(UP),imagetools:GP(function(t,e){return BR(t,e.shared.providers)}),table:GP(function(t,e){return ZR(t,e.shared.providers)}),panel:GP(function(t,e){return jR(t,e)})},YP={field:function(t,e){return e}},qP=function(t,e,n){var r=qt(n,{shared:{interpreter:function(e){return ZP(t,e,r)}}});return ZP(t,e,r)},ZP=function(t,e,n){return Vt(XP,e.type).fold(function(){return console.error('Unknown factory type "'+e.type+'", defaulting to container: ',e),e},function(r){return r(t,e,n)})},$P=function(t,e){var n=YP;return ZP(n,t,e)},KP={valignCentre:[],alignCentre:[],alignLeft:[],alignRight:[],right:[],left:[],bottom:[],top:[]},JP=function(t,e,n){var r=Rf(-12,12,KP),o={maxHeightFunction:If()},i=function(){return{anchor:"node",root:na(t()),node:R.from(t()),bubble:r,layouts:{onRtl:function(){return[Xx]},onLtr:function(){return[jx]}},overrides:o}},a=function(){return{anchor:"hotspot",hotspot:e(),bubble:r,layouts:{onRtl:function(){return[gc]},onLtr:function(){return[mc]}},overrides:o}};return function(){return n()?i():a()}},QP=function(t,e,n){var r=function(){return{anchor:"node",root:na(t()),node:R.from(t()),layouts:{onRtl:function(){return[Yx]},onLtr:function(){return[Yx]}}}},o=function(){return{anchor:"hotspot",hotspot:e(),layouts:{onRtl:function(){return[xc]},onLtr:function(){return[xc]}}}};return function(){return n()?r():o()}},tz=function(t,e){return function(){return{anchor:"selection",root:e(),getSelection:function(){var e=t.selection.getRng();return R.some(Dd.range(er.fromDom(e.startContainer),e.startOffset,er.fromDom(e.endContainer),e.endOffset))}}}},ez=function(t){return function(e){return{anchor:"node",root:t(),node:e}}},nz=function(t,e,n){var r=MC(t),o=function(){return er.fromDom(t.getBody())},i=function(){return er.fromDom(t.getContentAreaContainer())},a=function(){return r||!n()};return{inlineDialog:JP(i,e,a),banner:QP(i,e,a),cursor:tz(t,o),node:ez(o)}},rz=function(t){return function(e,n){var r=IT(t);r(e,n)}},oz=function(t){return function(){return dT(t)}},iz=function(t){return function(){return pT(t)}},az=function(t){return function(){return _T(t)}},uz=function(t){return{colorPicker:rz(t),hasCustomColors:oz(t),getColors:iz(t),getColorCols:az(t)}},sz=function(t){return function(){return AC(t)}},lz=function(t){return{isDraggableModal:sz(t)}},cz=function(t){var e=Zn(xC(t)?"bottom":"top");return{isPositionedAtTop:function(){return"top"===e.get()},getDockingMode:e.get,setDockingMode:e.set}},fz=[{title:"Headings",items:[{title:"Heading 1",format:"h1"},{title:"Heading 2",format:"h2"},{title:"Heading 3",format:"h3"},{title:"Heading 4",format:"h4"},{title:"Heading 5",format:"h5"},{title:"Heading 6",format:"h6"}]},{title:"Inline",items:[{title:"Bold",format:"bold"},{title:"Italic",format:"italic"},{title:"Underline",format:"underline"},{title:"Strikethrough",format:"strikethrough"},{title:"Superscript",format:"superscript"},{title:"Subscript",format:"subscript"},{title:"Code",format:"code"}]},{title:"Blocks",items:[{title:"Paragraph",format:"p"},{title:"Blockquote",format:"blockquote"},{title:"Div",format:"div"},{title:"Pre",format:"pre"}]},{title:"Align",items:[{title:"Left",format:"alignleft"},{title:"Center",format:"aligncenter"},{title:"Right",format:"alignright"},{title:"Justify",format:"alignjustify"}]}],dz=function(t){return Ht(t,"items")},hz=function(t){return Ht(t,"block")},pz=function(t){return Ht(t,"inline")},gz=function(t){return Ht(t,"selector")},mz=function(t){return K(t,function(t,e){if(dz(e)){var n=mz(e.items);return{customFormats:t.customFormats.concat(n.customFormats),formats:t.formats.concat([{title:e.title,items:n.formats}])}}if(pz(e)||hz(e)||gz(e)){var r=i(e.name)?e.name:e.title.toLowerCase(),o="custom-"+r;return{customFormats:t.customFormats.concat([{name:o,format:e}]),formats:t.formats.concat([{title:e.title,format:o,icon:e.icon}])}}return k(k({},t),{formats:t.formats.concat(e)})},{customFormats:[],formats:[]})},vz=function(t,e){var n=mz(e),r=function(e){X(e,function(e){t.formatter.has(e.name)||t.formatter.register(e.name,e.format)})};return t.formatter?r(n.customFormats):t.on("init",function(){r(n.customFormats)}),n.formats},yz=function(t){return uC(t).map(function(e){var n=vz(t,e);return sC(t)?fz.concat(n):n}).getOr(fz)},bz=function(t,e,n){var r={type:"formatter",isSelected:e(t.format),getStylePreview:n(t.format)};return qt(t,r)},xz=function(t,e,n,r){var o=function(t){return bz(t,n,r)},a=function(t){var e={type:"submenu"};return qt(t,e)},u=function(e){var o=i(e.name)?e.name:za(e.title),a="custom-"+o,u={type:"formatter",format:a,isSelected:n(a),getStylePreview:r(a)},s=qt(e,u);return t.formatter.register(o,s),s},s=function(t){return j(t,function(t){var e=Dt(t);if(Ft(t,"items")){var n=s(t.items);return qt(a(t),{getStyleItems:function(){return n}})}return Ft(t,"format")?o(t):1===e.length&&F(e,"title")?qt(t,{type:"separator"}):u(t)})};return s(e)},wz=function(t){var e=function(e){return function(){return t.formatter.match(e)}},n=function(e){return function(){var n=t.formatter.get(e);return void 0!==n?R.some({tag:n.length>0&&(n[0].inline||n[0].block)||"div",styles:t.dom.parseStyle(t.formatter.getCssText(e))}):R.none()}},r=function(t){var e=t.items;return void 0!==e&&e.length>0?nt(e,r):[t.format]},o=Zn([]),i=Zn([]),a=Zn([]),u=Zn([]),s=Zn(!1);t.on("PreInit",function(a){var u=yz(t),s=xz(t,u,e,n);o.set(s),i.set(nt(s,r))}),t.on("addStyleModifications",function(o){var i=xz(t,o.items,e,n);a.set(i),s.set(o.replace),u.set(nt(i,r))});var l=function(){var t=s.get()?[]:o.get(),e=a.get();return t.concat(e)},c=function(){var t=s.get()?[]:i.get(),e=u.get();return t.concat(e)};return{getData:l,getFlattenedKeys:c}},_z=function(t){return f(t)&&1===t.nodeType},Sz=zL.trim,Cz=function(t){return function(e){if(_z(e)){if(e.contentEditable===t)return!0;if(e.getAttribute("data-mce-contenteditable")===t)return!0}return!1}},Mz=Cz("true"),Tz=Cz("false"),kz=function(t,e,n,r,o){return{type:t,title:e,url:n,level:r,attach:o}},Dz=function(t){while(t=t.parentNode){var e=t.contentEditable;if(e&&"inherit"!==e)return Mz(t)}return!1},Az=function(t,e){return j(Kd(er.fromDom(e),t),function(t){return t.dom})},Iz=function(t){return t.innerText||t.textContent},Oz=function(t){return t.id?t.id:za("h")},Lz=function(t){return t&&"A"===t.nodeName&&void 0!==(t.id||t.name)},Ez=function(t){return Lz(t)&&Rz(t)},Nz=function(t){return t&&/^(H[1-6])$/.test(t.nodeName)},Rz=function(t){return Dz(t)&&!Tz(t)},Pz=function(t){return Nz(t)&&Rz(t)},zz=function(t){return Nz(t)?parseInt(t.nodeName.substr(1),10):0},Bz=function(t){var e=Oz(t),n=function(){t.id=e};return kz("header",Iz(t),"#"+e,zz(t),n)},Vz=function(t){var e=t.id||t.name,n=Iz(t);return kz("anchor",n||"#"+e,"#"+e,0,g)},Hz=function(t){return j(Z(t,Pz),Bz)},Fz=function(t){return j(Z(t,Ez),Vz)},Wz=function(t){var e=Az("h1,h2,h3,h4,h5,h6,a:not([href])",t);return e},Uz=function(t){return Sz(t.title).length>0},Gz=function(t){var e=Wz(t);return Z(Hz(e).concat(Fz(e)),Uz)},jz={find:Gz},Xz="tinymce-url-history",Yz=5,qz=function(t){return i(t)&&/^https?/.test(t)},Zz=function(t){return u(t)&&t.length<=Yz&&rt(t,qz)},$z=function(t){return a(t)&&zt(t,function(t){return!Zz(t)}).isNone()},Kz=function(){var t,e=rT.getItem(Xz);if(null===e)return{};try{t=JSON.parse(e)}catch(n){if(n instanceof SyntaxError)return console.log("Local storage "+Xz+" was not valid JSON",n),{};throw n}return $z(t)?t:(console.log("Local storage "+Xz+" was not valid format",t),{})},Jz=function(t){if(!$z(t))throw new Error("Bad format for history:\n"+JSON.stringify(t));rT.setItem(Xz,JSON.stringify(t))},Qz=function(t){var e=Kz();return Object.prototype.hasOwnProperty.call(e,t)?e[t]:[]},tB=function(t,e){if(qz(t)){var n=Kz(),r=Object.prototype.hasOwnProperty.call(n,e)?n[e]:[],o=Z(r,function(e){return e!==t});n[e]=[t].concat(o).slice(0,Yz),Jz(n)}},eB=function(t){return!!t},nB=function(t){return Ot(zL.makeMap(t,/[, ]/),eB)},rB=function(t){return R.from(EC(t)).filter(d)},oB=function(t){var e=R.some(NC(t)).filter(eB),n=R.some(RC(t)).filter(eB),r=e.or(n).map(nB);return rB(t).fold(C,function(t){return r.fold(M,function(t){return Dt(t).length>0&&t})})},iB=function(t,e){var n=oB(t);return s(n)?n?rB(t):R.none():n[e]?rB(t):R.none()},aB=function(t,e){return iB(t,e).map(function(n){return function(r){return RD.nu(function(o){var u=function(t,e){if(!i(t))throw new Error("Expected value to be string");if(void 0!==e&&!a(e))throw new Error("Expected meta to be a object");var n={value:t,meta:e};o(n)},s=k({filetype:e,fieldname:r.fieldname},R.from(r.meta).getOr({}));n.call(t,u,r.value,s)})}})},uB=function(t){return R.from(t).filter(i).getOrUndefined()},sB=function(t){return PC(t)?R.none():R.some({targets:jz.find(t.getBody()),anchorTop:uB(zC(t)),anchorBottom:uB(BC(t))})},lB=function(t){return R.from(VC(t))},cB=function(t){return{getHistory:Qz,addToHistory:tB,getLinkInformation:function(){return sB(t)},getValidationHandler:function(){return lB(t)},getUrlPicker:function(e){return aB(t,e)}}},fB=function(t,e,n){var r=Zn(!1),o=cz(e),i={shared:{providers:{icons:function(){return e.ui.registry.getAll().icons},menuItems:function(){return e.ui.registry.getAll().menuItems},translate:OS.translate,isDisabled:function(){return e.mode.isReadOnly()||e.ui.isDisabled()},getSetting:e.getParam.bind(e)},interpreter:function(t){return $P(t,i)},anchors:nz(e,n,o.isPositionedAtTop),header:o,getSink:function(){return mt.value(t)}},urlinput:cB(e),styleselect:wz(e),colorinput:uz(e),dialog:lz(e),isContextMenuOpen:function(){return r.get()},setContextMenuState:function(t){return r.set(t)}};return i},dB=b(function(t,e){Ps(t,Math.floor(e))}),hB="contexttoolbar-show",pB="contexttoolbar-hide",gB=b([bn("dom"),Bn("shell",!0),$p("toolbarBehaviours",[wb])]),mB=function(){return{behaviours:Hc([wb.config({})])}},vB=b([Ig({name:"groups",overrides:mB})]),yB=function(t,e,n,r){var o=function(t,e){i(t).fold(function(){throw console.error("Toolbar was defined to not be a shell, but no groups container was specified in components"),new Error("Toolbar was defined to not be a shell, but no groups container was specified in components")},function(t){wb.set(t,e)})},i=function(e){return t.shell?R.some(e):Ug(e,t,"groups")},a=t.shell?{behaviours:[wb.config({})],components:[]}:{behaviours:[],components:e};return{uid:t.uid,dom:t.dom,components:a.components,behaviours:Jp(t.toolbarBehaviours,a.behaviours),apis:{setGroups:o},domModification:{attributes:{role:"group"}}}},bB=sm({name:"Toolbar",configFields:gB(),partFields:vB(),factory:yB,apis:{setGroups:function(t,e,n){t.setGroups(e,n)}}}),xB=function(t,e){var n={len:0,list:[]},r=K(t,function(t,n){var r=e(n,t.len);return r.fold(b(t),function(e){return{len:e.finish,list:t.list.concat([e])}})},n);return r.list},wB=function(t,e,n){return{within:t,extra:e,withinWidth:n}},_B=function(t,e,n){var r=xB(t,function(t,e){var r=n(t);return R.some({element:t,start:e,finish:e+r,width:r})}),o=Z(r,function(t){return t.finish<=e}),i=$(o,function(t,e){return t+e.width},0),a=r.slice(o.length);return{within:o,extra:a,withinWidth:i}},SB=function(t){return j(t,function(t){return t.element})},CB=function(t,e,n){var r=SB(t.concat(e));return wB(r,[],n)},MB=function(t,e,n,r){var o=SB(t).concat([n]);return wB(o,SB(e),r)},TB=function(t,e,n){return wB(SB(t),[],n)},kB=function(t,e,n){var r=_B(e,t,n);return 0===r.extra.length?R.some(r):R.none()},DB=function(t,e,n,r){var o=kB(t,e,n).getOrThunk(function(){return _B(e,t-n(r),n)}),i=o.within,a=o.extra,u=o.withinWidth;return 1===a.length&&a[0].width<=n(r)?CB(i,a,u):a.length>=1?MB(i,a,r,u):TB(i,a,u)},AB=function(t,e){var n=j(e,function(t){return xs(t)});bB.setGroups(t,n)},IB=function(t){return dt(t,function(t){return tf(t.element).bind(function(e){return t.getSystem().getByDom(e).toOptional()})})},OB=function(t,e,n){var r=Gg(t,e,"primary"),o=QD.getCoupled(t,"overflowGroup");Zu(r.element,"visibility","hidden");var i=e.builtGroups.get().concat([o]),a=IB(i);n([]),AB(r,i);var u=Ns(r.element),s=DB(u,e.builtGroups.get(),function(t){return Ns(t.element)},o);0===s.extra.length?(wb.remove(r,o),n([])):(AB(r,s.within),n(s.extra)),rs(r.element,"visibility"),os(r.element),a.each(Lb.focus)},LB=b([$p("splitToolbarBehaviours",[QD]),qn("builtGroups",function(){return Zn([])})]),EB=b([Pl(["overflowToggledClass"]),Nn("getOverflowBounds"),bn("lazySink"),qn("overflowGroups",function(){return Zn([])})].concat(LB())),NB=b([Dg({factory:bB,schema:gB(),name:"primary"}),Ag({schema:gB(),name:"overflow"}),Ag({name:"overflow-button"}),Ag({name:"overflow-group"})]),RB=b([Pl(["toggledClass"]),bn("lazySink"),Mn("fetch"),Nn("getBounds"),Pn("fireDismissalEventInstead",[Bn("event",ni())]),Uf()]),PB=b([Ag({name:"button",overrides:function(t){return{dom:{attributes:{"aria-haspopup":"true"}},buttonBehaviours:Hc([Kb.config({toggleClass:t.markers.toggledClass,aria:{mode:"expanded"},toggleOnExecute:!1})])}}}),Ag({factory:bB,schema:gB(),name:"toolbar",overrides:function(t){return{toolbarBehaviours:Hc([fb.config({mode:"cyclic",onEscape:function(e){return Ug(e,t,"button").each(Lb.focus),R.none()}})])}}})]),zB=function(t,e){var n=QD.getCoupled(t,"toolbarSandbox");hp.isOpen(n)?hp.close(n):hp.open(n,e.toolbar())},BB=function(t,e,n,r){var o=n.getBounds.map(function(t){return t()}),i=n.lazySink(t).getOrDie();Eh.positionWithinBounds(i,{anchor:"hotspot",hotspot:t,layouts:r,overrides:{maxWidthFunction:dB()}},e,o)},VB=function(t,e,n,r,o){bB.setGroups(e,o),BB(t,e,n,r),Kb.on(t)},HB=function(t,e,n){var r=vl(),o=function(o,i){n.fetch().get(function(o){VB(t,i,n,e.layouts,o),r.link(t.element),fb.focusIn(i)})},i=function(){Kb.off(t),Lb.focus(t),r.unlink(t.element)};return{dom:{tag:"div",attributes:{id:r.id}},behaviours:Hc([fb.config({mode:"special",onEscape:function(t){return hp.close(t),R.some(!0)}}),hp.config({onOpen:o,onClose:i,isPartOf:function(e,n,r){return bl(n,r)||bl(t,r)},getAttachPoint:function(){return n.lazySink(t).getOrDie()}}),Xc.config({channels:k(k({},yp(k({isExtraPart:C},n.fireDismissalEventInstead.map(function(t){return{fireEventInstead:{event:t.event}}}).getOr({})))),xp({doReposition:function(){hp.getState(QD.getCoupled(t,"toolbarSandbox")).each(function(r){BB(t,r,n,e.layouts)})}}))})])}},FB=function(t,e,n,r){return k(k({},Kx.sketch(k(k({},r.button()),{action:function(t){zB(t,r)},buttonBehaviours:Qp.augment({dump:r.button().buttonBehaviours},[QD.config({others:{toolbarSandbox:function(e){return HB(e,n,t)}}})])}))),{apis:{setGroups:function(e,r){hp.getState(QD.getCoupled(e,"toolbarSandbox")).each(function(o){VB(e,o,t,n.layouts,r)})},reposition:function(e){hp.getState(QD.getCoupled(e,"toolbarSandbox")).each(function(r){BB(e,r,t,n.layouts)})},toggle:function(t){zB(t,r)},getToolbar:function(t){return hp.getState(QD.getCoupled(t,"toolbarSandbox"))},isOpen:function(t){return hp.isOpen(QD.getCoupled(t,"toolbarSandbox"))}}})},WB=sm({name:"FloatingToolbarButton",factory:FB,configFields:RB(),partFields:PB(),apis:{setGroups:function(t,e,n){t.setGroups(e,n)},reposition:function(t,e){t.reposition(e)},toggle:function(t,e){t.toggle(e)},getToolbar:function(t,e){return t.getToolbar(e)},isOpen:function(t,e){return t.isOpen(e)}}}),UB=b([bn("items"),Pl(["itemSelector"]),$p("tgroupBehaviours",[fb])]),GB=b([Og({name:"items",unit:"item"})]),jB=function(t,e,n,r){return{uid:t.uid,dom:t.dom,components:e,behaviours:Jp(t.tgroupBehaviours,[fb.config({mode:"flow",selector:t.markers.itemSelector})]),domModification:{attributes:{role:"toolbar"}}}},XB=sm({name:"ToolbarGroup",configFields:UB(),partFields:GB(),factory:jB}),YB=function(t){return j(t,function(t){return xs(t)})},qB=function(t,e,n){OB(t,n,function(r){n.overflowGroups.set(r),e.getOpt(t).each(function(t){WB.setGroups(t,YB(r))})})},ZB=function(t,e,n,r){var o=Jx(WB.sketch({fetch:function(){return RD.nu(function(e){e(YB(t.overflowGroups.get()))})},layouts:{onLtr:function(){return[mc,gc]},onRtl:function(){return[gc,mc]},onBottomLtr:function(){return[yc,vc]},onBottomRtl:function(){return[vc,yc]}},getBounds:n.getOverflowBounds,lazySink:t.lazySink,fireDismissalEventInstead:{},markers:{toggledClass:t.markers.overflowToggledClass},parts:{button:r["overflow-button"](),toolbar:r.overflow()}}));return{uid:t.uid,dom:t.dom,components:e,behaviours:Jp(t.splitToolbarBehaviours,[QD.config({others:{overflowGroup:function(){return XB.sketch(k(k({},r["overflow-group"]()),{items:[o.asSpec()]}))}}})]),apis:{setGroups:function(e,n){t.builtGroups.set(j(n,e.getSystem().build)),qB(e,o,t)},refresh:function(e){return qB(e,o,t)},toggle:function(t){o.getOpt(t).each(function(t){WB.toggle(t)})},isOpen:function(t){return o.getOpt(t).map(WB.isOpen).getOr(!1)},reposition:function(t){o.getOpt(t).each(function(t){WB.reposition(t)})},getOverflow:function(t){return o.getOpt(t).bind(WB.getToolbar)}},domModification:{attributes:{role:"group"}}}},$B=sm({name:"SplitFloatingToolbar",configFields:EB(),partFields:NB(),factory:ZB,apis:{setGroups:function(t,e,n){t.setGroups(e,n)},refresh:function(t,e){t.refresh(e)},reposition:function(t,e){t.reposition(e)},toggle:function(t,e){t.toggle(e)},isOpen:function(t,e){return t.isOpen(e)},getOverflow:function(t,e){return t.getOverflow(e)}}}),KB=function(t,e){return e.getAnimationRoot.fold(function(){return t.element},function(e){return e(t)})},JB=function(t){return t.dimension.property},QB=function(t,e){return t.dimension.getDimension(e)},tV=function(t,e){var n=KB(t,e);Wu(n,[e.shrinkingClass,e.growingClass])},eV=function(t,e){Vu(t.element,e.openClass),zu(t.element,e.closedClass),Zu(t.element,JB(e),"0px"),os(t.element)},nV=function(t,e){Vu(t.element,e.closedClass),zu(t.element,e.openClass),rs(t.element,JB(e))},rV=function(t,e,n,r){n.setCollapsed(),Zu(t.element,JB(e),QB(e,t.element)),os(t.element),tV(t,e),eV(t,e),e.onStartShrink(t),e.onShrunk(t)},oV=function(t,e,n,r){var o=r.getOrThunk(function(){return QB(e,t.element)});n.setCollapsed(),Zu(t.element,JB(e),o),os(t.element);var i=KB(t,e);Vu(i,e.growingClass),zu(i,e.shrinkingClass),eV(t,e),e.onStartShrink(t)},iV=function(t,e,n){var r=QB(e,t.element),o="0px"===r?rV:oV;o(t,e,n,R.some(r))},aV=function(t,e,n){var r=KB(t,e),o=Hu(r,e.shrinkingClass),i=QB(e,t.element);nV(t,e);var a=QB(e,t.element),u=function(){Zu(t.element,JB(e),i),os(t.element)},s=function(){eV(t,e)},l=o?u:s;l(),Vu(r,e.shrinkingClass),zu(r,e.growingClass),nV(t,e),Zu(t.element,JB(e),a),n.setExpanded(),e.onStartGrow(t)},uV=function(t,e,n){if(n.isExpanded()){rs(t.element,JB(e));var r=QB(e,t.element);Zu(t.element,JB(e),r)}},sV=function(t,e,n){n.isExpanded()||aV(t,e,n)},lV=function(t,e,n){n.isExpanded()&&iV(t,e,n)},cV=function(t,e,n){n.isExpanded()&&rV(t,e,n,R.none())},fV=function(t,e,n){return n.isExpanded()},dV=function(t,e,n){return n.isCollapsed()},hV=function(t,e,n){var r=KB(t,e);return!0===Hu(r,e.growingClass)},pV=function(t,e,n){var r=KB(t,e);return!0===Hu(r,e.shrinkingClass)},gV=function(t,e,n){return hV(t,e)||pV(t,e)},mV=function(t,e,n){var r=n.isExpanded()?iV:aV;r(t,e,n)},vV=Object.freeze({__proto__:null,refresh:uV,grow:sV,shrink:lV,immediateShrink:cV,hasGrown:fV,hasShrunk:dV,isGrowing:hV,isShrinking:pV,isTransitioning:gV,toggleGrow:mV,disableTransitions:tV}),yV=function(t,e,n){var r=e.expanded;return lu(r?{classes:[e.openClass],styles:{}}:{classes:[e.closedClass],styles:le(e.dimension.property,"0px")})},bV=function(t,e){return mi([Ai(Ro(),function(n,r){var o=r.event.raw;if(o.propertyName===t.dimension.property){tV(n,t),e.isExpanded()&&rs(n.element,t.dimension.property);var i=e.isExpanded()?t.onGrown:t.onShrunk;i(n)}})])},xV=Object.freeze({__proto__:null,exhibit:yV,events:bV}),wV=[bn("closedClass"),bn("openClass"),bn("shrinkingClass"),bn("growingClass"),In("getAnimationRoot"),Bl("onShrunk"),Bl("onStartShrink"),Bl("onGrown"),Bl("onStartGrow"),Bn("expanded",!1),xn("dimension",sn("property",{width:[Wl("property","width"),Wl("getDimension",function(t){return Ns(t)+"px"})],height:[Wl("property","height"),Wl("getDimension",function(t){return Ss(t)+"px"})]}))],_V=function(t){var e=Zn(t.expanded),n=function(){return"expanded: "+e.get()};return ou({isExpanded:function(){return!0===e.get()},isCollapsed:function(){return!1===e.get()},setCollapsed:w(e.set,!1),setExpanded:w(e.set,!0),readState:n})},SV=Object.freeze({__proto__:null,init:_V}),CV=Wc({fields:wV,name:"sliding",active:xV,apis:vV,state:SV}),MV=b([Pl(["closedClass","openClass","shrinkingClass","growingClass","overflowToggledClass"]),Bl("onOpened"),Bl("onClosed")].concat(LB())),TV=b([Dg({factory:bB,schema:gB(),name:"primary"}),Dg({factory:bB,schema:gB(),name:"overflow",overrides:function(t){return{toolbarBehaviours:Hc([CV.config({dimension:{property:"height"},closedClass:t.markers.closedClass,openClass:t.markers.openClass,shrinkingClass:t.markers.shrinkingClass,growingClass:t.markers.growingClass,onShrunk:function(e){Ug(e,t,"overflow-button").each(function(t){Kb.off(t),Lb.focus(t)}),t.onClosed(e)},onGrown:function(e){fb.focusIn(e),t.onOpened(e)},onStartGrow:function(e){Ug(e,t,"overflow-button").each(Kb.on)}}),fb.config({mode:"acyclic",onEscape:function(e){return Ug(e,t,"overflow-button").each(Lb.focus),R.some(!0)}})])}}}),Ag({name:"overflow-button",overrides:function(t){return{buttonBehaviours:Hc([Kb.config({toggleClass:t.markers.overflowToggledClass,aria:{mode:"pressed"},toggleOnExecute:!1})])}}}),Ag({name:"overflow-group"})]),kV=function(t,e){return Ug(t,e,"overflow").map(CV.hasGrown).getOr(!1)},DV=function(t,e){Ug(t,e,"overflow-button").bind(function(){return Ug(t,e,"overflow")}).each(function(n){AV(t,e),CV.toggleGrow(n)})},AV=function(t,e){Ug(t,e,"overflow").each(function(n){OB(t,e,function(t){var e=j(t,function(t){return xs(t)});bB.setGroups(n,e)}),Ug(t,e,"overflow-button").each(function(t){CV.hasGrown(n)&&Kb.on(t)}),CV.refresh(n)})},IV=function(t,e,n,r){var o="alloy.toolbar.toggle",i=function(e,n){var r=j(n,e.getSystem().build);t.builtGroups.set(r)};return{uid:t.uid,dom:t.dom,components:e,behaviours:Jp(t.splitToolbarBehaviours,[QD.config({others:{overflowGroup:function(t){return XB.sketch(k(k({},r["overflow-group"]()),{items:[Kx.sketch(k(k({},r["overflow-button"]()),{action:function(e){ci(t,o)}}))]}))}}}),Sb("toolbar-toggle-events",[xi(o,function(e){DV(e,t)})])]),apis:{setGroups:function(e,n){i(e,n),AV(e,t)},refresh:function(e){return AV(e,t)},toggle:function(e){return DV(e,t)},isOpen:function(e){return kV(e,t)}},domModification:{attributes:{role:"group"}}}},OV=sm({name:"SplitSlidingToolbar",configFields:MV(),partFields:TV(),factory:IV,apis:{setGroups:function(t,e,n){t.setGroups(e,n)},refresh:function(t,e){t.refresh(e)},toggle:function(t,e){t.toggle(e)},isOpen:function(t,e){return t.isOpen(e)}}}),LV=b(za("toolbar-height-change")),EV=function(t){var e=t.title.fold(function(){return{}},function(t){return{attributes:{title:t}}});return{dom:k({tag:"div",classes:["tox-toolbar__group"]},e),components:[XB.parts.items({})],items:t.items,markers:{itemSelector:"*:not(.tox-split-button) > .tox-tbtn:not([disabled]), .tox-split-button:not([disabled]), .tox-toolbar-nav-js:not([disabled])"},tgroupBehaviours:Hc([tD.config({}),Lb.config({})])}},NV=function(t){return XB.sketch(EV(t))},RV=function(t,e){var n=Ii(function(e){var n=j(t.initGroups,NV);bB.setGroups(e,n)});return Hc([ZC.toolbarButton(t.providers.isDisabled),GC(),fb.config({mode:e,onEscape:t.onEscape,selector:".tox-toolbar__group"}),Sb("toolbar-events",[n])])},PV=function(t){var e=t.cyclicKeying?"cyclic":"acyclic";return{uid:t.uid,dom:{tag:"div",classes:["tox-toolbar-overlord"]},parts:{"overflow-group":EV({title:R.none(),items:[]}),"overflow-button":zN({name:"more",icon:R.some("more-drawer"),disabled:!1,tooltip:R.some("More..."),primary:!1,borderless:!1},R.none(),t.providers)},splitToolbarBehaviours:RV(t,e)}},zV=function(t){var e=PV(t),n=4,r=$B.parts.primary({dom:{tag:"div",classes:["tox-toolbar__primary"]}});return $B.sketch(k(k({},e),{lazySink:t.getSink,getOverflowBounds:function(){var e=t.moreDrawerData.lazyHeader().element,r=il(e),o=Ui(e),i=il(o),a=Math.max(o.dom.scrollHeight,i.height);return rl(r.x+n,i.y,r.width-2*n,a)},parts:k(k({},e.parts),{overflow:{dom:{tag:"div",classes:["tox-toolbar__overflow"],attributes:t.attributes}}}),components:[r],markers:{overflowToggledClass:"tox-tbtn--enabled"}}))},BV=function(t){var e=OV.parts.primary({dom:{tag:"div",classes:["tox-toolbar__primary"]}}),n=OV.parts.overflow({dom:{tag:"div",classes:["tox-toolbar__overflow"]}}),r=PV(t);return OV.sketch(k(k({},r),{components:[e,n],markers:{openClass:"tox-toolbar__overflow--open",closedClass:"tox-toolbar__overflow--closed",growingClass:"tox-toolbar__overflow--growing",shrinkingClass:"tox-toolbar__overflow--shrinking",overflowToggledClass:"tox-tbtn--enabled"},onOpened:function(t){t.getSystem().broadcastOn([LV()],{type:"opened"})},onClosed:function(t){t.getSystem().broadcastOn([LV()],{type:"closed"})}}))},VV=function(t){var e=t.cyclicKeying?"cyclic":"acyclic";return bB.sketch({uid:t.uid,dom:{tag:"div",classes:["tox-toolbar"].concat(t.type===u_.scrolling?["tox-toolbar--scrolling"]:[])},components:[bB.parts.groups({})],toolbarBehaviours:RV(t,e)})},HV=Be([_n("type"),xn("items",He([$e([_n("name"),An("items",hn)]),hn]))].concat(Uw)),FV=function(t){return nn("GroupToolbarButton",HV,t)},WV=[En("text"),En("tooltip"),En("icon"),Mn("fetch"),Gn("onSetup",function(){return g})],UV=Be(A([_n("type")],WV)),GV=function(t){return nn("menubutton",UV,t)},jV=Be([_n("type"),En("tooltip"),En("icon"),En("text"),Nn("select"),Mn("fetch"),Gn("onSetup",function(){return g}),Wn("presets","normal",["normal","color","listpreview"]),Bn("columns",1),Mn("onAction"),Mn("onItemAction")]),XV=function(t){return nn("SplitButton",jV,t)},YV=function(t,e){var n=function(n,r){t.updateState.each(function(t){var o=t(n,r);e.set(o)}),t.renderComponents.each(function(t){var o=t(r,e.get()),i=j(o,n.getSystem().build);Bh(n,i)})};return mi([xi(Wo(),function(e,r){var o=r;if(!o.universal){var i=t.channel;F(o.channels,i)&&n(e,o.data)}}),Ii(function(e,r){t.initialData.each(function(t){n(e,t)})})])},qV=Object.freeze({__proto__:null,events:YV}),ZV=function(t,e,n){return n},$V=Object.freeze({__proto__:null,getState:ZV}),KV=[bn("channel"),In("renderComponents"),In("updateState"),In("initialData")],JV=function(){var t=Zn(R.none()),e=function(e){return t.set(e)},n=function(){return t.set(R.none())},r=function(){return t.get()},o=function(){return t.get().fold(function(){return"none"},function(t){return t})};return{readState:o,get:r,set:e,clear:n}},QV=Object.freeze({__proto__:null,init:JV}),tH=Wc({fields:KV,name:"reflecting",active:qV,apis:$V,state:QV}),eH=b([bn("toggleClass"),bn("fetch"),Hl("onExecute"),Bn("getHotspot",R.some),Bn("getAnchorOverrides",b({})),Uf(),Hl("onItemExecute"),In("lazySink"),bn("dom"),Bl("onOpen"),$p("splitDropdownBehaviours",[QD,fb,Lb]),Bn("matchWidth",!1),Bn("useMinWidth",!1),Bn("eventOrder",{}),In("role")].concat(pA())),nH=Dg({factory:Kx,schema:[bn("dom")],name:"arrow",defaults:function(){return{buttonBehaviours:Hc([Lb.revoke()])}},overrides:function(t){return{dom:{tag:"span",attributes:{role:"presentation"}},action:function(e){e.getSystem().getByUid(t.uid).each(di)},buttonBehaviours:Hc([Kb.config({toggleOnExecute:!1,toggleClass:t.toggleClass})])}}}),rH=Dg({factory:Kx,schema:[bn("dom")],name:"button",defaults:function(){return{buttonBehaviours:Hc([Lb.revoke()])}},overrides:function(t){return{dom:{tag:"span",attributes:{role:"presentation"}},action:function(e){e.getSystem().getByUid(t.uid).each(function(n){t.onExecute(n,e)})}}}}),oH=b([nH,rH,Ig({factory:{sketch:function(t){return{uid:t.uid,dom:{tag:"span",styles:{display:"none"},attributes:{"aria-hidden":"true"},innerHtml:t.text}}}},schema:[bn("text")],name:"aria-descriptor"}),Ag({schema:[Rl()],name:"menu",defaults:function(t){return{onExecute:function(e,n){e.getSystem().getByUid(t.uid).each(function(r){t.onItemExecute(r,e,n)})}}}}),eA()]),iH=function(t,e,n,r){var o,i=function(t){bm.getCurrent(t).each(function(t){Vm.highlightFirst(t),fb.focusIn(t)})},a=function(e){var n=i;sA(t,function(t){return t},e,r,n,TD.HighlightFirst).get(g)},u=function(t){return a(t),R.some(!0)},s=function(e){var n=Gg(e,t,"button");return di(n),R.some(!0)},l=k(k({},mi([Ii(function(e,n){var r=Ug(e,t,"aria-descriptor");r.each(function(t){var n=za("aria");Sa(t.element,"id",n),Sa(e.element,"aria-describedby",n)})})])),Qb(R.some(a))),c={repositionMenus:function(t){Kb.isOn(t)&&hA(t)}};return{uid:t.uid,dom:t.dom,components:e,apis:c,eventOrder:k(k({},t.eventOrder),(o={},o[Uo()]=["disabling","toggling","alloy.base.behaviour"],o)),events:l,behaviours:Jp(t.splitDropdownBehaviours,[QD.config({others:{sandbox:function(e){var n=Gg(e,t,"arrow"),r={onOpen:function(){Kb.on(n),Kb.on(e)},onClose:function(){Kb.off(n),Kb.off(e)}};return dA(t,e,r)}}}),fb.config({mode:"special",onSpace:s,onEnter:s,onDown:u}),Lb.config({}),Kb.config({toggleOnExecute:!1,aria:{mode:"expanded"}})]),domModification:{attributes:{role:t.role.getOr("button"),"aria-haspopup":!0}}}},aH=sm({name:"SplitDropdown",configFields:eH(),partFields:oH(),factory:iH,apis:{repositionMenus:function(t,e){return t.repositionMenus(e)}}}),uH=function(t){return{isDisabled:function(){return $S.isDisabled(t)},setDisabled:function(e){return $S.set(t,e)}}},sH=function(t){return{setActive:function(e){Kb.set(t,e)},isActive:function(){return Kb.isOn(t)},isDisabled:function(){return $S.isDisabled(t)},setDisabled:function(e){return $S.set(t,e)}}},lH=function(t,e){return t.map(function(t){return{"aria-label":e.translate(t),title:e.translate(t)}}).getOr({})},cH=za("focus-button"),fH=["checklist","ordered-list"],dH=["indent","outdent","table-insert-column-after","table-insert-column-before","unordered-list"],hH=function(t,e,n,r,o,i){var a,u=function(t){return OS.isRtl()&&F(fH,t)?t+"-rtl":t},s=OS.isRtl()&&t.exists(function(t){return F(dH,t)});return{dom:{tag:"button",classes:["tox-tbtn"].concat(e.isSome()?["tox-tbtn--select"]:[]).concat(s?["tox-tbtn__icon-rtl"]:[]),attributes:lH(n,i)},components:eM([t.map(function(t){return pN(u(t),i.icons)}),e.map(function(t){return mN(t,"tox-tbtn",i)})]),eventOrder:(a={},a[So()]=["focusing","alloy.base.behaviour","common-button-display-events"],a),buttonBehaviours:Hc([ZC.toolbarButton(i.isDisabled),GC(),Sb("common-button-display-events",[xi(So(),function(t,e){e.event.prevent(),ci(t,cH)})])].concat(r.map(function(n){return tH.config({channel:n,initialData:{icon:t,text:e},renderComponents:function(t,e){return eM([t.icon.map(function(t){return pN(u(t),i.icons)}),t.text.map(function(t){return mN(t,"tox-tbtn",i)})])}})}).toArray()).concat(o.getOr([])))}},pH=function(t,e,n,r){var o=e.shared;return WB.sketch({lazySink:o.getSink,fetch:function(){return RD.nu(function(e){e(j(n(t.items),NV))})},markers:{toggledClass:"tox-tbtn--enabled"},parts:{button:hH(t.icon,t.text,t.tooltip,R.none(),R.none(),o.providers),toolbar:{dom:{tag:"div",classes:["tox-toolbar__overflow"],attributes:r}}}})},gH=function(t,e,n){var r=Zn(g),o=hH(t.icon,t.text,t.tooltip,R.none(),R.none(),n);return Kx.sketch({dom:o.dom,components:o.components,eventOrder:bN,buttonBehaviours:Hc([Sb("toolbar-button-events",[yN({onAction:t.onAction,getApi:e.getApi}),KC(e,r),JC(e,r)]),ZC.toolbarButton(function(){return t.disabled||n.isDisabled()}),GC()].concat(e.toolbarButtonBehaviours))})},mH=function(t,e){return vH(t,e,[])},vH=function(t,e,n){return gH(t,{toolbarButtonBehaviours:[].concat(n.length>0?[Sb("toolbarButtonWith",n)]:[]),getApi:uH,onSetup:t.onSetup},e)},yH=function(t,e){return bH(t,e,[])},bH=function(t,e,n){return qt(gH(t,{toolbarButtonBehaviours:[wb.config({}),Kb.config({toggleClass:"tox-tbtn--enabled",aria:{mode:"pressed"},toggleOnExecute:!1})].concat(n.length>0?[Sb("toolbarToggleButtonWith",n)]:[]),getApi:sH,onSetup:t.onSetup},e))},xH=function(t,e,n){return function(r){return RD.nu(function(t){return e.fetch(t)}).map(function(o){return R.from(sk(qt(LT(za("menu-value"),o,function(n){e.onItemAction(t(r),n)},e.columns,e.presets,s_.CLOSE_ON_EXECUTE,e.select.getOr(C),n),{movement:NT(e.columns,e.presets),menuBehaviours:mS.unnamedEvents("auto"!==e.columns?[]:[Ii(function(t,n){hS(t,4,I_(e.presets)).each(function(e){var n=e.numRows,r=e.numColumns;fb.setGridSize(t,n,r)})})])})))})}},wH=function(t,e){var n,r=za("channel-update-split-dropdown-display"),o=function(t){return{isDisabled:function(){return $S.isDisabled(t)},setDisabled:function(e){return $S.set(t,e)},setIconFill:function(e,n){pl(t.element,'svg path[id="'+e+'"], rect[id="'+e+'"]').each(function(t){Sa(t,"fill",n)})},setIconStroke:function(e,n){pl(t.element,'svg path[id="'+e+'"], rect[id="'+e+'"]').each(function(t){Sa(t,"stroke",n)})},setActive:function(e){t.getSystem().isConnected()&&(Sa(t.element,"aria-pressed",e),pl(t.element,"span").each(function(n){t.getSystem().getByDom(n).each(function(t){return Kb.set(t,e)})}))},isActive:function(){return pl(t.element,"span").exists(function(e){return!!t.getSystem().isConnected()&&t.getSystem().getByDom(e).exists(Kb.isOn)})}}},i=Zn(g),a={getApi:o,onSetup:t.onSetup};return aH.sketch({dom:{tag:"div",classes:["tox-split-button"],attributes:k({"aria-pressed":!1},lH(t.tooltip,e.providers))},onExecute:function(e){t.onAction(o(e))},onItemExecute:function(t,e,n){},splitDropdownBehaviours:Hc([ZC.splitButton(e.providers.isDisabled),GC(),Sb("split-dropdown-events",[xi(cH,Lb.focus),KC(a,i),JC(a,i)]),_A.config({})]),eventOrder:(n={},n[ti()]=["alloy.base.behaviour","split-dropdown-events"],n),toggleClass:"tox-tbtn--enabled",lazySink:e.getSink,fetch:xH(o,t,e.providers),parts:{menu:P_(!1,t.columns,t.presets)},components:[aH.parts.button(hH(t.icon,t.text,R.none(),R.some(r),R.some([Kb.config({toggleClass:"tox-tbtn--enabled",toggleOnExecute:!1})]),e.providers)),aH.parts.arrow({dom:{tag:"button",classes:["tox-tbtn","tox-split-button__chevron"],innerHtml:tw("chevron-down",e.providers.icons)},buttonBehaviours:Hc([ZC.splitButton(e.providers.isDisabled),GC()])}),aH.parts["aria-descriptor"]({text:e.providers.translate("To open the popup, press Shift+Enter")})]})},_H=function(t){return{hide:function(){return ci(t,Yo())},getValue:function(){return Zp.getValue(t)}}},SH=function(t,e){return xi(vN,function(n,r){var o=t.get(n),i=_H(o);e.onAction(i,r.event.buttonApi)})},CH=function(t,e,n){var r=e.original,o=(r.primary,D(r,["primary"])),i=rn(jw(k(k({},o),{type:"button",onAction:g})));return vH(i,n.backstage.shared.providers,[SH(t,e)])},MH=function(t,e,n){var r=e.original,o=(r.primary,D(r,["primary"])),i=rn(qw(k(k({},o),{type:"togglebutton",onAction:g})));return bH(i,n.backstage.shared.providers,[SH(t,e)])},TH=function(t,e,n){var r={backstage:{shared:{providers:n}}};return"contextformtogglebutton"===e.type?MH(t,e,r):CH(t,e,r)},kH=function(t,e,n){var r=j(e,function(e){return Jx(TH(t,e,n))}),o=function(){return j(r,function(t){return t.asSpec()})},i=function(t){return dt(e,function(e,n){return e.primary?R.from(r[n]).bind(function(e){return e.getOpt(t)}).filter(_($S.isDisabled)):R.none()})};return{asSpecs:o,findPrimary:i}},DH=function(t,e){var n=t.label.fold(function(){return{}},function(t){return{"aria-label":t}}),r=Jx(SD.sketch({inputClasses:["tox-toolbar-textfield","tox-toolbar-nav-js"],data:t.initValue(),inputAttributes:n,selectOnFocus:!0,inputBehaviours:Hc([fb.config({mode:"special",onEnter:function(t){return o.findPrimary(t).map(function(t){return di(t),!0})},onLeft:function(t,e){return e.cut(),R.none()},onRight:function(t,e){return e.cut(),R.none()}})])})),o=kH(r,t.commands,e);return[{title:R.none(),items:[r.asSpec()]},{title:R.none(),items:o.asSpecs()}]},AH=function(t,e,n){return VV({type:t,uid:za("context-toolbar"),initGroups:DH(e,n),onEscape:R.none,cyclicKeying:!0,providers:n})},IH={renderContextForm:AH,buildInitGroups:DH},OH=function(t,e){var n=Math.max(e.x,t.x),r=t.right-n,o=e.width-(n-e.x),i=Math.min(r,o);return{x:n,width:i}},LH=function(t,e,n,r){var o=er.fromDom(t.getContainer()),i=pl(o,".tox-editor-header").getOr(o),a=ol(i),u=a.y>=e.bottom,s=r&&!u;if(t.inline&&s)return{y:Math.max(a.bottom,n.y),bottom:n.bottom};if(t.inline&&!s)return{y:n.y,bottom:Math.min(a.y,n.bottom)};var l=ol(o);return s?{y:Math.max(a.bottom,n.y),bottom:Math.min(l.bottom,n.bottom)}:{y:Math.max(l.y,n.y),bottom:Math.min(a.y,n.bottom)}},EH=function(t,e){var n=qs(window),r=ol(er.fromDom(t.getContentAreaContainer())),o=fC(t)||dC(t)||pC(t),i=OH(r,n),a=i.x,u=i.width;if(t.inline&&!o)return rl(a,n.y,u,n.height);var s=e.header.isPositionedAtTop(),l=LH(t,r,n,s),c=l.y,f=l.bottom;return rl(a,c,u,f-c)},NH=function(t,e){var n=Z(e,function(e){return e.predicate(t.dom)}),r=q(n,function(t){return"contexttoolbar"===t.type}),o=r.pass,i=r.fail;return{contextToolbars:o,contextForms:i}},RH=function(t){if(t.length<=1)return t;var e=function(e){return W(t,function(t){return t.position===e})},n=function(e){return Z(t,function(t){return t.position===e})},r=e("selection"),o=e("node");if(r||o){if(o&&r){var i=n("node"),a=j(n("selection"),function(t){return k(k({},t),{position:"node"})});return i.concat(a)}return n(r?"selection":"node")}return n("line")},PH=function(t){if(t.length<=1)return t;var e=function(e){return Q(t,function(t){return t.position===e})},n=e("selection").orThunk(function(){return e("node")}).orThunk(function(){return e("line")}).map(function(t){return t.position});return n.fold(function(){return[]},function(e){return Z(t,function(t){return t.position===e})})},zH=function(t,e,n){var r=NH(t,e);if(r.contextForms.length>0)return R.some({elem:t,toolbars:[r.contextForms[0]]});var o=NH(t,n);if(o.contextForms.length>0)return R.some({elem:t,toolbars:[o.contextForms[0]]});if(r.contextToolbars.length>0||o.contextToolbars.length>0){var i=RH(r.contextToolbars.concat(o.contextToolbars));return R.some({elem:t,toolbars:i})}return R.none()},BH=function(t,e,n){return t(e)?R.none():lo(e,function(t){var e=NH(t,n.inNodeScope),r=e.contextToolbars,o=e.contextForms,i=o.length>0?o:PH(r);return i.length>0?R.some({elem:t,toolbars:i}):R.none()},t)},VH=function(t,e){var n=er.fromDom(e.getBody()),r=function(t){return oo(t,n)},o=function(t){return!r(t)&&!uo(n,t)},i=er.fromDom(e.selection.getNode());return o(i)?R.none():zH(i,t.inNodeScope,t.inEditorScope).orThunk(function(){return BH(r,i,t)})},HH=function(t,e){var n={},r=[],o=[],i={},a={},u=function(t,u){var s=rn(n_(u));n[t]=s,s.launch.map(function(n){i["form:"+t]=k(k({},u.launch),{type:"contextformtogglebutton"===n.type?"togglebutton":"button",onAction:function(){e(s)}})}),"editor"===s.scope?o.push(s):r.push(s),a[t]=s},s=function(t,e){o_(e).each(function(n){"editor"===e.scope?o.push(n):r.push(n),a[t]=n})},l=Dt(t);return X(l,function(e){var n=t[e];"contextform"===n.type?u(e,n):"contexttoolbar"===n.type&&s(e,n)}),{forms:n,inNodeScope:r,inEditorScope:o,lookupTable:a,formNavigators:i}},FH=za("forward-slide"),WH=za("backward-slide"),UH=za("change-slide-event"),GH="tox-pop--resizing",jH=function(t){var e=Zn([]);return zx.sketch({dom:{tag:"div",classes:["tox-pop"]},fireDismissalEventInstead:{event:"doNotDismissYet"},onShow:function(t){e.set([]),zx.getContent(t).each(function(t){rs(t.element,"visibility")}),Vu(t.element,GH),rs(t.element,"width")},inlineBehaviours:Hc([Sb("context-toolbar-events",[Ai(Ro(),function(t,e){Vu(t.element,GH),rs(t.element,"width")}),xi(UH,function(t,e){var n=t.element;rs(n,"width");var r=Ns(n);zx.setContent(t,e.event.contents),zu(n,GH);var o=Ns(n);Zu(n,"width",r+"px"),zx.getContent(t).each(function(t){e.event.focus.bind(function(t){return $c(t),tf(n)}).orThunk(function(){return fb.focusIn(t),Qc(ea(n))})}),Zx.setTimeout(function(){Zu(t.element,"width",o+"px")},0)}),xi(FH,function(t,n){zx.getContent(t).each(function(n){e.set(e.get().concat([{bar:n,focus:Qc(ea(t.element))}]))}),fi(t,UH,{contents:n.event.forwardContents,focus:R.none()})}),xi(WH,function(t,n){ct(e.get()).each(function(n){e.set(e.get().slice(0,e.get().length-1)),fi(t,UH,{contents:xs(n.bar),focus:n.focus})})})]),fb.config({mode:"special",onEscape:function(n){return ct(e.get()).fold(function(){return t.onEscape()},function(t){return ci(n,WH),R.some(!0)})}})]),lazySink:function(){return mt.value(t.sink)}})},XH=function(t,e,n){var r=function(t,r,i,a){var u=e.shared.providers.translate(t.title);if("separator"===t.type)return R.some({type:"separator",text:u});if("submenu"===t.type){var s=nt(t.getStyleItems(),function(t){return o(t,r,a)});return 0===r&&s.length<=0?R.none():R.some({type:"nestedmenuitem",text:u,disabled:s.length<=0,getSubmenuItems:function(){return nt(t.getStyleItems(),function(t){return o(t,r,a)})}})}return R.some(k({type:"togglemenuitem",text:u,icon:t.icon,active:t.isSelected(a),disabled:i,onAction:n.onAction(t)},t.getStylePreview().fold(function(){return{}},function(t){return{meta:{style:t}}})))},o=function(t,e,o){var i="formatter"===t.type&&n.isInvalid(t);return 0===e?i?[]:r(t,e,!1,o).toArray():r(t,e,i,o).toArray()},i=function(t){var e=n.getCurrentValue(),r=n.shouldHide?0:1;return nt(t,function(t){return o(t,r,e)})},a=function(t,e){return function(n,r){var o=e(),a=i(o),u=LN(a,s_.CLOSE_ON_EXECUTE,t,!1);r(u)}};return{validateItems:i,getFetch:a}},YH=function(t,e,n){var r=n.dataset,o="basic"===r.type?function(){return j(r.data,function(t){return bz(t,n.isSelectedFor,n.getPreviewFor)})}:r.getData;return{items:XH(t,e,n),getStyleItems:o}},qH=function(t,e,n){var r=YH(t,e,n),o=r.items,i=r.getStyleItems,a=function(t){return{getComponent:b(t)}},u=function(e){var r=function(){var t=e.getComponent();t.getSystem().isConnected()&&n.updateText(t)};return r(),t.on("NodeChange",r),function(){t.off("NodeChange",r)}};return _N({text:n.icon.isSome()?R.none():R.some(""),icon:n.icon,tooltip:R.from(n.tooltip),role:R.none(),fetch:o.getFetch(e,i),onSetup:u,getApi:a,columns:1,presets:"normal",classes:n.icon.isSome()?[]:["bespoke"],dropdownBehaviours:[]},"tox-tbtn",e.shared)},ZH=function(t){return j(t,function(t){var e=t,n=t,r=t.split("=");return r.length>1&&(e=r[0],n=r[1]),{title:e,format:n}})},$H=function(t){return{type:"basic",data:t}};(function(t){t[t["SemiColon"]=0]="SemiColon",t[t["Space"]=1]="Space"})(PR||(PR={}));var KH,JH=function(t,e){return e===PR.SemiColon?t.replace(/;$/,"").split(";"):t.split(" ")},QH=function(t,e,n,r){var o=t.getParam(e,n,"string"),i=ZH(JH(o,r));return{type:"basic",data:i}},tF=[{title:"Left",icon:"align-left",format:"alignleft",command:"JustifyLeft"},{title:"Center",icon:"align-center",format:"aligncenter",command:"JustifyCenter"},{title:"Right",icon:"align-right",format:"alignright",command:"JustifyRight"},{title:"Justify",icon:"align-justify",format:"alignjustify",command:"JustifyFull"}],eF=function(t){var e=function(){return Q(tF,function(e){return t.formatter.match(e.format)})},n=function(e){return function(){return t.formatter.match(e)}},r=function(t){return function(){return R.none()}},o=function(t){var n=e(),r=n.fold(function(){return"left"},function(t){return t.title.toLowerCase()});fi(t,wN,{icon:"align-"+r})},i=$H(tF),a=function(e){return function(){return Q(tF,function(t){return t.format===e.format}).each(function(e){return t.execCommand(e.command)})}};return{tooltip:"Align",icon:R.some("align-left"),isSelectedFor:n,getCurrentValue:R.none,getPreviewFor:r,onAction:a,updateText:o,dataset:i,shouldHide:!1,isInvalid:function(e){return!t.formatter.canApply(e.format)}}},nF=function(t,e){return qH(t,e,eF(t))},rF=function(t,e){var n=YH(t,e,eF(t));t.ui.registry.addNestedMenuItem("align",{text:e.shared.providers.translate("Align"),getSubmenuItems:function(){return n.items.validateItems(n.getStyleItems())}})},oF="Andale Mono=andale mono,monospace;Arial=arial,helvetica,sans-serif;Arial Black=arial black,sans-serif;Book Antiqua=book antiqua,palatino,serif;Comic Sans MS=comic sans ms,sans-serif;Courier New=courier new,courier,monospace;Georgia=georgia,palatino,serif;Helvetica=helvetica,arial,sans-serif;Impact=impact,sans-serif;Symbol=symbol;Tahoma=tahoma,arial,helvetica,sans-serif;Terminal=terminal,monaco,monospace;Times New Roman=times new roman,times,serif;Trebuchet MS=trebuchet ms,geneva,sans-serif;Verdana=verdana,geneva,sans-serif;Webdings=webdings;Wingdings=wingdings,zapf dingbats",iF=["-apple-system","Segoe UI","Roboto","Helvetica Neue","sans-serif"],aF=function(t){var e=t.split(/\s*,\s*/);return j(e,function(t){return t.replace(/^['"]+|['"]+$/g,"")})},uF=function(t){var e=function(){var e=aF(t.toLowerCase());return rt(iF,function(t){return e.indexOf(t.toLowerCase())>-1})};return 0===t.indexOf("-apple-system")&&e()},sF=function(t){var e=function(){var e=function(t){return t?aF(t)[0]:""},n=t.queryCommandValue("FontName"),r=u.data,o=n?n.toLowerCase():"",i=Q(r,function(t){var n=t.format;return n.toLowerCase()===o||e(n).toLowerCase()===e(o).toLowerCase()}).orThunk(function(){return uF(o)?R.from({title:"System Font",format:o}):R.none()});return{matchOpt:i,font:n}},n=function(t){return function(e){return e.exists(function(e){return e.format===t})}},r=function(){var t=e().matchOpt;return t},o=function(t){return function(){return R.some({tag:"div",styles:-1===t.indexOf("dings")?{"font-family":t}:{}})}},i=function(e){return function(){t.undoManager.transact(function(){t.focus(),t.execCommand("FontName",!1,e.format)})}},a=function(t){var n=e(),r=n.matchOpt,o=n.font,i=r.fold(function(){return o},function(t){return t.title});fi(t,xN,{text:i})},u=QH(t,"font_formats",oF,PR.SemiColon);return{tooltip:"Fonts",icon:R.none(),isSelectedFor:n,getCurrentValue:r,getPreviewFor:o,onAction:i,updateText:a,dataset:u,shouldHide:!1,isInvalid:C}},lF=function(t,e){return qH(t,e,sF(t))},cF=function(t,e){var n=YH(t,e,sF(t));t.ui.registry.addNestedMenuItem("fontformats",{text:e.shared.providers.translate("Fonts"),getSubmenuItems:function(){return n.items.validateItems(n.getStyleItems())}})},fF="8pt 10pt 12pt 14pt 18pt 24pt 36pt",dF={"8pt":"1","10pt":"2","12pt":"3","14pt":"4","18pt":"5","24pt":"6","36pt":"7"},hF={"xx-small":"7pt","x-small":"8pt",small:"10pt",medium:"12pt",large:"14pt","x-large":"18pt","xx-large":"24pt"},pF=function(t,e){var n=Math.pow(10,e);return Math.round(t*n)/n},gF=function(t,e){return/[0-9.]+px$/.test(t)?pF(72*parseInt(t,10)/96,e||0)+"pt":Vt(hF,t).getOr(t)},mF=function(t){return Vt(dF,t).getOr("")},vF=function(t){var e=function(){var e=R.none(),n=u.data,r=t.queryCommandValue("FontSize");if(r)for(var o=function(t){var o=gF(r,t),i=mF(o);e=Q(n,function(t){return t.format===r||t.format===o||t.format===i})},i=3;e.isNone()&&i>=0;i--)o(i);return{matchOpt:e,size:r}},n=function(t){return function(e){return e.exists(function(e){return e.format===t})}},r=function(){var t=e().matchOpt;return t},o=b(R.none),i=function(e){return function(){t.undoManager.transact(function(){t.focus(),t.execCommand("FontSize",!1,e.format)})}},a=function(t){var n=e(),r=n.matchOpt,o=n.size,i=r.fold(function(){return o},function(t){return t.title});fi(t,xN,{text:i})},u=QH(t,"fontsize_formats",fF,PR.Space);return{tooltip:"Font sizes",icon:R.none(),isSelectedFor:n,getPreviewFor:o,getCurrentValue:r,onAction:i,updateText:a,dataset:u,shouldHide:!1,isInvalid:C}},yF=function(t,e){return qH(t,e,vF(t))},bF=function(t,e){var n=YH(t,e,vF(t));t.ui.registry.addNestedMenuItem("fontsizes",{text:"Font sizes",getSubmenuItems:function(){return n.items.validateItems(n.getStyleItems())}})},xF=function(t,e){var n=e(),r=j(n,function(t){return t.format});return R.from(t.formatter.closest(r)).bind(function(t){return Q(n,function(e){return e.format===t})}).orThunk(function(){return pm(t.formatter.match("p"),{title:"Paragraph",format:"p"})})},wF=function(t){var e=Zn(R.none()),n=function(){return e.get().each(t)},r=function(){n(),e.set(R.none())},o=function(){return e.get().isSome()},i=function(t){n(),e.set(R.some(t))};return{clear:r,isSet:o,set:i}},_F=function(){return wF(function(t){return t.destroy()})},SF=function(){return wF(function(t){return t.unbind()})},CF=function(){var t=Zn(R.none()),e=function(){return t.set(R.none())},n=function(e){return t.set(R.some(e))},r=function(){return t.get().isSome()},o=function(e){return t.get().each(e)};return{clear:e,set:n,isSet:r,on:o}},MF=function(t,e){return function(n){var r=SF(),o=function(){n.setActive(t.formatter.match(e));var o=t.formatter.formatChanged(e,n.setActive);r.set(o)};return t.initialized?o():t.on("init",o),r.clear}},TF=function(t){return function(e){return function(){t.undoManager.transact(function(){t.focus(),t.execCommand("mceToggleFormat",!1,e.format)})}}},kF="Paragraph=p;Heading 1=h1;Heading 2=h2;Heading 3=h3;Heading 4=h4;Heading 5=h5;Heading 6=h6;Preformatted=pre",DF=function(t){var e=function(e){return function(){return t.formatter.match(e)}},n=function(e){return function(){var n=t.formatter.get(e);return R.some({tag:n.length>0&&(n[0].inline||n[0].block)||"div",styles:t.dom.parseStyle(t.formatter.getCssText(e))})}},r=function(e){var n=xF(t,function(){return o.data}),r=n.fold(function(){return"Paragraph"},function(t){return t.title});fi(e,xN,{text:r})},o=QH(t,"block_formats",kF,PR.SemiColon);return{tooltip:"Blocks",icon:R.none(),isSelectedFor:e,getCurrentValue:R.none,getPreviewFor:n,onAction:TF(t),updateText:r,dataset:o,shouldHide:!1,isInvalid:function(e){return!t.formatter.canApply(e.format)}}},AF=function(t,e){return qH(t,e,DF(t))},IF=function(t,e){var n=YH(t,e,DF(t));t.ui.registry.addNestedMenuItem("blockformats",{text:"Blocks",getSubmenuItems:function(){return n.items.validateItems(n.getStyleItems())}})},OF=function(t,e){var n=function(e){return function(){return t.formatter.match(e)}},r=function(e){return function(){var n=t.formatter.get(e);return void 0!==n?R.some({tag:n.length>0&&(n[0].inline||n[0].block)||"div",styles:t.dom.parseStyle(t.formatter.getCssText(e))}):R.none()}},o=function(e){var n=function(t){var e=t.items;return void 0!==e&&e.length>0?nt(e,n):[{title:t.title,format:t.format}]},r=nt(yz(t),n),o=xF(t,function(){return r}),i=o.fold(function(){return"Paragraph"},function(t){return t.title});fi(e,xN,{text:i})};return{tooltip:"Formats",icon:R.none(),isSelectedFor:n,getCurrentValue:R.none,getPreviewFor:r,onAction:TF(t),updateText:o,shouldHide:t.getParam("style_formats_autohide",!1,"boolean"),isInvalid:function(e){return!t.formatter.canApply(e.format)},dataset:e}},LF=function(t,e){var n=k({type:"advanced"},e.styleselect);return qH(t,e,OF(t,n))},EF=function(t,e){var n=k({type:"advanced"},e.styleselect),r=YH(t,e,OF(t,n));t.ui.registry.addNestedMenuItem("formats",{text:"Formats",getSubmenuItems:function(){return r.items.validateItems(r.getStyleItems())}})},NF=[{name:"history",items:["undo","redo"]},{name:"styles",items:["styleselect"]},{name:"formatting",items:["bold","italic"]},{name:"alignment",items:["alignleft","aligncenter","alignright","alignjustify"]},{name:"indentation",items:["outdent","indent"]},{name:"permanent pen",items:["permanentpen"]},{name:"comments",items:["addcomment"]}],RF=function(t,e){return function(n,r,o){var i=t(n).mapError(function(t){return an(t)}).getOrDie();return e(i,r,o)}},PF={button:RF(jw,function(t,e){return mH(t,e.backstage.shared.providers)}),togglebutton:RF(qw,function(t,e){return yH(t,e.backstage.shared.providers)}),menubutton:RF(GV,function(t,e){return NN(t,"tox-tbtn",e.backstage,R.none())}),splitbutton:RF(XV,function(t,e){return wH(t,e.backstage.shared)}),grouptoolbarbutton:RF(FV,function(t,e,n){var r,o=n.ui.registry.getAll().buttons,i=function(t){return GF(n,{buttons:o,toolbar:t,allowToolbarGroups:!1},e,R.none())},a=(r={},r[Ff]=e.backstage.shared.header.isPositionedAtTop()?wl.TopToBottom:wl.BottomToTop,r);switch(mC(n)){case u_.floating:return pH(t,e.backstage,i,a);default:throw new Error("Toolbar groups are only supported when using floating toolbar mode")}}),styleSelectButton:function(t,e){return LF(t,e.backstage)},fontsizeSelectButton:function(t,e){return yF(t,e.backstage)},fontSelectButton:function(t,e){return lF(t,e.backstage)},formatButton:function(t,e){return AF(t,e.backstage)},alignMenuButton:function(t,e){return nF(t,e.backstage)}},zF=function(t,e,n){return Vt(PF,t.type).fold(function(){return console.error("skipping button defined by",t),R.none()},function(r){return R.some(r(t,e,n))})},BF={styleselect:PF.styleSelectButton,fontsizeselect:PF.fontsizeSelectButton,fontselect:PF.fontSelectButton,formatselect:PF.formatButton,align:PF.alignMenuButton},VF=function(t){var e=j(NF,function(e){var n=Z(e.items,function(e){return Ht(t,e)||Ht(BF,e)});return{name:e.name,items:n}});return Z(e,function(t){return t.items.length>0})},HF=function(t){var e=t.split("|");return j(e,function(t){return{items:t.trim().split(" ")}})},FF=function(t){return p(t,function(t){return Ht(t,"name")&&Ht(t,"items")})},WF=function(t){var e=t.toolbar,n=t.buttons;return!1===e?[]:void 0===e||!0===e?VF(n):i(e)?HF(e):FF(e)?e:(console.error("Toolbar type should be string, string[], boolean or ToolbarGroup[]"),[])},UF=function(t,e,n,r,o,i){return Vt(e,n.toLowerCase()).orThunk(function(){return i.bind(function(t){return dt(t,function(t){return Vt(e,t+n.toLowerCase())})})}).fold(function(){return Vt(BF,n.toLowerCase()).map(function(e){return e(t,o)}).orThunk(function(){return R.none()})},function(e){return"grouptoolbarbutton"!==e.type||r?zF(e,o,t):(console.warn("Ignoring the '"+n+"' toolbar button. Group toolbar buttons are only supported when using floating toolbar mode and cannot be nested."),R.none())})},GF=function(t,e,n,r){var o=WF(e),i=j(o,function(o){var i=nt(o.items,function(o){return 0===o.trim().length?[]:UF(t,e.buttons,o,e.allowToolbarGroups,n,r).toArray()});return{title:R.from(t.translate(o.name)),items:i}});return Z(i,function(t){return t.items.length>0})},jF=12,XF={valignCentre:[],alignCentre:[],alignLeft:["tox-pop--align-left"],alignRight:["tox-pop--align-right"],right:["tox-pop--right"],left:["tox-pop--left"],bottom:["tox-pop--bottom"],top:["tox-pop--top"]},YF={maxHeightFunction:If(),maxWidthFunction:dB()},qF={onLtr:function(){return[bc,xc,vc,gc,yc,mc,Yx,qx,jx,Ux,Xx,Gx]},onRtl:function(){return[bc,xc,yc,mc,vc,gc,Yx,qx,Xx,Gx,jx,Ux]}},ZF={onLtr:function(){return[xc,gc,mc,vc,yc,bc,Yx,qx,jx,Ux,Xx,Gx]},onRtl:function(){return[xc,mc,gc,yc,vc,bc,Yx,qx,Xx,Gx,jx,Ux]}},$F=function(t,e){return"line"===t?{bubble:Rf(jF,0,XF),layouts:{onLtr:function(){return[wc]},onRtl:function(){return[_c]}},overrides:YF}:{bubble:Rf(0,jF,XF),layouts:e?ZF:qF,overrides:YF}},KF=function(t,e,n,r){var o=Yr().deviceType.isTouch,i=bs(jH({sink:n,onEscape:function(){return t.focus(),R.some(!0)}})),a=function(){return EH(t,r.backstage.shared)},u=function(t,e,n,r){return Math.max(t,n)<=Math.min(e,r)},s=function(){var e=p.get().filter(function(t){return Gu(er.fromDom(t))}).map(function(t){return t.getBoundingClientRect()}).getOrThunk(function(){return t.selection.getRng().getBoundingClientRect()}),n=t.inline?Gs().top:il(er.fromDom(t.getBody())).y;return{y:e.top+n,bottom:e.bottom+n}},l=function(){if(o()&&r.backstage.isContextMenuOpen())return!0;var t=s(),e=a();return!u(t.y,t.bottom,e.y,e.bottom)},c=function(){h.set(R.none()),zx.hide(i)},f=function(){zx.hide(i)},d=function(){h.get().each(function(t){var e=i.element;rs(e,"display"),l()?Zu(e,"display","none"):Eh.positionWithinBounds(n,t,i,R.some(a()))})},h=Zn(R.none()),p=Zn(R.none()),m=Zn(null),v=function(e){return{dom:{tag:"div",classes:["tox-pop__dialog"]},components:[e],behaviours:Hc([fb.config({mode:"acyclic"}),Sb("pop-dialog-wrap-events",[Ii(function(e){t.shortcuts.add("ctrl+F9","focus statusbar",function(){return fb.focusIn(e)})}),Oi(function(e){t.shortcuts.remove("ctrl+F9")})])])}},y=$t(function(){return HH(e,function(t){var e=w([t]);fi(i,FH,{forwardContents:v(e)})})}),b=function(e,n){return GF(t,{buttons:e,toolbar:n.items,allowToolbarGroups:!1},r,R.some(["form:"]))},x=function(t,e){return IH.buildInitGroups(t,e)},w=function(e){var n=t.ui.registry.getAll().buttons,o=y(),i=k(k({},n),o.formNavigators),a=mC(t)===u_.scrolling?u_.scrolling:u_.default,u=et(j(e,function(t){return"contexttoolbar"===t.type?b(i,t):x(t,r.backstage.shared.providers)}));return VV({type:a,uid:za("context-toolbar"),initGroups:u,onEscape:R.none,cyclicKeying:!0,providers:r.backstage.shared.providers})};t.on(hB,function(e){var n=y();Vt(n.lookupTable,e.toolbarKey).each(function(n){S([n],e.target===t?R.none():R.some(e)),zx.getContent(i).each(fb.focusIn)})});var _=function(t,e){var n="node"===t?r.backstage.shared.anchors.node(e):r.backstage.shared.anchors.cursor();return qt(n,$F(t,o()))},S=function(t,e){if(M(),!o()||!r.backstage.isContextMenuOpen()){var n=w(t),u=e.map(er.fromDom),s=_(t[0].position,u);h.set(R.some(s)),p.set(e);var c=i.element;rs(c,"display"),zx.showWithinBounds(i,s,v(n),function(){return R.some(a())}),l()&&Zu(c,"display","none")}},C=function(){if(t.hasFocus()){var e=y();VH(e,t).fold(c,function(t){S(t.toolbars,R.some(t.elem.dom))})}},M=function(){var t=m.get();null!==t&&(Zx.clearTimeout(t),m.set(null))},T=function(){M(),m.set(Zx.setEditorTimeout(t,C,0))};t.on("init",function(){t.on(pB,f),t.on("ScrollContent ScrollWindow longpress",d),t.on("click keyup focus SetContent ObjectResized ResizeEditor",function(){T()}),t.on("focusout",function(e){Zx.setEditorTimeout(t,function(){tf(n.element).isNone()&&tf(i.element).isNone()&&c()},0)}),t.on("SwitchMode",function(){t.mode.isReadOnly()&&c()}),t.on("AfterProgressState",function(e){e.state?c():t.hasFocus()&&T()}),t.on("NodeChange",function(t){tf(i.element).fold(T,g)})})},JF=function(t,e,n){var r=function(t,r){X([e,n],function(e){e.broadcastEvent(t,r)})},o=function(t,r){X([e,n],function(e){e.broadcastOn([t],r)})},i=function(t){return o(pp(),{target:t.target})},a=hk(er.fromDom(document),"touchstart",i),u=hk(er.fromDom(document),"touchmove",function(t){return r($o(),t)}),s=hk(er.fromDom(document),"touchend",function(t){return r(Ko(),t)}),l=hk(er.fromDom(document),"mousedown",i),c=hk(er.fromDom(document),"mouseup",function(t){0===t.raw.button&&o(mp(),{target:t.target})}),f=function(t){return o(pp(),{target:er.fromDom(t.target)})},d=function(t){0===t.button&&o(mp(),{target:er.fromDom(t.target)})},h=function(t){return r(Jo(),gk(t))},p=function(t){o(gp(),{}),r(Qo(),gk(t))},g=function(){return o(gp(),{})},m=function(e){e.state&&o(pp(),{target:er.fromDom(t.getContainer())})};t.on("PostRender",function(){t.on("click",f),t.on("tap",f),t.on("mouseup",d),t.on("ScrollWindow",h),t.on("ResizeWindow",p),t.on("ResizeEditor",g),t.on("AfterProgressState",m)}),t.on("remove",function(){t.off("click",f),t.off("tap",f),t.off("mouseup",d),t.off("ScrollWindow",h),t.off("ResizeWindow",p),t.off("ResizeEditor",g),t.off("AfterProgressState",m),l.unbind(),a.unbind(),u.unbind(),s.unbind(),c.unbind()}),t.on("detach",function(){Yh(e),Yh(n),e.destroy(),n.destroy()})},QF=Kg,tW=Eg,eW=b([Bn("shell",!1),bn("makeItem"),Bn("setupItem",g),Qp.field("listBehaviours",[wb])]),nW=function(){return{behaviours:Hc([wb.config({})])}},rW=Ig({name:"items",overrides:nW}),oW=b([rW]),iW=b("CustomList"),aW=function(t,e,n,r){var o=function(e,n){a(e).fold(function(){throw console.error("Custom List was defined to not be a shell, but no item container was specified in components"),new Error("Custom List was defined to not be a shell, but no item container was specified in components")},function(r){var o=wb.contents(r),i=n.length,a=i-o.length,u=a>0?U(a,function(){return t.makeItem()}):[],s=o.slice(i);X(s,function(t){return wb.remove(r,t)}),X(u,function(t){return wb.append(r,t)});var l=wb.contents(r);X(l,function(r,o){t.setupItem(e,r,n[o],o)})})},i=t.shell?{behaviours:[wb.config({})],components:[]}:{behaviours:[],components:e},a=function(e){return t.shell?R.some(e):Ug(e,t,"items")};return{uid:t.uid,dom:t.dom,components:i.components,behaviours:Jp(t.listBehaviours,i.behaviours),apis:{setItems:o}}},uW=sm({name:iW(),configFields:eW(),partFields:oW(),factory:aW,apis:{setItems:function(t,e,n){t.setItems(e,n)}}}),sW=g,lW=C,cW=b([]),fW=Object.freeze({__proto__:null,setup:sW,isDocked:lW,getBehaviours:cW}),dW=function(t){var e=ts(t,"position").is("fixed"),n=e?R.none():Yi(t);return n.orThunk(function(){var e=er.fromTag("span");return ji(t).bind(function(t){fa(t,e);var n=Yi(e);return ma(e),n})})},hW=function(t){return dW(t).map(Is).getOrThunk(function(){return ks(0,0)})},pW=Ut.generate([{static:[]},{absolute:["positionCss"]},{fixed:["positionCss"]}]),gW=function(t,e){var n=t.element;zu(n,e.transitionClass),Vu(n,e.fadeOutClass),zu(n,e.fadeInClass),e.onShow(t)},mW=function(t,e){var n=t.element;zu(n,e.transitionClass),Vu(n,e.fadeInClass),zu(n,e.fadeOutClass),e.onHide(t)},vW=function(t,e){return t.y<e.bottom&&t.bottom>e.y},yW=function(t,e){return t.y>=e.y},bW=function(t,e){return t.bottom<=e.bottom},xW=function(t,e,n){return rt(t,function(t){switch(t){case"bottom":return bW(e,n);case"top":return yW(e,n)}})},wW=function(t,e){return e.getInitialPosition().map(function(e){return rl(e.bounds.x,e.bounds.y,Ns(t),Ss(t))})},_W=function(t,e,n){n.setInitialPosition(R.some({style:es(t),position:Ju(t,"position")||"static",bounds:e}))},SW=function(t,e,n){return n.getInitialPosition().bind(function(r){switch(n.setInitialPosition(R.none()),r.position){case"static":return R.some(pW.static());case"absolute":var o=dW(t).map(ol).getOrThunk(function(){return ol(ju())});return R.some(pW.absolute(nf("absolute",Vt(r.style,"left").map(function(t){return e.x-o.x}),Vt(r.style,"top").map(function(t){return e.y-o.y}),Vt(r.style,"right").map(function(t){return o.right-e.right}),Vt(r.style,"bottom").map(function(t){return o.bottom-e.bottom}))));default:return R.none()}})},CW=function(t,e,n){return wW(t,n).filter(function(t){return xW(n.getModes(),t,e)}).bind(function(e){return SW(t,e,n)})},MW=function(t,e,n){var r=ol(t);if(xW(n.getModes(),r,e))return R.none();_W(t,r,n);var o=al(),i=r.x-o.x,a=e.y-o.y,u=o.bottom-e.bottom,s=r.y<=e.y;return R.some(pW.fixed(nf("fixed",R.some(i),s?R.some(a):R.none(),R.none(),s?R.none():R.some(u))))},TW=function(t,e,n){var r=t.element,o=ts(r,"position").is("fixed");return o?CW(r,e,n):MW(r,e,n)},kW=function(t,e){var n=t.element;return wW(n,e).bind(function(t){return SW(n,t,e)})},DW=function(t,e){X(["left","right","top","bottom","position"],function(e){return rs(t.element,e)}),e.onUndocked(t)},AW=function(t,e,n){rf(t.element,n);var r="fixed"===n.position?e.onDocked:e.onUndocked;r(t)},IW=function(t,e,n,r,o){void 0===o&&(o=!1),e.contextual.each(function(e){e.lazyContext(t).each(function(i){var a=vW(i,r);if(a!==n.isVisible())if(n.setVisible(a),o&&!a)Fu(t.element,[e.fadeOutClass]),e.onHide(t);else{var u=a?gW:mW;u(t,e)}})})},OW=function(t,e,n){var r=e.lazyViewport(t),o=n.isDocked();o&&IW(t,e,n,r),TW(t,r,n).each(function(i){n.setDocked(!o),i.fold(function(){return DW(t,e)},function(n){return AW(t,e,n)},function(o){IW(t,e,n,r,!0),AW(t,e,o)})})},LW=function(t,e,n){var r=t.element;n.setDocked(!1),kW(t,n).each(function(n){n.fold(function(){return DW(t,e)},function(n){return AW(t,e,n)},g)}),n.setVisible(!0),e.contextual.each(function(e){Wu(r,[e.fadeInClass,e.fadeOutClass,e.transitionClass]),e.onShow(t)}),EW(t,e,n)},EW=function(t,e,n){t.getSystem().isConnected()&&OW(t,e,n)},NW=function(t,e,n){n.isDocked()&&LW(t,e,n)},RW=function(t,e,n){return n.isDocked()},PW=function(t,e,n,r){return n.setModes(r)},zW=function(t,e,n){return n.getModes()},BW=Object.freeze({__proto__:null,refresh:EW,reset:NW,isDocked:RW,getModes:zW,setModes:PW}),VW=function(t,e){return mi([Ai(Ro(),function(n,r){t.contextual.each(function(t){if(Hu(n.element,t.transitionClass)){Wu(n.element,[t.transitionClass,t.fadeInClass]);var o=e.isVisible()?t.onShown:t.onHidden;o(n)}r.stop()})}),xi(Jo(),function(n,r){EW(n,t,e)}),xi(Qo(),function(n,r){NW(n,t,e)})])},HW=Object.freeze({__proto__:null,events:VW}),FW=[Pn("contextual",[_n("fadeInClass"),_n("fadeOutClass"),_n("transitionClass"),Mn("lazyContext"),Bl("onShow"),Bl("onShown"),Bl("onHide"),Bl("onHidden")]),Gn("lazyViewport",al),Xn("modes",["top","bottom"],hn),Bl("onDocked"),Bl("onUndocked")],WW=function(t){var e=Zn(!1),n=Zn(!0),r=Zn(R.none()),o=Zn(t.modes),i=function(){return"docked:  "+e.get()+", visible: "+n.get()+", modes: "+o.get().join(",")};return ou({isDocked:e.get,setDocked:e.set,getInitialPosition:r.get,setInitialPosition:r.set,isVisible:n.get,setVisible:n.set,getModes:o.get,setModes:o.set,readState:i})},UW=Object.freeze({__proto__:null,init:WW}),GW=Wc({fields:FW,name:"docking",active:HW,apis:BW,state:UW}),jW={fadeInClass:"tox-editor-dock-fadein",fadeOutClass:"tox-editor-dock-fadeout",transitionClass:"tox-editor-dock-transition"},XW="tox-tinymce--toolbar-sticky-on",YW="tox-tinymce--toolbar-sticky-off",qW=function(t,e){var n=Fi(e),r=n.dom.defaultView.innerHeight,o=Gs(n),i=er.fromDom(t.elm),a=il(i),u=Ss(i),s=a.y,l=s+u,c=Is(e),f=Ss(e),d=c.top,h=d+f,p=Math.abs(d-o.top)<2,g=Math.abs(h-(o.top+r))<2;if(p&&s<h)js(o.left,s-f,n);else if(g&&l>d){var m=s-r+u+f;js(o.left,m,n)}},ZW=function(t,e){return F(GW.getModes(t),e)},$W=function(t){var e=function(t){return Cs(t)+(parseInt(Ju(t,"margin-top"),10)||0)+(parseInt(Ju(t,"margin-bottom"),10)||0)},n=t.element;ji(n).each(function(r){var o="padding-"+GW.getModes(t)[0];if(GW.isDocked(t)){var i=Ns(r);Zu(n,"width",i+"px"),Zu(r,o,e(n)+"px")}else rs(n,"width"),rs(r,o)})},KW=function(t,e){e?(Vu(t,jW.fadeOutClass),Fu(t,[jW.transitionClass,jW.fadeInClass])):(Vu(t,jW.fadeInClass),Fu(t,[jW.fadeOutClass,jW.transitionClass]))},JW=function(t,e){var n=er.fromDom(t.getContainer());e?(zu(n,XW),Vu(n,YW)):(zu(n,YW),Vu(n,XW))},QW=function(t,e){var n=Fi(e);Qc(n).filter(function(t){return!oo(e,t)}).filter(function(e){return oo(e,er.fromDom(n.dom.body))||uo(t,e)}).each(function(){return $c(e)})},tU=function(t,e){return tf(t).orThunk(function(){return e().toOptional().bind(function(t){return tf(t.element)})})},eU=function(t,e,n){t.inline||(e.header.isPositionedAtTop()||t.on("ResizeEditor",function(){n().each(GW.reset)}),t.on("ResizeWindow ResizeEditor",function(){n().each($W)}),t.on("SkinLoaded",function(){n().each(function(t){GW.isDocked(t)?GW.reset(t):GW.refresh(t)})}),t.on("FullscreenStateChanged",function(){n().each(GW.reset)})),t.on("AfterScrollIntoView",function(t){n().each(function(e){GW.refresh(e);var n=e.element;Ev(n)&&qW(t,n)})}),t.on("PostRender",function(){JW(t,!1)})},nU=function(t){return t().map(GW.isDocked).getOr(!1)},rU=function(){var t;return[Xc.config({channels:(t={},t[LV()]={onReceive:$W},t)})]},oU=function(t,e){var n=Zn(R.none()),r=e.getSink,o=function(t){r().each(function(e){return t(e.element)})},i=function(e){t.inline||$W(e),JW(t,GW.isDocked(e)),e.getSystem().broadcastOn([gp()],{}),r().each(function(t){return t.getSystem().broadcastOn([gp()],{})})},a=t.inline?[]:rU();return A([Lb.config({}),GW.config({contextual:k({lazyContext:function(e){var n=Cs(e.element),r=t.inline?t.getContentAreaContainer():t.getContainer(),o=ol(er.fromDom(r)),i=o.height-n,a=o.y+(ZW(e,"top")?0:n);return R.some(rl(o.x,a,o.width,i))},onShow:function(){o(function(t){return KW(t,!0)})},onShown:function(t){o(function(t){return Wu(t,[jW.transitionClass,jW.fadeInClass])}),n.get().each(function(e){QW(t.element,e),n.set(R.none())})},onHide:function(t){n.set(tU(t.element,r)),o(function(t){return KW(t,!1)})},onHidden:function(){o(function(t){return Wu(t,[jW.transitionClass])})}},jW),modes:[e.header.getDockingMode()],onDocked:i,onUndocked:i})],a)},iU=Object.freeze({__proto__:null,setup:eU,isDocked:nU,getBehaviours:oU}),aU=function(t){var e=t.editor,n=t.sticky?oU:cW;return{uid:t.uid,dom:t.dom,components:t.components,behaviours:Hc(n(e,t.sharedBackstage))}},uU=function(t,e){var n=function(t,n){var r=j(n,function(t){var n={type:"menubutton",text:t.text,fetch:function(e){e(t.getItems())}},r=GV(n).mapError(function(t){return an(t)}).getOrDie();return NN(r,"tox-mbtn",e.backstage,R.some("menuitem"))});wb.set(t,r)},r={focus:fb.focusIn,setMenus:n};return{uid:t.uid,dom:t.dom,components:[],behaviours:Hc([wb.config({}),Sb("menubar-events",[Ii(function(e){t.onSetup(e)}),xi(ko(),function(t,e){pl(t.element,".tox-mbtn--active").each(function(n){gl(e.event.target,".tox-mbtn").each(function(e){oo(n,e)||t.getSystem().getByDom(n).each(function(n){t.getSystem().getByDom(e).each(function(t){yA.expand(t),yA.close(n),Lb.focus(t)})})})})}),xi(oi(),function(t,e){e.event.prevFocus.bind(function(e){return t.getSystem().getByDom(e).toOptional()}).each(function(n){e.event.newFocus.bind(function(e){return t.getSystem().getByDom(e).toOptional()}).each(function(t){yA.isOpen(n)&&(yA.expand(t),yA.close(n))})})})]),fb.config({mode:"flow",selector:".tox-mbtn",onEscape:function(e){return t.onEscape(e),R.some(!0)}}),tD.config({})]),apis:r,domModification:{attributes:{role:"menubar"}}}},sU=um({factory:uU,name:"silver.Menubar",configFields:[bn("dom"),bn("uid"),bn("onEscape"),bn("backstage"),Bn("onSetup",g)],apis:{focus:function(t,e){t.focus(e)},setMenus:function(t,e,n){t.setMenus(e,n)}}}),lU="container",cU=[$p("slotBehaviours",[])],fU=function(t){return"<alloy.field."+t+">"},dU=function(t){var e=function(){var t=[],e=function(e,n){return t.push(e),Bg(lU,fU(e),n)};return{slot:e,record:function(){return t}}}(),n=t(e),r=e.record(),o=j(r,function(t){return Dg({name:t,pname:fU(t)})});return em(lU,cU,o,hU,n)},hU=function(t,e){var n=function(e){return Yg(t)},r=function(e,n){return Ug(e,t,n)},o=function(e,n){return function(r,o){return Ug(r,t,o).map(function(t){return e(t,o)}).getOr(n)}},i=function(t){return function(e,n){X(n,function(n){return t(e,n)})}},a=function(t,e){return"true"!==Ma(t.element,"aria-hidden")},u=function(t,e){if(!a(t)){var n=t.element;rs(n,"display"),Da(n,"aria-hidden"),fi(t,ii(),{name:e,visible:!0})}},s=function(t,e){if(a(t)){var n=t.element;Zu(n,"display","none"),Sa(n,"aria-hidden","true"),fi(t,ii(),{name:e,visible:!1})}},l=o(a,!1),c=o(s),f=i(c),d=function(t){return f(t,n())},h=o(u),p={getSlotNames:n,getSlot:r,isShowing:l,hideSlot:c,hideAllSlots:d,showSlot:h};return{uid:t.uid,dom:t.dom,components:e,behaviours:Kp(t.slotBehaviours),apis:p}},pU=Ot({getSlotNames:function(t,e){return t.getSlotNames(e)},getSlot:function(t,e,n){return t.getSlot(e,n)},isShowing:function(t,e,n){return t.isShowing(e,n)},hideSlot:function(t,e,n){return t.hideSlot(e,n)},hideAllSlots:function(t,e){return t.hideAllSlots(e)},showSlot:function(t,e,n){return t.showSlot(e,n)}},function(t){return nu(t)}),gU=k(k({},pU),{sketch:dU}),mU=Be([En("icon"),En("tooltip"),Gn("onShow",g),Gn("onHide",g),Gn("onSetup",function(){return g})]),vU=function(t){return nn("sidebar",mU,t)},yU=function(t){var e=t.ui.registry.getAll().sidebars;X(Dt(e),function(n){var r=e[n],o=function(){return R.from(t.queryCommandValue("ToggleSidebar")).is(n)};t.ui.registry.addToggleButton(n,{icon:r.icon,tooltip:r.tooltip,onAction:function(e){t.execCommand("ToggleSidebar",!1,n),e.setActive(o())},onSetup:function(e){var n=function(){return e.setActive(o())};return t.on("ToggleSidebar",n),function(){t.off("ToggleSidebar",n)}}})})},bU=function(t){return{element:function(){return t.element.dom}}},xU=function(t,e){var n=j(Dt(e),function(t){var n=e[t],r=rn(vU(n));return{name:t,getApi:bU,onSetup:r.onSetup,onShow:r.onShow,onHide:r.onHide}});return j(n,function(e){var r=Zn(g);return t.slot(e.name,{dom:{tag:"div",classes:["tox-sidebar__pane"]},behaviours:mS.unnamedEvents([KC(e,r),JC(e,r),xi(ii(),function(t,e){var r=e.event,o=Q(n,function(t){return t.name===r.name});o.each(function(e){var n=r.visible?e.onShow:e.onHide;n(e.getApi(t))})})])})})},wU=function(t){return gU.sketch(function(e){return{dom:{tag:"div",classes:["tox-sidebar__pane-container"]},components:xU(e,t),slotBehaviours:mS.unnamedEvents([Ii(function(t){return gU.hideAllSlots(t)})])}})},_U=function(t,e){var n=bm.getCurrent(t);n.each(function(t){return wb.set(t,[wU(e)])})},SU=function(t,e){var n=bm.getCurrent(t);n.each(function(t){var n=bm.getCurrent(t);n.each(function(n){CV.hasGrown(t)?gU.isShowing(n,e)?CV.shrink(t):(gU.hideAllSlots(n),gU.showSlot(n,e)):(gU.hideAllSlots(n),gU.showSlot(n,e),CV.grow(t))})})},CU=function(t){var e=bm.getCurrent(t);return e.bind(function(t){var e=CV.isGrowing(t)||CV.hasGrown(t);if(e){var n=bm.getCurrent(t);return n.bind(function(t){return Q(gU.getSlotNames(t),function(e){return gU.isShowing(t,e)})})}return R.none()})},MU=za("FixSizeEvent"),TU=za("AutoSizeEvent"),kU=function(t){return{uid:t.uid,dom:{tag:"div",classes:["tox-sidebar"],attributes:{role:"complementary"}},components:[{dom:{tag:"div",classes:["tox-sidebar__slider"]},components:[],behaviours:Hc([tD.config({}),Lb.config({}),CV.config({dimension:{property:"width"},closedClass:"tox-sidebar--sliding-closed",openClass:"tox-sidebar--sliding-open",shrinkingClass:"tox-sidebar--sliding-shrinking",growingClass:"tox-sidebar--sliding-growing",onShrunk:function(t){var e=bm.getCurrent(t);e.each(gU.hideAllSlots),ci(t,TU)},onGrown:function(t){ci(t,TU)},onStartGrow:function(t){fi(t,MU,{width:ts(t.element,"width").getOr("")})},onStartShrink:function(t){fi(t,MU,{width:Ns(t.element)+"px"})}}),wb.config({}),bm.config({find:function(t){var e=wb.contents(t);return lt(e)}})])}],behaviours:Hc([AL.childAt(0),Sb("sidebar-sliding-events",[xi(MU,function(t,e){Zu(t.element,"width",e.event.width)}),xi(TU,function(t,e){rs(t.element,"width")})])])}},DU=function(t){var e=void 0!==t.dom.attributes?t.dom.attributes:[];return K(e,function(t,e){var n;return"class"===e.name?t:k(k({},t),(n={},n[e.name]=e.value,n))},{})},AU=function(t){return Array.prototype.slice.call(t.dom.classList,0)},IU=function(t){var e=er.fromHtml(t),n=Zi(e),r=DU(e),o=AU(e),i=0===n.length?{}:{innerHtml:ba(e)};return k({tag:Ni(e),classes:o,attributes:r},i)},OU=function(t){return{dom:{tag:"div",attributes:{"aria-label":t.translate("Loading...")},classes:["tox-throbber__busy-spinner"]},components:[{dom:IU('<div class="tox-spinner"><div></div><div></div><div></div></div>')}],behaviours:Hc([fb.config({mode:"special",onTab:function(){return R.some(!0)},onShiftTab:function(){return R.some(!0)}}),Lb.config({})])}},LU=function(t,e,n){var r=t.element;!0===e?(wb.set(t,[OU(n)]),rs(r,"display"),Da(r,"aria-hidden")):(wb.set(t,[]),Zu(r,"display","none"),Sa(r,"aria-hidden","true"))},EU=function(t){return{uid:t.uid,dom:{tag:"div",attributes:{"aria-hidden":"true"},classes:["tox-throbber"],styles:{display:"none"}},behaviours:Hc([wb.config({})]),components:[]}},NU=function(t,e,n){var r=Zn(!1),o=Zn(R.none()),i=function(o){o!==r.get()&&(LU(e(),o,n.providers),r.set(o),t.fire("AfterProgressState",{state:o}))};t.on("ProgressState",function(e){if(o.get().each(Zx.clearTimeout),h(e.time)){var n=Zx.setEditorTimeout(t,function(){return i(e.state)},e.time);o.set(R.some(n))}else i(e.state),o.set(R.none())})},RU=function(t,e,n){var r={getSocket:function(e){return QF.getPart(e,t,"socket")},setSidebar:function(e,n){QF.getPart(e,t,"sidebar").each(function(t){return _U(t,n)})},toggleSidebar:function(e,n){QF.getPart(e,t,"sidebar").each(function(t){return SU(t,n)})},whichSidebar:function(e){return QF.getPart(e,t,"sidebar").bind(CU).getOrNull()},getHeader:function(e){return QF.getPart(e,t,"header")},getToolbar:function(e){return QF.getPart(e,t,"toolbar")},setToolbar:function(e,n){QF.getPart(e,t,"toolbar").each(function(t){t.getApis().setGroups(t,n)})},setToolbars:function(e,n){QF.getPart(e,t,"multiple-toolbar").each(function(t){uW.setItems(t,n)})},refreshToolbar:function(e){var n=QF.getPart(e,t,"toolbar");n.each(function(t){return t.getApis().refresh(t)})},toggleToolbarDrawer:function(e){QF.getPart(e,t,"toolbar").each(function(t){hm(t.getApis().toggle,function(e){return e(t)})})},isToolbarDrawerToggled:function(e){return QF.getPart(e,t,"toolbar").bind(function(t){return R.from(t.getApis().isOpen).map(function(e){return e(t)})}).getOr(!1)},getThrobber:function(e){return QF.getPart(e,t,"throbber")},focusToolbar:function(e){var n=QF.getPart(e,t,"toolbar").orThunk(function(){return QF.getPart(e,t,"multiple-toolbar")});n.each(function(t){fb.focusIn(t)})},setMenubar:function(e,n){QF.getPart(e,t,"menubar").each(function(t){sU.setMenus(t,n)})},focusMenubar:function(e){QF.getPart(e,t,"menubar").each(function(t){sU.focus(t)})}};return{uid:t.uid,dom:t.dom,components:e,apis:r,behaviours:t.behaviours}},PU=tW.optional({factory:sU,name:"menubar",schema:[bn("backstage")]}),zU=function(t){return t.type===u_.sliding?BV:t.type===u_.floating?zV:VV},BU=tW.optional({factory:{sketch:function(t){return uW.sketch({uid:t.uid,dom:t.dom,listBehaviours:Hc([fb.config({mode:"acyclic",selector:".tox-toolbar"})]),makeItem:function(){return VV({type:t.type,uid:za("multiple-toolbar-item"),cyclicKeying:!1,initGroups:[],providers:t.providers,onEscape:function(){return t.onEscape(),R.some(!0)}})},setupItem:function(t,e,n,r){bB.setGroups(e,n)},shell:!0})}},name:"multiple-toolbar",schema:[bn("dom"),bn("onEscape")]}),VU=tW.optional({factory:{sketch:function(t){var e=zU(t),n={type:t.type,uid:t.uid,onEscape:function(){return t.onEscape(),R.some(!0)},cyclicKeying:!1,initGroups:[],getSink:t.getSink,providers:t.providers,moreDrawerData:{lazyToolbar:t.lazyToolbar,lazyMoreButton:t.lazyMoreButton,lazyHeader:t.lazyHeader},attributes:t.attributes};return e(n)}},name:"toolbar",schema:[bn("dom"),bn("onEscape"),bn("getSink")]}),HU=tW.optional({factory:{sketch:aU},name:"header",schema:[bn("dom")]}),FU=tW.optional({name:"socket",schema:[bn("dom")]}),WU=tW.optional({factory:{sketch:kU},name:"sidebar",schema:[bn("dom")]}),UU=tW.optional({factory:{sketch:EU},name:"throbber",schema:[bn("dom")]}),GU=sm({name:"OuterContainer",factory:RU,configFields:[bn("dom"),bn("behaviours")],partFields:[HU,PU,VU,BU,FU,WU,UU],apis:{getSocket:function(t,e){return t.getSocket(e)},setSidebar:function(t,e,n){t.setSidebar(e,n)},toggleSidebar:function(t,e,n){t.toggleSidebar(e,n)},whichSidebar:function(t,e){return t.whichSidebar(e)},getHeader:function(t,e){return t.getHeader(e)},getToolbar:function(t,e){return t.getToolbar(e)},setToolbar:function(t,e,n){var r=j(n,function(t){return NV(t)});t.setToolbar(e,r)},setToolbars:function(t,e,n){var r=j(n,function(t){return j(t,NV)});t.setToolbars(e,r)},refreshToolbar:function(t,e){return t.refreshToolbar(e)},toggleToolbarDrawer:function(t,e){t.toggleToolbarDrawer(e)},isToolbarDrawerToggled:function(t,e){return t.isToolbarDrawerToggled(e)},getThrobber:function(t,e){return t.getThrobber(e)},setMenubar:function(t,e,n){t.setMenubar(e,n)},focusMenubar:function(t,e){t.focusMenubar(e)},focusToolbar:function(t,e){t.focusToolbar(e)}}}),jU="file edit view insert format tools table help",XU={file:{title:"File",items:"newdocument restoredraft | preview | export print | deleteallconversations"},edit:{title:"Edit",items:"undo redo | cut copy paste pastetext | selectall | searchreplace"},view:{title:"View",items:"code | visualaid visualchars visualblocks | spellchecker | preview fullscreen | showcomments"},insert:{title:"Insert",items:"image link media addcomment pageembed template codesample inserttable | charmap emoticons hr | pagebreak nonbreaking anchor toc | insertdatetime"},format:{title:"Format",items:"bold italic underline strikethrough superscript subscript codeformat | formats blockformats fontformats fontsizes align lineheight | forecolor backcolor | removeformat"},tools:{title:"Tools",items:"spellchecker spellcheckerlanguage | a11ycheck code wordcount"},table:{title:"Table",items:"inserttable | cell row column | advtablesort | tableprops deletetable"},help:{title:"Help",items:"help"}},YU=function(t,e,n){var r=cC(n).split(/[ ,]/);return{text:t.title,getItems:function(){return nt(t.items,function(t){var n=t.toLowerCase();return 0===n.trim().length?[]:W(r,function(t){return t===n})?[]:"separator"===n||"|"===n?[{type:"separator"}]:e.menuItems[n]?[e.menuItems[n]]:[]})}}},qU=function(t){return"string"===typeof t?t.split(" "):t},ZU=function(t,e){var n=k(k({},XU),e.menus),r=Dt(e.menus).length>0,o=void 0===e.menubar||!0===e.menubar?qU(jU):qU(!1===e.menubar?"":e.menubar),i=Z(o,function(t){return r&&e.menus.hasOwnProperty(t)&&e.menus[t].hasOwnProperty("items")||XU.hasOwnProperty(t)}),a=j(i,function(r){var o=n[r];return YU({title:o.title,items:qU(o.items)},e,t)});return Z(a,function(t){var e=function(t){return"separator"!==t.type};return t.getItems().length>0&&W(t.getItems(),e)})},$U=function(t){var e=function(){t._skinLoaded=!0,KM(t)};return function(){t.initialized?e():t.on("init",e)}},KU=function(t,e){return function(){return JM(t,{message:e})}},JU=function(t,e,n){return new Mw(function(r,o){n.load(e,r,o),t.on("remove",function(){return n.unload(e)})})},QU=function(t,e){var n=e+"/skin.min.css";return JU(t,n,t.ui.styleSheetLoader)},tG=function(t,e){var n=ra(er.fromDom(t.getElement()));if(n){var r=e+"/skin.shadowdom.min.css";return JU(t,r,IS.DOM.styleSheetLoader)}return Mw.resolve()},eG=function(t,e){var n=JS(e);n&&e.contentCSS.push(n+(t?"/content.inline":"/content")+".min.css"),!1===tC(e)&&i(n)?Mw.all([QU(e,n),tG(e,n)]).then($U(e),KU(e,"Skin could not be loaded")):$U(e)()},nG=w(eG,!1),rG=w(eG,!0),oG=function(t,e,n,r){var o=e.outerContainer,a=n.toolbar,u=n.buttons;if(p(a,i)){var s=a.map(function(e){var o={toolbar:e,buttons:u,allowToolbarGroups:n.allowToolbarGroups};return GF(t,o,{backstage:r},R.none())});GU.setToolbars(o,s)}else GU.setToolbar(o,GF(t,n,{backstage:r},R.none()))},iG=Yr(),aG=iG.os.isiOS()&&iG.os.version.major<=12,uG=function(t,e){var n=t.dom,r=t.getWin(),o=t.getDoc().documentElement,i=Zn(ks(r.innerWidth,r.innerHeight)),a=Zn(ks(o.offsetWidth,o.offsetHeight)),u=function(){var e=i.get();e.left===r.innerWidth&&e.top===r.innerHeight||(i.set(ks(r.innerWidth,r.innerHeight)),tT(t))},s=function(){var e=t.getDoc().documentElement,n=a.get();n.left===e.offsetWidth&&n.top===e.offsetHeight||(a.set(ks(e.offsetWidth,e.offsetHeight)),tT(t))},l=function(e){return eT(t,e)};n.bind(r,"resize",u),n.bind(r,"scroll",l);var c=pk(er.fromDom(t.getBody()),"load",s),f=e.uiMothership.element;t.on("hide",function(){Zu(f,"display","none")}),t.on("show",function(){rs(f,"display")}),t.on("NodeChange",s),t.on("remove",function(){c.unbind(),n.unbind(r,"resize",u),n.unbind(r,"scroll",l),r=null})},sG=function(t,e,n,r,o){var i=Zn(0),a=e.outerContainer;nG(t);var u=er.fromDom(o.targetNode),s=na(ea(u));jh(u,e.mothership),Gh(s,e.uiMothership),t.on("PostRender",function(){oG(t,e,n,r),i.set(t.getWin().innerWidth),GU.setMenubar(a,ZU(t,n)),GU.setSidebar(a,n.sidebar),uG(t,e)});var l=GU.getSocket(a).getOrDie("Could not find expected socket element");if(aG){$u(l.element,{overflow:"scroll","-webkit-overflow-scrolling":"touch"});var c=sw(function(){t.fire("ScrollContent")},20),f=hk(l.element,"scroll",c.throttle);t.on("remove",f.unbind)}UC(t,e),t.addCommand("ToggleSidebar",function(e,n){GU.toggleSidebar(a,n),t.fire("ToggleSidebar")}),t.addQueryValueHandler("ToggleSidebar",function(){return GU.whichSidebar(a)});var d=mC(t),h=function(){GU.refreshToolbar(e.outerContainer)};d!==u_.sliding&&d!==u_.floating||t.on("ResizeWindow ResizeEditor ResizeContent",function(){var e=t.getWin().innerWidth;e!==i.get()&&(h(),i.set(e))});var p={enable:function(){WC(e,!1)},disable:function(){WC(e,!0)},isDisabled:function(){return $S.isDisabled(a)}};return{iframeContainer:l.element.dom,editorContainer:a.element.dom,api:p}},lG=Object.freeze({__proto__:null,render:sG}),cG=function(t){var e=/^[0-9\.]+(|px)$/i;return e.test(""+t)?R.some(parseInt(""+t,10)):R.none()},fG=function(t){return h(t)?t+"px":t},dG=function(t,e,n){var r=e.filter(function(e){return t<e}),o=n.filter(function(e){return t>e});return r.or(o).getOr(t)},hG=function(t){var e=eC(t),n=oC(t),r=aC(t);return cG(e).map(function(t){return dG(t,n,r)})},pG=function(t){var e=hG(t);return e.getOr(eC(t))},gG=function(t){var e=nC(t),n=rC(t),r=iC(t);return cG(e).map(function(t){return dG(t,n,r)})},mG=function(t){var e=gG(t);return e.getOr(nC(t))},vG=function(t,e,n,r,o){var i=n.uiMothership,a=n.outerContainer,u=IS.DOM,s=MC(t),l=DC(t),c=iC(t).or(gG(t)),f=r.shared.header,d=f.isPositionedAtTop,h=mC(t),p=h===u_.sliding||h===u_.floating,g=Zn(!1),m=function(){return g.get()&&!t.removed},v=function(t){return p?t.fold(function(){return 0},function(t){return t.components().length>1?Ss(t.components()[1].element):0}):0},y=function(n){switch(bC(t)){case gC.auto:var r=GU.getToolbar(a),o=v(r),i=Ss(n.element)-o,u=ol(e),s=u.y>i;if(s)return"top";var l=Ui(e),c=Math.max(l.dom.scrollHeight,Ss(l)),f=u.bottom<c-i;if(f)return"bottom";var d=al(),h=d.bottom<u.bottom-i;return h?"bottom":"top";case gC.bottom:return"bottom";case gC.top:default:return"top"}},b=function(t){var e=o.get();GW.setModes(e,[t]),f.setDockingMode(t);var n=d()?wl.TopToBottom:wl.BottomToTop;Sa(e.element,Ff,n)},x=function(){var t=c.getOrThunk(function(){var t=cG(Ju(ju(),"margin-left")).getOr(0);return Ns(ju())-Is(e).left+t});Zu(o.get().element,"max-width",t+"px")},w=function(){var t=GU.getToolbar(a),n=v(t),r=ol(e),i=d()?Math.max(r.y-Ss(o.get().element)+n,0):r.bottom;$u(a.element,{position:"absolute",top:Math.round(i)+"px",left:Math.round(r.x)+"px"})},_=function(){i.broadcastOn([gp()],{})},S=function(t){if(void 0===t&&(t=!1),m()){if(s||x(),p&&GU.refreshToolbar(a),s||w(),l){var e=o.get();t?GW.reset(e):GW.refresh(e)}_()}},C=function(t){if(void 0===t&&(t=!0),!s&&l&&m()){var e=f.getDockingMode(),n=y(o.get());n!==e&&(b(n),t&&S(!0))}},M=function(){g.set(!0),Zu(a.element,"display","flex"),u.addClass(t.getBody(),"mce-edit-focus"),rs(i.element,"display"),C(!1),S()},T=function(){g.set(!1),n.outerContainer&&(Zu(a.element,"display","none"),u.removeClass(t.getBody(),"mce-edit-focus")),Zu(i.element,"display","none")};return{isVisible:m,isPositionedAtTop:d,show:M,hide:T,update:S,updateMode:C,repositionPopups:_}},yG=function(t,e){var n=ol(t);return{pos:e?n.y:n.bottom,bounds:n}},bG=function(t,e,n,r){var o=Zn(yG(e,n.isPositionedAtTop())),i=function(r){var i=yG(e,n.isPositionedAtTop()),a=i.pos,u=i.bounds,s=o.get(),l=s.pos,c=s.bounds,f=u.height!==c.height||u.width!==c.width;o.set({pos:a,bounds:u}),f&&tT(t,r),n.isVisible()&&(l!==a?n.update(!0):f&&(n.updateMode(),n.repositionPopups()))};r||(t.on("activate",n.show),t.on("deactivate",n.hide)),t.on("SkinLoaded ResizeWindow",function(){return n.update(!0)}),t.on("NodeChange keydown",function(t){Zx.requestAnimationFrame(function(){return i(t)})}),t.on("ScrollWindow",function(){return n.updateMode()});var a=SF();a.set(pk(er.fromDom(t.getBody()),"load",i)),t.on("remove",function(){a.clear()})},xG=function(t,e,n,r,o){var i=e.mothership,a=e.uiMothership,u=e.outerContainer,s=Zn(null),l=er.fromDom(o.targetNode),c=vG(t,l,e,r,s),f=SC(t);rG(t);var d=function(){if(s.get())c.show();else{s.set(GU.getHeader(u).getOrDie());var o=TC(t);Gh(o,i),Gh(o,a),oG(t,e,n,r),GU.setMenubar(u,ZU(t,n)),c.show(),bG(t,l,c,f),t.nodeChanged()}},h=function(){return Zx.setEditorTimeout(t,d,0)};t.on("show",d),t.on("hide",c.hide),f||(t.on("focus",h),t.on("blur",c.hide)),t.on("init",function(){(t.hasFocus()||f)&&h()}),UC(t,e);var p={show:function(){c.show()},hide:function(){c.hide()},enable:function(){WC(e,!1)},disable:function(){WC(e,!0)},isDisabled:function(){return $S.isDisabled(u)}};return{editorContainer:u.element.dom,api:p}},wG=Object.freeze({__proto__:null,render:xG}),_G=function(t){var e=[{name:"alignleft",text:"Align left",cmd:"JustifyLeft",icon:"align-left"},{name:"aligncenter",text:"Align center",cmd:"JustifyCenter",icon:"align-center"},{name:"alignright",text:"Align right",cmd:"JustifyRight",icon:"align-right"},{name:"alignjustify",text:"Justify",cmd:"JustifyFull",icon:"align-justify"}];zL.each(e,function(e){t.ui.registry.addToggleButton(e.name,{tooltip:e.text,onAction:function(){return t.execCommand(e.cmd)},icon:e.icon,onSetup:MF(t,e.name)})});var n={name:"alignnone",text:"No alignment",cmd:"JustifyNone",icon:"align-none"};t.ui.registry.addButton(n.name,{tooltip:n.text,onAction:function(){return t.execCommand(n.cmd)},icon:n.icon})},SG=function(t,e){rF(t,e),cF(t,e),EF(t,e),IF(t,e),bF(t,e)},CG=function(t,e){t.setDisabled(!e.queryCommandState("outdent"));var n=function(){t.setDisabled(!e.queryCommandState("outdent"))};return e.on("NodeChange",n),function(){return e.off("NodeChange",n)}},MG=function(t){t.ui.registry.addButton("outdent",{tooltip:"Decrease indent",icon:"outdent",onSetup:function(e){return CG(e,t)},onAction:function(){return t.execCommand("outdent")}}),t.ui.registry.addButton("indent",{tooltip:"Increase indent",icon:"indent",onAction:function(){return t.execCommand("indent")}})},TG=function(t){MG(t)},kG={unsupportedLength:["em","ex","cap","ch","ic","rem","lh","rlh","vw","vh","vi","vb","vmin","vmax","cm","mm","Q","in","pc","pt","px"],fixed:["px","pt"],relative:["%"],empty:[""]},DG=function(){var t="[0-9]+",e="[+-]?"+t,n="[eE]"+e,r="\\.",o=function(t){return"(?:"+t+")?"},i=["Infinity",t+r+o(t)+o(n),r+t+o(n),t+o(n)].join("|"),a="[+-]?(?:"+i+")";return new RegExp("^("+a+")(.*)$")}(),AG=function(t,e){return W(e,function(e){return W(kG[e],function(e){return t===e})})},IG=function(t,e){var n=R.from(DG.exec(t));return n.bind(function(t){var n=Number(t[1]),r=t[2];return AG(r,e)?R.some({value:n,unit:r}):R.none()})},OG=function(t,e){return IG(t,e).map(function(t){var e=t.value,n=t.unit;return e+n})},LG=function(t){return OG(t,["fixed","relative","empty"]).getOr(t)},EG=function(t){var e=lC(t),n=new Map,r=_F(),o=function(){var e=LG(t.queryCommandValue("LineHeight"));R.from(n.get(e)).fold(function(){return r.clear()},function(t){r.set({destroy:function(){t.setActive(!1)}}),t.setActive(!0)})};return t.on("nodeChange",o),j(e,function(i,a){return{type:"togglemenuitem",text:i,onSetup:function(u){return n.set(LG(i),u),a+1===e.length&&o(),function(){0===a&&(t.off("nodeChange",o),r.clear())}},onAction:function(){return t.execCommand("LineHeight",!1,i)}}})},NG=function(t){t.ui.registry.addNestedMenuItem("lineheight",{type:"nestedmenuitem",text:"Line height",getSubmenuItems:function(){return EG(t)}})},RG=function(t){t.ui.registry.addMenuButton("lineheight",{tooltip:"Line height",icon:"line-height",fetch:function(e){return e(EG(t))}})},PG=function(t){NG(t),RG(t)},zG=function(t,e){return function(){t.execCommand("mceToggleFormat",!1,e)}},BG=function(t){zL.each([{name:"bold",text:"Bold",icon:"bold"},{name:"italic",text:"Italic",icon:"italic"},{name:"underline",text:"Underline",icon:"underline"},{name:"strikethrough",text:"Strikethrough",icon:"strike-through"},{name:"subscript",text:"Subscript",icon:"subscript"},{name:"superscript",text:"Superscript",icon:"superscript"}],function(e,n){t.ui.registry.addToggleButton(e.name,{tooltip:e.text,icon:e.icon,onSetup:MF(t,e.name),onAction:zG(t,e.name)})});for(var e=1;e<=6;e++){var n="h"+e;t.ui.registry.addToggleButton(n,{text:n.toUpperCase(),tooltip:"Heading "+e,onSetup:MF(t,n),onAction:zG(t,n)})}},VG=function(t){zL.each([{name:"cut",text:"Cut",action:"Cut",icon:"cut"},{name:"copy",text:"Copy",action:"Copy",icon:"copy"},{name:"paste",text:"Paste",action:"Paste",icon:"paste"},{name:"help",text:"Help",action:"mceHelp",icon:"help"},{name:"selectall",text:"Select all",action:"SelectAll",icon:"select-all"},{name:"newdocument",text:"New document",action:"mceNewDocument",icon:"new-document"},{name:"removeformat",text:"Clear formatting",action:"RemoveFormat",icon:"remove-formatting"},{name:"remove",text:"Remove",action:"Delete",icon:"remove"}],function(e){t.ui.registry.addButton(e.name,{tooltip:e.text,icon:e.icon,onAction:function(){return t.execCommand(e.action)}})})},HG=function(t){zL.each([{name:"blockquote",text:"Blockquote",action:"mceBlockQuote",icon:"quote"}],function(e){t.ui.registry.addToggleButton(e.name,{tooltip:e.text,icon:e.icon,onAction:function(){return t.execCommand(e.action)},onSetup:MF(t,e.name)})})},FG=function(t){BG(t),VG(t),HG(t)},WG=function(t){zL.each([{name:"bold",text:"Bold",action:"Bold",icon:"bold",shortcut:"Meta+B"},{name:"italic",text:"Italic",action:"Italic",icon:"italic",shortcut:"Meta+I"},{name:"underline",text:"Underline",action:"Underline",icon:"underline",shortcut:"Meta+U"},{name:"strikethrough",text:"Strikethrough",action:"Strikethrough",icon:"strike-through",shortcut:""},{name:"subscript",text:"Subscript",action:"Subscript",icon:"subscript",shortcut:""},{name:"superscript",text:"Superscript",action:"Superscript",icon:"superscript",shortcut:""},{name:"removeformat",text:"Clear formatting",action:"RemoveFormat",icon:"remove-formatting",shortcut:""},{name:"newdocument",text:"New document",action:"mceNewDocument",icon:"new-document",shortcut:""},{name:"cut",text:"Cut",action:"Cut",icon:"cut",shortcut:"Meta+X"},{name:"copy",text:"Copy",action:"Copy",icon:"copy",shortcut:"Meta+C"},{name:"paste",text:"Paste",action:"Paste",icon:"paste",shortcut:"Meta+V"},{name:"selectall",text:"Select all",action:"SelectAll",icon:"select-all",shortcut:"Meta+A"}],function(e){t.ui.registry.addMenuItem(e.name,{text:e.text,icon:e.icon,shortcut:e.shortcut,onAction:function(){return t.execCommand(e.action)}})}),t.ui.registry.addMenuItem("codeformat",{text:"Code",icon:"sourcecode",onAction:zG(t,"code")})},UG=function(t){FG(t),WG(t)},GG=function(t,e,n){var r=function(){return!!e.undoManager&&e.undoManager[n]()},o=function(){t.setDisabled(e.mode.isReadOnly()||!r())};return t.setDisabled(!r()),e.on("Undo Redo AddUndo TypingUndo ClearUndos SwitchMode",o),function(){return e.off("Undo Redo AddUndo TypingUndo ClearUndos SwitchMode",o)}},jG=function(t){t.ui.registry.addMenuItem("undo",{text:"Undo",icon:"undo",shortcut:"Meta+Z",onSetup:function(e){return GG(e,t,"hasUndo")},onAction:function(){return t.execCommand("undo")}}),t.ui.registry.addMenuItem("redo",{text:"Redo",icon:"redo",shortcut:"Meta+Y",onSetup:function(e){return GG(e,t,"hasRedo")},onAction:function(){return t.execCommand("redo")}})},XG=function(t){t.ui.registry.addButton("undo",{tooltip:"Undo",icon:"undo",onSetup:function(e){return GG(e,t,"hasUndo")},onAction:function(){return t.execCommand("undo")}}),t.ui.registry.addButton("redo",{tooltip:"Redo",icon:"redo",onSetup:function(e){return GG(e,t,"hasRedo")},onAction:function(){return t.execCommand("redo")}})},YG=function(t){jG(t),XG(t)},qG=function(t,e){t.setActive(e.hasVisual);var n=function(e){t.setActive(e.hasVisual)};return e.on("VisualAid",n),function(){return e.off("VisualAid",n)}},ZG=function(t){t.ui.registry.addToggleMenuItem("visualaid",{text:"Visual aids",onSetup:function(e){return qG(e,t)},onAction:function(){t.execCommand("mceToggleVisualAid")}})},$G=function(t){t.ui.registry.addButton("visualaid",{tooltip:"Visual aids",text:"Visual aids",onAction:function(){return t.execCommand("mceToggleVisualAid")}})},KG=function(t){$G(t),ZG(t)},JG=function(t,e){_G(t),UG(t),SG(t,e),YG(t),OT(t),KG(t),TG(t),PG(t)},QG=function(t,e){return{anchor:"makeshift",x:t,y:e}},tj=function(t,e,n){return QG(t.x+e,t.y+n)},ej=function(t){return"longpress"===t.type||0===t.type.indexOf("touch")},nj=function(t){if(ej(t)){var e=t.touches[0];return QG(e.pageX,e.pageY)}return QG(t.pageX,t.pageY)},rj=function(t){if(ej(t)){var e=t.touches[0];return QG(e.clientX,e.clientY)}return QG(t.clientX,t.clientY)},oj=function(t,e){var n=IS.DOM.getPos(t);return tj(e,n.x,n.y)},ij=function(t,e){return"contextmenu"===e.type||"longpress"===e.type?t.inline?nj(e):oj(t.getContentAreaContainer(),rj(e)):aj(t)},aj=function(t){return{anchor:"selection",root:er.fromDom(t.selection.getNode())}},uj=function(t){return{anchor:"node",node:R.some(er.fromDom(t.selection.getNode())),root:er.fromDom(t.getBody())}},sj=function(t,e,n,r,o,i){var a=n(),u=i?uj(t):ij(t,e);LN(a,s_.CLOSE_ON_EXECUTE,r,!1).map(function(t){e.preventDefault(),zx.showMenuAt(o,u,{menu:{markers:E_("normal")},data:t})})},lj={onLtr:function(){return[xc,gc,mc,vc,yc,bc,Yx,qx,jx,Ux,Xx,Gx]},onRtl:function(){return[xc,mc,gc,yc,vc,bc,Yx,qx,Xx,Gx,jx,Ux]}},cj=12,fj={valignCentre:[],alignCentre:[],alignLeft:["tox-pop--align-left"],alignRight:["tox-pop--align-right"],right:["tox-pop--right"],left:["tox-pop--left"],bottom:["tox-pop--bottom"],top:["tox-pop--top"]},dj=function(t,e){var n=t.selection;if(n.isCollapsed()||e.touches.length<1)return!1;var r=e.touches[0],o=n.getRng(),i=oh(t.getWin(),Dd.domRange(o));return i.exists(function(t){return t.left<=r.clientX&&t.right>=r.clientX&&t.top<=r.clientY&&t.bottom>=r.clientY})},hj=function(t,e){return k({bubble:Rf(0,cj,fj),layouts:lj,overrides:{maxWidthFunction:dB(),maxHeightFunction:If()}},ij(t,e))},pj=function(t){var e=t.selection.getRng(),n=function(){Zx.setEditorTimeout(t,function(){t.selection.setRng(e)},10),i()};t.once("touchend",n);var r=function(t){t.preventDefault(),t.stopImmediatePropagation()};t.on("mousedown",r,!0);var o=function(){return i()};t.once("longpresscancel",o);var i=function(){t.off("touchend",n),t.off("longpresscancel",o),t.off("mousedown",r)}},gj=function(t,e,n,r,o,i,a){var u=i?uj(t):hj(t,e);LN(n,s_.CLOSE_ON_EXECUTE,r,!0).map(function(n){e.preventDefault(),zx.showMenuWithinBounds(o,u,{menu:{markers:E_("normal"),highlightImmediately:a},data:n,type:"horizontal"},function(){return R.some(EH(t,r.shared))}),t.fire(pB)})},mj=function(t,e,n,r,o,i){var a=Yr(),u=a.os.isiOS(),s=a.os.isOSX(),l=a.os.isAndroid(),c=a.deviceType.isTouch(),f=function(){return!(l||u||s&&c)},d=function(){var a=n();gj(t,e,a,r,o,i,f())};if(!s&&!u||i)l&&!i&&t.selection.setCursorLocation(e.target,0),d();else{var h=function(){pj(t),d()};dj(t,e)?h():(t.once("selectionchange",h),t.once("touchend",function(){return t.off("selectionchange",h)}))}},vj=function(t){return"string"===typeof t?t.split(/[ ,]/):t},yj=function(t){return t.getParam("contextmenu_never_use_native",!1,"boolean")},bj=function(t,e,n){var r=t.ui.registry.getAll().contextMenus;return R.from(t.getParam(e)).map(vj).getOrThunk(function(){return Z(vj(n),function(t){return Ht(r,t)})})},xj=function(t){return!1===t.getParam("contextmenu")},wj=function(t){return bj(t,"contextmenu","link linkchecker image imagetools table spellchecker configurepermanentpen")},_j=function(t){return t.getParam("contextmenu_avoid_overlap","","string")},Sj=function(t){return i(t)?"|"===t:"separator"===t.type},Cj={type:"separator"},Mj=function(t){var e=function(t){return{text:t.text,icon:t.icon,disabled:t.disabled,shortcut:t.shortcut}};if(i(t))return t;switch(t.type){case"separator":return Cj;case"submenu":return k(k({type:"nestedmenuitem"},e(t)),{getSubmenuItems:function(){var e=t.getSubmenuItems();return i(e)?e:j(e,Mj)}});default:return k(k({type:"menuitem"},e(t)),{onAction:m(t.onAction)})}},Tj=function(t,e){if(0===e.length)return t;var n=ct(t).filter(function(t){return!Sj(t)}),r=n.fold(function(){return[]},function(t){return[Cj]});return t.concat(r).concat(e).concat([Cj])},kj=function(t,e,n){var r=K(e,function(e,r){return Vt(t,r.toLowerCase()).map(function(t){var r=t.update(n);if(i(r))return Tj(e,r.split(" "));if(r.length>0){var o=j(r,Mj);return Tj(e,o)}return e}).getOrThunk(function(){return e.concat([r])})},[]);return r.length>0&&Sj(r[r.length-1])&&r.pop(),r},Dj=function(t,e){return e.ctrlKey&&!yj(t)},Aj=function(t,e){return"longpress"!==e.type&&(2!==e.button||e.target===t.getBody()&&""===e.pointerType)},Ij=function(t,e){return Aj(t,e)?t.selection.getStart(!0):e.target},Oj=function(t,e){var n=_j(t);if(Aj(t,e))return!0;if(n){var r=Ij(t,e);return mk(er.fromDom(r),n)}return!1},Lj=function(t,e,n){var r=Yr(),o=r.deviceType.isTouch,i=bs(zx.sketch({dom:{tag:"div"},lazySink:e,onEscape:function(){return t.focus()},onShow:function(){return n.setContextMenuState(!0)},onHide:function(){return n.setContextMenuState(!1)},fireDismissalEventInstead:{},inlineBehaviours:Hc([Sb("dismissContextMenu",[xi(ni(),function(e,n){hp.close(e),t.focus()})])])})),a=function(t){return zx.hide(i)},u=function(e){if(yj(t)&&e.preventDefault(),!Dj(t,e)&&!xj(t)){var r=Oj(t,e),a=function(){var n=Ij(t,e),r=t.ui.registry.getAll(),o=wj(t);return kj(r.contextMenus,o,n)},u=o()?mj:sj;u(t,e,a,n,i,r)}};t.on("init",function(){var e="ResizeEditor ScrollContent ScrollWindow longpresscancel"+(o()?"":" ResizeWindow");t.on(e,a),t.on("longpress contextmenu",u)})},Ej=Ut.generate([{offset:["x","y"]},{absolute:["x","y"]},{fixed:["x","y"]}]),Nj=function(t){return function(e){return e.translate(-t.left,-t.top)}},Rj=function(t){return function(e){return e.translate(t.left,t.top)}},Pj=function(t){return function(e,n){return K(t,function(t,e){return e(t)},ks(e,n))}},zj=function(t,e,n){return t.fold(Pj([Rj(n),Nj(e)]),Pj([Nj(e)]),Pj([]))},Bj=function(t,e,n){return t.fold(Pj([Rj(n)]),Pj([]),Pj([Rj(e)]))},Vj=function(t,e,n){return t.fold(Pj([]),Pj([Nj(n)]),Pj([Rj(e),Nj(n)]))},Hj=function(t,e,n,r,o,i){var a=Bj(t,o,i),u=Bj(e,o,i);return Math.abs(a.left-u.left)<=n&&Math.abs(a.top-u.top)<=r},Fj=function(t,e,n,r,o,i){var a=Bj(t,o,i),u=Bj(e,o,i),s=Math.abs(a.left-u.left),l=Math.abs(a.top-u.top);return ks(s,l)},Wj=function(t,e,n){var r=t.fold(function(t,e){return{position:R.some("absolute"),left:R.some(t+"px"),top:R.some(e+"px")}},function(t,e){return{position:R.some("absolute"),left:R.some(t-n.left+"px"),top:R.some(e-n.top+"px")}},function(t,e){return{position:R.some("fixed"),left:R.some(t+"px"),top:R.some(e+"px")}});return k({right:R.none(),bottom:R.none()},r)},Uj=function(t,e,n){return t.fold(function(t,r){return jj(t+e,r+n)},function(t,r){return Xj(t+e,r+n)},function(t,r){return Yj(t+e,r+n)})},Gj=function(t,e,n,r){var o=function(t,o){return function(i,a){var u=t(e,n,r);return o(i.getOr(u.left),a.getOr(u.top))}};return t.fold(o(Vj,jj),o(Bj,Xj),o(zj,Yj))},jj=Ej.offset,Xj=Ej.absolute,Yj=Ej.fixed,qj=function(t,e){var n=Ma(t,e);return l(n)?NaN:parseInt(n,10)},Zj=function(t,e){var n=t.element,r=qj(n,e.leftAttr),o=qj(n,e.topAttr);return isNaN(r)||isNaN(o)?R.none():R.some(ks(r,o))},$j=function(t,e,n){var r=t.element;Sa(r,e.leftAttr,n.left+"px"),Sa(r,e.topAttr,n.top+"px")},Kj=function(t,e){var n=t.element;Da(n,e.leftAttr),Da(n,e.topAttr)},Jj=function(t,e,n,r){return Zj(t,e).fold(function(){return n},function(t){return Yj(t.left+r.left,t.top+r.top)})},Qj=function(t,e,n,r,o,i){var a=Jj(t,e,n,r),u=e.mustSnap?nX(t,e,a,o,i):rX(t,e,a,o,i),s=zj(a,o,i);return $j(t,e,s),u.fold(function(){return{coord:Yj(s.left,s.top),extra:R.none()}},function(t){return{coord:t.output,extra:t.extra}})},tX=function(t,e){Kj(t,e)},eX=function(t,e,n,r){return dt(t,function(t){var o=t.sensor,i=Hj(e,o,t.range.left,t.range.top,n,r);return i?R.some({output:Gj(t.output,e,n,r),extra:t.extra}):R.none()})},nX=function(t,e,n,r,o){var i=e.getSnapPoints(t),a=eX(i,n,r,o);return a.orThunk(function(){var t=K(i,function(t,e){var i=e.sensor,a=Fj(n,i,e.range.left,e.range.top,r,o);return t.deltas.fold(function(){return{deltas:R.some(a),snap:R.some(e)}},function(n){var r=(a.left+a.top)/2,o=(n.left+n.top)/2;return r<=o?{deltas:R.some(a),snap:R.some(e)}:t})},{deltas:R.none(),snap:R.none()});return t.snap.map(function(t){return{output:Gj(t.output,n,r,o),extra:t.extra}})})},rX=function(t,e,n,r,o){var i=e.getSnapPoints(t);return eX(i,n,r,o)},oX=function(t,e,n){return{coord:Gj(t.output,t.output,e,n),extra:t.extra}},iX=function(t,e,n,r){var o=e.getTarget(t.element);if(e.repositionTarget){var i=Fi(t.element),a=Gs(i),u=hW(o),s=oX(r,a,u),l=Wj(s.coord,a,u);Ku(o,l)}},aX=Object.freeze({__proto__:null,snapTo:iX}),uX="data-initial-z-index",sX=function(t){ji(t.element).filter(zi).each(function(t){Ta(t,uX).fold(function(){return rs(t,"z-index")},function(e){return Zu(t,"z-index",e)}),Da(t,uX)})},lX=function(t){ji(t.element).filter(zi).each(function(e){ts(e,"z-index").each(function(t){Sa(e,uX,t)}),Zu(e,"z-index",Ju(t.element,"z-index"))})},cX=function(t,e){t.getSystem().addToGui(e),lX(e)},fX=function(t){sX(t),t.getSystem().removeFromGui(t)},dX=function(t,e,n){return t.getSystem().build(Gk.sketch({dom:{styles:{left:"0px",top:"0px",width:"100%",height:"100%",position:"fixed","z-index":"1000000000000000"},classes:[e]},events:n}))},hX=Pn("snaps",[bn("getSnapPoints"),Bl("onSensor"),bn("leftAttr"),bn("topAttr"),Bn("lazyViewport",al),Bn("mustSnap",!1)]),pX=[Bn("useFixed",C),bn("blockerClass"),Bn("getTarget",x),Bn("onDrag",g),Bn("repositionTarget",!0),Bn("onDrop",g),Gn("getBounds",al),hX],gX=function(t){return dm(ts(t,"left"),ts(t,"top"),ts(t,"position"),function(t,e,n){var r="fixed"===n?Yj:jj;return r(parseInt(t,10),parseInt(e,10))}).getOrThunk(function(){var e=Is(t);return Xj(e.left,e.top)})},mX=function(t,e,n,r,o){var i=o.bounds,a=Bj(e,n,r),u=vf(a.left,i.x,i.x+i.width-o.width),s=vf(a.top,i.y,i.y+i.height-o.height),l=Xj(u,s);return e.fold(function(){var t=Vj(l,n,r);return jj(t.left,t.top)},function(){return l},function(){var t=zj(l,n,r);return Yj(t.left,t.top)})},vX=function(t,e,n,r,o,i,a){var u=e.fold(function(){var t=Uj(n,i.left,i.top),e=zj(t,r,o);return Yj(e.left,e.top)},function(e){var a=Qj(t,e,n,i,r,o);return a.extra.each(function(n){e.onSensor(t,n)}),a.coord});return mX(t,u,r,o,a)},yX=function(t,e,n,r){var o=e.getTarget(t.element);if(e.repositionTarget){var i=Fi(t.element),a=Gs(i),u=hW(o),s=gX(o),l=vX(t,e.snaps,s,a,u,r,n),c=Wj(l,a,u);Ku(o,c)}e.onDrag(t,o,r)},bX=function(t,e){return{bounds:t.getBounds(),height:Cs(e.element),width:Rs(e.element)}},xX=function(t,e,n,r,o){var i=n.update(r,o),a=n.getStartData().getOrThunk(function(){return bX(e,t)});i.each(function(n){yX(t,e,a,n)})},wX=function(t,e,n,r){e.each(fX),n.snaps.each(function(e){tX(t,e)});var o=n.getTarget(t.element);r.reset(),n.onDrop(t,o)},_X=function(t){return function(e,n){var r=function(t){n.setStartData(bX(e,t))};return mi(A([xi(Jo(),function(t){n.getStartData().each(function(){return r(t)})})],t(e,n,r)))}},SX=function(t){return mi([xi(So(),t.forceDrop),xi(To(),t.drop),xi(Co(),function(e,n){t.move(n.event)}),xi(Mo(),t.delayDrop)])},CX=function(t){return R.from(ks(t.x,t.y))},MX=function(t,e){return ks(e.left-t.left,e.top-t.top)},TX=Object.freeze({__proto__:null,getData:CX,getDelta:MX}),kX=function(t,e,n){return[xi(So(),function(r,o){var i=o.event.raw;if(0===i.button){o.stop();var a=function(){return wX(r,R.some(l),t,e)},u=vk(a,200),s={drop:a,delayDrop:u.schedule,forceDrop:a,move:function(n){u.cancel(),xX(r,t,e,TX,n)}},l=dX(r,t.blockerClass,SX(s)),c=function(){n(r),cX(r,l)};c()}})]},DX=A(pX,[Wl("dragger",{handlers:_X(kX)})]),AX=function(t){return mi([xi(bo(),t.forceDrop),xi(wo(),t.drop),xi(_o(),t.drop),xi(xo(),function(e,n){t.move(n.event)})])},IX=function(t){var e=t[0];return R.some(ks(e.clientX,e.clientY))},OX=function(t){var e=t.raw,n=e.touches;return 1===n.length?IX(n):R.none()},LX=function(t,e){return ks(e.left-t.left,e.top-t.top)},EX=Object.freeze({__proto__:null,getData:OX,getDelta:LX}),NX=function(t,e,n){var r=Zn(R.none());return[xi(bo(),function(o,i){i.stop();var a=function(){wX(o,r.get(),t,e),r.set(R.none())},u={drop:a,delayDrop:g,forceDrop:a,move:function(n){xX(o,t,e,EX,n)}},s=dX(o,t.blockerClass,AX(u));r.set(R.some(s));var l=function(){n(o),cX(o,s)};l()}),xi(xo(),function(n,r){r.stop(),xX(n,t,e,EX,r.event)}),xi(wo(),function(n,o){o.stop(),wX(n,r.get(),t,e),r.set(R.none())}),xi(_o(),function(n){wX(n,r.get(),t,e),r.set(R.none())})]},RX=A(pX,[Wl("dragger",{handlers:_X(NX)})]),PX=function(t,e,n){return A(kX(t,e,n),NX(t,e,n))},zX=A(pX,[Wl("dragger",{handlers:_X(PX)})]),BX=DX,VX=RX,HX=zX,FX=Object.freeze({__proto__:null,mouse:BX,touch:VX,mouseOrTouch:HX}),WX=function(){var t=R.none(),e=R.none(),n=function(){t=R.none(),e=R.none()},r=function(e,n){var r=t.map(function(t){return e.getDelta(t,n)});return t=R.some(n),r},o=function(t,e){return t.getData(e).bind(function(e){return r(t,e)})},i=function(t){e=R.some(t)},a=function(){return e},u=b({});return ou({readState:u,reset:n,update:o,getStartData:a,setStartData:i})},UX=Object.freeze({__proto__:null,init:WX}),GX=Gc({branchKey:"mode",branches:FX,name:"dragging",active:{events:function(t,e){var n=t.dragger;return n.handlers(t,e)}},extra:{snap:function(t){return{sensor:t.sensor,range:t.range,output:t.output,extra:R.from(t.extra)}}},state:UX,apis:aX}),jX=40,XX=jX/2,YX=function(t,e,n,r,o,i){return t.fold(function(){return GX.snap({sensor:Xj(n-XX,r-XX),range:ks(o,i),output:Xj(R.some(n),R.some(r)),extra:{td:e}})},function(t){var o=n-XX,i=r-XX,a=jX,u=jX,s=t.element.dom.getBoundingClientRect();return GX.snap({sensor:Xj(o,i),range:ks(a,u),output:Xj(R.some(n-s.width/2),R.some(r-s.height/2)),extra:{td:e}})})},qX=function(t,e,n){var r=function(t,e){return t.exists(function(t){return oo(t,e)})};return{getSnapPoints:t,leftAttr:"data-drag-left",topAttr:"data-drag-top",onSensor:function(t,o){var i=o.td;r(e.get(),i)||(e.set(R.some(i)),n(i))},mustSnap:!0}},ZX=function(t){return Jx(Kx.sketch({dom:{tag:"div",classes:["tox-selector"]},buttonBehaviours:Hc([GX.config({mode:"mouseOrTouch",blockerClass:"blocker",snaps:t}),_A.config({})]),eventOrder:{mousedown:["dragging","alloy.base.behaviour"],touchstart:["dragging","alloy.base.behaviour"]}}))},$X=function(t,e){var n=Zn([]),r=Zn([]),o=Zn(!1),i=Zn(R.none()),a=Zn(R.none()),u=function(t){var n=il(t);return YX(h.getOpt(e),t,n.x,n.y,n.width,n.height)},s=function(){return j(n.get(),function(t){return u(t)})},l=function(t){var n=il(t);return YX(p.getOpt(e),t,n.right,n.bottom,n.width,n.height)},c=function(){return j(r.get(),function(t){return l(t)})},f=qX(s,i,function(e){a.get().each(function(n){t.fire("TableSelectorChange",{start:e,finish:n})})}),d=qX(c,a,function(e){i.get().each(function(n){t.fire("TableSelectorChange",{start:n,finish:e})})}),h=ZX(f),p=ZX(d),g=bs(h.asSpec()),m=bs(p.asSpec()),v=function(e,n,r,o){var i=n.dom.getBoundingClientRect();rs(e.element,"display");var a=Gi(er.fromDom(t.getBody())).dom.innerHeight,u=r(i),s=o(i,a);(u||s)&&Zu(e.element,"display","none")},y=function(t,e,n,r){var o=n(e);GX.snapTo(t,o);var i=function(t){return t[r]<0},a=function(t,e){return t[r]>e};v(t,e,i,a)},b=function(t){return y(g,t,u,"top")},x=function(){return i.get().each(b)},w=function(t){return y(m,t,l,"bottom")},_=function(){return a.get().each(w)};Yr().deviceType.isTouch()&&(t.on("TableSelectionChange",function(t){o.get()||(Vh(e,g),Vh(e,m),o.set(!0)),i.set(R.some(t.start)),a.set(R.some(t.finish)),t.otherCells.each(function(e){n.set(e.upOrLeftCells),r.set(e.downOrRightCells),b(t.start),w(t.finish)})}),t.on("ResizeEditor ResizeWindow ScrollContent",function(){x(),_()}),t.on("TableSelectionClear",function(){o.get()&&(Wh(g),Wh(m),o.set(!1)),i.set(R.none()),a.set(R.none())}))},KX=function(t){if(1===t.nodeType){if("BR"===t.nodeName||t.getAttribute("data-mce-bogus"))return!0;if("bookmark"===t.getAttribute("data-mce-type"))return!0}return!1},JX=function(t,e,n){e.delimiter||(e.delimiter="»");var r=function(r){var o=r||[],i=j(o,function(e,r){return Kx.sketch({dom:{tag:"div",classes:["tox-statusbar__path-item"],attributes:{role:"button","data-index":r,"tab-index":-1,"aria-level":r+1},innerHtml:e.name},action:function(n){t.focus(),t.selection.select(e.element),t.nodeChanged()},buttonBehaviours:Hc([ZC.button(n.isDisabled),GC()])})}),a={dom:{tag:"div",classes:["tox-statusbar__path-divider"],attributes:{"aria-hidden":!0},innerHtml:" "+e.delimiter+" "}};return K(i.slice(1),function(t,e){var n=t;return n.push(a),n.push(e),n},[i[0]])},o=function(e){var n=[],r=e.length;while(r-- >0){var o=e[r];if(1===o.nodeType&&!KX(o)){var i=t.fire("ResolveName",{name:o.nodeName.toLowerCase(),target:o});if(i.isDefaultPrevented()||n.push({name:i.name,element:o}),i.isPropagationStopped())break}}return n};return{dom:{tag:"div",classes:["tox-statusbar__path"],attributes:{role:"navigation"}},behaviours:Hc([fb.config({mode:"flow",selector:"div[role=button]"}),$S.config({disabled:n.isDisabled}),GC(),tD.config({}),wb.config({}),Sb("elementPathEvents",[Ii(function(e,n){t.shortcuts.add("alt+F11","focus statusbar elementpath",function(){return fb.focusIn(e)}),t.on("NodeChange",function(t){var n=o(t.parents);n.length>0?wb.set(e,r(n)):wb.set(e,[])})})])]),components:[]}};(function(t){t[t["None"]=0]="None",t[t["Both"]=1]="Both",t[t["Vertical"]=2]="Vertical"})(KH||(KH={}));var QX=function(t,e,n,r,o){var i={};return i.height=dG(r+e.top,oC(t),aC(t)),n===KH.Both&&(i.width=dG(o+e.left,rC(t),iC(t))),i},tY=function(t,e,n){var r=er.fromDom(t.getContainer()),o=QX(t,e,n,Ss(r),Ns(r));It(o,function(t,e){return Zu(r,e,fG(t))}),QM(t)},eY=function(t){var e=!t.hasPlugin("autoresize"),n=t.getParam("resize",e);return!1===n?KH.None:"both"===n?KH.Both:KH.Vertical},nY=function(t,e,n,r){var o=20,i=ks(n*o,r*o);return tY(t,i,e),R.some(!0)},rY=function(t,e){var n=eY(t);return n===KH.None?R.none():R.some({dom:{tag:"div",classes:["tox-statusbar__resize-handle"],attributes:{title:e.translate("Resize")},innerHtml:tw("resize-handle",e.icons)},behaviours:Hc([GX.config({mode:"mouse",repositionTarget:!1,onDrag:function(e,r,o){return tY(t,o,n)},blockerClass:"tox-blocker"}),fb.config({mode:"special",onLeft:function(){return nY(t,n,-1,0)},onRight:function(){return nY(t,n,1,0)},onUp:function(){return nY(t,n,0,-1)},onDown:function(){return nY(t,n,0,1)}}),tD.config({}),Lb.config({})])})},oY=function(t,e){var n,r=function(t,n,r){return wb.set(t,[ms(e.translate(["{0} "+r,n[r]]))])};return Kx.sketch({dom:{tag:"button",classes:["tox-statusbar__wordcount"]},components:[],buttonBehaviours:Hc([ZC.button(e.isDisabled),GC(),tD.config({}),wb.config({}),Zp.config({store:{mode:"memory",initialValue:{mode:"words",count:{words:0,characters:0}}}}),Sb("wordcount-events",[Ei(function(t){var e=Zp.getValue(t),n="words"===e.mode?"characters":"words";Zp.setValue(t,{mode:n,count:e.count}),r(t,e.count,n)}),Ii(function(e){t.on("wordCountUpdate",function(t){var n=Zp.getValue(e).mode;Zp.setValue(e,{mode:n,count:t.wordCount}),r(e,t.wordCount,n)})})])]),eventOrder:(n={},n[Uo()]=["disabling","alloy.base.behaviour","wordcount-events"],n)})},iY=function(t,e){var n=function(){var t=OS.translate(["Powered by {0}","Tiny"]),e='<a href="https://www.tiny.cloud/?utm_campaign=editor_referral&amp;utm_medium=poweredby&amp;utm_source=tinymce&amp;utm_content=v5" rel="noopener" target="_blank" tabindex="-1" aria-label="'+t+'">'+t+"</a>";return{dom:{tag:"span",classes:["tox-statusbar__branding"],innerHtml:e}}},r=function(){var r=[];return t.getParam("elementpath",!0,"boolean")&&r.push(JX(t,{},e)),t.hasPlugin("wordcount")&&r.push(oY(t,e)),t.getParam("branding",!0,"boolean")&&r.push(n()),r.length>0?[{dom:{tag:"div",classes:["tox-statusbar__text-container"]},components:r}]:[]},o=function(){var n=r(),o=rY(t,e);return n.concat(o.toArray())};return{dom:{tag:"div",classes:["tox-statusbar"]},components:o()}},aY=function(t){var e,n=t.inline,r=n?wG:lG,o=DC(t)?iU:fW,i=R.none(),a=Yr(),u=a.browser.isIE(),s=u?["tox-platform-ie"]:[],l=a.deviceType.isTouch(),c="tox-platform-touch",f=l?[c]:[],d=xC(t),h=TC(t),p=OS.isRtl()?{attributes:{dir:"rtl"}}:{},m={attributes:(e={},e[Ff]=d?wl.BottomToTop:wl.TopToBottom,e)},v=function(){return i.bind(GU.getHeader)},y=function(){return o.isDocked(v)},b=function(){Zu(J.element,"width",document.body.clientWidth+"px")},x=function(){var t=oo(ju(),h)&&"grid"===Ju(h,"display"),e={dom:k({tag:"div",classes:["tox","tox-silver-sink","tox-tinymce-aux"].concat(s).concat(f)},p),behaviours:Hc([Eh.config({useFixed:function(){return y()}})])},n={dom:{styles:{width:document.body.clientWidth+"px"}},events:mi([xi(Qo(),b)])};return qt(e,t?n:{})},w=bs(x()),_=function(){return mt.value(w)},S=Jx({dom:{tag:"div",classes:["tox-anchorbar"]}}),C=function(){return i.bind(function(t){return S.getOpt(t)}).getOrDie("Could not find a anchor bar element")},M=function(){return i.bind(function(t){return GU.getToolbar(t)}).getOrDie("Could not find more toolbar element")},T=function(){return i.bind(function(t){return GU.getThrobber(t)}).getOrDie("Could not find throbber element")},D=fB(w,t,C),A=GU.parts.menubar({dom:{tag:"div",classes:["tox-menubar"]},backstage:D,onEscape:function(){t.focus()}}),I=mC(t),O=GU.parts.toolbar(k({dom:{tag:"div",classes:["tox-toolbar"]},getSink:_,providers:D.shared.providers,onEscape:function(){t.focus()},type:I,lazyToolbar:M,lazyHeader:function(){return v().getOrDie("Could not find header element")}},m)),L=GU.parts["multiple-toolbar"]({dom:{tag:"div",classes:["tox-toolbar-overlord"]},providers:D.shared.providers,onEscape:function(){t.focus()},type:I}),E=GU.parts.socket({dom:{tag:"div",classes:["tox-edit-area"]}}),N=GU.parts.sidebar({dom:{tag:"div",classes:["tox-sidebar"]}}),P=GU.parts.throbber({dom:{tag:"div",classes:["tox-throbber"]},backstage:D}),z=t.getParam("statusbar",!0,"boolean"),B=z&&!n?R.some(iY(t,D.shared.providers)):R.none(),V={dom:{tag:"div",classes:["tox-sidebar-wrap"]},components:[E,N]},H=pC(t),F=dC(t),W=fC(t),U=function(){return H?[L]:F?[O]:[]},G=GU.parts.header({dom:k({tag:"div",classes:["tox-editor-header"]},m),components:et([W?[A]:[],U(),MC(t)?[]:[S.asSpec()]]),sticky:DC(t),editor:t,sharedBackstage:D.shared}),j=et([d?[]:[G],n?[]:[V],d?[G]:[]]),X={dom:{tag:"div",classes:["tox-editor-container"]},components:j},Y=et([[X],n?[]:B.toArray(),[P]]),q=kC(t),Z=k(k({role:"application"},OS.isRtl()?{dir:"rtl"}:{}),q?{"aria-hidden":"true"}:{}),$=bs(GU.sketch({dom:{tag:"div",classes:["tox","tox-tinymce"].concat(n?["tox-tinymce-inline"]:[]).concat(d?["tox-tinymce--toolbar-bottom"]:[]).concat(f).concat(s),styles:k({visibility:"hidden"},q?{opacity:"0",border:"0"}:{}),attributes:Z},components:Y,behaviours:Hc([GC(),$S.config({disableClass:"tox-tinymce--disabled"}),fb.config({mode:"cyclic",selector:".tox-menubar, .tox-toolbar, .tox-toolbar__primary, .tox-toolbar__overflow--open, .tox-sidebar__overflow--open, .tox-statusbar__path, .tox-statusbar__wordcount, .tox-statusbar__branding a, .tox-statusbar__resize-handle"})])}));i=R.some($),t.shortcuts.add("alt+F9","focus menubar",function(){GU.focusMenubar($)}),t.shortcuts.add("alt+F10","focus toolbar",function(){GU.focusToolbar($)}),t.addCommand("ToggleToolbarDrawer",function(){GU.toggleToolbarDrawer($)}),t.addQueryStateHandler("ToggleToolbarDrawer",function(){return GU.isToolbarDrawerToggled($)});var K=jk($),J=jk(w);JF(t,K,J);var Q=function(){var t={broadcastAll:J.broadcast,broadcastOn:J.broadcastOn,register:g};return{channels:t}},tt=function(){var e=fG(pG(t)),n=fG(mG(t));return t.inline||(ns("div","width",n)&&Zu($.element,"width",n),ns("div","height",e)?Zu($.element,"height",e):Zu($.element,"height","200px")),e},nt=function(){o.setup(t,D.shared,v),JG(t,D),Lj(t,_,D),yU(t),NU(t,T,D.shared),Ot(yC(t),function(e,n){t.ui.registry.addGroupToolbarButton(n,e)});var e=t.ui.registry.getAll(),n=e.buttons,i=e.menuItems,a=e.contextToolbars,u=e.sidebars,s=hC(t),l={menuItems:i,menus:IC(t),menubar:OC(t),toolbar:s.getOrThunk(function(){return LC(t)}),allowToolbarGroups:I===u_.floating,buttons:n,sidebar:u};KF(t,a,w,{backstage:D}),$X(t,w);var c=t.getElement(),f=tt(),d={mothership:K,uiMothership:J,outerContainer:$},h={targetNode:c,height:f};return r.render(t,d,l,D,h)};return{mothership:K,uiMothership:J,backstage:D,renderUI:nt,getUi:Q}},uY=function(t,e){var n=R.from(Ma(t,"id")).fold(function(){var t=za("dialog-describe");return Sa(e,"id",t),t},x);Sa(t,"aria-describedby",n)},sY=function(t,e){var n=Ta(t,"id").fold(function(){var t=za("dialog-label");return Sa(e,"id",t),t},x);Sa(t,"aria-labelledby",n)},lY=b([bn("lazySink"),In("dragBlockClass"),Gn("getBounds",al),Bn("useTabstopAt",M),Bn("eventOrder",{}),$p("modalBehaviours",[fb]),Vl("onExecute"),Fl("onEscape")]),cY={sketch:x},fY=b([Ig({name:"draghandle",overrides:function(t,e){return{behaviours:Hc([GX.config({mode:"mouse",getTarget:function(t){return hl(t,'[role="dialog"]').getOr(t)},blockerClass:t.dragBlockClass.getOrDie(new Error("The drag blocker class was not specified for a dialog with a drag handle: \n"+JSON.stringify(e,null,2)).message),getBounds:t.getDragBounds})])}}}),Dg({schema:[bn("dom")],name:"title"}),Dg({factory:cY,schema:[bn("dom")],name:"close"}),Dg({factory:cY,schema:[bn("dom")],name:"body"}),Ig({factory:cY,schema:[bn("dom")],name:"footer"}),Ag({factory:{sketch:function(t,e){return k(k({},t),{dom:e.dom,components:e.components})}},schema:[Bn("dom",{tag:"div",styles:{position:"fixed",left:"0px",top:"0px",right:"0px",bottom:"0px"}}),Bn("components",[])],name:"blocker"})]),dY=function(t,e,n,r){Sa(t.element,"aria-busy",!0);var o=e.getRoot(t).getOr(t),i=Hc([fb.config({mode:"special",onTab:function(){return R.some(!0)},onShiftTab:function(){return R.some(!0)}}),Lb.config({})]),a=r(o,i),u=o.getSystem().build(a);wb.append(o,xs(u)),u.hasConfigured(fb)&&fb.focusIn(u),n.isBlocked()||e.onBlock(t),n.blockWith(function(){return wb.remove(o,u)})},hY=function(t,e,n){Da(t.element,"aria-busy"),n.isBlocked()&&e.onUnblock(t),n.clear()},pY=Object.freeze({__proto__:null,block:dY,unblock:hY}),gY=[Gn("getRoot",R.none),Bl("onBlock"),Bl("onUnblock")],mY=function(){var t=_F(),e=function(e){t.set({destroy:e})};return ou({readState:t.isSet,blockWith:e,clear:t.clear,isBlocked:t.isSet})},vY=Object.freeze({__proto__:null,init:mY}),yY=Wc({fields:gY,name:"blocking",apis:pY,state:vY}),bY=function(t,e,n,r){var o,i=Zn(R.none()),a=function(e){i.set(R.some(e));var n=t.lazySink(e).getOrDie(),o=r.blocker(),a=n.getSystem().build(k(k({},o),{components:o.components.concat([xs(e)]),behaviours:Hc([Lb.config({}),Sb("dialog-blocker-events",[Ai(Do(),function(){fb.focusIn(e)})])])}));Vh(n,a),fb.focusIn(e)},u=function(t){i.set(R.none()),ji(t.element).each(function(e){t.getSystem().getByDom(e).each(function(t){Wh(t)})})},s=function(e){return Gg(e,t,"body")},l=function(e){return Gg(e,t,"footer")},c=function(t,e){yY.block(t,e)},f=function(t){yY.unblock(t)},d=za("modal-events"),h=k(k({},t.eventOrder),(o={},o[ti()]=[d].concat(t.eventOrder["alloy.system.attached"]||[]),o));return{uid:t.uid,dom:t.dom,components:e,apis:{show:a,hide:u,getBody:s,getFooter:l,setIdle:f,setBusy:c},eventOrder:h,domModification:{attributes:{role:"dialog","aria-modal":"true"}},behaviours:Jp(t.modalBehaviours,[wb.config({}),fb.config({mode:"cyclic",onEnter:t.onExecute,onEscape:t.onEscape,useTabstopAt:t.useTabstopAt}),yY.config({getRoot:i.get}),Sb(d,[Ii(function(e){sY(e.element,Gg(e,t,"title").element),uY(e.element,Gg(e,t,"body").element)})])])}},xY=sm({name:"ModalDialog",configFields:lY(),partFields:fY(),factory:bY,apis:{show:function(t,e){t.show(e)},hide:function(t,e){t.hide(e)},getBody:function(t,e){return t.getBody(e)},getFooter:function(t,e){return t.getFooter(e)},setBusy:function(t,e,n){t.setBusy(e,n)},setIdle:function(t,e){t.setIdle(e)}}}),wY=Be([_n("type"),_n("name")].concat(Q_)),_Y=pn,SY=[Xe("name","name",ne(function(){return za("button-name")}),hn),En("icon"),Wn("align","end",["start","end"]),Un("primary",!1),Un("disabled",!1)],CY=A(SY,[_n("text")]),MY=A([Sn("type",["submit","cancel","custom"])],CY),TY=A([Sn("type",["menu"]),En("text"),En("tooltip"),En("icon"),An("items",wY)],SY),kY=sn("type",{submit:MY,cancel:MY,custom:MY,menu:TY}),DY=[_n("type"),_n("text"),Sn("level",["info","warn","error","success"]),_n("icon"),Bn("url","")],AY=Be(DY),IY=function(t){return[_n("type"),t]},OY=[_n("type"),_n("text"),Un("disabled",!1),Un("primary",!1),Xe("name","name",ne(function(){return za("button-name")}),hn),En("icon"),Un("borderless",!1)],LY=Be(OY),EY=[_n("type"),_n("name"),_n("label"),Un("disabled",!1)],NY=Be(EY),RY=pn,PY=[_n("type"),_n("name")],zY=PY.concat([En("label")]),BY=zY.concat([Bn("columns","auto")]),VY=Be(BY),HY=$e([_n("value"),_n("text"),_n("icon")]),FY=zY,WY=Be(FY),UY=hn,GY=zY,jY=Be(GY),XY=hn,YY=PY.concat([Fn("tag","textarea"),_n("scriptId"),_n("scriptUrl"),jn("settings",void 0)]),qY=PY.concat([Fn("tag","textarea"),Mn("init")]),ZY=Qe(function(t){return nn("customeditor.old",ze(qY),t).orThunk(function(){return nn("customeditor.new",ze(YY),t)})}),$Y=hn,KY=zY,JY=Be(KY),QY=Ke(),tq=function(t){return[_n("type"),wn("columns"),t]},eq=[_n("type"),_n("html"),Wn("presets","presentation",["presentation","document"])],nq=Be(eq),rq=zY.concat([Un("sandboxed",!0)]),oq=Be(rq),iq=hn,aq=zY.concat([xn("currentState",Be([bn("blob"),_n("url")]))]),uq=Be(aq),sq=zY.concat([En("inputMode"),En("placeholder"),Un("maximized",!1),Un("disabled",!1)]),lq=Be(sq),cq=hn,fq=function(t){return[_n("type"),_n("label"),t]},dq=[_n("text"),_n("value")],hq=[_n("text"),An("items",ln("items",function(){return pq}))],pq=He([Be(dq),Be(hq)]),gq=zY.concat([An("items",pq),Un("disabled",!1)]),mq=Be(gq),vq=hn,yq=zY.concat([Dn("items",[_n("text"),_n("value")]),Hn("size",1),Un("disabled",!1)]),bq=Be(yq),xq=hn,wq=zY.concat([Un("constrain",!0),Un("disabled",!1)]),_q=Be(wq),Sq=Be([_n("width"),_n("height")]),Cq=[_n("type"),An("header",hn),An("cells",Ve(hn))],Mq=Be(Cq),Tq=zY.concat([En("placeholder"),Un("maximized",!1),Un("disabled",!1)]),kq=Be(Tq),Dq=hn,Aq=zY.concat([Wn("filetype","file",["image","media","file"]),Bn("disabled",!1)]),Iq=Be(Aq),Oq=Be([_n("value"),Bn("meta",{})]),Lq=function(t){return Xe("items","items",te(),Ve(Qe(function(e){return nn("Checking item of "+t,Eq,e).fold(function(t){return mt.error(an(t))},function(t){return mt.value(t)})})))},Eq=Je(function(){return un("type",{alertbanner:AY,bar:Be(IY(Lq("bar"))),button:LY,checkbox:NY,colorinput:WY,colorpicker:jY,dropzone:JY,grid:Be(tq(Lq("grid"))),iframe:oq,input:lq,listbox:mq,selectbox:bq,sizeinput:_q,textarea:kq,urlinput:Iq,customeditor:ZY,htmlpanel:nq,imagetools:uq,collection:VY,label:Be(fq(Lq("label"))),table:Mq,panel:Rq})}),Nq=[_n("type"),Bn("classes",[]),An("items",Eq)],Rq=Be(Nq),Pq=[Xe("name","name",ne(function(){return za("tab-name")}),hn),_n("title"),An("items",Eq)],zq=[_n("type"),Dn("tabs",Pq)],Bq=Be(zq),Vq=CY,Hq=kY,Fq=Be([_n("title"),xn("body",un("type",{panel:Rq,tabpanel:Bq})),Fn("size","normal"),An("buttons",Hq),Bn("initialData",{}),Gn("onAction",g),Gn("onChange",g),Gn("onSubmit",g),Gn("onClose",g),Gn("onCancel",g),Bn("onTabChange",g)]),Wq=function(t){return nn("dialog",Fq,t)},Uq=Be(A([Sn("type",["cancel","custom"])],Vq)),Gq=Be([_n("title"),_n("url"),Ln("height"),Ln("width"),Rn("buttons",Uq),Gn("onAction",g),Gn("onCancel",g),Gn("onClose",g),Gn("onMessage",g)]),jq=function(t){return nn("dialog",Gq,t)},Xq=function(t){return a(t)?[t].concat(nt(Bt(t),Xq)):u(t)?nt(t,Xq):[]},Yq=function(t){return i(t.type)&&i(t.name)},qq={checkbox:RY,colorinput:UY,colorpicker:XY,dropzone:QY,input:cq,iframe:iq,sizeinput:Sq,selectbox:xq,listbox:vq,size:Sq,textarea:Dq,urlinput:Oq,customeditor:$Y,collection:HY,togglemenuitem:_Y},Zq=function(t){return R.from(qq[t.type])},$q=function(t){return Z(Xq(t),Yq)},Kq=function(t){var e=$q(t),n=nt(e,function(t){return Zq(t).fold(function(){return[]},function(e){return[xn(t.name,e)]})});return Be(n)},Jq=function(t){var e=rn(Wq(t)),n=Kq(t),r=t.initialData;return{internalDialog:e,dataValidator:n,initialData:r}},Qq={open:function(t,e){var n=Jq(e);return t(n.internalDialog,n.initialData,n.dataValidator)},openUrl:function(t,e){var n=rn(jq(e));return t(n)},redial:function(t){return Jq(t)}},tZ=function(t){var e=[],n={};return It(t,function(t,r){t.fold(function(){e.push(r)},function(t){n[r]=t})}),e.length>0?mt.error(e):mt.value(n)},eZ=function(t,e){var n=Jx(yL.sketch(function(n){return{dom:{tag:"div",classes:["tox-form"].concat(t.classes)},components:j(t.items,function(t){return qP(n,t,e)})}}));return{dom:{tag:"div",classes:["tox-dialog__body"]},components:[{dom:{tag:"div",classes:["tox-dialog__body-content"]},components:[n.asSpec()]}],behaviours:Hc([fb.config({mode:"acyclic",useTabstopAt:_(nE)}),AL.memento(n),jL.memento(n,{postprocess:function(t){return tZ(t).fold(function(t){return console.error(t),{}},function(t){return t})}})])}},nZ=function(t,e){return{uid:t.uid,dom:t.dom,components:t.components,events:Qb(t.action),behaviours:Jp(t.tabButtonBehaviours,[Lb.config({}),fb.config({mode:"execution",useSpace:!0,useEnter:!0}),Zp.config({store:{mode:"memory",initialValue:t.value}})]),domModification:t.domModification}},rZ=um({name:"TabButton",configFields:[Bn("uid",void 0),bn("value"),Xe("dom","dom",re(function(){return{attributes:{role:"tab",id:za("aria"),"aria-selected":"false"}}}),cn()),In("action"),Bn("domModification",{}),$p("tabButtonBehaviours",[Lb,fb,Zp]),bn("view")],factory:nZ}),oZ=b([bn("tabs"),bn("dom"),Bn("clickToDismiss",!1),$p("tabbarBehaviours",[Vm,fb]),Pl(["tabClass","selectedClass"])]),iZ=Og({factory:rZ,name:"tabs",unit:"tab",overrides:function(t){var e=function(t,e){Vm.dehighlight(t,e),fi(t,ui(),{tabbar:t,button:e})},n=function(t,e){Vm.highlight(t,e),fi(t,ai(),{tabbar:t,button:e})};return{action:function(r){var o=r.getSystem().getByUid(t.uid).getOrDie(),i=Vm.isHighlighted(o,r),a=function(){return i&&t.clickToDismiss?e:i?g:n}();a(o,r)},domModification:{classes:[t.markers.tabClass]}}}}),aZ=b([iZ]),uZ=function(t,e,n,r){return{uid:t.uid,dom:t.dom,components:e,"debug.sketcher":"Tabbar",domModification:{attributes:{role:"tablist"}},behaviours:Jp(t.tabbarBehaviours,[Vm.config({highlightClass:t.markers.selectedClass,itemClass:t.markers.tabClass,onHighlight:function(t,e){Sa(e.element,"aria-selected","true")},onDehighlight:function(t,e){Sa(e.element,"aria-selected","false")}}),fb.config({mode:"flow",getInitial:function(t){return Vm.getHighlighted(t).map(function(t){return t.element})},selector:"."+t.markers.tabClass,executeOnMove:!0})])}},sZ=sm({name:"Tabbar",configFields:oZ(),partFields:aZ(),factory:uZ}),lZ=function(t,e){return{uid:t.uid,dom:t.dom,behaviours:Jp(t.tabviewBehaviours,[wb.config({})]),domModification:{attributes:{role:"tabpanel"}}}},cZ=um({name:"Tabview",configFields:[$p("tabviewBehaviours",[wb])],factory:lZ}),fZ=b([Bn("selectFirst",!0),Bl("onChangeTab"),Bl("onDismissTab"),Bn("tabs",[]),$p("tabSectionBehaviours",[])]),dZ=Dg({factory:sZ,schema:[bn("dom"),kn("markers",[bn("tabClass"),bn("selectedClass")])],name:"tabbar",defaults:function(t){return{tabs:t.tabs}}}),hZ=Dg({factory:cZ,name:"tabview"}),pZ=b([dZ,hZ]),gZ=function(t,e,n,r){var o=function(e){var n=Zp.getValue(e);Ug(e,t,"tabview").each(function(r){var o=Q(t.tabs,function(t){return t.value===n});o.each(function(n){var o=n.view();Ta(e.element,"id").each(function(t){Sa(r.element,"aria-labelledby",t)}),wb.set(r,o),t.onChangeTab(r,e,o)})})},i=function(e,n){Ug(e,t,"tabbar").each(function(t){n(t).each(di)})};return{uid:t.uid,dom:t.dom,components:e,behaviours:Kp(t.tabSectionBehaviours),events:mi(et([t.selectFirst?[Ii(function(t,e){i(t,Vm.getFirst)})]:[],[xi(ai(),function(t,e){var n=e.event.button;o(n)}),xi(ui(),function(e,n){var r=n.event.button;t.onDismissTab(e,r)})]])),apis:{getViewItems:function(e){return Ug(e,t,"tabview").map(function(t){return wb.contents(t)}).getOr([])},showTab:function(t,e){var n=function(t){var n=Vm.getCandidates(t),r=Q(n,function(t){return Zp.getValue(t)===e});return r.filter(function(e){return!Vm.isHighlighted(t,e)})};i(t,n)}}}},mZ=sm({name:"TabSection",configFields:fZ(),partFields:pZ(),factory:gZ,apis:{getViewItems:function(t,e){return t.getViewItems(e)},showTab:function(t,e,n){t.showTab(e,n)}}}),vZ=function(t,e,n){return j(t,function(r,o){wb.set(n,t[o].view());var i=e.dom.getBoundingClientRect();return wb.set(n,[]),i.height})},yZ=function(t){return lt(ut(t,function(t,e){return t>e?-1:t<e?1:0}))},bZ=function(t,e,n){var r,o=Ui(t).dom,i=hl(t,".tox-dialog-wrap").getOr(t),a="fixed"===Ju(i,"position");r=a?Math.max(o.clientHeight,window.innerHeight):Math.max(o.offsetHeight,o.scrollHeight);var u=Ss(e),s=e.dom.offsetLeft>=n.dom.offsetLeft+Ns(n),l=s?Math.max(Ss(n),u):u,c=parseInt(Ju(t,"margin-top"),10)||0,f=parseInt(Ju(t,"margin-bottom"),10)||0,d=Ss(t)+c+f,h=d-l;return r-h},xZ=function(t,e){lt(t).each(function(t){return mZ.showTab(e,t.value)})},wZ=function(t,e){Zu(t,"height",e+"px"),Yr().browser.isIE()?rs(t,"flex-basis"):Zu(t,"flex-basis",e+"px")},_Z=function(t,e,n){hl(t,'[role="dialog"]').each(function(t){pl(t,'[role="tablist"]').each(function(r){n.get().map(function(n){return Zu(e,"height","0"),Zu(e,"flex-basis","0"),Math.min(n,bZ(t,e,r))}).each(function(t){wZ(e,t)})})})},SZ=function(t){return pl(t,'[role="tabpanel"]')},CZ=function(t){var e=function(){var e=Zn(R.none()),n=[Ii(function(n){var r=n.element;SZ(r).each(function(o){Zu(o,"visibility","hidden"),n.getSystem().getByDom(o).toOptional().each(function(n){var r=vZ(t,o,n),i=yZ(r);e.set(i)}),_Z(r,o,e),rs(o,"visibility"),xZ(t,n),Zx.requestAnimationFrame(function(){_Z(r,o,e)})})}),xi(Qo(),function(t){var n=t.element;SZ(n).each(function(t){_Z(n,t,e)})}),xi(mD,function(t,n){var r=t.element;SZ(r).each(function(t){var n=Qc(ea(t));Zu(t,"visibility","hidden");var o=ts(t,"height").map(function(t){return parseInt(t,10)});rs(t,"height"),rs(t,"flex-basis");var i=t.dom.getBoundingClientRect().height,a=o.forall(function(t){return i>t});a?(e.set(R.from(i)),_Z(r,t,e)):o.each(function(e){wZ(t,e)}),rs(t,"visibility"),n.each($c)})})],r=!1;return{extraEvents:n,selectFirst:r}}(),n=function(){var t=[],e=!0;return{extraEvents:t,selectFirst:e}}();return{smartTabHeight:e,naiveTabHeight:n}},MZ="send-data-to-section",TZ="send-data-to-view",kZ=function(t,e){var n=Zn({}),r=function(t){var e=Zp.getValue(t),r=tZ(e).getOr({}),o=n.get(),i=qt(o,r);n.set(i)},o=function(t){var e=n.get();Zp.setValue(t,e)},i=Zn(null),a=j(t.tabs,function(t){return{value:t.name,dom:{tag:"div",classes:["tox-dialog__body-nav-item"],innerHtml:e.shared.providers.translate(t.title)},view:function(){return[yL.sketch(function(n){return{dom:{tag:"div",classes:["tox-form"]},components:j(t.items,function(t){return qP(n,t,e)}),formBehaviours:Hc([fb.config({mode:"acyclic",useTabstopAt:_(nE)}),Sb("TabView.form.events",[Ii(o),Oi(r)]),Xc.config({channels:ce([{key:MZ,value:{onReceive:r}},{key:TZ,value:{onReceive:o}}])})])}})]}}}),u=CZ(a).smartTabHeight;return mZ.sketch({dom:{tag:"div",classes:["tox-dialog__body"]},onChangeTab:function(t,e,n){var r=Zp.getValue(e);fi(t,gD,{name:r,oldName:i.get()}),i.set(r)},tabs:a,components:[mZ.parts.tabbar({dom:{tag:"div",classes:["tox-dialog__body-nav"]},components:[sZ.parts.tabs({})],markers:{tabClass:"tox-tab",selectedClass:"tox-dialog__body-nav-item--active"},tabbarBehaviours:Hc([tD.config({})])}),mZ.parts.tabview({dom:{tag:"div",classes:["tox-dialog__body-content"]}})],selectFirst:u.selectFirst,tabSectionBehaviours:Hc([Sb("tabpanel",u.extraEvents),fb.config({mode:"acyclic"}),bm.config({find:function(t){return lt(mZ.getViewItems(t))}}),Zp.config({store:{mode:"manual",getValue:function(t){return t.getSystem().broadcastOn([MZ],{}),n.get()},setValue:function(t,e){n.set(e),t.getSystem().broadcastOn([TZ],{})}}})])})},DZ=za("update-dialog"),AZ=za("update-title"),IZ=za("update-body"),OZ=za("update-footer"),LZ=za("body-send-message"),EZ=function(t,e,n,r){var o=function(t){switch(t.body.type){case"tabpanel":return[kZ(t.body,n)];default:return[eZ(t.body,n)]}},i=function(t,e){return R.some({isTabPanel:function(){return"tabpanel"===e.body.type}})},a={"aria-live":"polite"};return{dom:{tag:"div",classes:["tox-dialog__content-js"],attributes:k(k({},e.map(function(t){return{id:t}}).getOr({})),r?a:{})},components:[],behaviours:Hc([AL.childAt(0),tH.config({channel:IZ,updateState:i,renderComponents:o,initialData:t})])}},NZ=function(t,e,n,r){return EZ(t,R.some(e),n,r)},RZ=function(t,e){var n=EZ(t,R.none(),e,!1);return xY.parts.body(n)},PZ=function(t){var e={dom:{tag:"div",classes:["tox-dialog__content-js"]},components:[{dom:{tag:"div",classes:["tox-dialog__body-iframe"]},components:[QL({dom:{tag:"iframe",attributes:{src:t.url}},behaviours:Hc([tD.config({}),Lb.config({})])})]}],behaviours:Hc([fb.config({mode:"acyclic",useTabstopAt:_(nE)})])};return xY.parts.body(e)},zZ=oM.deviceType.isTouch(),BZ=function(t,e){return{dom:{tag:"div",styles:{display:"none"},classes:["tox-dialog__header"]},components:[t,e]}},VZ=function(t,e){return xY.parts.close(Kx.sketch({dom:{tag:"button",classes:["tox-button","tox-button--icon","tox-button--naked"],attributes:{type:"button","aria-label":e.translate("Close")}},action:t,buttonBehaviours:Hc([tD.config({})])}))},HZ=function(){return xY.parts.title({dom:{tag:"div",classes:["tox-dialog__title"],innerHtml:"",styles:{display:"none"}}})},FZ=function(t,e){return xY.parts.body({dom:{tag:"div",classes:["tox-dialog__body"]},components:[{dom:{tag:"div",classes:["tox-dialog__body-content"]},components:[{dom:IU("<p>"+e.translate(t)+"</p>")}]}]})},WZ=function(t){return xY.parts.footer({dom:{tag:"div",classes:["tox-dialog__footer"]},components:t})},UZ=function(t,e){return[Gk.sketch({dom:{tag:"div",classes:["tox-dialog__footer-start"]},components:t}),Gk.sketch({dom:{tag:"div",classes:["tox-dialog__footer-end"]},components:e})]},GZ=function(t){var e,n="tox-dialog",r=n+"-wrap",o=r+"__backdrop",i=n+"__disable-scroll";return xY.sketch({lazySink:t.lazySink,onEscape:function(e){return t.onEscape(e),R.some(!0)},useTabstopAt:function(t){return!nE(t)},dom:{tag:"div",classes:[n].concat(t.extraClasses),styles:k({position:"relative"},t.extraStyles)},components:A([t.header,t.body],t.footer.toArray()),parts:{blocker:{dom:IU('<div class="'+r+'"></div>'),components:[{dom:{tag:"div",classes:zZ?[o,o+"--opaque"]:[o]}}]}},dragBlockClass:r,modalBehaviours:Hc(A([Lb.config({}),Sb("dialog-events",t.dialogEvents.concat([Ai(Do(),function(t,e){fb.focusIn(t)})])),Sb("scroll-lock",[Ii(function(){zu(ju(),i)}),Oi(function(){Vu(ju(),i)})])],t.extraBehaviours)),eventOrder:k((e={},e[Uo()]=["dialog-events"],e[ti()]=["scroll-lock","dialog-events","alloy.base.behaviour"],e[ei()]=["alloy.base.behaviour","dialog-events","scroll-lock"],e),t.eventOrder)})},jZ=function(t){return Kx.sketch({dom:{tag:"button",classes:["tox-button","tox-button--icon","tox-button--naked"],attributes:{type:"button","aria-label":t.translate("Close"),title:t.translate("Close")}},components:[{dom:{tag:"div",classes:["tox-icon"],innerHtml:tw("close",t.icons)}}],action:function(t){ci(t,cD)}})},XZ=function(t,e,n){var r=function(t){return[ms(n.translate(t.title))]};return{dom:{tag:"div",classes:["tox-dialog__title"],attributes:k({},e.map(function(t){return{id:t}}).getOr({}))},components:r(t),behaviours:Hc([tH.config({channel:AZ,renderComponents:r})])}},YZ=function(){return{dom:IU('<div class="tox-dialog__draghandle"></div>')}},qZ=function(t,e,n){return Gk.sketch({dom:IU('<div class="tox-dialog__header"></div>'),components:[XZ(t,R.some(e),n),YZ(),jZ(n)],containerBehaviours:Hc([GX.config({mode:"mouse",blockerClass:"blocker",getTarget:function(t){return gl(t,'[role="dialog"]').getOrDie()},snaps:{getSnapPoints:function(){return[]},leftAttr:"data-drag-left",topAttr:"data-drag-top"}})])})},ZZ=function(t,e){var n=xY.parts.title(XZ(t,R.none(),e)),r=xY.parts.draghandle(YZ()),o=xY.parts.close(jZ(e)),i=[n].concat(t.draggable?[r]:[]).concat([o]);return Gk.sketch({dom:IU('<div class="tox-dialog__header"></div>'),components:i})},$Z=function(t,e){return ZZ({title:e.shared.providers.translate(t),draggable:e.dialog.isDraggableModal()},e.shared.providers)},KZ=function(t,e,n){return{dom:{tag:"div",classes:["tox-dialog__busy-spinner"],attributes:{"aria-label":n.translate(t)},styles:{left:"0px",right:"0px",bottom:"0px",top:"0px",position:"absolute"}},behaviours:e,components:[{dom:IU('<div class="tox-spinner"><div></div><div></div><div></div></div>')}]}},JZ=function(t,e,n){return{onClose:function(){return n.closeWindow()},onBlock:function(n){xY.setBusy(t(),function(t,r){return KZ(n.message,r,e)})},onUnblock:function(){xY.setIdle(t())}}},QZ=function(t,e,n,r){var o,i=function(t,e){return R.some(e)};return bs(GZ(k(k({},t),{lazySink:r.shared.getSink,extraBehaviours:A([tH.config({channel:DZ,updateState:i,initialData:e}),jL.memory({})],t.extraBehaviours),onEscape:function(t){ci(t,cD)},dialogEvents:n,eventOrder:(o={},o[Wo()]=[tH.name(),Xc.name()],o[ti()]=["scroll-lock",tH.name(),"messages","dialog-events","alloy.base.behaviour"],o[ei()]=["alloy.base.behaviour","dialog-events","messages",tH.name(),"scroll-lock"],o)})))},t$=function(t){var e=function(t){var e=j(t.items,function(t){var e=Zn(!1);return k(k({},t),{storage:e})});return k(k({},t),{items:e})};return j(t,function(t){return"menu"===t.type?e(t):t})},e$=function(t){return K(t,function(t,e){if("menu"===e.type){var n=e;return K(n.items,function(t,e){return t[e.name]=e.storage,t},t)}return t},{})},n$=function(t,e){return[Ti(Do(),eE),t(lD,function(t,n){e.onClose(),n.onClose()}),t(cD,function(t,e,n,r){e.onCancel(t),ci(r,lD)}),xi(pD,function(t,n){return e.onUnblock()}),xi(hD,function(t,n){return e.onBlock(n.event)})]},r$=function(t,e){var n=function(e,n){return xi(e,function(e,o){r(e,function(r,i){n(t(),r,o.event,e)})})},r=function(t,e){tH.getState(t).get().each(function(n){e(n,t)})};return A(n$(n,e),[n(fD,function(t,e,n){e.onAction(t,{name:n.name})})])},o$=function(t,e,n){var r=function(e,n){return xi(e,function(e,r){o(e,function(o,i){n(t(),o,r.event,e)})})},o=function(t,e){tH.getState(t).get().each(function(n){e(n.internalDialog,t)})};return A(n$(r,e),[r(dD,function(t,e){return e.onSubmit(t)}),r(sD,function(t,e,n){e.onChange(t,{name:n.name})}),r(fD,function(t,e,r,o){var i=function(){return fb.focusIn(o)},a=function(t){return ka(t,"disabled")||Ta(t,"aria-disabled").exists(function(t){return"true"===t})},u=ea(o.element),s=Qc(u);e.onAction(t,{name:r.name,value:r.value}),Qc(u).fold(i,function(t){a(t)?i():s.exists(function(e){return uo(t,e)&&a(e)})?i():n().toOptional().filter(function(e){return!uo(e.element,t)}).each(i)})}),r(gD,function(t,e,n){e.onTabChange(t,{newTabName:n.name,oldTabName:n.oldName})}),Oi(function(e){var n=t();Zp.setValue(e,n.getData())})])},i$={initUrlDialog:r$,initDialog:o$},a$=function(t,e){return GN(t,t.type,e)},u$=function(t,e,n){return Q(e,function(t){return t.name===n}).bind(function(e){return e.memento.getOpt(t)})},s$=function(t,e){var n=e.map(function(t){return t.footerButtons}).getOr([]),r=q(n,function(t){return"start"===t.align}),o=function(t,e){return Gk.sketch({dom:{tag:"div",classes:["tox-dialog__footer-"+t]},components:j(e,function(t){return t.memento.asSpec()})})},i=o("start",r.pass),a=o("end",r.fail);return[i,a]},l$=function(t,e){var n=function(t,n){var r=j(n.buttons,function(t){var n=Jx(a$(t,e));return{name:t.name,align:t.align,memento:n}}),o=function(t,e){return u$(t,r,e)};return R.some({lookupByName:o,footerButtons:r})};return{dom:IU('<div class="tox-dialog__footer"></div>'),components:[],behaviours:Hc([tH.config({channel:OZ,initialData:t,updateState:n,renderComponents:s$})])}},c$=function(t,e){return l$(t,e)},f$=function(t,e){return xY.parts.footer(l$(t,e))},d$=function(t,e){var n=t.getRoot();if(n.getSystem().isConnected()){var r=bm.getCurrent(t.getFormWrapper()).getOr(t.getFormWrapper());return yL.getField(r,e).fold(function(){var n=t.getFooter(),o=tH.getState(n);return o.get().bind(function(t){return t.lookupByName(r,e)})},function(t){return R.some(t)})}return R.none()},h$=function(t,e){var n=t.getRoot();return tH.getState(n).get().map(function(t){return rn(nn("data",t.dataValidator,e))}).getOr(e)},p$=function(t,e,n){var r=function(e){var n=t.getRoot();n.getSystem().isConnected()&&e(n)},o=function(){var e=t.getRoot(),r=e.getSystem().isConnected()?t.getFormWrapper():e,o=Zp.getValue(r),i=Ot(n,function(t){return t.get()});return k(k({},o),i)},a=function(e){r(function(r){var o=g.getData(),i=k(k({},o),e),a=h$(t,i),u=t.getFormWrapper();Zp.setValue(u,a),It(n,function(t,e){Ht(i,e)&&t.set(i[e])})})},u=function(e){d$(t,e).each($S.disable)},s=function(e){d$(t,e).each($S.enable)},l=function(e){d$(t,e).each(Lb.focus)},c=function(t){if(!i(t))throw new Error("The dialogInstanceAPI.block function should be passed a blocking message of type string as an argument");r(function(e){fi(e,hD,{message:t})})},f=function(){r(function(t){ci(t,pD)})},d=function(e){r(function(n){var r=t.getBody(),o=tH.getState(r);o.get().exists(function(t){return t.isTabPanel()})&&bm.getCurrent(r).each(function(t){mZ.showTab(t,e)})})},h=function(t){r(function(n){var r=e(t);n.getSystem().broadcastOn([DZ],r),n.getSystem().broadcastOn([AZ],r.internalDialog),n.getSystem().broadcastOn([IZ],r.internalDialog),n.getSystem().broadcastOn([OZ],r.internalDialog),g.setData(r.initialData)})},p=function(){r(function(t){ci(t,lD)})},g={getData:o,setData:a,disable:u,enable:s,focus:l,block:c,unblock:f,showTab:d,redial:h,close:p};return g},g$=function(t){switch(t){case"large":return["tox-dialog--width-lg"];case"medium":return["tox-dialog--width-md"];default:return[]}},m$=function(t,e,n){var r=$Z(t.internalDialog.title,n),o=RZ({body:t.internalDialog.body},n),i=t$(t.internalDialog.buttons),a=e$(i),u=f$({buttons:i},n),s=i$.initDialog(function(){return h},JZ(function(){return f},n.shared.providers,e),n.shared.getSink),l=g$(t.internalDialog.size),c={header:r,body:o,footer:R.some(u),extraClasses:l,extraBehaviours:[],extraStyles:{}},f=QZ(c,t,s,n),d=function(){var t=function(){var t=xY.getBody(f);return bm.getCurrent(t).getOr(t)};return{getRoot:function(){return f},getBody:function(){return xY.getBody(f)},getFooter:function(){return xY.getFooter(f)},getFormWrapper:t}}(),h=p$(d,e.redial,a);return{dialog:f,instanceApi:h}},v$=function(t,e,n,r){var o,i,a=za("dialog-label"),u=za("dialog-content"),s=function(t,e){return R.some(e)},l=Jx(qZ({title:t.internalDialog.title,draggable:!0},a,n.shared.providers)),c=Jx(NZ({body:t.internalDialog.body},u,n,r)),f=t$(t.internalDialog.buttons),d=e$(f),h=Jx(c$({buttons:f},n)),p=i$.initDialog(function(){return m},{onBlock:function(t){yY.block(g,function(e,r){return KZ(t.message,r,n.shared.providers)})},onUnblock:function(){yY.unblock(g)},onClose:function(){return e.closeWindow()}},n.shared.getSink),g=bs({dom:{tag:"div",classes:["tox-dialog","tox-dialog-inline"],attributes:(o={role:"dialog"},o["aria-labelledby"]=a,o["aria-describedby"]=""+u,o)},eventOrder:(i={},i[Wo()]=[tH.name(),Xc.name()],i[Uo()]=["execute-on-form"],i[ti()]=["reflecting","execute-on-form"],i),behaviours:Hc([fb.config({mode:"cyclic",onEscape:function(t){return ci(t,lD),R.some(!0)},useTabstopAt:function(t){return!nE(t)&&("button"!==Ni(t)||"disabled"!==Ma(t,"disabled"))}}),tH.config({channel:DZ,updateState:s,initialData:t}),Lb.config({}),Sb("execute-on-form",p.concat([Ai(Do(),function(t,e){fb.focusIn(t)})])),yY.config({getRoot:function(){return R.some(g)}}),wb.config({}),jL.memory({})]),components:[l.asSpec(),c.asSpec(),h.asSpec()]}),m=p$({getRoot:function(){return g},getFooter:function(){return h.get(g)},getBody:function(){return c.get(g)},getFormWrapper:function(){var t=c.get(g);return bm.getCurrent(t).getOr(t)}},e.redial,d);return{dialog:g,instanceApi:m}},y$=tinymce.util.Tools.resolve("tinymce.util.URI"),b$=function(t){var e=function(e){t.getSystem().isConnected()&&e(t)},n=function(t){if(!i(t))throw new Error("The urlDialogInstanceAPI.block function should be passed a blocking message of type string as an argument");e(function(e){fi(e,hD,{message:t})})},r=function(){e(function(t){ci(t,pD)})},o=function(){e(function(t){ci(t,lD)})},a=function(t){e(function(e){e.getSystem().broadcastOn([LZ],t)})};return{block:n,unblock:r,close:o,sendMessage:a}},x$=["insertContent","setContent","execCommand","close","block","unblock"],w$=function(t){return a(t)&&-1!==x$.indexOf(t.mceAction)},_$=function(t){return!w$(t)&&a(t)&&Ht(t,"mceAction")},S$=function(t,e,n){switch(n.mceAction){case"insertContent":t.insertContent(n.content);break;case"setContent":t.setContent(n.content);break;case"execCommand":var r=!!s(n.ui)&&n.ui;t.execCommand(n.cmd,r,n.value);break;case"close":e.close();break;case"block":e.block(n.message);break;case"unblock":e.unblock();break}},C$=function(t,e,n,r){var o,i=$Z(t.title,r),a=PZ(t),u=t.buttons.bind(function(t){return 0===t.length?R.none():R.some(f$({buttons:t},r))}),s=i$.initUrlDialog(function(){return v},JZ(function(){return m},r.shared.providers,e)),l=k(k({},t.height.fold(function(){return{}},function(t){return{height:t+"px","max-height":t+"px"}})),t.width.fold(function(){return{}},function(t){return{width:t+"px","max-width":t+"px"}})),c=t.width.isNone()&&t.height.isNone()?["tox-dialog--width-lg"]:[],f=new y$(t.url,{base_uri:new y$(window.location.href)}),d=f.protocol+"://"+f.host+(f.port?":"+f.port:""),h=Zn(R.none()),p=[Sb("messages",[Ii(function(){var e=hk(er.fromDom(window),"message",function(e){if(f.isSameOrigin(new y$(e.raw.origin))){var r=e.raw.data;w$(r)?S$(n,v,r):_$(r)&&t.onMessage(v,r)}});h.set(R.some(e))}),Oi(function(){h.get().each(function(t){return t.unbind()})})]),Xc.config({channels:(o={},o[LZ]={onReceive:function(t,e){pl(t.element,"iframe").each(function(t){var n=t.dom.contentWindow;n.postMessage(e,d)})}},o)})],g={header:i,body:a,footer:u,extraClasses:c,extraBehaviours:p,extraStyles:l},m=QZ(g,t,s,r),v=b$(m);return{dialog:m,instanceApi:v}},M$=function(t){var e=t.backstage.shared,n=function(n,r){var o=function(){xY.hide(s),r()},i=Jx(GN({name:"close-alert",text:"OK",primary:!0,align:"end",disabled:!1,icon:R.none()},"cancel",t.backstage)),a=HZ(),u=VZ(o,e.providers),s=bs(GZ({lazySink:function(){return e.getSink()},header:BZ(a,u),body:FZ(n,e.providers),footer:R.some(WZ(UZ([],[i.asSpec()]))),onEscape:o,extraClasses:["tox-alert-dialog"],extraBehaviours:[],extraStyles:{},dialogEvents:[xi(cD,o)],eventOrder:{}}));xY.show(s);var l=i.get(s);Lb.focus(l)};return{open:n}},T$=function(t){var e=t.backstage.shared,n=function(n,r){var o=function(t){xY.hide(l),r(t)},i=Jx(GN({name:"yes",text:"Yes",primary:!0,align:"end",disabled:!1,icon:R.none()},"submit",t.backstage)),a=GN({name:"no",text:"No",primary:!1,align:"end",disabled:!1,icon:R.none()},"cancel",t.backstage),u=HZ(),s=VZ(function(){return o(!1)},e.providers),l=bs(GZ({lazySink:function(){return e.getSink()},header:BZ(u,s),body:FZ(n,e.providers),footer:R.some(WZ(UZ([],[a,i.asSpec()]))),onEscape:function(){return o(!1)},extraClasses:["tox-confirm-dialog"],extraBehaviours:[],extraStyles:{},dialogEvents:[xi(cD,function(){return o(!1)}),xi(dD,function(){return o(!0)})],eventOrder:{}}));xY.show(l);var c=i.get(l);Lb.focus(c)};return{open:n}},k$=function(t,e){return rn(nn("data",e,t))},D$=function(t){return mk(t,".tox-alert-dialog")||mk(t,".tox-confirm-dialog")},A$=function(t,e,n){return e&&n?[]:[GW.config({contextual:{lazyContext:function(){return R.some(ol(er.fromDom(t.getContentAreaContainer())))},fadeInClass:"tox-dialog-dock-fadein",fadeOutClass:"tox-dialog-dock-fadeout",transitionClass:"tox-dialog-dock-transition"},modes:["top"]})]},I$=function(t){var e=t.backstage,n=t.editor,r=DC(n),o=M$(t),i=T$(t),a=function(t,n,r){return void 0!==n&&"toolbar"===n.inline?c(t,e.shared.anchors.inlineDialog(),r,n.ariaAttrs):void 0!==n&&"cursor"===n.inline?c(t,e.shared.anchors.cursor(),r,n.ariaAttrs):l(t,r)},u=function(t,e){return s(t,e)},s=function(t,r){var o=function(t){var o=C$(t,{closeWindow:function(){xY.hide(o.dialog),r(o.instanceApi)}},n,e);return xY.show(o.dialog),o.instanceApi};return Qq.openUrl(o,t)},l=function(t,n){var r=function(t,r,o){var i=r,a={dataValidator:o,initialData:i,internalDialog:t},u=m$(a,{redial:Qq.redial,closeWindow:function(){xY.hide(u.dialog),n(u.instanceApi)}},e);return xY.show(u.dialog),u.instanceApi.setData(i),u.instanceApi};return Qq.open(r,t)},c=function(t,o,i,a){var u=function(t,u,s){var l=k$(u,s),c=CF(),f=e.shared.header.isPositionedAtTop(),d={dataValidator:s,initialData:l,internalDialog:t},h=function(){return c.on(function(t){zx.reposition(t),GW.refresh(t)})},p=v$(d,{redial:Qq.redial,closeWindow:function(){c.on(zx.hide),n.off("ResizeEditor",h),c.clear(),i(p.instanceApi)}},e,a),g=bs(zx.sketch(k(k({lazySink:e.shared.getSink,dom:{tag:"div",classes:[]},fireDismissalEventInstead:{}},f?{}:{fireRepositionEventInstead:{}}),{inlineBehaviours:Hc(A([Sb("window-manager-inline-events",[xi(ni(),function(t,e){ci(p.dialog,cD)})])],A$(n,r,f))),isExtraPart:function(t,e){return D$(e)}})));return c.set(g),zx.showWithin(g,o,xs(p.dialog),R.some(ju())),r&&f||(GW.refresh(g),n.on("ResizeEditor",h)),p.instanceApi.setData(l),fb.focusIn(p.dialog),p.instanceApi};return Qq.open(u,t)},f=function(t,e){i.open(t,function(t){e(t)})},d=function(t,e){o.open(t,function(){e()})},h=function(t){t.close()};return{open:a,openUrl:u,alert:d,close:h,confirm:f}};function O$(){T.add("silver",function(t){var e=aY(t),n=e.uiMothership,r=e.backstage,o=e.renderUI,i=e.getUi;fk.register(t,r.shared);var a=I$({editor:t,backstage:r});return{renderUI:o,getWindowManagerImpl:b(a),getNotificationManagerImpl:function(){return aw(t,{backstage:r},n)},ui:i()}})}O$()})()}).call(this,n("c8ba"))},"07d1":function(t,e,n){n("94ce")},"0d68":function(t,e,n){n("030f")},"1af6":function(t,e,n){var r=n("63b6");r(r.S,"Array",{isArray:n("9003")})},2401:function(t,e){(function(){"use strict";var t=tinymce.util.Tools.resolve("tinymce.PluginManager"),e=function(t){var e=typeof t;return null===t?"null":"object"===e&&(Array.prototype.isPrototypeOf(t)||t.constructor&&"Array"===t.constructor.name)?"array":"object"===e&&(String.prototype.isPrototypeOf(t)||t.constructor&&"String"===t.constructor.name)?"string":e},n=function(t){return function(n){return e(n)===t}},r=function(t){return function(e){return typeof e===t}},o=n("string"),i=n("object"),a=n("array"),u=r("boolean"),s=r("function"),l=r("number"),c=function(){},f=function(t){return function(){return t}},d=function(t){return function(e){return!t(e)}},h=f(!1),p=f(!0),g=function(){return m},m=function(){var t=function(t){return t.isNone()},e=function(t){return t()},n=function(t){return t},r={fold:function(t,e){return t()},is:h,isSome:h,isNone:p,getOr:n,getOrThunk:e,getOrDie:function(t){throw new Error(t||"error: getOrDie called on none.")},getOrNull:f(null),getOrUndefined:f(void 0),or:n,orThunk:e,map:g,each:c,bind:g,exists:h,forall:p,filter:g,equals:t,equals_:t,toArray:function(){return[]},toString:f("none()")};return r}(),v=function(t){var e=f(t),n=function(){return o},r=function(e){return e(t)},o={fold:function(e,n){return n(t)},is:function(e){return t===e},isSome:p,isNone:h,getOr:e,getOrThunk:e,getOrDie:e,getOrNull:e,getOrUndefined:e,or:n,orThunk:n,map:function(e){return v(e(t))},each:function(e){e(t)},bind:r,exists:r,forall:r,filter:function(e){return e(t)?o:m},toArray:function(){return[t]},toString:function(){return"some("+t+")"},equals:function(e){return e.is(t)},equals_:function(e,n){return e.fold(h,function(e){return n(t,e)})}};return o},y=function(t){return null===t||void 0===t?m:v(t)},b={some:v,none:g,from:y},x=Array.prototype.slice,w=Array.prototype.push,_=function(t,e){for(var n=t.length,r=new Array(n),o=0;o<n;o++){var i=t[o];r[o]=e(i,o)}return r},S=function(t,e){for(var n=0,r=t.length;n<r;n++){var o=t[n];e(o,n)}},C=function(t,e){for(var n=[],r=0,o=t.length;r<o;r++){var i=t[r];e(i,r)&&n.push(i)}return n},M=function(t,e){if(0===t.length)return[];for(var n=e(t[0]),r=[],o=[],i=0,a=t.length;i<a;i++){var u=t[i],s=e(u);s!==n&&(r.push(o),o=[]),n=s,o.push(u)}return 0!==o.length&&r.push(o),r},T=function(t,e,n){return S(t,function(t){n=e(n,t)}),n},k=function(t,e,n){for(var r=0,o=t.length;r<o;r++){var i=t[r];if(e(i,r))return b.some(i);if(n(i,r))break}return b.none()},D=function(t,e){return k(t,e,h)},A=function(t){for(var e=[],n=0,r=t.length;n<r;++n){if(!a(t[n]))throw new Error("Arr.flatten item "+n+" was not an array, input: "+t);w.apply(e,t[n])}return e},I=function(t,e){return A(_(t,e))},O=function(t){var e=x.call(t,0);return e.reverse(),e},L=function(t,e){return e>=0&&e<t.length?b.some(t[e]):b.none()},E=function(t){return L(t,0)},N=function(t){return L(t,t.length-1)},R=function(){return R=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n],e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},R.apply(this,arguments)};function P(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),o=0;for(e=0;e<n;e++)for(var i=arguments[e],a=0,u=i.length;a<u;a++,o++)r[o]=i[a];return r}var z=function(t){var e,n=!1;return function(){for(var r=[],o=0;o<arguments.length;o++)r[o]=arguments[o];return n||(n=!0,e=t.apply(null,r)),e}},B=function(t,e,n,r){var o=t.isiOS()&&!0===/ipad/i.test(n),i=t.isiOS()&&!o,a=t.isiOS()||t.isAndroid(),u=a||r("(pointer:coarse)"),s=o||!i&&a&&r("(min-device-width:768px)"),l=i||a&&!s,c=e.isSafari()&&t.isiOS()&&!1===/safari/i.test(n),d=!l&&!s&&!c;return{isiPad:f(o),isiPhone:f(i),isTablet:f(s),isPhone:f(l),isTouch:f(u),isAndroid:t.isAndroid,isiOS:t.isiOS,isWebView:f(c),isDesktop:f(d)}},V=function(t,e){for(var n=0;n<t.length;n++){var r=t[n];if(r.test(e))return r}},H=function(t,e){var n=V(t,e);if(!n)return{major:0,minor:0};var r=function(t){return Number(e.replace(n,"$"+t))};return U(r(1),r(2))},F=function(t,e){var n=String(e).toLowerCase();return 0===t.length?W():H(t,n)},W=function(){return U(0,0)},U=function(t,e){return{major:t,minor:e}},G={nu:U,detect:F,unknown:W},j=function(t,e){var n=String(e).toLowerCase();return D(t,function(t){return t.search(n)})},X=function(t,e){return j(t,e).map(function(t){var n=G.detect(t.versionRegexes,e);return{current:t.name,version:n}})},Y=function(t,e){return j(t,e).map(function(t){var n=G.detect(t.versionRegexes,e);return{current:t.name,version:n}})},q={detectBrowser:X,detectOs:Y},Z=function(t,e){return-1!==t.indexOf(e)},$=function(t){return function(e){return e.replace(t,"")}},K=$(/^\s+|\s+$/g),J=function(t){return t.length>0},Q=function(t){return!J(t)},tt=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,et=function(t){return function(e){return Z(e,t)}},nt=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:function(t){return Z(t,"edge/")&&Z(t,"chrome")&&Z(t,"safari")&&Z(t,"applewebkit")}},{name:"Chrome",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,tt],search:function(t){return Z(t,"chrome")&&!Z(t,"chromeframe")}},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:function(t){return Z(t,"msie")||Z(t,"trident")}},{name:"Opera",versionRegexes:[tt,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:et("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:et("firefox")},{name:"Safari",versionRegexes:[tt,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:function(t){return(Z(t,"safari")||Z(t,"mobile/"))&&Z(t,"applewebkit")}}],rt=[{name:"Windows",search:et("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:function(t){return Z(t,"iphone")||Z(t,"ipad")},versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:et("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"OSX",search:et("mac os x"),versionRegexes:[/.*?mac\ os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:et("linux"),versionRegexes:[]},{name:"Solaris",search:et("sunos"),versionRegexes:[]},{name:"FreeBSD",search:et("freebsd"),versionRegexes:[]},{name:"ChromeOS",search:et("cros"),versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/]}],ot={browsers:f(nt),oses:f(rt)},it="Edge",at="Chrome",ut="IE",st="Opera",lt="Firefox",ct="Safari",ft=function(){return dt({current:void 0,version:G.unknown()})},dt=function(t){var e=t.current,n=t.version,r=function(t){return function(){return e===t}};return{current:e,version:n,isEdge:r(it),isChrome:r(at),isIE:r(ut),isOpera:r(st),isFirefox:r(lt),isSafari:r(ct)}},ht={unknown:ft,nu:dt,edge:f(it),chrome:f(at),ie:f(ut),opera:f(st),firefox:f(lt),safari:f(ct)},pt="Windows",gt="iOS",mt="Android",vt="Linux",yt="OSX",bt="Solaris",xt="FreeBSD",wt="ChromeOS",_t=function(){return St({current:void 0,version:G.unknown()})},St=function(t){var e=t.current,n=t.version,r=function(t){return function(){return e===t}};return{current:e,version:n,isWindows:r(pt),isiOS:r(gt),isAndroid:r(mt),isOSX:r(yt),isLinux:r(vt),isSolaris:r(bt),isFreeBSD:r(xt),isChromeOS:r(wt)}},Ct={unknown:_t,nu:St,windows:f(pt),ios:f(gt),android:f(mt),linux:f(vt),osx:f(yt),solaris:f(bt),freebsd:f(xt),chromeos:f(wt)},Mt=function(t,e){var n=ot.browsers(),r=ot.oses(),o=q.detectBrowser(n,t).fold(ht.unknown,ht.nu),i=q.detectOs(r,t).fold(Ct.unknown,Ct.nu),a=B(i,o,t,e);return{browser:o,os:i,deviceType:a}},Tt={detect:Mt},kt=function(t){return window.matchMedia(t).matches},Dt=z(function(){return Tt.detect(navigator.userAgent,kt)}),At=function(){return Dt()},It=function(t,e,n){return 0!==(t.compareDocumentPosition(e)&n)},Ot=function(t,e){return It(t,e,Node.DOCUMENT_POSITION_CONTAINED_BY)},Lt=1,Et=function(t,e){var n=e||document,r=n.createElement("div");if(r.innerHTML=t,!r.hasChildNodes()||r.childNodes.length>1)throw console.error("HTML does not have a single root node",t),new Error("HTML must have a single root node");return Pt(r.childNodes[0])},Nt=function(t,e){var n=e||document,r=n.createElement(t);return Pt(r)},Rt=function(t,e){var n=e||document,r=n.createTextNode(t);return Pt(r)},Pt=function(t){if(null===t||void 0===t)throw new Error("Node cannot be null or undefined");return{dom:t}},zt=function(t,e,n){return b.from(t.dom.elementFromPoint(e,n)).map(Pt)},Bt={fromHtml:Et,fromTag:Nt,fromText:Rt,fromDom:Pt,fromPoint:zt},Vt=function(t,e){var n=t.dom;if(n.nodeType!==Lt)return!1;var r=n;if(void 0!==r.matches)return r.matches(e);if(void 0!==r.msMatchesSelector)return r.msMatchesSelector(e);if(void 0!==r.webkitMatchesSelector)return r.webkitMatchesSelector(e);if(void 0!==r.mozMatchesSelector)return r.mozMatchesSelector(e);throw new Error("Browser lacks native selectors")},Ht=function(t,e){return t.dom===e.dom},Ft=function(t,e){var n=t.dom,r=e.dom;return n!==r&&n.contains(r)},Wt=function(t,e){return Ot(t.dom,e.dom)},Ut=function(t,e){return At().browser.isIE()?Wt(t,e):Ft(t,e)},Gt=Vt,jt=tinymce.util.Tools.resolve("tinymce.dom.RangeUtils"),Xt=tinymce.util.Tools.resolve("tinymce.dom.TreeWalker"),Yt=tinymce.util.Tools.resolve("tinymce.util.VK"),qt=Object.keys,Zt=function(t,e){for(var n=qt(t),r=0,o=n.length;r<o;r++){var i=n[r],a=t[i];e(a,i)}},$t=function(t){return function(e,n){t[n]=e}},Kt=function(t,e,n,r){var o={};return Zt(t,function(t,o){(e(t,o)?n:r)(t,o)}),o},Jt=function(t,e){var n={};return Kt(t,e,$t(n),c),n},Qt=("undefined"!==typeof window?window:Function("return this;")(),function(t){var e=t.dom.nodeName;return e.toLowerCase()}),te=function(t){return t.dom.nodeType},ee=function(t){return function(e){return te(e)===t}},ne=ee(Lt),re=function(t,e,n){if(!(o(n)||u(n)||l(n)))throw console.error("Invalid call to Attribute.set. Key ",e,":: Value ",n,":: Element ",t),new Error("Attribute value was not simple");t.setAttribute(e,n+"")},oe=function(t,e){var n=t.dom;Zt(e,function(t,e){re(n,e,t)})},ie=function(t){return T(t.dom.attributes,function(t,e){return t[e.name]=e.value,t},{})},ae=function(t){return b.from(t.dom.parentNode).map(Bt.fromDom)},ue=function(t){return _(t.dom.childNodes,Bt.fromDom)},se=function(t,e){var n=t.dom.childNodes;return b.from(n[e]).map(Bt.fromDom)},le=function(t){return se(t,0)},ce=function(t){return se(t,t.dom.childNodes.length-1)},fe=function(t,e){var n=ae(t);n.each(function(n){n.dom.insertBefore(e.dom,t.dom)})},de=function(t,e){t.dom.appendChild(e.dom)},he=function(t,e){S(e,function(e){fe(t,e)})},pe=function(t,e){S(e,function(e){de(t,e)})},ge=function(t){var e=t.dom;null!==e.parentNode&&e.parentNode.removeChild(e)},me=function(t,e){return Bt.fromDom(t.dom.cloneNode(e))},ve=function(t){return me(t,!0)},ye=function(t,e){var n=Bt.fromTag(e),r=ie(t);return oe(n,r),n},be=function(t,e){var n=ye(t,e);fe(t,n);var r=ue(t);return pe(n,r),ge(t),n},xe=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),we=tinymce.util.Tools.resolve("tinymce.util.Tools"),_e=function(t){return function(e){return e&&e.nodeName.toLowerCase()===t}},Se=function(t){return function(e){return e&&t.test(e.nodeName)}},Ce=function(t){return t&&3===t.nodeType},Me=Se(/^(OL|UL|DL)$/),Te=Se(/^(OL|UL)$/),ke=_e("ol"),De=Se(/^(LI|DT|DD)$/),Ae=Se(/^(DT|DD)$/),Ie=Se(/^(TH|TD)$/),Oe=_e("br"),Le=function(t){return t.parentNode.firstChild===t},Ee=function(t,e){return e&&!!t.schema.getTextBlockElements()[e.nodeName]},Ne=function(t,e){return t&&t.nodeName in e},Re=function(t,e){return!!Oe(e)&&(t.isBlock(e.nextSibling)&&!Oe(e.previousSibling))},Pe=function(t,e,n){var r=t.isEmpty(e);return!(n&&t.select("span[data-mce-type=bookmark]",e).length>0)&&r},ze=function(t,e){return t.isChildOf(e,t.getRoot())},Be=function(t){return t.getParam("lists_indent_on_tab",!0)},Ve=function(t){var e=t.getParam("forced_root_block","p");return!1===e?"":!0===e?"p":e},He=function(t){return t.getParam("forced_root_block_attrs",{})},Fe=function(t,e){var n,r,o,i=t.dom,a=t.schema.getBlockElements(),u=i.createFragment(),s=Ve(t);if(s&&(r=i.create(s),r.tagName===s.toUpperCase()&&i.setAttribs(r,He(t)),Ne(e.firstChild,a)||u.appendChild(r)),e)while(n=e.firstChild){var l=n.nodeName;o||"SPAN"===l&&"bookmark"===n.getAttribute("data-mce-type")||(o=!0),Ne(n,a)?(u.appendChild(n),r=null):s?(r||(r=i.create(s),u.appendChild(r)),r.appendChild(n)):u.appendChild(n)}return s?o||r.appendChild(i.create("br",{"data-mce-bogus":"1"})):u.appendChild(i.create("br")),u},We=xe.DOM,Ue=function(t,e,n){var r=function(t){we.each(o,function(e){t.parentNode.insertBefore(e,n.parentNode)}),We.remove(t)},o=We.select('span[data-mce-type="bookmark"]',e),i=Fe(t,n),a=We.createRng();a.setStartAfter(n),a.setEndAfter(e);for(var u=a.extractContents(),s=u.firstChild;s;s=s.firstChild)if("LI"===s.nodeName&&t.dom.isEmpty(s)){We.remove(s);break}t.dom.isEmpty(u)||We.insertAfter(u,e),We.insertAfter(i,e),Pe(t.dom,n.parentNode)&&r(n.parentNode),We.remove(n),Pe(t.dom,e)&&We.remove(e)},Ge=function(t,e){Gt(e,"dd")?be(e,"dt"):Gt(e,"dt")&&ae(e).each(function(n){return Ue(t,n.dom,e.dom)})},je=function(t){Gt(t,"dt")&&be(t,"dd")},Xe=function(t,e,n){S(n,"Indent"===e?je:function(e){return Ge(t,e)})},Ye=function(t,e){if(Ce(t))return{container:t,offset:e};var n=jt.getNode(t,e);return Ce(n)?{container:n,offset:e>=t.childNodes.length?n.data.length:0}:n.previousSibling&&Ce(n.previousSibling)?{container:n.previousSibling,offset:n.previousSibling.data.length}:n.nextSibling&&Ce(n.nextSibling)?{container:n.nextSibling,offset:0}:{container:t,offset:e}},qe=function(t){var e=t.cloneRange(),n=Ye(t.startContainer,t.startOffset);e.setStart(n.container,n.offset);var r=Ye(t.endContainer,t.endOffset);return e.setEnd(r.container,r.offset),e},Ze=tinymce.util.Tools.resolve("tinymce.dom.DomQuery"),$e=function(t,e){var n=e||t.selection.getStart(!0);return t.dom.getParent(n,"OL,UL,DL",rn(t,n))},Ke=function(t,e){return t&&1===e.length&&e[0]===t},Je=function(t){return we.grep(t.querySelectorAll("ol,ul,dl"),function(t){return Me(t)})},Qe=function(t){var e=$e(t),n=t.selection.getSelectedBlocks();return Ke(e,n)?Je(e):we.grep(n,function(t){return Me(t)&&e!==t})},tn=function(t,e){var n=we.map(e,function(e){var n=t.dom.getParent(e,"li,dd,dt",rn(t,e));return n||e});return Ze.unique(n)},en=function(t){var e=t.selection.getSelectedBlocks();return we.grep(tn(t,e),function(t){return De(t)})},nn=function(t){return C(en(t),Ae)},rn=function(t,e){var n=t.dom.getParents(e,"TD,TH"),r=n.length>0?n[0]:t.getBody();return r},on=function(t,e){var n=t.dom.getParents(e,"ol,ul",rn(t,e));return N(n)},an=function(t){var e=on(t,t.selection.getStart()),n=C(t.selection.getSelectedBlocks(),Te);return e.toArray().concat(n)},un=function(t){var e=an(t);return sn(t,e)},sn=function(t,e){var n=_(e,function(e){return on(t,e).getOr(e)});return Ze.unique(n)},ln=function(t,e,n){return t.isSome()&&e.isSome()?b.some(n(t.getOrDie(),e.getOrDie())):b.none()},cn=function(t,e){var n=e||document,r=n.createDocumentFragment();return S(t,function(t){r.appendChild(t.dom)}),Bt.fromDom(r)},fn=function(t,e,n){return t.fire("ListMutation",{action:e,element:n})},dn=function(t){return void 0!==t.style&&s(t.style.getPropertyValue)},hn=function(t,e,n){if(!o(n))throw console.error("Invalid call to CSS.set. Property ",e,":: Value ",n,":: Element ",t),new Error("CSS value must be a string: "+n);dn(t)&&t.style.setProperty(e,n)},pn=function(t,e,n){var r=t.dom;hn(r,e,n)},gn=function(t,e){de(t.item,e.list)},mn=function(t){for(var e=1;e<t.length;e++)gn(t[e-1],t[e])},vn=function(t,e){ln(N(t),E(e),gn)},yn=function(t,e){var n={list:Bt.fromTag(e,t),item:Bt.fromTag("li",t)};return de(n.list,n.item),n},bn=function(t,e,n){for(var r=[],o=0;o<n;o++)r.push(yn(t,e.listType));return r},xn=function(t,e){for(var n=0;n<t.length-1;n++)pn(t[n].item,"list-style-type","none");N(t).each(function(t){oe(t.list,e.listAttributes),oe(t.item,e.itemAttributes),pe(t.item,e.content)})},wn=function(t,e){Qt(t.list)!==e.listType&&(t.list=be(t.list,e.listType)),oe(t.list,e.listAttributes)},_n=function(t,e,n){var r=Bt.fromTag("li",t);return oe(r,e),pe(r,n),r},Sn=function(t,e){de(t.list,e),t.item=e},Cn=function(t,e,n){var r=e.slice(0,n.depth);return N(r).each(function(e){var r=_n(t,n.itemAttributes,n.content);Sn(e,r),wn(e,n)}),r},Mn=function(t,e,n){var r=bn(t,n,n.depth-e.length);return mn(r),xn(r,n),vn(e,r),e.concat(r)},Tn=function(t,e){var n=T(e,function(e,n){return n.depth>e.length?Mn(t,e,n):Cn(t,e,n)},[]);return E(n).map(function(t){return t.list})},kn=function(t){return Gt(t,"OL,UL")},Dn=function(t){return le(t).map(kn).getOr(!1)},An=function(t){return ce(t).map(kn).getOr(!1)},In=function(t){return t.depth>0},On=function(t){return t.isSelected},Ln=function(t){var e=ue(t),n=An(t)?e.slice(0,-1):e;return _(n,ve)},En=function(t,e,n){return ae(t).filter(ne).map(function(r){return{depth:e,dirty:!1,isSelected:n,content:Ln(t),itemAttributes:ie(t),listAttributes:ie(r),listType:Qt(r)}})},Nn=function(t,e){switch(t){case"Indent":e.depth++;break;case"Outdent":e.depth--;break;case"Flatten":e.depth=0}e.dirty=!0},Rn=function(t,e){t.listType=e.listType,t.listAttributes=R({},e.listAttributes)},Pn=function(t){t.listAttributes=Jt(t.listAttributes,function(t,e){return"start"!==e})},zn=function(t,e){var n=t[e].depth,r=function(t){return t.depth===n&&!t.dirty},o=function(t){return t.depth<n};return k(O(t.slice(0,e)),r,o).orThunk(function(){return k(t.slice(e+1),r,o)})},Bn=function(t){return S(t,function(e,n){zn(t,n).fold(function(){e.dirty&&Pn(e)},function(t){return Rn(e,t)})}),t},Vn=function(t){var e=t,n=function(){return e},r=function(t){e=t};return{get:n,set:r}},Hn=function(t,e,n,r){return le(r).filter(kn).fold(function(){e.each(function(t){Ht(t.start,r)&&n.set(!0)});var o=En(r,t,n.get());e.each(function(t){Ht(t.end,r)&&n.set(!1)});var i=ce(r).filter(kn).map(function(r){return Fn(t,e,n,r)}).getOr([]);return o.toArray().concat(i)},function(r){return Fn(t,e,n,r)})},Fn=function(t,e,n,r){return I(ue(r),function(r){var o=kn(r)?Fn:Hn,i=t+1;return o(i,e,n,r)})},Wn=function(t,e){var n=Vn(!1),r=0;return _(t,function(t){return{sourceList:t,entries:Fn(r,e,n,t)}})},Un=function(t,e){var n=Bn(e);return _(n,function(e){var n=cn(e.content);return Bt.fromDom(Fe(t,n.dom))})},Gn=function(t,e){var n=Bn(e);return Tn(t.contentDocument,n).toArray()},jn=function(t,e){return I(M(e,In),function(e){var n=E(e).map(In).getOr(!1);return n?Gn(t,e):Un(t,e)})},Xn=function(t,e){S(C(t,On),function(t){return Nn(e,t)})},Yn=function(t){var e=_(en(t),Bt.fromDom);return ln(D(e,d(Dn)),D(O(e),d(Dn)),function(t,e){return{start:t,end:e}})},qn=function(t,e,n){var r=Wn(e,Yn(t));S(r,function(e){Xn(e.entries,n);var r=jn(t,e.entries);S(r,function(e){fn(t,"Indent"===n?"IndentList":"OutdentList",e.dom)}),he(e.sourceList,r),ge(e.sourceList)})},Zn=function(t,e){var n=_(un(t),Bt.fromDom),r=_(nn(t),Bt.fromDom),o=!1;if(n.length||r.length){var i=t.selection.getBookmark();qn(t,n,e),Xe(t,e,r),t.selection.moveToBookmark(i),t.selection.setRng(qe(t.selection.getRng())),t.nodeChanged(),o=!0}return o},$n=function(t){return Zn(t,"Indent")},Kn=function(t){return Zn(t,"Outdent")},Jn=function(t){return Zn(t,"Flatten")},Qn=tinymce.util.Tools.resolve("tinymce.dom.BookmarkManager"),tr=xe.DOM,er=function(t){var e={},n=function(n){var r,o,i;o=t[n?"startContainer":"endContainer"],i=t[n?"startOffset":"endOffset"],1===o.nodeType&&(r=tr.create("span",{"data-mce-type":"bookmark"}),o.hasChildNodes()?(i=Math.min(i,o.childNodes.length-1),n?o.insertBefore(r,o.childNodes[i]):tr.insertAfter(r,o.childNodes[i])):o.appendChild(r),o=r,i=0),e[n?"startContainer":"endContainer"]=o,e[n?"startOffset":"endOffset"]=i};return n(!0),t.collapsed||n(),e},nr=function(t){var e=function(e){var n,r,o,i=function(t){var e=t.parentNode.firstChild,n=0;while(e){if(e===t)return n;1===e.nodeType&&"bookmark"===e.getAttribute("data-mce-type")||n++,e=e.nextSibling}return-1};n=o=t[e?"startContainer":"endContainer"],r=t[e?"startOffset":"endOffset"],n&&(1===n.nodeType&&(r=i(n),n=n.parentNode,tr.remove(o),!n.hasChildNodes()&&tr.isBlock(n)&&n.appendChild(tr.create("br"))),t[e?"startContainer":"endContainer"]=n,t[e?"startOffset":"endOffset"]=r)};e(!0),e();var n=tr.createRng();return n.setStart(t.startContainer,t.startOffset),t.endContainer&&n.setEnd(t.endContainer,t.endOffset),qe(n)},rr=function(t){switch(t){case"UL":return"ToggleUlList";case"OL":return"ToggleOlList";case"DL":return"ToggleDLList"}},or=function(t){return/\btox\-/.test(t.className)},ir=function(t,e,n){var r=function(t){var r=k(t.parents,Me,Ie).filter(function(t){return t.nodeName===e&&!or(t)}).isSome();n(r)},o=t.dom.getParents(t.selection.getNode());return r({parents:o}),t.on("NodeChange",r),function(){return t.off("NodeChange",r)}},ar=function(t,e,n){var r=n["list-style-type"]?n["list-style-type"]:null;t.setStyle(e,"list-style-type",r)},ur=function(t,e){we.each(e,function(e,n){t.setAttribute(n,e)})},sr=function(t,e,n){ur(e,n["list-attributes"]),we.each(t.select("li",e),function(t){ur(t,n["list-item-attributes"])})},lr=function(t,e,n){ar(t,e,n),sr(t,e,n)},cr=function(t,e,n){we.each(n,function(n){var r;return t.setStyle(e,(r={},r[n]="",r))})},fr=function(t,e,n,r){var o=e[n?"startContainer":"endContainer"],i=e[n?"startOffset":"endOffset"];1===o.nodeType&&(o=o.childNodes[Math.min(i,o.childNodes.length-1)]||o),!n&&Oe(o.nextSibling)&&(o=o.nextSibling);while(o.parentNode!==r){if(Ee(t,o))return o;if(/^(TD|TH)$/.test(o.parentNode.nodeName))return o;o=o.parentNode}return o},dr=function(t,e,n){for(var r,o=[],i=t.dom,a=fr(t,e,!0,n),u=fr(t,e,!1,n),s=[],l=a;l;l=l.nextSibling)if(s.push(l),l===u)break;return we.each(s,function(e){if(Ee(t,e))return o.push(e),void(r=null);if(i.isBlock(e)||Oe(e))return Oe(e)&&i.remove(e),void(r=null);var a=e.nextSibling;Qn.isBookmarkNode(e)&&(Me(a)||Ee(t,a)||!a&&e.parentNode===n)?r=null:(r||(r=i.create("p"),e.parentNode.insertBefore(r,e),o.push(r)),r.appendChild(e))}),o},hr=function(t,e,n){var r=t.getStyle(e,"list-style-type"),o=n?n["list-style-type"]:"";return o=null===o?"":o,r===o},pr=function(t,e,n){var r=t.selection.getRng(),o="LI",i=rn(t,t.selection.getStart(!0)),a=t.dom;if("false"!==a.getContentEditable(t.selection.getNode())){e=e.toUpperCase(),"DL"===e&&(o="DT");var u=er(r),s=dr(t,r,i);we.each(s,function(r){var i,u=r.previousSibling,s=r.parentNode;De(s)||(u&&Me(u)&&u.nodeName===e&&hr(a,u,n)?(i=u,r=a.rename(r,o),u.appendChild(r)):(i=a.create(e),r.parentNode.insertBefore(i,r),i.appendChild(r),r=a.rename(r,o)),cr(a,r,["margin","margin-right","margin-bottom","margin-left","margin-top","padding","padding-right","padding-bottom","padding-left","padding-top"]),lr(a,i,n),br(t.dom,i))}),t.selection.setRng(nr(u))}},gr=function(t,e){return t&&e&&Me(t)&&t.nodeName===e.nodeName},mr=function(t,e,n){var r=t.getStyle(e,"list-style-type",!0),o=t.getStyle(n,"list-style-type",!0);return r===o},vr=function(t,e){return t.className===e.className},yr=function(t,e,n){return gr(e,n)&&mr(t,e,n)&&vr(e,n)},br=function(t,e){var n,r;if(n=e.nextSibling,yr(t,e,n)){while(r=n.firstChild)e.appendChild(r);t.remove(n)}if(n=e.previousSibling,yr(t,e,n)){while(r=n.lastChild)e.insertBefore(r,e.firstChild);t.remove(n)}},xr=function(t,e,n,r){if(e.nodeName!==n){var o=t.dom.rename(e,n);lr(t.dom,o,r),fn(t,rr(n),o)}else lr(t.dom,e,r),fn(t,rr(n),e)},wr=function(t,e,n,r,o){var i=Me(e);if(i&&e.nodeName===r&&!_r(o))Jn(t);else{pr(t,r,o);var a=er(t.selection.getRng(!0)),u=i?P([e],n):n;we.each(u,function(e){xr(t,e,r,o)}),t.selection.setRng(nr(a))}},_r=function(t){return"list-style-type"in t},Sr=function(t,e,n,r){if(e!==t.getBody())if(e)if(e.nodeName!==n||_r(r)||or(e)){var o=er(t.selection.getRng(!0));lr(t.dom,e,r);var i=t.dom.rename(e,n);br(t.dom,i),t.selection.setRng(nr(o)),pr(t,n,r),fn(t,rr(n),i)}else Jn(t);else pr(t,n,r),fn(t,rr(n),e)},Cr=function(t,e,n){var r=$e(t),o=Qe(t),a=i(n)?n:{};o.length>0?wr(t,r,o,e,a):Sr(t,r,e,a)},Mr=xe.DOM,Tr=function(t,e){var n,r=e.parentNode;"LI"===r.nodeName&&r.firstChild===e&&(n=r.previousSibling,n&&"LI"===n.nodeName?(n.appendChild(e),Pe(t,r)&&Mr.remove(r)):Mr.setStyle(r,"listStyleType","none")),Me(r)&&(n=r.previousSibling,n&&"LI"===n.nodeName&&n.appendChild(e))},kr=function(t,e){we.each(we.grep(t.select("ol,ul",e)),function(e){Tr(t,e)})},Dr=function(t,e,n,r){var o=e.startContainer,i=e.startOffset;if(Ce(o)&&(n?i<o.data.length:i>0))return o;var a=t.schema.getNonEmptyElements();1===o.nodeType&&(o=jt.getNode(o,i));var u=new Xt(o,r);n&&Re(t.dom,o)&&u.next();while(o=u[n?"next":"prev2"]()){if("LI"===o.nodeName&&!o.hasChildNodes())return o;if(a[o.nodeName])return o;if(Ce(o)&&o.data.length>0)return o}},Ar=function(t,e){var n=e.childNodes;return 1===n.length&&!Me(n[0])&&t.isBlock(n[0])},Ir=function(t,e){Ar(t,e)&&t.remove(e.firstChild,!0)},Or=function(t,e,n){var r,o=Ar(t,n)?n.firstChild:n;if(Ir(t,e),!Pe(t,e,!0))while(r=e.firstChild)o.appendChild(r)},Lr=function(t,e,n){var r,o=e.parentNode;if(ze(t,e)&&ze(t,n)){Me(n.lastChild)&&(r=n.lastChild),o===n.lastChild&&Oe(o.previousSibling)&&t.remove(o.previousSibling);var i=n.lastChild;i&&Oe(i)&&e.hasChildNodes()&&t.remove(i),Pe(t,n,!0)&&t.$(n).empty(),Or(t,e,n),r&&n.appendChild(r);var a=Ut(Bt.fromDom(n),Bt.fromDom(e)),u=a?t.getParents(e,Me,n):[];t.remove(e),S(u,function(e){Pe(t,e)&&e!==t.getRoot()&&t.remove(e)})}},Er=function(t,e,n){t.dom.$(n).empty(),Lr(t.dom,e,n),t.selection.setCursorLocation(n,0)},Nr=function(t,e,n,r){var o=t.dom;if(o.isEmpty(r))Er(t,n,r);else{var i=er(e);Lr(o,n,r),t.selection.setRng(nr(i))}},Rr=function(t,e,n,r){var o=er(e);Lr(t.dom,n,r);var i=nr(o);t.selection.setRng(i)},Pr=function(t,e){var n=t.dom,r=t.selection,o=r.getStart(),i=rn(t,o),a=n.getParent(r.getStart(),"LI",i);if(a){var u=a.parentNode;if(u===t.getBody()&&Pe(n,u))return!0;var s=qe(r.getRng()),l=n.getParent(Dr(t,s,e,i),"LI",i);if(l&&l!==a)return t.undoManager.transact(function(){e?Nr(t,s,l,a):Le(a)?Kn(t):Rr(t,s,a,l)}),!0;if(!l&&!e&&0===s.startOffset&&0===s.endOffset)return t.undoManager.transact(function(){Jn(t)}),!0}return!1},zr=function(t,e,n){var r=t.getParent(e.parentNode,t.isBlock,n);t.remove(e),r&&t.isEmpty(r)&&t.remove(r)},Br=function(t,e){var n=t.dom,r=t.selection.getStart(),o=rn(t,r),i=n.getParent(r,n.isBlock,o);if(i&&n.isEmpty(i)){var a=qe(t.selection.getRng()),u=n.getParent(Dr(t,a,e,o),"LI",o);if(u)return t.undoManager.transact(function(){zr(n,i,o),br(n,u.parentNode),t.selection.select(u,!0),t.selection.collapse(e)}),!0}return!1},Vr=function(t,e){return Pr(t,e)||Br(t,e)},Hr=function(t){var e=t.selection.getStart(),n=rn(t,e),r=t.dom.getParent(e,"LI,DT,DD",n);return!!(r||en(t).length>0)&&(t.undoManager.transact(function(){t.execCommand("Delete"),kr(t.dom,t.getBody())}),!0)},Fr=function(t,e){return t.selection.isCollapsed()?Vr(t,e):Hr(t)},Wr=function(t){t.on("keydown",function(e){e.keyCode===Yt.BACKSPACE?Fr(t,!1)&&e.preventDefault():e.keyCode===Yt.DELETE&&Fr(t,!0)&&e.preventDefault()})},Ur=function(t){return{backspaceDelete:function(e){Fr(t,e)}}},Gr=function(t,e){var n=$e(t);t.undoManager.transact(function(){i(e.styles)&&t.dom.setStyles(n,e.styles),i(e.attrs)&&Zt(e.attrs,function(e,r){return t.dom.setAttrib(n,r,e)})})},jr=function(t){var e=O(K(t).split("")),n=_(e,function(t,e){var n=t.toUpperCase().charCodeAt(0)-"A".charCodeAt(0)+1;return Math.pow(26,e)*n});return T(n,function(t,e){return t+e},0)},Xr=function(t){if(t--,t<0)return"";var e=t%26,n=Math.floor(t/26),r=Xr(n),o=String.fromCharCode("A".charCodeAt(0)+e);return r+o},Yr=function(t){return/^[A-Z]+$/.test(t)},qr=function(t){return/^[a-z]+$/.test(t)},Zr=function(t){return/^[0-9]+$/.test(t)},$r=function(t){return Zr(t)?2:Yr(t)?0:qr(t)?1:Q(t)?3:4},Kr=function(t){switch($r(t)){case 2:return b.some({listStyleType:b.none(),start:t});case 0:return b.some({listStyleType:b.some("upper-alpha"),start:jr(t).toString()});case 1:return b.some({listStyleType:b.some("lower-alpha"),start:jr(t).toString()});case 3:return b.some({listStyleType:b.none(),start:""});case 4:return b.none()}},Jr=function(t){var e=parseInt(t.start,10);return t.listStyleType.is("upper-alpha")?Xr(e):t.listStyleType.is("lower-alpha")?Xr(e).toLowerCase():t.start},Qr=function(t){var e=$e(t);ke(e)&&t.windowManager.open({title:"List Properties",body:{type:"panel",items:[{type:"input",name:"start",label:"Start list at number",inputMode:"numeric"}]},initialData:{start:Jr({start:t.dom.getAttrib(e,"start","1"),listStyleType:b.some(t.dom.getStyle(e,"list-style-type"))})},buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],onSubmit:function(e){var n=e.getData();Kr(n.start).each(function(e){t.execCommand("mceListUpdate",!1,{attrs:{start:"1"===e.start?"":e.start},styles:{"list-style-type":e.listStyleType.getOr("")}})}),e.close()}})},to=function(t,e){return function(){var n=$e(t);return n&&n.nodeName===e}},eo=function(t){t.addCommand("mceListProps",function(){Qr(t)})},no=function(t){t.on("BeforeExecCommand",function(e){var n=e.command.toLowerCase();"indent"===n?$n(t):"outdent"===n&&Kn(t)}),t.addCommand("InsertUnorderedList",function(e,n){Cr(t,"UL",n)}),t.addCommand("InsertOrderedList",function(e,n){Cr(t,"OL",n)}),t.addCommand("InsertDefinitionList",function(e,n){Cr(t,"DL",n)}),t.addCommand("RemoveList",function(){Jn(t)}),eo(t),t.addCommand("mceListUpdate",function(e,n){i(n)&&Gr(t,n)}),t.addQueryStateHandler("InsertUnorderedList",to(t,"UL")),t.addQueryStateHandler("InsertOrderedList",to(t,"OL")),t.addQueryStateHandler("InsertDefinitionList",to(t,"DL"))},ro=function(t){t.on("keydown",function(e){e.keyCode!==Yt.TAB||Yt.metaKeyPressed(e)||t.undoManager.transact(function(){(e.shiftKey?Kn(t):$n(t))&&e.preventDefault()})})},oo=function(t){Be(t)&&ro(t),Wr(t)},io=function(t){var e=function(e){return function(){return t.execCommand(e)}};t.hasPlugin("advlist")||(t.ui.registry.addToggleButton("numlist",{icon:"ordered-list",active:!1,tooltip:"Numbered list",onAction:e("InsertOrderedList"),onSetup:function(e){return ir(t,"OL",e.setActive)}}),t.ui.registry.addToggleButton("bullist",{icon:"unordered-list",active:!1,tooltip:"Bullet list",onAction:e("InsertUnorderedList"),onSetup:function(e){return ir(t,"UL",e.setActive)}}))},ao=function(t){var e={text:"List properties...",icon:"ordered-list",onAction:function(){return t.execCommand("mceListProps")},onSetup:function(e){return ir(t,"OL",function(t){return e.setDisabled(!t)})}};t.ui.registry.addMenuItem("listprops",e),t.ui.registry.addContextMenu("lists",{update:function(e){var n=$e(t,e);return ke(n)?["listprops"]:[]}})};function uo(){t.add("lists",function(t){return!1===t.hasPlugin("rtc",!0)?(oo(t),no(t)):eo(t),io(t),ao(t),Ur(t)})}uo()})()},"313e":function(t,e,n){"use strict";var r={};n.r(r),n.d(r,"extendShape",function(){return Vf}),n.d(r,"extendPath",function(){return Ff}),n.d(r,"registerShape",function(){return Wf}),n.d(r,"getShapeClass",function(){return Uf}),n.d(r,"makePath",function(){return Gf}),n.d(r,"makeImage",function(){return jf}),n.d(r,"mergePath",function(){return Yf}),n.d(r,"resizePath",function(){return qf}),n.d(r,"subPixelOptimizeLine",function(){return Zf}),n.d(r,"subPixelOptimizeRect",function(){return $f}),n.d(r,"subPixelOptimize",function(){return Kf}),n.d(r,"updateProps",function(){return Qf}),n.d(r,"initProps",function(){return td}),n.d(r,"removeElement",function(){return ed}),n.d(r,"removeElementWithFadeOut",function(){return rd}),n.d(r,"isElementRemoved",function(){return od}),n.d(r,"getTransform",function(){return id}),n.d(r,"applyTransform",function(){return ad}),n.d(r,"transformDirection",function(){return ud}),n.d(r,"groupTransition",function(){return cd}),n.d(r,"clipPointsByRect",function(){return fd}),n.d(r,"clipRectByRect",function(){return dd}),n.d(r,"createIcon",function(){return hd}),n.d(r,"linePolygonIntersect",function(){return pd}),n.d(r,"lineLineIntersect",function(){return gd}),n.d(r,"setTooltipConfig",function(){return yd}),n.d(r,"Group",function(){return _o}),n.d(r,"Image",function(){return xs}),n.d(r,"Text",function(){return Us}),n.d(r,"Circle",function(){return Tc}),n.d(r,"Ellipse",function(){return Ac}),n.d(r,"Sector",function(){return Xc}),n.d(r,"Ring",function(){return Zc}),n.d(r,"Polygon",function(){return nf}),n.d(r,"Polyline",function(){return af}),n.d(r,"Rect",function(){return As}),n.d(r,"Line",function(){return cf}),n.d(r,"BezierCurve",function(){return gf}),n.d(r,"Arc",function(){return yf}),n.d(r,"IncrementalDisplayable",function(){return Rf}),n.d(r,"CompoundPath",function(){return xf}),n.d(r,"LinearGradient",function(){return Cf}),n.d(r,"RadialGradient",function(){return Tf}),n.d(r,"BoundingRect",function(){return Zr}),n.d(r,"OrientedBoundingRect",function(){return Lf}),n.d(r,"Point",function(){return Vr}),n.d(r,"Path",function(){return ds});
/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */
var o=function(t,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},o(t,e)};function i(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var a=function(){return a=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n],e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},a.apply(this,arguments)};function u(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),o=0;for(e=0;e<n;e++)for(var i=arguments[e],a=0,u=i.length;a<u;a++,o++)r[o]=i[a];return r}var s=function(){function t(){this.firefox=!1,this.ie=!1,this.edge=!1,this.newEdge=!1,this.weChat=!1}return t}(),l=function(){function t(){this.browser=new s,this.node=!1,this.wxa=!1,this.worker=!1,this.canvasSupported=!1,this.svgSupported=!1,this.touchEventsSupported=!1,this.pointerEventsSupported=!1,this.domSupported=!1,this.transformSupported=!1,this.transform3dSupported=!1}return t}(),c=new l;function f(t,e){var n=e.browser,r=t.match(/Firefox\/([\d.]+)/),o=t.match(/MSIE\s([\d.]+)/)||t.match(/Trident\/.+?rv:(([\d.]+))/),i=t.match(/Edge?\/([\d.]+)/),a=/micromessenger/i.test(t);r&&(n.firefox=!0,n.version=r[1]),o&&(n.ie=!0,n.version=o[1]),i&&(n.edge=!0,n.version=i[1],n.newEdge=+i[1].split(".")[0]>18),a&&(n.weChat=!0),e.canvasSupported=!!document.createElement("canvas").getContext,e.svgSupported="undefined"!==typeof SVGRect,e.touchEventsSupported="ontouchstart"in window&&!n.ie&&!n.edge,e.pointerEventsSupported="onpointerdown"in window&&(n.edge||n.ie&&+n.version>=11),e.domSupported="undefined"!==typeof document;var u=document.documentElement.style;e.transform3dSupported=(n.ie&&"transition"in u||n.edge||"WebKitCSSMatrix"in window&&"m11"in new WebKitCSSMatrix||"MozPerspective"in u)&&!("OTransition"in u),e.transformSupported=e.transform3dSupported||n.ie&&+n.version>=9}"object"===typeof wx&&"function"===typeof wx.getSystemInfoSync?(c.wxa=!0,c.canvasSupported=!0,c.touchEventsSupported=!0):"undefined"===typeof document&&"undefined"!==typeof self?(c.worker=!0,c.canvasSupported=!0):"undefined"===typeof navigator?(c.node=!0,c.canvasSupported=!0,c.svgSupported=!0):f(navigator.userAgent,c);var d=c,h={"[object Function]":!0,"[object RegExp]":!0,"[object Date]":!0,"[object Error]":!0,"[object CanvasGradient]":!0,"[object CanvasPattern]":!0,"[object Image]":!0,"[object Canvas]":!0},p={"[object Int8Array]":!0,"[object Uint8Array]":!0,"[object Uint8ClampedArray]":!0,"[object Int16Array]":!0,"[object Uint16Array]":!0,"[object Int32Array]":!0,"[object Uint32Array]":!0,"[object Float32Array]":!0,"[object Float64Array]":!0},g=Object.prototype.toString,m=Array.prototype,v=m.forEach,y=m.filter,b=m.slice,x=m.map,w=function(){}.constructor,_=w?w.prototype:null,S={};var C=2311;function M(){return C++}function T(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];"undefined"!==typeof console&&console.error.apply(console,t)}function k(t){if(null==t||"object"!==typeof t)return t;var e=t,n=g.call(t);if("[object Array]"===n){if(!pt(t)){e=[];for(var r=0,o=t.length;r<o;r++)e[r]=k(t[r])}}else if(p[n]){if(!pt(t)){var i=t.constructor;if(i.from)e=i.from(t);else{e=new i(t.length);for(r=0,o=t.length;r<o;r++)e[r]=k(t[r])}}}else if(!h[n]&&!pt(t)&&!tt(t))for(var a in e={},t)t.hasOwnProperty(a)&&(e[a]=k(t[a]));return e}function D(t,e,n){if(!K(e)||!K(t))return n?k(e):t;for(var r in e)if(e.hasOwnProperty(r)){var o=t[r],i=e[r];!K(i)||!K(o)||X(i)||X(o)||tt(i)||tt(o)||J(i)||J(o)||pt(i)||pt(o)?!n&&r in t||(t[r]=k(e[r])):D(o,i,n)}return t}function A(t,e){for(var n=t[0],r=1,o=t.length;r<o;r++)n=D(n,t[r],e);return n}function I(t,e){if(Object.assign)Object.assign(t,e);else for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t}function O(t,e,n){for(var r=W(e),o=0;o<r.length;o++){var i=r[o];(n?null!=e[i]:null==t[i])&&(t[i]=e[i])}return t}var L=function(){return S.createCanvas()};function E(t,e){if(t){if(t.indexOf)return t.indexOf(e);for(var n=0,r=t.length;n<r;n++)if(t[n]===e)return n}return-1}function N(t,e){var n=t.prototype;function r(){}for(var o in r.prototype=e.prototype,t.prototype=new r,n)n.hasOwnProperty(o)&&(t.prototype[o]=n[o]);t.prototype.constructor=t,t.superClass=e}function R(t,e,n){if(t="prototype"in t?t.prototype:t,e="prototype"in e?e.prototype:e,Object.getOwnPropertyNames)for(var r=Object.getOwnPropertyNames(e),o=0;o<r.length;o++){var i=r[o];"constructor"!==i&&(n?null!=e[i]:null==t[i])&&(t[i]=e[i])}else O(t,e,n)}function P(t){return!!t&&("string"!==typeof t&&"number"===typeof t.length)}function z(t,e,n){if(t&&e)if(t.forEach&&t.forEach===v)t.forEach(e,n);else if(t.length===+t.length)for(var r=0,o=t.length;r<o;r++)e.call(n,t[r],r,t);else for(var i in t)t.hasOwnProperty(i)&&e.call(n,t[i],i,t)}function B(t,e,n){if(!t)return[];if(!e)return st(t);if(t.map&&t.map===x)return t.map(e,n);for(var r=[],o=0,i=t.length;o<i;o++)r.push(e.call(n,t[o],o,t));return r}function V(t,e,n,r){if(t&&e){for(var o=0,i=t.length;o<i;o++)n=e.call(r,n,t[o],o,t);return n}}function H(t,e,n){if(!t)return[];if(!e)return st(t);if(t.filter&&t.filter===y)return t.filter(e,n);for(var r=[],o=0,i=t.length;o<i;o++)e.call(n,t[o],o,t)&&r.push(t[o]);return r}function F(t,e,n){if(t&&e)for(var r=0,o=t.length;r<o;r++)if(e.call(n,t[r],r,t))return t[r]}function W(t){if(!t)return[];if(Object.keys)return Object.keys(t);var e=[];for(var n in t)t.hasOwnProperty(n)&&e.push(n);return e}function U(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];return function(){return t.apply(e,n.concat(b.call(arguments)))}}S.createCanvas=function(){return document.createElement("canvas")};var G=_&&Y(_.bind)?_.call.bind(_.bind):U;function j(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];return function(){return t.apply(this,e.concat(b.call(arguments)))}}function X(t){return Array.isArray?Array.isArray(t):"[object Array]"===g.call(t)}function Y(t){return"function"===typeof t}function q(t){return"string"===typeof t}function Z(t){return"[object String]"===g.call(t)}function $(t){return"number"===typeof t}function K(t){var e=typeof t;return"function"===e||!!t&&"object"===e}function J(t){return!!h[g.call(t)]}function Q(t){return!!p[g.call(t)]}function tt(t){return"object"===typeof t&&"number"===typeof t.nodeType&&"object"===typeof t.ownerDocument}function et(t){return null!=t.colorStops}function nt(t){return null!=t.image}function rt(t){return"[object RegExp]"===g.call(t)}function ot(t){return t!==t}function it(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=0,r=t.length;n<r;n++)if(null!=t[n])return t[n]}function at(t,e){return null!=t?t:e}function ut(t,e,n){return null!=t?t:null!=e?e:n}function st(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];return b.apply(t,e)}function lt(t){if("number"===typeof t)return[t,t,t,t];var e=t.length;return 2===e?[t[0],t[1],t[0],t[1]]:3===e?[t[0],t[1],t[2],t[1]]:t}function ct(t,e){if(!t)throw new Error(e)}function ft(t){return null==t?null:"function"===typeof t.trim?t.trim():t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")}var dt="__ec_primitive__";function ht(t){t[dt]=!0}function pt(t){return t[dt]}var gt=function(){function t(e){this.data={};var n=X(e);this.data={};var r=this;function o(t,e){n?r.set(t,e):r.set(e,t)}e instanceof t?e.each(o):e&&z(e,o)}return t.prototype.get=function(t){return this.data.hasOwnProperty(t)?this.data[t]:null},t.prototype.set=function(t,e){return this.data[t]=e},t.prototype.each=function(t,e){for(var n in this.data)this.data.hasOwnProperty(n)&&t.call(e,this.data[n],n)},t.prototype.keys=function(){return W(this.data)},t.prototype.removeKey=function(t){delete this.data[t]},t}();function mt(t){return new gt(t)}function vt(t,e){for(var n=new t.constructor(t.length+e.length),r=0;r<t.length;r++)n[r]=t[r];var o=t.length;for(r=0;r<e.length;r++)n[r+o]=e[r];return n}function yt(t,e){var n;if(Object.create)n=Object.create(t);else{var r=function(){};r.prototype=t,n=new r}return e&&I(n,e),n}function bt(t,e){return t.hasOwnProperty(e)}function xt(){}function wt(t,e){return null==t&&(t=0),null==e&&(e=0),[t,e]}function _t(t,e){return t[0]=e[0],t[1]=e[1],t}function St(t){return[t[0],t[1]]}function Ct(t,e,n){return t[0]=e,t[1]=n,t}function Mt(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t}function Tt(t,e,n,r){return t[0]=e[0]+n[0]*r,t[1]=e[1]+n[1]*r,t}function kt(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t}function Dt(t){return Math.sqrt(At(t))}function At(t){return t[0]*t[0]+t[1]*t[1]}function It(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t}function Ot(t,e){var n=Dt(e);return 0===n?(t[0]=0,t[1]=0):(t[0]=e[0]/n,t[1]=e[1]/n),t}function Lt(t,e){return Math.sqrt((t[0]-e[0])*(t[0]-e[0])+(t[1]-e[1])*(t[1]-e[1]))}var Et=Lt;function Nt(t,e){return(t[0]-e[0])*(t[0]-e[0])+(t[1]-e[1])*(t[1]-e[1])}var Rt=Nt;function Pt(t,e,n,r){return t[0]=e[0]+r*(n[0]-e[0]),t[1]=e[1]+r*(n[1]-e[1]),t}function zt(t,e,n){var r=e[0],o=e[1];return t[0]=n[0]*r+n[2]*o+n[4],t[1]=n[1]*r+n[3]*o+n[5],t}function Bt(t,e,n){return t[0]=Math.min(e[0],n[0]),t[1]=Math.min(e[1],n[1]),t}function Vt(t,e,n){return t[0]=Math.max(e[0],n[0]),t[1]=Math.max(e[1],n[1]),t}var Ht=function(){function t(t,e){this.target=t,this.topTarget=e&&e.topTarget}return t}(),Ft=function(){function t(t){this.handler=t,t.on("mousedown",this._dragStart,this),t.on("mousemove",this._drag,this),t.on("mouseup",this._dragEnd,this)}return t.prototype._dragStart=function(t){var e=t.target;while(e&&!e.draggable)e=e.parent;e&&(this._draggingTarget=e,e.dragging=!0,this._x=t.offsetX,this._y=t.offsetY,this.handler.dispatchToElement(new Ht(e,t),"dragstart",t.event))},t.prototype._drag=function(t){var e=this._draggingTarget;if(e){var n=t.offsetX,r=t.offsetY,o=n-this._x,i=r-this._y;this._x=n,this._y=r,e.drift(o,i,t),this.handler.dispatchToElement(new Ht(e,t),"drag",t.event);var a=this.handler.findHover(n,r,e).target,u=this._dropTarget;this._dropTarget=a,e!==a&&(u&&a!==u&&this.handler.dispatchToElement(new Ht(u,t),"dragleave",t.event),a&&a!==u&&this.handler.dispatchToElement(new Ht(a,t),"dragenter",t.event))}},t.prototype._dragEnd=function(t){var e=this._draggingTarget;e&&(e.dragging=!1),this.handler.dispatchToElement(new Ht(e,t),"dragend",t.event),this._dropTarget&&this.handler.dispatchToElement(new Ht(this._dropTarget,t),"drop",t.event),this._draggingTarget=null,this._dropTarget=null},t}(),Wt=Ft,Ut=function(){function t(t){t&&(this._$eventProcessor=t)}return t.prototype.on=function(t,e,n,r){this._$handlers||(this._$handlers={});var o=this._$handlers;if("function"===typeof e&&(r=n,n=e,e=null),!n||!t)return this;var i=this._$eventProcessor;null!=e&&i&&i.normalizeQuery&&(e=i.normalizeQuery(e)),o[t]||(o[t]=[]);for(var a=0;a<o[t].length;a++)if(o[t][a].h===n)return this;var u={h:n,query:e,ctx:r||this,callAtLast:n.zrEventfulCallAtLast},s=o[t].length-1,l=o[t][s];return l&&l.callAtLast?o[t].splice(s,0,u):o[t].push(u),this},t.prototype.isSilent=function(t){var e=this._$handlers;return!e||!e[t]||!e[t].length},t.prototype.off=function(t,e){var n=this._$handlers;if(!n)return this;if(!t)return this._$handlers={},this;if(e){if(n[t]){for(var r=[],o=0,i=n[t].length;o<i;o++)n[t][o].h!==e&&r.push(n[t][o]);n[t]=r}n[t]&&0===n[t].length&&delete n[t]}else delete n[t];return this},t.prototype.trigger=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(!this._$handlers)return this;var r=this._$handlers[t],o=this._$eventProcessor;if(r)for(var i=e.length,a=r.length,u=0;u<a;u++){var s=r[u];if(!o||!o.filter||null==s.query||o.filter(t,s.query))switch(i){case 0:s.h.call(s.ctx);break;case 1:s.h.call(s.ctx,e[0]);break;case 2:s.h.call(s.ctx,e[0],e[1]);break;default:s.h.apply(s.ctx,e);break}}return o&&o.afterTrigger&&o.afterTrigger(t),this},t.prototype.triggerWithContext=function(t){if(!this._$handlers)return this;var e=this._$handlers[t],n=this._$eventProcessor;if(e)for(var r=arguments,o=r.length,i=r[o-1],a=e.length,u=0;u<a;u++){var s=e[u];if(!n||!n.filter||null==s.query||n.filter(t,s.query))switch(o){case 0:s.h.call(i);break;case 1:s.h.call(i,r[0]);break;case 2:s.h.call(i,r[0],r[1]);break;default:s.h.apply(i,r.slice(1,o-1));break}}return n&&n.afterTrigger&&n.afterTrigger(t),this},t}(),Gt=Ut,jt=Math.log(2);function Xt(t,e,n,r,o,i){var a=r+"-"+o,u=t.length;if(i.hasOwnProperty(a))return i[a];if(1===e){var s=Math.round(Math.log((1<<u)-1&~o)/jt);return t[n][s]}var l=r|1<<n,c=n+1;while(r&1<<c)c++;for(var f=0,d=0,h=0;d<u;d++){var p=1<<d;p&o||(f+=(h%2?-1:1)*t[n][d]*Xt(t,e-1,c,l,o|p,i),h++)}return i[a]=f,f}function Yt(t,e){var n=[[t[0],t[1],1,0,0,0,-e[0]*t[0],-e[0]*t[1]],[0,0,0,t[0],t[1],1,-e[1]*t[0],-e[1]*t[1]],[t[2],t[3],1,0,0,0,-e[2]*t[2],-e[2]*t[3]],[0,0,0,t[2],t[3],1,-e[3]*t[2],-e[3]*t[3]],[t[4],t[5],1,0,0,0,-e[4]*t[4],-e[4]*t[5]],[0,0,0,t[4],t[5],1,-e[5]*t[4],-e[5]*t[5]],[t[6],t[7],1,0,0,0,-e[6]*t[6],-e[6]*t[7]],[0,0,0,t[6],t[7],1,-e[7]*t[6],-e[7]*t[7]]],r={},o=Xt(n,8,0,0,0,r);if(0!==o){for(var i=[],a=0;a<8;a++)for(var u=0;u<8;u++)null==i[u]&&(i[u]=0),i[u]+=((a+u)%2?-1:1)*Xt(n,7,0===a?1:0,1<<a,1<<u,r)/o*e[a];return function(t,e,n){var r=e*i[6]+n*i[7]+1;t[0]=(e*i[0]+n*i[1]+i[2])/r,t[1]=(e*i[3]+n*i[4]+i[5])/r}}}var qt="___zrEVENTSAVED",Zt=[];function $t(t,e,n,r,o){return Kt(Zt,e,r,o,!0)&&Kt(t,n,Zt[0],Zt[1])}function Kt(t,e,n,r,o){if(e.getBoundingClientRect&&d.domSupported&&!te(e)){var i=e[qt]||(e[qt]={}),a=Jt(e,i),u=Qt(a,i,o);if(u)return u(t,n,r),!0}return!1}function Jt(t,e){var n=e.markers;if(n)return n;n=e.markers=[];for(var r=["left","right"],o=["top","bottom"],i=0;i<4;i++){var a=document.createElement("div"),u=a.style,s=i%2,l=(i>>1)%2;u.cssText=["position: absolute","visibility: hidden","padding: 0","margin: 0","border-width: 0","user-select: none","width:0","height:0",r[s]+":0",o[l]+":0",r[1-s]+":auto",o[1-l]+":auto",""].join("!important;"),t.appendChild(a),n.push(a)}return n}function Qt(t,e,n){for(var r=n?"invTrans":"trans",o=e[r],i=e.srcCoords,a=[],u=[],s=!0,l=0;l<4;l++){var c=t[l].getBoundingClientRect(),f=2*l,d=c.left,h=c.top;a.push(d,h),s=s&&i&&d===i[f]&&h===i[f+1],u.push(t[l].offsetLeft,t[l].offsetTop)}return s&&o?o:(e.srcCoords=a,e[r]=n?Yt(u,a):Yt(a,u))}function te(t){return"CANVAS"===t.nodeName.toUpperCase()}var ee="undefined"!==typeof window&&!!window.addEventListener,ne=/^(?:mouse|pointer|contextmenu|drag|drop)|click/,re=[];function oe(t,e,n,r){return n=n||{},r||!d.canvasSupported?ie(t,e,n):d.browser.firefox&&null!=e.layerX&&e.layerX!==e.offsetX?(n.zrX=e.layerX,n.zrY=e.layerY):null!=e.offsetX?(n.zrX=e.offsetX,n.zrY=e.offsetY):ie(t,e,n),n}function ie(t,e,n){if(d.domSupported&&t.getBoundingClientRect){var r=e.clientX,o=e.clientY;if(te(t)){var i=t.getBoundingClientRect();return n.zrX=r-i.left,void(n.zrY=o-i.top)}if(Kt(re,t,r,o))return n.zrX=re[0],void(n.zrY=re[1])}n.zrX=n.zrY=0}function ae(t){return t||window.event}function ue(t,e,n){if(e=ae(e),null!=e.zrX)return e;var r=e.type,o=r&&r.indexOf("touch")>=0;if(o){var i="touchend"!==r?e.targetTouches[0]:e.changedTouches[0];i&&oe(t,i,e,n)}else{oe(t,e,e,n);var a=se(e);e.zrDelta=a?a/120:-(e.detail||0)/3}var u=e.button;return null==e.which&&void 0!==u&&ne.test(e.type)&&(e.which=1&u?1:2&u?3:4&u?2:0),e}function se(t){var e=t.wheelDelta;if(e)return e;var n=t.deltaX,r=t.deltaY;if(null==n||null==r)return e;var o=0!==r?Math.abs(r):Math.abs(n),i=r>0?-1:r<0?1:n>0?-1:1;return 3*o*i}function le(t,e,n,r){ee?t.addEventListener(e,n,r):t.attachEvent("on"+e,n)}function ce(t,e,n,r){ee?t.removeEventListener(e,n,r):t.detachEvent("on"+e,n)}var fe=ee?function(t){t.preventDefault(),t.stopPropagation(),t.cancelBubble=!0}:function(t){t.returnValue=!1,t.cancelBubble=!0};function de(t){return 2===t.which||3===t.which}var he=function(){function t(){this._track=[]}return t.prototype.recognize=function(t,e,n){return this._doTrack(t,e,n),this._recognize(t)},t.prototype.clear=function(){return this._track.length=0,this},t.prototype._doTrack=function(t,e,n){var r=t.touches;if(r){for(var o={points:[],touches:[],target:e,event:t},i=0,a=r.length;i<a;i++){var u=r[i],s=oe(n,u,{});o.points.push([s.zrX,s.zrY]),o.touches.push(u)}this._track.push(o)}},t.prototype._recognize=function(t){for(var e in me)if(me.hasOwnProperty(e)){var n=me[e](this._track,t);if(n)return n}},t}();function pe(t){var e=t[1][0]-t[0][0],n=t[1][1]-t[0][1];return Math.sqrt(e*e+n*n)}function ge(t){return[(t[0][0]+t[1][0])/2,(t[0][1]+t[1][1])/2]}var me={pinch:function(t,e){var n=t.length;if(n){var r=(t[n-1]||{}).points,o=(t[n-2]||{}).points||r;if(o&&o.length>1&&r&&r.length>1){var i=pe(r)/pe(o);!isFinite(i)&&(i=1),e.pinchScale=i;var a=ge(r);return e.pinchX=a[0],e.pinchY=a[1],{type:"pinch",target:t[0].target,event:e}}}}},ve="silent";function ye(t,e,n){return{type:t,event:n,target:e.target,topTarget:e.topTarget,cancelBubble:!1,offsetX:n.zrX,offsetY:n.zrY,gestureEvent:n.gestureEvent,pinchX:n.pinchX,pinchY:n.pinchY,pinchScale:n.pinchScale,wheelDelta:n.zrDelta,zrByTouch:n.zrByTouch,which:n.which,stop:be}}function be(){fe(this.event)}var xe=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.handler=null,e}return i(e,t),e.prototype.dispose=function(){},e.prototype.setCursor=function(){},e}(Gt),we=function(){function t(t,e){this.x=t,this.y=e}return t}(),_e=["click","dblclick","mousewheel","mouseout","mouseup","mousedown","mousemove","contextmenu"],Se=function(t){function e(e,n,r,o){var i=t.call(this)||this;return i._hovered=new we(0,0),i.storage=e,i.painter=n,i.painterRoot=o,r=r||new xe,i.proxy=null,i.setHandlerProxy(r),i._draggingMgr=new Wt(i),i}return i(e,t),e.prototype.setHandlerProxy=function(t){this.proxy&&this.proxy.dispose(),t&&(z(_e,function(e){t.on&&t.on(e,this[e],this)},this),t.handler=this),this.proxy=t},e.prototype.mousemove=function(t){var e=t.zrX,n=t.zrY,r=Me(this,e,n),o=this._hovered,i=o.target;i&&!i.__zr&&(o=this.findHover(o.x,o.y),i=o.target);var a=this._hovered=r?new we(e,n):this.findHover(e,n),u=a.target,s=this.proxy;s.setCursor&&s.setCursor(u?u.cursor:"default"),i&&u!==i&&this.dispatchToElement(o,"mouseout",t),this.dispatchToElement(a,"mousemove",t),u&&u!==i&&this.dispatchToElement(a,"mouseover",t)},e.prototype.mouseout=function(t){var e=t.zrEventControl;"only_globalout"!==e&&this.dispatchToElement(this._hovered,"mouseout",t),"no_globalout"!==e&&this.trigger("globalout",{type:"globalout",event:t})},e.prototype.resize=function(){this._hovered=new we(0,0)},e.prototype.dispatch=function(t,e){var n=this[t];n&&n.call(this,e)},e.prototype.dispose=function(){this.proxy.dispose(),this.storage=null,this.proxy=null,this.painter=null},e.prototype.setCursorStyle=function(t){var e=this.proxy;e.setCursor&&e.setCursor(t)},e.prototype.dispatchToElement=function(t,e,n){t=t||{};var r=t.target;if(!r||!r.silent){var o="on"+e,i=ye(e,t,n);while(r)if(r[o]&&(i.cancelBubble=!!r[o].call(r,i)),r.trigger(e,i),r=r.__hostTarget?r.__hostTarget:r.parent,i.cancelBubble)break;i.cancelBubble||(this.trigger(e,i),this.painter&&this.painter.eachOtherLayer&&this.painter.eachOtherLayer(function(t){"function"===typeof t[o]&&t[o].call(t,i),t.trigger&&t.trigger(e,i)}))}},e.prototype.findHover=function(t,e,n){for(var r=this.storage.getDisplayList(),o=new we(t,e),i=r.length-1;i>=0;i--){var a=void 0;if(r[i]!==n&&!r[i].ignore&&(a=Ce(r[i],t,e))&&(!o.topTarget&&(o.topTarget=r[i]),a!==ve)){o.target=r[i];break}}return o},e.prototype.processGesture=function(t,e){this._gestureMgr||(this._gestureMgr=new he);var n=this._gestureMgr;"start"===e&&n.clear();var r=n.recognize(t,this.findHover(t.zrX,t.zrY,null).target,this.proxy.dom);if("end"===e&&n.clear(),r){var o=r.type;t.gestureEvent=o;var i=new we;i.target=r.target,this.dispatchToElement(i,o,r.event)}},e}(Gt);function Ce(t,e,n){if(t[t.rectHover?"rectContain":"contain"](e,n)){var r=t,o=void 0,i=!1;while(r){if(r.ignoreClip&&(i=!0),!i){var a=r.getClipPath();if(a&&!a.contain(e,n))return!1;r.silent&&(o=!0)}var u=r.__hostTarget;r=u||r.parent}return!o||ve}return!1}function Me(t,e,n){var r=t.painter;return e<0||e>r.getWidth()||n<0||n>r.getHeight()}z(["click","mousedown","mouseup","mousewheel","dblclick","contextmenu"],function(t){Se.prototype[t]=function(e){var n,r,o=e.zrX,i=e.zrY,a=Me(this,o,i);if("mouseup"===t&&a||(n=this.findHover(o,i),r=n.target),"mousedown"===t)this._downEl=r,this._downPoint=[e.zrX,e.zrY],this._upEl=r;else if("mouseup"===t)this._upEl=r;else if("click"===t){if(this._downEl!==this._upEl||!this._downPoint||Et(this._downPoint,[e.zrX,e.zrY])>4)return;this._downPoint=null}this.dispatchToElement(n,t,e)}});var Te=Se,ke=32,De=7;function Ae(t){var e=0;while(t>=ke)e|=1&t,t>>=1;return t+e}function Ie(t,e,n,r){var o=e+1;if(o===n)return 1;if(r(t[o++],t[e])<0){while(o<n&&r(t[o],t[o-1])<0)o++;Oe(t,e,o)}else while(o<n&&r(t[o],t[o-1])>=0)o++;return o-e}function Oe(t,e,n){n--;while(e<n){var r=t[e];t[e++]=t[n],t[n--]=r}}function Le(t,e,n,r,o){for(r===e&&r++;r<n;r++){var i,a=t[r],u=e,s=r;while(u<s)i=u+s>>>1,o(a,t[i])<0?s=i:u=i+1;var l=r-u;switch(l){case 3:t[u+3]=t[u+2];case 2:t[u+2]=t[u+1];case 1:t[u+1]=t[u];break;default:while(l>0)t[u+l]=t[u+l-1],l--}t[u]=a}}function Ee(t,e,n,r,o,i){var a=0,u=0,s=1;if(i(t,e[n+o])>0){u=r-o;while(s<u&&i(t,e[n+o+s])>0)a=s,s=1+(s<<1),s<=0&&(s=u);s>u&&(s=u),a+=o,s+=o}else{u=o+1;while(s<u&&i(t,e[n+o-s])<=0)a=s,s=1+(s<<1),s<=0&&(s=u);s>u&&(s=u);var l=a;a=o-s,s=o-l}a++;while(a<s){var c=a+(s-a>>>1);i(t,e[n+c])>0?a=c+1:s=c}return s}function Ne(t,e,n,r,o,i){var a=0,u=0,s=1;if(i(t,e[n+o])<0){u=o+1;while(s<u&&i(t,e[n+o-s])<0)a=s,s=1+(s<<1),s<=0&&(s=u);s>u&&(s=u);var l=a;a=o-s,s=o-l}else{u=r-o;while(s<u&&i(t,e[n+o+s])>=0)a=s,s=1+(s<<1),s<=0&&(s=u);s>u&&(s=u),a+=o,s+=o}a++;while(a<s){var c=a+(s-a>>>1);i(t,e[n+c])<0?s=c:a=c+1}return s}function Re(t,e){var n,r,o=De,i=0,a=0;i=t.length;var u=[];function s(t,e){n[a]=t,r[a]=e,a+=1}function l(){while(a>1){var t=a-2;if(t>=1&&r[t-1]<=r[t]+r[t+1]||t>=2&&r[t-2]<=r[t]+r[t-1])r[t-1]<r[t+1]&&t--;else if(r[t]>r[t+1])break;f(t)}}function c(){while(a>1){var t=a-2;t>0&&r[t-1]<r[t+1]&&t--,f(t)}}function f(o){var i=n[o],u=r[o],s=n[o+1],l=r[o+1];r[o]=u+l,o===a-3&&(n[o+1]=n[o+2],r[o+1]=r[o+2]),a--;var c=Ne(t[s],t,i,u,0,e);i+=c,u-=c,0!==u&&(l=Ee(t[i+u-1],t,s,l,l-1,e),0!==l&&(u<=l?d(i,u,s,l):h(i,u,s,l)))}function d(n,r,i,a){var s=0;for(s=0;s<r;s++)u[s]=t[n+s];var l=0,c=i,f=n;if(t[f++]=t[c++],0!==--a)if(1!==r){var d,h,p,g=o;while(1){d=0,h=0,p=!1;do{if(e(t[c],u[l])<0){if(t[f++]=t[c++],h++,d=0,0===--a){p=!0;break}}else if(t[f++]=u[l++],d++,h=0,1===--r){p=!0;break}}while((d|h)<g);if(p)break;do{if(d=Ne(t[c],u,l,r,0,e),0!==d){for(s=0;s<d;s++)t[f+s]=u[l+s];if(f+=d,l+=d,r-=d,r<=1){p=!0;break}}if(t[f++]=t[c++],0===--a){p=!0;break}if(h=Ee(u[l],t,c,a,0,e),0!==h){for(s=0;s<h;s++)t[f+s]=t[c+s];if(f+=h,c+=h,a-=h,0===a){p=!0;break}}if(t[f++]=u[l++],1===--r){p=!0;break}g--}while(d>=De||h>=De);if(p)break;g<0&&(g=0),g+=2}if(o=g,o<1&&(o=1),1===r){for(s=0;s<a;s++)t[f+s]=t[c+s];t[f+a]=u[l]}else{if(0===r)throw new Error;for(s=0;s<r;s++)t[f+s]=u[l+s]}}else{for(s=0;s<a;s++)t[f+s]=t[c+s];t[f+a]=u[l]}else for(s=0;s<r;s++)t[f+s]=u[l+s]}function h(n,r,i,a){var s=0;for(s=0;s<a;s++)u[s]=t[i+s];var l=n+r-1,c=a-1,f=i+a-1,d=0,h=0;if(t[f--]=t[l--],0!==--r)if(1!==a){var p=o;while(1){var g=0,m=0,v=!1;do{if(e(u[c],t[l])<0){if(t[f--]=t[l--],g++,m=0,0===--r){v=!0;break}}else if(t[f--]=u[c--],m++,g=0,1===--a){v=!0;break}}while((g|m)<p);if(v)break;do{if(g=r-Ne(u[c],t,n,r,r-1,e),0!==g){for(f-=g,l-=g,r-=g,h=f+1,d=l+1,s=g-1;s>=0;s--)t[h+s]=t[d+s];if(0===r){v=!0;break}}if(t[f--]=u[c--],1===--a){v=!0;break}if(m=a-Ee(t[l],u,0,a,a-1,e),0!==m){for(f-=m,c-=m,a-=m,h=f+1,d=c+1,s=0;s<m;s++)t[h+s]=u[d+s];if(a<=1){v=!0;break}}if(t[f--]=t[l--],0===--r){v=!0;break}p--}while(g>=De||m>=De);if(v)break;p<0&&(p=0),p+=2}if(o=p,o<1&&(o=1),1===a){for(f-=r,l-=r,h=f+1,d=l+1,s=r-1;s>=0;s--)t[h+s]=t[d+s];t[f]=u[c]}else{if(0===a)throw new Error;for(d=f-(a-1),s=0;s<a;s++)t[d+s]=u[s]}}else{for(f-=r,l-=r,h=f+1,d=l+1,s=r-1;s>=0;s--)t[h+s]=t[d+s];t[f]=u[c]}else for(d=f-(a-1),s=0;s<a;s++)t[d+s]=u[s]}return i<120?5:i<1542?10:i<119151?19:40,n=[],r=[],{mergeRuns:l,forceMergeRuns:c,pushRun:s}}function Pe(t,e,n,r){n||(n=0),r||(r=t.length);var o=r-n;if(!(o<2)){var i=0;if(o<ke)return i=Ie(t,n,r,e),void Le(t,n,r,n+i,e);var a=Re(t,e),u=Ae(o);do{if(i=Ie(t,n,r,e),i<u){var s=o;s>u&&(s=u),Le(t,n,n+s,n+i,e),i=s}a.pushRun(n,i),a.mergeRuns(),o-=i,n+=i}while(0!==o);a.forceMergeRuns()}}var ze=1,Be=2,Ve=4,He=!1;function Fe(){He||(He=!0,console.warn("z / z2 / zlevel of displayable is invalid, which may cause unexpected errors"))}function We(t,e){return t.zlevel===e.zlevel?t.z===e.z?t.z2-e.z2:t.z-e.z:t.zlevel-e.zlevel}var Ue,Ge=function(){function t(){this._roots=[],this._displayList=[],this._displayListLen=0,this.displayableSortFunc=We}return t.prototype.traverse=function(t,e){for(var n=0;n<this._roots.length;n++)this._roots[n].traverse(t,e)},t.prototype.getDisplayList=function(t,e){e=e||!1;var n=this._displayList;return!t&&n.length||this.updateDisplayList(e),n},t.prototype.updateDisplayList=function(t){this._displayListLen=0;for(var e=this._roots,n=this._displayList,r=0,o=e.length;r<o;r++)this._updateAndAddDisplayable(e[r],null,t);n.length=this._displayListLen,d.canvasSupported&&Pe(n,We)},t.prototype._updateAndAddDisplayable=function(t,e,n){if(!t.ignore||n){t.beforeUpdate(),t.update(),t.afterUpdate();var r=t.getClipPath();if(t.ignoreClip)e=null;else if(r){e=e?e.slice():[];var o=r,i=t;while(o)o.parent=i,o.updateTransform(),e.push(o),i=o,o=o.getClipPath()}if(t.childrenRef){for(var a=t.childrenRef(),u=0;u<a.length;u++){var s=a[u];t.__dirty&&(s.__dirty|=ze),this._updateAndAddDisplayable(s,e,n)}t.__dirty=0}else{var l=t;e&&e.length?l.__clipPaths=e:l.__clipPaths&&l.__clipPaths.length>0&&(l.__clipPaths=[]),isNaN(l.z)&&(Fe(),l.z=0),isNaN(l.z2)&&(Fe(),l.z2=0),isNaN(l.zlevel)&&(Fe(),l.zlevel=0),this._displayList[this._displayListLen++]=l}var c=t.getDecalElement&&t.getDecalElement();c&&this._updateAndAddDisplayable(c,e,n);var f=t.getTextGuideLine();f&&this._updateAndAddDisplayable(f,e,n);var d=t.getTextContent();d&&this._updateAndAddDisplayable(d,e,n)}},t.prototype.addRoot=function(t){t.__zr&&t.__zr.storage===this||this._roots.push(t)},t.prototype.delRoot=function(t){if(t instanceof Array)for(var e=0,n=t.length;e<n;e++)this.delRoot(t[e]);else{var r=E(this._roots,t);r>=0&&this._roots.splice(r,1)}},t.prototype.delAllRoots=function(){this._roots=[],this._displayList=[],this._displayListLen=0},t.prototype.getRoots=function(){return this._roots},t.prototype.dispose=function(){this._displayList=null,this._roots=null},t}(),je=Ge;Ue="undefined"!==typeof window&&(window.requestAnimationFrame&&window.requestAnimationFrame.bind(window)||window.msRequestAnimationFrame&&window.msRequestAnimationFrame.bind(window)||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame)||function(t){return setTimeout(t,16)};var Xe=Ue,Ye={linear:function(t){return t},quadraticIn:function(t){return t*t},quadraticOut:function(t){return t*(2-t)},quadraticInOut:function(t){return(t*=2)<1?.5*t*t:-.5*(--t*(t-2)-1)},cubicIn:function(t){return t*t*t},cubicOut:function(t){return--t*t*t+1},cubicInOut:function(t){return(t*=2)<1?.5*t*t*t:.5*((t-=2)*t*t+2)},quarticIn:function(t){return t*t*t*t},quarticOut:function(t){return 1- --t*t*t*t},quarticInOut:function(t){return(t*=2)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2)},quinticIn:function(t){return t*t*t*t*t},quinticOut:function(t){return--t*t*t*t*t+1},quinticInOut:function(t){return(t*=2)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2)},sinusoidalIn:function(t){return 1-Math.cos(t*Math.PI/2)},sinusoidalOut:function(t){return Math.sin(t*Math.PI/2)},sinusoidalInOut:function(t){return.5*(1-Math.cos(Math.PI*t))},exponentialIn:function(t){return 0===t?0:Math.pow(1024,t-1)},exponentialOut:function(t){return 1===t?1:1-Math.pow(2,-10*t)},exponentialInOut:function(t){return 0===t?0:1===t?1:(t*=2)<1?.5*Math.pow(1024,t-1):.5*(2-Math.pow(2,-10*(t-1)))},circularIn:function(t){return 1-Math.sqrt(1-t*t)},circularOut:function(t){return Math.sqrt(1- --t*t)},circularInOut:function(t){return(t*=2)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1)},elasticIn:function(t){var e,n=.1,r=.4;return 0===t?0:1===t?1:(!n||n<1?(n=1,e=r/4):e=r*Math.asin(1/n)/(2*Math.PI),-n*Math.pow(2,10*(t-=1))*Math.sin((t-e)*(2*Math.PI)/r))},elasticOut:function(t){var e,n=.1,r=.4;return 0===t?0:1===t?1:(!n||n<1?(n=1,e=r/4):e=r*Math.asin(1/n)/(2*Math.PI),n*Math.pow(2,-10*t)*Math.sin((t-e)*(2*Math.PI)/r)+1)},elasticInOut:function(t){var e,n=.1,r=.4;return 0===t?0:1===t?1:(!n||n<1?(n=1,e=r/4):e=r*Math.asin(1/n)/(2*Math.PI),(t*=2)<1?n*Math.pow(2,10*(t-=1))*Math.sin((t-e)*(2*Math.PI)/r)*-.5:n*Math.pow(2,-10*(t-=1))*Math.sin((t-e)*(2*Math.PI)/r)*.5+1)},backIn:function(t){var e=1.70158;return t*t*((e+1)*t-e)},backOut:function(t){var e=1.70158;return--t*t*((e+1)*t+e)+1},backInOut:function(t){var e=2.5949095;return(t*=2)<1?t*t*((e+1)*t-e)*.5:.5*((t-=2)*t*((e+1)*t+e)+2)},bounceIn:function(t){return 1-Ye.bounceOut(1-t)},bounceOut:function(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375},bounceInOut:function(t){return t<.5?.5*Ye.bounceIn(2*t):.5*Ye.bounceOut(2*t-1)+.5}},qe=Ye,Ze=function(){function t(t){this._initialized=!1,this._startTime=0,this._pausedTime=0,this._paused=!1,this._life=t.life||1e3,this._delay=t.delay||0,this.loop=null!=t.loop&&t.loop,this.gap=t.gap||0,this.easing=t.easing||"linear",this.onframe=t.onframe,this.ondestroy=t.ondestroy,this.onrestart=t.onrestart}return t.prototype.step=function(t,e){if(this._initialized||(this._startTime=t+this._delay,this._initialized=!0),!this._paused){var n=(t-this._startTime-this._pausedTime)/this._life;n<0&&(n=0),n=Math.min(n,1);var r=this.easing,o="string"===typeof r?qe[r]:r,i="function"===typeof o?o(n):n;if(this.onframe&&this.onframe(i),1===n){if(!this.loop)return!0;this._restart(t),this.onrestart&&this.onrestart()}return!1}this._pausedTime+=e},t.prototype._restart=function(t){var e=(t-this._startTime-this._pausedTime)%this._life;this._startTime=t-e+this.gap,this._pausedTime=0},t.prototype.pause=function(){this._paused=!0},t.prototype.resume=function(){this._paused=!1},t}(),$e=Ze,Ke=function(){function t(t){this.value=t}return t}(),Je=function(){function t(){this._len=0}return t.prototype.insert=function(t){var e=new Ke(t);return this.insertEntry(e),e},t.prototype.insertEntry=function(t){this.head?(this.tail.next=t,t.prev=this.tail,t.next=null,this.tail=t):this.head=this.tail=t,this._len++},t.prototype.remove=function(t){var e=t.prev,n=t.next;e?e.next=n:this.head=n,n?n.prev=e:this.tail=e,t.next=t.prev=null,this._len--},t.prototype.len=function(){return this._len},t.prototype.clear=function(){this.head=this.tail=null,this._len=0},t}(),Qe=function(){function t(t){this._list=new Je,this._maxSize=10,this._map={},this._maxSize=t}return t.prototype.put=function(t,e){var n=this._list,r=this._map,o=null;if(null==r[t]){var i=n.len(),a=this._lastRemovedEntry;if(i>=this._maxSize&&i>0){var u=n.head;n.remove(u),delete r[u.key],o=u.value,this._lastRemovedEntry=u}a?a.value=e:a=new Ke(e),a.key=t,n.insertEntry(a),r[t]=a}return o},t.prototype.get=function(t){var e=this._map[t],n=this._list;if(null!=e)return e!==n.tail&&(n.remove(e),n.insertEntry(e)),e.value},t.prototype.clear=function(){this._list.clear(),this._map={}},t.prototype.len=function(){return this._list.len()},t}(),tn=Qe,en={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function nn(t){return t=Math.round(t),t<0?0:t>255?255:t}function rn(t){return t=Math.round(t),t<0?0:t>360?360:t}function on(t){return t<0?0:t>1?1:t}function an(t){var e=t;return e.length&&"%"===e.charAt(e.length-1)?nn(parseFloat(e)/100*255):nn(parseInt(e,10))}function un(t){var e=t;return e.length&&"%"===e.charAt(e.length-1)?on(parseFloat(e)/100):on(parseFloat(e))}function sn(t,e,n){return n<0?n+=1:n>1&&(n-=1),6*n<1?t+(e-t)*n*6:2*n<1?e:3*n<2?t+(e-t)*(2/3-n)*6:t}function ln(t,e,n){return t+(e-t)*n}function cn(t,e,n,r,o){return t[0]=e,t[1]=n,t[2]=r,t[3]=o,t}function fn(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t}var dn=new tn(20),hn=null;function pn(t,e){hn&&fn(hn,e),hn=dn.put(t,hn||e.slice())}function gn(t,e){if(t){e=e||[];var n=dn.get(t);if(n)return fn(e,n);t+="";var r=t.replace(/ /g,"").toLowerCase();if(r in en)return fn(e,en[r]),pn(t,e),e;var o=r.length;if("#"!==r.charAt(0)){var i=r.indexOf("("),a=r.indexOf(")");if(-1!==i&&a+1===o){var u=r.substr(0,i),s=r.substr(i+1,a-(i+1)).split(","),l=1;switch(u){case"rgba":if(4!==s.length)return 3===s.length?cn(e,+s[0],+s[1],+s[2],1):cn(e,0,0,0,1);l=un(s.pop());case"rgb":return 3!==s.length?void cn(e,0,0,0,1):(cn(e,an(s[0]),an(s[1]),an(s[2]),l),pn(t,e),e);case"hsla":return 4!==s.length?void cn(e,0,0,0,1):(s[3]=un(s[3]),mn(s,e),pn(t,e),e);case"hsl":return 3!==s.length?void cn(e,0,0,0,1):(mn(s,e),pn(t,e),e);default:return}}cn(e,0,0,0,1)}else{if(4===o||5===o){var c=parseInt(r.slice(1,4),16);return c>=0&&c<=4095?(cn(e,(3840&c)>>4|(3840&c)>>8,240&c|(240&c)>>4,15&c|(15&c)<<4,5===o?parseInt(r.slice(4),16)/15:1),pn(t,e),e):void cn(e,0,0,0,1)}if(7===o||9===o){c=parseInt(r.slice(1,7),16);return c>=0&&c<=16777215?(cn(e,(16711680&c)>>16,(65280&c)>>8,255&c,9===o?parseInt(r.slice(7),16)/255:1),pn(t,e),e):void cn(e,0,0,0,1)}}}}function mn(t,e){var n=(parseFloat(t[0])%360+360)%360/360,r=un(t[1]),o=un(t[2]),i=o<=.5?o*(r+1):o+r-o*r,a=2*o-i;return e=e||[],cn(e,nn(255*sn(a,i,n+1/3)),nn(255*sn(a,i,n)),nn(255*sn(a,i,n-1/3)),1),4===t.length&&(e[3]=t[3]),e}function vn(t){if(t){var e,n,r=t[0]/255,o=t[1]/255,i=t[2]/255,a=Math.min(r,o,i),u=Math.max(r,o,i),s=u-a,l=(u+a)/2;if(0===s)e=0,n=0;else{n=l<.5?s/(u+a):s/(2-u-a);var c=((u-r)/6+s/2)/s,f=((u-o)/6+s/2)/s,d=((u-i)/6+s/2)/s;r===u?e=d-f:o===u?e=1/3+c-d:i===u&&(e=2/3+f-c),e<0&&(e+=1),e>1&&(e-=1)}var h=[360*e,n,l];return null!=t[3]&&h.push(t[3]),h}}function yn(t,e){var n=gn(t);if(n){for(var r=0;r<3;r++)n[r]=e<0?n[r]*(1-e)|0:(255-n[r])*e+n[r]|0,n[r]>255?n[r]=255:n[r]<0&&(n[r]=0);return Sn(n,4===n.length?"rgba":"rgb")}}function bn(t){var e=gn(t);if(e)return((1<<24)+(e[0]<<16)+(e[1]<<8)+ +e[2]).toString(16).slice(1)}function xn(t,e,n){if(e&&e.length&&t>=0&&t<=1){n=n||[];var r=t*(e.length-1),o=Math.floor(r),i=Math.ceil(r),a=e[o],u=e[i],s=r-o;return n[0]=nn(ln(a[0],u[0],s)),n[1]=nn(ln(a[1],u[1],s)),n[2]=nn(ln(a[2],u[2],s)),n[3]=on(ln(a[3],u[3],s)),n}}function wn(t,e,n,r){var o=gn(t);if(t)return o=vn(o),null!=e&&(o[0]=rn(e)),null!=n&&(o[1]=un(n)),null!=r&&(o[2]=un(r)),Sn(mn(o),"rgba")}function _n(t,e){var n=gn(t);if(n&&null!=e)return n[3]=on(e),Sn(n,"rgba")}function Sn(t,e){if(t&&t.length){var n=t[0]+","+t[1]+","+t[2];return"rgba"!==e&&"hsva"!==e&&"hsla"!==e||(n+=","+t[3]),e+"("+n+")"}}function Cn(t,e){var n=gn(t);return n?(.299*n[0]+.587*n[1]+.114*n[2])*n[3]/255+(1-n[3])*e:0}var Mn=Array.prototype.slice;function Tn(t,e,n){return(e-t)*n+t}function kn(t,e,n){return n>.5?e:t}function Dn(t,e,n,r){for(var o=e.length,i=0;i<o;i++)t[i]=Tn(e[i],n[i],r)}function An(t,e,n,r){for(var o=e.length,i=o&&e[0].length,a=0;a<o;a++){t[a]||(t[a]=[]);for(var u=0;u<i;u++)t[a][u]=Tn(e[a][u],n[a][u],r)}}function In(t,e,n,r){for(var o=e.length,i=0;i<o;i++)t[i]=e[i]+n[i]*r;return t}function On(t,e,n,r){for(var o=e.length,i=o&&e[0].length,a=0;a<o;a++){t[a]||(t[a]=[]);for(var u=0;u<i;u++)t[a][u]=e[a][u]+n[a][u]*r}return t}function Ln(t,e,n){var r=t,o=e;if(r.push&&o.push){var i=r.length,a=o.length;if(i!==a){var u=i>a;if(u)r.length=a;else for(var s=i;s<a;s++)r.push(1===n?o[s]:Mn.call(o[s]))}var l=r[0]&&r[0].length;for(s=0;s<r.length;s++)if(1===n)isNaN(r[s])&&(r[s]=o[s]);else for(var c=0;c<l;c++)isNaN(r[s][c])&&(r[s][c]=o[s][c])}}function En(t,e){var n=t.length;if(n!==e.length)return!1;for(var r=0;r<n;r++)if(t[r]!==e[r])return!1;return!0}function Nn(t,e,n,r,o,i,a){var u=.5*(n-t),s=.5*(r-e);return(2*(e-n)+u+s)*a+(-3*(e-n)-2*u-s)*i+u*o+e}function Rn(t,e,n,r,o,i,a,u){for(var s=e.length,l=0;l<s;l++)t[l]=Nn(e[l],n[l],r[l],o[l],i,a,u)}function Pn(t,e,n,r,o,i,a,u){for(var s=e.length,l=e[0].length,c=0;c<s;c++){t[c]||(t[1]=[]);for(var f=0;f<l;f++)t[c][f]=Nn(e[c][f],n[c][f],r[c][f],o[c][f],i,a,u)}}function zn(t){if(P(t)){var e=t.length;if(P(t[0])){for(var n=[],r=0;r<e;r++)n.push(Mn.call(t[r]));return n}return Mn.call(t)}return t}function Bn(t){return t[0]=Math.floor(t[0]),t[1]=Math.floor(t[1]),t[2]=Math.floor(t[2]),"rgba("+t.join(",")+")"}function Vn(t){return P(t&&t[0])?2:1}var Hn=[0,0,0,0],Fn=function(){function t(t){this.keyframes=[],this.maxTime=0,this.arrDim=0,this.interpolable=!0,this._needsSort=!1,this._isAllValueEqual=!0,this._lastFrame=0,this._lastFramePercent=0,this.propName=t}return t.prototype.isFinished=function(){return this._finished},t.prototype.setFinished=function(){this._finished=!0,this._additiveTrack&&this._additiveTrack.setFinished()},t.prototype.needsAnimate=function(){return!this._isAllValueEqual&&this.keyframes.length>=2&&this.interpolable},t.prototype.getAdditiveTrack=function(){return this._additiveTrack},t.prototype.addKeyframe=function(t,e){t>=this.maxTime?this.maxTime=t:this._needsSort=!0;var n=this.keyframes,r=n.length;if(this.interpolable)if(P(e)){var o=Vn(e);if(r>0&&this.arrDim!==o)return void(this.interpolable=!1);if(1===o&&"number"!==typeof e[0]||2===o&&"number"!==typeof e[0][0])return void(this.interpolable=!1);if(r>0){var i=n[r-1];this._isAllValueEqual&&(1===o&&En(e,i.value)||(this._isAllValueEqual=!1))}this.arrDim=o}else{if(this.arrDim>0)return void(this.interpolable=!1);if("string"===typeof e){var a=gn(e);a?(e=a,this.isValueColor=!0):this.interpolable=!1}else if("number"!==typeof e||isNaN(e))return void(this.interpolable=!1);if(this._isAllValueEqual&&r>0){i=n[r-1];this.isValueColor&&!En(i.value,e)?this._isAllValueEqual=!1:i.value!==e&&(this._isAllValueEqual=!1)}}var u={time:t,value:e,percent:0};return this.keyframes.push(u),u},t.prototype.prepare=function(t){var e=this.keyframes;this._needsSort&&e.sort(function(t,e){return t.time-e.time});for(var n=this.arrDim,r=e.length,o=e[r-1],i=0;i<r;i++)e[i].percent=e[i].time/this.maxTime,n>0&&i!==r-1&&Ln(e[i].value,o.value,n);if(t&&this.needsAnimate()&&t.needsAnimate()&&n===t.arrDim&&this.isValueColor===t.isValueColor&&!t._finished){this._additiveTrack=t;var a=e[0].value;for(i=0;i<r;i++)0===n?this.isValueColor?e[i].additiveValue=In([],e[i].value,a,-1):e[i].additiveValue=e[i].value-a:1===n?e[i].additiveValue=In([],e[i].value,a,-1):2===n&&(e[i].additiveValue=On([],e[i].value,a,-1))}},t.prototype.step=function(t,e){if(!this._finished){this._additiveTrack&&this._additiveTrack._finished&&(this._additiveTrack=null);var n,r=null!=this._additiveTrack,o=r?"additiveValue":"value",i=this.keyframes,a=this.keyframes.length,u=this.propName,s=this.arrDim,l=this.isValueColor;if(e<0)n=0;else if(e<this._lastFramePercent){var c=Math.min(this._lastFrame+1,a-1);for(n=c;n>=0;n--)if(i[n].percent<=e)break;n=Math.min(n,a-2)}else{for(n=this._lastFrame;n<a;n++)if(i[n].percent>e)break;n=Math.min(n-1,a-2)}var f=i[n+1],d=i[n];if(d&&f){this._lastFrame=n,this._lastFramePercent=e;var h=f.percent-d.percent;if(0!==h){var p=(e-d.percent)/h,g=r?this._additiveValue:l?Hn:t[u];if((s>0||l)&&!g&&(g=this._additiveValue=[]),this.useSpline){var m=i[n][o],v=i[0===n?n:n-1][o],y=i[n>a-2?a-1:n+1][o],b=i[n>a-3?a-1:n+2][o];if(s>0)1===s?Rn(g,v,m,y,b,p,p*p,p*p*p):Pn(g,v,m,y,b,p,p*p,p*p*p);else if(l)Rn(g,v,m,y,b,p,p*p,p*p*p),r||(t[u]=Bn(g));else{var x=void 0;x=this.interpolable?Nn(v,m,y,b,p,p*p,p*p*p):y,r?this._additiveValue=x:t[u]=x}}else if(s>0)1===s?Dn(g,d[o],f[o],p):An(g,d[o],f[o],p);else if(l)Dn(g,d[o],f[o],p),r||(t[u]=Bn(g));else{x=void 0;x=this.interpolable?Tn(d[o],f[o],p):kn(d[o],f[o],p),r?this._additiveValue=x:t[u]=x}r&&this._addToTarget(t)}}}},t.prototype._addToTarget=function(t){var e=this.arrDim,n=this.propName,r=this._additiveValue;0===e?this.isValueColor?(gn(t[n],Hn),In(Hn,Hn,r,1),t[n]=Bn(Hn)):t[n]=t[n]+r:1===e?In(t[n],t[n],r,1):2===e&&On(t[n],t[n],r,1)},t}(),Wn=function(){function t(t,e,n){this._tracks={},this._trackKeys=[],this._delay=0,this._maxTime=0,this._paused=!1,this._started=0,this._clip=null,this._target=t,this._loop=e,e&&n?T("Can' use additive animation on looped animation."):this._additiveAnimators=n}return t.prototype.getTarget=function(){return this._target},t.prototype.changeTarget=function(t){this._target=t},t.prototype.when=function(t,e){return this.whenWithKeys(t,e,W(e))},t.prototype.whenWithKeys=function(t,e,n){for(var r=this._tracks,o=0;o<n.length;o++){var i=n[o],a=r[i];if(!a){a=r[i]=new Fn(i);var u=void 0,s=this._getAdditiveTrack(i);if(s){var l=s.keyframes[s.keyframes.length-1];u=l&&l.value,s.isValueColor&&u&&(u=Bn(u))}else u=this._target[i];if(null==u)continue;0!==t&&a.addKeyframe(0,zn(u)),this._trackKeys.push(i)}a.addKeyframe(t,zn(e[i]))}return this._maxTime=Math.max(this._maxTime,t),this},t.prototype.pause=function(){this._clip.pause(),this._paused=!0},t.prototype.resume=function(){this._clip.resume(),this._paused=!1},t.prototype.isPaused=function(){return!!this._paused},t.prototype._doneCallback=function(){this._setTracksFinished(),this._clip=null;var t=this._doneList;if(t)for(var e=t.length,n=0;n<e;n++)t[n].call(this)},t.prototype._abortedCallback=function(){this._setTracksFinished();var t=this.animation,e=this._abortedList;if(t&&t.removeClip(this._clip),this._clip=null,e)for(var n=0;n<e.length;n++)e[n].call(this)},t.prototype._setTracksFinished=function(){for(var t=this._tracks,e=this._trackKeys,n=0;n<e.length;n++)t[e[n]].setFinished()},t.prototype._getAdditiveTrack=function(t){var e,n=this._additiveAnimators;if(n)for(var r=0;r<n.length;r++){var o=n[r].getTrack(t);o&&(e=o)}return e},t.prototype.start=function(t,e){if(!(this._started>0)){this._started=1;for(var n=this,r=[],o=0;o<this._trackKeys.length;o++){var i=this._trackKeys[o],a=this._tracks[i],u=this._getAdditiveTrack(i),s=a.keyframes;if(a.prepare(u),a.needsAnimate())r.push(a);else if(!a.interpolable){var l=s[s.length-1];l&&(n._target[a.propName]=l.value)}}if(r.length||e){var c=new $e({life:this._maxTime,loop:this._loop,delay:this._delay,onframe:function(t){n._started=2;var e=n._additiveAnimators;if(e){for(var o=!1,i=0;i<e.length;i++)if(e[i]._clip){o=!0;break}o||(n._additiveAnimators=null)}for(i=0;i<r.length;i++)r[i].step(n._target,t);var a=n._onframeList;if(a)for(i=0;i<a.length;i++)a[i](n._target,t)},ondestroy:function(){n._doneCallback()}});this._clip=c,this.animation&&this.animation.addClip(c),t&&"spline"!==t&&(c.easing=t)}else this._doneCallback();return this}},t.prototype.stop=function(t){if(this._clip){var e=this._clip;t&&e.onframe(1),this._abortedCallback()}},t.prototype.delay=function(t){return this._delay=t,this},t.prototype.during=function(t){return t&&(this._onframeList||(this._onframeList=[]),this._onframeList.push(t)),this},t.prototype.done=function(t){return t&&(this._doneList||(this._doneList=[]),this._doneList.push(t)),this},t.prototype.aborted=function(t){return t&&(this._abortedList||(this._abortedList=[]),this._abortedList.push(t)),this},t.prototype.getClip=function(){return this._clip},t.prototype.getTrack=function(t){return this._tracks[t]},t.prototype.stopTracks=function(t,e){if(!t.length||!this._clip)return!0;for(var n=this._tracks,r=this._trackKeys,o=0;o<t.length;o++){var i=n[t[o]];i&&(e?i.step(this._target,1):1===this._started&&i.step(this._target,0),i.setFinished())}var a=!0;for(o=0;o<r.length;o++)if(!n[r[o]].isFinished()){a=!1;break}return a&&this._abortedCallback(),a},t.prototype.saveFinalToTarget=function(t,e){if(t){e=e||this._trackKeys;for(var n=0;n<e.length;n++){var r=e[n],o=this._tracks[r];if(o&&!o.isFinished()){var i=o.keyframes,a=i[i.length-1];if(a){var u=zn(a.value);o.isValueColor&&(u=Bn(u)),t[r]=u}}}}},t.prototype.__changeFinalValue=function(t,e){e=e||W(t);for(var n=0;n<e.length;n++){var r=e[n],o=this._tracks[r];if(o){var i=o.keyframes;if(i.length>1){var a=i.pop();o.addKeyframe(a.time,t[r]),o.prepare(o.getAdditiveTrack())}}}},t}(),Un=Wn,Gn=function(t){function e(e){var n=t.call(this)||this;return n._running=!1,n._time=0,n._pausedTime=0,n._pauseStart=0,n._paused=!1,e=e||{},n.stage=e.stage||{},n.onframe=e.onframe||function(){},n}return i(e,t),e.prototype.addClip=function(t){t.animation&&this.removeClip(t),this._clipsHead?(this._clipsTail.next=t,t.prev=this._clipsTail,t.next=null,this._clipsTail=t):this._clipsHead=this._clipsTail=t,t.animation=this},e.prototype.addAnimator=function(t){t.animation=this;var e=t.getClip();e&&this.addClip(e)},e.prototype.removeClip=function(t){if(t.animation){var e=t.prev,n=t.next;e?e.next=n:this._clipsHead=n,n?n.prev=e:this._clipsTail=e,t.next=t.prev=t.animation=null}},e.prototype.removeAnimator=function(t){var e=t.getClip();e&&this.removeClip(e),t.animation=null},e.prototype.update=function(t){var e=(new Date).getTime()-this._pausedTime,n=e-this._time,r=this._clipsHead;while(r){var o=r.next,i=r.step(e,n);i?(r.ondestroy&&r.ondestroy(),this.removeClip(r),r=o):r=o}this._time=e,t||(this.onframe(n),this.trigger("frame",n),this.stage.update&&this.stage.update())},e.prototype._startLoop=function(){var t=this;function e(){t._running&&(Xe(e),!t._paused&&t.update())}this._running=!0,Xe(e)},e.prototype.start=function(){this._running||(this._time=(new Date).getTime(),this._pausedTime=0,this._startLoop())},e.prototype.stop=function(){this._running=!1},e.prototype.pause=function(){this._paused||(this._pauseStart=(new Date).getTime(),this._paused=!0)},e.prototype.resume=function(){this._paused&&(this._pausedTime+=(new Date).getTime()-this._pauseStart,this._paused=!1)},e.prototype.clear=function(){var t=this._clipsHead;while(t){var e=t.next;t.prev=t.next=t.animation=null,t=e}this._clipsHead=this._clipsTail=null},e.prototype.isFinished=function(){return null==this._clipsHead},e.prototype.animate=function(t,e){e=e||{},this.start();var n=new Un(t,e.loop);return this.addAnimator(n),n},e}(Gt),jn=Gn,Xn=300,Yn=d.domSupported,qn=function(){var t=["click","dblclick","mousewheel","wheel","mouseout","mouseup","mousedown","mousemove","contextmenu"],e=["touchstart","touchend","touchmove"],n={pointerdown:1,pointerup:1,pointermove:1,pointerout:1},r=B(t,function(t){var e=t.replace("mouse","pointer");return n.hasOwnProperty(e)?e:t});return{mouse:t,touch:e,pointer:r}}(),Zn={mouse:["mousemove","mouseup"],pointer:["pointermove","pointerup"]},$n=!1;function Kn(t){var e=t.pointerType;return"pen"===e||"touch"===e}function Jn(t){t.touching=!0,null!=t.touchTimer&&(clearTimeout(t.touchTimer),t.touchTimer=null),t.touchTimer=setTimeout(function(){t.touching=!1,t.touchTimer=null},700)}function Qn(t){t&&(t.zrByTouch=!0)}function tr(t,e){return ue(t.dom,new nr(t,e),!0)}function er(t,e){var n=e,r=!1;while(n&&9!==n.nodeType&&!(r=n.domBelongToZr||n!==e&&n===t.painterRoot))n=n.parentNode;return r}var nr=function(){function t(t,e){this.stopPropagation=xt,this.stopImmediatePropagation=xt,this.preventDefault=xt,this.type=e.type,this.target=this.currentTarget=t.dom,this.pointerType=e.pointerType,this.clientX=e.clientX,this.clientY=e.clientY}return t}(),rr={mousedown:function(t){t=ue(this.dom,t),this.__mayPointerCapture=[t.zrX,t.zrY],this.trigger("mousedown",t)},mousemove:function(t){t=ue(this.dom,t);var e=this.__mayPointerCapture;!e||t.zrX===e[0]&&t.zrY===e[1]||this.__togglePointerCapture(!0),this.trigger("mousemove",t)},mouseup:function(t){t=ue(this.dom,t),this.__togglePointerCapture(!1),this.trigger("mouseup",t)},mouseout:function(t){t=ue(this.dom,t);var e=t.toElement||t.relatedTarget;er(this,e)||(this.__pointerCapturing&&(t.zrEventControl="no_globalout"),this.trigger("mouseout",t))},wheel:function(t){$n=!0,t=ue(this.dom,t),this.trigger("mousewheel",t)},mousewheel:function(t){$n||(t=ue(this.dom,t),this.trigger("mousewheel",t))},touchstart:function(t){t=ue(this.dom,t),Qn(t),this.__lastTouchMoment=new Date,this.handler.processGesture(t,"start"),rr.mousemove.call(this,t),rr.mousedown.call(this,t)},touchmove:function(t){t=ue(this.dom,t),Qn(t),this.handler.processGesture(t,"change"),rr.mousemove.call(this,t)},touchend:function(t){t=ue(this.dom,t),Qn(t),this.handler.processGesture(t,"end"),rr.mouseup.call(this,t),+new Date-+this.__lastTouchMoment<Xn&&rr.click.call(this,t)},pointerdown:function(t){rr.mousedown.call(this,t)},pointermove:function(t){Kn(t)||rr.mousemove.call(this,t)},pointerup:function(t){rr.mouseup.call(this,t)},pointerout:function(t){Kn(t)||rr.mouseout.call(this,t)}};z(["click","dblclick","contextmenu"],function(t){rr[t]=function(e){e=ue(this.dom,e),this.trigger(t,e)}});var or={pointermove:function(t){Kn(t)||or.mousemove.call(this,t)},pointerup:function(t){or.mouseup.call(this,t)},mousemove:function(t){this.trigger("mousemove",t)},mouseup:function(t){var e=this.__pointerCapturing;this.__togglePointerCapture(!1),this.trigger("mouseup",t),e&&(t.zrEventControl="only_globalout",this.trigger("mouseout",t))}};function ir(t,e){var n=e.domHandlers;d.pointerEventsSupported?z(qn.pointer,function(r){ur(e,r,function(e){n[r].call(t,e)})}):(d.touchEventsSupported&&z(qn.touch,function(r){ur(e,r,function(o){n[r].call(t,o),Jn(e)})}),z(qn.mouse,function(r){ur(e,r,function(o){o=ae(o),e.touching||n[r].call(t,o)})}))}function ar(t,e){function n(n){function r(r){r=ae(r),er(t,r.target)||(r=tr(t,r),e.domHandlers[n].call(t,r))}ur(e,n,r,{capture:!0})}d.pointerEventsSupported?z(Zn.pointer,n):d.touchEventsSupported||z(Zn.mouse,n)}function ur(t,e,n,r){t.mounted[e]=n,t.listenerOpts[e]=r,le(t.domTarget,e,n,r)}function sr(t){var e=t.mounted;for(var n in e)e.hasOwnProperty(n)&&ce(t.domTarget,n,e[n],t.listenerOpts[n]);t.mounted={}}var lr=function(){function t(t,e){this.mounted={},this.listenerOpts={},this.touching=!1,this.domTarget=t,this.domHandlers=e}return t}(),cr=function(t){function e(e,n){var r=t.call(this)||this;return r.__pointerCapturing=!1,r.dom=e,r.painterRoot=n,r._localHandlerScope=new lr(e,rr),Yn&&(r._globalHandlerScope=new lr(document,or)),ir(r,r._localHandlerScope),r}return i(e,t),e.prototype.dispose=function(){sr(this._localHandlerScope),Yn&&sr(this._globalHandlerScope)},e.prototype.setCursor=function(t){this.dom.style&&(this.dom.style.cursor=t||"default")},e.prototype.__togglePointerCapture=function(t){if(this.__mayPointerCapture=null,Yn&&+this.__pointerCapturing^+t){this.__pointerCapturing=t;var e=this._globalHandlerScope;t?ar(this,e):sr(e)}},e}(Gt),fr=cr,dr=1;"undefined"!==typeof window&&(dr=Math.max(window.devicePixelRatio||window.screen&&window.screen.deviceXDPI/window.screen.logicalXDPI||1,1));var hr=dr,pr=.4,gr="#333",mr="#ccc",vr="#eee";function yr(){return[1,0,0,1,0,0]}function br(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,t}function xr(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t}function wr(t,e,n){var r=e[0]*n[0]+e[2]*n[1],o=e[1]*n[0]+e[3]*n[1],i=e[0]*n[2]+e[2]*n[3],a=e[1]*n[2]+e[3]*n[3],u=e[0]*n[4]+e[2]*n[5]+e[4],s=e[1]*n[4]+e[3]*n[5]+e[5];return t[0]=r,t[1]=o,t[2]=i,t[3]=a,t[4]=u,t[5]=s,t}function _r(t,e,n){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4]+n[0],t[5]=e[5]+n[1],t}function Sr(t,e,n){var r=e[0],o=e[2],i=e[4],a=e[1],u=e[3],s=e[5],l=Math.sin(n),c=Math.cos(n);return t[0]=r*c+a*l,t[1]=-r*l+a*c,t[2]=o*c+u*l,t[3]=-o*l+c*u,t[4]=c*i+l*s,t[5]=c*s-l*i,t}function Cr(t,e,n){var r=n[0],o=n[1];return t[0]=e[0]*r,t[1]=e[1]*o,t[2]=e[2]*r,t[3]=e[3]*o,t[4]=e[4]*r,t[5]=e[5]*o,t}function Mr(t,e){var n=e[0],r=e[2],o=e[4],i=e[1],a=e[3],u=e[5],s=n*a-i*r;return s?(s=1/s,t[0]=a*s,t[1]=-i*s,t[2]=-r*s,t[3]=n*s,t[4]=(r*u-a*o)*s,t[5]=(i*o-n*u)*s,t):null}function Tr(t){var e=yr();return xr(e,t),e}var kr=br,Dr=5e-5;function Ar(t){return t>Dr||t<-Dr}var Ir,Or,Lr=[],Er=[],Nr=yr(),Rr=Math.abs,Pr=function(){function t(){}return t.prototype.setPosition=function(t){this.x=t[0],this.y=t[1]},t.prototype.setScale=function(t){this.scaleX=t[0],this.scaleY=t[1]},t.prototype.setSkew=function(t){this.skewX=t[0],this.skewY=t[1]},t.prototype.setOrigin=function(t){this.originX=t[0],this.originY=t[1]},t.prototype.needLocalTransform=function(){return Ar(this.rotation)||Ar(this.x)||Ar(this.y)||Ar(this.scaleX-1)||Ar(this.scaleY-1)},t.prototype.updateTransform=function(){var t=this.parent,e=t&&t.transform,n=this.needLocalTransform(),r=this.transform;n||e?(r=r||yr(),n?this.getLocalTransform(r):kr(r),e&&(n?wr(r,t.transform,r):xr(r,t.transform)),this.transform=r,this._resolveGlobalScaleRatio(r)):r&&kr(r)},t.prototype._resolveGlobalScaleRatio=function(t){var e=this.globalScaleRatio;if(null!=e&&1!==e){this.getGlobalScale(Lr);var n=Lr[0]<0?-1:1,r=Lr[1]<0?-1:1,o=((Lr[0]-n)*e+n)/Lr[0]||0,i=((Lr[1]-r)*e+r)/Lr[1]||0;t[0]*=o,t[1]*=o,t[2]*=i,t[3]*=i}this.invTransform=this.invTransform||yr(),Mr(this.invTransform,t)},t.prototype.getLocalTransform=function(e){return t.getLocalTransform(this,e)},t.prototype.getComputedTransform=function(){var t=this,e=[];while(t)e.push(t),t=t.parent;while(t=e.pop())t.updateTransform();return this.transform},t.prototype.setLocalTransform=function(t){if(t){var e=t[0]*t[0]+t[1]*t[1],n=t[2]*t[2]+t[3]*t[3],r=Math.atan2(t[1],t[0]),o=Math.PI/2+r-Math.atan2(t[3],t[2]);n=Math.sqrt(n)*Math.cos(o),e=Math.sqrt(e),this.skewX=o,this.skewY=0,this.rotation=-r,this.x=+t[4],this.y=+t[5],this.scaleX=e,this.scaleY=n,this.originX=0,this.originY=0}},t.prototype.decomposeTransform=function(){if(this.transform){var t=this.parent,e=this.transform;t&&t.transform&&(wr(Er,t.invTransform,e),e=Er);var n=this.originX,r=this.originY;(n||r)&&(Nr[4]=n,Nr[5]=r,wr(Er,e,Nr),Er[4]-=n,Er[5]-=r,e=Er),this.setLocalTransform(e)}},t.prototype.getGlobalScale=function(t){var e=this.transform;return t=t||[],e?(t[0]=Math.sqrt(e[0]*e[0]+e[1]*e[1]),t[1]=Math.sqrt(e[2]*e[2]+e[3]*e[3]),e[0]<0&&(t[0]=-t[0]),e[3]<0&&(t[1]=-t[1]),t):(t[0]=1,t[1]=1,t)},t.prototype.transformCoordToLocal=function(t,e){var n=[t,e],r=this.invTransform;return r&&zt(n,n,r),n},t.prototype.transformCoordToGlobal=function(t,e){var n=[t,e],r=this.transform;return r&&zt(n,n,r),n},t.prototype.getLineScale=function(){var t=this.transform;return t&&Rr(t[0]-1)>1e-10&&Rr(t[3]-1)>1e-10?Math.sqrt(Rr(t[0]*t[3]-t[2]*t[1])):1},t.getLocalTransform=function(t,e){e=e||[];var n=t.originX||0,r=t.originY||0,o=t.scaleX,i=t.scaleY,a=t.rotation||0,u=t.x,s=t.y,l=t.skewX?Math.tan(t.skewX):0,c=t.skewY?Math.tan(-t.skewY):0;return n||r?(e[4]=-n*o-l*r*i,e[5]=-r*i-c*n*o):e[4]=e[5]=0,e[0]=o,e[3]=i,e[1]=c*o,e[2]=l*i,a&&Sr(e,e,a),e[4]+=n+u,e[5]+=r+s,e},t.initDefaultProps=function(){var e=t.prototype;e.x=0,e.y=0,e.scaleX=1,e.scaleY=1,e.originX=0,e.originY=0,e.skewX=0,e.skewY=0,e.rotation=0,e.globalScaleRatio=1}(),t}(),zr=Pr,Br=function(){function t(t,e){this.x=t||0,this.y=e||0}return t.prototype.copy=function(t){return this.x=t.x,this.y=t.y,this},t.prototype.clone=function(){return new t(this.x,this.y)},t.prototype.set=function(t,e){return this.x=t,this.y=e,this},t.prototype.equal=function(t){return t.x===this.x&&t.y===this.y},t.prototype.add=function(t){return this.x+=t.x,this.y+=t.y,this},t.prototype.scale=function(t){this.x*=t,this.y*=t},t.prototype.scaleAndAdd=function(t,e){this.x+=t.x*e,this.y+=t.y*e},t.prototype.sub=function(t){return this.x-=t.x,this.y-=t.y,this},t.prototype.dot=function(t){return this.x*t.x+this.y*t.y},t.prototype.len=function(){return Math.sqrt(this.x*this.x+this.y*this.y)},t.prototype.lenSquare=function(){return this.x*this.x+this.y*this.y},t.prototype.normalize=function(){var t=this.len();return this.x/=t,this.y/=t,this},t.prototype.distance=function(t){var e=this.x-t.x,n=this.y-t.y;return Math.sqrt(e*e+n*n)},t.prototype.distanceSquare=function(t){var e=this.x-t.x,n=this.y-t.y;return e*e+n*n},t.prototype.negate=function(){return this.x=-this.x,this.y=-this.y,this},t.prototype.transform=function(t){if(t){var e=this.x,n=this.y;return this.x=t[0]*e+t[2]*n+t[4],this.y=t[1]*e+t[3]*n+t[5],this}},t.prototype.toArray=function(t){return t[0]=this.x,t[1]=this.y,t},t.prototype.fromArray=function(t){this.x=t[0],this.y=t[1]},t.set=function(t,e,n){t.x=e,t.y=n},t.copy=function(t,e){t.x=e.x,t.y=e.y},t.len=function(t){return Math.sqrt(t.x*t.x+t.y*t.y)},t.lenSquare=function(t){return t.x*t.x+t.y*t.y},t.dot=function(t,e){return t.x*e.x+t.y*e.y},t.add=function(t,e,n){t.x=e.x+n.x,t.y=e.y+n.y},t.sub=function(t,e,n){t.x=e.x-n.x,t.y=e.y-n.y},t.scale=function(t,e,n){t.x=e.x*n,t.y=e.y*n},t.scaleAndAdd=function(t,e,n,r){t.x=e.x+n.x*r,t.y=e.y+n.y*r},t.lerp=function(t,e,n,r){var o=1-r;t.x=o*e.x+r*n.x,t.y=o*e.y+r*n.y},t}(),Vr=Br,Hr=Math.min,Fr=Math.max,Wr=new Vr,Ur=new Vr,Gr=new Vr,jr=new Vr,Xr=new Vr,Yr=new Vr,qr=function(){function t(t,e,n,r){n<0&&(t+=n,n=-n),r<0&&(e+=r,r=-r),this.x=t,this.y=e,this.width=n,this.height=r}return t.prototype.union=function(t){var e=Hr(t.x,this.x),n=Hr(t.y,this.y);isFinite(this.x)&&isFinite(this.width)?this.width=Fr(t.x+t.width,this.x+this.width)-e:this.width=t.width,isFinite(this.y)&&isFinite(this.height)?this.height=Fr(t.y+t.height,this.y+this.height)-n:this.height=t.height,this.x=e,this.y=n},t.prototype.applyTransform=function(e){t.applyTransform(this,this,e)},t.prototype.calculateTransform=function(t){var e=this,n=t.width/e.width,r=t.height/e.height,o=yr();return _r(o,o,[-e.x,-e.y]),Cr(o,o,[n,r]),_r(o,o,[t.x,t.y]),o},t.prototype.intersect=function(e,n){if(!e)return!1;e instanceof t||(e=t.create(e));var r=this,o=r.x,i=r.x+r.width,a=r.y,u=r.y+r.height,s=e.x,l=e.x+e.width,c=e.y,f=e.y+e.height,d=!(i<s||l<o||u<c||f<a);if(n){var h=1/0,p=0,g=Math.abs(i-s),m=Math.abs(l-o),v=Math.abs(u-c),y=Math.abs(f-a),b=Math.min(g,m),x=Math.min(v,y);i<s||l<o?b>p&&(p=b,g<m?Vr.set(Yr,-g,0):Vr.set(Yr,m,0)):b<h&&(h=b,g<m?Vr.set(Xr,g,0):Vr.set(Xr,-m,0)),u<c||f<a?x>p&&(p=x,v<y?Vr.set(Yr,0,-v):Vr.set(Yr,0,y)):b<h&&(h=b,v<y?Vr.set(Xr,0,v):Vr.set(Xr,0,-y))}return n&&Vr.copy(n,d?Xr:Yr),d},t.prototype.contain=function(t,e){var n=this;return t>=n.x&&t<=n.x+n.width&&e>=n.y&&e<=n.y+n.height},t.prototype.clone=function(){return new t(this.x,this.y,this.width,this.height)},t.prototype.copy=function(e){t.copy(this,e)},t.prototype.plain=function(){return{x:this.x,y:this.y,width:this.width,height:this.height}},t.prototype.isFinite=function(){return isFinite(this.x)&&isFinite(this.y)&&isFinite(this.width)&&isFinite(this.height)},t.prototype.isZero=function(){return 0===this.width||0===this.height},t.create=function(e){return new t(e.x,e.y,e.width,e.height)},t.copy=function(t,e){t.x=e.x,t.y=e.y,t.width=e.width,t.height=e.height},t.applyTransform=function(e,n,r){if(r){if(r[1]<1e-5&&r[1]>-1e-5&&r[2]<1e-5&&r[2]>-1e-5){var o=r[0],i=r[3],a=r[4],u=r[5];return e.x=n.x*o+a,e.y=n.y*i+u,e.width=n.width*o,e.height=n.height*i,e.width<0&&(e.x+=e.width,e.width=-e.width),void(e.height<0&&(e.y+=e.height,e.height=-e.height))}Wr.x=Gr.x=n.x,Wr.y=jr.y=n.y,Ur.x=jr.x=n.x+n.width,Ur.y=Gr.y=n.y+n.height,Wr.transform(r),jr.transform(r),Ur.transform(r),Gr.transform(r),e.x=Hr(Wr.x,Ur.x,Gr.x,jr.x),e.y=Hr(Wr.y,Ur.y,Gr.y,jr.y);var s=Fr(Wr.x,Ur.x,Gr.x,jr.x),l=Fr(Wr.y,Ur.y,Gr.y,jr.y);e.width=s-e.x,e.height=l-e.y}else e!==n&&t.copy(e,n)},t}(),Zr=qr,$r={},Kr="12px sans-serif";function Jr(t,e){return Ir||(Ir=L().getContext("2d")),Or!==e&&(Or=Ir.font=e||Kr),Ir.measureText(t)}var Qr={measureText:Jr};function to(t,e){e=e||Kr;var n=$r[e];n||(n=$r[e]=new tn(500));var r=n.get(t);return null==r&&(r=Qr.measureText(t,e).width,n.put(t,r)),r}function eo(t,e,n,r){var o=to(t,e),i=io(e),a=ro(0,o,n),u=oo(0,i,r),s=new Zr(a,u,o,i);return s}function no(t,e,n,r){var o=((t||"")+"").split("\n"),i=o.length;if(1===i)return eo(o[0],e,n,r);for(var a=new Zr(0,0,0,0),u=0;u<o.length;u++){var s=eo(o[u],e,n,r);0===u?a.copy(s):a.union(s)}return a}function ro(t,e,n){return"right"===n?t-=e:"center"===n&&(t-=e/2),t}function oo(t,e,n){return"middle"===n?t-=e/2:"bottom"===n&&(t-=e),t}function io(t){return to("国",t)}function ao(t,e){return"string"===typeof t?t.lastIndexOf("%")>=0?parseFloat(t)/100*e:parseFloat(t):t}function uo(t,e,n){var r=e.position||"inside",o=null!=e.distance?e.distance:5,i=n.height,a=n.width,u=i/2,s=n.x,l=n.y,c="left",f="top";if(r instanceof Array)s+=ao(r[0],n.width),l+=ao(r[1],n.height),c=null,f=null;else switch(r){case"left":s-=o,l+=u,c="right",f="middle";break;case"right":s+=o+a,l+=u,f="middle";break;case"top":s+=a/2,l-=o,c="center",f="bottom";break;case"bottom":s+=a/2,l+=i+o,c="center";break;case"inside":s+=a/2,l+=u,c="center",f="middle";break;case"insideLeft":s+=o,l+=u,f="middle";break;case"insideRight":s+=a-o,l+=u,c="right",f="middle";break;case"insideTop":s+=a/2,l+=o,c="center";break;case"insideBottom":s+=a/2,l+=i-o,c="center",f="bottom";break;case"insideTopLeft":s+=o,l+=o;break;case"insideTopRight":s+=a-o,l+=o,c="right";break;case"insideBottomLeft":s+=o,l+=i-o,f="bottom";break;case"insideBottomRight":s+=a-o,l+=i-o,c="right",f="bottom";break}return t=t||{},t.x=s,t.y=l,t.align=c,t.verticalAlign=f,t}var so="__zr_normal__",lo=["x","y","scaleX","scaleY","originX","originY","rotation","ignore"],co={x:!0,y:!0,scaleX:!0,scaleY:!0,originX:!0,originY:!0,rotation:!0,ignore:!1},fo={},ho=new Zr(0,0,0,0),po=function(){function t(t){this.id=M(),this.animators=[],this.currentStates=[],this.states={},this._init(t)}return t.prototype._init=function(t){this.attr(t)},t.prototype.drift=function(t,e,n){switch(this.draggable){case"horizontal":e=0;break;case"vertical":t=0;break}var r=this.transform;r||(r=this.transform=[1,0,0,1,0,0]),r[4]+=t,r[5]+=e,this.decomposeTransform(),this.markRedraw()},t.prototype.beforeUpdate=function(){},t.prototype.afterUpdate=function(){},t.prototype.update=function(){this.updateTransform(),this.__dirty&&this.updateInnerText()},t.prototype.updateInnerText=function(t){var e=this._textContent;if(e&&(!e.ignore||t)){this.textConfig||(this.textConfig={});var n=this.textConfig,r=n.local,o=e.attachedTransform,i=void 0,a=void 0,u=!1;o.parent=r?this:null;var s=!1;if(o.x=e.x,o.y=e.y,o.originX=e.originX,o.originY=e.originY,o.rotation=e.rotation,o.scaleX=e.scaleX,o.scaleY=e.scaleY,null!=n.position){var l=ho;n.layoutRect?l.copy(n.layoutRect):l.copy(this.getBoundingRect()),r||l.applyTransform(this.transform),this.calculateTextPosition?this.calculateTextPosition(fo,n,l):uo(fo,n,l),o.x=fo.x,o.y=fo.y,i=fo.align,a=fo.verticalAlign;var c=n.origin;if(c&&null!=n.rotation){var f=void 0,d=void 0;"center"===c?(f=.5*l.width,d=.5*l.height):(f=ao(c[0],l.width),d=ao(c[1],l.height)),s=!0,o.originX=-o.x+f+(r?0:l.x),o.originY=-o.y+d+(r?0:l.y)}}null!=n.rotation&&(o.rotation=n.rotation);var h=n.offset;h&&(o.x+=h[0],o.y+=h[1],s||(o.originX=-h[0],o.originY=-h[1]));var p=null==n.inside?"string"===typeof n.position&&n.position.indexOf("inside")>=0:n.inside,g=this._innerTextDefaultStyle||(this._innerTextDefaultStyle={}),m=void 0,v=void 0,y=void 0;p&&this.canBeInsideText()?(m=n.insideFill,v=n.insideStroke,null!=m&&"auto"!==m||(m=this.getInsideTextFill()),null!=v&&"auto"!==v||(v=this.getInsideTextStroke(m),y=!0)):(m=n.outsideFill,v=n.outsideStroke,null!=m&&"auto"!==m||(m=this.getOutsideFill()),null!=v&&"auto"!==v||(v=this.getOutsideStroke(m),y=!0)),m=m||"#000",m===g.fill&&v===g.stroke&&y===g.autoStroke&&i===g.align&&a===g.verticalAlign||(u=!0,g.fill=m,g.stroke=v,g.autoStroke=y,g.align=i,g.verticalAlign=a,e.setDefaultTextStyle(g)),e.__dirty|=ze,u&&e.dirtyStyle(!0)}},t.prototype.canBeInsideText=function(){return!0},t.prototype.getInsideTextFill=function(){return"#fff"},t.prototype.getInsideTextStroke=function(t){return"#000"},t.prototype.getOutsideFill=function(){return this.__zr&&this.__zr.isDarkMode()?mr:gr},t.prototype.getOutsideStroke=function(t){var e=this.__zr&&this.__zr.getBackgroundColor(),n="string"===typeof e&&gn(e);n||(n=[255,255,255,1]);for(var r=n[3],o=this.__zr.isDarkMode(),i=0;i<3;i++)n[i]=n[i]*r+(o?0:255)*(1-r);return n[3]=1,Sn(n,"rgba")},t.prototype.traverse=function(t,e){},t.prototype.attrKV=function(t,e){"textConfig"===t?this.setTextConfig(e):"textContent"===t?this.setTextContent(e):"clipPath"===t?this.setClipPath(e):"extra"===t?(this.extra=this.extra||{},I(this.extra,e)):this[t]=e},t.prototype.hide=function(){this.ignore=!0,this.markRedraw()},t.prototype.show=function(){this.ignore=!1,this.markRedraw()},t.prototype.attr=function(t,e){if("string"===typeof t)this.attrKV(t,e);else if(K(t))for(var n=t,r=W(n),o=0;o<r.length;o++){var i=r[o];this.attrKV(i,t[i])}return this.markRedraw(),this},t.prototype.saveCurrentToNormalState=function(t){this._innerSaveToNormal(t);for(var e=this._normalState,n=0;n<this.animators.length;n++){var r=this.animators[n],o=r.__fromStateTransition;if(!o||o===so){var i=r.targetName,a=i?e[i]:e;r.saveFinalToTarget(a)}}},t.prototype._innerSaveToNormal=function(t){var e=this._normalState;e||(e=this._normalState={}),t.textConfig&&!e.textConfig&&(e.textConfig=this.textConfig),this._savePrimaryToNormal(t,e,lo)},t.prototype._savePrimaryToNormal=function(t,e,n){for(var r=0;r<n.length;r++){var o=n[r];null==t[o]||o in e||(e[o]=this[o])}},t.prototype.hasState=function(){return this.currentStates.length>0},t.prototype.getState=function(t){return this.states[t]},t.prototype.ensureState=function(t){var e=this.states;return e[t]||(e[t]={}),e[t]},t.prototype.clearStates=function(t){this.useState(so,!1,t)},t.prototype.useState=function(t,e,n,r){var o=t===so,i=this.hasState();if(i||!o){var a=this.currentStates,u=this.stateTransition;if(!(E(a,t)>=0)||!e&&1!==a.length){var s;if(this.stateProxy&&!o&&(s=this.stateProxy(t)),s||(s=this.states&&this.states[t]),s||o){o||this.saveCurrentToNormalState(s);var l=!!(s&&s.hoverLayer||r);l&&this._toggleHoverLayerFlag(!0),this._applyStateObj(t,s,this._normalState,e,!n&&!this.__inHover&&u&&u.duration>0,u);var c=this._textContent,f=this._textGuide;return c&&c.useState(t,e,n,l),f&&f.useState(t,e,n,l),o?(this.currentStates=[],this._normalState={}):e?this.currentStates.push(t):this.currentStates=[t],this._updateAnimationTargets(),this.markRedraw(),!l&&this.__inHover&&(this._toggleHoverLayerFlag(!1),this.__dirty&=~ze),s}T("State "+t+" not exists.")}}},t.prototype.useStates=function(t,e,n){if(t.length){var r=[],o=this.currentStates,i=t.length,a=i===o.length;if(a)for(var u=0;u<i;u++)if(t[u]!==o[u]){a=!1;break}if(a)return;for(u=0;u<i;u++){var s=t[u],l=void 0;this.stateProxy&&(l=this.stateProxy(s,t)),l||(l=this.states[s]),l&&r.push(l)}var c=r[i-1],f=!!(c&&c.hoverLayer||n);f&&this._toggleHoverLayerFlag(!0);var d=this._mergeStates(r),h=this.stateTransition;this.saveCurrentToNormalState(d),this._applyStateObj(t.join(","),d,this._normalState,!1,!e&&!this.__inHover&&h&&h.duration>0,h);var p=this._textContent,g=this._textGuide;p&&p.useStates(t,e,f),g&&g.useStates(t,e,f),this._updateAnimationTargets(),this.currentStates=t.slice(),this.markRedraw(),!f&&this.__inHover&&(this._toggleHoverLayerFlag(!1),this.__dirty&=~ze)}else this.clearStates()},t.prototype._updateAnimationTargets=function(){for(var t=0;t<this.animators.length;t++){var e=this.animators[t];e.targetName&&e.changeTarget(this[e.targetName])}},t.prototype.removeState=function(t){var e=E(this.currentStates,t);if(e>=0){var n=this.currentStates.slice();n.splice(e,1),this.useStates(n)}},t.prototype.replaceState=function(t,e,n){var r=this.currentStates.slice(),o=E(r,t),i=E(r,e)>=0;o>=0?i?r.splice(o,1):r[o]=e:n&&!i&&r.push(e),this.useStates(r)},t.prototype.toggleState=function(t,e){e?this.useState(t,!0):this.removeState(t)},t.prototype._mergeStates=function(t){for(var e,n={},r=0;r<t.length;r++){var o=t[r];I(n,o),o.textConfig&&(e=e||{},I(e,o.textConfig))}return e&&(n.textConfig=e),n},t.prototype._applyStateObj=function(t,e,n,r,o,i){var a=!(e&&r);e&&e.textConfig?(this.textConfig=I({},r?this.textConfig:n.textConfig),I(this.textConfig,e.textConfig)):a&&n.textConfig&&(this.textConfig=n.textConfig);for(var u={},s=!1,l=0;l<lo.length;l++){var c=lo[l],f=o&&co[c];e&&null!=e[c]?f?(s=!0,u[c]=e[c]):this[c]=e[c]:a&&null!=n[c]&&(f?(s=!0,u[c]=n[c]):this[c]=n[c])}if(!o)for(l=0;l<this.animators.length;l++){var d=this.animators[l],h=d.targetName;d.__changeFinalValue(h?(e||n)[h]:e||n)}s&&this._transitionState(t,u,i)},t.prototype._attachComponent=function(t){if(t.__zr&&!t.__hostTarget)throw new Error("Text element has been added to zrender.");if(t===this)throw new Error("Recursive component attachment.");var e=this.__zr;e&&t.addSelfToZr(e),t.__zr=e,t.__hostTarget=this},t.prototype._detachComponent=function(t){t.__zr&&t.removeSelfFromZr(t.__zr),t.__zr=null,t.__hostTarget=null},t.prototype.getClipPath=function(){return this._clipPath},t.prototype.setClipPath=function(t){this._clipPath&&this._clipPath!==t&&this.removeClipPath(),this._attachComponent(t),this._clipPath=t,this.markRedraw()},t.prototype.removeClipPath=function(){var t=this._clipPath;t&&(this._detachComponent(t),this._clipPath=null,this.markRedraw())},t.prototype.getTextContent=function(){return this._textContent},t.prototype.setTextContent=function(t){var e=this._textContent;if(e!==t){if(e&&e!==t&&this.removeTextContent(),t.__zr&&!t.__hostTarget)throw new Error("Text element has been added to zrender.");t.attachedTransform=new zr,this._attachComponent(t),this._textContent=t,this.markRedraw()}},t.prototype.setTextConfig=function(t){this.textConfig||(this.textConfig={}),I(this.textConfig,t),this.markRedraw()},t.prototype.removeTextConfig=function(){this.textConfig=null,this.markRedraw()},t.prototype.removeTextContent=function(){var t=this._textContent;t&&(t.attachedTransform=null,this._detachComponent(t),this._textContent=null,this._innerTextDefaultStyle=null,this.markRedraw())},t.prototype.getTextGuideLine=function(){return this._textGuide},t.prototype.setTextGuideLine=function(t){this._textGuide&&this._textGuide!==t&&this.removeTextGuideLine(),this._attachComponent(t),this._textGuide=t,this.markRedraw()},t.prototype.removeTextGuideLine=function(){var t=this._textGuide;t&&(this._detachComponent(t),this._textGuide=null,this.markRedraw())},t.prototype.markRedraw=function(){this.__dirty|=ze;var t=this.__zr;t&&(this.__inHover?t.refreshHover():t.refresh()),this.__hostTarget&&this.__hostTarget.markRedraw()},t.prototype.dirty=function(){this.markRedraw()},t.prototype._toggleHoverLayerFlag=function(t){this.__inHover=t;var e=this._textContent,n=this._textGuide;e&&(e.__inHover=t),n&&(n.__inHover=t)},t.prototype.addSelfToZr=function(t){this.__zr=t;var e=this.animators;if(e)for(var n=0;n<e.length;n++)t.animation.addAnimator(e[n]);this._clipPath&&this._clipPath.addSelfToZr(t),this._textContent&&this._textContent.addSelfToZr(t),this._textGuide&&this._textGuide.addSelfToZr(t)},t.prototype.removeSelfFromZr=function(t){this.__zr=null;var e=this.animators;if(e)for(var n=0;n<e.length;n++)t.animation.removeAnimator(e[n]);this._clipPath&&this._clipPath.removeSelfFromZr(t),this._textContent&&this._textContent.removeSelfFromZr(t),this._textGuide&&this._textGuide.removeSelfFromZr(t)},t.prototype.animate=function(t,e){var n=t?this[t]:this;if(n){var r=new Un(n,e);return this.addAnimator(r,t),r}T('Property "'+t+'" is not existed in element '+this.id)},t.prototype.addAnimator=function(t,e){var n=this.__zr,r=this;t.during(function(){r.updateDuringAnimation(e)}).done(function(){var e=r.animators,n=E(e,t);n>=0&&e.splice(n,1)}),this.animators.push(t),n&&n.animation.addAnimator(t),n&&n.wakeUp()},t.prototype.updateDuringAnimation=function(t){this.markRedraw()},t.prototype.stopAnimation=function(t,e){for(var n=this.animators,r=n.length,o=[],i=0;i<r;i++){var a=n[i];t&&t!==a.scope?o.push(a):a.stop(e)}return this.animators=o,this},t.prototype.animateTo=function(t,e,n){go(this,t,e,n)},t.prototype.animateFrom=function(t,e,n){go(this,t,e,n,!0)},t.prototype._transitionState=function(t,e,n,r){for(var o=go(this,e,n,r),i=0;i<o.length;i++)o[i].__fromStateTransition=t},t.prototype.getBoundingRect=function(){return null},t.prototype.getPaintRect=function(){return null},t.initDefaultProps=function(){var e=t.prototype;e.type="element",e.name="",e.ignore=!1,e.silent=!1,e.isGroup=!1,e.draggable=!1,e.dragging=!1,e.ignoreClip=!1,e.__inHover=!1,e.__dirty=ze;var n={};function r(t,e,r){n[t+e+r]||(console.warn("DEPRECATED: '"+t+"' has been deprecated. use '"+e+"', '"+r+"' instead"),n[t+e+r]=!0)}function o(t,n,o,i){function a(t,e){Object.defineProperty(e,0,{get:function(){return t[o]},set:function(e){t[o]=e}}),Object.defineProperty(e,1,{get:function(){return t[i]},set:function(e){t[i]=e}})}Object.defineProperty(e,t,{get:function(){if(r(t,o,i),!this[n]){var e=this[n]=[];a(this,e)}return this[n]},set:function(e){r(t,o,i),this[o]=e[0],this[i]=e[1],this[n]=e,a(this,e)}})}Object.defineProperty&&(!d.browser.ie||d.browser.version>8)&&(o("position","_legacyPos","x","y"),o("scale","_legacyScale","scaleX","scaleY"),o("origin","_legacyOrigin","originX","originY"))}(),t}();function go(t,e,n,r,o){n=n||{};var i=[];bo(t,"",t,e,n,r,i,o);var a=i.length,u=!1,s=n.done,l=n.aborted,c=function(){u=!0,a--,a<=0&&(u?s&&s():l&&l())},f=function(){a--,a<=0&&(u?s&&s():l&&l())};a||s&&s(),i.length>0&&n.during&&i[0].during(function(t,e){n.during(e)});for(var d=0;d<i.length;d++){var h=i[d];c&&h.done(c),f&&h.aborted(f),h.start(n.easing,n.force)}return i}function mo(t,e,n){for(var r=0;r<n;r++)t[r]=e[r]}function vo(t){return P(t[0])}function yo(t,e,n){if(P(e[n]))if(P(t[n])||(t[n]=[]),Q(e[n])){var r=e[n].length;t[n].length!==r&&(t[n]=new e[n].constructor(r),mo(t[n],e[n],r))}else{var o=e[n],i=t[n],a=o.length;if(vo(o))for(var u=o[0].length,s=0;s<a;s++)i[s]?mo(i[s],o[s],u):i[s]=Array.prototype.slice.call(o[s]);else mo(i,o,a);i.length=o.length}else t[n]=e[n]}function bo(t,e,n,r,o,i,a,u){for(var s=[],l=[],c=W(r),f=o.duration,d=o.delay,h=o.additive,p=o.setToFinal,g=!K(i),m=0;m<c.length;m++){var v=c[m];if(null!=n[v]&&null!=r[v]&&(g||i[v]))if(K(r[v])&&!P(r[v])){if(e){u||(n[v]=r[v],t.updateDuringAnimation(e));continue}bo(t,v,n[v],r[v],o,i&&i[v],a,u)}else s.push(v),l.push(v);else u||(n[v]=r[v],t.updateDuringAnimation(e),l.push(v))}var y=s.length;if(y>0||o.force&&!a.length){for(var b=t.animators,x=[],w=0;w<b.length;w++)b[w].targetName===e&&x.push(b[w]);if(!h&&x.length)for(w=0;w<x.length;w++){var _=x[w].stopTracks(l);if(_){var S=E(b,x[w]);b.splice(S,1)}}var C=void 0,M=void 0,T=void 0;if(u){M={},p&&(C={});for(w=0;w<y;w++){v=s[w];M[v]=n[v],p?C[v]=r[v]:n[v]=r[v]}}else if(p){T={};for(w=0;w<y;w++){v=s[w];T[v]=zn(n[v]),yo(n,r,v)}}var k=new Un(n,!1,h?x:null);k.targetName=e,o.scope&&(k.scope=o.scope),p&&C&&k.whenWithKeys(0,C,s),T&&k.whenWithKeys(0,T,s),k.whenWithKeys(null==f?500:f,u?M:r,s).delay(d||0),t.addAnimator(k,e),a.push(k)}}R(po,Gt),R(po,zr);var xo=po,wo=function(t){function e(e){var n=t.call(this)||this;return n.isGroup=!0,n._children=[],n.attr(e),n}return i(e,t),e.prototype.childrenRef=function(){return this._children},e.prototype.children=function(){return this._children.slice()},e.prototype.childAt=function(t){return this._children[t]},e.prototype.childOfName=function(t){for(var e=this._children,n=0;n<e.length;n++)if(e[n].name===t)return e[n]},e.prototype.childCount=function(){return this._children.length},e.prototype.add=function(t){if(t&&(t!==this&&t.parent!==this&&(this._children.push(t),this._doAdd(t)),t.__hostTarget))throw"This elemenet has been used as an attachment";return this},e.prototype.addBefore=function(t,e){if(t&&t!==this&&t.parent!==this&&e&&e.parent===this){var n=this._children,r=n.indexOf(e);r>=0&&(n.splice(r,0,t),this._doAdd(t))}return this},e.prototype.replaceAt=function(t,e){var n=this._children,r=n[e];if(t&&t!==this&&t.parent!==this&&t!==r){n[e]=t,r.parent=null;var o=this.__zr;o&&r.removeSelfFromZr(o),this._doAdd(t)}return this},e.prototype._doAdd=function(t){t.parent&&t.parent.remove(t),t.parent=this;var e=this.__zr;e&&e!==t.__zr&&t.addSelfToZr(e),e&&e.refresh()},e.prototype.remove=function(t){var e=this.__zr,n=this._children,r=E(n,t);return r<0?this:(n.splice(r,1),t.parent=null,e&&t.removeSelfFromZr(e),e&&e.refresh(),this)},e.prototype.removeAll=function(){for(var t=this._children,e=this.__zr,n=0;n<t.length;n++){var r=t[n];e&&r.removeSelfFromZr(e),r.parent=null}return t.length=0,this},e.prototype.eachChild=function(t,e){for(var n=this._children,r=0;r<n.length;r++){var o=n[r];t.call(e,o,r)}return this},e.prototype.traverse=function(t,e){for(var n=0;n<this._children.length;n++){var r=this._children[n],o=t.call(e,r);r.isGroup&&!o&&r.traverse(t,e)}return this},e.prototype.addSelfToZr=function(e){t.prototype.addSelfToZr.call(this,e);for(var n=0;n<this._children.length;n++){var r=this._children[n];r.addSelfToZr(e)}},e.prototype.removeSelfFromZr=function(e){t.prototype.removeSelfFromZr.call(this,e);for(var n=0;n<this._children.length;n++){var r=this._children[n];r.removeSelfFromZr(e)}},e.prototype.getBoundingRect=function(t){for(var e=new Zr(0,0,0,0),n=t||this._children,r=[],o=null,i=0;i<n.length;i++){var a=n[i];if(!a.ignore&&!a.invisible){var u=a.getBoundingRect(),s=a.getLocalTransform(r);s?(Zr.applyTransform(e,u,s),o=o||e.clone(),o.union(e)):(o=o||u.clone(),o.union(u))}}return o||e},e}(xo);wo.prototype.type="group";var _o=wo,So=!d.canvasSupported,Co={},Mo={};
/*!
* ZRender, a high performance 2d drawing library.
*
* Copyright (c) 2013, Baidu Inc.
* All rights reserved.
*
* LICENSE
* https://github.com/ecomfe/zrender/blob/master/LICENSE.txt
*/function To(t){delete Mo[t]}function ko(t){if(!t)return!1;if("string"===typeof t)return Cn(t,1)<pr;if(t.colorStops){for(var e=t.colorStops,n=0,r=e.length,o=0;o<r;o++)n+=Cn(e[o].color,1);return n/=r,n<pr}return!1}var Do=function(){function t(t,e,n){var r=this;this._sleepAfterStill=10,this._stillFrameAccum=0,this._needsRefresh=!0,this._needsRefreshHover=!0,this._darkMode=!1,n=n||{},this.dom=e,this.id=t;var o=new je,i=n.renderer||"canvas";if(So)throw new Error("IE8 support has been dropped since 5.0");if(Co[i]||(i=W(Co)[0]),!Co[i])throw new Error("Renderer '"+i+"' is not imported. Please import it first.");n.useDirtyRect=null!=n.useDirtyRect&&n.useDirtyRect;var a=new Co[i](e,o,n,t);this.storage=o,this.painter=a;var u=d.node||d.worker?null:new fr(a.getViewportRoot(),a.root);this.handler=new Te(o,a,u,a.root),this.animation=new jn({stage:{update:function(){return r._flush(!0)}}}),this.animation.start()}return t.prototype.add=function(t){t&&(this.storage.addRoot(t),t.addSelfToZr(this),this.refresh())},t.prototype.remove=function(t){t&&(this.storage.delRoot(t),t.removeSelfFromZr(this),this.refresh())},t.prototype.configLayer=function(t,e){this.painter.configLayer&&this.painter.configLayer(t,e),this.refresh()},t.prototype.setBackgroundColor=function(t){this.painter.setBackgroundColor&&this.painter.setBackgroundColor(t),this.refresh(),this._backgroundColor=t,this._darkMode=ko(t)},t.prototype.getBackgroundColor=function(){return this._backgroundColor},t.prototype.setDarkMode=function(t){this._darkMode=t},t.prototype.isDarkMode=function(){return this._darkMode},t.prototype.refreshImmediately=function(t){t||this.animation.update(!0),this._needsRefresh=!1,this.painter.refresh(),this._needsRefresh=!1},t.prototype.refresh=function(){this._needsRefresh=!0,this.animation.start()},t.prototype.flush=function(){this._flush(!1)},t.prototype._flush=function(t){var e,n=(new Date).getTime();this._needsRefresh&&(e=!0,this.refreshImmediately(t)),this._needsRefreshHover&&(e=!0,this.refreshHoverImmediately());var r=(new Date).getTime();e?(this._stillFrameAccum=0,this.trigger("rendered",{elapsedTime:r-n})):this._sleepAfterStill>0&&(this._stillFrameAccum++,this._stillFrameAccum>this._sleepAfterStill&&this.animation.stop())},t.prototype.setSleepAfterStill=function(t){this._sleepAfterStill=t},t.prototype.wakeUp=function(){this.animation.start(),this._stillFrameAccum=0},t.prototype.addHover=function(t){},t.prototype.removeHover=function(t){},t.prototype.clearHover=function(){},t.prototype.refreshHover=function(){this._needsRefreshHover=!0},t.prototype.refreshHoverImmediately=function(){this._needsRefreshHover=!1,this.painter.refreshHover&&"canvas"===this.painter.getType()&&this.painter.refreshHover()},t.prototype.resize=function(t){t=t||{},this.painter.resize(t.width,t.height),this.handler.resize()},t.prototype.clearAnimation=function(){this.animation.clear()},t.prototype.getWidth=function(){return this.painter.getWidth()},t.prototype.getHeight=function(){return this.painter.getHeight()},t.prototype.pathToImage=function(t,e){if(this.painter.pathToImage)return this.painter.pathToImage(t,e)},t.prototype.setCursorStyle=function(t){this.handler.setCursorStyle(t)},t.prototype.findHover=function(t,e){return this.handler.findHover(t,e)},t.prototype.on=function(t,e,n){return this.handler.on(t,e,n),this},t.prototype.off=function(t,e){this.handler.off(t,e)},t.prototype.trigger=function(t,e){this.handler.trigger(t,e)},t.prototype.clear=function(){for(var t=this.storage.getRoots(),e=0;e<t.length;e++)t[e]instanceof _o&&t[e].removeSelfFromZr(this);this.storage.delAllRoots(),this.painter.clear()},t.prototype.dispose=function(){this.animation.stop(),this.clear(),this.storage.dispose(),this.painter.dispose(),this.handler.dispose(),this.animation=this.storage=this.painter=this.handler=null,To(this.id)},t}();function Ao(t,e){var n=new Do(M(),t,e);return Mo[n.id]=n,n}function Io(t,e){Co[t]=e}var Oo=1e-4,Lo=20;function Eo(t){return t.replace(/^\s+|\s+$/g,"")}function No(t,e,n,r){var o=e[0],i=e[1],a=n[0],u=n[1],s=i-o,l=u-a;if(0===s)return 0===l?a:(a+u)/2;if(r)if(s>0){if(t<=o)return a;if(t>=i)return u}else{if(t>=o)return a;if(t<=i)return u}else{if(t===o)return a;if(t===i)return u}return(t-o)/s*l+a}function Ro(t,e){switch(t){case"center":case"middle":t="50%";break;case"left":case"top":t="0%";break;case"right":case"bottom":t="100%";break}return"string"===typeof t?Eo(t).match(/%$/)?parseFloat(t)/100*e:parseFloat(t):null==t?NaN:+t}function Po(t,e,n){return null==e&&(e=10),e=Math.min(Math.max(0,e),Lo),t=(+t).toFixed(e),n?t:+t}function zo(t){return t.sort(function(t,e){return t-e}),t}function Bo(t){if(t=+t,isNaN(t))return 0;if(t>1e-14)for(var e=1,n=0;n<15;n++,e*=10)if(Math.round(t*e)/e===t)return n;return Vo(t)}function Vo(t){var e=t.toString().toLowerCase(),n=e.indexOf("e"),r=n>0?+e.slice(n+1):0,o=n>0?n:e.length,i=e.indexOf("."),a=i<0?0:o-1-i;return Math.max(0,a-r)}function Ho(t,e){var n=Math.log,r=Math.LN10,o=Math.floor(n(t[1]-t[0])/r),i=Math.round(n(Math.abs(e[1]-e[0]))/r),a=Math.min(Math.max(-o+i,0),20);return isFinite(a)?a:20}function Fo(t,e,n){if(!t[e])return 0;var r=V(t,function(t,e){return t+(isNaN(e)?0:e)},0);if(0===r)return 0;var o=Math.pow(10,n),i=B(t,function(t){return(isNaN(t)?0:t)/r*o*100}),a=100*o,u=B(i,function(t){return Math.floor(t)}),s=V(u,function(t,e){return t+e},0),l=B(i,function(t,e){return t-u[e]});while(s<a){for(var c=Number.NEGATIVE_INFINITY,f=null,d=0,h=l.length;d<h;++d)l[d]>c&&(c=l[d],f=d);++u[f],l[f]=0,++s}return u[e]/o}function Wo(t,e){var n=Math.max(Bo(t),Bo(e)),r=t+e;return n>Lo?r:Po(r,n)}var Uo=9007199254740991;function Go(t){var e=2*Math.PI;return(t%e+e)%e}function jo(t){return t>-Oo&&t<Oo}var Xo=/^(?:(\d{4})(?:[-\/](\d{1,2})(?:[-\/](\d{1,2})(?:[T ](\d{1,2})(?::(\d{1,2})(?::(\d{1,2})(?:[.,](\d+))?)?)?(Z|[\+\-]\d\d:?\d\d)?)?)?)?)?$/;function Yo(t){if(t instanceof Date)return t;if("string"===typeof t){var e=Xo.exec(t);if(!e)return new Date(NaN);if(e[8]){var n=+e[4]||0;return"Z"!==e[8].toUpperCase()&&(n-=+e[8].slice(0,3)),new Date(Date.UTC(+e[1],+(e[2]||1)-1,+e[3]||1,n,+(e[5]||0),+e[6]||0,+e[7]||0))}return new Date(+e[1],+(e[2]||1)-1,+e[3]||1,+e[4]||0,+(e[5]||0),+e[6]||0,+e[7]||0)}return null==t?new Date(NaN):new Date(Math.round(t))}function qo(t){return Math.pow(10,Zo(t))}function Zo(t){if(0===t)return 0;var e=Math.floor(Math.log(t)/Math.LN10);return t/Math.pow(10,e)>=10&&e++,e}function $o(t,e){var n,r=Zo(t),o=Math.pow(10,r),i=t/o;return n=e?i<1.5?1:i<2.5?2:i<4?3:i<7?5:10:i<1?1:i<2?2:i<3?3:i<5?5:10,t=n*o,r>=-20?+t.toFixed(r<0?-r:0):t}function Ko(t,e){var n=(t.length-1)*e+1,r=Math.floor(n),o=+t[r-1],i=n-r;return i?o+i*(t[r]-o):o}function Jo(t){t.sort(function(t,e){return u(t,e,0)?-1:1});for(var e=-1/0,n=1,r=0;r<t.length;){for(var o=t[r].interval,i=t[r].close,a=0;a<2;a++)o[a]<=e&&(o[a]=e,i[a]=a?1:1-n),e=o[a],n=i[a];o[0]===o[1]&&i[0]*i[1]!==1?t.splice(r,1):r++}return t;function u(t,e,n){return t.interval[n]<e.interval[n]||t.interval[n]===e.interval[n]&&(t.close[n]-e.close[n]===(n?-1:1)||!n&&u(t,e,1))}}function Qo(t){var e=parseFloat(t);return e==t&&(0!==e||"string"!==typeof t||t.indexOf("x")<=0)?e:NaN}function ti(t){return!isNaN(Qo(t))}function ei(){return Math.round(9*Math.random())}function ni(t,e){return 0===e?t:ni(e,t%e)}function ri(t,e){return null==t?e:null==e?t:t*e/ni(t,e)}var oi="series\0",ii="\0_ec_\0";function ai(t){return t instanceof Array?t:null==t?[]:[t]}function ui(t,e,n){if(t){t[e]=t[e]||{},t.emphasis=t.emphasis||{},t.emphasis[e]=t.emphasis[e]||{};for(var r=0,o=n.length;r<o;r++){var i=n[r];!t.emphasis[e].hasOwnProperty(i)&&t[e].hasOwnProperty(i)&&(t.emphasis[e][i]=t[e][i])}}}var si=["fontStyle","fontWeight","fontSize","fontFamily","rich","tag","color","textBorderColor","textBorderWidth","width","height","lineHeight","align","verticalAlign","baseline","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY","textShadowColor","textShadowBlur","textShadowOffsetX","textShadowOffsetY","backgroundColor","borderColor","borderWidth","borderRadius","padding"];function li(t){return!K(t)||X(t)||t instanceof Date?t:t.value}function ci(t){return K(t)&&!(t instanceof Array)}function fi(t,e,n){var r="normalMerge"===n,o="replaceMerge"===n,i="replaceAll"===n;t=t||[],e=(e||[]).slice();var a=mt();z(e,function(t,n){K(t)||(e[n]=null)});var u=di(t,a,n);return(r||o)&&hi(u,t,a,e),r&&pi(u,e),r||o?gi(u,e,o):i&&mi(u,e),vi(u),u}function di(t,e,n){var r=[];if("replaceAll"===n)return r;for(var o=0;o<t.length;o++){var i=t[o];i&&null!=i.id&&e.set(i.id,o),r.push({existing:"replaceMerge"===n||_i(i)?null:i,newOption:null,keyInfo:null,brandNew:null})}return r}function hi(t,e,n,r){z(r,function(o,i){if(o&&null!=o.id){var a=bi(o.id),u=n.get(a);if(null!=u){var s=t[u];ct(!s.newOption,'Duplicated option on id "'+a+'".'),s.newOption=o,s.existing=e[u],r[i]=null}}})}function pi(t,e){z(e,function(n,r){if(n&&null!=n.name)for(var o=0;o<t.length;o++){var i=t[o].existing;if(!t[o].newOption&&i&&(null==i.id||null==n.id)&&!_i(n)&&!_i(i)&&yi("name",i,n))return t[o].newOption=n,void(e[r]=null)}})}function gi(t,e,n){z(e,function(e){if(e){var r,o=0;while((r=t[o])&&(r.newOption||_i(r.existing)||r.existing&&null!=e.id&&!yi("id",e,r.existing)))o++;r?(r.newOption=e,r.brandNew=n):t.push({newOption:e,brandNew:n,existing:null,keyInfo:null}),o++}})}function mi(t,e){z(e,function(e){t.push({newOption:e,brandNew:!0,existing:null,keyInfo:null})})}function vi(t){var e=mt();z(t,function(t){var n=t.existing;n&&e.set(n.id,t)}),z(t,function(t){var n=t.newOption;ct(!n||null==n.id||!e.get(n.id)||e.get(n.id)===t,"id duplicates: "+(n&&n.id)),n&&null!=n.id&&e.set(n.id,t),!t.keyInfo&&(t.keyInfo={})}),z(t,function(t,n){var r=t.existing,o=t.newOption,i=t.keyInfo;if(K(o)){if(i.name=null!=o.name?bi(o.name):r?r.name:oi+n,r)i.id=bi(r.id);else if(null!=o.id)i.id=bi(o.id);else{var a=0;do{i.id="\0"+i.name+"\0"+a++}while(e.get(i.id))}e.set(i.id,t)}})}function yi(t,e,n){var r=xi(e[t],null),o=xi(n[t],null);return null!=r&&null!=o&&r===o}function bi(t){return xi(t,"")}function xi(t,e){if(null==t)return e;var n=typeof t;return"string"===n?t:"number"===n||Z(t)?t+"":e}function wi(t){var e=t.name;return!(!e||!e.indexOf(oi))}function _i(t){return t&&null!=t.id&&0===bi(t.id).indexOf(ii)}function Si(t){return ii+t}function Ci(t,e,n){z(t,function(t){var r=t.newOption;K(r)&&(t.keyInfo.mainType=e,t.keyInfo.subType=Mi(e,r,t.existing,n))})}function Mi(t,e,n,r){var o=e.type?e.type:n?n.subType:r.determineSubType(t,e);return o}function Ti(t,e){var n={},r={};return o(t||[],n),o(e||[],r,n),[i(n),i(r)];function o(t,e,n){for(var r=0,o=t.length;r<o;r++){var i=xi(t[r].seriesId,null);if(null==i)return;for(var a=ai(t[r].dataIndex),u=n&&n[i],s=0,l=a.length;s<l;s++){var c=a[s];u&&u[c]?u[c]=null:(e[i]||(e[i]={}))[c]=1}}}function i(t,e){var n=[];for(var r in t)if(t.hasOwnProperty(r)&&null!=t[r])if(e)n.push(+r);else{var o=i(t[r],!0);o.length&&n.push({seriesId:r,dataIndex:o})}return n}}function ki(t,e){return null!=e.dataIndexInside?e.dataIndexInside:null!=e.dataIndex?X(e.dataIndex)?B(e.dataIndex,function(e){return t.indexOfRawIndex(e)}):t.indexOfRawIndex(e.dataIndex):null!=e.name?X(e.name)?B(e.name,function(e){return t.indexOfName(e)}):t.indexOfName(e.name):void 0}function Di(){var t="__ec_inner_"+Ai++;return function(e){return e[t]||(e[t]={})}}var Ai=ei();function Ii(t,e,n){var r=Oi(e,n),o=r.mainTypeSpecified,i=r.queryOptionMap,a=r.others,u=a,s=n?n.defaultMainType:null;return!o&&s&&i.set(s,{}),i.each(function(e,r){var o=Ni(t,r,e,{useDefault:s===r,enableAll:!n||null==n.enableAll||n.enableAll,enableNone:!n||null==n.enableNone||n.enableNone});u[r+"Models"]=o.models,u[r+"Model"]=o.models[0]}),u}function Oi(t,e){var n;if(q(t)){var r={};r[t+"Index"]=0,n=r}else n=t;var o=mt(),i={},a=!1;return z(n,function(t,n){if("dataIndex"!==n&&"dataIndexInside"!==n){var r=n.match(/^(\w+)(Index|Id|Name)$/)||[],u=r[1],s=(r[2]||"").toLowerCase();if(u&&s&&!(e&&e.includeMainTypes&&E(e.includeMainTypes,u)<0)){a=a||!!u;var l=o.get(u)||o.set(u,{});l[s]=t}}else i[n]=t}),{mainTypeSpecified:a,queryOptionMap:o,others:i}}var Li={useDefault:!0,enableAll:!1,enableNone:!1},Ei={useDefault:!1,enableAll:!0,enableNone:!0};function Ni(t,e,n,r){r=r||Li;var o=n.index,i=n.id,a=n.name,u={models:null,specified:null!=o||null!=i||null!=a};if(!u.specified){var s=void 0;return u.models=r.useDefault&&(s=t.getComponent(e))?[s]:[],u}return"none"===o||!1===o?(ct(r.enableNone,'`"none"` or `false` is not a valid value on index option.'),u.models=[],u):("all"===o&&(ct(r.enableAll,'`"all"` is not a valid value on index option.'),o=i=a=null),u.models=t.queryComponents({mainType:e,index:o,id:i,name:a}),u)}function Ri(t,e,n){t.setAttribute?t.setAttribute(e,n):t[e]=n}function Pi(t,e){return t.getAttribute?t.getAttribute(e):t[e]}function zi(t){return"auto"===t?d.domSupported?"html":"richText":t||"html"}function Bi(t,e){var n=mt(),r=[];return z(t,function(t){var o=e(t);(n.get(o)||(r.push(o),n.set(o,[]))).push(t)}),{keys:r,buckets:n}}function Vi(t,e,n,r,o){var i=null==e||"auto"===e;if(null==r)return r;if("number"===typeof r){var a=Tn(n||0,r,o);return Po(a,i?Math.max(Bo(n||0),Bo(r)):e)}if("string"===typeof r)return o<1?n:r;for(var u=[],s=n,l=r,c=Math.max(s?s.length:0,l.length),f=0;f<c;++f){var d=t.getDimensionInfo(f);if("ordinal"===d.type)u[f]=(o<1&&s?s:l)[f];else{var h=s&&s[f]?s[f]:0,p=l[f];a=Tn(h,p,o);u[f]=Po(a,i?Math.max(Bo(h),Bo(p)):e)}}return u}var Hi=".",Fi="___EC__COMPONENT__CONTAINER___",Wi="___EC__EXTENDED_CLASS___";function Ui(t){var e={main:"",sub:""};if(t){var n=t.split(Hi);e.main=n[0]||"",e.sub=n[1]||""}return e}function Gi(t){ct(/^[a-zA-Z0-9_]+([.][a-zA-Z0-9_]+)?$/.test(t),'componentType "'+t+'" illegal')}function ji(t){return!(!t||!t[Wi])}function Xi(t,e){t.$constructor=t,t.extend=function(t){var e=this;function n(){for(var r=[],o=0;o<arguments.length;o++)r[o]=arguments[o];if(t.$constructor)t.$constructor.apply(this,arguments);else{if(Yi(e)){var i=yt(n.prototype,new(e.bind.apply(e,u([void 0],r))));return i}e.apply(this,arguments)}}return n[Wi]=!0,I(n.prototype,t),n.extend=this.extend,n.superCall=Ki,n.superApply=Ji,N(n,this),n.superClass=e,n}}function Yi(t){return"function"===typeof t&&/^class\s/.test(Function.prototype.toString.call(t))}function qi(t,e){t.extend=e.extend}var Zi=Math.round(10*Math.random());function $i(t){var e=["__\0is_clz",Zi++].join("_");t.prototype[e]=!0,t.isInstance=function(t){return!(!t||!t[e])}}function Ki(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];return this.superClass.prototype[e].apply(t,n)}function Ji(t,e,n){return this.superClass.prototype[e].apply(t,n)}function Qi(t){var e={};function n(t){var n=e[t.main];return n&&n[Fi]||(n=e[t.main]={},n[Fi]=!0),n}t.registerClass=function(t){var r=t.type||t.prototype.type;if(r){Gi(r),t.prototype.type=r;var o=Ui(r);if(o.sub){if(o.sub!==Fi){var i=n(o);i[o.sub]=t}}else e[o.main]=t}return t},t.getClass=function(t,n,r){var o=e[t];if(o&&o[Fi]&&(o=n?o[n]:null),r&&!o)throw new Error(n?"Component "+t+"."+(n||"")+" is used but not imported.":t+".type should be specified.");return o},t.getClassesByMainType=function(t){var n=Ui(t),r=[],o=e[n.main];return o&&o[Fi]?z(o,function(t,e){e!==Fi&&r.push(t)}):r.push(o),r},t.hasClass=function(t){var n=Ui(t);return!!e[n.main]},t.getAllClassMainTypes=function(){var t=[];return z(e,function(e,n){t.push(n)}),t},t.hasSubTypes=function(t){var n=Ui(t),r=e[n.main];return r&&r[Fi]}}function ta(t,e){for(var n=0;n<t.length;n++)t[n][1]||(t[n][1]=t[n][0]);return e=e||!1,function(n,r,o){for(var i={},a=0;a<t.length;a++){var u=t[a][1];if(!(r&&E(r,u)>=0||o&&E(o,u)<0)){var s=n.getShallow(u,e);null!=s&&(i[t[a][0]]=s)}}return i}}var ea=[["fill","color"],["shadowBlur"],["shadowOffsetX"],["shadowOffsetY"],["opacity"],["shadowColor"]],na=ta(ea),ra=function(){function t(){}return t.prototype.getAreaStyle=function(t,e){return na(this,t,e)},t}(),oa=new tn(50);function ia(t){if("string"===typeof t){var e=oa.get(t);return e&&e.image}return t}function aa(t,e,n,r,o){if(t){if("string"===typeof t){if(e&&e.__zrImageSrc===t||!n)return e;var i=oa.get(t),a={hostEl:n,cb:r,cbPayload:o};return i?(e=i.image,!sa(e)&&i.pending.push(a)):(e=new Image,e.onload=e.onerror=ua,oa.put(t,e.__cachedImgObj={image:e,pending:[a]}),e.src=e.__zrImageSrc=t),e}return t}return e}function ua(){var t=this.__cachedImgObj;this.onload=this.onerror=this.__cachedImgObj=null;for(var e=0;e<t.pending.length;e++){var n=t.pending[e],r=n.cb;r&&r(this,n.cbPayload),n.hostEl.dirty()}t.pending.length=0}function sa(t){return t&&t.width&&t.height}var la=/\{([a-zA-Z0-9_]+)\|([^}]*)\}/g;function ca(t,e,n,r,o){if(!e)return"";var i=(t+"").split("\n");o=fa(e,n,r,o);for(var a=0,u=i.length;a<u;a++)i[a]=da(i[a],o);return i.join("\n")}function fa(t,e,n,r){r=r||{};var o=I({},r);o.font=e,n=at(n,"..."),o.maxIterations=at(r.maxIterations,2);var i=o.minChar=at(r.minChar,0);o.cnCharWidth=to("国",e);var a=o.ascCharWidth=to("a",e);o.placeholder=at(r.placeholder,"");for(var u=t=Math.max(0,t-1),s=0;s<i&&u>=a;s++)u-=a;var l=to(n,e);return l>u&&(n="",l=0),u=t-l,o.ellipsis=n,o.ellipsisWidth=l,o.contentWidth=u,o.containerWidth=t,o}function da(t,e){var n=e.containerWidth,r=e.font,o=e.contentWidth;if(!n)return"";var i=to(t,r);if(i<=n)return t;for(var a=0;;a++){if(i<=o||a>=e.maxIterations){t+=e.ellipsis;break}var u=0===a?ha(t,o,e.ascCharWidth,e.cnCharWidth):i>0?Math.floor(t.length*o/i):0;t=t.substr(0,u),i=to(t,r)}return""===t&&(t=e.placeholder),t}function ha(t,e,n,r){for(var o=0,i=0,a=t.length;i<a&&o<e;i++){var u=t.charCodeAt(i);o+=0<=u&&u<=127?n:r}return i}function pa(t,e){null!=t&&(t+="");var n,r=e.overflow,o=e.padding,i=e.font,a="truncate"===r,u=io(i),s=at(e.lineHeight,u),l="truncate"===e.lineOverflow,c=e.width;n=null!=c&&"break"===r||"breakAll"===r?t?Sa(t,e.font,c,"breakAll"===r,0).lines:[]:t?t.split("\n"):[];var f=n.length*s,d=at(e.height,f);if(f>d&&l){var h=Math.floor(d/s);n=n.slice(0,h)}var p=d,g=c;if(o&&(p+=o[0]+o[2],null!=g&&(g+=o[1]+o[3])),t&&a&&null!=g)for(var m=fa(c,i,e.ellipsis,{minChar:e.truncateMinChar,placeholder:e.placeholder}),v=0;v<n.length;v++)n[v]=da(n[v],m);if(null==c){var y=0;for(v=0;v<n.length;v++)y=Math.max(to(n[v],i),y);c=y}return{lines:n,height:d,outerHeight:p,lineHeight:s,calculatedLineHeight:u,contentHeight:f,width:c}}var ga=function(){function t(){}return t}(),ma=function(){function t(t){this.tokens=[],t&&(this.tokens=t)}return t}(),va=function(){function t(){this.width=0,this.height=0,this.contentWidth=0,this.contentHeight=0,this.outerWidth=0,this.outerHeight=0,this.lines=[]}return t}();function ya(t,e){var n=new va;if(null!=t&&(t+=""),!t)return n;var r,o=e.width,i=e.height,a=e.overflow,u="break"!==a&&"breakAll"!==a||null==o?null:{width:o,accumWidth:0,breakAll:"breakAll"===a},s=la.lastIndex=0;while(null!=(r=la.exec(t))){var l=r.index;l>s&&ba(n,t.substring(s,l),e,u),ba(n,r[2],e,u,r[1]),s=la.lastIndex}s<t.length&&ba(n,t.substring(s,t.length),e,u);var c=[],f=0,d=0,h=e.padding,p="truncate"===a,g="truncate"===e.lineOverflow;function m(t,e,n){t.width=e,t.lineHeight=n,f+=n,d=Math.max(d,e)}t:for(var v=0;v<n.lines.length;v++){for(var y=n.lines[v],b=0,x=0,w=0;w<y.tokens.length;w++){var _=y.tokens[w],S=_.styleName&&e.rich[_.styleName]||{},C=_.textPadding=S.padding,M=C?C[1]+C[3]:0,T=_.font=S.font||e.font;_.contentHeight=io(T);var k=at(S.height,_.contentHeight);if(_.innerHeight=k,C&&(k+=C[0]+C[2]),_.height=k,_.lineHeight=ut(S.lineHeight,e.lineHeight,k),_.align=S&&S.align||e.align,_.verticalAlign=S&&S.verticalAlign||"middle",g&&null!=i&&f+_.lineHeight>i){w>0?(y.tokens=y.tokens.slice(0,w),m(y,x,b),n.lines=n.lines.slice(0,v+1)):n.lines=n.lines.slice(0,v);break t}var D=S.width,A=null==D||"auto"===D;if("string"===typeof D&&"%"===D.charAt(D.length-1))_.percentWidth=D,c.push(_),_.contentWidth=to(_.text,T);else{if(A){var I=S.backgroundColor,O=I&&I.image;O&&(O=ia(O),sa(O)&&(_.width=Math.max(_.width,O.width*k/O.height)))}var L=p&&null!=o?o-x:null;null!=L&&L<_.width?!A||L<M?(_.text="",_.width=_.contentWidth=0):(_.text=ca(_.text,L-M,T,e.ellipsis,{minChar:e.truncateMinChar}),_.width=_.contentWidth=to(_.text,T)):_.contentWidth=to(_.text,T)}_.width+=M,x+=_.width,S&&(b=Math.max(b,_.lineHeight))}m(y,x,b)}n.outerWidth=n.width=at(o,d),n.outerHeight=n.height=at(i,f),n.contentHeight=f,n.contentWidth=d,h&&(n.outerWidth+=h[1]+h[3],n.outerHeight+=h[0]+h[2]);for(v=0;v<c.length;v++){_=c[v];var E=_.percentWidth;_.width=parseInt(E,10)/100*n.width}return n}function ba(t,e,n,r,o){var i,a,u=""===e,s=o&&n.rich[o]||{},l=t.lines,c=s.font||n.font,f=!1;if(r){var d=s.padding,h=d?d[1]+d[3]:0;if(null!=s.width&&"auto"!==s.width){var p=ao(s.width,r.width)+h;l.length>0&&p+r.accumWidth>r.width&&(i=e.split("\n"),f=!0),r.accumWidth=p}else{var g=Sa(e,c,r.width,r.breakAll,r.accumWidth);r.accumWidth=g.accumWidth+h,a=g.linesWidths,i=g.lines}}else i=e.split("\n");for(var m=0;m<i.length;m++){var v=i[m],y=new ga;if(y.styleName=o,y.text=v,y.isLineHolder=!v&&!u,"number"===typeof s.width?y.width=s.width:y.width=a?a[m]:to(v,c),m||f)l.push(new ma([y]));else{var b=(l[l.length-1]||(l[0]=new ma)).tokens,x=b.length;1===x&&b[0].isLineHolder?b[0]=y:(v||!x||u)&&b.push(y)}}}function xa(t){var e=t.charCodeAt(0);return e>=33&&e<=255}var wa=V(",&?/;] ".split(""),function(t,e){return t[e]=!0,t},{});function _a(t){return!xa(t)||!!wa[t]}function Sa(t,e,n,r,o){for(var i=[],a=[],u="",s="",l=0,c=0,f=0;f<t.length;f++){var d=t.charAt(f);if("\n"!==d){var h=to(d,e),p=!r&&!_a(d);(i.length?c+h>n:o+c+h>n)?c?(u||s)&&(p?(u||(u=s,s="",l=0,c=l),i.push(u),a.push(c-l),s+=d,l+=h,u="",c=l):(s&&(u+=s,c+=l,s="",l=0),i.push(u),a.push(c),u=d,c=h)):p?(i.push(s),a.push(l),s=d,l=h):(i.push(d),a.push(h)):(c+=h,p?(s+=d,l+=h):(s&&(u+=s,s="",l=0),u+=d))}else s&&(u+=s,c+=l),i.push(u),a.push(c),u="",s="",l=0,c=0}return i.length||u||(u=t,s="",l=0),s&&(u+=s),u&&(i.push(u),a.push(c)),1===i.length&&(c+=o),{accumWidth:c,lines:i,linesWidths:a}}var Ca="__zr_style_"+Math.round(10*Math.random()),Ma={shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,shadowColor:"#000",opacity:1,blend:"source-over"},Ta={style:{shadowBlur:!0,shadowOffsetX:!0,shadowOffsetY:!0,shadowColor:!0,opacity:!0}};Ma[Ca]=!0;var ka=["z","z2","invisible"],Da=["invisible"],Aa=function(t){function e(e){return t.call(this,e)||this}return i(e,t),e.prototype._init=function(e){for(var n=W(e),r=0;r<n.length;r++){var o=n[r];"style"===o?this.useStyle(e[o]):t.prototype.attrKV.call(this,o,e[o])}this.style||this.useStyle({})},e.prototype.beforeBrush=function(){},e.prototype.afterBrush=function(){},e.prototype.innerBeforeBrush=function(){},e.prototype.innerAfterBrush=function(){},e.prototype.shouldBePainted=function(t,e,n,r){var o=this.transform;if(this.ignore||this.invisible||0===this.style.opacity||this.culling&&La(this,t,e)||o&&!o[0]&&!o[3])return!1;if(n&&this.__clipPaths)for(var i=0;i<this.__clipPaths.length;++i)if(this.__clipPaths[i].isZeroArea())return!1;if(r&&this.parent){var a=this.parent;while(a){if(a.ignore)return!1;a=a.parent}}return!0},e.prototype.contain=function(t,e){return this.rectContain(t,e)},e.prototype.traverse=function(t,e){t.call(e,this)},e.prototype.rectContain=function(t,e){var n=this.transformCoordToLocal(t,e),r=this.getBoundingRect();return r.contain(n[0],n[1])},e.prototype.getPaintRect=function(){var t=this._paintRect;if(!this._paintRect||this.__dirty){var e=this.transform,n=this.getBoundingRect(),r=this.style,o=r.shadowBlur||0,i=r.shadowOffsetX||0,a=r.shadowOffsetY||0;t=this._paintRect||(this._paintRect=new Zr(0,0,0,0)),e?Zr.applyTransform(t,n,e):t.copy(n),(o||i||a)&&(t.width+=2*o+Math.abs(i),t.height+=2*o+Math.abs(a),t.x=Math.min(t.x,t.x+i-o),t.y=Math.min(t.y,t.y+a-o));var u=this.dirtyRectTolerance;t.isZero()||(t.x=Math.floor(t.x-u),t.y=Math.floor(t.y-u),t.width=Math.ceil(t.width+1+2*u),t.height=Math.ceil(t.height+1+2*u))}return t},e.prototype.setPrevPaintRect=function(t){t?(this._prevPaintRect=this._prevPaintRect||new Zr(0,0,0,0),this._prevPaintRect.copy(t)):this._prevPaintRect=null},e.prototype.getPrevPaintRect=function(){return this._prevPaintRect},e.prototype.animateStyle=function(t){return this.animate("style",t)},e.prototype.updateDuringAnimation=function(t){"style"===t?this.dirtyStyle():this.markRedraw()},e.prototype.attrKV=function(e,n){"style"!==e?t.prototype.attrKV.call(this,e,n):this.style?this.setStyle(n):this.useStyle(n)},e.prototype.setStyle=function(t,e){return"string"===typeof t?this.style[t]=e:I(this.style,t),this.dirtyStyle(),this},e.prototype.dirtyStyle=function(t){t||this.markRedraw(),this.__dirty|=Be,this._rect&&(this._rect=null)},e.prototype.dirty=function(){this.dirtyStyle()},e.prototype.styleChanged=function(){return!!(this.__dirty&Be)},e.prototype.styleUpdated=function(){this.__dirty&=~Be},e.prototype.createStyle=function(t){return yt(Ma,t)},e.prototype.useStyle=function(t){t[Ca]||(t=this.createStyle(t)),this.__inHover?this.__hoverStyle=t:this.style=t,this.dirtyStyle()},e.prototype.isStyleObject=function(t){return t[Ca]},e.prototype._innerSaveToNormal=function(e){t.prototype._innerSaveToNormal.call(this,e);var n=this._normalState;e.style&&!n.style&&(n.style=this._mergeStyle(this.createStyle(),this.style)),this._savePrimaryToNormal(e,n,ka)},e.prototype._applyStateObj=function(e,n,r,o,i,a){t.prototype._applyStateObj.call(this,e,n,r,o,i,a);var u,s=!(n&&o);if(n&&n.style?i?o?u=n.style:(u=this._mergeStyle(this.createStyle(),r.style),this._mergeStyle(u,n.style)):(u=this._mergeStyle(this.createStyle(),o?this.style:r.style),this._mergeStyle(u,n.style)):s&&(u=r.style),u)if(i){var l=this.style;if(this.style=this.createStyle(s?{}:l),s)for(var c=W(l),f=0;f<c.length;f++){var d=c[f];d in u&&(u[d]=u[d],this.style[d]=l[d])}var h=W(u);for(f=0;f<h.length;f++){d=h[f];this.style[d]=this.style[d]}this._transitionState(e,{style:u},a,this.getAnimationStyleProps())}else this.useStyle(u);var p=this.__inHover?Da:ka;for(f=0;f<p.length;f++){d=p[f];n&&null!=n[d]?this[d]=n[d]:s&&null!=r[d]&&(this[d]=r[d])}},e.prototype._mergeStates=function(e){for(var n,r=t.prototype._mergeStates.call(this,e),o=0;o<e.length;o++){var i=e[o];i.style&&(n=n||{},this._mergeStyle(n,i.style))}return n&&(r.style=n),r},e.prototype._mergeStyle=function(t,e){return I(t,e),t},e.prototype.getAnimationStyleProps=function(){return Ta},e.initDefaultProps=function(){var t=e.prototype;t.type="displayable",t.invisible=!1,t.z=0,t.z2=0,t.zlevel=0,t.culling=!1,t.cursor="pointer",t.rectHover=!1,t.incremental=!1,t._rect=null,t.dirtyRectTolerance=0,t.__dirty=ze|Be}(),e}(xo),Ia=new Zr(0,0,0,0),Oa=new Zr(0,0,0,0);function La(t,e,n){return Ia.copy(t.getBoundingRect()),t.transform&&Ia.applyTransform(t.transform),Oa.width=e,Oa.height=n,!Ia.intersect(Oa)}var Ea=Aa,Na=Math.pow,Ra=Math.sqrt,Pa=1e-8,za=1e-4,Ba=Ra(3),Va=1/3,Ha=wt(),Fa=wt(),Wa=wt();function Ua(t){return t>-Pa&&t<Pa}function Ga(t){return t>Pa||t<-Pa}function ja(t,e,n,r,o){var i=1-o;return i*i*(i*t+3*o*e)+o*o*(o*r+3*i*n)}function Xa(t,e,n,r,o){var i=1-o;return 3*(((e-t)*i+2*(n-e)*o)*i+(r-n)*o*o)}function Ya(t,e,n,r,o,i){var a=r+3*(e-n)-t,u=3*(n-2*e+t),s=3*(e-t),l=t-o,c=u*u-3*a*s,f=u*s-9*a*l,d=s*s-3*u*l,h=0;if(Ua(c)&&Ua(f))if(Ua(u))i[0]=0;else{var p=-s/u;p>=0&&p<=1&&(i[h++]=p)}else{var g=f*f-4*c*d;if(Ua(g)){var m=f/c,v=(p=-u/a+m,-m/2);p>=0&&p<=1&&(i[h++]=p),v>=0&&v<=1&&(i[h++]=v)}else if(g>0){var y=Ra(g),b=c*u+1.5*a*(-f+y),x=c*u+1.5*a*(-f-y);b=b<0?-Na(-b,Va):Na(b,Va),x=x<0?-Na(-x,Va):Na(x,Va);p=(-u-(b+x))/(3*a);p>=0&&p<=1&&(i[h++]=p)}else{var w=(2*c*u-3*a*f)/(2*Ra(c*c*c)),_=Math.acos(w)/3,S=Ra(c),C=Math.cos(_),M=(p=(-u-2*S*C)/(3*a),v=(-u+S*(C+Ba*Math.sin(_)))/(3*a),(-u+S*(C-Ba*Math.sin(_)))/(3*a));p>=0&&p<=1&&(i[h++]=p),v>=0&&v<=1&&(i[h++]=v),M>=0&&M<=1&&(i[h++]=M)}}return h}function qa(t,e,n,r,o){var i=6*n-12*e+6*t,a=9*e+3*r-3*t-9*n,u=3*e-3*t,s=0;if(Ua(a)){if(Ga(i)){var l=-u/i;l>=0&&l<=1&&(o[s++]=l)}}else{var c=i*i-4*a*u;if(Ua(c))o[0]=-i/(2*a);else if(c>0){var f=Ra(c),d=(l=(-i+f)/(2*a),(-i-f)/(2*a));l>=0&&l<=1&&(o[s++]=l),d>=0&&d<=1&&(o[s++]=d)}}return s}function Za(t,e,n,r,o,i){var a=(e-t)*o+t,u=(n-e)*o+e,s=(r-n)*o+n,l=(u-a)*o+a,c=(s-u)*o+u,f=(c-l)*o+l;i[0]=t,i[1]=a,i[2]=l,i[3]=f,i[4]=f,i[5]=c,i[6]=s,i[7]=r}function $a(t,e,n,r,o,i,a,u,s,l,c){var f,d,h,p,g,m=.005,v=1/0;Ha[0]=s,Ha[1]=l;for(var y=0;y<1;y+=.05)Fa[0]=ja(t,n,o,a,y),Fa[1]=ja(e,r,i,u,y),p=Rt(Ha,Fa),p<v&&(f=y,v=p);v=1/0;for(var b=0;b<32;b++){if(m<za)break;d=f-m,h=f+m,Fa[0]=ja(t,n,o,a,d),Fa[1]=ja(e,r,i,u,d),p=Rt(Fa,Ha),d>=0&&p<v?(f=d,v=p):(Wa[0]=ja(t,n,o,a,h),Wa[1]=ja(e,r,i,u,h),g=Rt(Wa,Ha),h<=1&&g<v?(f=h,v=g):m*=.5)}return c&&(c[0]=ja(t,n,o,a,f),c[1]=ja(e,r,i,u,f)),Ra(v)}function Ka(t,e,n,r,o,i,a,u,s){for(var l=t,c=e,f=0,d=1/s,h=1;h<=s;h++){var p=h*d,g=ja(t,n,o,a,p),m=ja(e,r,i,u,p),v=g-l,y=m-c;f+=Math.sqrt(v*v+y*y),l=g,c=m}return f}function Ja(t,e,n,r){var o=1-r;return o*(o*t+2*r*e)+r*r*n}function Qa(t,e,n,r){return 2*((1-r)*(e-t)+r*(n-e))}function tu(t,e,n,r,o){var i=t-2*e+n,a=2*(e-t),u=t-r,s=0;if(Ua(i)){if(Ga(a)){var l=-u/a;l>=0&&l<=1&&(o[s++]=l)}}else{var c=a*a-4*i*u;if(Ua(c)){l=-a/(2*i);l>=0&&l<=1&&(o[s++]=l)}else if(c>0){var f=Ra(c),d=(l=(-a+f)/(2*i),(-a-f)/(2*i));l>=0&&l<=1&&(o[s++]=l),d>=0&&d<=1&&(o[s++]=d)}}return s}function eu(t,e,n){var r=t+n-2*e;return 0===r?.5:(t-e)/r}function nu(t,e,n,r,o){var i=(e-t)*r+t,a=(n-e)*r+e,u=(a-i)*r+i;o[0]=t,o[1]=i,o[2]=u,o[3]=u,o[4]=a,o[5]=n}function ru(t,e,n,r,o,i,a,u,s){var l,c=.005,f=1/0;Ha[0]=a,Ha[1]=u;for(var d=0;d<1;d+=.05){Fa[0]=Ja(t,n,o,d),Fa[1]=Ja(e,r,i,d);var h=Rt(Ha,Fa);h<f&&(l=d,f=h)}f=1/0;for(var p=0;p<32;p++){if(c<za)break;var g=l-c,m=l+c;Fa[0]=Ja(t,n,o,g),Fa[1]=Ja(e,r,i,g);h=Rt(Fa,Ha);if(g>=0&&h<f)l=g,f=h;else{Wa[0]=Ja(t,n,o,m),Wa[1]=Ja(e,r,i,m);var v=Rt(Wa,Ha);m<=1&&v<f?(l=m,f=v):c*=.5}}return s&&(s[0]=Ja(t,n,o,l),s[1]=Ja(e,r,i,l)),Ra(f)}function ou(t,e,n,r,o,i,a){for(var u=t,s=e,l=0,c=1/a,f=1;f<=a;f++){var d=f*c,h=Ja(t,n,o,d),p=Ja(e,r,i,d),g=h-u,m=p-s;l+=Math.sqrt(g*g+m*m),u=h,s=p}return l}var iu=Math.min,au=Math.max,uu=Math.sin,su=Math.cos,lu=2*Math.PI,cu=wt(),fu=wt(),du=wt();function hu(t,e,n){if(0!==t.length){for(var r=t[0],o=r[0],i=r[0],a=r[1],u=r[1],s=1;s<t.length;s++)r=t[s],o=iu(o,r[0]),i=au(i,r[0]),a=iu(a,r[1]),u=au(u,r[1]);e[0]=o,e[1]=a,n[0]=i,n[1]=u}}function pu(t,e,n,r,o,i){o[0]=iu(t,n),o[1]=iu(e,r),i[0]=au(t,n),i[1]=au(e,r)}var gu=[],mu=[];function vu(t,e,n,r,o,i,a,u,s,l){var c=qa,f=ja,d=c(t,n,o,a,gu);s[0]=1/0,s[1]=1/0,l[0]=-1/0,l[1]=-1/0;for(var h=0;h<d;h++){var p=f(t,n,o,a,gu[h]);s[0]=iu(p,s[0]),l[0]=au(p,l[0])}d=c(e,r,i,u,mu);for(h=0;h<d;h++){var g=f(e,r,i,u,mu[h]);s[1]=iu(g,s[1]),l[1]=au(g,l[1])}s[0]=iu(t,s[0]),l[0]=au(t,l[0]),s[0]=iu(a,s[0]),l[0]=au(a,l[0]),s[1]=iu(e,s[1]),l[1]=au(e,l[1]),s[1]=iu(u,s[1]),l[1]=au(u,l[1])}function yu(t,e,n,r,o,i,a,u){var s=eu,l=Ja,c=au(iu(s(t,n,o),1),0),f=au(iu(s(e,r,i),1),0),d=l(t,n,o,c),h=l(e,r,i,f);a[0]=iu(t,o,d),a[1]=iu(e,i,h),u[0]=au(t,o,d),u[1]=au(e,i,h)}function bu(t,e,n,r,o,i,a,u,s){var l=Bt,c=Vt,f=Math.abs(o-i);if(f%lu<1e-4&&f>1e-4)return u[0]=t-n,u[1]=e-r,s[0]=t+n,void(s[1]=e+r);if(cu[0]=su(o)*n+t,cu[1]=uu(o)*r+e,fu[0]=su(i)*n+t,fu[1]=uu(i)*r+e,l(u,cu,fu),c(s,cu,fu),o%=lu,o<0&&(o+=lu),i%=lu,i<0&&(i+=lu),o>i&&!a?i+=lu:o<i&&a&&(o+=lu),a){var d=i;i=o,o=d}for(var h=0;h<i;h+=Math.PI/2)h>o&&(du[0]=su(h)*n+t,du[1]=uu(h)*r+e,l(u,du,u),c(s,du,s))}var xu={M:1,L:2,C:3,Q:4,A:5,Z:6,R:7},wu=[],_u=[],Su=[],Cu=[],Mu=[],Tu=[],ku=Math.min,Du=Math.max,Au=Math.cos,Iu=Math.sin,Ou=Math.sqrt,Lu=Math.abs,Eu=Math.PI,Nu=2*Eu,Ru="undefined"!==typeof Float32Array,Pu=[];function zu(t){var e=Math.round(t/Eu*1e8)/1e8;return e%2*Eu}function Bu(t,e){var n=zu(t[0]);n<0&&(n+=Nu);var r=n-t[0],o=t[1];o+=r,!e&&o-n>=Nu?o=n+Nu:e&&n-o>=Nu?o=n-Nu:!e&&n>o?o=n+(Nu-zu(n-o)):e&&n<o&&(o=n-(Nu-zu(o-n))),t[0]=n,t[1]=o}var Vu=function(){function t(t){this.dpr=1,this._xi=0,this._yi=0,this._x0=0,this._y0=0,this._len=0,t&&(this._saveData=!1),this._saveData&&(this.data=[])}return t.prototype.increaseVersion=function(){this._version++},t.prototype.getVersion=function(){return this._version},t.prototype.setScale=function(t,e,n){n=n||0,n>0&&(this._ux=Lu(n/hr/t)||0,this._uy=Lu(n/hr/e)||0)},t.prototype.setDPR=function(t){this.dpr=t},t.prototype.setContext=function(t){this._ctx=t},t.prototype.getContext=function(){return this._ctx},t.prototype.beginPath=function(){return this._ctx&&this._ctx.beginPath(),this.reset(),this},t.prototype.reset=function(){this._saveData&&(this._len=0),this._lineDash&&(this._lineDash=null,this._dashOffset=0),this._pathSegLen&&(this._pathSegLen=null,this._pathLen=0),this._version++},t.prototype.moveTo=function(t,e){return this._drawPendingPt(),this.addData(xu.M,t,e),this._ctx&&this._ctx.moveTo(t,e),this._x0=t,this._y0=e,this._xi=t,this._yi=e,this},t.prototype.lineTo=function(t,e){var n=Lu(t-this._xi),r=Lu(e-this._yi),o=n>this._ux||r>this._uy;if(this.addData(xu.L,t,e),this._ctx&&o&&(this._needsDash?this._dashedLineTo(t,e):this._ctx.lineTo(t,e)),o)this._xi=t,this._yi=e,this._pendingPtDist=0;else{var i=n*n+r*r;i>this._pendingPtDist&&(this._pendingPtX=t,this._pendingPtY=e,this._pendingPtDist=i)}return this},t.prototype.bezierCurveTo=function(t,e,n,r,o,i){return this.addData(xu.C,t,e,n,r,o,i),this._ctx&&(this._needsDash?this._dashedBezierTo(t,e,n,r,o,i):this._ctx.bezierCurveTo(t,e,n,r,o,i)),this._xi=o,this._yi=i,this},t.prototype.quadraticCurveTo=function(t,e,n,r){return this.addData(xu.Q,t,e,n,r),this._ctx&&(this._needsDash?this._dashedQuadraticTo(t,e,n,r):this._ctx.quadraticCurveTo(t,e,n,r)),this._xi=n,this._yi=r,this},t.prototype.arc=function(t,e,n,r,o,i){Pu[0]=r,Pu[1]=o,Bu(Pu,i),r=Pu[0],o=Pu[1];var a=o-r;return this.addData(xu.A,t,e,n,n,r,a,0,i?0:1),this._ctx&&this._ctx.arc(t,e,n,r,o,i),this._xi=Au(o)*n+t,this._yi=Iu(o)*n+e,this},t.prototype.arcTo=function(t,e,n,r,o){return this._ctx&&this._ctx.arcTo(t,e,n,r,o),this},t.prototype.rect=function(t,e,n,r){return this._ctx&&this._ctx.rect(t,e,n,r),this.addData(xu.R,t,e,n,r),this},t.prototype.closePath=function(){this._drawPendingPt(),this.addData(xu.Z);var t=this._ctx,e=this._x0,n=this._y0;return t&&(this._needsDash&&this._dashedLineTo(e,n),t.closePath()),this._xi=e,this._yi=n,this},t.prototype.fill=function(t){t&&t.fill(),this.toStatic()},t.prototype.stroke=function(t){t&&t.stroke(),this.toStatic()},t.prototype.setLineDash=function(t){if(t instanceof Array){this._lineDash=t,this._dashIdx=0;for(var e=0,n=0;n<t.length;n++)e+=t[n];this._dashSum=e,this._needsDash=!0}else this._lineDash=null,this._needsDash=!1;return this},t.prototype.setLineDashOffset=function(t){return this._dashOffset=t,this},t.prototype.len=function(){return this._len},t.prototype.setData=function(t){var e=t.length;this.data&&this.data.length===e||!Ru||(this.data=new Float32Array(e));for(var n=0;n<e;n++)this.data[n]=t[n];this._len=e},t.prototype.appendPath=function(t){t instanceof Array||(t=[t]);for(var e=t.length,n=0,r=this._len,o=0;o<e;o++)n+=t[o].len();Ru&&this.data instanceof Float32Array&&(this.data=new Float32Array(r+n));for(o=0;o<e;o++)for(var i=t[o].data,a=0;a<i.length;a++)this.data[r++]=i[a];this._len=r},t.prototype.addData=function(t,e,n,r,o,i,a,u,s){if(this._saveData){var l=this.data;this._len+arguments.length>l.length&&(this._expandData(),l=this.data);for(var c=0;c<arguments.length;c++)l[this._len++]=arguments[c]}},t.prototype._drawPendingPt=function(){this._pendingPtDist>0&&(this._ctx&&this._ctx.lineTo(this._pendingPtX,this._pendingPtY),this._pendingPtDist=0)},t.prototype._expandData=function(){if(!(this.data instanceof Array)){for(var t=[],e=0;e<this._len;e++)t[e]=this.data[e];this.data=t}},t.prototype._dashedLineTo=function(t,e){var n,r,o=this._dashSum,i=this._lineDash,a=this._ctx,u=this._dashOffset,s=this._xi,l=this._yi,c=t-s,f=e-l,d=Ou(c*c+f*f),h=s,p=l,g=i.length;c/=d,f/=d,u<0&&(u=o+u),u%=o,h-=u*c,p-=u*f;while(c>0&&h<=t||c<0&&h>=t||0===c&&(f>0&&p<=e||f<0&&p>=e))r=this._dashIdx,n=i[r],h+=c*n,p+=f*n,this._dashIdx=(r+1)%g,c>0&&h<s||c<0&&h>s||f>0&&p<l||f<0&&p>l||a[r%2?"moveTo":"lineTo"](c>=0?ku(h,t):Du(h,t),f>=0?ku(p,e):Du(p,e));c=h-t,f=p-e,this._dashOffset=-Ou(c*c+f*f)},t.prototype._dashedBezierTo=function(t,e,n,r,o,i){var a,u,s,l,c,f=this._ctx,d=this._dashSum,h=this._dashOffset,p=this._lineDash,g=this._xi,m=this._yi,v=0,y=this._dashIdx,b=p.length,x=0;for(h<0&&(h=d+h),h%=d,a=0;a<1;a+=.1)u=ja(g,t,n,o,a+.1)-ja(g,t,n,o,a),s=ja(m,e,r,i,a+.1)-ja(m,e,r,i,a),v+=Ou(u*u+s*s);for(;y<b;y++)if(x+=p[y],x>h)break;a=(x-h)/v;while(a<=1)l=ja(g,t,n,o,a),c=ja(m,e,r,i,a),y%2?f.moveTo(l,c):f.lineTo(l,c),a+=p[y]/v,y=(y+1)%b;y%2!==0&&f.lineTo(o,i),u=o-l,s=i-c,this._dashOffset=-Ou(u*u+s*s)},t.prototype._dashedQuadraticTo=function(t,e,n,r){var o=n,i=r;n=(n+2*t)/3,r=(r+2*e)/3,t=(this._xi+2*t)/3,e=(this._yi+2*e)/3,this._dashedBezierTo(t,e,n,r,o,i)},t.prototype.toStatic=function(){if(this._saveData){this._drawPendingPt();var t=this.data;t instanceof Array&&(t.length=this._len,Ru&&this._len>11&&(this.data=new Float32Array(t)))}},t.prototype.getBoundingRect=function(){Su[0]=Su[1]=Mu[0]=Mu[1]=Number.MAX_VALUE,Cu[0]=Cu[1]=Tu[0]=Tu[1]=-Number.MAX_VALUE;var t,e=this.data,n=0,r=0,o=0,i=0;for(t=0;t<this._len;){var a=e[t++],u=1===t;switch(u&&(n=e[t],r=e[t+1],o=n,i=r),a){case xu.M:n=o=e[t++],r=i=e[t++],Mu[0]=o,Mu[1]=i,Tu[0]=o,Tu[1]=i;break;case xu.L:pu(n,r,e[t],e[t+1],Mu,Tu),n=e[t++],r=e[t++];break;case xu.C:vu(n,r,e[t++],e[t++],e[t++],e[t++],e[t],e[t+1],Mu,Tu),n=e[t++],r=e[t++];break;case xu.Q:yu(n,r,e[t++],e[t++],e[t],e[t+1],Mu,Tu),n=e[t++],r=e[t++];break;case xu.A:var s=e[t++],l=e[t++],c=e[t++],f=e[t++],d=e[t++],h=e[t++]+d;t+=1;var p=!e[t++];u&&(o=Au(d)*c+s,i=Iu(d)*f+l),bu(s,l,c,f,d,h,p,Mu,Tu),n=Au(h)*c+s,r=Iu(h)*f+l;break;case xu.R:o=n=e[t++],i=r=e[t++];var g=e[t++],m=e[t++];pu(o,i,o+g,i+m,Mu,Tu);break;case xu.Z:n=o,r=i;break}Bt(Su,Su,Mu),Vt(Cu,Cu,Tu)}return 0===t&&(Su[0]=Su[1]=Cu[0]=Cu[1]=0),new Zr(Su[0],Su[1],Cu[0]-Su[0],Cu[1]-Su[1])},t.prototype._calculateLength=function(){var t=this.data,e=this._len,n=this._ux,r=this._uy,o=0,i=0,a=0,u=0;this._pathSegLen||(this._pathSegLen=[]);for(var s=this._pathSegLen,l=0,c=0,f=0;f<e;){var d=t[f++],h=1===f;h&&(o=t[f],i=t[f+1],a=o,u=i);var p=-1;switch(d){case xu.M:o=a=t[f++],i=u=t[f++];break;case xu.L:var g=t[f++],m=t[f++],v=g-o,y=m-i;(Lu(v)>n||Lu(y)>r||f===e-1)&&(p=Math.sqrt(v*v+y*y),o=g,i=m);break;case xu.C:var b=t[f++],x=t[f++],w=(g=t[f++],m=t[f++],t[f++]),_=t[f++];p=Ka(o,i,b,x,g,m,w,_,10),o=w,i=_;break;case xu.Q:b=t[f++],x=t[f++],g=t[f++],m=t[f++];p=ou(o,i,b,x,g,m,10),o=g,i=m;break;case xu.A:var S=t[f++],C=t[f++],M=t[f++],T=t[f++],k=t[f++],D=t[f++],A=D+k;f+=1;t[f++];h&&(a=Au(k)*M+S,u=Iu(k)*T+C),p=Du(M,T)*ku(Nu,Math.abs(D)),o=Au(A)*M+S,i=Iu(A)*T+C;break;case xu.R:a=o=t[f++],u=i=t[f++];var I=t[f++],O=t[f++];p=2*I+2*O;break;case xu.Z:v=a-o,y=u-i;p=Math.sqrt(v*v+y*y),o=a,i=u;break}p>=0&&(s[c++]=p,l+=p)}return this._pathLen=l,l},t.prototype.rebuildPath=function(t,e){var n,r,o,i,a,u,s,l,c,f,d,h=this.data,p=this._ux,g=this._uy,m=this._len,v=e<1,y=0,b=0,x=0;if(!v||(this._pathSegLen||this._calculateLength(),s=this._pathSegLen,l=this._pathLen,c=e*l,c))t:for(var w=0;w<m;){var _=h[w++],S=1===w;switch(S&&(o=h[w],i=h[w+1],n=o,r=i),_){case xu.M:x>0&&(t.lineTo(f,d),x=0),n=o=h[w++],r=i=h[w++],t.moveTo(o,i);break;case xu.L:a=h[w++],u=h[w++];var C=Lu(a-o),M=Lu(u-i);if(C>p||M>g){if(v){var T=s[b++];if(y+T>c){var k=(c-y)/T;t.lineTo(o*(1-k)+a*k,i*(1-k)+u*k);break t}y+=T}t.lineTo(a,u),o=a,i=u,x=0}else{var D=C*C+M*M;D>x&&(f=a,d=u,x=D)}break;case xu.C:var A=h[w++],I=h[w++],O=h[w++],L=h[w++],E=h[w++],N=h[w++];if(v){T=s[b++];if(y+T>c){k=(c-y)/T;Za(o,A,O,E,k,wu),Za(i,I,L,N,k,_u),t.bezierCurveTo(wu[1],_u[1],wu[2],_u[2],wu[3],_u[3]);break t}y+=T}t.bezierCurveTo(A,I,O,L,E,N),o=E,i=N;break;case xu.Q:A=h[w++],I=h[w++],O=h[w++],L=h[w++];if(v){T=s[b++];if(y+T>c){k=(c-y)/T;nu(o,A,O,k,wu),nu(i,I,L,k,_u),t.quadraticCurveTo(wu[1],_u[1],wu[2],_u[2]);break t}y+=T}t.quadraticCurveTo(A,I,O,L),o=O,i=L;break;case xu.A:var R=h[w++],P=h[w++],z=h[w++],B=h[w++],V=h[w++],H=h[w++],F=h[w++],W=!h[w++],U=z>B?z:B,G=Lu(z-B)>.001,j=V+H,X=!1;if(v){T=s[b++];y+T>c&&(j=V+H*(c-y)/T,X=!0),y+=T}if(G&&t.ellipse?t.ellipse(R,P,z,B,F,V,j,W):t.arc(R,P,U,V,j,W),X)break t;S&&(n=Au(V)*z+R,r=Iu(V)*B+P),o=Au(j)*z+R,i=Iu(j)*B+P;break;case xu.R:n=o=h[w],r=i=h[w+1],a=h[w++],u=h[w++];var Y=h[w++],q=h[w++];if(v){T=s[b++];if(y+T>c){var Z=c-y;t.moveTo(a,u),t.lineTo(a+ku(Z,Y),u),Z-=Y,Z>0&&t.lineTo(a+Y,u+ku(Z,q)),Z-=q,Z>0&&t.lineTo(a+Du(Y-Z,0),u+q),Z-=Y,Z>0&&t.lineTo(a,u+Du(q-Z,0));break t}y+=T}t.rect(a,u,Y,q);break;case xu.Z:if(x>0&&(t.lineTo(f,d),x=0),v){T=s[b++];if(y+T>c){k=(c-y)/T;t.lineTo(o*(1-k)+n*k,i*(1-k)+r*k);break t}y+=T}t.closePath(),o=n,i=r}}},t.CMD=xu,t.initDefaultProps=function(){var e=t.prototype;e._saveData=!0,e._needsDash=!1,e._dashOffset=0,e._dashIdx=0,e._dashSum=0,e._ux=0,e._uy=0,e._pendingPtDist=0,e._version=0}(),t}(),Hu=Vu;function Fu(t,e,n,r,o,i,a){if(0===o)return!1;var u=o,s=0,l=t;if(a>e+u&&a>r+u||a<e-u&&a<r-u||i>t+u&&i>n+u||i<t-u&&i<n-u)return!1;if(t===n)return Math.abs(i-t)<=u/2;s=(e-r)/(t-n),l=(t*r-n*e)/(t-n);var c=s*i-a+l,f=c*c/(s*s+1);return f<=u/2*u/2}function Wu(t,e,n,r,o,i,a,u,s,l,c){if(0===s)return!1;var f=s;if(c>e+f&&c>r+f&&c>i+f&&c>u+f||c<e-f&&c<r-f&&c<i-f&&c<u-f||l>t+f&&l>n+f&&l>o+f&&l>a+f||l<t-f&&l<n-f&&l<o-f&&l<a-f)return!1;var d=$a(t,e,n,r,o,i,a,u,l,c,null);return d<=f/2}function Uu(t,e,n,r,o,i,a,u,s){if(0===a)return!1;var l=a;if(s>e+l&&s>r+l&&s>i+l||s<e-l&&s<r-l&&s<i-l||u>t+l&&u>n+l&&u>o+l||u<t-l&&u<n-l&&u<o-l)return!1;var c=ru(t,e,n,r,o,i,u,s,null);return c<=l/2}var Gu=2*Math.PI;function ju(t){return t%=Gu,t<0&&(t+=Gu),t}var Xu=2*Math.PI;function Yu(t,e,n,r,o,i,a,u,s){if(0===a)return!1;var l=a;u-=t,s-=e;var c=Math.sqrt(u*u+s*s);if(c-l>n||c+l<n)return!1;if(Math.abs(r-o)%Xu<1e-4)return!0;if(i){var f=r;r=ju(o),o=ju(f)}else r=ju(r),o=ju(o);r>o&&(o+=Xu);var d=Math.atan2(s,u);return d<0&&(d+=Xu),d>=r&&d<=o||d+Xu>=r&&d+Xu<=o}function qu(t,e,n,r,o,i){if(i>e&&i>r||i<e&&i<r)return 0;if(r===e)return 0;var a=(i-e)/(r-e),u=r<e?1:-1;1!==a&&0!==a||(u=r<e?.5:-.5);var s=a*(n-t)+t;return s===o?1/0:s>o?u:0}var Zu=Hu.CMD,$u=2*Math.PI,Ku=1e-4;function Ju(t,e){return Math.abs(t-e)<Ku}var Qu=[-1,-1,-1],ts=[-1,-1];function es(){var t=ts[0];ts[0]=ts[1],ts[1]=t}function ns(t,e,n,r,o,i,a,u,s,l){if(l>e&&l>r&&l>i&&l>u||l<e&&l<r&&l<i&&l<u)return 0;var c=Ya(e,r,i,u,l,Qu);if(0===c)return 0;for(var f=0,d=-1,h=void 0,p=void 0,g=0;g<c;g++){var m=Qu[g],v=0===m||1===m?.5:1,y=ja(t,n,o,a,m);y<s||(d<0&&(d=qa(e,r,i,u,ts),ts[1]<ts[0]&&d>1&&es(),h=ja(e,r,i,u,ts[0]),d>1&&(p=ja(e,r,i,u,ts[1]))),2===d?m<ts[0]?f+=h<e?v:-v:m<ts[1]?f+=p<h?v:-v:f+=u<p?v:-v:m<ts[0]?f+=h<e?v:-v:f+=u<h?v:-v)}return f}function rs(t,e,n,r,o,i,a,u){if(u>e&&u>r&&u>i||u<e&&u<r&&u<i)return 0;var s=tu(e,r,i,u,Qu);if(0===s)return 0;var l=eu(e,r,i);if(l>=0&&l<=1){for(var c=0,f=Ja(e,r,i,l),d=0;d<s;d++){var h=0===Qu[d]||1===Qu[d]?.5:1,p=Ja(t,n,o,Qu[d]);p<a||(Qu[d]<l?c+=f<e?h:-h:c+=i<f?h:-h)}return c}h=0===Qu[0]||1===Qu[0]?.5:1,p=Ja(t,n,o,Qu[0]);return p<a?0:i<e?h:-h}function os(t,e,n,r,o,i,a,u){if(u-=e,u>n||u<-n)return 0;var s=Math.sqrt(n*n-u*u);Qu[0]=-s,Qu[1]=s;var l=Math.abs(r-o);if(l<1e-4)return 0;if(l>=$u-1e-4){r=0,o=$u;var c=i?1:-1;return a>=Qu[0]+t&&a<=Qu[1]+t?c:0}if(r>o){var f=r;r=o,o=f}r<0&&(r+=$u,o+=$u);for(var d=0,h=0;h<2;h++){var p=Qu[h];if(p+t>a){var g=Math.atan2(u,p);c=i?1:-1;g<0&&(g=$u+g),(g>=r&&g<=o||g+$u>=r&&g+$u<=o)&&(g>Math.PI/2&&g<1.5*Math.PI&&(c=-c),d+=c)}}return d}function is(t,e,n,r,o){for(var i,a,u=t.data,s=t.len(),l=0,c=0,f=0,d=0,h=0,p=0;p<s;){var g=u[p++],m=1===p;switch(g===Zu.M&&p>1&&(n||(l+=qu(c,f,d,h,r,o))),m&&(c=u[p],f=u[p+1],d=c,h=f),g){case Zu.M:d=u[p++],h=u[p++],c=d,f=h;break;case Zu.L:if(n){if(Fu(c,f,u[p],u[p+1],e,r,o))return!0}else l+=qu(c,f,u[p],u[p+1],r,o)||0;c=u[p++],f=u[p++];break;case Zu.C:if(n){if(Wu(c,f,u[p++],u[p++],u[p++],u[p++],u[p],u[p+1],e,r,o))return!0}else l+=ns(c,f,u[p++],u[p++],u[p++],u[p++],u[p],u[p+1],r,o)||0;c=u[p++],f=u[p++];break;case Zu.Q:if(n){if(Uu(c,f,u[p++],u[p++],u[p],u[p+1],e,r,o))return!0}else l+=rs(c,f,u[p++],u[p++],u[p],u[p+1],r,o)||0;c=u[p++],f=u[p++];break;case Zu.A:var v=u[p++],y=u[p++],b=u[p++],x=u[p++],w=u[p++],_=u[p++];p+=1;var S=!!(1-u[p++]);i=Math.cos(w)*b+v,a=Math.sin(w)*x+y,m?(d=i,h=a):l+=qu(c,f,i,a,r,o);var C=(r-v)*x/b+v;if(n){if(Yu(v,y,x,w,w+_,S,e,C,o))return!0}else l+=os(v,y,x,w,w+_,S,C,o);c=Math.cos(w+_)*b+v,f=Math.sin(w+_)*x+y;break;case Zu.R:d=c=u[p++],h=f=u[p++];var M=u[p++],T=u[p++];if(i=d+M,a=h+T,n){if(Fu(d,h,i,h,e,r,o)||Fu(i,h,i,a,e,r,o)||Fu(i,a,d,a,e,r,o)||Fu(d,a,d,h,e,r,o))return!0}else l+=qu(i,h,i,a,r,o),l+=qu(d,a,d,h,r,o);break;case Zu.Z:if(n){if(Fu(c,f,d,h,e,r,o))return!0}else l+=qu(c,f,d,h,r,o);c=d,f=h;break}}return n||Ju(f,h)||(l+=qu(c,f,d,h,r,o)||0),0!==l}function as(t,e,n){return is(t,0,!1,e,n)}function us(t,e,n,r){return is(t,e,!0,n,r)}var ss=O({fill:"#000",stroke:null,strokePercent:1,fillOpacity:1,strokeOpacity:1,lineDashOffset:0,lineWidth:1,lineCap:"butt",miterLimit:10,strokeNoScale:!1,strokeFirst:!1},Ma),ls={style:O({fill:!0,stroke:!0,strokePercent:!0,fillOpacity:!0,strokeOpacity:!0,lineDashOffset:!0,lineWidth:!0,miterLimit:!0},Ta.style)},cs=["x","y","rotation","scaleX","scaleY","originX","originY","invisible","culling","z","z2","zlevel","parent"],fs=function(t){function e(e){return t.call(this,e)||this}return i(e,t),e.prototype.update=function(){var n=this;t.prototype.update.call(this);var r=this.style;if(r.decal){var o=this._decalEl=this._decalEl||new e;o.buildPath===e.prototype.buildPath&&(o.buildPath=function(t){n.buildPath(t,n.shape)}),o.silent=!0;var i=o.style;for(var a in r)i[a]!==r[a]&&(i[a]=r[a]);i.fill=r.fill?r.decal:null,i.decal=null,i.shadowColor=null,r.strokeFirst&&(i.stroke=null);for(var u=0;u<cs.length;++u)o[cs[u]]=this[cs[u]];o.__dirty|=ze}else this._decalEl&&(this._decalEl=null)},e.prototype.getDecalElement=function(){return this._decalEl},e.prototype._init=function(e){var n=W(e);this.shape=this.getDefaultShape();var r=this.getDefaultStyle();r&&this.useStyle(r);for(var o=0;o<n.length;o++){var i=n[o],a=e[i];"style"===i?this.style?I(this.style,a):this.useStyle(a):"shape"===i?I(this.shape,a):t.prototype.attrKV.call(this,i,a)}this.style||this.useStyle({})},e.prototype.getDefaultStyle=function(){return null},e.prototype.getDefaultShape=function(){return{}},e.prototype.canBeInsideText=function(){return this.hasFill()},e.prototype.getInsideTextFill=function(){var t=this.style.fill;if("none"!==t){if(q(t)){var e=Cn(t,0);return e>.5?gr:e>.2?vr:mr}if(t)return mr}return gr},e.prototype.getInsideTextStroke=function(t){var e=this.style.fill;if(q(e)){var n=this.__zr,r=!(!n||!n.isDarkMode()),o=Cn(t,0)<pr;if(r===o)return e}},e.prototype.buildPath=function(t,e,n){},e.prototype.pathUpdated=function(){this.__dirty&=~Ve},e.prototype.createPathProxy=function(){this.path=new Hu(!1)},e.prototype.hasStroke=function(){var t=this.style,e=t.stroke;return!(null==e||"none"===e||!(t.lineWidth>0))},e.prototype.hasFill=function(){var t=this.style,e=t.fill;return null!=e&&"none"!==e},e.prototype.getBoundingRect=function(){var t=this._rect,e=this.style,n=!t;if(n){var r=!1;this.path||(r=!0,this.createPathProxy());var o=this.path;(r||this.__dirty&Ve)&&(o.beginPath(),this.buildPath(o,this.shape,!1),this.pathUpdated()),t=o.getBoundingRect()}if(this._rect=t,this.hasStroke()&&this.path&&this.path.len()>0){var i=this._rectWithStroke||(this._rectWithStroke=t.clone());if(this.__dirty||n){i.copy(t);var a=e.strokeNoScale?this.getLineScale():1,u=e.lineWidth;if(!this.hasFill()){var s=this.strokeContainThreshold;u=Math.max(u,null==s?4:s)}a>1e-10&&(i.width+=u/a,i.height+=u/a,i.x-=u/a/2,i.y-=u/a/2)}return i}return t},e.prototype.contain=function(t,e){var n=this.transformCoordToLocal(t,e),r=this.getBoundingRect(),o=this.style;if(t=n[0],e=n[1],r.contain(t,e)){var i=this.path;if(this.hasStroke()){var a=o.lineWidth,u=o.strokeNoScale?this.getLineScale():1;if(u>1e-10&&(this.hasFill()||(a=Math.max(a,this.strokeContainThreshold)),us(i,a/u,t,e)))return!0}if(this.hasFill())return as(i,t,e)}return!1},e.prototype.dirtyShape=function(){this.__dirty|=Ve,this._rect&&(this._rect=null),this._decalEl&&this._decalEl.dirtyShape(),this.markRedraw()},e.prototype.dirty=function(){this.dirtyStyle(),this.dirtyShape()},e.prototype.animateShape=function(t){return this.animate("shape",t)},e.prototype.updateDuringAnimation=function(t){"style"===t?this.dirtyStyle():"shape"===t?this.dirtyShape():this.markRedraw()},e.prototype.attrKV=function(e,n){"shape"===e?this.setShape(n):t.prototype.attrKV.call(this,e,n)},e.prototype.setShape=function(t,e){var n=this.shape;return n||(n=this.shape={}),"string"===typeof t?n[t]=e:I(n,t),this.dirtyShape(),this},e.prototype.shapeChanged=function(){return!!(this.__dirty&Ve)},e.prototype.createStyle=function(t){return yt(ss,t)},e.prototype._innerSaveToNormal=function(e){t.prototype._innerSaveToNormal.call(this,e);var n=this._normalState;e.shape&&!n.shape&&(n.shape=I({},this.shape))},e.prototype._applyStateObj=function(e,n,r,o,i,a){t.prototype._applyStateObj.call(this,e,n,r,o,i,a);var u,s=!(n&&o);if(n&&n.shape?i?o?u=n.shape:(u=I({},r.shape),I(u,n.shape)):(u=I({},o?this.shape:r.shape),I(u,n.shape)):s&&(u=r.shape),u)if(i){this.shape=I({},this.shape);for(var l={},c=W(u),f=0;f<c.length;f++){var d=c[f];"object"===typeof u[d]?this.shape[d]=u[d]:l[d]=u[d]}this._transitionState(e,{shape:l},a)}else this.shape=u,this.dirtyShape()},e.prototype._mergeStates=function(e){for(var n,r=t.prototype._mergeStates.call(this,e),o=0;o<e.length;o++){var i=e[o];i.shape&&(n=n||{},this._mergeStyle(n,i.shape))}return n&&(r.shape=n),r},e.prototype.getAnimationStyleProps=function(){return ls},e.prototype.isZeroArea=function(){return!1},e.extend=function(t){var n=function(e){function n(n){var r=e.call(this,n)||this;return t.init&&t.init.call(r,n),r}return i(n,e),n.prototype.getDefaultStyle=function(){return k(t.style)},n.prototype.getDefaultShape=function(){return k(t.shape)},n}(e);for(var r in t)"function"===typeof t[r]&&(n.prototype[r]=t[r]);return n},e.initDefaultProps=function(){var t=e.prototype;t.type="path",t.strokeContainThreshold=5,t.segmentIgnoreThreshold=0,t.subPixelOptimize=!1,t.autoBatch=!1,t.__dirty=ze|Be|Ve}(),e}(Ea),ds=fs,hs=O({strokeFirst:!0,font:Kr,x:0,y:0,textAlign:"left",textBaseline:"top",miterLimit:2},ss),ps=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.hasStroke=function(){var t=this.style,e=t.stroke;return null!=e&&"none"!==e&&t.lineWidth>0},e.prototype.hasFill=function(){var t=this.style,e=t.fill;return null!=e&&"none"!==e},e.prototype.createStyle=function(t){return yt(hs,t)},e.prototype.setBoundingRect=function(t){this._rect=t},e.prototype.getBoundingRect=function(){var t=this.style;if(!this._rect){var e=t.text;null!=e?e+="":e="";var n=no(e,t.font,t.textAlign,t.textBaseline);if(n.x+=t.x||0,n.y+=t.y||0,this.hasStroke()){var r=t.lineWidth;n.x-=r/2,n.y-=r/2,n.width+=r,n.height+=r}this._rect=n}return this._rect},e.initDefaultProps=function(){var t=e.prototype;t.dirtyRectTolerance=10}(),e}(Ea);ps.prototype.type="tspan";var gs=ps,ms=O({x:0,y:0},Ma),vs={style:O({x:!0,y:!0,width:!0,height:!0,sx:!0,sy:!0,sWidth:!0,sHeight:!0},Ta.style)};function ys(t){return!!(t&&"string"!==typeof t&&t.width&&t.height)}var bs=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.createStyle=function(t){return yt(ms,t)},e.prototype._getSize=function(t){var e=this.style,n=e[t];if(null!=n)return n;var r=ys(e.image)?e.image:this.__image;if(!r)return 0;var o="width"===t?"height":"width",i=e[o];return null==i?r[t]:r[t]/r[o]*i},e.prototype.getWidth=function(){return this._getSize("width")},e.prototype.getHeight=function(){return this._getSize("height")},e.prototype.getAnimationStyleProps=function(){return vs},e.prototype.getBoundingRect=function(){var t=this.style;return this._rect||(this._rect=new Zr(t.x||0,t.y||0,this.getWidth(),this.getHeight())),this._rect},e}(Ea);bs.prototype.type="image";var xs=bs;function ws(t,e){var n,r,o,i,a,u=e.x,s=e.y,l=e.width,c=e.height,f=e.r;l<0&&(u+=l,l=-l),c<0&&(s+=c,c=-c),"number"===typeof f?n=r=o=i=f:f instanceof Array?1===f.length?n=r=o=i=f[0]:2===f.length?(n=o=f[0],r=i=f[1]):3===f.length?(n=f[0],r=i=f[1],o=f[2]):(n=f[0],r=f[1],o=f[2],i=f[3]):n=r=o=i=0,n+r>l&&(a=n+r,n*=l/a,r*=l/a),o+i>l&&(a=o+i,o*=l/a,i*=l/a),r+o>c&&(a=r+o,r*=c/a,o*=c/a),n+i>c&&(a=n+i,n*=c/a,i*=c/a),t.moveTo(u+n,s),t.lineTo(u+l-r,s),0!==r&&t.arc(u+l-r,s+r,r,-Math.PI/2,0),t.lineTo(u+l,s+c-o),0!==o&&t.arc(u+l-o,s+c-o,o,0,Math.PI/2),t.lineTo(u+i,s+c),0!==i&&t.arc(u+i,s+c-i,i,Math.PI/2,Math.PI),t.lineTo(u,s+n),0!==n&&t.arc(u+n,s+n,n,Math.PI,1.5*Math.PI)}var _s=Math.round;function Ss(t,e,n){if(e){var r=e.x1,o=e.x2,i=e.y1,a=e.y2;t.x1=r,t.x2=o,t.y1=i,t.y2=a;var u=n&&n.lineWidth;return u?(_s(2*r)===_s(2*o)&&(t.x1=t.x2=Ms(r,u,!0)),_s(2*i)===_s(2*a)&&(t.y1=t.y2=Ms(i,u,!0)),t):t}}function Cs(t,e,n){if(e){var r=e.x,o=e.y,i=e.width,a=e.height;t.x=r,t.y=o,t.width=i,t.height=a;var u=n&&n.lineWidth;return u?(t.x=Ms(r,u,!0),t.y=Ms(o,u,!0),t.width=Math.max(Ms(r+i,u,!1)-t.x,0===i?0:1),t.height=Math.max(Ms(o+a,u,!1)-t.y,0===a?0:1),t):t}}function Ms(t,e,n){if(!e)return t;var r=_s(2*t);return(r+_s(e))%2===0?r/2:(r+(n?1:-1))/2}var Ts=function(){function t(){this.x=0,this.y=0,this.width=0,this.height=0}return t}(),ks={},Ds=function(t){function e(e){return t.call(this,e)||this}return i(e,t),e.prototype.getDefaultShape=function(){return new Ts},e.prototype.buildPath=function(t,e){var n,r,o,i;if(this.subPixelOptimize){var a=Cs(ks,e,this.style);n=a.x,r=a.y,o=a.width,i=a.height,a.r=e.r,e=a}else n=e.x,r=e.y,o=e.width,i=e.height;e.r?ws(t,e):t.rect(n,r,o,i)},e.prototype.isZeroArea=function(){return!this.shape.width||!this.shape.height},e}(ds);Ds.prototype.type="rect";var As=Ds,Is={fill:"#000"},Os=2,Ls={style:O({fill:!0,stroke:!0,fillOpacity:!0,strokeOpacity:!0,lineWidth:!0,fontSize:!0,lineHeight:!0,width:!0,height:!0,textShadowColor:!0,textShadowBlur:!0,textShadowOffsetX:!0,textShadowOffsetY:!0,backgroundColor:!0,padding:!0,borderColor:!0,borderWidth:!0,borderRadius:!0},Ta.style)},Es=function(t){function e(e){var n=t.call(this)||this;return n.type="text",n._children=[],n._defaultStyle=Is,n.attr(e),n}return i(e,t),e.prototype.childrenRef=function(){return this._children},e.prototype.update=function(){this.styleChanged()&&this._updateSubTexts();for(var e=0;e<this._children.length;e++){var n=this._children[e];n.zlevel=this.zlevel,n.z=this.z,n.z2=this.z2,n.culling=this.culling,n.cursor=this.cursor,n.invisible=this.invisible}var r=this.attachedTransform;if(r){r.updateTransform();var o=r.transform;o?(this.transform=this.transform||[],xr(this.transform,o)):this.transform=null}else t.prototype.update.call(this)},e.prototype.getComputedTransform=function(){return this.__hostTarget&&(this.__hostTarget.getComputedTransform(),this.__hostTarget.updateInnerText(!0)),this.attachedTransform?this.attachedTransform.getComputedTransform():t.prototype.getComputedTransform.call(this)},e.prototype._updateSubTexts=function(){this._childCursor=0,Ps(this.style),this.style.rich?this._updateRichTexts():this._updatePlainTexts(),this._children.length=this._childCursor,this.styleUpdated()},e.prototype.addSelfToZr=function(e){t.prototype.addSelfToZr.call(this,e);for(var n=0;n<this._children.length;n++)this._children[n].__zr=e},e.prototype.removeSelfFromZr=function(e){t.prototype.removeSelfFromZr.call(this,e);for(var n=0;n<this._children.length;n++)this._children[n].__zr=null},e.prototype.getBoundingRect=function(){if(this.styleChanged()&&this._updateSubTexts(),!this._rect){for(var t=new Zr(0,0,0,0),e=this._children,n=[],r=null,o=0;o<e.length;o++){var i=e[o],a=i.getBoundingRect(),u=i.getLocalTransform(n);u?(t.copy(a),t.applyTransform(u),r=r||t.clone(),r.union(t)):(r=r||a.clone(),r.union(a))}this._rect=r||t}return this._rect},e.prototype.setDefaultTextStyle=function(t){this._defaultStyle=t||Is},e.prototype.setTextContent=function(t){throw new Error("Can't attach text on another text")},e.prototype._mergeStyle=function(t,e){if(!e)return t;var n=e.rich,r=t.rich||n&&{};return I(t,e),n&&r?(this._mergeRich(r,n),t.rich=r):r&&(t.rich=r),t},e.prototype._mergeRich=function(t,e){for(var n=W(e),r=0;r<n.length;r++){var o=n[r];t[o]=t[o]||{},I(t[o],e[o])}},e.prototype.getAnimationStyleProps=function(){return Ls},e.prototype._getOrCreateChild=function(t){var e=this._children[this._childCursor];return e&&e instanceof t||(e=new t),this._children[this._childCursor++]=e,e.__zr=this.__zr,e.parent=this,e},e.prototype._updatePlainTexts=function(){var t=this.style,e=t.font||Kr,n=t.padding,r=Fs(t),o=pa(r,t),i=Ws(t),a=!!t.backgroundColor,u=o.outerHeight,s=o.lines,l=o.lineHeight,c=this._defaultStyle,f=t.x||0,d=t.y||0,h=t.align||c.align||"left",p=t.verticalAlign||c.verticalAlign||"top",g=f,m=oo(d,o.contentHeight,p);if(i||n){var v=o.width;n&&(v+=n[1]+n[3]);var y=ro(f,v,h),b=oo(d,u,p);i&&this._renderBackground(t,t,y,b,v,u)}m+=l/2,n&&(g=Hs(f,h,n),"top"===p?m+=n[0]:"bottom"===p&&(m-=n[2]));for(var x=0,w=!1,_=(Vs("fill"in t?t.fill:(w=!0,c.fill))),S=(Bs("stroke"in t?t.stroke:a||c.autoStroke&&!w?null:(x=Os,c.stroke))),C=t.textShadowBlur>0,M=null!=t.width&&("truncate"===t.overflow||"break"===t.overflow||"breakAll"===t.overflow),T=o.calculatedLineHeight,k=0;k<s.length;k++){var D=this._getOrCreateChild(gs),A=D.createStyle();D.useStyle(A),A.text=s[k],A.x=g,A.y=m,h&&(A.textAlign=h),A.textBaseline="middle",A.opacity=t.opacity,A.strokeFirst=!0,C&&(A.shadowBlur=t.textShadowBlur||0,A.shadowColor=t.textShadowColor||"transparent",A.shadowOffsetX=t.textShadowOffsetX||0,A.shadowOffsetY=t.textShadowOffsetY||0),S&&(A.stroke=S,A.lineWidth=t.lineWidth||x,A.lineDash=t.lineDash,A.lineDashOffset=t.lineDashOffset||0),_&&(A.fill=_),A.font=e,m+=l,M&&D.setBoundingRect(new Zr(ro(A.x,t.width,A.textAlign),oo(A.y,T,A.textBaseline),t.width,T))}},e.prototype._updateRichTexts=function(){var t=this.style,e=Fs(t),n=ya(e,t),r=n.width,o=n.outerWidth,i=n.outerHeight,a=t.padding,u=t.x||0,s=t.y||0,l=this._defaultStyle,c=t.align||l.align,f=t.verticalAlign||l.verticalAlign,d=ro(u,o,c),h=oo(s,i,f),p=d,g=h;a&&(p+=a[3],g+=a[0]);var m=p+r;Ws(t)&&this._renderBackground(t,t,d,h,o,i);for(var v=!!t.backgroundColor,y=0;y<n.lines.length;y++){var b=n.lines[y],x=b.tokens,w=x.length,_=b.lineHeight,S=b.width,C=0,M=p,T=m,k=w-1,D=void 0;while(C<w&&(D=x[C],!D.align||"left"===D.align))this._placeToken(D,t,_,g,M,"left",v),S-=D.width,M+=D.width,C++;while(k>=0&&(D=x[k],"right"===D.align))this._placeToken(D,t,_,g,T,"right",v),S-=D.width,T-=D.width,k--;M+=(r-(M-p)-(m-T)-S)/2;while(C<=k)D=x[C],this._placeToken(D,t,_,g,M+D.width/2,"center",v),M+=D.width,C++;g+=_}},e.prototype._placeToken=function(t,e,n,r,o,i,a){var u=e.rich[t.styleName]||{};u.text=t.text;var s=t.verticalAlign,l=r+n/2;"top"===s?l=r+t.height/2:"bottom"===s&&(l=r+n-t.height/2);var c=!t.isLineHolder&&Ws(u);c&&this._renderBackground(u,e,"right"===i?o-t.width:"center"===i?o-t.width/2:o,l-t.height/2,t.width,t.height);var f=!!u.backgroundColor,d=t.textPadding;d&&(o=Hs(o,i,d),l-=t.height/2-d[0]-t.innerHeight/2);var h=this._getOrCreateChild(gs),p=h.createStyle();h.useStyle(p);var g=this._defaultStyle,m=!1,v=0,y=Bs("fill"in u?u.fill:"fill"in e?e.fill:(m=!0,g.fill)),b=Bs("stroke"in u?u.stroke:"stroke"in e?e.stroke:f||a||g.autoStroke&&!m?null:(v=Os,g.stroke)),x=u.textShadowBlur>0||e.textShadowBlur>0;p.text=t.text,p.x=o,p.y=l,x&&(p.shadowBlur=u.textShadowBlur||e.textShadowBlur||0,p.shadowColor=u.textShadowColor||e.textShadowColor||"transparent",p.shadowOffsetX=u.textShadowOffsetX||e.textShadowOffsetX||0,p.shadowOffsetY=u.textShadowOffsetY||e.textShadowOffsetY||0),p.textAlign=i,p.textBaseline="middle",p.font=t.font||Kr,p.opacity=ut(u.opacity,e.opacity,1),b&&(p.lineWidth=ut(u.lineWidth,e.lineWidth,v),p.lineDash=at(u.lineDash,e.lineDash),p.lineDashOffset=e.lineDashOffset||0,p.stroke=b),y&&(p.fill=y);var w=t.contentWidth,_=t.contentHeight;h.setBoundingRect(new Zr(ro(p.x,w,p.textAlign),oo(p.y,_,p.textBaseline),w,_))},e.prototype._renderBackground=function(t,e,n,r,o,i){var a,u,s=t.backgroundColor,l=t.borderWidth,c=t.borderColor,f=s&&s.image,d=s&&!f,h=t.borderRadius,p=this;if(d||l&&c){a=this._getOrCreateChild(As),a.useStyle(a.createStyle()),a.style.fill=null;var g=a.shape;g.x=n,g.y=r,g.width=o,g.height=i,g.r=h,a.dirtyShape()}if(d){var m=a.style;m.fill=s||null,m.fillOpacity=at(t.fillOpacity,1)}else if(f){u=this._getOrCreateChild(xs),u.onload=function(){p.dirtyStyle()};var v=u.style;v.image=s.image,v.x=n,v.y=r,v.width=o,v.height=i}if(l&&c){m=a.style;m.lineWidth=l,m.stroke=c,m.strokeOpacity=at(t.strokeOpacity,1),m.lineDash=t.borderDash,m.lineDashOffset=t.borderDashOffset||0,a.strokeContainThreshold=0,a.hasFill()&&a.hasStroke()&&(m.strokeFirst=!0,m.lineWidth*=2)}var y=(a||u).style;y.shadowBlur=t.shadowBlur||0,y.shadowColor=t.shadowColor||"transparent",y.shadowOffsetX=t.shadowOffsetX||0,y.shadowOffsetY=t.shadowOffsetY||0,y.opacity=ut(t.opacity,e.opacity,1)},e.makeFont=function(t){var e="";if(t.fontSize||t.fontFamily||t.fontWeight){var n="";n="string"!==typeof t.fontSize||-1===t.fontSize.indexOf("px")&&-1===t.fontSize.indexOf("rem")&&-1===t.fontSize.indexOf("em")?isNaN(+t.fontSize)?"12px":t.fontSize+"px":t.fontSize,e=[t.fontStyle,t.fontWeight,n,t.fontFamily||"sans-serif"].join(" ")}return e&&ft(e)||t.textFont||t.font},e}(Ea),Ns={left:!0,right:1,center:1},Rs={top:1,bottom:1,middle:1};function Ps(t){return zs(t),z(t.rich,zs),t}function zs(t){if(t){t.font=Es.makeFont(t);var e=t.align;"middle"===e&&(e="center"),t.align=null==e||Ns[e]?e:"left";var n=t.verticalAlign;"center"===n&&(n="middle"),t.verticalAlign=null==n||Rs[n]?n:"top";var r=t.padding;r&&(t.padding=lt(t.padding))}}function Bs(t,e){return null==t||e<=0||"transparent"===t||"none"===t?null:t.image||t.colorStops?"#000":t}function Vs(t){return null==t||"none"===t?null:t.image||t.colorStops?"#000":t}function Hs(t,e,n){return"right"===e?t-n[1]:"center"===e?t+n[3]/2-n[1]/2:t+n[3]}function Fs(t){var e=t.text;return null!=e&&(e+=""),e}function Ws(t){return!!(t.backgroundColor||t.borderWidth&&t.borderColor)}var Us=Es,Gs=Di(),js=1,Xs={},Ys=Di(),qs=0,Zs=1,$s=2,Ks=["emphasis","blur","select"],Js=["normal","emphasis","blur","select"],Qs=10,tl=9,el="highlight",nl="downplay",rl="select",ol="unselect",il="toggleSelect";function al(t){return null!=t&&"none"!==t}var ul=new tn(100);function sl(t){if("string"!==typeof t)return t;var e=ul.get(t);return e||(e=yn(t,-.1),ul.put(t,e)),e}function ll(t,e,n){t.onHoverStateChange&&(t.hoverState||0)!==n&&t.onHoverStateChange(e),t.hoverState=n}function cl(t){ll(t,"emphasis",$s)}function fl(t){t.hoverState===$s&&ll(t,"normal",qs)}function dl(t){ll(t,"blur",Zs)}function hl(t){t.hoverState===Zs&&ll(t,"normal",qs)}function pl(t){t.selected=!0}function gl(t){t.selected=!1}function ml(t,e,n){e(t,n)}function vl(t,e,n){ml(t,e,n),t.isGroup&&t.traverse(function(t){ml(t,e,n)})}function yl(t,e){switch(e){case"emphasis":t.hoverState=$s;break;case"normal":t.hoverState=qs;break;case"blur":t.hoverState=Zs;break;case"select":t.selected=!0}}function bl(t,e,n,r){for(var o=t.style,i={},a=0;a<e.length;a++){var u=e[a],s=o[u];i[u]=null==s?r&&r[u]:s}for(a=0;a<t.animators.length;a++){var l=t.animators[a];l.__fromStateTransition&&l.__fromStateTransition.indexOf(n)<0&&"style"===l.targetName&&l.saveFinalToTarget(i,e)}return i}function xl(t,e,n,r){var o=n&&E(n,"select")>=0,i=!1;if(t instanceof ds){var a=Ys(t),u=o&&a.selectFill||a.normalFill,s=o&&a.selectStroke||a.normalStroke;if(al(u)||al(s)){r=r||{};var l=r.style||{};!al(l.fill)&&al(u)?(i=!0,r=I({},r),l=I({},l),l.fill=sl(u)):!al(l.stroke)&&al(s)&&(i||(r=I({},r),l=I({},l)),l.stroke=sl(s)),r.style=l}}if(r&&null==r.z2){i||(r=I({},r));var c=t.z2EmphasisLift;r.z2=t.z2+(null!=c?c:Qs)}return r}function wl(t,e,n){if(n&&null==n.z2){n=I({},n);var r=t.z2SelectLift;n.z2=t.z2+(null!=r?r:tl)}return n}function _l(t,e,n){var r=E(t.currentStates,e)>=0,o=t.style.opacity,i=r?null:bl(t,["opacity"],e,{opacity:1});n=n||{};var a=n.style||{};return null==a.opacity&&(n=I({},n),a=I({opacity:r?o:.1*i.opacity},a),n.style=a),n}function Sl(t,e){var n=this.states[t];if(this.style){if("emphasis"===t)return xl(this,t,e,n);if("blur"===t)return _l(this,t,n);if("select"===t)return wl(this,t,n)}return n}function Cl(t){t.stateProxy=Sl;var e=t.getTextContent(),n=t.getTextGuideLine();e&&(e.stateProxy=Sl),n&&(n.stateProxy=Sl)}function Ml(t,e){!El(t,e)&&!t.__highByOuter&&vl(t,cl)}function Tl(t,e){!El(t,e)&&!t.__highByOuter&&vl(t,fl)}function kl(t,e){t.__highByOuter|=1<<(e||0),vl(t,cl)}function Dl(t,e){!(t.__highByOuter&=~(1<<(e||0)))&&vl(t,fl)}function Al(t){vl(t,dl)}function Il(t){vl(t,hl)}function Ol(t){vl(t,pl)}function Ll(t){vl(t,gl)}function El(t,e){return t.__highDownSilentOnTouch&&e.zrByTouch}function Nl(t){var e=t.getModel();e.eachComponent(function(e,n){var r="series"===e?t.getViewOfSeriesModel(n):t.getViewOfComponentModel(n);r.group.traverse(function(t){hl(t)})})}function Rl(t,e,n,r){var o=r.getModel();function i(t,e){for(var n=0;n<e.length;n++){var r=t.getItemGraphicEl(e[n]);r&&Il(r)}}if(n=n||"coordinateSystem",null!=t&&e&&"none"!==e){var a=o.getSeriesByIndex(t),u=a.coordinateSystem;u&&u.master&&(u=u.master);var s=[];o.eachSeries(function(t){var o=a===t,l=t.coordinateSystem;l&&l.master&&(l=l.master);var c=l&&u?l===u:o;if(!("series"===n&&!o||"coordinateSystem"===n&&!c||"series"===e&&o)){var f=r.getViewOfSeriesModel(t);if(f.group.traverse(function(t){dl(t)}),P(e))i(t.getData(),e);else if(K(e))for(var d=W(e),h=0;h<d.length;h++)i(t.getData(d[h]),e[d[h]]);s.push(t)}}),o.eachComponent(function(t,e){if("series"!==t){var n=r.getViewOfComponentModel(e);n&&n.blurSeries&&n.blurSeries(s,o)}})}}function Pl(t,e,n){if(null!=t&&null!=e){var r=n.getModel().getComponent(t,e);if(r){var o=n.getViewOfComponentModel(r);o&&o.focusBlurEnabled&&o.group.traverse(function(t){dl(t)})}}}function zl(t,e,n){var r=t.seriesIndex,o=t.getData(e.dataType),i=ki(o,e);i=(X(i)?i[0]:i)||0;var a=o.getItemGraphicEl(i);if(!a){var u=o.count(),s=0;while(!a&&s<u)a=o.getItemGraphicEl(s++)}if(a){var l=Gs(a);Rl(r,l.focus,l.blurScope,n)}else{var c=t.get(["emphasis","focus"]),f=t.get(["emphasis","blurScope"]);null!=c&&Rl(r,c,f,n)}}function Bl(t,e,n,r){var o={focusSelf:!1,dispatchers:null};if(null==t||"series"===t||null==e||null==n)return o;var i=r.getModel().getComponent(t,e);if(!i)return o;var a=r.getViewOfComponentModel(i);if(!a||!a.findHighDownDispatchers)return o;for(var u,s=a.findHighDownDispatchers(n),l=0;l<s.length;l++)if("self"===Gs(s[l]).focus){u=!0;break}return{focusSelf:u,dispatchers:s}}function Vl(t,e,n){var r=Gs(t),o=Bl(r.componentMainType,r.componentIndex,r.componentHighDownName,n),i=o.dispatchers,a=o.focusSelf;i?(a&&Pl(r.componentMainType,r.componentIndex,n),z(i,function(t){return Ml(t,e)})):(Rl(r.seriesIndex,r.focus,r.blurScope,n),"self"===r.focus&&Pl(r.componentMainType,r.componentIndex,n),Ml(t,e))}function Hl(t,e,n){Nl(n);var r=Gs(t),o=Bl(r.componentMainType,r.componentIndex,r.componentHighDownName,n).dispatchers;o?z(o,function(t){return Tl(t,e)}):Tl(t,e)}function Fl(t,e,n){if(Ql(e)){var r=e.dataType,o=t.getData(r),i=ki(o,e);X(i)||(i=[i]),t[e.type===il?"toggleSelect":e.type===rl?"select":"unselect"](i,r)}}function Wl(t){var e=t.getAllData();z(e,function(e){var n=e.data,r=e.type;n.eachItemGraphicEl(function(e,n){t.isSelected(n,r)?Ol(e):Ll(e)})})}function Ul(t){var e=[];return t.eachSeries(function(t){var n=t.getAllData();z(n,function(n){n.data;var r=n.type,o=t.getSelectedDataIndices();if(o.length>0){var i={dataIndex:o,seriesIndex:t.seriesIndex};null!=r&&(i.dataType=r),e.push(i)}})}),e}function Gl(t,e,n){Zl(t,!0),vl(t,Cl),jl(t,e,n)}function jl(t,e,n){var r=Gs(t);null!=e?(r.focus=e,r.blurScope=n):r.focus&&(r.focus=null)}var Xl=["emphasis","blur","select"],Yl={itemStyle:"getItemStyle",lineStyle:"getLineStyle",areaStyle:"getAreaStyle"};function ql(t,e,n,r){n=n||"itemStyle";for(var o=0;o<Xl.length;o++){var i=Xl[o],a=e.getModel([i,n]),u=t.ensureState(i);u.style=r?r(a):a[Yl[n]]()}}function Zl(t,e){var n=!1===e,r=t;t.highDownSilentOnTouch&&(r.__highDownSilentOnTouch=t.highDownSilentOnTouch),n&&!r.__highDownDispatcher||(r.__highByOuter=r.__highByOuter||0,r.__highDownDispatcher=!n)}function $l(t){return!(!t||!t.__highDownDispatcher)}function Kl(t,e,n){var r=Gs(t);r.componentMainType=e.mainType,r.componentIndex=e.componentIndex,r.componentHighDownName=n}function Jl(t){var e=Xs[t];return null==e&&js<=32&&(e=Xs[t]=js++),e}function Ql(t){var e=t.type;return e===rl||e===ol||e===il}function tc(t){var e=t.type;return e===el||e===nl}function ec(t){var e=Ys(t);e.normalFill=t.style.fill,e.normalStroke=t.style.stroke;var n=t.states.select||{};e.selectFill=n.style&&n.style.fill||null,e.selectStroke=n.style&&n.style.stroke||null}var nc=Hu.CMD,rc=[[],[],[]],oc=Math.sqrt,ic=Math.atan2;function ac(t,e){var n,r,o,i,a,u,s=t.data,l=t.len(),c=nc.M,f=nc.C,d=nc.L,h=nc.R,p=nc.A,g=nc.Q;for(o=0,i=0;o<l;){switch(n=s[o++],i=o,r=0,n){case c:r=1;break;case d:r=1;break;case f:r=3;break;case g:r=2;break;case p:var m=e[4],v=e[5],y=oc(e[0]*e[0]+e[1]*e[1]),b=oc(e[2]*e[2]+e[3]*e[3]),x=ic(-e[1]/b,e[0]/y);s[o]*=y,s[o++]+=m,s[o]*=b,s[o++]+=v,s[o++]*=y,s[o++]*=b,s[o++]+=x,s[o++]+=x,o+=2,i=o;break;case h:u[0]=s[o++],u[1]=s[o++],zt(u,u,e),s[i++]=u[0],s[i++]=u[1],u[0]+=s[o++],u[1]+=s[o++],zt(u,u,e),s[i++]=u[0],s[i++]=u[1]}for(a=0;a<r;a++){var w=rc[a];w[0]=s[o++],w[1]=s[o++],zt(w,w,e),s[i++]=w[0],s[i++]=w[1]}}t.increaseVersion()}var uc=Math.sqrt,sc=Math.sin,lc=Math.cos,cc=Math.PI;function fc(t){return Math.sqrt(t[0]*t[0]+t[1]*t[1])}function dc(t,e){return(t[0]*e[0]+t[1]*e[1])/(fc(t)*fc(e))}function hc(t,e){return(t[0]*e[1]<t[1]*e[0]?-1:1)*Math.acos(dc(t,e))}function pc(t,e,n,r,o,i,a,u,s,l,c){var f=s*(cc/180),d=lc(f)*(t-n)/2+sc(f)*(e-r)/2,h=-1*sc(f)*(t-n)/2+lc(f)*(e-r)/2,p=d*d/(a*a)+h*h/(u*u);p>1&&(a*=uc(p),u*=uc(p));var g=(o===i?-1:1)*uc((a*a*(u*u)-a*a*(h*h)-u*u*(d*d))/(a*a*(h*h)+u*u*(d*d)))||0,m=g*a*h/u,v=g*-u*d/a,y=(t+n)/2+lc(f)*m-sc(f)*v,b=(e+r)/2+sc(f)*m+lc(f)*v,x=hc([1,0],[(d-m)/a,(h-v)/u]),w=[(d-m)/a,(h-v)/u],_=[(-1*d-m)/a,(-1*h-v)/u],S=hc(w,_);if(dc(w,_)<=-1&&(S=cc),dc(w,_)>=1&&(S=0),S<0){var C=Math.round(S/cc*1e6)/1e6;S=2*cc+C%2*cc}c.addData(l,y,b,a,u,x,S,f,i)}var gc=/([mlvhzcqtsa])([^mlvhzcqtsa]*)/gi,mc=/-?([0-9]*\.)?[0-9]+([eE]-?[0-9]+)?/g;function vc(t){var e=new Hu;if(!t)return e;var n,r=0,o=0,i=r,a=o,u=Hu.CMD,s=t.match(gc);if(!s)return e;for(var l=0;l<s.length;l++){for(var c=s[l],f=c.charAt(0),d=void 0,h=c.match(mc)||[],p=h.length,g=0;g<p;g++)h[g]=parseFloat(h[g]);var m=0;while(m<p){var v=void 0,y=void 0,b=void 0,x=void 0,w=void 0,_=void 0,S=void 0,C=r,M=o,T=void 0,k=void 0;switch(f){case"l":r+=h[m++],o+=h[m++],d=u.L,e.addData(d,r,o);break;case"L":r=h[m++],o=h[m++],d=u.L,e.addData(d,r,o);break;case"m":r+=h[m++],o+=h[m++],d=u.M,e.addData(d,r,o),i=r,a=o,f="l";break;case"M":r=h[m++],o=h[m++],d=u.M,e.addData(d,r,o),i=r,a=o,f="L";break;case"h":r+=h[m++],d=u.L,e.addData(d,r,o);break;case"H":r=h[m++],d=u.L,e.addData(d,r,o);break;case"v":o+=h[m++],d=u.L,e.addData(d,r,o);break;case"V":o=h[m++],d=u.L,e.addData(d,r,o);break;case"C":d=u.C,e.addData(d,h[m++],h[m++],h[m++],h[m++],h[m++],h[m++]),r=h[m-2],o=h[m-1];break;case"c":d=u.C,e.addData(d,h[m++]+r,h[m++]+o,h[m++]+r,h[m++]+o,h[m++]+r,h[m++]+o),r+=h[m-2],o+=h[m-1];break;case"S":v=r,y=o,T=e.len(),k=e.data,n===u.C&&(v+=r-k[T-4],y+=o-k[T-3]),d=u.C,C=h[m++],M=h[m++],r=h[m++],o=h[m++],e.addData(d,v,y,C,M,r,o);break;case"s":v=r,y=o,T=e.len(),k=e.data,n===u.C&&(v+=r-k[T-4],y+=o-k[T-3]),d=u.C,C=r+h[m++],M=o+h[m++],r+=h[m++],o+=h[m++],e.addData(d,v,y,C,M,r,o);break;case"Q":C=h[m++],M=h[m++],r=h[m++],o=h[m++],d=u.Q,e.addData(d,C,M,r,o);break;case"q":C=h[m++]+r,M=h[m++]+o,r+=h[m++],o+=h[m++],d=u.Q,e.addData(d,C,M,r,o);break;case"T":v=r,y=o,T=e.len(),k=e.data,n===u.Q&&(v+=r-k[T-4],y+=o-k[T-3]),r=h[m++],o=h[m++],d=u.Q,e.addData(d,v,y,r,o);break;case"t":v=r,y=o,T=e.len(),k=e.data,n===u.Q&&(v+=r-k[T-4],y+=o-k[T-3]),r+=h[m++],o+=h[m++],d=u.Q,e.addData(d,v,y,r,o);break;case"A":b=h[m++],x=h[m++],w=h[m++],_=h[m++],S=h[m++],C=r,M=o,r=h[m++],o=h[m++],d=u.A,pc(C,M,r,o,_,S,b,x,w,d,e);break;case"a":b=h[m++],x=h[m++],w=h[m++],_=h[m++],S=h[m++],C=r,M=o,r+=h[m++],o+=h[m++],d=u.A,pc(C,M,r,o,_,S,b,x,w,d,e);break}}"z"!==f&&"Z"!==f||(d=u.Z,e.addData(d),r=i,o=a),n=d}return e.toStatic(),e}var yc=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.applyTransform=function(t){},e}(ds);function bc(t){return null!=t.setData}function xc(t,e){var n=vc(t),r=I({},e);return r.buildPath=function(t){if(bc(t)){t.setData(n.data);var e=t.getContext();e&&t.rebuildPath(e,1)}else{e=t;n.rebuildPath(e,1)}},r.applyTransform=function(t){ac(n,t),this.dirtyShape()},r}function wc(t,e){return new yc(xc(t,e))}function _c(t,e){var n=xc(t,e),r=function(t){function e(e){var r=t.call(this,e)||this;return r.applyTransform=n.applyTransform,r.buildPath=n.buildPath,r}return i(e,t),e}(yc);return r}function Sc(t,e){for(var n=[],r=t.length,o=0;o<r;o++){var i=t[o];i.path||i.createPathProxy(),i.shapeChanged()&&i.buildPath(i.path,i.shape,!0),n.push(i.path)}var a=new ds(e);return a.createPathProxy(),a.buildPath=function(t){if(bc(t)){t.appendPath(n);var e=t.getContext();e&&t.rebuildPath(e,1)}},a}var Cc=function(){function t(){this.cx=0,this.cy=0,this.r=0}return t}(),Mc=function(t){function e(e){return t.call(this,e)||this}return i(e,t),e.prototype.getDefaultShape=function(){return new Cc},e.prototype.buildPath=function(t,e,n){n&&t.moveTo(e.cx+e.r,e.cy),t.arc(e.cx,e.cy,e.r,0,2*Math.PI)},e}(ds);Mc.prototype.type="circle";var Tc=Mc,kc=function(){function t(){this.cx=0,this.cy=0,this.rx=0,this.ry=0}return t}(),Dc=function(t){function e(e){return t.call(this,e)||this}return i(e,t),e.prototype.getDefaultShape=function(){return new kc},e.prototype.buildPath=function(t,e){var n=.5522848,r=e.cx,o=e.cy,i=e.rx,a=e.ry,u=i*n,s=a*n;t.moveTo(r-i,o),t.bezierCurveTo(r-i,o-s,r-u,o-a,r,o-a),t.bezierCurveTo(r+u,o-a,r+i,o-s,r+i,o),t.bezierCurveTo(r+i,o+s,r+u,o+a,r,o+a),t.bezierCurveTo(r-u,o+a,r-i,o+s,r-i,o),t.closePath()},e}(ds);Dc.prototype.type="ellipse";var Ac=Dc,Ic=Math.PI,Oc=2*Ic,Lc=Math.sin,Ec=Math.cos,Nc=Math.acos,Rc=Math.atan2,Pc=Math.abs,zc=Math.sqrt,Bc=Math.max,Vc=Math.min,Hc=1e-4;function Fc(t,e,n,r,o,i,a,u){var s=n-t,l=r-e,c=a-o,f=u-i,d=f*s-c*l;if(!(d*d<Hc))return d=(c*(e-i)-f*(t-o))/d,[t+d*s,e+d*l]}function Wc(t,e,n,r,o,i,a){var u=t-n,s=e-r,l=(a?i:-i)/zc(u*u+s*s),c=l*s,f=-l*u,d=t+c,h=e+f,p=n+c,g=r+f,m=(d+p)/2,v=(h+g)/2,y=p-d,b=g-h,x=y*y+b*b,w=o-i,_=d*g-p*h,S=(b<0?-1:1)*zc(Bc(0,w*w*x-_*_)),C=(_*b-y*S)/x,M=(-_*y-b*S)/x,T=(_*b+y*S)/x,k=(-_*y+b*S)/x,D=C-m,A=M-v,I=T-m,O=k-v;return D*D+A*A>I*I+O*O&&(C=T,M=k),{cx:C,cy:M,x01:-c,y01:-f,x11:C*(o/w-1),y11:M*(o/w-1)}}function Uc(t,e){var n=Bc(e.r,0),r=Bc(e.r0||0,0),o=n>0,i=r>0;if(o||i){if(o||(n=r,r=0),r>n){var a=n;n=r,r=a}var u,s=!!e.clockwise,l=e.startAngle,c=e.endAngle;if(l===c)u=0;else{var f=[l,c];Bu(f,!s),u=Pc(f[0]-f[1])}var d=e.cx,h=e.cy,p=e.cornerRadius||0,g=e.innerCornerRadius||0;if(n>Hc)if(u>Oc-Hc)t.moveTo(d+n*Ec(l),h+n*Lc(l)),t.arc(d,h,n,l,c,!s),r>Hc&&(t.moveTo(d+r*Ec(c),h+r*Lc(c)),t.arc(d,h,r,c,l,s));else{var m=Pc(n-r)/2,v=Vc(m,p),y=Vc(m,g),b=y,x=v,w=n*Ec(l),_=n*Lc(l),S=r*Ec(c),C=r*Lc(c),M=void 0,T=void 0,k=void 0,D=void 0;if((v>Hc||y>Hc)&&(M=n*Ec(c),T=n*Lc(c),k=r*Ec(l),D=r*Lc(l),u<Ic)){var A=Fc(w,_,k,D,M,T,S,C);if(A){var I=w-A[0],O=_-A[1],L=M-A[0],E=T-A[1],N=1/Lc(Nc((I*L+O*E)/(zc(I*I+O*O)*zc(L*L+E*E)))/2),R=zc(A[0]*A[0]+A[1]*A[1]);b=Vc(y,(r-R)/(N-1)),x=Vc(v,(n-R)/(N+1))}}if(u>Hc)if(x>Hc){var P=Wc(k,D,w,_,n,x,s),z=Wc(M,T,S,C,n,x,s);t.moveTo(d+P.cx+P.x01,h+P.cy+P.y01),x<v?t.arc(d+P.cx,h+P.cy,x,Rc(P.y01,P.x01),Rc(z.y01,z.x01),!s):(t.arc(d+P.cx,h+P.cy,x,Rc(P.y01,P.x01),Rc(P.y11,P.x11),!s),t.arc(d,h,n,Rc(P.cy+P.y11,P.cx+P.x11),Rc(z.cy+z.y11,z.cx+z.x11),!s),t.arc(d+z.cx,h+z.cy,x,Rc(z.y11,z.x11),Rc(z.y01,z.x01),!s))}else t.moveTo(d+w,h+_),t.arc(d,h,n,l,c,!s);else t.moveTo(d+w,h+_);if(r>Hc&&u>Hc)if(b>Hc){P=Wc(S,C,M,T,r,-b,s),z=Wc(w,_,k,D,r,-b,s);t.lineTo(d+P.cx+P.x01,h+P.cy+P.y01),b<y?t.arc(d+P.cx,h+P.cy,b,Rc(P.y01,P.x01),Rc(z.y01,z.x01),!s):(t.arc(d+P.cx,h+P.cy,b,Rc(P.y01,P.x01),Rc(P.y11,P.x11),!s),t.arc(d,h,r,Rc(P.cy+P.y11,P.cx+P.x11),Rc(z.cy+z.y11,z.cx+z.x11),s),t.arc(d+z.cx,h+z.cy,b,Rc(z.y11,z.x11),Rc(z.y01,z.x01),!s))}else t.lineTo(d+S,h+C),t.arc(d,h,r,c,l,s);else t.lineTo(d+S,h+C)}else t.moveTo(d,h);t.closePath()}}var Gc=function(){function t(){this.cx=0,this.cy=0,this.r0=0,this.r=0,this.startAngle=0,this.endAngle=2*Math.PI,this.clockwise=!0,this.cornerRadius=0,this.innerCornerRadius=0}return t}(),jc=function(t){function e(e){return t.call(this,e)||this}return i(e,t),e.prototype.getDefaultShape=function(){return new Gc},e.prototype.buildPath=function(t,e){Uc(t,e)},e.prototype.isZeroArea=function(){return this.shape.startAngle===this.shape.endAngle||this.shape.r===this.shape.r0},e}(ds);jc.prototype.type="sector";var Xc=jc,Yc=function(){function t(){this.cx=0,this.cy=0,this.r=0,this.r0=0}return t}(),qc=function(t){function e(e){return t.call(this,e)||this}return i(e,t),e.prototype.getDefaultShape=function(){return new Yc},e.prototype.buildPath=function(t,e){var n=e.cx,r=e.cy,o=2*Math.PI;t.moveTo(n+e.r,r),t.arc(n,r,e.r,0,o,!1),t.moveTo(n+e.r0,r),t.arc(n,r,e.r0,0,o,!0)},e}(ds);qc.prototype.type="ring";var Zc=qc;function $c(t,e,n,r,o,i,a){var u=.5*(n-t),s=.5*(r-e);return(2*(e-n)+u+s)*a+(-3*(e-n)-2*u-s)*i+u*o+e}function Kc(t,e){for(var n=t.length,r=[],o=0,i=1;i<n;i++)o+=Lt(t[i-1],t[i]);var a=o/2;a=a<n?n:a;for(i=0;i<a;i++){var u=i/(a-1)*(e?n:n-1),s=Math.floor(u),l=u-s,c=void 0,f=t[s%n],d=void 0,h=void 0;e?(c=t[(s-1+n)%n],d=t[(s+1)%n],h=t[(s+2)%n]):(c=t[0===s?s:s-1],d=t[s>n-2?n-1:s+1],h=t[s>n-3?n-1:s+2]);var p=l*l,g=l*p;r.push([$c(c[0],f[0],d[0],h[0],l,p,g),$c(c[1],f[1],d[1],h[1],l,p,g)])}return r}function Jc(t,e,n,r){var o,i,a,u,s=[],l=[],c=[],f=[];if(r){a=[1/0,1/0],u=[-1/0,-1/0];for(var d=0,h=t.length;d<h;d++)Bt(a,a,t[d]),Vt(u,u,t[d]);Bt(a,a,r[0]),Vt(u,u,r[1])}for(d=0,h=t.length;d<h;d++){var p=t[d];if(n)o=t[d?d-1:h-1],i=t[(d+1)%h];else{if(0===d||d===h-1){s.push(St(t[d]));continue}o=t[d-1],i=t[d+1]}kt(l,i,o),It(l,l,e);var g=Lt(p,o),m=Lt(p,i),v=g+m;0!==v&&(g/=v,m/=v),It(c,l,-g),It(f,l,m);var y=Mt([],p,c),b=Mt([],p,f);r&&(Vt(y,y,a),Bt(y,y,u),Vt(b,b,a),Bt(b,b,u)),s.push(y),s.push(b)}return n&&s.push(s.shift()),s}function Qc(t,e,n){var r=e.smooth,o=e.points;if(o&&o.length>=2){if(r&&"spline"!==r){var i=Jc(o,r,n,e.smoothConstraint);t.moveTo(o[0][0],o[0][1]);for(var a=o.length,u=0;u<(n?a:a-1);u++){var s=i[2*u],l=i[2*u+1],c=o[(u+1)%a];t.bezierCurveTo(s[0],s[1],l[0],l[1],c[0],c[1])}}else{"spline"===r&&(o=Kc(o,n)),t.moveTo(o[0][0],o[0][1]);u=1;for(var f=o.length;u<f;u++)t.lineTo(o[u][0],o[u][1])}n&&t.closePath()}}var tf=function(){function t(){this.points=null,this.smooth=0,this.smoothConstraint=null}return t}(),ef=function(t){function e(e){return t.call(this,e)||this}return i(e,t),e.prototype.getDefaultShape=function(){return new tf},e.prototype.buildPath=function(t,e){Qc(t,e,!0)},e}(ds);ef.prototype.type="polygon";var nf=ef,rf=function(){function t(){this.points=null,this.percent=1,this.smooth=0,this.smoothConstraint=null}return t}(),of=function(t){function e(e){return t.call(this,e)||this}return i(e,t),e.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},e.prototype.getDefaultShape=function(){return new rf},e.prototype.buildPath=function(t,e){Qc(t,e,!1)},e}(ds);of.prototype.type="polyline";var af=of,uf={},sf=function(){function t(){this.x1=0,this.y1=0,this.x2=0,this.y2=0,this.percent=1}return t}(),lf=function(t){function e(e){return t.call(this,e)||this}return i(e,t),e.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},e.prototype.getDefaultShape=function(){return new sf},e.prototype.buildPath=function(t,e){var n,r,o,i;if(this.subPixelOptimize){var a=Ss(uf,e,this.style);n=a.x1,r=a.y1,o=a.x2,i=a.y2}else n=e.x1,r=e.y1,o=e.x2,i=e.y2;var u=e.percent;0!==u&&(t.moveTo(n,r),u<1&&(o=n*(1-u)+o*u,i=r*(1-u)+i*u),t.lineTo(o,i))},e.prototype.pointAt=function(t){var e=this.shape;return[e.x1*(1-t)+e.x2*t,e.y1*(1-t)+e.y2*t]},e}(ds);lf.prototype.type="line";var cf=lf,ff=[],df=function(){function t(){this.x1=0,this.y1=0,this.x2=0,this.y2=0,this.cpx1=0,this.cpy1=0,this.percent=1}return t}();function hf(t,e,n){var r=t.cpx2,o=t.cpy2;return null===r||null===o?[(n?Xa:ja)(t.x1,t.cpx1,t.cpx2,t.x2,e),(n?Xa:ja)(t.y1,t.cpy1,t.cpy2,t.y2,e)]:[(n?Qa:Ja)(t.x1,t.cpx1,t.x2,e),(n?Qa:Ja)(t.y1,t.cpy1,t.y2,e)]}var pf=function(t){function e(e){return t.call(this,e)||this}return i(e,t),e.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},e.prototype.getDefaultShape=function(){return new df},e.prototype.buildPath=function(t,e){var n=e.x1,r=e.y1,o=e.x2,i=e.y2,a=e.cpx1,u=e.cpy1,s=e.cpx2,l=e.cpy2,c=e.percent;0!==c&&(t.moveTo(n,r),null==s||null==l?(c<1&&(nu(n,a,o,c,ff),a=ff[1],o=ff[2],nu(r,u,i,c,ff),u=ff[1],i=ff[2]),t.quadraticCurveTo(a,u,o,i)):(c<1&&(Za(n,a,s,o,c,ff),a=ff[1],s=ff[2],o=ff[3],Za(r,u,l,i,c,ff),u=ff[1],l=ff[2],i=ff[3]),t.bezierCurveTo(a,u,s,l,o,i)))},e.prototype.pointAt=function(t){return hf(this.shape,t,!1)},e.prototype.tangentAt=function(t){var e=hf(this.shape,t,!0);return Ot(e,e)},e}(ds);pf.prototype.type="bezier-curve";var gf=pf,mf=function(){function t(){this.cx=0,this.cy=0,this.r=0,this.startAngle=0,this.endAngle=2*Math.PI,this.clockwise=!0}return t}(),vf=function(t){function e(e){return t.call(this,e)||this}return i(e,t),e.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},e.prototype.getDefaultShape=function(){return new mf},e.prototype.buildPath=function(t,e){var n=e.cx,r=e.cy,o=Math.max(e.r,0),i=e.startAngle,a=e.endAngle,u=e.clockwise,s=Math.cos(i),l=Math.sin(i);t.moveTo(s*o+n,l*o+r),t.arc(n,r,o,i,a,!u)},e}(ds);vf.prototype.type="arc";var yf=vf,bf=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type="compound",e}return i(e,t),e.prototype._updatePathDirty=function(){for(var t=this.shape.paths,e=this.shapeChanged(),n=0;n<t.length;n++)e=e||t[n].shapeChanged();e&&this.dirtyShape()},e.prototype.beforeBrush=function(){this._updatePathDirty();for(var t=this.shape.paths||[],e=this.getGlobalScale(),n=0;n<t.length;n++)t[n].path||t[n].createPathProxy(),t[n].path.setScale(e[0],e[1],t[n].segmentIgnoreThreshold)},e.prototype.buildPath=function(t,e){for(var n=e.paths||[],r=0;r<n.length;r++)n[r].buildPath(t,n[r].shape,!0)},e.prototype.afterBrush=function(){for(var t=this.shape.paths||[],e=0;e<t.length;e++)t[e].pathUpdated()},e.prototype.getBoundingRect=function(){return this._updatePathDirty.call(this),ds.prototype.getBoundingRect.call(this)},e}(ds),xf=bf,wf=function(){function t(t){this.colorStops=t||[]}return t.prototype.addColorStop=function(t,e){this.colorStops.push({offset:t,color:e})},t}(),_f=wf,Sf=function(t){function e(e,n,r,o,i,a){var u=t.call(this,i)||this;return u.x=null==e?0:e,u.y=null==n?0:n,u.x2=null==r?1:r,u.y2=null==o?0:o,u.type="linear",u.global=a||!1,u}return i(e,t),e}(_f),Cf=Sf,Mf=function(t){function e(e,n,r,o,i){var a=t.call(this,o)||this;return a.x=null==e?.5:e,a.y=null==n?.5:n,a.r=null==r?.5:r,a.type="radial",a.global=i||!1,a}return i(e,t),e}(_f),Tf=Mf,kf=[0,0],Df=[0,0],Af=new Vr,If=new Vr,Of=function(){function t(t,e){this._corners=[],this._axes=[],this._origin=[0,0];for(var n=0;n<4;n++)this._corners[n]=new Vr;for(n=0;n<2;n++)this._axes[n]=new Vr;t&&this.fromBoundingRect(t,e)}return t.prototype.fromBoundingRect=function(t,e){var n=this._corners,r=this._axes,o=t.x,i=t.y,a=o+t.width,u=i+t.height;if(n[0].set(o,i),n[1].set(a,i),n[2].set(a,u),n[3].set(o,u),e)for(var s=0;s<4;s++)n[s].transform(e);Vr.sub(r[0],n[1],n[0]),Vr.sub(r[1],n[3],n[0]),r[0].normalize(),r[1].normalize();for(s=0;s<2;s++)this._origin[s]=r[s].dot(n[0])},t.prototype.intersect=function(t,e){var n=!0,r=!e;return Af.set(1/0,1/0),If.set(0,0),!this._intersectCheckOneSide(this,t,Af,If,r,1)&&(n=!1,r)?n:!this._intersectCheckOneSide(t,this,Af,If,r,-1)&&(n=!1,r)?n:(r||Vr.copy(e,n?Af:If),n)},t.prototype._intersectCheckOneSide=function(t,e,n,r,o,i){for(var a=!0,u=0;u<2;u++){var s=this._axes[u];if(this._getProjMinMaxOnAxis(u,t._corners,kf),this._getProjMinMaxOnAxis(u,e._corners,Df),kf[1]<Df[0]||kf[0]>Df[1]){if(a=!1,o)return a;var l=Math.abs(Df[0]-kf[1]),c=Math.abs(kf[0]-Df[1]);Math.min(l,c)>r.len()&&(l<c?Vr.scale(r,s,-l*i):Vr.scale(r,s,c*i))}else if(n){l=Math.abs(Df[0]-kf[1]),c=Math.abs(kf[0]-Df[1]);Math.min(l,c)<n.len()&&(l<c?Vr.scale(n,s,l*i):Vr.scale(n,s,-c*i))}}return a},t.prototype._getProjMinMaxOnAxis=function(t,e,n){for(var r=this._axes[t],o=this._origin,i=e[0].dot(r)+o[t],a=i,u=i,s=1;s<e.length;s++){var l=e[s].dot(r)+o[t];a=Math.min(l,a),u=Math.max(l,u)}n[0]=a,n[1]=u},t}(),Lf=Of,Ef=[],Nf=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.notClear=!0,e.incremental=!0,e._displayables=[],e._temporaryDisplayables=[],e._cursor=0,e}return i(e,t),e.prototype.traverse=function(t,e){t.call(e,this)},e.prototype.useStyle=function(){this.style={}},e.prototype.getCursor=function(){return this._cursor},e.prototype.innerAfterBrush=function(){this._cursor=this._displayables.length},e.prototype.clearDisplaybles=function(){this._displayables=[],this._temporaryDisplayables=[],this._cursor=0,this.markRedraw(),this.notClear=!1},e.prototype.clearTemporalDisplayables=function(){this._temporaryDisplayables=[]},e.prototype.addDisplayable=function(t,e){e?this._temporaryDisplayables.push(t):this._displayables.push(t),this.markRedraw()},e.prototype.addDisplayables=function(t,e){e=e||!1;for(var n=0;n<t.length;n++)this.addDisplayable(t[n],e)},e.prototype.getDisplayables=function(){return this._displayables},e.prototype.getTemporalDisplayables=function(){return this._temporaryDisplayables},e.prototype.eachPendingDisplayable=function(t){for(var e=this._cursor;e<this._displayables.length;e++)t&&t(this._displayables[e]);for(e=0;e<this._temporaryDisplayables.length;e++)t&&t(this._temporaryDisplayables[e])},e.prototype.update=function(){this.updateTransform();for(var t=this._cursor;t<this._displayables.length;t++){var e=this._displayables[t];e.parent=this,e.update(),e.parent=null}for(t=0;t<this._temporaryDisplayables.length;t++){e=this._temporaryDisplayables[t];e.parent=this,e.update(),e.parent=null}},e.prototype.getBoundingRect=function(){if(!this._rect){for(var t=new Zr(1/0,1/0,-1/0,-1/0),e=0;e<this._displayables.length;e++){var n=this._displayables[e],r=n.getBoundingRect().clone();n.needLocalTransform()&&r.applyTransform(n.getLocalTransform(Ef)),t.union(r)}this._rect=t}return this._rect},e.prototype.contain=function(t,e){var n=this.transformCoordToLocal(t,e),r=this.getBoundingRect();if(r.contain(n[0],n[1]))for(var o=0;o<this._displayables.length;o++){var i=this._displayables[o];if(i.contain(t,e))return!0}return!1},e}(Ea),Rf=Nf,Pf=Math.max,zf=Math.min,Bf={};function Vf(t){return ds.extend(t)}var Hf=_c;function Ff(t,e){return Hf(t,e)}function Wf(t,e){Bf[t]=e}function Uf(t){if(Bf.hasOwnProperty(t))return Bf[t]}function Gf(t,e,n,r){var o=wc(t,e);return n&&("center"===r&&(n=Xf(n,o.getBoundingRect())),qf(o,n)),o}function jf(t,e,n){var r=new xs({style:{image:t,x:e.x,y:e.y,width:e.width,height:e.height},onload:function(t){if("center"===n){var o={width:t.width,height:t.height};r.setStyle(Xf(e,o))}}});return r}function Xf(t,e){var n,r=e.width/e.height,o=t.height*r;o<=t.width?n=t.height:(o=t.width,n=o/r);var i=t.x+t.width/2,a=t.y+t.height/2;return{x:i-o/2,y:a-n/2,width:o,height:n}}var Yf=Sc;function qf(t,e){if(t.applyTransform){var n=t.getBoundingRect(),r=n.calculateTransform(e);t.applyTransform(r)}}function Zf(t){return Ss(t.shape,t.shape,t.style),t}function $f(t){return Cs(t.shape,t.shape,t.style),t}var Kf=Ms;function Jf(t,e,n,r,o,i,a){var u,s=!1;"function"===typeof o?(a=i,i=o,o=null):K(o)&&(i=o.cb,a=o.during,s=o.isFrom,u=o.removeOpt,o=o.dataIndex);var l,c="update"===t,f="remove"===t;if(r&&r.ecModel){var d=r.ecModel.getUpdatePayload();l=d&&d.animation}var h=r&&r.isAnimationEnabled();if(f||e.stopAnimation("remove"),h){var p=void 0,g=void 0,m=void 0;l?(p=l.duration||0,g=l.easing||"cubicOut",m=l.delay||0):f?(u=u||{},p=at(u.duration,200),g=at(u.easing,"cubicOut"),m=0):(p=r.getShallow(c?"animationDurationUpdate":"animationDuration"),g=r.getShallow(c?"animationEasingUpdate":"animationEasing"),m=r.getShallow(c?"animationDelayUpdate":"animationDelay")),"function"===typeof m&&(m=m(o,r.getAnimationDelayParams?r.getAnimationDelayParams(e,o):null)),"function"===typeof p&&(p=p(o)),p>0?s?e.animateFrom(n,{duration:p,delay:m||0,easing:g,done:i,force:!!i||!!a,scope:t,during:a}):e.animateTo(n,{duration:p,delay:m||0,easing:g,done:i,force:!!i||!!a,setToFinal:!0,scope:t,during:a}):(e.stopAnimation(),!s&&e.attr(n),i&&i())}else e.stopAnimation(),!s&&e.attr(n),a&&a(1),i&&i()}function Qf(t,e,n,r,o,i){Jf("update",t,e,n,r,o,i)}function td(t,e,n,r,o,i){Jf("init",t,e,n,r,o,i)}function ed(t,e,n,r,o,i){od(t)||Jf("remove",t,e,n,r,o,i)}function nd(t,e,n,r){t.removeTextContent(),t.removeTextGuideLine(),ed(t,{style:{opacity:0}},e,n,r)}function rd(t,e,n){function r(){t.parent&&t.parent.remove(t)}t.isGroup?t.traverse(function(t){t.isGroup||nd(t,e,n,r)}):nd(t,e,n,r)}function od(t){if(!t.__zr)return!0;for(var e=0;e<t.animators.length;e++){var n=t.animators[e];if("remove"===n.scope)return!0}return!1}function id(t,e){var n=br([]);while(t&&t!==e)wr(n,t.getLocalTransform(),n),t=t.parent;return n}function ad(t,e,n){return e&&!P(e)&&(e=zr.getLocalTransform(e)),n&&(e=Mr([],e)),zt([],t,e)}function ud(t,e,n){var r=0===e[4]||0===e[5]||0===e[0]?1:Math.abs(2*e[4]/e[0]),o=0===e[4]||0===e[5]||0===e[2]?1:Math.abs(2*e[4]/e[2]),i=["left"===t?-r:"right"===t?r:0,"top"===t?-o:"bottom"===t?o:0];return i=ad(i,e,n),Math.abs(i[0])>Math.abs(i[1])?i[0]>0?"right":"left":i[1]>0?"bottom":"top"}function sd(t){return!t.isGroup}function ld(t){return null!=t.shape}function cd(t,e,n){if(t&&e){var r=o(t);e.traverse(function(t){if(sd(t)&&t.anid){var e=r[t.anid];if(e){var o=i(t);t.attr(i(e)),Qf(t,o,n,Gs(t).dataIndex)}}})}function o(t){var e={};return t.traverse(function(t){sd(t)&&t.anid&&(e[t.anid]=t)}),e}function i(t){var e={x:t.x,y:t.y,rotation:t.rotation};return ld(t)&&(e.shape=I({},t.shape)),e}}function fd(t,e){return B(t,function(t){var n=t[0];n=Pf(n,e.x),n=zf(n,e.x+e.width);var r=t[1];return r=Pf(r,e.y),r=zf(r,e.y+e.height),[n,r]})}function dd(t,e){var n=Pf(t.x,e.x),r=zf(t.x+t.width,e.x+e.width),o=Pf(t.y,e.y),i=zf(t.y+t.height,e.y+e.height);if(r>=n&&i>=o)return{x:n,y:o,width:r-n,height:i-o}}function hd(t,e,n){var r=I({rectHover:!0},e),o=r.style={strokeNoScale:!0};if(n=n||{x:-1,y:-1,width:2,height:2},t)return 0===t.indexOf("image://")?(o.image=t.slice(8),O(o,n),new xs(r)):Gf(t.replace("path://",""),r,n,"center")}function pd(t,e,n,r,o){for(var i=0,a=o[o.length-1];i<o.length;i++){var u=o[i];if(gd(t,e,n,r,u[0],u[1],a[0],a[1]))return!0;a=u}}function gd(t,e,n,r,o,i,a,u){var s=n-t,l=r-e,c=a-o,f=u-i,d=md(c,f,s,l);if(vd(d))return!1;var h=t-o,p=e-i,g=md(h,p,s,l)/d;if(g<0||g>1)return!1;var m=md(h,p,c,f)/d;return!(m<0||m>1)}function md(t,e,n,r){return t*r-n*e}function vd(t){return t<=1e-6&&t>=-1e-6}function yd(t){var e=t.itemTooltipOption,n=t.componentModel,r=t.itemName,o=q(e)?{formatter:e}:e,i=n.mainType,a=n.componentIndex,u={componentType:i,name:r,$vars:["name"]};u[i+"Index"]=a;var s=t.formatterParamsExtra;s&&z(W(s),function(t){bt(u,t)||(u[t]=s[t],u.$vars.push(t))});var l=Gs(t.el);l.componentMainType=i,l.componentIndex=a,l.tooltipConfig={name:r,option:O({content:r,formatterParams:u},o)}}Wf("circle",Tc),Wf("ellipse",Ac),Wf("sector",Xc),Wf("ring",Zc),Wf("polygon",nf),Wf("polyline",af),Wf("rect",As),Wf("line",cf),Wf("bezierCurve",gf),Wf("arc",yf);var bd={};function xd(t,e){for(var n=0;n<Ks.length;n++){var r=Ks[n],o=e[r],i=t.ensureState(r);i.style=i.style||{},i.style.text=o}var a=t.currentStates.slice();t.clearStates(!0),t.setStyle({text:e.normal}),t.useStates(a,!0)}function wd(t,e,n){var r,o=t.labelFetcher,i=t.labelDataIndex,a=t.labelDimIndex,u=e.normal;o&&(r=o.getFormattedLabel(i,"normal",null,a,u&&u.get("formatter"),null!=n?{interpolatedValue:n}:null)),null==r&&(r=Y(t.defaultText)?t.defaultText(i,t,n):t.defaultText);for(var s={normal:r},l=0;l<Ks.length;l++){var c=Ks[l],f=e[c];s[c]=at(o?o.getFormattedLabel(i,c,null,a,f&&f.get("formatter")):null,r)}return s}function _d(t,e,n,r){n=n||bd;for(var o=t instanceof Us,i=!1,a=0;a<Js.length;a++){var u=e[Js[a]];if(u&&u.getShallow("show")){i=!0;break}}var s=o?t:t.getTextContent();if(i){o||(s||(s=new Us,t.setTextContent(s)),t.stateProxy&&(s.stateProxy=t.stateProxy));var l=wd(n,e),c=e.normal,f=!!c.getShallow("show"),d=Cd(c,r&&r.normal,n,!1,!o);d.text=l.normal,o||t.setTextConfig(Md(c,n,!1));for(a=0;a<Ks.length;a++){var h=Ks[a];u=e[h];if(u){var p=s.ensureState(h),g=!!at(u.getShallow("show"),f);if(g!==f&&(p.ignore=!g),p.style=Cd(u,r&&r[h],n,!0,!o),p.style.text=l[h],!o){var m=t.ensureState(h);m.textConfig=Md(u,n,!0)}}}s.silent=!!c.getShallow("silent"),null!=s.style.x&&(d.x=s.style.x),null!=s.style.y&&(d.y=s.style.y),s.ignore=!f,s.useStyle(d),s.dirty(),n.enableTextSetter&&(Ed(s).setLabelText=function(t){var r=wd(n,e,t);xd(s,r)})}else s&&(s.ignore=!0);t.dirty()}function Sd(t,e){e=e||"label";for(var n={normal:t.getModel(e)},r=0;r<Ks.length;r++){var o=Ks[r];n[o]=t.getModel([o,e])}return n}function Cd(t,e,n,r,o){var i={};return Td(i,t,n,r,o),e&&I(i,e),i}function Md(t,e,n){e=e||{};var r,o={},i=t.getShallow("rotate"),a=at(t.getShallow("distance"),n?null:5),u=t.getShallow("offset");return r=t.getShallow("position")||(n?null:"inside"),"outside"===r&&(r=e.defaultOutsidePosition||"top"),null!=r&&(o.position=r),null!=u&&(o.offset=u),null!=i&&(i*=Math.PI/180,o.rotation=i),null!=a&&(o.distance=a),o.outsideFill="inherit"===t.get("color")?e.inheritColor||null:"auto",o}function Td(t,e,n,r,o){n=n||bd;var i,a=e.ecModel,u=a&&a.option.textStyle,s=kd(e);if(s)for(var l in i={},s)if(s.hasOwnProperty(l)){var c=e.getModel(["rich",l]);Od(i[l]={},c,u,n,r,o,!1,!0)}i&&(t.rich=i);var f=e.get("overflow");f&&(t.overflow=f);var d=e.get("minMargin");null!=d&&(t.margin=d),Od(t,e,u,n,r,o,!0,!1)}function kd(t){var e;while(t&&t!==t.ecModel){var n=(t.option||bd).rich;if(n){e=e||{};for(var r=W(n),o=0;o<r.length;o++){var i=r[o];e[i]=1}}t=t.parentModel}return e}var Dd=["fontStyle","fontWeight","fontSize","fontFamily","textShadowColor","textShadowBlur","textShadowOffsetX","textShadowOffsetY"],Ad=["align","lineHeight","width","height","tag","verticalAlign"],Id=["padding","borderWidth","borderRadius","borderDashOffset","backgroundColor","borderColor","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY"];function Od(t,e,n,r,o,i,a,u){n=!o&&n||bd;var s=r&&r.inheritColor,l=e.getShallow("color"),c=e.getShallow("textBorderColor"),f=at(e.getShallow("opacity"),n.opacity);"inherit"!==l&&"auto"!==l||(l=s||null),"inherit"!==c&&"auto"!==c||(c=s||null),i||(l=l||n.color,c=c||n.textBorderColor),null!=l&&(t.fill=l),null!=c&&(t.stroke=c);var d=at(e.getShallow("textBorderWidth"),n.textBorderWidth);null!=d&&(t.lineWidth=d);var h=at(e.getShallow("textBorderType"),n.textBorderType);null!=h&&(t.lineDash=h);var p=at(e.getShallow("textBorderDashOffset"),n.textBorderDashOffset);null!=p&&(t.lineDashOffset=p),o||null!=f||u||(f=r&&r.defaultOpacity),null!=f&&(t.opacity=f),o||i||null==t.fill&&r.inheritColor&&(t.fill=r.inheritColor);for(var g=0;g<Dd.length;g++){var m=Dd[g],v=at(e.getShallow(m),n[m]);null!=v&&(t[m]=v)}for(g=0;g<Ad.length;g++){m=Ad[g],v=e.getShallow(m);null!=v&&(t[m]=v)}if(null==t.verticalAlign){var y=e.getShallow("baseline");null!=y&&(t.verticalAlign=y)}if(!a||!r.disableBox){for(g=0;g<Id.length;g++){m=Id[g],v=e.getShallow(m);null!=v&&(t[m]=v)}var b=e.getShallow("borderType");null!=b&&(t.borderDash=b),"auto"!==t.backgroundColor&&"inherit"!==t.backgroundColor||!s||(t.backgroundColor=s),"auto"!==t.borderColor&&"inherit"!==t.borderColor||!s||(t.borderColor=s)}}function Ld(t,e){var n=e&&e.getModel("textStyle");return ft([t.fontStyle||n&&n.getShallow("fontStyle")||"",t.fontWeight||n&&n.getShallow("fontWeight")||"",(t.fontSize||n&&n.getShallow("fontSize")||12)+"px",t.fontFamily||n&&n.getShallow("fontFamily")||"sans-serif"].join(" "))}var Ed=Di();function Nd(t,e,n,r){if(t){var o=Ed(t);o.prevValue=o.value,o.value=n;var i=e.normal;o.valueAnimation=i.get("valueAnimation"),o.valueAnimation&&(o.precision=i.get("precision"),o.defaultInterpolatedText=r,o.statesModels=e)}}function Rd(t,e,n,r,o){var i=Ed(t);if(i.valueAnimation){var a=i.defaultInterpolatedText,u=at(i.interpolatedValue,i.prevValue),s=i.value;(null==u?td:Qf)(t,{},r,e,null,l)}function l(r){var l=Vi(n,i.precision,u,s,r);i.interpolatedValue=1===r?null:l;var c=wd({labelDataIndex:e,labelFetcher:o,defaultText:a?a(l):l+""},i.statesModels,l);xd(t,c)}}var Pd=["textStyle","color"],zd=new Us,Bd=function(){function t(){}return t.prototype.getTextColor=function(t){var e=this.ecModel;return this.getShallow("color")||(!t&&e?e.get(Pd):null)},t.prototype.getFont=function(){return Ld({fontStyle:this.getShallow("fontStyle"),fontWeight:this.getShallow("fontWeight"),fontSize:this.getShallow("fontSize"),fontFamily:this.getShallow("fontFamily")},this.ecModel)},t.prototype.getTextRect=function(t){return zd.useStyle({text:t,fontStyle:this.getShallow("fontStyle"),fontWeight:this.getShallow("fontWeight"),fontSize:this.getShallow("fontSize"),fontFamily:this.getShallow("fontFamily"),verticalAlign:this.getShallow("verticalAlign")||this.getShallow("baseline"),padding:this.getShallow("padding"),lineHeight:this.getShallow("lineHeight"),rich:this.getShallow("rich")}),zd.update(),zd.getBoundingRect()},t}(),Vd=Bd,Hd=[["lineWidth","width"],["stroke","color"],["opacity"],["shadowBlur"],["shadowOffsetX"],["shadowOffsetY"],["shadowColor"],["lineDash","type"],["lineDashOffset","dashOffset"],["lineCap","cap"],["lineJoin","join"],["miterLimit"]],Fd=ta(Hd),Wd=function(){function t(){}return t.prototype.getLineStyle=function(t){return Fd(this,t)},t}(),Ud=[["fill","color"],["stroke","borderColor"],["lineWidth","borderWidth"],["opacity"],["shadowBlur"],["shadowOffsetX"],["shadowOffsetY"],["shadowColor"],["lineDash","borderType"],["lineDashOffset","borderDashOffset"],["lineCap","borderCap"],["lineJoin","borderJoin"],["miterLimit","borderMiterLimit"]],Gd=ta(Ud),jd=function(){function t(){}return t.prototype.getItemStyle=function(t,e){return Gd(this,t,e)},t}(),Xd=function(){function t(t,e,n){this.parentModel=e,this.ecModel=n,this.option=t}return t.prototype.init=function(t,e,n){for(var r=[],o=3;o<arguments.length;o++)r[o-3]=arguments[o]},t.prototype.mergeOption=function(t,e){D(this.option,t,!0)},t.prototype.get=function(t,e){return null==t?this.option:this._doGet(this.parsePath(t),!e&&this.parentModel)},t.prototype.getShallow=function(t,e){var n=this.option,r=null==n?n:n[t];if(null==r&&!e){var o=this.parentModel;o&&(r=o.getShallow(t))}return r},t.prototype.getModel=function(e,n){var r=null!=e,o=r?this.parsePath(e):null,i=r?this._doGet(o):this.option;return n=n||this.parentModel&&this.parentModel.getModel(this.resolveParentPath(o)),new t(i,n,this.ecModel)},t.prototype.isEmpty=function(){return null==this.option},t.prototype.restoreData=function(){},t.prototype.clone=function(){var t=this.constructor;return new t(k(this.option))},t.prototype.parsePath=function(t){return"string"===typeof t?t.split("."):t},t.prototype.resolveParentPath=function(t){return t},t.prototype.isAnimationEnabled=function(){if(!d.node&&this.option){if(null!=this.option.animation)return!!this.option.animation;if(this.parentModel)return this.parentModel.isAnimationEnabled()}},t.prototype._doGet=function(t,e){var n=this.option;if(!t)return n;for(var r=0;r<t.length;r++)if(t[r]&&(n=n&&"object"===typeof n?n[t[r]]:null,null==n))break;return null==n&&e&&(n=e._doGet(this.resolveParentPath(t),e.parentModel)),n},t}();Xi(Xd),$i(Xd),R(Xd,Wd),R(Xd,jd),R(Xd,ra),R(Xd,Vd);var Yd=Xd,qd=Math.round(10*Math.random());function Zd(t){return[t||"",qd++].join("_")}function $d(t){var e={};t.registerSubTypeDefaulter=function(t,n){var r=Ui(t);e[r.main]=n},t.determineSubType=function(n,r){var o=r.type;if(!o){var i=Ui(n).main;t.hasSubTypes(n)&&e[i]&&(o=e[i](r))}return o}}function Kd(t,e){function n(t){var n={},i=[];return z(t,function(a){var u=r(n,a),s=u.originalDeps=e(a),l=o(s,t);u.entryCount=l.length,0===u.entryCount&&i.push(a),z(l,function(t){E(u.predecessor,t)<0&&u.predecessor.push(t);var e=r(n,t);E(e.successor,t)<0&&e.successor.push(a)})}),{graph:n,noEntryList:i}}function r(t,e){return t[e]||(t[e]={predecessor:[],successor:[]}),t[e]}function o(t,e){var n=[];return z(t,function(t){E(e,t)>=0&&n.push(t)}),n}t.topologicalTravel=function(t,e,r,o){if(t.length){var i=n(e),a=i.graph,u=i.noEntryList,s={};z(t,function(t){s[t]=!0});while(u.length){var l=u.pop(),c=a[l],f=!!s[l];f&&(r.call(o,l,c.originalDeps.slice()),delete s[l]),z(c.successor,f?h:d)}z(s,function(){var t="";throw new Error(t)})}function d(t){a[t].entryCount--,0===a[t].entryCount&&u.push(t)}function h(t){s[t]=!0,d(t)}}}function Jd(t,e){return D(D({},t,!0),e,!0)}var Qd={time:{month:["January","February","March","April","May","June","July","August","September","October","November","December"],monthAbbr:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayOfWeek:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayOfWeekAbbr:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"]},legend:{selector:{all:"All",inverse:"Inv"}},toolbox:{brush:{title:{rect:"Box Select",polygon:"Lasso Select",lineX:"Horizontally Select",lineY:"Vertically Select",keep:"Keep Selections",clear:"Clear Selections"}},dataView:{title:"Data View",lang:["Data View","Close","Refresh"]},dataZoom:{title:{zoom:"Zoom",back:"Zoom Reset"}},magicType:{title:{line:"Switch to Line Chart",bar:"Switch to Bar Chart",stack:"Stack",tiled:"Tile"}},restore:{title:"Restore"},saveAsImage:{title:"Save as Image",lang:["Right Click to Save Image"]}},series:{typeNames:{pie:"Pie chart",bar:"Bar chart",line:"Line chart",scatter:"Scatter plot",effectScatter:"Ripple scatter plot",radar:"Radar chart",tree:"Tree",treemap:"Treemap",boxplot:"Boxplot",candlestick:"Candlestick",k:"K line chart",heatmap:"Heat map",map:"Map",parallel:"Parallel coordinate map",lines:"Line graph",graph:"Relationship graph",sankey:"Sankey diagram",funnel:"Funnel chart",gauge:"Gauge",pictorialBar:"Pictorial bar",themeRiver:"Theme River Map",sunburst:"Sunburst"}},aria:{general:{withTitle:'This is a chart about "{title}"',withoutTitle:"This is a chart"},series:{single:{prefix:"",withName:" with type {seriesType} named {seriesName}.",withoutName:" with type {seriesType}."},multiple:{prefix:". It consists of {seriesCount} series count.",withName:" The {seriesId} series is a {seriesType} representing {seriesName}.",withoutName:" The {seriesId} series is a {seriesType}.",separator:{middle:"",end:""}}},data:{allData:"The data is as follows: ",partialData:"The first {displayCnt} items are: ",withName:"the data for {name} is {value}",withoutName:"{value}",separator:{middle:", ",end:". "}}}},th={time:{month:["一月","二月","三月","四月","五月","六月","七月","八月","九月","十月","十一月","十二月"],monthAbbr:["1月","2月","3月","4月","5月","6月","7月","8月","9月","10月","11月","12月"],dayOfWeek:["星期日","星期一","星期二","星期三","星期四","星期五","星期六"],dayOfWeekAbbr:["日","一","二","三","四","五","六"]},legend:{selector:{all:"全选",inverse:"反选"}},toolbox:{brush:{title:{rect:"矩形选择",polygon:"圈选",lineX:"横向选择",lineY:"纵向选择",keep:"保持选择",clear:"清除选择"}},dataView:{title:"数据视图",lang:["数据视图","关闭","刷新"]},dataZoom:{title:{zoom:"区域缩放",back:"区域缩放还原"}},magicType:{title:{line:"切换为折线图",bar:"切换为柱状图",stack:"切换为堆叠",tiled:"切换为平铺"}},restore:{title:"还原"},saveAsImage:{title:"保存为图片",lang:["右键另存为图片"]}},series:{typeNames:{pie:"饼图",bar:"柱状图",line:"折线图",scatter:"散点图",effectScatter:"涟漪散点图",radar:"雷达图",tree:"树图",treemap:"矩形树图",boxplot:"箱型图",candlestick:"K线图",k:"K线图",heatmap:"热力图",map:"地图",parallel:"平行坐标图",lines:"线图",graph:"关系图",sankey:"桑基图",funnel:"漏斗图",gauge:"仪表盘图",pictorialBar:"象形柱图",themeRiver:"主题河流图",sunburst:"旭日图"}},aria:{general:{withTitle:"这是一个关于“{title}”的图表。",withoutTitle:"这是一个图表，"},series:{single:{prefix:"",withName:"图表类型是{seriesType}，表示{seriesName}。",withoutName:"图表类型是{seriesType}。"},multiple:{prefix:"它由{seriesCount}个图表系列组成。",withName:"第{seriesId}个系列是一个表示{seriesName}的{seriesType}，",withoutName:"第{seriesId}个系列是一个{seriesType}，",separator:{middle:"；",end:"。"}}},data:{allData:"其数据是——",partialData:"其中，前{displayCnt}项是——",withName:"{name}的数据是{value}",withoutName:"{value}",separator:{middle:"，",end:""}}}},eh="ZH",nh="EN",rh=nh,oh={},ih={},ah=d.domSupported?function(){var t=(document.documentElement.lang||navigator.language||navigator.browserLanguage).toUpperCase();return t.indexOf(eh)>-1?eh:rh}():rh;function uh(t,e){t=t.toUpperCase(),ih[t]=new Yd(e),oh[t]=e}function sh(t){if(q(t)){var e=oh[t.toUpperCase()]||{};return t===eh||t===nh?k(e):D(k(e),k(oh[rh]),!1)}return D(k(t),k(oh[rh]),!1)}function lh(t){return ih[t]}function ch(){return ih[rh]}uh(nh,Qd),uh(eh,th);var fh=1e3,dh=60*fh,hh=60*dh,ph=24*hh,gh=365*ph,mh={year:"{yyyy}",month:"{MMM}",day:"{d}",hour:"{HH}:{mm}",minute:"{HH}:{mm}",second:"{HH}:{mm}:{ss}",millisecond:"{hh}:{mm}:{ss} {SSS}",none:"{yyyy}-{MM}-{dd} {hh}:{mm}:{ss} {SSS}"},vh="{yyyy}-{MM}-{dd}",yh={year:"{yyyy}",month:"{yyyy}-{MM}",day:vh,hour:vh+" "+mh.hour,minute:vh+" "+mh.minute,second:vh+" "+mh.second,millisecond:mh.none},bh=["year","month","day","hour","minute","second","millisecond"],xh=["year","half-year","quarter","month","week","half-week","day","half-day","quarter-day","hour","minute","second","millisecond"];function wh(t,e){return t+="","0000".substr(0,e-t.length)+t}function _h(t){switch(t){case"half-year":case"quarter":return"month";case"week":case"half-week":return"day";case"half-day":case"quarter-day":return"hour";default:return t}}function Sh(t){return t===_h(t)}function Ch(t){switch(t){case"year":case"month":return"day";case"millisecond":return"millisecond";default:return"second"}}function Mh(t,e,n,r){var o=Yo(t),i=o[Ah(n)](),a=o[Ih(n)]()+1,u=Math.floor((a-1)/4)+1,s=o[Oh(n)](),l=o["get"+(n?"UTC":"")+"Day"](),c=o[Lh(n)](),f=(c-1)%12+1,d=o[Eh(n)](),h=o[Nh(n)](),p=o[Rh(n)](),g=r instanceof Yd?r:lh(r||ah)||ch(),m=g.getModel("time"),v=m.get("month"),y=m.get("monthAbbr"),b=m.get("dayOfWeek"),x=m.get("dayOfWeekAbbr");return(e||"").replace(/{yyyy}/g,i+"").replace(/{yy}/g,i%100+"").replace(/{Q}/g,u+"").replace(/{MMMM}/g,v[a-1]).replace(/{MMM}/g,y[a-1]).replace(/{MM}/g,wh(a,2)).replace(/{M}/g,a+"").replace(/{dd}/g,wh(s,2)).replace(/{d}/g,s+"").replace(/{eeee}/g,b[l]).replace(/{ee}/g,x[l]).replace(/{e}/g,l+"").replace(/{HH}/g,wh(c,2)).replace(/{H}/g,c+"").replace(/{hh}/g,wh(f+"",2)).replace(/{h}/g,f+"").replace(/{mm}/g,wh(d,2)).replace(/{m}/g,d+"").replace(/{ss}/g,wh(h,2)).replace(/{s}/g,h+"").replace(/{SSS}/g,wh(p,3)).replace(/{S}/g,p+"")}function Th(t,e,n,r,o){var i=null;if("string"===typeof n)i=n;else if("function"===typeof n)i=n(t.value,e,{level:t.level});else{var a=I({},mh);if(t.level>0)for(var u=0;u<bh.length;++u)a[bh[u]]="{primary|"+a[bh[u]]+"}";var s=n?!1===n.inherit?n:O(n,a):a,l=kh(t.value,o);if(s[l])i=s[l];else if(s.inherit){var c=xh.indexOf(l);for(u=c-1;u>=0;--u)if(s[l]){i=s[l];break}i=i||a.none}if(X(i)){var f=null==t.level?0:t.level>=0?t.level:i.length+t.level;f=Math.min(f,i.length-1),i=i[f]}}return Mh(new Date(t.value),i,o,r)}function kh(t,e){var n=Yo(t),r=n[Ih(e)]()+1,o=n[Oh(e)](),i=n[Lh(e)](),a=n[Eh(e)](),u=n[Nh(e)](),s=n[Rh(e)](),l=0===s,c=l&&0===u,f=c&&0===a,d=f&&0===i,h=d&&1===o,p=h&&1===r;return p?"year":h?"month":d?"day":f?"hour":c?"minute":l?"second":"millisecond"}function Dh(t,e,n){var r="number"===typeof t?Yo(t):t;switch(e=e||kh(t,n),e){case"year":return r[Ah(n)]();case"half-year":return r[Ih(n)]()>=6?1:0;case"quarter":return Math.floor((r[Ih(n)]()+1)/4);case"month":return r[Ih(n)]();case"day":return r[Oh(n)]();case"half-day":return r[Lh(n)]()/24;case"hour":return r[Lh(n)]();case"minute":return r[Eh(n)]();case"second":return r[Nh(n)]();case"millisecond":return r[Rh(n)]()}}function Ah(t){return t?"getUTCFullYear":"getFullYear"}function Ih(t){return t?"getUTCMonth":"getMonth"}function Oh(t){return t?"getUTCDate":"getDate"}function Lh(t){return t?"getUTCHours":"getHours"}function Eh(t){return t?"getUTCMinutes":"getMinutes"}function Nh(t){return t?"getUTCSeconds":"getSeconds"}function Rh(t){return t?"getUTCSeconds":"getSeconds"}function Ph(t){return t?"setUTCFullYear":"setFullYear"}function zh(t){return t?"setUTCMonth":"setMonth"}function Bh(t){return t?"setUTCDate":"setDate"}function Vh(t){return t?"setUTCHours":"setHours"}function Hh(t){return t?"setUTCMinutes":"setMinutes"}function Fh(t){return t?"setUTCSeconds":"setSeconds"}function Wh(t){return t?"setUTCSeconds":"setSeconds"}function Uh(t){if(!ti(t))return q(t)?t:"-";var e=(t+"").split(".");return e[0].replace(/(\d{1,3})(?=(?:\d{3})+(?!\d))/g,"$1,")+(e.length>1?"."+e[1]:"")}function Gh(t,e){return t=(t||"").toLowerCase().replace(/-(.)/g,function(t,e){return e.toUpperCase()}),e&&t&&(t=t.charAt(0).toUpperCase()+t.slice(1)),t}var jh=lt,Xh=/([&<>"'])/g,Yh={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"};function qh(t){return null==t?"":(t+"").replace(Xh,function(t,e){return Yh[e]})}function Zh(t,e,n){var r="{yyyy}-{MM}-{dd} {hh}:{mm}:{ss}";function o(t){return t&&ft(t)?t:"-"}function i(t){return!(null==t||isNaN(t)||!isFinite(t))}var a="time"===e,u=t instanceof Date;if(a||u){var s=a?Yo(t):t;if(!isNaN(+s))return Mh(s,r,n);if(u)return"-"}if("ordinal"===e)return Z(t)?o(t):$(t)&&i(t)?t+"":"-";var l=Qo(t);return i(l)?Uh(l):Z(t)?o(t):"-"}var $h=["a","b","c","d","e","f","g"],Kh=function(t,e){return"{"+t+(null==e?"":e)+"}"};function Jh(t,e,n){X(e)||(e=[e]);var r=e.length;if(!r)return"";for(var o=e[0].$vars||[],i=0;i<o.length;i++){var a=$h[i];t=t.replace(Kh(a),Kh(a,0))}for(var u=0;u<r;u++)for(var s=0;s<o.length;s++){var l=e[u][o[s]];t=t.replace(Kh($h[s],u),n?qh(l):l)}return t}function Qh(t,e,n){return z(e,function(e,r){t=t.replace("{"+r+"}",n?qh(e):e)}),t}function tp(t,e){var n=q(t)?{color:t,extraCssText:e}:t||{},r=n.color,o=n.type;e=n.extraCssText;var i=n.renderMode||"html";if(!r)return"";if("html"===i)return"subItem"===o?'<span style="display:inline-block;vertical-align:middle;margin-right:8px;margin-left:3px;border-radius:4px;width:4px;height:4px;background-color:'+qh(r)+";"+(e||"")+'"></span>':'<span style="display:inline-block;margin-right:4px;border-radius:10px;width:10px;height:10px;background-color:'+qh(r)+";"+(e||"")+'"></span>';var a=n.markerId||"markerX";return{renderMode:i,content:"{"+a+"|}  ",style:"subItem"===o?{width:4,height:4,borderRadius:2,backgroundColor:r}:{width:10,height:10,borderRadius:5,backgroundColor:r}}}function ep(t,e){return e=e||"transparent",q(t)?t:K(t)&&t.colorStops&&(t.colorStops[0]||{}).color||e}function np(t,e){if("_blank"===e||"blank"===e){var n=window.open();n.opener=null,n.location.href=t}else window.open(t,e)}var rp=z,op=["left","right","top","bottom","width","height"],ip=[["width","left","right"],["height","top","bottom"]];function ap(t,e,n,r,o){var i=0,a=0;null==r&&(r=1/0),null==o&&(o=1/0);var u=0;e.eachChild(function(s,l){var c,f,d=s.getBoundingRect(),h=e.childAt(l+1),p=h&&h.getBoundingRect();if("horizontal"===t){var g=d.width+(p?-p.x+d.x:0);c=i+g,c>r||s.newline?(i=0,c=g,a+=u+n,u=d.height):u=Math.max(u,d.height)}else{var m=d.height+(p?-p.y+d.y:0);f=a+m,f>o||s.newline?(i+=u+n,a=0,f=m,u=d.width):u=Math.max(u,d.width)}s.newline||(s.x=i,s.y=a,s.markRedraw(),"horizontal"===t?i=c+n:a=f+n)})}var up=ap;j(ap,"vertical"),j(ap,"horizontal");function sp(t,e,n){var r=e.width,o=e.height,i=Ro(t.left,r),a=Ro(t.top,o),u=Ro(t.right,r),s=Ro(t.bottom,o);return(isNaN(i)||isNaN(parseFloat(t.left)))&&(i=0),(isNaN(u)||isNaN(parseFloat(t.right)))&&(u=r),(isNaN(a)||isNaN(parseFloat(t.top)))&&(a=0),(isNaN(s)||isNaN(parseFloat(t.bottom)))&&(s=o),n=jh(n||0),{width:Math.max(u-i-n[1]-n[3],0),height:Math.max(s-a-n[0]-n[2],0)}}function lp(t,e,n){n=jh(n||0);var r=e.width,o=e.height,i=Ro(t.left,r),a=Ro(t.top,o),u=Ro(t.right,r),s=Ro(t.bottom,o),l=Ro(t.width,r),c=Ro(t.height,o),f=n[2]+n[0],d=n[1]+n[3],h=t.aspect;switch(isNaN(l)&&(l=r-u-d-i),isNaN(c)&&(c=o-s-f-a),null!=h&&(isNaN(l)&&isNaN(c)&&(h>r/o?l=.8*r:c=.8*o),isNaN(l)&&(l=h*c),isNaN(c)&&(c=l/h)),isNaN(i)&&(i=r-u-l-d),isNaN(a)&&(a=o-s-c-f),t.left||t.right){case"center":i=r/2-l/2-n[3];break;case"right":i=r-l-d;break}switch(t.top||t.bottom){case"middle":case"center":a=o/2-c/2-n[0];break;case"bottom":a=o-c-f;break}i=i||0,a=a||0,isNaN(l)&&(l=r-d-i-(u||0)),isNaN(c)&&(c=o-f-a-(s||0));var p=new Zr(i+n[3],a+n[0],l,c);return p.margin=n,p}function cp(t,e,n,r,o){var i=!o||!o.hv||o.hv[0],a=!o||!o.hv||o.hv[1],u=o&&o.boundingMode||"all";if(i||a){var s;if("raw"===u)s="group"===t.type?new Zr(0,0,+e.width||0,+e.height||0):t.getBoundingRect();else if(s=t.getBoundingRect(),t.needLocalTransform()){var l=t.getLocalTransform();s=s.clone(),s.applyTransform(l)}var c=lp(O({width:s.width,height:s.height},e),n,r),f=i?c.x-s.x:0,d=a?c.y-s.y:0;"raw"===u?(t.x=f,t.y=d):(t.x+=f,t.y+=d),t.markRedraw()}}function fp(t,e){return null!=t[ip[e][0]]||null!=t[ip[e][1]]&&null!=t[ip[e][2]]}function dp(t){var e=t.layoutMode||t.constructor.layoutMode;return K(e)?e:e?{type:e}:null}function hp(t,e,n){var r=n&&n.ignoreSize;!X(r)&&(r=[r,r]);var o=a(ip[0],0),i=a(ip[1],1);function a(n,o){var i={},a=0,l={},c=0,f=2;if(rp(n,function(e){l[e]=t[e]}),rp(n,function(t){u(e,t)&&(i[t]=l[t]=e[t]),s(i,t)&&a++,s(l,t)&&c++}),r[o])return s(e,n[1])?l[n[2]]=null:s(e,n[2])&&(l[n[1]]=null),l;if(c!==f&&a){if(a>=f)return i;for(var d=0;d<n.length;d++){var h=n[d];if(!u(i,h)&&u(t,h)){i[h]=t[h];break}}return i}return l}function u(t,e){return t.hasOwnProperty(e)}function s(t,e){return null!=t[e]&&"auto"!==t[e]}function l(t,e,n){rp(t,function(t){e[t]=n[t]})}l(ip[0],t,o),l(ip[1],t,i)}function pp(t){return gp({},t)}function gp(t,e){return e&&t&&rp(op,function(n){e.hasOwnProperty(n)&&(t[n]=e[n])}),t}var mp=Di(),vp=function(t){function e(e,n,r){var o=t.call(this,e,n,r)||this;return o.uid=Zd("ec_cpt_model"),o}return i(e,t),e.prototype.init=function(t,e,n){this.mergeDefaultAndTheme(t,n)},e.prototype.mergeDefaultAndTheme=function(t,e){var n=dp(this),r=n?pp(t):{},o=e.getTheme();D(t,o.get(this.mainType)),D(t,this.getDefaultOption()),n&&hp(t,r,n)},e.prototype.mergeOption=function(t,e){D(this.option,t,!0);var n=dp(this);n&&hp(this.option,t,n)},e.prototype.optionUpdated=function(t,e){},e.prototype.getDefaultOption=function(){var t=this.constructor;if(!ji(t))return t.defaultOption;var e=mp(this);if(!e.defaultOption){var n=[],r=t;while(r){var o=r.prototype.defaultOption;o&&n.push(o),r=r.superClass}for(var i={},a=n.length-1;a>=0;a--)i=D(i,n[a],!0);e.defaultOption=i}return e.defaultOption},e.prototype.getReferringComponents=function(t,e){var n=t+"Index",r=t+"Id";return Ni(this.ecModel,t,{index:this.get(n,!0),id:this.get(r,!0)},e)},e.prototype.getBoxLayoutParams=function(){var t=this;return{left:t.get("left"),top:t.get("top"),right:t.get("right"),bottom:t.get("bottom"),width:t.get("width"),height:t.get("height")}},e.protoInitialize=function(){var t=e.prototype;t.type="component",t.id="",t.name="",t.mainType="",t.subType="",t.componentIndex=0}(),e}(Yd);function yp(t){var e=[];return z(vp.getClassesByMainType(t),function(t){e=e.concat(t.dependencies||t.prototype.dependencies||[])}),e=B(e,function(t){return Ui(t).main}),"dataset"!==t&&E(e,"dataset")<=0&&e.unshift("dataset"),e}qi(vp,Yd),Qi(vp),$d(vp),Kd(vp,yp);var bp=vp,xp="";"undefined"!==typeof navigator&&(xp=navigator.platform||"");var wp="rgba(0, 0, 0, 0.2)",_p={darkMode:"auto",color:["#5470c6","#91cc75","#fac858","#ee6666","#73c0de","#3ba272","#fc8452","#9a60b4","#ea7ccc"],gradientColor:["#f6efa6","#d88273","#bf444c"],aria:{decal:{decals:[{color:wp,dashArrayX:[1,0],dashArrayY:[2,5],symbolSize:1,rotation:Math.PI/6},{color:wp,symbol:"circle",dashArrayX:[[8,8],[0,8,8,0]],dashArrayY:[6,0],symbolSize:.8},{color:wp,dashArrayX:[1,0],dashArrayY:[4,3],rotation:-Math.PI/4},{color:wp,dashArrayX:[[6,6],[0,6,6,0]],dashArrayY:[6,0]},{color:wp,dashArrayX:[[1,0],[1,6]],dashArrayY:[1,0,6,0],rotation:Math.PI/4},{color:wp,symbol:"triangle",dashArrayX:[[9,9],[0,9,9,0]],dashArrayY:[7,2],symbolSize:.75}]}},textStyle:{fontFamily:xp.match(/^Win/)?"Microsoft YaHei":"sans-serif",fontSize:12,fontStyle:"normal",fontWeight:"normal"},blendMode:null,stateAnimation:{duration:300,easing:"cubicOut"},animation:"auto",animationDuration:1e3,animationDurationUpdate:500,animationEasing:"cubicInOut",animationEasingUpdate:"cubicInOut",animationThreshold:2e3,progressiveThreshold:3e3,progressive:400,hoverLayerThreshold:3e3,useUTC:!1},Sp=mt(["tooltip","label","itemName","itemId","seriesName"]),Cp="original",Mp="arrayRows",Tp="objectRows",kp="keyedColumns",Dp="typedArray",Ap="unknown",Ip="column",Op="row",Lp={Must:1,Might:2,Not:3},Ep=Di();function Np(t){Ep(t).datasetMap=mt()}function Rp(t,e,n){var r={},o=zp(e);if(!o||!t)return r;var i,a,u=[],s=[],l=e.ecModel,c=Ep(l).datasetMap,f=o.uid+"_"+n.seriesLayoutBy;t=t.slice(),z(t,function(e,n){var o=K(e)?e:t[n]={name:e};"ordinal"===o.type&&null==i&&(i=n,a=p(o)),r[o.name]=[]});var d=c.get(f)||c.set(f,{categoryWayDim:a,valueWayDim:0});function h(t,e,n){for(var r=0;r<n;r++)t.push(e+r)}function p(t){var e=t.dimsDef;return e?e.length:1}return z(t,function(t,e){var n=t.name,o=p(t);if(null==i){var a=d.valueWayDim;h(r[n],a,o),h(s,a,o),d.valueWayDim+=o}else if(i===e)h(r[n],0,o),h(u,0,o);else{a=d.categoryWayDim;h(r[n],a,o),h(s,a,o),d.categoryWayDim+=o}}),u.length&&(r.itemName=u),s.length&&(r.seriesName=s),r}function Pp(t,e,n){var r={},o=zp(t);if(!o)return r;var i,a=e.sourceFormat,u=e.dimensionsDefine;a!==Tp&&a!==kp||z(u,function(t,e){"name"===(K(t)?t.name:t)&&(i=e)});var s=function(){for(var t={},r={},o=[],s=0,l=Math.min(5,n);s<l;s++){var c=Hp(e.data,a,e.seriesLayoutBy,u,e.startIndex,s);o.push(c);var f=c===Lp.Not;if(f&&null==t.v&&s!==i&&(t.v=s),(null==t.n||t.n===t.v||!f&&o[t.n]===Lp.Not)&&(t.n=s),d(t)&&o[t.n]!==Lp.Not)return t;f||(c===Lp.Might&&null==r.v&&s!==i&&(r.v=s),null!=r.n&&r.n!==r.v||(r.n=s))}function d(t){return null!=t.v&&null!=t.n}return d(t)?t:d(r)?r:null}();if(s){r.value=[s.v];var l=null!=i?i:s.n;r.itemName=[l],r.seriesName=[l]}return r}function zp(t){var e=t.get("data",!0);if(!e)return Ni(t.ecModel,"dataset",{index:t.get("datasetIndex",!0),id:t.get("datasetId",!0)},Li).models[0]}function Bp(t){return t.get("transform",!0)||t.get("fromTransformResult",!0)?Ni(t.ecModel,"dataset",{index:t.get("fromDatasetIndex",!0),id:t.get("fromDatasetId",!0)},Li).models:[]}function Vp(t,e){return Hp(t.data,t.sourceFormat,t.seriesLayoutBy,t.dimensionsDefine,t.startIndex,e)}function Hp(t,e,n,r,o,i){var a,u,s,l=5;if(Q(t))return Lp.Not;if(r){var c=r[i];K(c)?(u=c.name,s=c.type):q(c)&&(u=c)}if(null!=s)return"ordinal"===s?Lp.Must:Lp.Not;if(e===Mp){var f=t;if(n===Op){for(var d=f[i],h=0;h<(d||[]).length&&h<l;h++)if(null!=(a=x(d[o+h])))return a}else for(h=0;h<f.length&&h<l;h++){var p=f[o+h];if(p&&null!=(a=x(p[i])))return a}}else if(e===Tp){var g=t;if(!u)return Lp.Not;for(h=0;h<g.length&&h<l;h++){var m=g[h];if(m&&null!=(a=x(m[u])))return a}}else if(e===kp){var v=t;if(!u)return Lp.Not;d=v[u];if(!d||Q(d))return Lp.Not;for(h=0;h<d.length&&h<l;h++)if(null!=(a=x(d[h])))return a}else if(e===Cp){var y=t;for(h=0;h<y.length&&h<l;h++){m=y[h];var b=li(m);if(!X(b))return Lp.Not;if(null!=(a=x(b[i])))return a}}function x(t){var e=q(t);return null!=t&&isFinite(t)&&""!==t?e?Lp.Might:Lp.Not:e&&"-"!==t?Lp.Must:void 0}return Lp.Not}var Fp=mt();function Wp(t,e){ct(null==Fp.get(t)&&e),Fp.set(t,e)}function Up(t,e,n){var r=Fp.get(e);if(!r)return n;var o=r(t);return o?n.concat(o):n}var Gp=Di(),jp=Di(),Xp=function(){function t(){}return t.prototype.getColorFromPalette=function(t,e,n){var r=ai(this.get("color",!0)),o=this.get("colorLayer",!0);return Zp(this,Gp,r,o,t,e,n)},t.prototype.clearColorPalette=function(){$p(this,Gp)},t}();function Yp(t,e,n,r){var o=ai(t.get(["aria","decal","decals"]));return Zp(t,jp,o,null,e,n,r)}function qp(t,e){for(var n=t.length,r=0;r<n;r++)if(t[r].length>e)return t[r];return t[n-1]}function Zp(t,e,n,r,o,i,a){i=i||t;var u=e(i),s=u.paletteIdx||0,l=u.paletteNameMap=u.paletteNameMap||{};if(l.hasOwnProperty(o))return l[o];var c=null!=a&&r?qp(r,a):n;if(c=c||n,c&&c.length){var f=c[s];return o&&(l[o]=f),u.paletteIdx=(s+1)%c.length,f}}function $p(t,e){e(t).paletteIdx=0,e(t).paletteNameMap={}}var Kp,Jp,Qp;"undefined"!==typeof console&&console.warn&&console.log;function tg(t){0}function eg(t){throw new Error(t)}var ng="\0_ec_inner",rg=1;var og=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.init=function(t,e,n,r,o,i){r=r||{},this.option=null,this._theme=new Yd(r),this._locale=new Yd(o),this._optionManager=i},e.prototype.setOption=function(t,e,n){var r=lg(e);this._optionManager.setOption(t,n,r),this._resetOption(null,r)},e.prototype.resetOption=function(t,e){return this._resetOption(t,lg(e))},e.prototype._resetOption=function(t,e){var n=!1,r=this._optionManager;if(!t||"recreate"===t){var o=r.mountOption("recreate"===t);0,this.option&&"recreate"!==t?(this.restoreData(),this._mergeOption(o,e)):Qp(this,o),n=!0}if("timeline"!==t&&"media"!==t||this.restoreData(),!t||"recreate"===t||"timeline"===t){var i=r.getTimelineOption(this);i&&(n=!0,this._mergeOption(i,e))}if(!t||"recreate"===t||"media"===t){var a=r.getMediaOption(this);a.length&&z(a,function(t){n=!0,this._mergeOption(t,e)},this)}return n},e.prototype.mergeOption=function(t){this._mergeOption(t,null)},e.prototype._mergeOption=function(t,e){var n=this.option,r=this._componentsMap,o=this._componentsCount,i=[],a=mt(),u=e&&e.replaceMergeMainTypeMap;function s(e){var i=Up(this,e,ai(t[e])),a=r.get(e),s=a?u&&u.get(e)?"replaceMerge":"normalMerge":"replaceAll",l=fi(a,i,s);Ci(l,e,bp),n[e]=null,r.set(e,null),o.set(e,0);var c=[],f=[],d=0;z(l,function(t,n){var r=t.existing,o=t.newOption;if(o){var i="series"===e,a=bp.getClass(e,t.keyInfo.subType,!i);if(!a)return;if(r&&r.constructor===a)r.name=t.keyInfo.name,r.mergeOption(o,this),r.optionUpdated(o,!1);else{var u=I({componentIndex:n},t.keyInfo);r=new a(o,this,this,u),I(r,u),t.brandNew&&(r.__requireNewView=!0),r.init(o,this,this),r.optionUpdated(null,!0)}}else r&&(r.mergeOption({},this),r.optionUpdated({},!1));r?(c.push(r.option),f.push(r),d++):(c.push(void 0),f.push(void 0))},this),n[e]=c,r.set(e,f),o.set(e,d),"series"===e&&Kp(this)}Np(this),z(t,function(t,e){null!=t&&(bp.hasClass(e)?e&&(i.push(e),a.set(e,!0)):n[e]=null==n[e]?k(t):D(n[e],t,!0))}),u&&u.each(function(t,e){bp.hasClass(e)&&!a.get(e)&&(i.push(e),a.set(e,!0))}),bp.topologicalTravel(i,bp.getAllClassMainTypes(),s,this),this._seriesIndices||Kp(this)},e.prototype.getOption=function(){var t=k(this.option);return z(t,function(e,n){if(bp.hasClass(n)){for(var r=ai(e),o=r.length,i=!1,a=o-1;a>=0;a--)r[a]&&!_i(r[a])?i=!0:(r[a]=null,!i&&o--);r.length=o,t[n]=r}}),delete t[ng],t},e.prototype.getTheme=function(){return this._theme},e.prototype.getLocaleModel=function(){return this._locale},e.prototype.getLocale=function(t){var e=this.getLocaleModel();return e.get(t)},e.prototype.setUpdatePayload=function(t){this._payload=t},e.prototype.getUpdatePayload=function(){return this._payload},e.prototype.getComponent=function(t,e){var n=this._componentsMap.get(t);if(n){var r=n[e||0];if(r)return r;if(null==e)for(var o=0;o<n.length;o++)if(n[o])return n[o]}},e.prototype.queryComponents=function(t){var e=t.mainType;if(!e)return[];var n,r=t.index,o=t.id,i=t.name,a=this._componentsMap.get(e);return a&&a.length?(null!=r?(n=[],z(ai(r),function(t){a[t]&&n.push(a[t])})):n=null!=o?ug("id",o,a):null!=i?ug("name",i,a):H(a,function(t){return!!t}),sg(n,t)):[]},e.prototype.findComponents=function(t){var e=t.query,n=t.mainType,r=i(e),o=r?this.queryComponents(r):H(this._componentsMap.get(n),function(t){return!!t});return a(sg(o,t));function i(t){var e=n+"Index",r=n+"Id",o=n+"Name";return!t||null==t[e]&&null==t[r]&&null==t[o]?null:{mainType:n,index:t[e],id:t[r],name:t[o]}}function a(e){return t.filter?H(e,t.filter):e}},e.prototype.eachComponent=function(t,e,n){var r=this._componentsMap;if(Y(t)){var o=e,i=t;r.each(function(t,e){for(var n=0;t&&n<t.length;n++){var r=t[n];r&&i.call(o,e,r,r.componentIndex)}})}else for(var a=q(t)?r.get(t):K(t)?this.findComponents(t):null,u=0;a&&u<a.length;u++){var s=a[u];s&&e.call(n,s,s.componentIndex)}},e.prototype.getSeriesByName=function(t){var e=xi(t,null);return H(this._componentsMap.get("series"),function(t){return!!t&&null!=e&&t.name===e})},e.prototype.getSeriesByIndex=function(t){return this._componentsMap.get("series")[t]},e.prototype.getSeriesByType=function(t){return H(this._componentsMap.get("series"),function(e){return!!e&&e.subType===t})},e.prototype.getSeries=function(){return H(this._componentsMap.get("series").slice(),function(t){return!!t})},e.prototype.getSeriesCount=function(){return this._componentsCount.get("series")},e.prototype.eachSeries=function(t,e){Jp(this),z(this._seriesIndices,function(n){var r=this._componentsMap.get("series")[n];t.call(e,r,n)},this)},e.prototype.eachRawSeries=function(t,e){z(this._componentsMap.get("series"),function(n){n&&t.call(e,n,n.componentIndex)})},e.prototype.eachSeriesByType=function(t,e,n){Jp(this),z(this._seriesIndices,function(r){var o=this._componentsMap.get("series")[r];o.subType===t&&e.call(n,o,r)},this)},e.prototype.eachRawSeriesByType=function(t,e,n){return z(this.getSeriesByType(t),e,n)},e.prototype.isSeriesFiltered=function(t){return Jp(this),null==this._seriesIndicesMap.get(t.componentIndex)},e.prototype.getCurrentSeriesIndices=function(){return(this._seriesIndices||[]).slice()},e.prototype.filterSeries=function(t,e){Jp(this);var n=[];z(this._seriesIndices,function(r){var o=this._componentsMap.get("series")[r];t.call(e,o,r)&&n.push(r)},this),this._seriesIndices=n,this._seriesIndicesMap=mt(n)},e.prototype.restoreData=function(t){Kp(this);var e=this._componentsMap,n=[];e.each(function(t,e){bp.hasClass(e)&&n.push(e)}),bp.topologicalTravel(n,bp.getAllClassMainTypes(),function(n){z(e.get(n),function(e){!e||"series"===n&&ig(e,t)||e.restoreData()})})},e.internalField=function(){Kp=function(t){var e=t._seriesIndices=[];z(t._componentsMap.get("series"),function(t){t&&e.push(t.componentIndex)}),t._seriesIndicesMap=mt(e)},Jp=function(t){0},Qp=function(t,e){t.option={},t.option[ng]=rg,t._componentsMap=mt({series:[]}),t._componentsCount=mt();var n=e.aria;K(n)&&null==n.enabled&&(n.enabled=!0),ag(e,t._theme.option),D(e,_p,!1),t._mergeOption(e,null)}}(),e}(Yd);function ig(t,e){if(e){var n=e.seriesIndex,r=e.seriesId,o=e.seriesName;return null!=n&&t.componentIndex!==n||null!=r&&t.id!==r||null!=o&&t.name!==o}}function ag(t,e){var n=t.color&&!t.colorLayer;z(e,function(e,r){"colorLayer"===r&&n||bp.hasClass(r)||("object"===typeof e?t[r]=t[r]?D(t[r],e,!1):k(e):null==t[r]&&(t[r]=e))})}function ug(t,e,n){if(X(e)){var r=mt();return z(e,function(t){if(null!=t){var e=xi(t,null);null!=e&&r.set(t,!0)}}),H(n,function(e){return e&&r.get(e[t])})}var o=xi(e,null);return H(n,function(e){return e&&null!=o&&e[t]===o})}function sg(t,e){return e.hasOwnProperty("subType")?H(t,function(t){return t&&t.subType===e.subType}):t}function lg(t){var e=mt();return t&&z(ai(t.replaceMerge),function(t){e.set(t,!0)}),{replaceMergeMainTypeMap:e}}R(og,Xp);var cg=og,fg=["getDom","getZr","getWidth","getHeight","getDevicePixelRatio","dispatchAction","isDisposed","on","off","getDataURL","getConnectedDataURL","getOption","getId","updateLabelLayout"],dg=function(){function t(t){z(fg,function(e){this[e]=G(t[e],t)},this)}return t}(),hg=dg,pg={},gg=function(){function t(){this._coordinateSystems=[]}return t.prototype.create=function(t,e){var n=[];z(pg,function(r,o){var i=r.create(t,e);n=n.concat(i||[])}),this._coordinateSystems=n},t.prototype.update=function(t,e){z(this._coordinateSystems,function(n){n.update&&n.update(t,e)})},t.prototype.getCoordinateSystems=function(){return this._coordinateSystems.slice()},t.register=function(t,e){pg[t]=e},t.get=function(t){return pg[t]},t}(),mg=gg,vg=/^(min|max)?(.+)$/,yg=function(){function t(t){this._timelineOptions=[],this._mediaList=[],this._currentMediaIndices=[],this._api=t}return t.prototype.setOption=function(t,e,n){t&&(z(ai(t.series),function(t){t&&t.data&&Q(t.data)&&ht(t.data)}),z(ai(t.dataset),function(t){t&&t.source&&Q(t.source)&&ht(t.source)})),t=k(t);var r=this._optionBackup,o=bg(t,e,!r);this._newBaseOption=o.baseOption,r?(o.timelineOptions.length&&(r.timelineOptions=o.timelineOptions),o.mediaList.length&&(r.mediaList=o.mediaList),o.mediaDefault&&(r.mediaDefault=o.mediaDefault)):this._optionBackup=o},t.prototype.mountOption=function(t){var e=this._optionBackup;return this._timelineOptions=e.timelineOptions,this._mediaList=e.mediaList,this._mediaDefault=e.mediaDefault,this._currentMediaIndices=[],k(t?e.baseOption:this._newBaseOption)},t.prototype.getTimelineOption=function(t){var e,n=this._timelineOptions;if(n.length){var r=t.getComponent("timeline");r&&(e=k(n[r.getCurrentIndex()]))}return e},t.prototype.getMediaOption=function(t){var e=this._api.getWidth(),n=this._api.getHeight(),r=this._mediaList,o=this._mediaDefault,i=[],a=[];if(!r.length&&!o)return a;for(var u=0,s=r.length;u<s;u++)xg(r[u].query,e,n)&&i.push(u);return!i.length&&o&&(i=[-1]),i.length&&!_g(i,this._currentMediaIndices)&&(a=B(i,function(t){return k(-1===t?o.option:r[t].option)})),this._currentMediaIndices=i,a},t}();function bg(t,e,n){var r,o,i=[],a=t.baseOption,u=t.timeline,s=t.options,l=t.media,c=!!t.media,f=!!(s||u||a&&a.timeline);function d(t){z(e,function(e){e(t,n)})}return a?(o=a,o.timeline||(o.timeline=u)):((f||c)&&(t.options=t.media=null),o=t),c&&X(l)&&z(l,function(t){t&&t.option&&(t.query?i.push(t):r||(r=t))}),d(o),z(s,function(t){return d(t)}),z(i,function(t){return d(t.option)}),{baseOption:o,timelineOptions:s||[],mediaDefault:r,mediaList:i}}function xg(t,e,n){var r={width:e,height:n,aspectratio:e/n},o=!0;return z(t,function(t,e){var n=e.match(vg);if(n&&n[1]&&n[2]){var i=n[1],a=n[2].toLowerCase();wg(r[a],t,i)||(o=!1)}}),o}function wg(t,e,n){return"min"===n?t>=e:"max"===n?t<=e:t===e}function _g(t,e){return t.join(",")===e.join(",")}var Sg=yg,Cg=z,Mg=K,Tg=["areaStyle","lineStyle","nodeStyle","linkStyle","chordStyle","label","labelLine"];function kg(t){var e=t&&t.itemStyle;if(e)for(var n=0,r=Tg.length;n<r;n++){var o=Tg[n],i=e.normal,a=e.emphasis;i&&i[o]&&(t[o]=t[o]||{},t[o].normal?D(t[o].normal,i[o]):t[o].normal=i[o],i[o]=null),a&&a[o]&&(t[o]=t[o]||{},t[o].emphasis?D(t[o].emphasis,a[o]):t[o].emphasis=a[o],a[o]=null)}}function Dg(t,e,n){if(t&&t[e]&&(t[e].normal||t[e].emphasis)){var r=t[e].normal,o=t[e].emphasis;r&&(n?(t[e].normal=t[e].emphasis=null,O(t[e],r)):t[e]=r),o&&(t.emphasis=t.emphasis||{},t.emphasis[e]=o,o.focus&&(t.emphasis.focus=o.focus),o.blurScope&&(t.emphasis.blurScope=o.blurScope))}}function Ag(t){Dg(t,"itemStyle"),Dg(t,"lineStyle"),Dg(t,"areaStyle"),Dg(t,"label"),Dg(t,"labelLine"),Dg(t,"upperLabel"),Dg(t,"edgeLabel")}function Ig(t,e){var n=Mg(t)&&t[e],r=Mg(n)&&n.textStyle;if(r){0;for(var o=0,i=si.length;o<i;o++){var a=si[o];r.hasOwnProperty(a)&&(n[a]=r[a])}}}function Og(t){t&&(Ag(t),Ig(t,"label"),t.emphasis&&Ig(t.emphasis,"label"))}function Lg(t){if(Mg(t)){kg(t),Ag(t),Ig(t,"label"),Ig(t,"upperLabel"),Ig(t,"edgeLabel"),t.emphasis&&(Ig(t.emphasis,"label"),Ig(t.emphasis,"upperLabel"),Ig(t.emphasis,"edgeLabel"));var e=t.markPoint;e&&(kg(e),Og(e));var n=t.markLine;n&&(kg(n),Og(n));var r=t.markArea;r&&Og(r);var o=t.data;if("graph"===t.type){o=o||t.nodes;var i=t.links||t.edges;if(i&&!Q(i))for(var a=0;a<i.length;a++)Og(i[a]);z(t.categories,function(t){Ag(t)})}if(o&&!Q(o))for(a=0;a<o.length;a++)Og(o[a]);if(e=t.markPoint,e&&e.data){var u=e.data;for(a=0;a<u.length;a++)Og(u[a])}if(n=t.markLine,n&&n.data){var s=n.data;for(a=0;a<s.length;a++)X(s[a])?(Og(s[a][0]),Og(s[a][1])):Og(s[a])}"gauge"===t.type?(Ig(t,"axisLabel"),Ig(t,"title"),Ig(t,"detail")):"treemap"===t.type?(Dg(t.breadcrumb,"itemStyle"),z(t.levels,function(t){Ag(t)})):"tree"===t.type&&Ag(t.leaves)}}function Eg(t){return X(t)?t:t?[t]:[]}function Ng(t){return(X(t)?t[0]:t)||{}}function Rg(t,e){Cg(Eg(t.series),function(t){Mg(t)&&Lg(t)});var n=["xAxis","yAxis","radiusAxis","angleAxis","singleAxis","parallelAxis","radar"];e&&n.push("valueAxis","categoryAxis","logAxis","timeAxis"),Cg(n,function(e){Cg(Eg(t[e]),function(t){t&&(Ig(t,"axisLabel"),Ig(t.axisPointer,"label"))})}),Cg(Eg(t.parallel),function(t){var e=t&&t.parallelAxisDefault;Ig(e,"axisLabel"),Ig(e&&e.axisPointer,"label")}),Cg(Eg(t.calendar),function(t){Dg(t,"itemStyle"),Ig(t,"dayLabel"),Ig(t,"monthLabel"),Ig(t,"yearLabel")}),Cg(Eg(t.radar),function(t){Ig(t,"name"),t.name&&null==t.axisName&&(t.axisName=t.name,delete t.name),null!=t.nameGap&&null==t.axisNameGap&&(t.axisNameGap=t.nameGap,delete t.nameGap)}),Cg(Eg(t.geo),function(t){Mg(t)&&(Og(t),Cg(Eg(t.regions),function(t){Og(t)}))}),Cg(Eg(t.timeline),function(t){Og(t),Dg(t,"label"),Dg(t,"itemStyle"),Dg(t,"controlStyle",!0);var e=t.data;X(e)&&z(e,function(t){K(t)&&(Dg(t,"label"),Dg(t,"itemStyle"))})}),Cg(Eg(t.toolbox),function(t){Dg(t,"iconStyle"),Cg(t.feature,function(t){Dg(t,"iconStyle")})}),Ig(Ng(t.axisPointer),"label"),Ig(Ng(t.tooltip).axisPointer,"label")}function Pg(t,e){for(var n=e.split(","),r=t,o=0;o<n.length;o++)if(r=r&&r[n[o]],null==r)break;return r}function zg(t,e,n,r){for(var o,i=e.split(","),a=t,u=0;u<i.length-1;u++)o=i[u],null==a[o]&&(a[o]={}),a=a[o];(r||null==a[i[u]])&&(a[i[u]]=n)}function Bg(t){t&&z(Vg,function(e){e[0]in t&&!(e[1]in t)&&(t[e[1]]=t[e[0]])})}var Vg=[["x","left"],["y","top"],["x2","right"],["y2","bottom"]],Hg=["grid","geo","parallel","legend","toolbox","title","visualMap","dataZoom","timeline"],Fg=[["borderRadius","barBorderRadius"],["borderColor","barBorderColor"],["borderWidth","barBorderWidth"]];function Wg(t){var e=t&&t.itemStyle;if(e)for(var n=0;n<Fg.length;n++){var r=Fg[n][1],o=Fg[n][0];null!=e[r]&&(e[o]=e[r])}}function Ug(t){t&&"edge"===t.alignTo&&null!=t.margin&&null==t.edgeDistance&&(t.edgeDistance=t.margin)}function Gg(t){t&&t.downplay&&!t.blur&&(t.blur=t.downplay)}function jg(t){t&&null!=t.focusNodeAdjacency&&(t.emphasis=t.emphasis||{},null==t.emphasis.focus&&(t.emphasis.focus="adjacency"))}function Xg(t,e){if(t)for(var n=0;n<t.length;n++)e(t[n]),t[n]&&Xg(t[n].children,e)}function Yg(t,e){Rg(t,e),t.series=ai(t.series),z(t.series,function(t){if(K(t)){var e=t.type;if("line"===e)null!=t.clipOverflow&&(t.clip=t.clipOverflow);else if("pie"===e||"gauge"===e){null!=t.clockWise&&(t.clockwise=t.clockWise),Ug(t.label);var n=t.data;if(n&&!Q(n))for(var r=0;r<n.length;r++)Ug(n[r]);null!=t.hoverOffset&&(t.emphasis=t.emphasis||{},(t.emphasis.scaleSize=null)&&(t.emphasis.scaleSize=t.hoverOffset))}else if("gauge"===e){var o=Pg(t,"pointer.color");null!=o&&zg(t,"itemStyle.color",o)}else if("bar"===e){Wg(t),Wg(t.backgroundStyle),Wg(t.emphasis);n=t.data;if(n&&!Q(n))for(r=0;r<n.length;r++)"object"===typeof n[r]&&(Wg(n[r]),Wg(n[r]&&n[r].emphasis))}else if("sunburst"===e){var i=t.highlightPolicy;i&&(t.emphasis=t.emphasis||{},t.emphasis.focus||(t.emphasis.focus=i)),Gg(t),Xg(t.data,Gg)}else"graph"===e||"sankey"===e?jg(t):"map"===e&&(t.mapType&&!t.map&&(t.map=t.mapType),t.mapLocation&&O(t,t.mapLocation));null!=t.hoverAnimation&&(t.emphasis=t.emphasis||{},t.emphasis&&null==t.emphasis.scale&&(t.emphasis.scale=t.hoverAnimation)),Bg(t)}}),t.dataRange&&(t.visualMap=t.dataRange),z(Hg,function(e){var n=t[e];n&&(X(n)||(n=[n]),z(n,function(t){Bg(t)}))})}function qg(t){var e=mt();t.eachSeries(function(t){var n=t.get("stack");if(n){var r=e.get(n)||e.set(n,[]),o=t.getData(),i={stackResultDimension:o.getCalculationInfo("stackResultDimension"),stackedOverDimension:o.getCalculationInfo("stackedOverDimension"),stackedDimension:o.getCalculationInfo("stackedDimension"),stackedByDimension:o.getCalculationInfo("stackedByDimension"),isStackedByIndex:o.getCalculationInfo("isStackedByIndex"),data:o,seriesModel:t};if(!i.stackedDimension||!i.isStackedByIndex&&!i.stackedByDimension)return;r.length&&o.setCalculationInfo("stackedOnSeries",r[r.length-1].seriesModel),r.push(i)}}),e.each(Zg)}function Zg(t){z(t,function(e,n){var r=[],o=[NaN,NaN],i=[e.stackResultDimension,e.stackedOverDimension],a=e.data,u=e.isStackedByIndex,s=a.map(i,function(i,s,l){var c,f,d=a.get(e.stackedDimension,l);if(isNaN(d))return o;u?f=a.getRawIndex(l):c=a.get(e.stackedByDimension,l);for(var h=NaN,p=n-1;p>=0;p--){var g=t[p];if(u||(f=g.data.rawIndexOf(g.stackedByDimension,c)),f>=0){var m=g.data.getByRawIndex(g.stackResultDimension,f);if(d>=0&&m>0||d<=0&&m<0){d=Wo(d,m),h=m;break}}}return r[0]=d,r[1]=h,r});a.hostModel.setData(s),e.data=s})}var $g,Kg,Jg,Qg,tm,em=function(){function t(t){this.data=t.data||(t.sourceFormat===kp?{}:[]),this.sourceFormat=t.sourceFormat||Ap,this.seriesLayoutBy=t.seriesLayoutBy||Ip,this.startIndex=t.startIndex||0,this.dimensionsDefine=t.dimensionsDefine,this.dimensionsDetectedCount=t.dimensionsDetectedCount,this.encodeDefine=t.encodeDefine,this.metaRawOption=t.metaRawOption}return t}();function nm(t){return t instanceof em}function rm(t,e,n,r){n=n||um(t);var o=e.seriesLayoutBy,i=sm(t,n,o,e.sourceHeader,e.dimensions),a=new em({data:t,sourceFormat:n,seriesLayoutBy:o,dimensionsDefine:i.dimensionsDefine,startIndex:i.startIndex,dimensionsDetectedCount:i.dimensionsDetectedCount,encodeDefine:am(r),metaRawOption:k(e)});return a}function om(t){return new em({data:t,sourceFormat:Q(t)?Dp:Cp})}function im(t){return new em({data:t.data,sourceFormat:t.sourceFormat,seriesLayoutBy:t.seriesLayoutBy,dimensionsDefine:k(t.dimensionsDefine),startIndex:t.startIndex,dimensionsDetectedCount:t.dimensionsDetectedCount,encodeDefine:am(t.encodeDefine)})}function am(t){return t?mt(t):null}function um(t){var e=Ap;if(Q(t))e=Dp;else if(X(t)){0===t.length&&(e=Mp);for(var n=0,r=t.length;n<r;n++){var o=t[n];if(null!=o){if(X(o)){e=Mp;break}if(K(o)){e=Tp;break}}}}else if(K(t))for(var i in t)if(bt(t,i)&&P(t[i])){e=kp;break}return e}function sm(t,e,n,r,o){var i,a;if(!t)return{dimensionsDefine:cm(o),startIndex:a,dimensionsDetectedCount:i};if(e===Mp){var u=t;"auto"===r||null==r?fm(function(t){null!=t&&"-"!==t&&(q(t)?null==a&&(a=1):a=0)},n,u,10):a=$(r)?r:r?1:0,o||1!==a||(o=[],fm(function(t,e){o[e]=null!=t?t+"":""},n,u,1/0)),i=o?o.length:n===Op?u.length:u[0]?u[0].length:null}else if(e===Tp)o||(o=lm(t));else if(e===kp)o||(o=[],z(t,function(t,e){o.push(e)}));else if(e===Cp){var s=li(t[0]);i=X(s)&&s.length||1}return{startIndex:a,dimensionsDefine:cm(o),dimensionsDetectedCount:i}}function lm(t){var e,n=0;while(n<t.length&&!(e=t[n++]));if(e){var r=[];return z(e,function(t,e){r.push(e)}),r}}function cm(t){if(t){var e=mt();return B(t,function(t,n){t=K(t)?t:{name:t};var r={name:t.name,displayName:t.displayName,type:t.type};if(null==r.name)return r;r.name+="",null==r.displayName&&(r.displayName=r.name);var o=e.get(r.name);return o?r.name+="-"+o.count++:e.set(r.name,{count:1}),r})}}function fm(t,e,n,r){if(e===Op)for(var o=0;o<n.length&&o<r;o++)t(n[o]?n[o][0]:null,o);else{var i=n[0]||[];for(o=0;o<i.length&&o<r;o++)t(i[o],o)}}var dm=function(){function t(t,e){var n=nm(t)?t:om(t);this._source=n;var r=this._data=n.data;n.sourceFormat===Dp&&(this._offset=0,this._dimSize=e,this._data=r),tm(this,r,n)}return t.prototype.getSource=function(){return this._source},t.prototype.count=function(){return 0},t.prototype.getItem=function(t,e){},t.prototype.appendData=function(t){},t.prototype.clean=function(){},t.protoInitialize=function(){var e=t.prototype;e.pure=!1,e.persistent=!0}(),t.internalField=function(){var t;tm=function(t,o,i){var a=i.sourceFormat,u=i.seriesLayoutBy,s=i.startIndex,l=i.dimensionsDefine,c=Qg[_m(a,u)];if(I(t,c),a===Dp)t.getItem=e,t.count=r,t.fillStorage=n;else{var f=gm(a,u);t.getItem=G(f,null,o,s,l);var d=ym(a,u);t.count=G(d,null,o,s,l)}};var e=function(t,e){t-=this._offset,e=e||[];for(var n=this._data,r=this._dimSize,o=r*t,i=0;i<r;i++)e[i]=n[o+i];return e},n=function(t,e,n,r){for(var o=this._data,i=this._dimSize,a=0;a<i;a++){for(var u=r[a],s=null==u[0]?1/0:u[0],l=null==u[1]?-1/0:u[1],c=e-t,f=n[a],d=0;d<c;d++){var h=o[d*i+a];f[t+d]=h,h<s&&(s=h),h>l&&(l=h)}u[0]=s,u[1]=l}},r=function(){return this._data?this._data.length/this._dimSize:0};function o(t){for(var e=0;e<t.length;e++)this._data.push(t[e])}t={},t[Mp+"_"+Ip]={pure:!0,appendData:o},t[Mp+"_"+Op]={pure:!0,appendData:function(){throw new Error('Do not support appendData when set seriesLayoutBy: "row".')}},t[Tp]={pure:!0,appendData:o},t[kp]={pure:!0,appendData:function(t){var e=this._data;z(t,function(t,n){for(var r=e[n]||(e[n]=[]),o=0;o<(t||[]).length;o++)r.push(t[o])})}},t[Cp]={appendData:o},t[Dp]={persistent:!1,pure:!0,appendData:function(t){this._data=t},clean:function(){this._offset+=this.count(),this._data=null}},Qg=t}(),t}(),hm=function(t,e,n,r){return t[r]},pm=($g={},$g[Mp+"_"+Ip]=function(t,e,n,r){return t[r+e]},$g[Mp+"_"+Op]=function(t,e,n,r){r+=e;for(var o=[],i=t,a=0;a<i.length;a++){var u=i[a];o.push(u?u[r]:null)}return o},$g[Tp]=hm,$g[kp]=function(t,e,n,r){for(var o=[],i=0;i<n.length;i++){var a=n[i].name;0;var u=t[a];o.push(u?u[r]:null)}return o},$g[Cp]=hm,$g);function gm(t,e){var n=pm[_m(t,e)];return n}var mm=function(t,e,n){return t.length},vm=(Kg={},Kg[Mp+"_"+Ip]=function(t,e,n){return Math.max(0,t.length-e)},Kg[Mp+"_"+Op]=function(t,e,n){var r=t[0];return r?Math.max(0,r.length-e):0},Kg[Tp]=mm,Kg[kp]=function(t,e,n){var r=n[0].name;var o=t[r];return o?o.length:0},Kg[Cp]=mm,Kg);function ym(t,e){var n=vm[_m(t,e)];return n}var bm=function(t,e,n){return null!=e?t[e]:t},xm=(Jg={},Jg[Mp]=bm,Jg[Tp]=function(t,e,n){return null!=e?t[n]:t},Jg[kp]=bm,Jg[Cp]=function(t,e,n){var r=li(t);return null!=e&&r instanceof Array?r[e]:r},Jg[Dp]=bm,Jg);function wm(t){var e=xm[t];return e}function _m(t,e){return t===Mp?t+"_"+e:t}function Sm(t,e,n){if(t){var r=t.getRawDataItem(e);if(null!=r){var o,i,a=t.getProvider().getSource().sourceFormat,u=t.getDimensionInfo(n);return u&&(o=u.name,i=u.index),wm(a)(r,i,o)}}}var Cm=/\{@(.+?)\}/g,Mm=function(){function t(){}return t.prototype.getDataParams=function(t,e){var n=this.getData(e),r=this.getRawValue(t,e),o=n.getRawIndex(t),i=n.getName(t),a=n.getRawDataItem(t),u=n.getItemVisual(t,"style"),s=u&&u[n.getItemVisual(t,"drawType")||"fill"],l=u&&u.stroke,c=this.mainType,f="series"===c,d=n.userOutput;return{componentType:c,componentSubType:this.subType,componentIndex:this.componentIndex,seriesType:f?this.subType:null,seriesIndex:this.seriesIndex,seriesId:f?this.id:null,seriesName:f?this.name:null,name:i,dataIndex:o,data:a,dataType:e,value:r,color:s,borderColor:l,dimensionNames:d?d.dimensionNames:null,encode:d?d.encode:null,$vars:["seriesName","name","value"]}},t.prototype.getFormattedLabel=function(t,e,n,r,o,i){e=e||"normal";var a=this.getData(n),u=this.getDataParams(t,n);if(i&&(u.value=i.interpolatedValue),null!=r&&X(u.value)&&(u.value=u.value[r]),!o){var s=a.getItemModel(t);o=s.get("normal"===e?["label","formatter"]:[e,"label","formatter"])}if("function"===typeof o)return u.status=e,u.dimensionIndex=r,o(u);if("string"===typeof o){var l=Jh(o,u);return l.replace(Cm,function(e,n){var r=n.length,o="["===n.charAt(0)&&"]"===n.charAt(r-1)?+n.slice(1,r-1):n,u=Sm(a,t,o);if(i&&X(i.interpolatedValue)){var s=a.getDimensionInfo(o);s&&(u=i.interpolatedValue[s.index])}return null!=u?u+"":""})}},t.prototype.getRawValue=function(t,e){return Sm(this.getData(e),t)},t.prototype.formatTooltip=function(t,e,n){},t}();function Tm(t){var e,n;return K(t)?t.type&&(n=t):e=t,{markupText:e,markupFragment:n}}function km(t){return new Dm(t)}var Dm=function(){function t(t){t=t||{},this._reset=t.reset,this._plan=t.plan,this._count=t.count,this._onDirty=t.onDirty,this._dirty=!0}return t.prototype.perform=function(t){var e,n=this._upstream,r=t&&t.skip;if(this._dirty&&n){var o=this.context;o.data=o.outputData=n.context.outputData}this.__pipeline&&(this.__pipeline.currentTask=this),this._plan&&!r&&(e=this._plan(this.context));var i,a=c(this._modBy),u=this._modDataCount||0,s=c(t&&t.modBy),l=t&&t.modDataCount||0;function c(t){return!(t>=1)&&(t=1),t}a===s&&u===l||(e="reset"),(this._dirty||"reset"===e)&&(this._dirty=!1,i=this._doReset(r)),this._modBy=s,this._modDataCount=l;var f=t&&t.step;if(this._dueEnd=n?n._outputDueEnd:this._count?this._count(this.context):1/0,this._progress){var d=this._dueIndex,h=Math.min(null!=f?this._dueIndex+f:1/0,this._dueEnd);if(!r&&(i||d<h)){var p=this._progress;if(X(p))for(var g=0;g<p.length;g++)this._doProgress(p[g],d,h,s,l);else this._doProgress(p,d,h,s,l)}this._dueIndex=h;var m=null!=this._settedOutputEnd?this._settedOutputEnd:h;0,this._outputDueEnd=m}else this._dueIndex=this._outputDueEnd=null!=this._settedOutputEnd?this._settedOutputEnd:this._dueEnd;return this.unfinished()},t.prototype.dirty=function(){this._dirty=!0,this._onDirty&&this._onDirty(this.context)},t.prototype._doProgress=function(t,e,n,r,o){Am.reset(e,n,r,o),this._callingProgress=t,this._callingProgress({start:e,end:n,count:n-e,next:Am.next},this.context)},t.prototype._doReset=function(t){var e,n;this._dueIndex=this._outputDueEnd=this._dueEnd=0,this._settedOutputEnd=null,!t&&this._reset&&(e=this._reset(this.context),e&&e.progress&&(n=e.forceFirstProgress,e=e.progress),X(e)&&!e.length&&(e=null)),this._progress=e,this._modBy=this._modDataCount=null;var r=this._downstream;return r&&r.dirty(),n},t.prototype.unfinished=function(){return this._progress&&this._dueIndex<this._dueEnd},t.prototype.pipe=function(t){(this._downstream!==t||this._dirty)&&(this._downstream=t,t._upstream=this,t.dirty())},t.prototype.dispose=function(){this._disposed||(this._upstream&&(this._upstream._downstream=null),this._downstream&&(this._downstream._upstream=null),this._dirty=!1,this._disposed=!0)},t.prototype.getUpstream=function(){return this._upstream},t.prototype.getDownstream=function(){return this._downstream},t.prototype.setOutputEnd=function(t){this._outputDueEnd=this._settedOutputEnd=t},t}(),Am=function(){var t,e,n,r,o,i={reset:function(s,l,c,f){e=s,t=l,n=c,r=f,o=Math.ceil(r/n),i.next=n>1&&r>0?u:a}};return i;function a(){return e<t?e++:null}function u(){var i=e%o*n+Math.ceil(e/o),a=e>=t?null:i<r?i:e;return e++,a}}();function Im(t,e){var n=e&&e.type;if("ordinal"===n){var r=e&&e.ordinalMeta;return r?r.parseAndCollect(t):t}return"time"===n&&"number"!==typeof t&&null!=t&&"-"!==t&&(t=+Yo(t)),null==t||""===t?NaN:+t}var Om=mt({number:function(t){return parseFloat(t)},time:function(t){return+Yo(t)},trim:function(t){return"string"===typeof t?ft(t):t}});function Lm(t){return Om.get(t)}var Em={lt:function(t,e){return t<e},lte:function(t,e){return t<=e},gt:function(t,e){return t>e},gte:function(t,e){return t>=e}},Nm=function(){function t(t,e){if("number"!==typeof e){var n="";0,eg(n)}this._opFn=Em[t],this._rvalFloat=Qo(e)}return t.prototype.evaluate=function(t){return"number"===typeof t?this._opFn(t,this._rvalFloat):this._opFn(Qo(t),this._rvalFloat)},t}(),Rm=function(){function t(t,e){var n="desc"===t;this._resultLT=n?1:-1,null==e&&(e=n?"min":"max"),this._incomparable="min"===e?-1/0:1/0}return t.prototype.evaluate=function(t,e){var n=typeof t,r=typeof e,o="number"===n?t:Qo(t),i="number"===r?e:Qo(e),a=isNaN(o),u=isNaN(i);if(a&&(o=this._incomparable),u&&(i=this._incomparable),a&&u){var s="string"===n,l="string"===r;s&&(o=l?t:0),l&&(i=s?e:0)}return o<i?this._resultLT:o>i?-this._resultLT:0},t}(),Pm=function(){function t(t,e){this._rval=e,this._isEQ=t,this._rvalTypeof=typeof e,this._rvalFloat=Qo(e)}return t.prototype.evaluate=function(t){var e=t===this._rval;if(!e){var n=typeof t;n===this._rvalTypeof||"number"!==n&&"number"!==this._rvalTypeof||(e=Qo(t)===this._rvalFloat)}return this._isEQ?e:!e},t}();function zm(t,e){return"eq"===t||"ne"===t?new Pm("eq"===t,e):bt(Em,t)?new Nm(t,e):null}var Bm=function(){function t(){}return t.prototype.getRawData=function(){throw new Error("not supported")},t.prototype.getRawDataItem=function(t){throw new Error("not supported")},t.prototype.cloneRawData=function(){},t.prototype.getDimensionInfo=function(t){},t.prototype.cloneAllDimensionInfo=function(){},t.prototype.count=function(){},t.prototype.retrieveValue=function(t,e){},t.prototype.retrieveValueFromItem=function(t,e){},t.prototype.convertValue=function(t,e){return Im(t,e)},t}();function Vm(t,e){var n=new Bm,r=t.data,o=n.sourceFormat=t.sourceFormat,i=t.startIndex,a="";t.seriesLayoutBy!==Ip&&eg(a);var u=[],s={},l=t.dimensionsDefine;if(l)z(l,function(t,e){var n=t.name,r={index:e,name:n,displayName:t.displayName};if(u.push(r),null!=n){var o="";bt(s,n)&&eg(o),s[n]=r}});else for(var c=0;c<t.dimensionsDetectedCount;c++)u.push({index:c});var f=gm(o,Ip);e.__isBuiltIn&&(n.getRawDataItem=function(t){return f(r,i,u,t)},n.getRawData=G(Hm,null,t)),n.cloneRawData=G(Fm,null,t);var d=ym(o,Ip);n.count=G(d,null,r,i,u);var h=wm(o);n.retrieveValue=function(t,e){var n=f(r,i,u,t);return p(n,e)};var p=n.retrieveValueFromItem=function(t,e){if(null!=t){var n=u[e];return n?h(t,e,n.name):void 0}};return n.getDimensionInfo=G(Wm,null,u,s),n.cloneAllDimensionInfo=G(Um,null,u),n}function Hm(t){var e=t.sourceFormat;if(!qm(e)){var n="";0,eg(n)}return t.data}function Fm(t){var e=t.sourceFormat,n=t.data;if(!qm(e)){var r="";0,eg(r)}if(e===Mp){for(var o=[],i=0,a=n.length;i<a;i++)o.push(n[i].slice());return o}if(e===Tp){for(o=[],i=0,a=n.length;i<a;i++)o.push(I({},n[i]));return o}}function Wm(t,e,n){if(null!=n)return"number"===typeof n||!isNaN(n)&&!bt(e,n)?t[n]:bt(e,n)?e[n]:void 0}function Um(t){return k(t)}var Gm=mt();function jm(t){t=k(t);var e=t.type,n="";e||eg(n);var r=e.split(":");2!==r.length&&eg(n);var o=!1;"echarts"===r[0]&&(e=r[1],o=!0),t.__isBuiltIn=o,Gm.set(e,t)}function Xm(t,e,n){var r=ai(t),o=r.length,i="";o||eg(i);for(var a=0,u=o;a<u;a++){var s=r[a];e=Ym(s,e,n,1===o?null:a),a!==u-1&&(e.length=Math.max(e.length,1))}return e}function Ym(t,e,n,r){var o="";e.length||eg(o),K(t)||eg(o);var i=t.type,a=Gm.get(i);a||eg(o);var u=B(e,function(t){return Vm(t,a)}),s=ai(a.transform({upstream:u[0],upstreamList:u,config:k(t.config)}));return B(s,function(t,n){var r="";K(t)||eg(r),t.data||eg(r);var o,i=um(t.data);qm(i)||eg(r);var a=e[0];if(a&&0===n&&!t.dimensions){var u=a.startIndex;u&&(t.data=a.data.slice(0,u).concat(t.data)),o={seriesLayoutBy:Ip,sourceHeader:u,dimensions:a.metaRawOption.dimensions}}else o={seriesLayoutBy:Ip,sourceHeader:0,dimensions:t.dimensions};return rm(t.data,o,null,null)})}function qm(t){return t===Mp||t===Tp}var Zm=function(){function t(t){this._sourceList=[],this._upstreamSignList=[],this._versionSignBase=0,this._sourceHost=t}return t.prototype.dirty=function(){this._setLocalSource([],[])},t.prototype._setLocalSource=function(t,e){this._sourceList=t,this._upstreamSignList=e,this._versionSignBase++,this._versionSignBase>9e10&&(this._versionSignBase=0)},t.prototype._getVersionSign=function(){return this._sourceHost.uid+"_"+this._versionSignBase},t.prototype.prepareSource=function(){this._isDirty()&&this._createSource()},t.prototype._createSource=function(){this._setLocalSource([],[]);var t,e,n=this._sourceHost,r=this._getUpstreamSourceManagers(),o=!!r.length;if(Km(n)){var i=n,a=void 0,u=void 0,s=void 0;if(o){var l=r[0];l.prepareSource(),s=l.getSource(),a=s.data,u=s.sourceFormat,e=[l._getVersionSign()]}else a=i.get("data",!0),u=Q(a)?Dp:Cp,e=[];var c=this._getSourceMetaRawOption(),f=s?s.metaRawOption:null,d=at(c.seriesLayoutBy,f?f.seriesLayoutBy:null),h=at(c.sourceHeader,f?f.sourceHeader:null),p=at(c.dimensions,f?f.dimensions:null);t=[rm(a,{seriesLayoutBy:d,sourceHeader:h,dimensions:p},u,i.get("encode",!0))]}else{var g=n;if(o){var m=this._applyTransform(r);t=m.sourceList,e=m.upstreamSignList}else{var v=g.get("source",!0);t=[rm(v,this._getSourceMetaRawOption(),null,null)],e=[]}}this._setLocalSource(t,e)},t.prototype._applyTransform=function(t){var e,n=this._sourceHost,r=n.get("transform",!0),o=n.get("fromTransformResult",!0);if(null!=o){var i="";1!==t.length&&Jm(i)}var a=[],u=[];return z(t,function(t){t.prepareSource();var e=t.getSource(o||0),n="";null==o||e||Jm(n),a.push(e),u.push(t._getVersionSign())}),r?e=Xm(r,a,{datasetIndex:n.componentIndex}):null!=o&&(e=[im(a[0])]),{sourceList:e,upstreamSignList:u}},t.prototype._isDirty=function(){var t=this._sourceList;if(!t.length)return!0;for(var e=this._getUpstreamSourceManagers(),n=0;n<e.length;n++){var r=e[n];if(r._isDirty()||this._upstreamSignList[n]!==r._getVersionSign())return!0}},t.prototype.getSource=function(t){return this._sourceList[t||0]},t.prototype._getUpstreamSourceManagers=function(){var t=this._sourceHost;if(Km(t)){var e=zp(t);return e?[e.getSourceManager()]:[]}return B(Bp(t),function(t){return t.getSourceManager()})},t.prototype._getSourceMetaRawOption=function(){var t,e,n,r=this._sourceHost;if(Km(r))t=r.get("seriesLayoutBy",!0),e=r.get("sourceHeader",!0),n=r.get("dimensions",!0);else if(!this._getUpstreamSourceManagers().length){var o=r;t=o.get("seriesLayoutBy",!0),e=o.get("sourceHeader",!0),n=o.get("dimensions",!0)}return{seriesLayoutBy:t,sourceHeader:e,dimensions:n}},t}();function $m(t){var e=t.option.transform;e&&ht(t.option.transform)}function Km(t){return"series"===t.mainType}function Jm(t){throw new Error(t)}var Qm="line-height:1";function tv(t,e){var n=t.color||"#6e7079",r=t.fontSize||12,o=t.fontWeight||"400",i=t.color||"#464646",a=t.fontSize||14,u=t.fontWeight||"900";return"html"===e?{nameStyle:"font-size:"+qh(r+"")+"px;color:"+qh(n)+";font-weight:"+qh(o+""),valueStyle:"font-size:"+qh(a+"")+"px;color:"+qh(i)+";font-weight:"+qh(u+"")}:{nameStyle:{fontSize:r,fill:n,fontWeight:o},valueStyle:{fontSize:a,fill:i,fontWeight:u}}}var ev=[0,10,20,30],nv=["","\n","\n\n","\n\n\n"];function rv(t,e){return e.type=t,e}function ov(t){return bt(iv,t.type)&&iv[t.type]}var iv={section:{planLayout:function(t){var e=t.blocks.length,n=e>1||e>0&&!t.noHeader,r=0;z(t.blocks,function(t){ov(t).planLayout(t);var e=t.__gapLevelBetweenSubBlocks;e>=r&&(r=e+(!n||e&&("section"!==t.type||t.noHeader)?0:1))}),t.__gapLevelBetweenSubBlocks=r},build:function(t,e,n,r){var o=e.noHeader,i=sv(e),a=av(t,e,o?n:i.html,r);if(o)return a;var u=Zh(e.header,"ordinal",t.useUTC),s=tv(r,t.renderMode).nameStyle;return"richText"===t.renderMode?dv(t,u,s)+i.richText+a:lv('<div style="'+s+";"+Qm+';">'+qh(u)+"</div>"+a,n)}},nameValue:{planLayout:function(t){t.__gapLevelBetweenSubBlocks=0},build:function(t,e,n,r){var o=t.renderMode,i=e.noName,a=e.noValue,u=!e.markerType,s=e.name,l=e.value,c=t.useUTC;if(!i||!a){var f=u?"":t.markupStyleCreator.makeTooltipMarker(e.markerType,e.markerColor||"#333",o),d=i?"":Zh(s,"ordinal",c),h=e.valueType,p=a?[]:X(l)?B(l,function(t,e){return Zh(t,X(h)?h[e]:h,c)}):[Zh(l,X(h)?h[0]:h,c)],g=!u||!i,m=!u&&i,v=tv(r,o),y=v.nameStyle,b=v.valueStyle;return"richText"===o?(u?"":f)+(i?"":dv(t,d,y))+(a?"":hv(t,p,g,m,b)):lv((u?"":f)+(i?"":cv(d,!u,y))+(a?"":fv(p,g,m,b)),n)}}}};function av(t,e,n,r){var o=[],i=e.blocks||[];ct(!i||X(i)),i=i||[];var a=t.orderMode;if(e.sortBlocks&&a){i=i.slice();var u={valueAsc:"asc",valueDesc:"desc"};if(bt(u,a)){var s=new Rm(u[a],null);i.sort(function(t,e){return s.evaluate(t.sortParam,e.sortParam)})}else"seriesDesc"===a&&i.reverse()}var l=sv(e);if(z(i,function(e,n){var i=ov(e).build(t,e,n>0?l.html:0,r);null!=i&&o.push(i)}),o.length)return"richText"===t.renderMode?o.join(l.richText):lv(o.join(""),n)}function uv(t,e,n,r,o,i){if(t){var a=ov(t);a.planLayout(t);var u={useUTC:o,renderMode:n,orderMode:r,markupStyleCreator:e};return a.build(u,t,0,i)}}function sv(t){var e=t.__gapLevelBetweenSubBlocks;return{html:ev[e],richText:nv[e]}}function lv(t,e){var n='<div style="clear:both"></div>',r="margin: "+e+"px 0 0";return'<div style="'+r+";"+Qm+';">'+t+n+"</div>"}function cv(t,e,n){var r=e?"margin-left:2px":"";return'<span style="'+n+";"+r+'">'+qh(t)+"</span>"}function fv(t,e,n,r){var o=n?"10px":"20px",i=e?"float:right;margin-left:"+o:"";return'<span style="'+i+";"+r+'">'+B(t,function(t){return qh(t)}).join("&nbsp;&nbsp;")+"</span>"}function dv(t,e,n){return t.markupStyleCreator.wrapRichTextStyle(e,n)}function hv(t,e,n,r,o){var i=[o],a=r?10:20;return n&&i.push({padding:[0,0,0,a],align:"right"}),t.markupStyleCreator.wrapRichTextStyle(e.join("  "),i)}function pv(t,e){var n=t.getData().getItemVisual(e,"style"),r=n[t.visualDrawType];return ep(r)}function gv(t,e){var n=t.get("padding");return null!=n?n:"richText"===e?[8,10]:10}var mv=function(){function t(){this.richTextStyles={},this._nextStyleNameId=ei()}return t.prototype._generateStyleName=function(){return"__EC_aUTo_"+this._nextStyleNameId++},t.prototype.makeTooltipMarker=function(t,e,n){var r="richText"===n?this._generateStyleName():null,o=tp({color:e,type:t,renderMode:n,markerId:r});return q(o)?o:(this.richTextStyles[r]=o.style,o.content)},t.prototype.wrapRichTextStyle=function(t,e){var n={};X(e)?z(e,function(t){return I(n,t)}):I(n,e);var r=this._generateStyleName();return this.richTextStyles[r]=n,"{"+r+"|"+t+"}"},t}();function vv(t){var e,n,r,o,i=t.series,a=t.dataIndex,u=t.multipleSeries,s=i.getData(),l=s.mapDimensionsAll("defaultedTooltip"),c=l.length,f=i.getRawValue(a),d=X(f),h=pv(i,a);if(c>1||d&&!c){var p=yv(f,i,a,l,h);e=p.inlineValues,n=p.inlineValueTypes,r=p.blocks,o=p.inlineValues[0]}else if(c){var g=s.getDimensionInfo(l[0]);o=e=Sm(s,a,l[0]),n=g.type}else o=e=d?f[0]:f;var m=wi(i),v=m&&i.name||"",y=s.getName(a),b=u?v:y;return rv("section",{header:v,noHeader:u||!m,sortParam:o,blocks:[rv("nameValue",{markerType:"item",markerColor:h,name:b,noName:!ft(b),value:e,valueType:n})].concat(r||[])})}function yv(t,e,n,r,o){var i=e.getData(),a=V(t,function(t,e,n){var r=i.getDimensionInfo(n);return t||r&&!1!==r.tooltip&&null!=r.displayName},!1),u=[],s=[],l=[];function c(t,e){var n=i.getDimensionInfo(e);n&&!1!==n.otherDims.tooltip&&(a?l.push(rv("nameValue",{markerType:"subItem",markerColor:o,name:n.displayName,value:t,valueType:n.type})):(u.push(t),s.push(n.type)))}return r.length?z(r,function(t){c(Sm(i,n,t),t)}):z(t,c),{inlineValues:u,inlineValueTypes:s,blocks:l}}var bv=Di();function xv(t,e){return t.getName(e)||t.getId(e)}var wv=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._selectedDataIndicesMap={},e}return i(e,t),e.prototype.init=function(t,e,n){this.seriesIndex=this.componentIndex,this.dataTask=km({count:Cv,reset:Mv}),this.dataTask.context={model:this},this.mergeDefaultAndTheme(t,n);var r=bv(this).sourceManager=new Zm(this);r.prepareSource();var o=this.getInitialData(t,n);kv(o,this),this.dataTask.context.data=o,bv(this).dataBeforeProcessed=o,_v(this),this._initSelectedMapFromData(o)},e.prototype.mergeDefaultAndTheme=function(t,e){var n=dp(this),r=n?pp(t):{},o=this.subType;bp.hasClass(o)&&(o+="Series"),D(t,e.getTheme().get(this.subType)),D(t,this.getDefaultOption()),ui(t,"label",["show"]),this.fillDataTextStyle(t.data),n&&hp(t,r,n)},e.prototype.mergeOption=function(t,e){t=D(this.option,t,!0),this.fillDataTextStyle(t.data);var n=dp(this);n&&hp(this.option,t,n);var r=bv(this).sourceManager;r.dirty(),r.prepareSource();var o=this.getInitialData(t,e);kv(o,this),this.dataTask.dirty(),this.dataTask.context.data=o,bv(this).dataBeforeProcessed=o,_v(this),this._initSelectedMapFromData(o)},e.prototype.fillDataTextStyle=function(t){if(t&&!Q(t))for(var e=["show"],n=0;n<t.length;n++)t[n]&&t[n].label&&ui(t[n],"label",e)},e.prototype.getInitialData=function(t,e){},e.prototype.appendData=function(t){var e=this.getRawData();e.appendData(t.data)},e.prototype.getData=function(t){var e=Av(this);if(e){var n=e.context.data;return null==t?n:n.getLinkedData(t)}return bv(this).data},e.prototype.getAllData=function(){var t=this.getData();return t&&t.getLinkedDataAll?t.getLinkedDataAll():[{data:t}]},e.prototype.setData=function(t){var e=Av(this);if(e){var n=e.context;n.outputData=t,e!==this.dataTask&&(n.data=t)}bv(this).data=t},e.prototype.getSource=function(){return bv(this).sourceManager.getSource()},e.prototype.getRawData=function(){return bv(this).dataBeforeProcessed},e.prototype.getBaseAxis=function(){var t=this.coordinateSystem;return t&&t.getBaseAxis&&t.getBaseAxis()},e.prototype.formatTooltip=function(t,e,n){return vv({series:this,dataIndex:t,multipleSeries:e})},e.prototype.isAnimationEnabled=function(){if(d.node)return!1;var t=this.getShallow("animation");return t&&this.getData().count()>this.getShallow("animationThreshold")&&(t=!1),!!t},e.prototype.restoreData=function(){this.dataTask.dirty()},e.prototype.getColorFromPalette=function(t,e,n){var r=this.ecModel,o=Xp.prototype.getColorFromPalette.call(this,t,e,n);return o||(o=r.getColorFromPalette(t,e,n)),o},e.prototype.coordDimToDataDim=function(t){return this.getRawData().mapDimensionsAll(t)},e.prototype.getProgressive=function(){return this.get("progressive")},e.prototype.getProgressiveThreshold=function(){return this.get("progressiveThreshold")},e.prototype.select=function(t,e){this._innerSelect(this.getData(e),t)},e.prototype.unselect=function(t,e){var n=this.option.selectedMap;if(n)for(var r=this.getData(e),o=0;o<t.length;o++){var i=t[o],a=xv(r,i);n[a]=!1,this._selectedDataIndicesMap[a]=-1}},e.prototype.toggleSelect=function(t,e){for(var n=[],r=0;r<t.length;r++)n[0]=t[r],this.isSelected(t[r],e)?this.unselect(n,e):this.select(n,e)},e.prototype.getSelectedDataIndices=function(){for(var t=this._selectedDataIndicesMap,e=W(t),n=[],r=0;r<e.length;r++){var o=t[e[r]];o>=0&&n.push(o)}return n},e.prototype.isSelected=function(t,e){var n=this.option.selectedMap;if(!n)return!1;var r=this.getData(e),o=xv(r,t);return n[o]||!1},e.prototype._innerSelect=function(t,e){var n,r,o=this.option.selectedMode,i=e.length;if(o&&i)if("multiple"===o)for(var a=this.option.selectedMap||(this.option.selectedMap={}),u=0;u<i;u++){var s=e[u],l=xv(t,s);a[l]=!0,this._selectedDataIndicesMap[l]=t.getRawIndex(s)}else if("single"===o||!0===o){var c=e[i-1];l=xv(t,c);this.option.selectedMap=(n={},n[l]=!0,n),this._selectedDataIndicesMap=(r={},r[l]=t.getRawIndex(c),r)}},e.prototype._initSelectedMapFromData=function(t){if(!this.option.selectedMap){var e=[];t.hasItemOption&&t.each(function(n){var r=t.getRawDataItem(n);r&&r.selected&&e.push(n)}),e.length>0&&this._innerSelect(t,e)}},e.registerClass=function(t){return bp.registerClass(t)},e.protoInitialize=function(){var t=e.prototype;t.type="series.__base__",t.seriesIndex=0,t.useColorPaletteOnData=!1,t.ignoreStyleOnData=!1,t.hasSymbolVisual=!1,t.defaultSymbol="circle",t.visualStyleAccessPath="itemStyle",t.visualDrawType="fill"}(),e}(bp);function _v(t){var e=t.name;wi(t)||(t.name=Sv(t)||e)}function Sv(t){var e=t.getRawData(),n=e.mapDimensionsAll("seriesName"),r=[];return z(n,function(t){var n=e.getDimensionInfo(t);n.displayName&&r.push(n.displayName)}),r.join(" ")}function Cv(t){return t.model.getRawData().count()}function Mv(t){var e=t.model;return e.setData(e.getRawData().cloneShallow()),Tv}function Tv(t,e){e.outputData&&t.end>e.outputData.count()&&e.model.getRawData().cloneShallow(e.outputData)}function kv(t,e){z(u(t.CHANGABLE_METHODS,t.DOWNSAMPLE_METHODS),function(n){t.wrapMethod(n,j(Dv,e))})}function Dv(t,e){var n=Av(t);return n&&n.setOutputEnd((e||this).count()),e}function Av(t){var e=(t.ecModel||{}).scheduler,n=e&&e.getPipeline(t.uid);if(n){var r=n.currentTask;if(r){var o=r.agentStubMap;o&&(r=o.get(t.uid))}return r}}R(wv,Mm),R(wv,Xp),qi(wv,bp);var Iv=wv,Ov=function(){function t(){this.group=new _o,this.uid=Zd("viewComponent")}return t.prototype.init=function(t,e){},t.prototype.render=function(t,e,n,r){},t.prototype.dispose=function(t,e){},t.prototype.updateView=function(t,e,n,r){},t.prototype.updateLayout=function(t,e,n,r){},t.prototype.updateVisual=function(t,e,n,r){},t.prototype.blurSeries=function(t,e){},t}();Xi(Ov),Qi(Ov);var Lv=Ov;function Ev(){var t=Di();return function(e){var n=t(e),r=e.pipelineContext,o=!!n.large,i=!!n.progressiveRender,a=n.large=!(!r||!r.large),u=n.progressiveRender=!(!r||!r.progressiveRender);return!(o===a&&i===u)&&"reset"}}var Nv=Di(),Rv=Ev(),Pv=function(){function t(){this.group=new _o,this.uid=Zd("viewChart"),this.renderTask=km({plan:Vv,reset:Hv}),this.renderTask.context={view:this}}return t.prototype.init=function(t,e){},t.prototype.render=function(t,e,n,r){},t.prototype.highlight=function(t,e,n,r){Bv(t.getData(),r,"emphasis")},t.prototype.downplay=function(t,e,n,r){Bv(t.getData(),r,"normal")},t.prototype.remove=function(t,e){this.group.removeAll()},t.prototype.dispose=function(t,e){},t.prototype.updateView=function(t,e,n,r){this.render(t,e,n,r)},t.prototype.updateLayout=function(t,e,n,r){this.render(t,e,n,r)},t.prototype.updateVisual=function(t,e,n,r){this.render(t,e,n,r)},t.markUpdateMethod=function(t,e){Nv(t).updateMethod=e},t.protoInitialize=function(){var e=t.prototype;e.type="chart"}(),t}();function zv(t,e,n){t&&("emphasis"===e?kl:Dl)(t,n)}function Bv(t,e,n){var r=ki(t,e),o=e&&null!=e.highlightKey?Jl(e.highlightKey):null;null!=r?z(ai(r),function(e){zv(t.getItemGraphicEl(e),n,o)}):t.eachItemGraphicEl(function(t){zv(t,n,o)})}function Vv(t){return Rv(t.model)}function Hv(t){var e=t.model,n=t.ecModel,r=t.api,o=t.payload,i=e.pipelineContext.progressiveRender,a=t.view,u=o&&Nv(o).updateMethod,s=i?"incrementalPrepareRender":u&&a[u]?u:"render";return"render"!==s&&a[s](e,n,r,o),Fv[s]}Xi(Pv,["dispose"]),Qi(Pv);var Fv={incrementalPrepareRender:{progress:function(t,e){e.view.incrementalRender(t,e.model,e.ecModel,e.api,e.payload)}},render:{forceFirstProgress:!0,progress:function(t,e){e.view.render(e.model,e.ecModel,e.api,e.payload)}}},Wv=Pv,Uv="\0__throttleOriginMethod",Gv="\0__throttleRate",jv="\0__throttleType";function Xv(t,e,n){var r,o,i,a,u,s=0,l=0,c=null;function f(){l=(new Date).getTime(),c=null,t.apply(i,a||[])}e=e||0;var d=function(){for(var t=[],d=0;d<arguments.length;d++)t[d]=arguments[d];r=(new Date).getTime(),i=this,a=t;var h=u||e,p=u||n;u=null,o=r-(p?s:l)-h,clearTimeout(c),p?c=setTimeout(f,h):o>=0?f():c=setTimeout(f,-o),s=r};return d.clear=function(){c&&(clearTimeout(c),c=null)},d.debounceNextCall=function(t){u=t},d}function Yv(t,e,n,r){var o=t[e];if(o){var i=o[Uv]||o,a=o[jv],u=o[Gv];if(u!==n||a!==r){if(null==n||!r)return t[e]=i;o=t[e]=Xv(i,n,"debounce"===r),o[Uv]=i,o[jv]=r,o[Gv]=n}return o}}function qv(t,e){var n=t[e];n&&n[Uv]&&(t[e]=n[Uv])}var Zv=Di(),$v={itemStyle:ta(Ud,!0),lineStyle:ta(Hd,!0)},Kv={lineStyle:"stroke",itemStyle:"fill"};function Jv(t,e){var n=t.visualStyleMapper||$v[e];return n||(console.warn("Unkown style type '"+e+"'."),$v.itemStyle)}function Qv(t,e){var n=t.visualDrawType||Kv[e];return n||(console.warn("Unkown style type '"+e+"'."),"fill")}var ty={createOnAllSeries:!0,performRawSeries:!0,reset:function(t,e){var n=t.getData(),r=t.visualStyleAccessPath||"itemStyle",o=t.getModel(r),i=Jv(t,r),a=i(o),u=o.getShallow("decal");u&&(n.setVisual("decal",u),u.dirty=!0);var s=Qv(t,r),l=a[s],c=Y(l)?l:null,f="auto"===a.fill||"auto"===a.stroke;if(!a[s]||c||f){var d=t.getColorFromPalette(t.name,null,e.getSeriesCount());a[s]||(a[s]=d,n.setVisual("colorFromPalette",!0)),a.fill="auto"===a.fill||"function"===typeof a.fill?d:a.fill,a.stroke="auto"===a.stroke||"function"===typeof a.stroke?d:a.stroke}if(n.setVisual("style",a),n.setVisual("drawType",s),!e.isSeriesFiltered(t)&&c)return n.setVisual("colorFromPalette",!1),{dataEach:function(e,n){var r=t.getDataParams(n),o=I({},a);o[s]=c(r),e.setItemVisual(n,"style",o)}}}},ey=new Yd,ny={createOnAllSeries:!0,performRawSeries:!0,reset:function(t,e){if(!t.ignoreStyleOnData&&!e.isSeriesFiltered(t)){var n=t.getData(),r=t.visualStyleAccessPath||"itemStyle",o=Jv(t,r),i=n.getVisual("drawType");return{dataEach:n.hasItemOption?function(t,e){var n=t.getRawDataItem(e);if(n&&n[r]){ey.option=n[r];var a=o(ey),u=t.ensureUniqueItemVisual(e,"style");I(u,a),ey.option.decal&&(t.setItemVisual(e,"decal",ey.option.decal),ey.option.decal.dirty=!0),i in a&&t.setItemVisual(e,"colorFromPalette",!1)}}:null}}}},ry={performRawSeries:!0,overallReset:function(t){var e=mt();t.eachSeries(function(t){if(t.useColorPaletteOnData){var n=e.get(t.type);n||(n={},e.set(t.type,n)),Zv(t).scope=n}}),t.eachSeries(function(e){if(e.useColorPaletteOnData&&!t.isSeriesFiltered(e)){var n=e.getRawData(),r={},o=e.getData(),i=Zv(e).scope,a=e.visualStyleAccessPath||"itemStyle",u=Qv(e,a);o.each(function(t){var e=o.getRawIndex(t);r[e]=t}),n.each(function(t){var a=r[t],s=o.getItemVisual(a,"colorFromPalette");if(s){var l=o.ensureUniqueItemVisual(a,"style"),c=n.getName(t)||t+"",f=n.count();l[u]=e.getColorFromPalette(c,i,f)}})}})}},oy=Math.PI;function iy(t,e){e=e||{},O(e,{text:"loading",textColor:"#000",fontSize:12,fontWeight:"normal",fontStyle:"normal",fontFamily:"sans-serif",maskColor:"rgba(255, 255, 255, 0.8)",showSpinner:!0,color:"#5470c6",spinnerRadius:10,lineWidth:5,zlevel:0});var n=new _o,r=new As({style:{fill:e.maskColor},zlevel:e.zlevel,z:1e4});n.add(r);var o,i=new Us({style:{text:e.text,fill:e.textColor,fontSize:e.fontSize,fontWeight:e.fontWeight,fontStyle:e.fontStyle,fontFamily:e.fontFamily},zlevel:e.zlevel,z:10001}),a=new As({style:{fill:"none"},textContent:i,textConfig:{position:"right",distance:10},zlevel:e.zlevel,z:10001});return n.add(a),e.showSpinner&&(o=new yf({shape:{startAngle:-oy/2,endAngle:-oy/2+.1,r:e.spinnerRadius},style:{stroke:e.color,lineCap:"round",lineWidth:e.lineWidth},zlevel:e.zlevel,z:10001}),o.animateShape(!0).when(1e3,{endAngle:3*oy/2}).start("circularInOut"),o.animateShape(!0).when(1e3,{startAngle:3*oy/2}).delay(300).start("circularInOut"),n.add(o)),n.resize=function(){var n=i.getBoundingRect().width,u=e.showSpinner?e.spinnerRadius:0,s=(t.getWidth()-2*u-(e.showSpinner&&n?10:0)-n)/2-(e.showSpinner&&n?0:5+n/2)+(e.showSpinner?0:n/2)+(n?0:u),l=t.getHeight()/2;e.showSpinner&&o.setShape({cx:s,cy:l}),a.setShape({x:s-u,y:l-u,width:2*u,height:2*u}),r.setShape({x:0,y:0,width:t.getWidth(),height:t.getHeight()})},n.resize(),n}var ay=function(){function t(t,e,n,r){this._stageTaskMap=mt(),this.ecInstance=t,this.api=e,n=this._dataProcessorHandlers=n.slice(),r=this._visualHandlers=r.slice(),this._allHandlers=n.concat(r)}return t.prototype.restoreData=function(t,e){t.restoreData(e),this._stageTaskMap.each(function(t){var e=t.overallTask;e&&e.dirty()})},t.prototype.getPerformArgs=function(t,e){if(t.__pipeline){var n=this._pipelineMap.get(t.__pipeline.id),r=n.context,o=!e&&n.progressiveEnabled&&(!r||r.progressiveRender)&&t.__idxInPipeline>n.blockIndex,i=o?n.step:null,a=r&&r.modDataCount,u=null!=a?Math.ceil(a/i):null;return{step:i,modBy:u,modDataCount:a}}},t.prototype.getPipeline=function(t){return this._pipelineMap.get(t)},t.prototype.updateStreamModes=function(t,e){var n=this._pipelineMap.get(t.uid),r=t.getData(),o=r.count(),i=n.progressiveEnabled&&e.incrementalPrepareRender&&o>=n.threshold,a=t.get("large")&&o>=t.get("largeThreshold"),u="mod"===t.get("progressiveChunkMode")?o:null;t.pipelineContext=n.context={progressiveRender:i,modDataCount:u,large:a}},t.prototype.restorePipelines=function(t){var e=this,n=e._pipelineMap=mt();t.eachSeries(function(t){var r=t.getProgressive(),o=t.uid;n.set(o,{id:o,head:null,tail:null,threshold:t.getProgressiveThreshold(),progressiveEnabled:r&&!(t.preventIncremental&&t.preventIncremental()),blockIndex:-1,step:Math.round(r||700),count:0}),e._pipe(t,t.dataTask)})},t.prototype.prepareStageTasks=function(){var t=this._stageTaskMap,e=this.api.getModel(),n=this.api;z(this._allHandlers,function(r){var o=t.get(r.uid)||t.set(r.uid,{}),i="";ct(!(r.reset&&r.overallReset),i),r.reset&&this._createSeriesStageTask(r,o,e,n),r.overallReset&&this._createOverallStageTask(r,o,e,n)},this)},t.prototype.prepareView=function(t,e,n,r){var o=t.renderTask,i=o.context;i.model=e,i.ecModel=n,i.api=r,o.__block=!t.incrementalPrepareRender,this._pipe(e,o)},t.prototype.performDataProcessorTasks=function(t,e){this._performStageTasks(this._dataProcessorHandlers,t,e,{block:!0})},t.prototype.performVisualTasks=function(t,e,n){this._performStageTasks(this._visualHandlers,t,e,n)},t.prototype._performStageTasks=function(t,e,n,r){r=r||{};var o=!1,i=this;function a(t,e){return t.setDirty&&(!t.dirtyMap||t.dirtyMap.get(e.__pipeline.id))}z(t,function(t,u){if(!r.visualType||r.visualType===t.visualType){var s=i._stageTaskMap.get(t.uid),l=s.seriesTaskMap,c=s.overallTask;if(c){var f,d=c.agentStubMap;d.each(function(t){a(r,t)&&(t.dirty(),f=!0)}),f&&c.dirty(),i.updatePayload(c,n);var h=i.getPerformArgs(c,r.block);d.each(function(t){t.perform(h)}),c.perform(h)&&(o=!0)}else l&&l.each(function(u,s){a(r,u)&&u.dirty();var l=i.getPerformArgs(u,r.block);l.skip=!t.performRawSeries&&e.isSeriesFiltered(u.context.model),i.updatePayload(u,n),u.perform(l)&&(o=!0)})}}),this.unfinished=o||this.unfinished},t.prototype.performSeriesTasks=function(t){var e;t.eachSeries(function(t){e=t.dataTask.perform()||e}),this.unfinished=e||this.unfinished},t.prototype.plan=function(){this._pipelineMap.each(function(t){var e=t.tail;do{if(e.__block){t.blockIndex=e.__idxInPipeline;break}e=e.getUpstream()}while(e)})},t.prototype.updatePayload=function(t,e){"remain"!==e&&(t.context.payload=e)},t.prototype._createSeriesStageTask=function(t,e,n,r){var o=this,i=e.seriesTaskMap,a=e.seriesTaskMap=mt(),u=t.seriesType,s=t.getTargetSeries;function l(e){var u=e.uid,s=a.set(u,i&&i.get(u)||km({plan:fy,reset:dy,count:gy}));s.context={model:e,ecModel:n,api:r,useClearVisual:t.isVisual&&!t.isLayout,plan:t.plan,reset:t.reset,scheduler:o},o._pipe(e,s)}t.createOnAllSeries?n.eachRawSeries(l):u?n.eachRawSeriesByType(u,l):s&&s(n,r).each(l)},t.prototype._createOverallStageTask=function(t,e,n,r){var o=this,i=e.overallTask=e.overallTask||km({reset:uy});i.context={ecModel:n,api:r,overallReset:t.overallReset,scheduler:o};var a=i.agentStubMap,u=i.agentStubMap=mt(),s=t.seriesType,l=t.getTargetSeries,c=!0,f=!1,d="";function h(t){var e=t.uid,n=u.set(e,a&&a.get(e)||(f=!0,km({reset:sy,onDirty:cy})));n.context={model:t,overallProgress:c},n.agent=i,n.__block=c,o._pipe(t,n)}ct(!t.createOnAllSeries,d),s?n.eachRawSeriesByType(s,h):l?l(n,r).each(h):(c=!1,z(n.getSeries(),h)),f&&i.dirty()},t.prototype._pipe=function(t,e){var n=t.uid,r=this._pipelineMap.get(n);!r.head&&(r.head=e),r.tail&&r.tail.pipe(e),r.tail=e,e.__idxInPipeline=r.count++,e.__pipeline=r},t.wrapStageHandler=function(t,e){return Y(t)&&(t={overallReset:t,seriesType:my(t)}),t.uid=Zd("stageHandler"),e&&(t.visualType=e),t},t}();function uy(t){t.overallReset(t.ecModel,t.api,t.payload)}function sy(t){return t.overallProgress&&ly}function ly(){this.agent.dirty(),this.getDownstream().dirty()}function cy(){this.agent&&this.agent.dirty()}function fy(t){return t.plan?t.plan(t.model,t.ecModel,t.api,t.payload):null}function dy(t){t.useClearVisual&&t.data.clearAllVisual();var e=t.resetDefines=ai(t.reset(t.model,t.ecModel,t.api,t.payload));return e.length>1?B(e,function(t,e){return py(e)}):hy}var hy=py(0);function py(t){return function(e,n){var r=n.data,o=n.resetDefines[t];if(o&&o.dataEach)for(var i=e.start;i<e.end;i++)o.dataEach(r,i);else o&&o.progress&&o.progress(e,r)}}function gy(t){return t.data.count()}function my(t){vy=null;try{t(yy,by)}catch(e){}return vy}var vy,yy={},by={};function xy(t,e){for(var n in e.prototype)t[n]=xt}xy(yy,cg),xy(by,hg),yy.eachSeriesByType=yy.eachRawSeriesByType=function(t){vy=t},yy.eachComponent=function(t){"series"===t.mainType&&t.subType&&(vy=t.subType)};var wy=ay,_y=["#37A2DA","#32C5E9","#67E0E3","#9FE6B8","#FFDB5C","#ff9f7f","#fb7293","#E062AE","#E690D1","#e7bcf3","#9d96f5","#8378EA","#96BFFF"],Sy={color:_y,colorLayer:[["#37A2DA","#ffd85c","#fd7b5f"],["#37A2DA","#67E0E3","#FFDB5C","#ff9f7f","#E062AE","#9d96f5"],["#37A2DA","#32C5E9","#9FE6B8","#FFDB5C","#ff9f7f","#fb7293","#e7bcf3","#8378EA","#96BFFF"],_y]},Cy="#B9B8CE",My="#100C2A",Ty=function(){return{axisLine:{lineStyle:{color:Cy}},splitLine:{lineStyle:{color:"#484753"}},splitArea:{areaStyle:{color:["rgba(255,255,255,0.02)","rgba(255,255,255,0.05)"]}},minorSplitLine:{lineStyle:{color:"#20203B"}}}},ky=["#4992ff","#7cffb2","#fddd60","#ff6e76","#58d9f9","#05c091","#ff8a45","#8d48e3","#dd79ff"],Dy={darkMode:!0,color:ky,backgroundColor:My,axisPointer:{lineStyle:{color:"#817f91"},crossStyle:{color:"#817f91"},label:{color:"#fff"}},legend:{textStyle:{color:Cy}},textStyle:{color:Cy},title:{textStyle:{color:"#EEF1FA"},subtextStyle:{color:"#B9B8CE"}},toolbox:{iconStyle:{borderColor:Cy}},dataZoom:{borderColor:"#71708A",textStyle:{color:Cy},brushStyle:{color:"rgba(135,163,206,0.3)"},handleStyle:{color:"#353450",borderColor:"#C5CBE3"},moveHandleStyle:{color:"#B0B6C3",opacity:.3},fillerColor:"rgba(135,163,206,0.2)",emphasis:{handleStyle:{borderColor:"#91B7F2",color:"#4D587D"},moveHandleStyle:{color:"#636D9A",opacity:.7}},dataBackground:{lineStyle:{color:"#71708A",width:1},areaStyle:{color:"#71708A"}},selectedDataBackground:{lineStyle:{color:"#87A3CE"},areaStyle:{color:"#87A3CE"}}},visualMap:{textStyle:{color:Cy}},timeline:{lineStyle:{color:Cy},label:{color:Cy},controlStyle:{color:Cy,borderColor:Cy}},calendar:{itemStyle:{color:My},dayLabel:{color:Cy},monthLabel:{color:Cy},yearLabel:{color:Cy}},timeAxis:Ty(),logAxis:Ty(),valueAxis:Ty(),categoryAxis:Ty(),line:{symbol:"circle"},graph:{color:ky},gauge:{title:{color:Cy},axisLine:{lineStyle:{color:[[1,"rgba(207,212,219,0.2)"]]}},axisLabel:{color:Cy},detail:{color:"#EEF1FA"}},candlestick:{itemStyle:{color:"#f64e56",color0:"#54ea92",borderColor:"#f64e56",borderColor0:"#54ea92"}}};Dy.categoryAxis.splitLine.show=!1;var Ay=Dy,Iy=function(){function t(){}return t.prototype.normalizeQuery=function(t){var e={},n={},r={};if(q(t)){var o=Ui(t);e.mainType=o.main||null,e.subType=o.sub||null}else{var i=["Index","Name","Id"],a={name:1,dataIndex:1,dataType:1};z(t,function(t,o){for(var u=!1,s=0;s<i.length;s++){var l=i[s],c=o.lastIndexOf(l);if(c>0&&c===o.length-l.length){var f=o.slice(0,c);"data"!==f&&(e.mainType=f,e[l.toLowerCase()]=t,u=!0)}}a.hasOwnProperty(o)&&(n[o]=t,u=!0),u||(r[o]=t)})}return{cptQuery:e,dataQuery:n,otherQuery:r}},t.prototype.filter=function(t,e){var n=this.eventInfo;if(!n)return!0;var r=n.targetEl,o=n.packedEvent,i=n.model,a=n.view;if(!i||!a)return!0;var u=e.cptQuery,s=e.dataQuery;return l(u,i,"mainType")&&l(u,i,"subType")&&l(u,i,"index","componentIndex")&&l(u,i,"name")&&l(u,i,"id")&&l(s,o,"name")&&l(s,o,"dataIndex")&&l(s,o,"dataType")&&(!a.filterForExposedEvent||a.filterForExposedEvent(t,e.otherQuery,r,o));function l(t,e,n,r){return null==t[n]||e[r||n]===t[n]}},t.prototype.afterTrigger=function(){this.eventInfo=null},t}(),Oy={createOnAllSeries:!0,performRawSeries:!0,reset:function(t,e){var n=t.getData();if(t.legendIcon&&n.setVisual("legendIcon",t.legendIcon),t.hasSymbolVisual){var r=t.get("symbol"),o=t.get("symbolSize"),i=t.get("symbolKeepAspect"),a=t.get("symbolRotate"),u=t.get("symbolOffset"),s=Y(r),l=Y(o),c=Y(a),f=Y(u),d=s||l||c||f,h=!s&&r?r:t.defaultSymbol,p=l?null:o,g=c?null:a,m=f?null:u;if(n.setVisual({legendIcon:t.legendIcon||h,symbol:h,symbolSize:p,symbolKeepAspect:i,symbolRotate:g,symbolOffset:m}),!e.isSeriesFiltered(t))return{dataEach:d?v:null}}function v(e,n){var i=t.getRawValue(n),d=t.getDataParams(n);s&&e.setItemVisual(n,"symbol",r(i,d)),l&&e.setItemVisual(n,"symbolSize",o(i,d)),c&&e.setItemVisual(n,"symbolRotate",a(i,d)),f&&e.setItemVisual(n,"symbolOffset",u(i,d))}}},Ly={createOnAllSeries:!0,performRawSeries:!0,reset:function(t,e){if(t.hasSymbolVisual&&!e.isSeriesFiltered(t)){var n=t.getData();return{dataEach:n.hasItemOption?r:null}}function r(t,e){var n=t.getItemModel(e),r=n.getShallow("symbol",!0),o=n.getShallow("symbolSize",!0),i=n.getShallow("symbolRotate",!0),a=n.getShallow("symbolOffset",!0),u=n.getShallow("symbolKeepAspect",!0);null!=r&&t.setItemVisual(e,"symbol",r),null!=o&&t.setItemVisual(e,"symbolSize",o),null!=i&&t.setItemVisual(e,"symbolRotate",i),null!=a&&t.setItemVisual(e,"symbolOffset",a),null!=u&&t.setItemVisual(e,"symbolKeepAspect",u)}}};function Ey(t,e,n){switch(n){case"color":var r=t.getItemVisual(e,"style");return r[t.getVisual("drawType")];case"opacity":return t.getItemVisual(e,"style").opacity;case"symbol":case"symbolSize":case"liftZ":return t.getItemVisual(e,n);default:0}}function Ny(t,e){switch(e){case"color":var n=t.getVisual("style");return n[t.getVisual("drawType")];case"opacity":return t.getVisual("style").opacity;case"symbol":case"symbolSize":case"liftZ":return t.getVisual(e);default:0}}function Ry(t,e,n,r){switch(n){case"color":var o=t.ensureUniqueItemVisual(e,"style");o[t.getVisual("drawType")]=r,t.setItemVisual(e,"colorFromPalette",!1);break;case"opacity":t.ensureUniqueItemVisual(e,"style").opacity=r;break;case"symbol":case"symbolSize":case"liftZ":t.setItemVisual(e,n,r);break;default:0}}var Py=2*Math.PI,zy=Hu.CMD,By=["top","right","bottom","left"];function Vy(t,e,n,r,o){var i=n.width,a=n.height;switch(t){case"top":r.set(n.x+i/2,n.y-e),o.set(0,-1);break;case"bottom":r.set(n.x+i/2,n.y+a+e),o.set(0,1);break;case"left":r.set(n.x-e,n.y+a/2),o.set(-1,0);break;case"right":r.set(n.x+i+e,n.y+a/2),o.set(1,0);break}}function Hy(t,e,n,r,o,i,a,u,s){a-=t,u-=e;var l=Math.sqrt(a*a+u*u);a/=l,u/=l;var c=a*n+t,f=u*n+e;if(Math.abs(r-o)%Py<1e-4)return s[0]=c,s[1]=f,l-n;if(i){var d=r;r=ju(o),o=ju(d)}else r=ju(r),o=ju(o);r>o&&(o+=Py);var h=Math.atan2(u,a);if(h<0&&(h+=Py),h>=r&&h<=o||h+Py>=r&&h+Py<=o)return s[0]=c,s[1]=f,l-n;var p=n*Math.cos(r)+t,g=n*Math.sin(r)+e,m=n*Math.cos(o)+t,v=n*Math.sin(o)+e,y=(p-a)*(p-a)+(g-u)*(g-u),b=(m-a)*(m-a)+(v-u)*(v-u);return y<b?(s[0]=p,s[1]=g,Math.sqrt(y)):(s[0]=m,s[1]=v,Math.sqrt(b))}function Fy(t,e,n,r,o,i,a,u){var s=o-t,l=i-e,c=n-t,f=r-e,d=Math.sqrt(c*c+f*f);c/=d,f/=d;var h=s*c+l*f,p=h/d;u&&(p=Math.min(Math.max(p,0),1)),p*=d;var g=a[0]=t+p*c,m=a[1]=e+p*f;return Math.sqrt((g-o)*(g-o)+(m-i)*(m-i))}function Wy(t,e,n,r,o,i,a){n<0&&(t+=n,n=-n),r<0&&(e+=r,r=-r);var u=t+n,s=e+r,l=a[0]=Math.min(Math.max(o,t),u),c=a[1]=Math.min(Math.max(i,e),s);return Math.sqrt((l-o)*(l-o)+(c-i)*(c-i))}var Uy=[];function Gy(t,e,n){var r=Wy(e.x,e.y,e.width,e.height,t.x,t.y,Uy);return n.set(Uy[0],Uy[1]),r}function jy(t,e,n){for(var r,o,i=0,a=0,u=0,s=0,l=1/0,c=e.data,f=t.x,d=t.y,h=0;h<c.length;){var p=c[h++];1===h&&(i=c[h],a=c[h+1],u=i,s=a);var g=l;switch(p){case zy.M:u=c[h++],s=c[h++],i=u,a=s;break;case zy.L:g=Fy(i,a,c[h],c[h+1],f,d,Uy,!0),i=c[h++],a=c[h++];break;case zy.C:g=$a(i,a,c[h++],c[h++],c[h++],c[h++],c[h],c[h+1],f,d,Uy),i=c[h++],a=c[h++];break;case zy.Q:g=ru(i,a,c[h++],c[h++],c[h],c[h+1],f,d,Uy),i=c[h++],a=c[h++];break;case zy.A:var m=c[h++],v=c[h++],y=c[h++],b=c[h++],x=c[h++],w=c[h++];h+=1;var _=!!(1-c[h++]);r=Math.cos(x)*y+m,o=Math.sin(x)*b+v,h<=1&&(u=r,s=o);var S=(f-m)*b/y+m;g=Hy(m,v,b,x,x+w,_,S,d,Uy),i=Math.cos(x+w)*y+m,a=Math.sin(x+w)*b+v;break;case zy.R:u=i=c[h++],s=a=c[h++];var C=c[h++],M=c[h++];g=Wy(u,s,C,M,f,d,Uy);break;case zy.Z:g=Fy(i,a,u,s,f,d,Uy,!0),i=u,a=s;break}g<l&&(l=g,n.set(Uy[0],Uy[1]))}return l}var Xy=new Vr,Yy=new Vr,qy=new Vr,Zy=new Vr,$y=new Vr;function Ky(t,e){if(t){var n=t.getTextGuideLine(),r=t.getTextContent();if(r&&n){var o=t.textGuideLineConfig||{},i=[[0,0],[0,0],[0,0]],a=o.candidates||By,u=r.getBoundingRect().clone();u.applyTransform(r.getComputedTransform());var s=1/0,l=o.anchor,c=t.getComputedTransform(),f=c&&Mr([],c),d=e.get("length2")||0;l&&qy.copy(l);for(var h=0;h<a.length;h++){var p=a[h];Vy(p,0,u,Xy,Zy),Vr.scaleAndAdd(Yy,Xy,Zy,d),Yy.transform(f);var g=t.getBoundingRect(),m=l?l.distance(Yy):t instanceof ds?jy(Yy,t.path,qy):Gy(Yy,g,qy);m<s&&(s=m,Yy.transform(c),qy.transform(c),qy.toArray(i[0]),Yy.toArray(i[1]),Xy.toArray(i[2]))}tb(i,e.get("minTurnAngle")),n.setShape({points:i})}}}var Jy=[],Qy=new Vr;function tb(t,e){if(e<=180&&e>0){e=e/180*Math.PI,Xy.fromArray(t[0]),Yy.fromArray(t[1]),qy.fromArray(t[2]),Vr.sub(Zy,Xy,Yy),Vr.sub($y,qy,Yy);var n=Zy.len(),r=$y.len();if(!(n<.001||r<.001)){Zy.scale(1/n),$y.scale(1/r);var o=Zy.dot($y),i=Math.cos(e);if(i<o){var a=Fy(Yy.x,Yy.y,qy.x,qy.y,Xy.x,Xy.y,Jy,!1);Qy.fromArray(Jy),Qy.scaleAndAdd($y,a/Math.tan(Math.PI-e));var u=qy.x!==Yy.x?(Qy.x-Yy.x)/(qy.x-Yy.x):(Qy.y-Yy.y)/(qy.y-Yy.y);if(isNaN(u))return;u<0?Vr.copy(Qy,Yy):u>1&&Vr.copy(Qy,qy),Qy.toArray(t[1])}}}}function eb(t,e,n){if(n<=180&&n>0){n=n/180*Math.PI,Xy.fromArray(t[0]),Yy.fromArray(t[1]),qy.fromArray(t[2]),Vr.sub(Zy,Yy,Xy),Vr.sub($y,qy,Yy);var r=Zy.len(),o=$y.len();if(!(r<.001||o<.001)){Zy.scale(1/r),$y.scale(1/o);var i=Zy.dot(e),a=Math.cos(n);if(i<a){var u=Fy(Yy.x,Yy.y,qy.x,qy.y,Xy.x,Xy.y,Jy,!1);Qy.fromArray(Jy);var s=Math.PI/2,l=Math.acos($y.dot(e)),c=s+l-n;if(c>=s)Vr.copy(Qy,qy);else{Qy.scaleAndAdd($y,u/Math.tan(Math.PI/2-c));var f=qy.x!==Yy.x?(Qy.x-Yy.x)/(qy.x-Yy.x):(Qy.y-Yy.y)/(qy.y-Yy.y);if(isNaN(f))return;f<0?Vr.copy(Qy,Yy):f>1&&Vr.copy(Qy,qy)}Qy.toArray(t[1])}}}}function nb(t,e,n,r){var o="normal"===n,i=o?t:t.ensureState(n);i.ignore=e;var a=r.get("smooth");a&&!0===a&&(a=.3),i.shape=i.shape||{},a>0&&(i.shape.smooth=a);var u=r.getModel("lineStyle").getLineStyle();o?t.useStyle(u):i.style=u}function rb(t,e){var n=e.smooth,r=e.points;if(r)if(t.moveTo(r[0][0],r[0][1]),n>0&&r.length>=3){var o=Et(r[0],r[1]),i=Et(r[1],r[2]);if(!o||!i)return t.lineTo(r[1][0],r[1][1]),void t.lineTo(r[2][0],r[2][1]);var a=Math.min(o,i)*n,u=Pt([],r[1],r[0],a/o),s=Pt([],r[1],r[2],a/i),l=Pt([],u,s,.5);t.bezierCurveTo(u[0],u[1],u[0],u[1],l[0],l[1]),t.bezierCurveTo(s[0],s[1],s[0],s[1],r[2][0],r[2][1])}else for(var c=1;c<r.length;c++)t.lineTo(r[c][0],r[c][1])}function ob(t,e,n){var r=t.getTextGuideLine(),o=t.getTextContent();if(o){for(var i=e.normal,a=i.get("show"),u=o.ignore,s=0;s<Js.length;s++){var l=Js[s],c=e[l],f="normal"===l;if(c){var d=c.get("show"),h=f?u:at(o.states[l]&&o.states[l].ignore,u);if(h||!at(d,a)){var p=f?r:r&&r.states.normal;p&&(p.ignore=!0);continue}r||(r=new af,t.setTextGuideLine(r),f||!u&&a||nb(r,!0,"normal",e.normal),t.stateProxy&&(r.stateProxy=t.stateProxy)),nb(r,!1,l,c)}}if(r){O(r.style,n),r.style.fill=null;var g=i.get("showAbove"),m=t.textGuideLineConfig=t.textGuideLineConfig||{};m.showAbove=g||!1,r.buildPath=rb}}else r&&t.removeTextGuideLine()}function ib(t,e){e=e||"labelLine";for(var n={normal:t.getModel(e)},r=0;r<Ks.length;r++){var o=Ks[r];n[o]=t.getModel([o,e])}return n}function ab(t){for(var e=[],n=0;n<t.length;n++){var r=t[n];if(!r.defaultAttr.ignore){var o=r.label,i=o.getComputedTransform(),a=o.getBoundingRect(),u=!i||i[1]<1e-5&&i[2]<1e-5,s=o.style.margin||0,l=a.clone();l.applyTransform(i),l.x-=s/2,l.y-=s/2,l.width+=s,l.height+=s;var c=u?new Lf(a,i):null;e.push({label:o,labelLine:r.labelLine,rect:l,localRect:a,obb:c,priority:r.priority,defaultAttr:r.defaultAttr,layoutOption:r.computedLayoutOption,axisAligned:u,transform:i})}}return e}function ub(t,e,n,r,o,i){var a=t.length;if(!(a<2)){t.sort(function(t,n){return t.rect[e]-n.rect[e]});for(var u,s=0,l=!1,c=[],f=0,d=0;d<a;d++){var h=t[d],p=h.rect;u=p[e]-s,u<0&&(p[e]-=u,h.label[e]-=u,l=!0);var g=Math.max(-u,0);c.push(g),f+=g,s=p[e]+p[n]}f>0&&i&&_(-f/a,0,a);var m,v,y=t[0],b=t[a-1];return x(),m<0&&S(-m,.8),v<0&&S(v,.8),x(),w(m,v,1),w(v,m,-1),x(),m<0&&C(-m),v<0&&C(v),l}function x(){m=y.rect[e]-r,v=o-b.rect[e]-b.rect[n]}function w(t,e,n){if(t<0){var r=Math.min(e,-t);if(r>0){_(r*n,0,a);var o=r+t;o<0&&S(-o*n,1)}else S(-t*n,1)}}function _(n,r,o){0!==n&&(l=!0);for(var i=r;i<o;i++){var a=t[i],u=a.rect;u[e]+=n,a.label[e]+=n}}function S(r,o){for(var i=[],u=0,s=1;s<a;s++){var l=t[s-1].rect,c=Math.max(t[s].rect[e]-l[e]-l[n],0);i.push(c),u+=c}if(u){var f=Math.min(Math.abs(r)/u,o);if(r>0)for(s=0;s<a-1;s++){var d=i[s]*f;_(d,0,s+1)}else for(s=a-1;s>0;s--){d=i[s-1]*f;_(-d,s,a)}}}function C(t){var e=t<0?-1:1;t=Math.abs(t);for(var n=Math.ceil(t/(a-1)),r=0;r<a-1;r++)if(e>0?_(n,0,r+1):_(-n,a-r-1,a),t-=n,t<=0)return}}function sb(t,e,n,r){return ub(t,"x","width",e,n,r)}function lb(t,e,n,r){return ub(t,"y","height",e,n,r)}function cb(t){var e=[];t.sort(function(t,e){return e.priority-t.priority});var n=new Zr(0,0,0,0);function r(t){if(!t.ignore){var e=t.ensureState("emphasis");null==e.ignore&&(e.ignore=!1)}t.ignore=!0}for(var o=0;o<t.length;o++){var i=t[o],a=i.axisAligned,u=i.localRect,s=i.transform,l=i.label,c=i.labelLine;n.copy(i.rect),n.width-=.1,n.height-=.1,n.x+=.05,n.y+=.05;for(var f=i.obb,d=!1,h=0;h<e.length;h++){var p=e[h];if(n.intersect(p.rect)){if(a&&p.axisAligned){d=!0;break}if(p.obb||(p.obb=new Lf(p.localRect,p.transform)),f||(f=new Lf(u,s)),f.intersect(p.obb)){d=!0;break}}}d?(r(l),c&&r(c)):(l.attr("ignore",i.defaultAttr.ignore),c&&c.attr("ignore",i.defaultAttr.labelGuideIgnore),e.push(i))}}function fb(t){if(t){for(var e=[],n=0;n<t.length;n++)e.push(t[n].slice());return e}}function db(t,e){var n=t.label,r=e&&e.getTextGuideLine();return{dataIndex:t.dataIndex,dataType:t.dataType,seriesIndex:t.seriesModel.seriesIndex,text:t.label.style.text,rect:t.hostRect,labelRect:t.rect,align:n.style.align,verticalAlign:n.style.verticalAlign,labelLinePoints:fb(r&&r.shape.points)}}var hb=["align","verticalAlign","width","height","fontSize"],pb=new zr,gb=Di(),mb=Di();function vb(t,e,n){for(var r=0;r<n.length;r++){var o=n[r];null!=e[o]&&(t[o]=e[o])}}var yb=["x","y","rotation"],bb=function(){function t(){this._labelList=[],this._chartViewList=[]}return t.prototype.clearLabels=function(){this._labelList=[],this._chartViewList=[]},t.prototype._addLabel=function(t,e,n,r,o){var i=r.style,a=r.__hostTarget,u=a.textConfig||{},s=r.getComputedTransform(),l=r.getBoundingRect().plain();Zr.applyTransform(l,l,s),s?pb.setLocalTransform(s):(pb.x=pb.y=pb.rotation=pb.originX=pb.originY=0,pb.scaleX=pb.scaleY=1);var c,f=r.__hostTarget;if(f){c=f.getBoundingRect().plain();var d=f.getComputedTransform();Zr.applyTransform(c,c,d)}var h=c&&f.getTextGuideLine();this._labelList.push({label:r,labelLine:h,seriesModel:n,dataIndex:t,dataType:e,layoutOption:o,computedLayoutOption:null,rect:l,hostRect:c,priority:c?c.width*c.height:0,defaultAttr:{ignore:r.ignore,labelGuideIgnore:h&&h.ignore,x:pb.x,y:pb.y,scaleX:pb.scaleX,scaleY:pb.scaleY,rotation:pb.rotation,style:{x:i.x,y:i.y,align:i.align,verticalAlign:i.verticalAlign,width:i.width,height:i.height,fontSize:i.fontSize},cursor:r.cursor,attachedPos:u.position,attachedRot:u.rotation}})},t.prototype.addLabelsOfSeries=function(t){var e=this;this._chartViewList.push(t);var n=t.__model,r=n.get("labelLayout");(Y(r)||W(r).length)&&t.group.traverse(function(t){if(t.ignore)return!0;var o=t.getTextContent(),i=Gs(t);o&&!o.disableLabelLayout&&e._addLabel(i.dataIndex,i.dataType,n,o,r)})},t.prototype.updateLayoutConfig=function(t){var e=t.getWidth(),n=t.getHeight();function r(t,e){return function(){Ky(t,e)}}for(var o=0;o<this._labelList.length;o++){var i=this._labelList[o],a=i.label,u=a.__hostTarget,s=i.defaultAttr,l=void 0;l="function"===typeof i.layoutOption?i.layoutOption(db(i,u)):i.layoutOption,l=l||{},i.computedLayoutOption=l;var c=Math.PI/180;u&&u.setTextConfig({local:!1,position:null!=l.x||null!=l.y?null:s.attachedPos,rotation:null!=l.rotate?l.rotate*c:s.attachedRot,offset:[l.dx||0,l.dy||0]});var f=!1;if(null!=l.x?(a.x=Ro(l.x,e),a.setStyle("x",0),f=!0):(a.x=s.x,a.setStyle("x",s.style.x)),null!=l.y?(a.y=Ro(l.y,n),a.setStyle("y",0),f=!0):(a.y=s.y,a.setStyle("y",s.style.y)),l.labelLinePoints){var d=u.getTextGuideLine();d&&(d.setShape({points:l.labelLinePoints}),f=!1)}var h=gb(a);h.needsUpdateLabelLine=f,a.rotation=null!=l.rotate?l.rotate*c:s.rotation,a.scaleX=s.scaleX,a.scaleY=s.scaleY;for(var p=0;p<hb.length;p++){var g=hb[p];a.setStyle(g,null!=l[g]?l[g]:s.style[g])}if(l.draggable){if(a.draggable=!0,a.cursor="move",u){var m=i.seriesModel;if(null!=i.dataIndex){var v=i.seriesModel.getData(i.dataType);m=v.getItemModel(i.dataIndex)}a.on("drag",r(u,m.getModel("labelLine")))}}else a.off("drag"),a.cursor=s.cursor}},t.prototype.layout=function(t){var e=t.getWidth(),n=t.getHeight(),r=ab(this._labelList),o=H(r,function(t){return"shiftX"===t.layoutOption.moveOverlap}),i=H(r,function(t){return"shiftY"===t.layoutOption.moveOverlap});sb(o,0,e),lb(i,0,n);var a=H(r,function(t){return t.layoutOption.hideOverlap});cb(a)},t.prototype.processLabelsOverall=function(){var t=this;z(this._chartViewList,function(e){var n=e.__model,r=e.ignoreLabelLineUpdate,o=n.isAnimationEnabled();e.group.traverse(function(e){if(e.ignore)return!0;var i=!r,a=e.getTextContent();!i&&a&&(i=gb(a).needsUpdateLabelLine),i&&t._updateLabelLine(e,n),o&&t._animateLabels(e,n)})})},t.prototype._updateLabelLine=function(t,e){var n=t.getTextContent(),r=Gs(t),o=r.dataIndex;if(n&&null!=o){var i=e.getData(r.dataType),a=i.getItemModel(o),u={},s=i.getItemVisual(o,"style"),l=i.getVisual("drawType");u.stroke=s[l];var c=a.getModel("labelLine");ob(t,ib(a),u),Ky(t,c)}},t.prototype._animateLabels=function(t,e){var n=t.getTextContent(),r=t.getTextGuideLine();if(n&&!n.ignore&&!n.invisible&&!t.disableLabelAnimation&&!od(t)){var o=gb(n),i=o.oldLayout,a=Gs(t),u=a.dataIndex,s={x:n.x,y:n.y,rotation:n.rotation},l=e.getData(a.dataType);if(i){n.attr(i);var c=t.prevStates;c&&(E(c,"select")>=0&&n.attr(o.oldLayoutSelect),E(c,"emphasis")>=0&&n.attr(o.oldLayoutEmphasis)),Qf(n,s,e,u)}else if(n.attr(s),!Ed(n).valueAnimation){var f=at(n.style.opacity,1);n.style.opacity=0,td(n,{style:{opacity:f}},e,u)}if(o.oldLayout=s,n.states.select){var d=o.oldLayoutSelect={};vb(d,s,yb),vb(d,n.states.select,yb)}if(n.states.emphasis){var h=o.oldLayoutEmphasis={};vb(h,s,yb),vb(h,n.states.emphasis,yb)}Rd(n,u,l,e,e)}if(r&&!r.ignore&&!r.invisible){o=mb(r),i=o.oldLayout;var p={points:r.shape.points};i?(r.attr({shape:i}),Qf(r,{shape:p},e)):(r.setShape(p),r.style.strokePercent=0,td(r,{style:{strokePercent:1}},e)),o.oldLayout=p}},t}(),xb=bb;function wb(t,e){function n(e,n){var r=[];return e.eachComponent({mainType:"series",subType:t,query:n},function(t){r.push(t.seriesIndex)}),r}z([[t+"ToggleSelect","toggleSelect"],[t+"Select","select"],[t+"UnSelect","unselect"]],function(t){e(t[0],function(e,r,o){e=I({},e),o.dispatchAction(I(e,{type:t[1],seriesIndex:n(r,e)}))})})}function _b(t,e,n,r,o){var i=t+e;n.isSilent(i)||r.eachComponent({mainType:"series",subType:"pie"},function(t){for(var e=t.seriesIndex,r=o.selected,a=0;a<r.length;a++)if(r[a].seriesIndex===e){var u=t.getData(),s=ki(u,o.fromActionPayload);n.trigger(i,{type:i,seriesId:t.id,name:X(s)?u.getName(s[0]):u.getName(s),selected:I({},t.option.selectedMap)})}})}function Sb(t,e,n){t.on("selectchanged",function(t){var r=n.getModel();t.isFromClick?(_b("map","selectchanged",e,r,t),_b("pie","selectchanged",e,r,t)):"select"===t.fromAction?(_b("map","selected",e,r,t),_b("pie","selected",e,r,t)):"unselect"===t.fromAction&&(_b("map","unselected",e,r,t),_b("pie","unselected",e,r,t))})}function Cb(t,e,n){var r;while(t){if(e(t)&&(r=t,n))break;t=t.__hostTarget||t.parent}return r}var Mb=Math.round(9*Math.random()),Tb=function(){function t(){this._id="__ec_inner_"+Mb++}return t.prototype.get=function(t){return this._guard(t)[this._id]},t.prototype.set=function(t,e){var n=this._guard(t);return"function"===typeof Object.defineProperty?Object.defineProperty(n,this._id,{value:e,enumerable:!1,configurable:!0}):n[this._id]=e,this},t.prototype["delete"]=function(t){return!!this.has(t)&&(delete this._guard(t)[this._id],!0)},t.prototype.has=function(t){return!!this._guard(t)[this._id]},t.prototype._guard=function(t){if(t!==Object(t))throw TypeError("Value of WeakMap is not a non-null object.");return t},t}(),kb=Tb,Db=ds.extend({type:"triangle",shape:{cx:0,cy:0,width:0,height:0},buildPath:function(t,e){var n=e.cx,r=e.cy,o=e.width/2,i=e.height/2;t.moveTo(n,r-i),t.lineTo(n+o,r+i),t.lineTo(n-o,r+i),t.closePath()}}),Ab=ds.extend({type:"diamond",shape:{cx:0,cy:0,width:0,height:0},buildPath:function(t,e){var n=e.cx,r=e.cy,o=e.width/2,i=e.height/2;t.moveTo(n,r-i),t.lineTo(n+o,r),t.lineTo(n,r+i),t.lineTo(n-o,r),t.closePath()}}),Ib=ds.extend({type:"pin",shape:{x:0,y:0,width:0,height:0},buildPath:function(t,e){var n=e.x,r=e.y,o=e.width/5*3,i=Math.max(o,e.height),a=o/2,u=a*a/(i-a),s=r-i+a+u,l=Math.asin(u/a),c=Math.cos(l)*a,f=Math.sin(l),d=Math.cos(l),h=.6*a,p=.7*a;t.moveTo(n-c,s+u),t.arc(n,s,a,Math.PI-l,2*Math.PI+l),t.bezierCurveTo(n+c-f*h,s+u+d*h,n,r-p,n,r),t.bezierCurveTo(n,r-p,n-c+f*h,s+u+d*h,n-c,s+u),t.closePath()}}),Ob=ds.extend({type:"arrow",shape:{x:0,y:0,width:0,height:0},buildPath:function(t,e){var n=e.height,r=e.width,o=e.x,i=e.y,a=r/3*2;t.moveTo(o,i),t.lineTo(o+a,i+n),t.lineTo(o,i+n/4*3),t.lineTo(o-a,i+n),t.lineTo(o,i),t.closePath()}}),Lb={line:cf,rect:As,roundRect:As,square:As,circle:Tc,diamond:Ab,pin:Ib,arrow:Ob,triangle:Db},Eb={line:function(t,e,n,r,o){o.x1=t,o.y1=e+r/2,o.x2=t+n,o.y2=e+r/2},rect:function(t,e,n,r,o){o.x=t,o.y=e,o.width=n,o.height=r},roundRect:function(t,e,n,r,o){o.x=t,o.y=e,o.width=n,o.height=r,o.r=Math.min(n,r)/4},square:function(t,e,n,r,o){var i=Math.min(n,r);o.x=t,o.y=e,o.width=i,o.height=i},circle:function(t,e,n,r,o){o.cx=t+n/2,o.cy=e+r/2,o.r=Math.min(n,r)/2},diamond:function(t,e,n,r,o){o.cx=t+n/2,o.cy=e+r/2,o.width=n,o.height=r},pin:function(t,e,n,r,o){o.x=t+n/2,o.y=e+r/2,o.width=n,o.height=r},arrow:function(t,e,n,r,o){o.x=t+n/2,o.y=e+r/2,o.width=n,o.height=r},triangle:function(t,e,n,r,o){o.cx=t+n/2,o.cy=e+r/2,o.width=n,o.height=r}},Nb={};z(Lb,function(t,e){Nb[e]=new t});var Rb=ds.extend({type:"symbol",shape:{symbolType:"",x:0,y:0,width:0,height:0},calculateTextPosition:function(t,e,n){var r=uo(t,e,n),o=this.shape;return o&&"pin"===o.symbolType&&"inside"===e.position&&(r.y=n.y+.4*n.height),r},buildPath:function(t,e,n){var r=e.symbolType;if("none"!==r){var o=Nb[r];o||(r="rect",o=Nb[r]),Eb[r](e.x,e.y,e.width,e.height,o.shape),o.buildPath(t,o.shape,n)}}});function Pb(t,e){if("image"!==this.type){var n=this.style;this.__isEmptyBrush?(n.stroke=t,n.fill=e||"#fff",n.lineWidth=2):"line"===this.shape.symbolType?n.stroke=t:n.fill=t,this.markRedraw()}}function zb(t,e,n,r,o,i,a){var u,s=0===t.indexOf("empty");return s&&(t=t.substr(5,1).toLowerCase()+t.substr(6)),u=0===t.indexOf("image://")?jf(t.slice(8),new Zr(e,n,r,o),a?"center":"cover"):0===t.indexOf("path://")?Gf(t.slice(7),{},new Zr(e,n,r,o),a?"center":"cover"):new Rb({shape:{symbolType:t,x:e,y:n,width:r,height:o}}),u.__isEmptyBrush=s,u.setColor=Pb,i&&u.setColor(i),u}function Bb(t,e,n){var r=null==e.x?0:e.x,o=null==e.x2?1:e.x2,i=null==e.y?0:e.y,a=null==e.y2?0:e.y2;e.global||(r=r*n.width+n.x,o=o*n.width+n.x,i=i*n.height+n.y,a=a*n.height+n.y),r=isNaN(r)?0:r,o=isNaN(o)?1:o,i=isNaN(i)?0:i,a=isNaN(a)?0:a;var u=t.createLinearGradient(r,i,o,a);return u}function Vb(t,e,n){var r=n.width,o=n.height,i=Math.min(r,o),a=null==e.x?.5:e.x,u=null==e.y?.5:e.y,s=null==e.r?.5:e.r;e.global||(a=a*r+n.x,u=u*o+n.y,s*=i);var l=t.createRadialGradient(a,u,0,a,u,s);return l}function Hb(t,e,n){for(var r="radial"===e.type?Vb(t,e,n):Bb(t,e,n),o=e.colorStops,i=0;i<o.length;i++)r.addColorStop(o[i].offset,o[i].color);return r}function Fb(t,e){if(t===e||!t&&!e)return!1;if(!t||!e||t.length!==e.length)return!0;for(var n=0;n<t.length;n++)if(t[n]!==e[n])return!0;return!1}function Wb(t,e){return t&&"solid"!==t&&e>0?(e=e||1,"dashed"===t?[4*e,2*e]:"dotted"===t?[e]:$(t)?[t]:X(t)?t:null):null}var Ub=new Hu(!0);function Gb(t){var e=t.stroke;return!(null==e||"none"===e||!(t.lineWidth>0))}function jb(t){var e=t.fill;return null!=e&&"none"!==e}function Xb(t,e){if(null!=e.fillOpacity&&1!==e.fillOpacity){var n=t.globalAlpha;t.globalAlpha=e.fillOpacity*e.opacity,t.fill(),t.globalAlpha=n}else t.fill()}function Yb(t,e){if(null!=e.strokeOpacity&&1!==e.strokeOpacity){var n=t.globalAlpha;t.globalAlpha=e.strokeOpacity*e.opacity,t.stroke(),t.globalAlpha=n}else t.stroke()}function qb(t,e,n){var r=aa(e.image,e.__image,n);if(sa(r)){var o=t.createPattern(r,e.repeat||"repeat");if("function"===typeof DOMMatrix&&o.setTransform){var i=new DOMMatrix;i.rotateSelf(0,0,(e.rotation||0)/Math.PI*180),i.scaleSelf(e.scaleX||1,e.scaleY||1),i.translateSelf(e.x||0,e.y||0),o.setTransform(i)}return o}}function Zb(t,e,n,r){var o=Gb(n),i=jb(n),a=n.strokePercent,u=a<1,s=!e.path;e.silent&&!u||!s||e.createPathProxy();var l=e.path||Ub;if(!r){var c=n.fill,f=n.stroke,d=i&&!!c.colorStops,h=o&&!!f.colorStops,p=i&&!!c.image,g=o&&!!f.image,m=void 0,v=void 0,y=void 0,b=void 0,x=void 0;(d||h)&&(x=e.getBoundingRect()),d&&(m=e.__dirty?Hb(t,c,x):e.__canvasFillGradient,e.__canvasFillGradient=m),h&&(v=e.__dirty?Hb(t,f,x):e.__canvasStrokeGradient,e.__canvasStrokeGradient=v),p&&(y=e.__dirty||!e.__canvasFillPattern?qb(t,c,e):e.__canvasFillPattern,e.__canvasFillPattern=y),g&&(b=e.__dirty||!e.__canvasStrokePattern?qb(t,f,e):e.__canvasStrokePattern,e.__canvasStrokePattern=y),d?t.fillStyle=m:p&&(y?t.fillStyle=y:i=!1),h?t.strokeStyle=v:g&&(b?t.strokeStyle=b:o=!1)}var w=n.lineDash&&n.lineWidth>0&&Wb(n.lineDash,n.lineWidth),_=n.lineDashOffset,S=!!t.setLineDash,C=e.getGlobalScale();if(l.setScale(C[0],C[1],e.segmentIgnoreThreshold),w){var M=n.strokeNoScale&&e.getLineScale?e.getLineScale():1;M&&1!==M&&(w=B(w,function(t){return t/M}),_/=M)}var T=!0;(s||e.__dirty&Ve||w&&!S&&o)&&(l.setDPR(t.dpr),u?l.setContext(null):(l.setContext(t),T=!1),l.reset(),w&&!S&&(l.setLineDash(w),l.setLineDashOffset(_)),e.buildPath(l,e.shape,r),l.toStatic(),e.pathUpdated()),T&&l.rebuildPath(t,u?a:1),w&&S&&(t.setLineDash(w),t.lineDashOffset=_),r||(n.strokeFirst?(o&&Yb(t,n),i&&Xb(t,n)):(i&&Xb(t,n),o&&Yb(t,n))),w&&S&&t.setLineDash([])}function $b(t,e,n){var r=e.__image=aa(n.image,e.__image,e,e.onload);if(r&&sa(r)){var o=n.x||0,i=n.y||0,a=e.getWidth(),u=e.getHeight(),s=r.width/r.height;if(null==a&&null!=u?a=u*s:null==u&&null!=a?u=a/s:null==a&&null==u&&(a=r.width,u=r.height),n.sWidth&&n.sHeight){var l=n.sx||0,c=n.sy||0;t.drawImage(r,l,c,n.sWidth,n.sHeight,o,i,a,u)}else if(n.sx&&n.sy){l=n.sx,c=n.sy;var f=a-l,d=u-c;t.drawImage(r,l,c,f,d,o,i,a,u)}else t.drawImage(r,o,i,a,u)}}function Kb(t,e,n){var r=n.text;if(null!=r&&(r+=""),r){t.font=n.font||Kr,t.textAlign=n.textAlign,t.textBaseline=n.textBaseline;var o=void 0;if(t.setLineDash){var i=n.lineDash&&n.lineWidth>0&&Wb(n.lineDash,n.lineWidth),a=n.lineDashOffset;if(i){var u=n.strokeNoScale&&e.getLineScale?e.getLineScale():1;u&&1!==u&&(i=B(i,function(t){return t/u}),a/=u),t.setLineDash(i),t.lineDashOffset=a,o=!0}}n.strokeFirst?(Gb(n)&&t.strokeText(r,n.x,n.y),jb(n)&&t.fillText(r,n.x,n.y)):(jb(n)&&t.fillText(r,n.x,n.y),Gb(n)&&t.strokeText(r,n.x,n.y)),o&&t.setLineDash([])}}var Jb=["shadowBlur","shadowOffsetX","shadowOffsetY"],Qb=[["lineCap","butt"],["lineJoin","miter"],["miterLimit",10]];function tx(t,e,n,r,o){var i=!1;if(!r&&(n=n||{},e===n))return!1;if(r||e.opacity!==n.opacity){i||(fx(t,o),i=!0);var a=Math.max(Math.min(e.opacity,1),0);t.globalAlpha=isNaN(a)?Ma.opacity:a}(r||e.blend!==n.blend)&&(i||(fx(t,o),i=!0),t.globalCompositeOperation=e.blend||Ma.blend);for(var u=0;u<Jb.length;u++){var s=Jb[u];(r||e[s]!==n[s])&&(i||(fx(t,o),i=!0),t[s]=t.dpr*(e[s]||0))}return(r||e.shadowColor!==n.shadowColor)&&(i||(fx(t,o),i=!0),t.shadowColor=e.shadowColor||Ma.shadowColor),i}function ex(t,e,n,r,o){var i=dx(e,o.inHover),a=r?null:n&&dx(n,o.inHover)||{};if(i===a)return!1;var u=tx(t,i,a,r,o);if((r||i.fill!==a.fill)&&(u||(fx(t,o),u=!0),t.fillStyle=i.fill),(r||i.stroke!==a.stroke)&&(u||(fx(t,o),u=!0),t.strokeStyle=i.stroke),(r||i.opacity!==a.opacity)&&(u||(fx(t,o),u=!0),t.globalAlpha=null==i.opacity?1:i.opacity),e.hasStroke()){var s=i.lineWidth,l=s/(i.strokeNoScale&&e&&e.getLineScale?e.getLineScale():1);t.lineWidth!==l&&(u||(fx(t,o),u=!0),t.lineWidth=l)}for(var c=0;c<Qb.length;c++){var f=Qb[c],d=f[0];(r||i[d]!==a[d])&&(u||(fx(t,o),u=!0),t[d]=i[d]||f[1])}return u}function nx(t,e,n,r,o){return tx(t,dx(e,o.inHover),n&&dx(n,o.inHover),r,o)}function rx(t,e){var n=e.transform,r=t.dpr||1;n?t.setTransform(r*n[0],r*n[1],r*n[2],r*n[3],r*n[4],r*n[5]):t.setTransform(r,0,0,r,0,0)}function ox(t,e,n){for(var r=!1,o=0;o<t.length;o++){var i=t[o];r=r||i.isZeroArea(),rx(e,i),e.beginPath(),i.buildPath(e,i.shape),e.clip()}n.allClipped=r}function ix(t,e){return t&&e?t[0]!==e[0]||t[1]!==e[1]||t[2]!==e[2]||t[3]!==e[3]||t[4]!==e[4]||t[5]!==e[5]:!(!t&&!e)}var ax=1,ux=2,sx=3,lx=4;function cx(t){var e=jb(t),n=Gb(t);return!(t.lineDash||!(+e^+n)||e&&"string"!==typeof t.fill||n&&"string"!==typeof t.stroke||t.strokePercent<1||t.strokeOpacity<1||t.fillOpacity<1)}function fx(t,e){e.batchFill&&t.fill(),e.batchStroke&&t.stroke(),e.batchFill="",e.batchStroke=""}function dx(t,e){return e&&t.__hoverStyle||t.style}function hx(t,e){px(t,e,{inHover:!1,viewWidth:0,viewHeight:0},!0)}function px(t,e,n,r){var o=e.transform;if(!e.shouldBePainted(n.viewWidth,n.viewHeight,!1,!1))return e.__dirty&=~ze,void(e.__isRendered=!1);var i=e.__clipPaths,a=n.prevElClipPaths,u=!1,s=!1;if(a&&!Fb(i,a)||(a&&a.length&&(fx(t,n),t.restore(),s=u=!0,n.prevElClipPaths=null,n.allClipped=!1,n.prevEl=null),i&&i.length&&(fx(t,n),t.save(),ox(i,t,n),u=!0),n.prevElClipPaths=i),n.allClipped)e.__isRendered=!1;else{e.beforeBrush&&e.beforeBrush(),e.innerBeforeBrush();var l=n.prevEl;l||(s=u=!0);var c=e instanceof ds&&e.autoBatch&&cx(e.style);u||ix(o,l.transform)?(fx(t,n),rx(t,e)):c||fx(t,n);var f=dx(e,n.inHover);e instanceof ds?(n.lastDrawType!==ax&&(s=!0,n.lastDrawType=ax),ex(t,e,l,s,n),c&&(n.batchFill||n.batchStroke)||t.beginPath(),Zb(t,e,f,c),c&&(n.batchFill=f.fill||"",n.batchStroke=f.stroke||"")):e instanceof gs?(n.lastDrawType!==sx&&(s=!0,n.lastDrawType=sx),ex(t,e,l,s,n),Kb(t,e,f)):e instanceof xs?(n.lastDrawType!==ux&&(s=!0,n.lastDrawType=ux),nx(t,e,l,s,n),$b(t,e,f)):e instanceof Rf&&(n.lastDrawType!==lx&&(s=!0,n.lastDrawType=lx),gx(t,e,n)),c&&r&&fx(t,n),e.innerAfterBrush(),e.afterBrush&&e.afterBrush(),n.prevEl=e,e.__dirty=0,e.__isRendered=!0}}function gx(t,e,n){var r=e.getDisplayables(),o=e.getTemporalDisplayables();t.save();var i,a,u={prevElClipPaths:null,prevEl:null,allClipped:!1,viewWidth:n.viewWidth,viewHeight:n.viewHeight,inHover:n.inHover};for(i=e.getCursor(),a=r.length;i<a;i++){var s=r[i];s.beforeBrush&&s.beforeBrush(),s.innerBeforeBrush(),px(t,s,u,i===a-1),s.innerAfterBrush(),s.afterBrush&&s.afterBrush(),u.prevEl=s}for(var l=0,c=o.length;l<c;l++){s=o[l];s.beforeBrush&&s.beforeBrush(),s.innerBeforeBrush(),px(t,s,u,l===c-1),s.innerAfterBrush(),s.afterBrush&&s.afterBrush(),u.prevEl=s}e.clearTemporalDisplayables(),e.notClear=!0,t.restore()}var mx,vx=new kb,yx=new tn(100),bx=["symbol","symbolSize","symbolKeepAspect","color","backgroundColor","dashArrayX","dashArrayY","maxTileWidth","maxTileHeight"];function xx(t,e){if("none"===t)return null;var n=e.getDevicePixelRatio(),r=e.getZr(),o="svg"===r.painter.type;t.dirty&&vx["delete"](t);var i=vx.get(t);if(i)return i;var a=O(t,{symbol:"rect",symbolSize:1,symbolKeepAspect:!0,color:"rgba(0, 0, 0, 0.2)",backgroundColor:null,dashArrayX:5,dashArrayY:5,rotation:0,maxTileWidth:512,maxTileHeight:512});"none"===a.backgroundColor&&(a.backgroundColor=null);var u={repeat:"repeat"};return s(u),u.rotation=a.rotation,u.scaleX=u.scaleY=o?1:1/n,vx.set(t,u),t.dirty=!1,u;function s(t){for(var e,i=[n],u=!0,s=0;s<bx.length;++s){var l=a[bx[s]],c=typeof l;if(null!=l&&!X(l)&&"string"!==c&&"number"!==c&&"boolean"!==c){u=!1;break}i.push(l)}if(u){e=i.join(",")+(o?"-svg":"");var f=yx.get(e);f&&(o?t.svgElement=f:t.image=f)}var d,h=Sx(a.dashArrayX),p=Cx(a.dashArrayY),g=_x(a.symbol),m=Mx(h),v=Tx(p),y=!o&&L(),b=o&&r.painter.createSVGElement("g"),x=w();function w(){for(var t=1,e=0,n=m.length;e<n;++e)t=ri(t,m[e]);var r=1;for(e=0,n=g.length;e<n;++e)r=ri(r,g[e].length);t*=r;var o=v*m.length*g.length;return{width:Math.max(1,Math.min(t,a.maxTileWidth)),height:Math.max(1,Math.min(o,a.maxTileHeight))}}function _(){d&&(d.clearRect(0,0,y.width,y.height),a.backgroundColor&&(d.fillStyle=a.backgroundColor,d.fillRect(0,0,y.width,y.height)));for(var t=0,e=0;e<p.length;++e)t+=p[e];if(!(t<=0)){var i=-v,u=0,s=0,l=0;while(i<x.height){if(u%2===0){var c=s/2%g.length,f=0,m=0,w=0;while(f<2*x.width){var _=0;for(e=0;e<h[l].length;++e)_+=h[l][e];if(_<=0)break;if(m%2===0){var S=.5*(1-a.symbolSize),C=f+h[l][m]*S,M=i+p[u]*S,T=h[l][m]*a.symbolSize,k=p[u]*a.symbolSize,D=w/2%g[c].length;A(C,M,T,k,g[c][D])}f+=h[l][m],++w,++m,m===h[l].length&&(m=0)}++l,l===h.length&&(l=0)}i+=p[u],++s,++u,u===p.length&&(u=0)}}function A(t,e,i,u,s){var l=o?1:n,c=zb(s,t*l,e*l,i*l,u*l,a.color,a.symbolKeepAspect);o?b.appendChild(r.painter.paintOne(c)):hx(d,c)}}y&&(y.width=x.width*n,y.height=x.height*n,d=y.getContext("2d")),_(),u&&yx.put(e,y||b),t.image=y,t.svgElement=b,t.svgWidth=x.width,t.svgHeight=x.height}}function _x(t){if(!t||0===t.length)return[["rect"]];if("string"===typeof t)return[[t]];for(var e=!0,n=0;n<t.length;++n)if("string"!==typeof t[n]){e=!1;break}if(e)return _x([t]);var r=[];for(n=0;n<t.length;++n)"string"===typeof t[n]?r.push([t[n]]):r.push(t[n]);return r}function Sx(t){if(!t||0===t.length)return[[0,0]];if("number"===typeof t){var e=Math.ceil(t);return[[e,e]]}for(var n=!0,r=0;r<t.length;++r)if("number"!==typeof t[r]){n=!1;break}if(n)return Sx([t]);var o=[];for(r=0;r<t.length;++r)if("number"===typeof t[r]){e=Math.ceil(t[r]);o.push([e,e])}else{e=B(t[r],function(t){return Math.ceil(t)});e.length%2===1?o.push(e.concat(e)):o.push(e)}return o}function Cx(t){if(!t||"object"===typeof t&&0===t.length)return[0,0];if("number"===typeof t){var e=Math.ceil(t);return[e,e]}var n=B(t,function(t){return Math.ceil(t)});return t.length%2?n.concat(n):n}function Mx(t){return B(t,function(t){return Tx(t)})}function Tx(t){for(var e=0,n=0;n<t.length;++n)e+=t[n];return t.length%2===1?2*e:e}function kx(t,e){t.eachRawSeries(function(n){if(!t.isSeriesFiltered(n)){var r=n.getData();r.hasItemVisual()&&r.each(function(t){var n=r.getItemVisual(t,"decal");if(n){var o=r.ensureUniqueItemVisual(t,"style");o.decal=xx(n,e)}});var o=r.getVisual("decal");if(o){var i=r.getVisual("style");i.decal=xx(o,e)}}})}function Dx(t){if(q(t)){var e=new DOMParser;t=e.parseFromString(t,"text/xml")}var n=t;9===n.nodeType&&(n=n.firstChild);while("svg"!==n.nodeName.toLowerCase()||1!==n.nodeType)n=n.nextSibling;return n}var Ax={fill:"fill",stroke:"stroke","stroke-width":"lineWidth",opacity:"opacity","fill-opacity":"fillOpacity","stroke-opacity":"strokeOpacity","stroke-dasharray":"lineDash","stroke-dashoffset":"lineDashOffset","stroke-linecap":"lineCap","stroke-linejoin":"lineJoin","stroke-miterlimit":"miterLimit","font-family":"fontFamily","font-size":"fontSize","font-style":"fontStyle","font-weight":"fontWeight","text-anchor":"textAlign",visibility:"visibility",display:"display"},Ix=W(Ax),Ox={"alignment-baseline":"textBaseline","stop-color":"stopColor"},Lx=W(Ox),Ex=function(){function t(){this._defs={},this._root=null}return t.prototype.parse=function(t,e){e=e||{};var n=Dx(t);if(!n)throw new Error("Illegal svg");this._defsUsePending=[];var r=new _o;this._root=r;var o=[],i=n.getAttribute("viewBox")||"",a=parseFloat(n.getAttribute("width")||e.width),u=parseFloat(n.getAttribute("height")||e.height);isNaN(a)&&(a=null),isNaN(u)&&(u=null),Vx(n,r,null,!0,!1);var s,l,c=n.firstChild;while(c)this._parseNode(c,r,o,null,!1,!1),c=c.nextSibling;if(Ux(this._defs,this._defsUsePending),this._defsUsePending=[],i){var f=jx(i);f.length>=4&&(s={x:parseFloat(f[0]||0),y:parseFloat(f[1]||0),width:parseFloat(f[2]),height:parseFloat(f[3])})}if(s&&null!=a&&null!=u&&(l=Jx(s,{x:0,y:0,width:a,height:u}),!e.ignoreViewBox)){var d=r;r=new _o,r.add(d),d.scaleX=d.scaleY=l.scale,d.x=l.x,d.y=l.y}return e.ignoreRootClip||null==a||null==u||r.setClipPath(new As({shape:{x:0,y:0,width:a,height:u}})),{root:r,width:a,height:u,viewBoxRect:s,viewBoxTransform:l,named:o}},t.prototype._parseNode=function(t,e,n,r,o,i){var a,u=t.nodeName.toLowerCase(),s=r;if("defs"===u&&(o=!0),"text"===u&&(i=!0),"defs"===u||"switch"===u)a=e;else{if(!o){var l=mx[u];if(l&&bt(mx,u)){a=l.call(this,t,e);var c=t.getAttribute("name");if(c){var f={name:c,namedFrom:null,svgNodeTagLower:u,el:a};n.push(f),"g"===u&&(s=f)}else r&&n.push({name:r.name,namedFrom:r,svgNodeTagLower:u,el:a});e.add(a)}}var d=Nx[u];if(d&&bt(Nx,u)){var h=d.call(this,t),p=t.getAttribute("id");p&&(this._defs[p]=h)}}if(a&&a.isGroup){var g=t.firstChild;while(g)1===g.nodeType?this._parseNode(g,a,n,s,o,i):3===g.nodeType&&i&&this._parseText(g,a),g=g.nextSibling}},t.prototype._parseText=function(t,e){var n=new gs({style:{text:t.textContent},silent:!0,x:this._textX||0,y:this._textY||0});zx(e,n),Vx(t,n,this._defsUsePending,!1,!1),Hx(n,e);var r=n.style,o=r.fontSize;o&&o<9&&(r.fontSize=9,n.scaleX*=o/9,n.scaleY*=o/9);var i=(r.fontSize||r.fontFamily)&&[r.fontStyle,r.fontWeight,(r.fontSize||12)+"px",r.fontFamily||"sans-serif"].join(" ");r.font=i;var a=n.getBoundingRect();return this._textX+=a.width,e.add(n),n},t.internalField=function(){mx={g:function(t,e){var n=new _o;return zx(e,n),Vx(t,n,this._defsUsePending,!1,!1),n},rect:function(t,e){var n=new As;return zx(e,n),Vx(t,n,this._defsUsePending,!1,!1),n.setShape({x:parseFloat(t.getAttribute("x")||"0"),y:parseFloat(t.getAttribute("y")||"0"),width:parseFloat(t.getAttribute("width")||"0"),height:parseFloat(t.getAttribute("height")||"0")}),n.silent=!0,n},circle:function(t,e){var n=new Tc;return zx(e,n),Vx(t,n,this._defsUsePending,!1,!1),n.setShape({cx:parseFloat(t.getAttribute("cx")||"0"),cy:parseFloat(t.getAttribute("cy")||"0"),r:parseFloat(t.getAttribute("r")||"0")}),n.silent=!0,n},line:function(t,e){var n=new cf;return zx(e,n),Vx(t,n,this._defsUsePending,!1,!1),n.setShape({x1:parseFloat(t.getAttribute("x1")||"0"),y1:parseFloat(t.getAttribute("y1")||"0"),x2:parseFloat(t.getAttribute("x2")||"0"),y2:parseFloat(t.getAttribute("y2")||"0")}),n.silent=!0,n},ellipse:function(t,e){var n=new Ac;return zx(e,n),Vx(t,n,this._defsUsePending,!1,!1),n.setShape({cx:parseFloat(t.getAttribute("cx")||"0"),cy:parseFloat(t.getAttribute("cy")||"0"),rx:parseFloat(t.getAttribute("rx")||"0"),ry:parseFloat(t.getAttribute("ry")||"0")}),n.silent=!0,n},polygon:function(t,e){var n,r=t.getAttribute("points");r&&(n=Bx(r));var o=new nf({shape:{points:n||[]},silent:!0});return zx(e,o),Vx(t,o,this._defsUsePending,!1,!1),o},polyline:function(t,e){var n,r=t.getAttribute("points");r&&(n=Bx(r));var o=new af({shape:{points:n||[]},silent:!0});return zx(e,o),Vx(t,o,this._defsUsePending,!1,!1),o},image:function(t,e){var n=new xs;return zx(e,n),Vx(t,n,this._defsUsePending,!1,!1),n.setStyle({image:t.getAttribute("xlink:href"),x:+t.getAttribute("x"),y:+t.getAttribute("y"),width:+t.getAttribute("width"),height:+t.getAttribute("height")}),n.silent=!0,n},text:function(t,e){var n=t.getAttribute("x")||"0",r=t.getAttribute("y")||"0",o=t.getAttribute("dx")||"0",i=t.getAttribute("dy")||"0";this._textX=parseFloat(n)+parseFloat(o),this._textY=parseFloat(r)+parseFloat(i);var a=new _o;return zx(e,a),Vx(t,a,this._defsUsePending,!1,!0),a},tspan:function(t,e){var n=t.getAttribute("x"),r=t.getAttribute("y");null!=n&&(this._textX=parseFloat(n)),null!=r&&(this._textY=parseFloat(r));var o=t.getAttribute("dx")||"0",i=t.getAttribute("dy")||"0",a=new _o;return zx(e,a),Vx(t,a,this._defsUsePending,!1,!0),this._textX+=parseFloat(o),this._textY+=parseFloat(i),a},path:function(t,e){var n=t.getAttribute("d")||"",r=wc(n);return zx(e,r),Vx(t,r,this._defsUsePending,!1,!1),r.silent=!0,r}}}(),t}(),Nx={lineargradient:function(t){var e=parseInt(t.getAttribute("x1")||"0",10),n=parseInt(t.getAttribute("y1")||"0",10),r=parseInt(t.getAttribute("x2")||"10",10),o=parseInt(t.getAttribute("y2")||"0",10),i=new Cf(e,n,r,o);return Rx(t,i),Px(t,i),i},radialgradient:function(t){var e=parseInt(t.getAttribute("cx")||"0",10),n=parseInt(t.getAttribute("cy")||"0",10),r=parseInt(t.getAttribute("r")||"0",10),o=new Tf(e,n,r);return Rx(t,o),Px(t,o),o}};function Rx(t,e){var n=t.getAttribute("gradientUnits");"userSpaceOnUse"===n&&(e.global=!0)}function Px(t,e){var n=t.firstChild;while(n){if(1===n.nodeType&&"stop"===n.nodeName.toLocaleLowerCase()){var r=n.getAttribute("offset"),o=void 0;o=r&&r.indexOf("%")>0?parseInt(r,10)/100:r?parseFloat(r):0;var i={};$x(n,i,i);var a=i.stopColor||n.getAttribute("stop-color")||"#000000";e.colorStops.push({offset:o,color:a})}n=n.nextSibling}}function zx(t,e){t&&t.__inheritedStyle&&(e.__inheritedStyle||(e.__inheritedStyle={}),O(e.__inheritedStyle,t.__inheritedStyle))}function Bx(t){for(var e=jx(t),n=[],r=0;r<e.length;r+=2){var o=parseFloat(e[r]),i=parseFloat(e[r+1]);n.push([o,i])}return n}function Vx(t,e,n,r,o){var i=e,a=i.__inheritedStyle=i.__inheritedStyle||{},u={};1===t.nodeType&&(qx(t,e),$x(t,a,u),r||Kx(t,a,u)),i.style=i.style||{},null!=a.fill&&(i.style.fill=Wx(i,"fill",a.fill,n)),null!=a.stroke&&(i.style.stroke=Wx(i,"stroke",a.stroke,n)),z(["lineWidth","opacity","fillOpacity","strokeOpacity","miterLimit","fontSize"],function(t){null!=a[t]&&(i.style[t]=parseFloat(a[t]))}),z(["lineDashOffset","lineCap","lineJoin","fontWeight","fontFamily","fontStyle","textAlign"],function(t){null!=a[t]&&(i.style[t]=a[t])}),o&&(i.__selfStyle=u),a.lineDash&&(i.style.lineDash=B(jx(a.lineDash),function(t){return parseFloat(t)})),"hidden"!==a.visibility&&"collapse"!==a.visibility||(i.invisible=!0),"none"===a.display&&(i.ignore=!0)}function Hx(t,e){var n=e.__selfStyle;if(n){var r=n.textBaseline,o=r;r&&"auto"!==r?"baseline"===r?o="alphabetic":"before-edge"===r||"text-before-edge"===r?o="top":"after-edge"===r||"text-after-edge"===r?o="bottom":"central"!==r&&"mathematical"!==r||(o="middle"):o="alphabetic",t.style.textBaseline=o}var i=e.__inheritedStyle;if(i){var a=i.textAlign,u=a;a&&("middle"===a&&(u="center"),t.style.textAlign=u)}}var Fx=/^url\(\s*#(.*?)\)/;function Wx(t,e,n,r){var o=n&&n.match(Fx);if(!o)return"none"===n&&(n=null),n;var i=ft(o[1]);r.push([t,e,i])}function Ux(t,e){for(var n=0;n<e.length;n++){var r=e[n];r[0].style[r[1]]=t[r[2]]}}var Gx=/-?([0-9]*\.)?[0-9]+([eE]-?[0-9]+)?/g;function jx(t){return t.match(Gx)||[]}var Xx=/(translate|scale|rotate|skewX|skewY|matrix)\(([\-\s0-9\.eE,]*)\)/g,Yx=Math.PI/180;function qx(t,e){var n=t.getAttribute("transform");if(n){n=n.replace(/,/g," ");var r=[],o=null;n.replace(Xx,function(t,e,n){return r.push(e,n),""});for(var i=r.length-1;i>0;i-=2){var a=r[i],u=r[i-1],s=jx(a);switch(o=o||yr(),u){case"translate":_r(o,o,[parseFloat(s[0]),parseFloat(s[1]||"0")]);break;case"scale":Cr(o,o,[parseFloat(s[0]),parseFloat(s[1]||s[0])]);break;case"rotate":Sr(o,o,-parseFloat(s[0])*Yx);break;case"skewX":var l=Math.tan(parseFloat(s[0])*Yx);wr(o,[1,0,l,1,0,0],o);break;case"skewY":var c=Math.tan(parseFloat(s[0])*Yx);wr(o,[1,c,0,1,0,0],o);break;case"matrix":o[0]=parseFloat(s[0]),o[1]=parseFloat(s[1]),o[2]=parseFloat(s[2]),o[3]=parseFloat(s[3]),o[4]=parseFloat(s[4]),o[5]=parseFloat(s[5]);break}}e.setLocalTransform(o)}}var Zx=/([^\s:;]+)\s*:\s*([^:;]+)/g;function $x(t,e,n){var r=t.getAttribute("style");if(r){var o;Zx.lastIndex=0;while(null!=(o=Zx.exec(r))){var i=o[1],a=bt(Ax,i)?Ax[i]:null;a&&(e[a]=o[2]);var u=bt(Ox,i)?Ox[i]:null;u&&(n[u]=o[2])}}}function Kx(t,e,n){for(var r=0;r<Ix.length;r++){var o=Ix[r],i=t.getAttribute(o);null!=i&&(e[Ax[o]]=i)}for(r=0;r<Lx.length;r++){o=Lx[r],i=t.getAttribute(o);null!=i&&(n[Ox[o]]=i)}}function Jx(t,e){var n=e.width/t.width,r=e.height/t.height,o=Math.min(n,r);return{scale:o,x:-(t.x+t.width/2)*o+(e.x+e.width/2),y:-(t.y+t.height/2)*o+(e.y+e.height/2)}}function Qx(t,e){var n=new Ex;return n.parse(t,e)}var tw=1e-8;function ew(t,e){return Math.abs(t-e)<tw}function nw(t,e,n){var r=0,o=t[0];if(!o)return!1;for(var i=1;i<t.length;i++){var a=t[i];r+=qu(o[0],o[1],a[0],a[1],e,n),o=a}var u=t[0];return ew(o[0],u[0])&&ew(o[1],u[1])||(r+=qu(o[0],o[1],u[0],u[1],e,n)),0!==r}var rw=[],ow=function(){function t(t){this.name=t}return t.prototype.getCenter=function(){},t}(),iw=function(t){function e(e,n,r){var o=t.call(this,e)||this;if(o.type="geoJSON",o.geometries=n,r)r=[r[0],r[1]];else{var i=o.getBoundingRect();r=[i.x+i.width/2,i.y+i.height/2]}return o._center=r,o}return i(e,t),e.prototype.getBoundingRect=function(){var t=this._rect;if(t)return t;for(var e=Number.MAX_VALUE,n=[e,e],r=[-e,-e],o=[],i=[],a=this.geometries,u=0;u<a.length;u++)if("polygon"===a[u].type){var s=a[u].exterior;hu(s,o,i),Bt(n,n,o),Vt(r,r,i)}return 0===u&&(n[0]=n[1]=r[0]=r[1]=0),this._rect=new Zr(n[0],n[1],r[0]-n[0],r[1]-n[1])},e.prototype.contain=function(t){var e=this.getBoundingRect(),n=this.geometries;if(!e.contain(t[0],t[1]))return!1;t:for(var r=0,o=n.length;r<o;r++)if("polygon"===n[r].type){var i=n[r].exterior,a=n[r].interiors;if(nw(i,t[0],t[1])){for(var u=0;u<(a?a.length:0);u++)if(nw(a[u],t[0],t[1]))continue t;return!0}}return!1},e.prototype.transformTo=function(t,e,n,r){var o=this.getBoundingRect(),i=o.width/o.height;n?r||(r=n/i):n=i*r;for(var a=new Zr(t,e,n,r),u=o.calculateTransform(a),s=this.geometries,l=0;l<s.length;l++)if("polygon"===s[l].type){for(var c=s[l].exterior,f=s[l].interiors,d=0;d<c.length;d++)zt(c[d],c[d],u);for(var h=0;h<(f?f.length:0);h++)for(d=0;d<f[h].length;d++)zt(f[h][d],f[h][d],u)}o=this._rect,o.copy(a),this._center=[o.x+o.width/2,o.y+o.height/2]},e.prototype.cloneShallow=function(t){null==t&&(t=this.name);var n=new e(t,this.geometries,this._center);return n._rect=this._rect,n.transformTo=null,n},e.prototype.getCenter=function(){return this._center},e.prototype.setCenter=function(t){this._center=t},e}(ow),aw=function(t){function e(e,n){var r=t.call(this,e)||this;return r.type="geoSVG",r._elOnlyForCalculate=n,r}return i(e,t),e.prototype.getCenter=function(){var t=this._center;return t||(t=this._center=this._calculateCenter()),t},e.prototype._calculateCenter=function(){var t=this._elOnlyForCalculate,e=t.getBoundingRect(),n=[e.x+e.width/2,e.y+e.height/2],r=br(rw),o=t;while(o&&!o.isGeoSVGGraphicRoot)wr(r,o.getLocalTransform(),r),o=o.parent;return Mr(r,r),zt(n,n,r),n},e}(ow),uw=mt(["rect","circle","line","ellipse","polygon","polyline","path","text","tspan","g"]),sw=function(){function t(t,e){this.type="geoSVG",this._usedGraphicMap=mt(),this._freedGraphics=[],this._mapName=t,this._parsedXML=Dx(e)}return t.prototype.load=function(){var t=this._firstGraphic;if(!t){t=this._firstGraphic=this._buildGraphic(this._parsedXML),this._freedGraphics.push(t),this._boundingRect=this._firstGraphic.boundingRect.clone();var e=cw(t.named),n=e.regions,r=e.regionsMap;this._regions=n,this._regionsMap=r}return{boundingRect:this._boundingRect,regions:this._regions,regionsMap:this._regionsMap}},t.prototype._buildGraphic=function(t){var e,n;try{e=t&&Qx(t,{ignoreViewBox:!0,ignoreRootClip:!0})||{},n=e.root,ct(null!=n)}catch(g){throw new Error("Invalid svg format\n"+g.message)}var r=new _o;r.add(n),r.isGeoSVGGraphicRoot=!0;var o=e.width,i=e.height,a=e.viewBoxRect,u=this._boundingRect;if(!u){var s=void 0,l=void 0,c=void 0,f=void 0;if(null!=o?(s=0,c=o):a&&(s=a.x,c=a.width),null!=i?(l=0,f=i):a&&(l=a.y,f=a.height),null==s||null==l){var d=n.getBoundingRect();null==s&&(s=d.x,c=d.width),null==l&&(l=d.y,f=d.height)}u=this._boundingRect=new Zr(s,l,c,f)}if(a){var h=Jx(a,u);n.scaleX=n.scaleY=h.scale,n.x=h.x,n.y=h.y}r.setClipPath(new As({shape:u.plain()}));var p=[];return z(e.named,function(t){null!=uw.get(t.svgNodeTagLower)&&(p.push(t),lw(t.el))}),{root:r,boundingRect:u,named:p}},t.prototype.useGraphic=function(t){var e=this._usedGraphicMap,n=e.get(t);return n||(n=this._freedGraphics.pop()||this._buildGraphic(this._parsedXML),e.set(t,n),n)},t.prototype.freeGraphic=function(t){var e=this._usedGraphicMap,n=e.get(t);n&&(e.removeKey(t),this._freedGraphics.push(n))},t}();function lw(t){t.silent=!1,t.isGroup&&t.traverse(function(t){t.silent=!1})}function cw(t){var e=[],n=mt();return z(t,function(t){if(null==t.namedFrom){var r=new aw(t.name,t.el);e.push(r),n.set(t.name,r)}}),{regions:e,regionsMap:n}}function fw(t){if(!t.UTF8Encoding)return t;var e=t,n=e.UTF8Scale;null==n&&(n=1024);for(var r=e.features,o=0;o<r.length;o++){var i=r[o],a=i.geometry;if("Polygon"===a.type)for(var u=a.coordinates,s=0;s<u.length;s++)u[s]=dw(u[s],a.encodeOffsets[s],n);else if("MultiPolygon"===a.type)for(u=a.coordinates,s=0;s<u.length;s++)for(var l=u[s],c=0;c<l.length;c++)l[c]=dw(l[c],a.encodeOffsets[s][c],n)}return e.UTF8Encoding=!1,e}function dw(t,e,n){for(var r=[],o=e[0],i=e[1],a=0;a<t.length;a+=2){var u=t.charCodeAt(a)-64,s=t.charCodeAt(a+1)-64;u=u>>1^-(1&u),s=s>>1^-(1&s),u+=o,s+=i,o=u,i=s,r.push([u/n,s/n])}return r}function hw(t,e){return t=fw(t),B(H(t.features,function(t){return t.geometry&&t.properties&&t.geometry.coordinates.length>0}),function(t){var n=t.properties,r=t.geometry,o=[];if("Polygon"===r.type){var i=r.coordinates;o.push({type:"polygon",exterior:i[0],interiors:i.slice(1)})}if("MultiPolygon"===r.type){i=r.coordinates;z(i,function(t){t[0]&&o.push({type:"polygon",exterior:t[0],interiors:t.slice(1)})})}var a=new iw(n[e||"name"],o,n.cp);return a.properties=n,a})}for(var pw=[126,25],gw="南海诸岛",mw=[[[0,3.5],[7,11.2],[15,11.9],[30,7],[42,.7],[52,.7],[56,7.7],[59,.7],[64,.7],[64,0],[5,0],[0,3.5]],[[13,16.1],[19,14.7],[16,21.7],[11,23.1],[13,16.1]],[[12,32.2],[14,38.5],[15,38.5],[13,32.2],[12,32.2]],[[16,47.6],[12,53.2],[13,53.2],[18,47.6],[16,47.6]],[[6,64.4],[8,70],[9,70],[8,64.4],[6,64.4]],[[23,82.6],[29,79.8],[30,79.8],[25,82.6],[23,82.6]],[[37,70.7],[43,62.3],[44,62.3],[39,70.7],[37,70.7]],[[48,51.1],[51,45.5],[53,45.5],[50,51.1],[48,51.1]],[[51,35],[51,28.7],[53,28.7],[53,35],[51,35]],[[52,22.4],[55,17.5],[56,17.5],[53,22.4],[52,22.4]],[[58,12.6],[62,7],[63,7],[60,12.6],[58,12.6]],[[0,3.5],[0,93.1],[64,93.1],[64,0],[63,0],[63,92.4],[1,92.4],[1,3.5],[0,3.5]]],vw=0;vw<mw.length;vw++)for(var yw=0;yw<mw[vw].length;yw++)mw[vw][yw][0]/=10.5,mw[vw][yw][1]/=-14,mw[vw][yw][0]+=pw[0],mw[vw][yw][1]+=pw[1];function bw(t,e){if("china"===t){for(var n=0;n<e.length;n++)if(e[n].name===gw)return;e.push(new iw(gw,B(mw,function(t){return{type:"polygon",exterior:t}}),pw))}}var xw={"南海诸岛":[32,80],"广东":[0,-10],"香港":[10,5],"澳门":[-10,10],"天津":[5,5]};function ww(t,e){if("china"===t){var n=xw[e.name];if(n){var r=e.getCenter();r[0]+=n[0]/10.5,r[1]+=-n[1]/14,e.setCenter(r)}}}var _w={Russia:[100,60],"United States":[-99,38],"United States of America":[-99,38]};function Sw(t,e){if("world"===t){var n=_w[e.name];if(n){var r=[n[0],n[1]];e.setCenter(r)}}}var Cw=[[[123.45165252685547,25.73527164402261],[123.49731445312499,25.73527164402261],[123.49731445312499,25.750734064600884],[123.45165252685547,25.750734064600884],[123.45165252685547,25.73527164402261]]];function Mw(t,e){"china"===t&&"台湾"===e.name&&e.geometries.push({type:"polygon",exterior:Cw[0]})}var Tw="name",kw=function(){function t(t,e,n){this.type="geoJSON",this._parsedMap=mt(),this._mapName=t,this._specialAreas=n,this._geoJSON=Aw(e)}return t.prototype.load=function(t,e){e=e||Tw;var n=this._parsedMap.get(e);if(!n){var r=this._parseToRegions(e);n=this._parsedMap.set(e,{regions:r,boundingRect:Dw(r)})}var o=mt(),i=[];return z(n.regions,function(e){var n=e.name;t&&t.hasOwnProperty(n)&&(e=e.cloneShallow(n=t[n])),i.push(e),o.set(n,e)}),{regions:i,boundingRect:n.boundingRect||new Zr(0,0,0,0),regionsMap:o}},t.prototype._parseToRegions=function(t){var e,n=this._mapName,r=this._geoJSON;try{e=r?hw(r,t):[]}catch(o){throw new Error("Invalid geoJson format\n"+o.message)}return bw(n,e),z(e,function(t){var e=t.name;ww(n,t),Sw(n,t),Mw(n,t);var r=this._specialAreas&&this._specialAreas[e];r&&t.transformTo(r.left,r.top,r.width,r.height)},this),e},t.prototype.getMapForUser=function(){return{geoJson:this._geoJSON,geoJSON:this._geoJSON,specialAreas:this._specialAreas}},t}();function Dw(t){for(var e,n=0;n<t.length;n++){var r=t[n].getBoundingRect();e=e||r.clone(),e.union(r)}return e}function Aw(t){return q(t)?"undefined"!==typeof JSON&&JSON.parse?JSON.parse(t):new Function("return ("+t+");")():t}var Iw=mt(),Ow={registerMap:function(t,e,n){if(e.svg){var r=new sw(t,e.svg);Iw.set(t,r)}else{var o=e.geoJson||e.geoJSON;o&&!e.features?n=e.specialAreas:o=e;r=new kw(t,o,n);Iw.set(t,r)}},getGeoResource:function(t){return Iw.get(t)},getMapForUser:function(t){var e=Iw.get(t);return e&&"geoJSON"===e.type&&e.getMapForUser()},load:function(t,e,n){var r=Iw.get(t);if(r)return r.load(e,n)}},Lw=ct,Ew=z,Nw=Y,Rw=K,Pw=E,zw="undefined"!==typeof window,Bw=1,Vw=800,Hw=900,Fw=1e3,Ww=2e3,Uw=5e3,Gw=1e3,jw=1100,Xw=2e3,Yw=3e3,qw=4e3,Zw=4500,$w=4600,Kw=5e3,Jw=6e3,Qw=7e3,t_={PROCESSOR:{FILTER:Fw,SERIES_FILTER:Vw,STATISTIC:Uw},VISUAL:{LAYOUT:Gw,PROGRESSIVE_LAYOUT:jw,GLOBAL:Xw,CHART:Yw,POST_CHART_LAYOUT:$w,COMPONENT:qw,BRUSH:Kw,CHART_ITEM:Zw,ARIA:Jw,DECAL:Qw}},e_="__flagInMainProcess",n_="__optionUpdated",r_="__needsUpdateStatus",o_=/^[a-zA-Z0-9_]+$/,i_="__connectUpdateStatus",a_=0,u_=1,s_=2;function l_(t){return function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];if(!this.isDisposed())return f_(this,t,e);B_(this.id)}}function c_(t){return function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return f_(this,t,e)}}function f_(t,e,n){return n[0]=n[0]&&n[0].toLowerCase(),Gt.prototype[e].apply(t,n)}var d_,h_,p_,g_,m_,v_,y_,b_,x_,w_,__,S_,C_,M_,T_,k_,D_,A_,I_,O_,L_,E_=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e}(Gt),N_=E_.prototype;N_.on=c_("on"),N_.off=c_("off");var R_=function(t){function e(e,n,r){var o=t.call(this,new Iy)||this;o._chartsViews=[],o._chartsMap={},o._componentsViews=[],o._componentsMap={},o._pendingActions=[],r=r||{},"string"===typeof n&&(n=X_[n]),o._dom=e;var i="canvas",a=!1,u=o._zr=Ao(e,{renderer:r.renderer||i,devicePixelRatio:r.devicePixelRatio,width:r.width,height:r.height,useDirtyRect:null==r.useDirtyRect?a:r.useDirtyRect});o._throttledZrFlush=Xv(G(u.flush,u),17),n=k(n),n&&Yg(n,!0),o._theme=n,o._locale=sh(r.locale||ah),o._coordSysMgr=new mg;var s=o._api=D_(o);function l(t,e){return t.__prio-e.__prio}return Pe(j_,l),Pe(F_,l),o._scheduler=new wy(o,s,F_,j_),o._messageCenter=new E_,o._labelManager=new xb,o._initEvents(),o.resize=G(o.resize,o),u.animation.on("frame",o._onframe,o),w_(u,o),__(u,o),ht(o),o}return i(e,t),e.prototype._onframe=function(){if(!this._disposed){L_(this);var t=this._scheduler;if(this[n_]){var e=this[n_].silent;this[e_]=!0,d_(this),g_.update.call(this),this._zr.flush(),this[e_]=!1,this[n_]=!1,b_.call(this,e),x_.call(this,e)}else if(t.unfinished){var n=Bw,r=this._model,o=this._api;t.unfinished=!1;do{var i=+new Date;t.performSeriesTasks(r),t.performDataProcessorTasks(r),v_(this,r),t.performVisualTasks(r),T_(this,this._model,o,"remain"),n-=+new Date-i}while(n>0&&t.unfinished);t.unfinished||this._zr.flush()}}},e.prototype.getDom=function(){return this._dom},e.prototype.getId=function(){return this.id},e.prototype.getZr=function(){return this._zr},e.prototype.setOption=function(t,e,n){if(this._disposed)B_(this.id);else{var r,o,i;if(Rw(e)&&(n=e.lazyUpdate,r=e.silent,o=e.replaceMerge,i=e.transition,e=e.notMerge),this[e_]=!0,!this._model||e){var a=new Sg(this._api),u=this._theme,s=this._model=new cg;s.scheduler=this._scheduler,s.init(null,null,null,u,this._locale,a)}this._model.setOption(t,{replaceMerge:o},W_),I_(this,i),n?(this[n_]={silent:r},this[e_]=!1,this.getZr().wakeUp()):(d_(this),g_.update.call(this),this._zr.flush(),this[n_]=!1,this[e_]=!1,b_.call(this,r),x_.call(this,r))}},e.prototype.setTheme=function(){console.error("ECharts#setTheme() is DEPRECATED in ECharts 3.0")},e.prototype.getModel=function(){return this._model},e.prototype.getOption=function(){return this._model&&this._model.getOption()},e.prototype.getWidth=function(){return this._zr.getWidth()},e.prototype.getHeight=function(){return this._zr.getHeight()},e.prototype.getDevicePixelRatio=function(){return this._zr.painter.dpr||zw&&window.devicePixelRatio||1},e.prototype.getRenderedCanvas=function(t){if(d.canvasSupported)return t=t||{},this._zr.painter.getRenderedCanvas({backgroundColor:t.backgroundColor||this._model.get("backgroundColor"),pixelRatio:t.pixelRatio||this.getDevicePixelRatio()})},e.prototype.getSvgDataURL=function(){if(d.svgSupported){var t=this._zr,e=t.storage.getDisplayList();return z(e,function(t){t.stopAnimation(null,!0)}),t.painter.toDataURL()}},e.prototype.getDataURL=function(t){if(!this._disposed){t=t||{};var e=t.excludeComponents,n=this._model,r=[],o=this;Ew(e,function(t){n.eachComponent({mainType:t},function(t){var e=o._componentsMap[t.__viewId];e.group.ignore||(r.push(e),e.group.ignore=!0)})});var i="svg"===this._zr.painter.getType()?this.getSvgDataURL():this.getRenderedCanvas(t).toDataURL("image/"+(t&&t.type||"png"));return Ew(r,function(t){t.group.ignore=!1}),i}B_(this.id)},e.prototype.getConnectedDataURL=function(t){if(this._disposed)B_(this.id);else if(d.canvasSupported){var e="svg"===t.type,n=this.group,r=Math.min,o=Math.max,i=1/0;if(Z_[n]){var a=i,u=i,s=-i,l=-i,c=[],f=t&&t.pixelRatio||this.getDevicePixelRatio();z(q_,function(i,f){if(i.group===n){var d=e?i.getZr().painter.getSvgDom().innerHTML:i.getRenderedCanvas(k(t)),h=i.getDom().getBoundingClientRect();a=r(h.left,a),u=r(h.top,u),s=o(h.right,s),l=o(h.bottom,l),c.push({dom:d,left:h.left,top:h.top})}}),a*=f,u*=f,s*=f,l*=f;var h=s-a,p=l-u,g=L(),m=Ao(g,{renderer:e?"svg":"canvas"});if(m.resize({width:h,height:p}),e){var v="";return Ew(c,function(t){var e=t.left-a,n=t.top-u;v+='<g transform="translate('+e+","+n+')">'+t.dom+"</g>"}),m.painter.getSvgRoot().innerHTML=v,t.connectedBackgroundColor&&m.painter.setBackgroundColor(t.connectedBackgroundColor),m.refreshImmediately(),m.painter.toDataURL()}return t.connectedBackgroundColor&&m.add(new As({shape:{x:0,y:0,width:h,height:p},style:{fill:t.connectedBackgroundColor}})),Ew(c,function(t){var e=new xs({style:{x:t.left*f-a,y:t.top*f-u,image:t.dom}});m.add(e)}),m.refreshImmediately(),g.toDataURL("image/"+(t&&t.type||"png"))}return this.getDataURL(t)}},e.prototype.convertToPixel=function(t,e){return m_(this,"convertToPixel",t,e)},e.prototype.convertFromPixel=function(t,e){return m_(this,"convertFromPixel",t,e)},e.prototype.containPixel=function(t,e){if(!this._disposed){var n,r=this._model,o=Ii(r,t);return z(o,function(t,r){r.indexOf("Models")>=0&&z(t,function(t){var o=t.coordinateSystem;if(o&&o.containPoint)n=n||!!o.containPoint(e);else if("seriesModels"===r){var i=this._chartsMap[t.__viewId];i&&i.containPoint&&(n=n||i.containPoint(e,t))}else 0},this)},this),!!n}B_(this.id)},e.prototype.getVisual=function(t,e){var n=this._model,r=Ii(n,t,{defaultMainType:"series"}),o=r.seriesModel;var i=o.getData(),a=r.hasOwnProperty("dataIndexInside")?r.dataIndexInside:r.hasOwnProperty("dataIndex")?i.indexOfRawIndex(r.dataIndex):null;return null!=a?Ey(i,a,e):Ny(i,e)},e.prototype.getViewOfComponentModel=function(t){return this._componentsMap[t.__viewId]},e.prototype.getViewOfSeriesModel=function(t){return this._chartsMap[t.__viewId]},e.prototype._initEvents=function(){var t=this;Ew(z_,function(e){var n=function(n){var r,o=t.getModel(),i=n.target,a="globalout"===e;if(a?r={}:i&&Cb(i,function(t){var e=Gs(t);if(e&&null!=e.dataIndex){var n=e.dataModel||o.getSeriesByIndex(e.seriesIndex);return r=n&&n.getDataParams(e.dataIndex,e.dataType)||{},!0}if(e.eventData)return r=I({},e.eventData),!0},!0),r){var u=r.componentType,s=r.componentIndex;"markLine"!==u&&"markPoint"!==u&&"markArea"!==u||(u="series",s=r.seriesIndex);var l=u&&null!=s&&o.getComponent(u,s),c=l&&t["series"===l.mainType?"_chartsMap":"_componentsMap"][l.__viewId];0,r.event=n,r.type=e,t._$eventProcessor.eventInfo={targetEl:i,packedEvent:r,model:l,view:c},t.trigger(e,r)}};n.zrEventfulCallAtLast=!0,t._zr.on(e,n,t)}),Ew(H_,function(e,n){t._messageCenter.on(n,function(t){this.trigger(n,t)},t)}),Ew(["selectchanged"],function(e){t._messageCenter.on(e,function(t){this.trigger(e,t)},t)}),Sb(this._messageCenter,this,this._api)},e.prototype.isDisposed=function(){return this._disposed},e.prototype.clear=function(){this._disposed?B_(this.id):this.setOption({series:[]},!0)},e.prototype.dispose=function(){if(this._disposed)B_(this.id);else{this._disposed=!0,Ri(this.getDom(),K_,"");var t=this._api,e=this._model;Ew(this._componentsViews,function(n){n.dispose(e,t)}),Ew(this._chartsViews,function(n){n.dispose(e,t)}),this._zr.dispose(),delete q_[this.id]}},e.prototype.resize=function(t){if(this._disposed)B_(this.id);else{this._zr.resize(t);var e=this._model;if(this._loadingFX&&this._loadingFX.resize(),e){var n=e.resetOption("media"),r=t&&t.silent;this[n_]&&(null==r&&(r=this[n_].silent),n=!0,this[n_]=!1),this[e_]=!0,n&&d_(this),g_.update.call(this,{type:"resize",animation:I({duration:0},t&&t.animation)}),this[e_]=!1,b_.call(this,r),x_.call(this,r)}}},e.prototype.showLoading=function(t,e){if(this._disposed)B_(this.id);else if(Rw(t)&&(e=t,t=""),t=t||"default",this.hideLoading(),Y_[t]){var n=Y_[t](this._api,e),r=this._zr;this._loadingFX=n,r.add(n)}},e.prototype.hideLoading=function(){this._disposed?B_(this.id):(this._loadingFX&&this._zr.remove(this._loadingFX),this._loadingFX=null)},e.prototype.makeActionFromEvent=function(t){var e=I({},t);return e.type=H_[t.type],e},e.prototype.dispatchAction=function(t,e){if(this._disposed)B_(this.id);else if(Rw(e)||(e={silent:!!e}),V_[t.type]&&this._model)if(this[e_])this._pendingActions.push(t);else{var n=e.silent;y_.call(this,t,n);var r=e.flush;r?this._zr.flush():!1!==r&&d.browser.weChat&&this._throttledZrFlush(),b_.call(this,n),x_.call(this,n)}},e.prototype.updateLabelLayout=function(){var t=this._labelManager;t.updateLayoutConfig(this._api),t.layout(this._api),t.processLabelsOverall()},e.prototype.appendData=function(t){if(this._disposed)B_(this.id);else{var e=t.seriesIndex,n=this.getModel(),r=n.getSeriesByIndex(e);0,r.appendData(t),this._scheduler.unfinished=!0,this.getZr().wakeUp()}},e.internalField=function(){function t(t){for(var e=[],n=t.currentStates,r=0;r<n.length;r++){var o=n[r];"emphasis"!==o&&"blur"!==o&&"select"!==o&&e.push(o)}t.selected&&t.states.select&&e.push("select"),t.hoverState===$s&&t.states.emphasis?e.push("emphasis"):t.hoverState===Zs&&t.states.blur&&e.push("blur"),t.useStates(e)}function e(t,e){var n=t._zr,r=n.storage,o=0;r.traverse(function(t){t.isGroup||o++}),o>e.get("hoverLayerThreshold")&&!d.node&&!d.worker&&e.eachSeries(function(e){if(!e.preventUsingHoverLayer){var n=t._chartsMap[e.__viewId];n.__alive&&n.group.traverse(function(t){t.states.emphasis&&(t.states.emphasis.hoverLayer=!0)})}})}function n(t,e){var n=t.get("blendMode")||null;e.group.traverse(function(t){t.isGroup||(t.style.blend=n),t.eachPendingDisplayable&&t.eachPendingDisplayable(function(t){t.style.blend=n})})}function r(t,e){t.preventAutoZ||o(e.group,t.get("z")||0,t.get("zlevel")||0,-1/0)}function o(t,e,n,r){var i=t.getTextContent(),a=t.getTextGuideLine(),u=t.isGroup;if(u)for(var s=t.childrenRef(),l=0;l<s.length;l++)r=Math.max(o(s[l],e,n,r),r);else t.z=e,t.zlevel=n,r=Math.max(t.z2,r);if(i&&(i.z=e,i.zlevel=n,isFinite(r)&&(i.z2=r+2)),a){var c=t.textGuideLineConfig;a.z=e,a.zlevel=n,isFinite(r)&&(a.z2=r+(c&&c.showAbove?1:-1))}return r}function a(t,e){e.group.traverse(function(t){if(!od(t)){var e=t.getTextContent(),n=t.getTextGuideLine();t.stateTransition&&(t.stateTransition=null),e&&e.stateTransition&&(e.stateTransition=null),n&&n.stateTransition&&(n.stateTransition=null),t.hasState()?(t.prevStates=t.currentStates,t.clearStates()):t.prevStates&&(t.prevStates=null)}})}function u(e,n){var r=e.getModel("stateAnimation"),o=e.isAnimationEnabled(),i=r.get("duration"),a=i>0?{duration:i,delay:r.get("delay"),easing:r.get("easing")}:null;n.group.traverse(function(e){if(e.states&&e.states.emphasis){if(od(e))return;if(e instanceof ds&&ec(e),e.__dirty){var n=e.prevStates;n&&e.useStates(n)}if(o){e.stateTransition=a;var r=e.getTextContent(),i=e.getTextGuideLine();r&&(r.stateTransition=a),i&&(i.stateTransition=a)}e.__dirty&&t(e)}})}d_=function(t){var e=t._scheduler;e.restorePipelines(t._model),e.prepareStageTasks(),h_(t,!0),h_(t,!1),e.plan()},h_=function(t,e){for(var n=t._model,r=t._scheduler,o=e?t._componentsViews:t._chartsViews,i=e?t._componentsMap:t._chartsMap,a=t._zr,u=t._api,s=0;s<o.length;s++)o[s].__alive=!1;function l(t){var s=t.__requireNewView;t.__requireNewView=!1;var l="_ec_"+t.id+"_"+t.type,c=!s&&i[l];if(!c){var f=Ui(t.type),d=e?Lv.getClass(f.main,f.sub):Wv.getClass(f.sub);0,c=new d,c.init(n,u),i[l]=c,o.push(c),a.add(c.group)}t.__viewId=c.__id=l,c.__alive=!0,c.__model=t,c.group.__ecComponentInfo={mainType:t.mainType,index:t.componentIndex},!e&&r.prepareView(c,t,n,u)}e?n.eachComponent(function(t,e){"series"!==t&&l(e)}):n.eachSeries(l);for(s=0;s<o.length;){var c=o[s];c.__alive?s++:(!e&&c.renderTask.dispose(),a.remove(c.group),c.dispose(n,u),o.splice(s,1),i[c.__id]===c&&delete i[c.__id],c.__id=c.group.__ecComponentInfo=null)}},p_=function(t,e,n,r,o){var i=t._model;if(i.setUpdatePayload(n),r){var a={};a[r+"Id"]=n[r+"Id"],a[r+"Index"]=n[r+"Index"],a[r+"Name"]=n[r+"Name"];var u={mainType:r,query:a};o&&(u.subType=o);var s,l=n.excludeSeriesId;null!=l&&(s=mt(),Ew(ai(l),function(t){var e=xi(t,null);null!=e&&s.set(e,!0)})),tc(n)&&Nl(t._api),i&&i.eachComponent(u,function(e){if(!s||null==s.get(e.id)){if(tc(n))if(e instanceof Iv)n.type!==el||n.notBlur||zl(e,n,t._api);else{var o=Bl(e.mainType,e.componentIndex,n.name,t._api),i=o.focusSelf,a=o.dispatchers;n.type===el&&i&&!n.notBlur&&Pl(e.mainType,e.componentIndex,t._api),a&&Ew(a,function(t){n.type===el?kl(t):Dl(t)})}else Ql(n)&&e instanceof Iv&&(Fl(e,n,t._api),Wl(e),O_(t));c(t["series"===r?"_chartsMap":"_componentsMap"][e.__viewId])}},t)}else Ew([].concat(t._componentsViews).concat(t._chartsViews),c);function c(r){r&&r.__alive&&r[e]&&r[e](r.__model,i,t._api,n)}},g_={prepareAndUpdate:function(t){d_(this),g_.update.call(this,t)},update:function(t){var e=this._model,n=this._api,r=this._zr,o=this._coordSysMgr,i=this._scheduler;if(e){e.setUpdatePayload(t),i.restoreData(e,t),i.performSeriesTasks(e),o.create(e,n),i.performDataProcessorTasks(e,t),v_(this,e),o.update(e,n),S_(e),i.performVisualTasks(e,t),C_(this,e,n,t);var a=e.get("backgroundColor")||"transparent",u=e.get("darkMode");if(d.canvasSupported)r.setBackgroundColor(a),null!=u&&"auto"!==u&&r.setDarkMode(u);else{var s=gn(a);a=Sn(s,"rgb"),0===s[3]&&(a="transparent")}k_(e,n)}},updateTransform:function(t){var e=this,n=this._model,r=this._api;if(n){n.setUpdatePayload(t);var o=[];n.eachComponent(function(i,a){if("series"!==i){var u=e.getViewOfComponentModel(a);if(u&&u.__alive)if(u.updateTransform){var s=u.updateTransform(a,n,r,t);s&&s.update&&o.push(u)}else o.push(u)}});var i=mt();n.eachSeries(function(o){var a=e._chartsMap[o.__viewId];if(a.updateTransform){var u=a.updateTransform(o,n,r,t);u&&u.update&&i.set(o.uid,1)}else i.set(o.uid,1)}),S_(n),this._scheduler.performVisualTasks(n,t,{setDirty:!0,dirtyMap:i}),T_(this,n,r,t,i),k_(n,this._api)}},updateView:function(t){var e=this._model;e&&(e.setUpdatePayload(t),Wv.markUpdateMethod(t,"updateView"),S_(e),this._scheduler.performVisualTasks(e,t,{setDirty:!0}),C_(this,this._model,this._api,t),k_(e,this._api))},updateVisual:function(t){var e=this,n=this._model;n&&(n.setUpdatePayload(t),n.eachSeries(function(t){t.getData().clearAllVisual()}),Wv.markUpdateMethod(t,"updateVisual"),S_(n),this._scheduler.performVisualTasks(n,t,{visualType:"visual",setDirty:!0}),n.eachComponent(function(r,o){if("series"!==r){var i=e.getViewOfComponentModel(o);i&&i.__alive&&i.updateVisual(o,n,e._api,t)}}),n.eachSeries(function(r){var o=e._chartsMap[r.__viewId];o.updateVisual(r,n,e._api,t)}),k_(n,this._api))},updateLayout:function(t){g_.update.call(this,t)}},m_=function(t,e,n,r){if(t._disposed)B_(t.id);else{for(var o,i=t._model,a=t._coordSysMgr.getCoordinateSystems(),u=Ii(i,n),s=0;s<a.length;s++){var l=a[s];if(l[e]&&null!=(o=l[e](i,u,r)))return o}0}},v_=function(t,e){var n=t._chartsMap,r=t._scheduler;e.eachSeries(function(t){r.updateStreamModes(t,n[t.__viewId])})},y_=function(t,e){var n=this,r=this.getModel(),o=t.type,i=t.escapeConnect,a=V_[o],u=a.actionInfo,s=(u.update||"update").split(":"),l=s.pop(),c=null!=s[0]&&Ui(s[0]);this[e_]=!0;var f=[t],d=!1;t.batch&&(d=!0,f=B(t.batch,function(e){return e=O(I({},e),t),e.batch=null,e}));var h,p=[],g=Ql(t),m=tc(t);if(Ew(f,function(e){if(h=a.action(e,n._model,n._api),h=h||I({},e),h.type=u.event||h.type,p.push(h),m){var r=Oi(t),o=r.queryOptionMap,i=r.mainTypeSpecified,s=i?o.keys()[0]:"series";p_(n,l,e,s),O_(n)}else g?(p_(n,l,e,"series"),O_(n)):c&&p_(n,l,e,c.main,c.sub)}),"none"===l||m||g||c||(this[n_]?(d_(this),g_.update.call(this,t),this[n_]=!1):g_[l].call(this,t)),h=d?{type:u.event||o,escapeConnect:i,batch:p}:p[0],this[e_]=!1,!e){var v=this._messageCenter;if(v.trigger(h.type,h),g){var y={type:"selectchanged",escapeConnect:i,selected:Ul(r),isFromClick:t.isFromClick||!1,fromAction:t.type,fromActionPayload:t};v.trigger(y.type,y)}}},b_=function(t){var e=this._pendingActions;while(e.length){var n=e.shift();y_.call(this,n,t)}},x_=function(t){!t&&this.trigger("updated")},w_=function(t,e){t.on("rendered",function(n){e.trigger("rendered",n),!t.animation.isFinished()||e[n_]||e._scheduler.unfinished||e._pendingActions.length||e.trigger("finished")})},__=function(t,e){t.on("mouseover",function(t){var n=t.target,r=Cb(n,$l);r&&(Vl(r,t,e._api),O_(e))}).on("mouseout",function(t){var n=t.target,r=Cb(n,$l);r&&(Hl(r,t,e._api),O_(e))}).on("click",function(t){var n=t.target,r=Cb(n,function(t){return null!=Gs(t).dataIndex},!0);if(r){var o=r.selected?"unselect":"select",i=Gs(r);e._api.dispatchAction({type:o,dataType:i.dataType,dataIndexInside:i.dataIndex,seriesIndex:i.seriesIndex,isFromClick:!0})}})},S_=function(t){t.clearColorPalette(),t.eachSeries(function(t){t.clearColorPalette()})},C_=function(t,e,n,r){M_(t,e,n,r),Ew(t._chartsViews,function(t){t.__alive=!1}),T_(t,e,n,r),Ew(t._chartsViews,function(t){t.__alive||t.remove(e,n)})},M_=function(t,e,n,o,i){Ew(i||t._componentsViews,function(t){var i=t.__model;a(i,t),t.render(i,e,n,o),r(i,t),u(i,t)})},T_=function(t,o,i,s,l){var c=t._scheduler,f=t._labelManager;f.clearLabels();var d=!1;o.eachSeries(function(e){var r=t._chartsMap[e.__viewId];r.__alive=!0;var o=r.renderTask;c.updatePayload(o,s),a(e,r),l&&l.get(e.uid)&&o.dirty(),o.perform(c.getPerformArgs(o))&&(d=!0),e.__transientTransitionOpt=null,r.group.silent=!!e.get("silent"),n(e,r),Wl(e),f.addLabelsOfSeries(r)}),c.unfinished=d||c.unfinished,f.updateLayoutConfig(i),f.layout(i),f.processLabelsOverall(),o.eachSeries(function(e){var n=t._chartsMap[e.__viewId];r(e,n),u(e,n)}),e(t,o)},k_=function(t,e){Ew(G_,function(n){n(t,e)})},O_=function(t){t[r_]=!0,t.getZr().wakeUp()},L_=function(e){e[r_]&&(e.getZr().storage.traverse(function(e){od(e)||t(e)}),e[r_]=!1)},D_=function(t){return new(function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return i(n,e),n.prototype.getCoordinateSystems=function(){return t._coordSysMgr.getCoordinateSystems()},n.prototype.getComponentByElement=function(e){while(e){var n=e.__ecComponentInfo;if(null!=n)return t._model.getComponent(n.mainType,n.index);e=e.parent}},n.prototype.enterEmphasis=function(e,n){kl(e,n),O_(t)},n.prototype.leaveEmphasis=function(e,n){Dl(e,n),O_(t)},n.prototype.enterBlur=function(e){Al(e),O_(t)},n.prototype.leaveBlur=function(e){Il(e),O_(t)},n.prototype.enterSelect=function(e){Ol(e),O_(t)},n.prototype.leaveSelect=function(e){Ll(e),O_(t)},n.prototype.getModel=function(){return t.getModel()},n.prototype.getViewOfComponentModel=function(e){return t.getViewOfComponentModel(e)},n.prototype.getViewOfSeriesModel=function(e){return t.getViewOfSeriesModel(e)},n}(hg))(t)},A_=function(t){function e(t,e){for(var n=0;n<t.length;n++){var r=t[n];r[i_]=e}}Ew(H_,function(n,r){t._messageCenter.on(r,function(n){if(Z_[t.group]&&t[i_]!==a_){if(n&&n.escapeConnect)return;var r=t.makeActionFromEvent(n),o=[];Ew(q_,function(e){e!==t&&e.group===t.group&&o.push(e)}),e(o,a_),Ew(o,function(t){t[i_]!==u_&&t.dispatchAction(r)}),e(o,s_)}})})},I_=function(t,e){var n=t._model;z(ai(e),function(t){var e,r=t.from,o=t.to;null==o&&eg(e);var i={includeMainTypes:["series"],enableAll:!1,enableNone:!1},a=r?Ii(n,r,i):null,u=Ii(n,o,i),s=u.seriesModel;null==s&&(e=""),a&&a.seriesModel!==s&&(e=""),null!=e&&eg(e),s.__transientTransitionOpt={from:r?r.dimension:null,to:o.dimension,dividingMethod:t.dividingMethod}})}}(),e}(Gt),P_=R_.prototype;P_.on=l_("on"),P_.off=l_("off"),P_.one=function(t,e,n){var r=this;function o(){for(var n=[],i=0;i<arguments.length;i++)n[i]=arguments[i];e&&e.apply&&e.apply(this,n),r.off(t,o)}tg("ECharts#one is deprecated."),this.on.call(this,t,o,n)};var z_=["click","dblclick","mouseover","mouseout","mousemove","mousedown","mouseup","globalout","contextmenu"];function B_(t){0}var V_={},H_={},F_=[],W_=[],U_=[],G_=[],j_=[],X_={},Y_={},q_={},Z_={},$_=+new Date-0,K_=(new Date,"_echarts_instance_");function J_(t,e,n){var r=Q_(t);if(r)return r;var o=new R_(t,e,n);return o.id="ec_"+$_++,q_[o.id]=o,Ri(t,K_,o.id),A_(o),Ew(U_,function(t){t(o)}),o}function Q_(t){return q_[Pi(t,K_)]}function tS(t,e){X_[t]=e}function eS(t){Pw(W_,t)<0&&W_.push(t)}function nS(t,e){cS(F_,t,e,Ww)}function rS(t){Pw(U_,t)<0&&t&&U_.push(t)}function oS(t){Pw(G_,t)<0&&t&&G_.push(t)}function iS(t,e,n){"function"===typeof e&&(n=e,e="");var r=Rw(t)?t.type:[t,t={event:e}][0];t.event=(t.event||r).toLowerCase(),e=t.event,H_[e]||(Lw(o_.test(r)&&o_.test(e)),V_[r]||(V_[r]={action:n,actionInfo:t}),H_[e]=r)}function aS(t,e){mg.register(t,e)}function uS(t,e){cS(j_,t,e,Gw,"layout")}function sS(t,e){cS(j_,t,e,Yw,"visual")}var lS=[];function cS(t,e,n,r,o){if((Nw(e)||Rw(e))&&(n=e,e=r),!(Pw(lS,n)>=0)){lS.push(n);var i=wy.wrapStageHandler(n,o);i.__prio=e,i.__raw=n,t.push(i)}}function fS(t,e){Y_[t]=e}function dS(t,e,n){Ow.registerMap(t,e,n)}var hS=jm;sS(Xw,ty),sS(Zw,ny),sS(Zw,ry),sS(Xw,Oy),sS(Zw,Ly),sS(Qw,kx),eS(Yg),nS(Hw,qg),fS("default",iy),iS({type:el,event:el,update:el},xt),iS({type:nl,event:nl,update:nl},xt),iS({type:rl,event:rl,update:rl},xt),iS({type:ol,event:ol,update:ol},xt),iS({type:il,event:il,update:il},xt),tS("light",Sy),tS("dark",Ay);var pS=[],gS={registerPreprocessor:eS,registerProcessor:nS,registerPostInit:rS,registerPostUpdate:oS,registerAction:iS,registerCoordinateSystem:aS,registerLayout:uS,registerVisual:sS,registerTransform:hS,registerLoading:fS,registerMap:dS,PRIORITY:t_,ComponentModel:bp,ComponentView:Lv,SeriesModel:Iv,ChartView:Wv,registerComponentModel:function(t){bp.registerClass(t)},registerComponentView:function(t){Lv.registerClass(t)},registerSeriesModel:function(t){Iv.registerClass(t)},registerChartView:function(t){Wv.registerClass(t)},registerSubTypeDefaulter:function(t,e){bp.registerSubTypeDefaulter(t,e)},registerPainter:function(t,e){Io(t,e)}};function mS(t){X(t)?z(t,function(t){mS(t)}):E(pS,t)>=0||(pS.push(t),Y(t)&&(t={install:t}),t.install(gS))}function vS(){return!1}function yS(t,e,n){var r=L(),o=e.getWidth(),i=e.getHeight(),a=r.style;return a&&(a.position="absolute",a.left="0",a.top="0",a.width=o+"px",a.height=i+"px",r.setAttribute("data-zr-dom-id",t)),r.width=o*n,r.height=i*n,r}var bS=function(t){function e(e,n,r){var o,i=t.call(this)||this;i.motionBlur=!1,i.lastFrameAlpha=.7,i.dpr=1,i.virtual=!1,i.config={},i.incremental=!1,i.zlevel=0,i.maxRepaintRectCount=5,i.__dirty=!0,i.__firstTimePaint=!0,i.__used=!1,i.__drawIndex=0,i.__startIndex=0,i.__endIndex=0,i.__prevStartIndex=null,i.__prevEndIndex=null,r=r||hr,"string"===typeof e?o=yS(e,n,r):K(e)&&(o=e,e=o.id),i.id=e,i.dom=o;var a=o.style;return a&&(o.onselectstart=vS,a.webkitUserSelect="none",a.userSelect="none",a.webkitTapHighlightColor="rgba(0,0,0,0)",a["-webkit-touch-callout"]="none",a.padding="0",a.margin="0",a.borderWidth="0"),i.domBack=null,i.ctxBack=null,i.painter=n,i.config=null,i.dpr=r,i}return i(e,t),e.prototype.getElementCount=function(){return this.__endIndex-this.__startIndex},e.prototype.afterBrush=function(){this.__prevStartIndex=this.__startIndex,this.__prevEndIndex=this.__endIndex},e.prototype.initContext=function(){this.ctx=this.dom.getContext("2d"),this.ctx.dpr=this.dpr},e.prototype.setUnpainted=function(){this.__firstTimePaint=!0},e.prototype.createBackBuffer=function(){var t=this.dpr;this.domBack=yS("back-"+this.id,this.painter,t),this.ctxBack=this.domBack.getContext("2d"),1!==t&&this.ctxBack.scale(t,t)},e.prototype.createRepaintRects=function(t,e,n,r){if(this.__firstTimePaint)return this.__firstTimePaint=!1,null;var o,i=[],a=this.maxRepaintRectCount,u=!1,s=new Zr(0,0,0,0);function l(t){if(t.isFinite()&&!t.isZero())if(0===i.length){var e=new Zr(0,0,0,0);e.copy(t),i.push(e)}else{for(var n=!1,r=1/0,o=0,l=0;l<i.length;++l){var c=i[l];if(c.intersect(t)){var f=new Zr(0,0,0,0);f.copy(c),f.union(t),i[l]=f,n=!0;break}if(u){s.copy(t),s.union(c);var d=t.width*t.height,h=c.width*c.height,p=s.width*s.height,g=p-d-h;g<r&&(r=g,o=l)}}if(u&&(i[o].union(t),n=!0),!n){e=new Zr(0,0,0,0);e.copy(t),i.push(e)}u||(u=i.length>=a)}}for(var c=this.__startIndex;c<this.__endIndex;++c){var f=t[c];if(f){var d=f.shouldBePainted(n,r,!0,!0),h=f.__isRendered&&(f.__dirty&ze||!d)?f.getPrevPaintRect():null;h&&l(h);var p=d&&(f.__dirty&ze||!f.__isRendered)?f.getPaintRect():null;p&&l(p)}}for(c=this.__prevStartIndex;c<this.__prevEndIndex;++c){f=e[c],d=f.shouldBePainted(n,r,!0,!0);if(f&&(!d||!f.__zr)&&f.__isRendered){h=f.getPrevPaintRect();h&&l(h)}}do{o=!1;for(c=0;c<i.length;)if(i[c].isZero())i.splice(c,1);else{for(var g=c+1;g<i.length;)i[c].intersect(i[g])?(o=!0,i[c].union(i[g]),i.splice(g,1)):g++;c++}}while(o);return this._paintRects=i,i},e.prototype.debugGetPaintRects=function(){return(this._paintRects||[]).slice()},e.prototype.resize=function(t,e){var n=this.dpr,r=this.dom,o=r.style,i=this.domBack;o&&(o.width=t+"px",o.height=e+"px"),r.width=t*n,r.height=e*n,i&&(i.width=t*n,i.height=e*n,1!==n&&this.ctxBack.scale(n,n))},e.prototype.clear=function(t,e,n){var r=this.dom,o=this.ctx,i=r.width,a=r.height;e=e||this.clearColor;var u=this.motionBlur&&!t,s=this.lastFrameAlpha,l=this.dpr,c=this;u&&(this.domBack||this.createBackBuffer(),this.ctxBack.globalCompositeOperation="copy",this.ctxBack.drawImage(r,0,0,i/l,a/l));var f=this.domBack;function d(t,n,r,i){if(o.clearRect(t,n,r,i),e&&"transparent"!==e){var a=void 0;et(e)?(a=e.__canvasGradient||Hb(o,e,{x:0,y:0,width:r,height:i}),e.__canvasGradient=a):nt(e)&&(a=qb(o,e,{dirty:function(){c.setUnpainted(),c.__painter.refresh()}})),o.save(),o.fillStyle=a||e,o.fillRect(t,n,r,i),o.restore()}u&&(o.save(),o.globalAlpha=s,o.drawImage(f,t,n,r,i),o.restore())}!n||u?d(0,0,i,a):n.length&&z(n,function(t){d(t.x*l,t.y*l,t.width*l,t.height*l)})},e}(Gt),xS=bS,wS=1e5,_S=314159,SS=.01,CS=.001;function MS(t){return parseInt(t,10)}function TS(t){return!!t&&(!!t.__builtin__||"function"===typeof t.resize&&"function"===typeof t.refresh)}function kS(t,e){var n=document.createElement("div");return n.style.cssText=["position:relative","width:"+t+"px","height:"+e+"px","padding:0","margin:0","border-width:0"].join(";")+";",n}var DS=function(){function t(t,e,n,r){this.type="canvas",this._zlevelList=[],this._prevDisplayList=[],this._layers={},this._layerConfig={},this._needsManuallyCompositing=!1,this.type="canvas";var o=!t.nodeName||"CANVAS"===t.nodeName.toUpperCase();this._opts=n=I({},n||{}),this.dpr=n.devicePixelRatio||hr,this._singleCanvas=o,this.root=t;var i=t.style;i&&(i.webkitTapHighlightColor="transparent",i.webkitUserSelect="none",i.userSelect="none",i["-webkit-touch-callout"]="none",t.innerHTML=""),this.storage=e;var a=this._zlevelList;this._prevDisplayList=[];var u=this._layers;if(o){var s=t,l=s.width,c=s.height;null!=n.width&&(l=n.width),null!=n.height&&(c=n.height),this.dpr=n.devicePixelRatio||1,s.width=l*this.dpr,s.height=c*this.dpr,this._width=l,this._height=c;var f=new xS(s,this,this.dpr);f.__builtin__=!0,f.initContext(),u[_S]=f,f.zlevel=_S,a.push(_S),this._domRoot=t}else{this._width=this._getSize(0),this._height=this._getSize(1);var d=this._domRoot=kS(this._width,this._height);t.appendChild(d)}}return t.prototype.getType=function(){return"canvas"},t.prototype.isSingleCanvas=function(){return this._singleCanvas},t.prototype.getViewportRoot=function(){return this._domRoot},t.prototype.getViewportRootOffset=function(){var t=this.getViewportRoot();if(t)return{offsetLeft:t.offsetLeft||0,offsetTop:t.offsetTop||0}},t.prototype.refresh=function(t){var e=this.storage.getDisplayList(!0),n=this._prevDisplayList,r=this._zlevelList;this._redrawId=Math.random(),this._paintList(e,n,t,this._redrawId);for(var o=0;o<r.length;o++){var i=r[o],a=this._layers[i];if(!a.__builtin__&&a.refresh){var u=0===o?this._backgroundColor:null;a.refresh(u)}}return this._opts.useDirtyRect&&(this._prevDisplayList=e.slice()),this},t.prototype.refreshHover=function(){this._paintHoverList(this.storage.getDisplayList(!1))},t.prototype._paintHoverList=function(t){var e=t.length,n=this._hoverlayer;if(n&&n.clear(),e){for(var r,o={inHover:!0,viewWidth:this._width,viewHeight:this._height},i=0;i<e;i++){var a=t[i];a.__inHover&&(n||(n=this._hoverlayer=this.getLayer(wS)),r||(r=n.ctx,r.save()),px(r,a,o,i===e-1))}r&&r.restore()}},t.prototype.getHoverLayer=function(){return this.getLayer(wS)},t.prototype.paintOne=function(t,e){hx(t,e)},t.prototype._paintList=function(t,e,n,r){if(this._redrawId===r){n=n||!1,this._updateLayerStatus(t);var o=this._doPaintList(t,e,n),i=o.finished,a=o.needsRefreshHover;if(this._needsManuallyCompositing&&this._compositeManually(),a&&this._paintHoverList(t),i)this.eachLayer(function(t){t.afterBrush&&t.afterBrush()});else{var u=this;Xe(function(){u._paintList(t,e,n,r)})}}},t.prototype._compositeManually=function(){var t=this.getLayer(_S).ctx,e=this._domRoot.width,n=this._domRoot.height;t.clearRect(0,0,e,n),this.eachBuiltinLayer(function(r){r.virtual&&t.drawImage(r.dom,0,0,e,n)})},t.prototype._doPaintList=function(t,e,n){for(var r=this,o=[],i=this._opts.useDirtyRect,a=0;a<this._zlevelList.length;a++){var u=this._zlevelList[a],s=this._layers[u];s.__builtin__&&s!==this._hoverlayer&&(s.__dirty||n)&&o.push(s)}for(var l=!0,c=!1,f=function(a){var u,s=o[a],f=s.ctx,d=i&&s.createRepaintRects(t,e,h._width,h._height),p=n?s.__startIndex:s.__drawIndex,g=!n&&s.incremental&&Date.now,m=g&&Date.now(),v=s.zlevel===h._zlevelList[0]?h._backgroundColor:null;if(s.__startIndex===s.__endIndex)s.clear(!1,v,d);else if(p===s.__startIndex){var y=t[p];y.incremental&&y.notClear&&!n||s.clear(!1,v,d)}-1===p&&(console.error("For some unknown reason. drawIndex is -1"),p=s.__startIndex);var b=function(e){var n={inHover:!1,allClipped:!1,prevEl:null,viewWidth:r._width,viewHeight:r._height};for(u=p;u<s.__endIndex;u++){var o=t[u];if(o.__inHover&&(c=!0),r._doPaintEl(o,s,i,e,n,u===s.__endIndex-1),g){var a=Date.now()-m;if(a>15)break}}n.prevElClipPaths&&f.restore()};if(d)if(0===d.length)u=s.__endIndex;else for(var x=h.dpr,w=0;w<d.length;++w){var _=d[w];f.save(),f.beginPath(),f.rect(_.x*x,_.y*x,_.width*x,_.height*x),f.clip(),b(_),f.restore()}else f.save(),b(),f.restore();s.__drawIndex=u,s.__drawIndex<s.__endIndex&&(l=!1)},h=this,p=0;p<o.length;p++)f(p);return d.wxa&&z(this._layers,function(t){t&&t.ctx&&t.ctx.draw&&t.ctx.draw()}),{finished:l,needsRefreshHover:c}},t.prototype._doPaintEl=function(t,e,n,r,o,i){var a=e.ctx;if(n){var u=t.getPaintRect();(!r||u&&u.intersect(r))&&(px(a,t,o,i),t.setPrevPaintRect(u))}else px(a,t,o,i)},t.prototype.getLayer=function(t,e){this._singleCanvas&&!this._needsManuallyCompositing&&(t=_S);var n=this._layers[t];return n||(n=new xS("zr_"+t,this,this.dpr),n.zlevel=t,n.__builtin__=!0,this._layerConfig[t]?D(n,this._layerConfig[t],!0):this._layerConfig[t-SS]&&D(n,this._layerConfig[t-SS],!0),e&&(n.virtual=e),this.insertLayer(t,n),n.initContext()),n},t.prototype.insertLayer=function(t,e){var n=this._layers,r=this._zlevelList,o=r.length,i=this._domRoot,a=null,u=-1;if(n[t])T("ZLevel "+t+" has been used already");else if(TS(e)){if(o>0&&t>r[0]){for(u=0;u<o-1;u++)if(r[u]<t&&r[u+1]>t)break;a=n[r[u]]}if(r.splice(u+1,0,t),n[t]=e,!e.virtual)if(a){var s=a.dom;s.nextSibling?i.insertBefore(e.dom,s.nextSibling):i.appendChild(e.dom)}else i.firstChild?i.insertBefore(e.dom,i.firstChild):i.appendChild(e.dom);e.__painter=this}else T("Layer of zlevel "+t+" is not valid")},t.prototype.eachLayer=function(t,e){for(var n=this._zlevelList,r=0;r<n.length;r++){var o=n[r];t.call(e,this._layers[o],o)}},t.prototype.eachBuiltinLayer=function(t,e){for(var n=this._zlevelList,r=0;r<n.length;r++){var o=n[r],i=this._layers[o];i.__builtin__&&t.call(e,i,o)}},t.prototype.eachOtherLayer=function(t,e){for(var n=this._zlevelList,r=0;r<n.length;r++){var o=n[r],i=this._layers[o];i.__builtin__||t.call(e,i,o)}},t.prototype.getLayers=function(){return this._layers},t.prototype._updateLayerStatus=function(t){function e(t){a&&(a.__endIndex!==t&&(a.__dirty=!0),a.__endIndex=t)}if(this.eachBuiltinLayer(function(t,e){t.__dirty=t.__used=!1}),this._singleCanvas)for(var n=1;n<t.length;n++){var r=t[n];if(r.zlevel!==t[n-1].zlevel||r.incremental){this._needsManuallyCompositing=!0;break}}var o,i,a=null,u=0;for(i=0;i<t.length;i++){r=t[i];var s=r.zlevel,l=void 0;o!==s&&(o=s,u=0),r.incremental?(l=this.getLayer(s+CS,this._needsManuallyCompositing),l.incremental=!0,u=1):l=this.getLayer(s+(u>0?SS:0),this._needsManuallyCompositing),l.__builtin__||T("ZLevel "+s+" has been used by unkown layer "+l.id),l!==a&&(l.__used=!0,l.__startIndex!==i&&(l.__dirty=!0),l.__startIndex=i,l.incremental?l.__drawIndex=-1:l.__drawIndex=i,e(i),a=l),r.__dirty&ze&&!r.__inHover&&(l.__dirty=!0,l.incremental&&l.__drawIndex<0&&(l.__drawIndex=i))}e(i),this.eachBuiltinLayer(function(t,e){!t.__used&&t.getElementCount()>0&&(t.__dirty=!0,t.__startIndex=t.__endIndex=t.__drawIndex=0),t.__dirty&&t.__drawIndex<0&&(t.__drawIndex=t.__startIndex)})},t.prototype.clear=function(){return this.eachBuiltinLayer(this._clearLayer),this},t.prototype._clearLayer=function(t){t.clear()},t.prototype.setBackgroundColor=function(t){this._backgroundColor=t,z(this._layers,function(t){t.setUnpainted()})},t.prototype.configLayer=function(t,e){if(e){var n=this._layerConfig;n[t]?D(n[t],e,!0):n[t]=e;for(var r=0;r<this._zlevelList.length;r++){var o=this._zlevelList[r];if(o===t||o===t+SS){var i=this._layers[o];D(i,n[t],!0)}}}},t.prototype.delLayer=function(t){var e=this._layers,n=this._zlevelList,r=e[t];r&&(r.dom.parentNode.removeChild(r.dom),delete e[t],n.splice(E(n,t),1))},t.prototype.resize=function(t,e){if(this._domRoot.style){var n=this._domRoot;n.style.display="none";var r=this._opts;if(null!=t&&(r.width=t),null!=e&&(r.height=e),t=this._getSize(0),e=this._getSize(1),n.style.display="",this._width!==t||e!==this._height){for(var o in n.style.width=t+"px",n.style.height=e+"px",this._layers)this._layers.hasOwnProperty(o)&&this._layers[o].resize(t,e);this.refresh(!0)}this._width=t,this._height=e}else{if(null==t||null==e)return;this._width=t,this._height=e,this.getLayer(_S).resize(t,e)}return this},t.prototype.clearLayer=function(t){var e=this._layers[t];e&&e.clear()},t.prototype.dispose=function(){this.root.innerHTML="",this.root=this.storage=this._domRoot=this._layers=null},t.prototype.getRenderedCanvas=function(t){if(t=t||{},this._singleCanvas&&!this._compositeManually)return this._layers[_S].dom;var e=new xS("image",this,t.pixelRatio||this.dpr);e.initContext(),e.clear(!1,t.backgroundColor||this._backgroundColor);var n=e.ctx;if(t.pixelRatio<=this.dpr){this.refresh();var r=e.dom.width,o=e.dom.height;this.eachLayer(function(t){t.__builtin__?n.drawImage(t.dom,0,0,r,o):t.renderToCanvas&&(n.save(),t.renderToCanvas(n),n.restore())})}else for(var i={inHover:!1,viewWidth:this._width,viewHeight:this._height},a=this.storage.getDisplayList(!0),u=0,s=a.length;u<s;u++){var l=a[u];px(n,l,i,u===s-1)}return e.dom},t.prototype.getWidth=function(){return this._width},t.prototype.getHeight=function(){return this._height},t.prototype._getSize=function(t){var e=this._opts,n=["width","height"][t],r=["clientWidth","clientHeight"][t],o=["paddingLeft","paddingTop"][t],i=["paddingRight","paddingBottom"][t];if(null!=e[n]&&"auto"!==e[n])return parseFloat(e[n]);var a=this.root,u=document.defaultView.getComputedStyle(a);return(a[r]||MS(u[n])||MS(a.style[n]))-(MS(u[o])||0)-(MS(u[i])||0)|0},t.prototype.pathToImage=function(t,e){e=e||this.dpr;var n=document.createElement("canvas"),r=n.getContext("2d"),o=t.getBoundingRect(),i=t.style,a=i.shadowBlur*e,u=i.shadowOffsetX*e,s=i.shadowOffsetY*e,l=t.hasStroke()?i.lineWidth:0,c=Math.max(l/2,-u+a),f=Math.max(l/2,u+a),d=Math.max(l/2,-s+a),h=Math.max(l/2,s+a),p=o.width+c+f,g=o.height+d+h;n.width=p*e,n.height=g*e,r.scale(e,e),r.clearRect(0,0,p,g),r.dpr=e;var m={x:t.x,y:t.y,scaleX:t.scaleX,scaleY:t.scaleY,rotation:t.rotation,originX:t.originX,originY:t.originY};t.x=c-o.x,t.y=d-o.y,t.rotation=0,t.scaleX=1,t.scaleY=1,t.updateTransform(),t&&px(r,t,{inHover:!1,viewWidth:this._width,viewHeight:this._height},!0);var v=new xs({style:{x:0,y:0,image:n}});return I(t,m),v},t}(),AS=DS;function IS(t){t.registerPainter("canvas",AS)}function OS(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function LS(t,e,n){n||(n=function(t,e){return t===e}),t=t.slice(),e=e.slice();var r=e.length,o=t.length,i=1,a=r+o,u=[{newPos:-1,components:[]}],s=ES(u[0],e,t,0,n);if(u[0].newPos+1>=r&&s+1>=o){for(var l=[],c=0;c<e.length;c++)l.push(c);return[{indices:l,count:e.length,added:!1,removed:!1}]}function f(){for(var a=-1*i;a<=i;a+=2){var s,l=u[a-1],c=u[a+1],f=(c?c.newPos:0)-a;l&&(u[a-1]=void 0);var d=l&&l.newPos+1<r,h=c&&0<=f&&f<o;if(d||h){if(!d||h&&l.newPos<c.newPos?(s=PS(c),NS(s.components,!1,!0)):(s=l,s.newPos++,NS(s.components,!0,!1)),f=ES(s,e,t,a,n),s.newPos+1>=r&&f+1>=o)return RS(s.components);u[a]=s}else u[a]=void 0}i++}while(i<=a){var d=f();if(d)return d}}function ES(t,e,n,r,o){var i=e.length,a=n.length,u=t.newPos,s=u-r,l=0;while(u+1<i&&s+1<a&&o(e[u+1],n[s+1]))u++,s++,l++;return l&&t.components.push({count:l,added:!1,removed:!1,indices:[]}),t.newPos=u,s}function NS(t,e,n){var r=t[t.length-1];r&&r.added===e&&r.removed===n?t[t.length-1]={count:r.count+1,added:e,removed:n,indices:[]}:t.push({count:1,added:e,removed:n,indices:[]})}function RS(t){for(var e=0,n=t.length,r=0,o=0;e<n;e++){var i=t[e];if(i.removed){for(u=o;u<o+i.count;u++)i.indices.push(u);o+=i.count}else{for(var a=[],u=r;u<r+i.count;u++)a.push(u);i.indices=a,r+=i.count,i.added||(o+=i.count)}}return t}function PS(t){return{newPos:t.newPos,components:t.components.slice(0)}}function zS(t,e,n){return LS(t,e,n)}var BS="none",VS=Math.round,HS=Math.sin,FS=Math.cos,WS=Math.PI,US=2*Math.PI,GS=180/WS,jS=1e-4;function XS(t){return VS(1e3*t)/1e3}function YS(t){return VS(1e4*t)/1e4}function qS(t){return t<jS&&t>-jS}function ZS(t){var e=t.fill;return null!=e&&e!==BS}function $S(t){var e=t.stroke;return null!=e&&e!==BS}function KS(t,e){e&&JS(t,"transform","matrix("+XS(e[0])+","+XS(e[1])+","+XS(e[2])+","+XS(e[3])+","+YS(e[4])+","+YS(e[5])+")")}function JS(t,e,n){(!n||"linear"!==n.type&&"radial"!==n.type)&&t.setAttribute(e,n)}function QS(t,e,n){t.setAttributeNS("http://www.w3.org/1999/xlink",e,n)}function tC(t,e,n){t.setAttributeNS("http://www.w3.org/XML/1998/namespace",e,n)}function eC(t,e,n){var r=null==e.opacity?1:e.opacity;if(n instanceof xs)t.style.opacity=r+"";else{if(ZS(e)){var o=e.fill;o="transparent"===o?BS:o,JS(t,"fill",o),JS(t,"fill-opacity",(null!=e.fillOpacity?e.fillOpacity*r:r)+"")}else JS(t,"fill",BS);if($S(e)){var i=e.stroke;i="transparent"===i?BS:i,JS(t,"stroke",i);var a=e.lineWidth,u=e.strokeNoScale?n.getLineScale():1;JS(t,"stroke-width",(u?a/u:0)+""),JS(t,"paint-order",e.strokeFirst?"stroke":"fill"),JS(t,"stroke-opacity",(null!=e.strokeOpacity?e.strokeOpacity*r:r)+"");var s=e.lineDash&&a>0&&Wb(e.lineDash,a);if(s){var l=e.lineDashOffset;u&&1!==u&&(s=B(s,function(t){return t/u}),l&&(l/=u,l=VS(l))),JS(t,"stroke-dasharray",s.join(",")),JS(t,"stroke-dashoffset",(l||0)+"")}else JS(t,"stroke-dasharray","");e.lineCap&&JS(t,"stroke-linecap",e.lineCap),e.lineJoin&&JS(t,"stroke-linejoin",e.lineJoin),e.miterLimit&&JS(t,"stroke-miterlimit",e.miterLimit+"")}else JS(t,"stroke",BS)}}var nC=function(){function t(){}return t.prototype.reset=function(){this._d=[],this._str=""},t.prototype.moveTo=function(t,e){this._add("M",t,e)},t.prototype.lineTo=function(t,e){this._add("L",t,e)},t.prototype.bezierCurveTo=function(t,e,n,r,o,i){this._add("C",t,e,n,r,o,i)},t.prototype.quadraticCurveTo=function(t,e,n,r){this._add("Q",t,e,n,r)},t.prototype.arc=function(t,e,n,r,o,i){this.ellipse(t,e,n,n,0,r,o,i)},t.prototype.ellipse=function(t,e,n,r,o,i,a,u){var s=0===this._d.length,l=a-i,c=!u,f=Math.abs(l),d=qS(f-US)||(c?l>=US:-l>=US),h=l>0?l%US:l%US+US,p=!1;p=!!d||!qS(f)&&h>=WS===!!c;var g=YS(t+n*FS(i)),m=YS(e+r*HS(i));d&&(l=c?US-1e-4:1e-4-US,p=!0,s&&this._d.push("M",g,m));var v=YS(t+n*FS(i+l)),y=YS(e+r*HS(i+l));if(isNaN(g)||isNaN(m)||isNaN(n)||isNaN(r)||isNaN(o)||isNaN(GS)||isNaN(v)||isNaN(y))return"";this._d.push("A",YS(n),YS(r),VS(o*GS),+p,+c,v,y)},t.prototype.rect=function(t,e,n,r){this._add("M",t,e),this._add("L",t+n,e),this._add("L",t+n,e+r),this._add("L",t,e+r),this._add("L",t,e)},t.prototype.closePath=function(){this._d.length>0&&this._add("Z")},t.prototype._add=function(t,e,n,r,o,i,a,u,s){this._d.push(t);for(var l=1;l<arguments.length;l++){var c=arguments[l];if(isNaN(c))return void(this._invalid=!0);this._d.push(YS(c))}},t.prototype.generateStr=function(){this._str=this._invalid?"":this._d.join(" "),this._d=[]},t.prototype.getStr=function(){return this._str},t}(),rC={brush:function(t){var e=t.style,n=t.__svgEl;n||(n=OS("path"),t.__svgEl=n),t.path||t.createPathProxy();var r=t.path;t.shapeChanged()&&(r.beginPath(),t.buildPath(r,t.shape),t.pathUpdated());var o=r.getVersion(),i=t,a=i.__svgPathBuilder;(i.__svgPathVersion!==o||!a||t.style.strokePercent<1)&&(a||(a=i.__svgPathBuilder=new nC),a.reset(),r.rebuildPath(a,t.style.strokePercent),a.generateStr(),i.__svgPathVersion=o),JS(n,"d",a.getStr()),eC(n,e,t),KS(n,t.transform)}},oC={brush:function(t){var e=t.style,n=e.image;if(n instanceof HTMLImageElement?n=n.src:n instanceof HTMLCanvasElement&&(n=n.toDataURL()),n){var r=e.x||0,o=e.y||0,i=e.width,a=e.height,u=t.__svgEl;u||(u=OS("image"),t.__svgEl=u),n!==t.__imageSrc&&(QS(u,"href",n),t.__imageSrc=n),JS(u,"width",i+""),JS(u,"height",a+""),JS(u,"x",r+""),JS(u,"y",o+""),eC(u,e,t),KS(u,t.transform)}}},iC={left:"start",right:"end",center:"middle",middle:"middle"};function aC(t,e,n){return"top"===n?t+=e/2:"bottom"===n&&(t-=e/2),t}var uC={brush:function(t){var e=t.style,n=e.text;if(null!=n&&(n+=""),n&&!isNaN(e.x)&&!isNaN(e.y)){var r=t.__svgEl;r||(r=OS("text"),tC(r,"xml:space","preserve"),t.__svgEl=r);var o=e.font||Kr,i=r.style;i.font=o,r.textContent=n,eC(r,e,t),KS(r,t.transform);var a=e.x||0,u=aC(e.y||0,io(o),e.textBaseline),s=iC[e.textAlign]||e.textAlign;JS(r,"dominant-baseline","central"),JS(r,"text-anchor",s),JS(r,"x",a+""),JS(r,"y",u+"")}}},sC="0",lC="1",cC=function(){function t(t,e,n,r,o){this.nextId=0,this._domName="_dom",this.createElement=OS,this._zrId=t,this._svgRoot=e,this._tagNames="string"===typeof n?[n]:n,this._markLabel=r,o&&(this._domName=o)}return t.prototype.getDefs=function(t){var e=this._svgRoot,n=this._svgRoot.getElementsByTagName("defs");if(0===n.length){if(t){var r=e.insertBefore(this.createElement("defs"),e.firstChild);return r.contains||(r.contains=function(t){var e=r.children;if(!e)return!1;for(var n=e.length-1;n>=0;--n)if(e[n]===t)return!0;return!1}),r}return null}return n[0]},t.prototype.doUpdate=function(t,e){if(t){var n=this.getDefs(!1);if(t[this._domName]&&n.contains(t[this._domName]))"function"===typeof e&&e(t);else{var r=this.add(t);r&&(t[this._domName]=r)}}},t.prototype.add=function(t){return null},t.prototype.addDom=function(t){var e=this.getDefs(!0);t.parentNode!==e&&e.appendChild(t)},t.prototype.removeDom=function(t){var e=this.getDefs(!1);e&&t[this._domName]&&(e.removeChild(t[this._domName]),t[this._domName]=null)},t.prototype.getDoms=function(){var t=this.getDefs(!1);if(!t)return[];var e=[];return z(this._tagNames,function(n){for(var r=t.getElementsByTagName(n),o=0;o<r.length;o++)e.push(r[o])}),e},t.prototype.markAllUnused=function(){var t=this.getDoms(),e=this;z(t,function(t){t[e._markLabel]=sC})},t.prototype.markDomUsed=function(t){t&&(t[this._markLabel]=lC)},t.prototype.markDomUnused=function(t){t&&(t[this._markLabel]=sC)},t.prototype.isDomUnused=function(t){return t&&t[this._markLabel]!==lC},t.prototype.removeUnused=function(){var t=this,e=this.getDefs(!1);if(e){var n=this.getDoms();z(n,function(n){t.isDomUnused(n)&&e.removeChild(n)})}},t.prototype.getSvgProxy=function(t){return t instanceof ds?rC:t instanceof xs?oC:t instanceof gs?uC:rC},t.prototype.getSvgElement=function(t){return t.__svgEl},t}(),fC=cC;function dC(t){return"linear"===t.type}function hC(t){return"radial"===t.type}function pC(t){return t&&("linear"===t.type||"radial"===t.type)}var gC=function(t){function e(e,n){return t.call(this,e,n,["linearGradient","radialGradient"],"__gradient_in_use__")||this}return i(e,t),e.prototype.addWithoutUpdate=function(t,e){if(e&&e.style){var n=this;z(["fill","stroke"],function(r){var o=e.style[r];if(pC(o)){var i=o,a=n.getDefs(!0),u=void 0;i.__dom?(u=i.__dom,a.contains(i.__dom)||n.addDom(u)):u=n.add(i),n.markUsed(e);var s=u.getAttribute("id");t.setAttribute(r,"url(#"+s+")")}})}},e.prototype.add=function(t){var e;if(dC(t))e=this.createElement("linearGradient");else{if(!hC(t))return T("Illegal gradient type."),null;e=this.createElement("radialGradient")}return t.id=t.id||this.nextId++,e.setAttribute("id","zr"+this._zrId+"-gradient-"+t.id),this.updateDom(t,e),this.addDom(e),e},e.prototype.update=function(t){if(pC(t)){var e=this;this.doUpdate(t,function(){var n=t.__dom;if(n){var r=n.tagName,o=t.type;"linear"===o&&"linearGradient"===r||"radial"===o&&"radialGradient"===r?e.updateDom(t,t.__dom):(e.removeDom(t),e.add(t))}})}},e.prototype.updateDom=function(t,e){if(dC(t))e.setAttribute("x1",t.x+""),e.setAttribute("y1",t.y+""),e.setAttribute("x2",t.x2+""),e.setAttribute("y2",t.y2+"");else{if(!hC(t))return void T("Illegal gradient type.");e.setAttribute("cx",t.x+""),e.setAttribute("cy",t.y+""),e.setAttribute("r",t.r+"")}t.global?e.setAttribute("gradientUnits","userSpaceOnUse"):e.setAttribute("gradientUnits","objectBoundingBox"),e.innerHTML="";for(var n=t.colorStops,r=0,o=n.length;r<o;++r){var i=this.createElement("stop");i.setAttribute("offset",100*n[r].offset+"%");var a=n[r].color;if(a.indexOf("rgba")>-1){var u=gn(a)[3],s=bn(a);i.setAttribute("stop-color","#"+s),i.setAttribute("stop-opacity",u+"")}else i.setAttribute("stop-color",n[r].color);e.appendChild(i)}t.__dom=e},e.prototype.markUsed=function(e){if(e.style){var n=e.style.fill;n&&n.__dom&&t.prototype.markDomUsed.call(this,n.__dom),n=e.style.stroke,n&&n.__dom&&t.prototype.markDomUsed.call(this,n.__dom)}},e}(fC),mC=gC;function vC(t){return t&&(!!t.image||!!t.svgElement)}var yC=new kb,bC=function(t){function e(e,n){return t.call(this,e,n,["pattern"],"__pattern_in_use__")||this}return i(e,t),e.prototype.addWithoutUpdate=function(t,e){if(e&&e.style){var n=this;z(["fill","stroke"],function(r){var o=e.style[r];if(vC(o)){var i=n.getDefs(!0),a=yC.get(o);a?i.contains(a)||n.addDom(a):a=n.add(o),n.markUsed(e);var u=a.getAttribute("id");t.setAttribute(r,"url(#"+u+")")}})}},e.prototype.add=function(t){if(vC(t)){var e=this.createElement("pattern");return t.id=null==t.id?this.nextId++:t.id,e.setAttribute("id","zr"+this._zrId+"-pattern-"+t.id),e.setAttribute("x","0"),e.setAttribute("y","0"),e.setAttribute("patternUnits","userSpaceOnUse"),this.updateDom(t,e),this.addDom(e),e}},e.prototype.update=function(t){if(vC(t)){var e=this;this.doUpdate(t,function(){var n=yC.get(t);e.updateDom(t,n)})}},e.prototype.updateDom=function(t,e){var n=t.svgElement;if(n instanceof SVGElement)n.parentNode!==e&&(e.innerHTML="",e.appendChild(n),e.setAttribute("width",t.svgWidth+""),e.setAttribute("height",t.svgHeight+""));else{var r=void 0,o=e.getElementsByTagName("image");if(o.length){if(!t.image)return void e.removeChild(o[0]);r=o[0]}else t.image&&(r=this.createElement("image"));if(r){var i=void 0,a=t.image;if("string"===typeof a?i=a:a instanceof HTMLImageElement?i=a.src:a instanceof HTMLCanvasElement&&(i=a.toDataURL()),i){r.setAttribute("href",i),r.setAttribute("x","0"),r.setAttribute("y","0");var u={dirty:function(){}},s=aa(i,r,u,function(t){e.setAttribute("width",t.width+""),e.setAttribute("height",t.height+"")});s&&s.width&&s.height&&(e.setAttribute("width",s.width+""),e.setAttribute("height",s.height+"")),e.appendChild(r)}}}var l=t.x||0,c=t.y||0,f=(t.rotation||0)/Math.PI*180,d=t.scaleX||1,h=t.scaleY||1,p="translate("+l+", "+c+") rotate("+f+") scale("+d+", "+h+")";e.setAttribute("patternTransform",p),yC.set(t,e)},e.prototype.markUsed=function(e){e.style&&(vC(e.style.fill)&&t.prototype.markDomUsed.call(this,yC.get(e.style.fill)),vC(e.style.stroke)&&t.prototype.markDomUsed.call(this,yC.get(e.style.stroke)))},e}(fC),xC=bC;function wC(t){var e=[];if(t)for(var n=0;n<t.length;n++){var r=t[n];e.push(r.id)}return e.join(",")}function _C(t){var e=t.__clipPaths;return e&&e.length>0}var SC=function(t){function e(e,n){var r=t.call(this,e,n,"clipPath","__clippath_in_use__")||this;return r._refGroups={},r._keyDuplicateCount={},r}return i(e,t),e.prototype.markAllUnused=function(){for(var e in t.prototype.markAllUnused.call(this),this._refGroups)this.markDomUnused(this._refGroups[e]);this._keyDuplicateCount={}},e.prototype._getClipPathGroup=function(t,e){if(_C(t)){var n=t.__clipPaths,r=this._keyDuplicateCount,o=wC(n);return Fb(n,e&&e.__clipPaths)&&(r[o]=r[o]||0,r[o]&&(o+="-"+r[o]),r[o]++),this._refGroups[o]||(this._refGroups[o]=this.createElement("g"))}},e.prototype.update=function(t,e){var n=this._getClipPathGroup(t,e);return n&&(this.markDomUsed(n),this.updateDom(n,t.__clipPaths)),n},e.prototype.updateDom=function(t,e){if(e&&e.length>0){var n=this.getDefs(!0),r=e[0],o=void 0,i=void 0;r._dom?(i=r._dom.getAttribute("id"),o=r._dom,n.contains(o)||n.appendChild(o)):(i="zr"+this._zrId+"-clip-"+this.nextId,++this.nextId,o=this.createElement("clipPath"),o.setAttribute("id",i),n.appendChild(o),r._dom=o);var a=this.getSvgProxy(r);a.brush(r);var u=this.getSvgElement(r);o.innerHTML="",o.appendChild(u),t.setAttribute("clip-path","url(#"+i+")"),e.length>1&&this.updateDom(o,e.slice(1))}else t&&t.setAttribute("clip-path","none")},e.prototype.markUsed=function(e){var n=this;e.__clipPaths&&z(e.__clipPaths,function(e){e._dom&&t.prototype.markDomUsed.call(n,e._dom)})},e.prototype.removeUnused=function(){t.prototype.removeUnused.call(this);var e={};for(var n in this._refGroups){var r=this._refGroups[n];this.isDomUnused(r)?r.parentNode&&r.parentNode.removeChild(r):e[n]=r}this._refGroups=e},e}(fC),CC=SC,MC=function(t){function e(e,n){var r=t.call(this,e,n,["filter"],"__filter_in_use__","_shadowDom")||this;return r._shadowDomMap={},r._shadowDomPool=[],r}return i(e,t),e.prototype._getFromPool=function(){var t=this._shadowDomPool.pop();if(!t){t=this.createElement("filter"),t.setAttribute("id","zr"+this._zrId+"-shadow-"+this.nextId++);var e=this.createElement("feDropShadow");t.appendChild(e),this.addDom(t)}return t},e.prototype.update=function(t,e){var n=e.style;if(kC(n)){var r=DC(e),o=e._shadowDom=this._shadowDomMap[r];o||(o=this._getFromPool(),this._shadowDomMap[r]=o),this.updateDom(t,e,o)}else this.remove(t,e)},e.prototype.remove=function(t,e){null!=e._shadowDom&&(e._shadowDom=null,t.style.filter="")},e.prototype.updateDom=function(t,e,n){var r=n.children[0],o=e.style,i=e.getGlobalScale(),a=i[0],u=i[1];if(a&&u){var s=o.shadowOffsetX||0,l=o.shadowOffsetY||0,c=o.shadowBlur,f=o.shadowColor;r.setAttribute("dx",s/a+""),r.setAttribute("dy",l/u+""),r.setAttribute("flood-color",f);var d=c/2/a,h=c/2/u,p=d+" "+h;r.setAttribute("stdDeviation",p),n.setAttribute("x","-100%"),n.setAttribute("y","-100%"),n.setAttribute("width","300%"),n.setAttribute("height","300%"),e._shadowDom=n;var g=n.getAttribute("id");t.style.filter="url(#"+g+")"}},e.prototype.removeUnused=function(){var t=this.getDefs(!1);if(t){var e=this._shadowDomPool;for(var n in this._shadowDomMap){var r=this._shadowDomMap[n];e.push(r)}this._shadowDomMap={}}},e}(fC),TC=MC;function kC(t){return t&&(t.shadowBlur||t.shadowOffsetX||t.shadowOffsetY)}function DC(t){var e=t.style,n=t.getGlobalScale();return[e.shadowColor,(e.shadowBlur||0).toFixed(2),(e.shadowOffsetX||0).toFixed(2),(e.shadowOffsetY||0).toFixed(2),n[0],n[1]].join(",")}function AC(t){return parseInt(t,10)}function IC(t){return t instanceof ds?rC:t instanceof xs?oC:t instanceof gs?uC:rC}function OC(t,e){return e&&t&&e.parentNode!==t}function LC(t,e,n){if(OC(t,e)&&n){var r=n.nextSibling;r?t.insertBefore(e,r):t.appendChild(e)}}function EC(t,e){if(OC(t,e)){var n=t.firstChild;n?t.insertBefore(e,n):t.appendChild(e)}}function NC(t,e){e&&t&&e.parentNode===t&&t.removeChild(e)}function RC(t){t&&t.parentNode&&t.parentNode.removeChild(t)}function PC(t){return t.__svgEl}var zC=function(){function t(t,e,n,r){this.type="svg",this.refreshHover=BC("refreshHover"),this.pathToImage=BC("pathToImage"),this.configLayer=BC("configLayer"),this.root=t,this.storage=e,this._opts=n=I({},n||{});var o=OS("svg");o.setAttributeNS("http://www.w3.org/2000/xmlns/","xmlns","http://www.w3.org/2000/svg"),o.setAttributeNS("http://www.w3.org/2000/xmlns/","xmlns:xlink","http://www.w3.org/1999/xlink"),o.setAttribute("version","1.1"),o.setAttribute("baseProfile","full"),o.style.cssText="user-select:none;position:absolute;left:0;top:0;";var i=OS("g");o.appendChild(i);var a=OS("g");o.appendChild(a),this._gradientManager=new mC(r,a),this._patternManager=new xC(r,a),this._clipPathManager=new CC(r,a),this._shadowManager=new TC(r,a);var u=document.createElement("div");u.style.cssText="overflow:hidden;position:relative",this._svgDom=o,this._svgRoot=a,this._backgroundRoot=i,this._viewport=u,t.appendChild(u),u.appendChild(o),this.resize(n.width,n.height),this._visibleList=[]}return t.prototype.getType=function(){return"svg"},t.prototype.getViewportRoot=function(){return this._viewport},t.prototype.getSvgDom=function(){return this._svgDom},t.prototype.getSvgRoot=function(){return this._svgRoot},t.prototype.getViewportRootOffset=function(){var t=this.getViewportRoot();if(t)return{offsetLeft:t.offsetLeft||0,offsetTop:t.offsetTop||0}},t.prototype.refresh=function(){var t=this.storage.getDisplayList(!0);this._paintList(t)},t.prototype.setBackgroundColor=function(t){this._backgroundRoot&&this._backgroundNode&&this._backgroundRoot.removeChild(this._backgroundNode);var e=OS("rect");e.setAttribute("width",this.getWidth()),e.setAttribute("height",this.getHeight()),e.setAttribute("x",0),e.setAttribute("y",0),e.setAttribute("id",0),e.style.fill=t,this._backgroundRoot.appendChild(e),this._backgroundNode=e},t.prototype.createSVGElement=function(t){return OS(t)},t.prototype.paintOne=function(t){var e=IC(t);return e&&e.brush(t),PC(t)},t.prototype._paintList=function(t){var e=this._gradientManager,n=this._patternManager,r=this._clipPathManager,o=this._shadowManager;e.markAllUnused(),n.markAllUnused(),r.markAllUnused(),o.markAllUnused();for(var i=this._svgRoot,a=this._visibleList,u=t.length,s=[],l=0;l<u;l++){var c=t[l],f=IC(c),d=PC(c);c.invisible||(!c.__dirty&&d||(f&&f.brush(c),d=PC(c),d&&c.style&&(e.update(c.style.fill),e.update(c.style.stroke),n.update(c.style.fill),n.update(c.style.stroke),o.update(d,c)),c.__dirty=0),d&&s.push(c))}var h,p,g,m,v=zS(a,s);for(l=0;l<v.length;l++){var y=v[l];if(y.removed)for(var b=0;b<y.count;b++){c=a[y.indices[b]],d=PC(c);_C(c)?RC(d):NC(i,d)}}for(l=0;l<v.length;l++){y=v[l];if(!y.removed)for(b=0;b<y.count;b++){c=s[y.indices[b]];var x=r.update(c,g);x!==m&&(h=p,x&&(h?LC(i,x,h):EC(i,x),p=x,h=null),m=x);d=PC(c);h?LC(m||i,d,h):EC(m||i,d),h=d||h,m||(p=h),e.markUsed(c),e.addWithoutUpdate(d,c),n.markUsed(c),n.addWithoutUpdate(d,c),r.markUsed(c),g=c}}e.removeUnused(),n.removeUnused(),r.removeUnused(),o.removeUnused(),this._visibleList=s},t.prototype.resize=function(t,e){var n=this._viewport;n.style.display="none";var r=this._opts;if(null!=t&&(r.width=t),null!=e&&(r.height=e),t=this._getSize(0),e=this._getSize(1),n.style.display="",this._width!==t||this._height!==e){this._width=t,this._height=e;var o=n.style;o.width=t+"px",o.height=e+"px";var i=this._svgDom;i.setAttribute("width",t+""),i.setAttribute("height",e+"")}this._backgroundNode&&(this._backgroundNode.setAttribute("width",t),this._backgroundNode.setAttribute("height",e))},t.prototype.getWidth=function(){return this._width},t.prototype.getHeight=function(){return this._height},t.prototype._getSize=function(t){var e=this._opts,n=["width","height"][t],r=["clientWidth","clientHeight"][t],o=["paddingLeft","paddingTop"][t],i=["paddingRight","paddingBottom"][t];if(null!=e[n]&&"auto"!==e[n])return parseFloat(e[n]);var a=this.root,u=document.defaultView.getComputedStyle(a);return(a[r]||AC(u[n])||AC(a.style[n]))-(AC(u[o])||0)-(AC(u[i])||0)|0},t.prototype.dispose=function(){this.root.innerHTML="",this._svgRoot=this._backgroundRoot=this._svgDom=this._backgroundNode=this._viewport=this.storage=null},t.prototype.clear=function(){var t=this._viewport;t&&t.parentNode&&t.parentNode.removeChild(t)},t.prototype.toDataURL=function(){this.refresh();var t=this._svgDom,e=t.outerHTML||(t.parentNode&&t.parentNode).innerHTML,n=encodeURIComponent(e.replace(/></g,">\n\r<"));return"data:image/svg+xml;charset=UTF-8,"+n},t}();function BC(t){return function(){T('In SVG mode painter not support method "'+t+'"')}}var VC=zC;function HC(t){t.registerPainter("svg",VC)}function FC(t){return null==t?0:t.length||1}function WC(t){return t}var UC=function(){function t(t,e,n,r,o,i){this._old=t,this._new=e,this._oldKeyGetter=n||WC,this._newKeyGetter=r||WC,this.context=o,this._diffModeMultiple="multiple"===i}return t.prototype.add=function(t){return this._add=t,this},t.prototype.update=function(t){return this._update=t,this},t.prototype.updateManyToOne=function(t){return this._updateManyToOne=t,this},t.prototype.updateOneToMany=function(t){return this._updateOneToMany=t,this},t.prototype.remove=function(t){return this._remove=t,this},t.prototype.execute=function(){this[this._diffModeMultiple?"_executeMultiple":"_executeOneToOne"]()},t.prototype._executeOneToOne=function(){var t=this._old,e=this._new,n={},r=new Array(t.length),o=new Array(e.length);this._initIndexMap(t,null,r,"_oldKeyGetter"),this._initIndexMap(e,n,o,"_newKeyGetter");for(var i=0;i<t.length;i++){var a=r[i],u=n[a],s=FC(u);if(s>1){var l=u.shift();1===u.length&&(n[a]=u[0]),this._update&&this._update(l,i)}else 1===s?(n[a]=null,this._update&&this._update(u,i)):this._remove&&this._remove(i)}this._performRestAdd(o,n)},t.prototype._executeMultiple=function(){var t=this._old,e=this._new,n={},r={},o=[],i=[];this._initIndexMap(t,n,o,"_oldKeyGetter"),this._initIndexMap(e,r,i,"_newKeyGetter");for(var a=0;a<o.length;a++){var u=o[a],s=n[u],l=r[u],c=FC(s),f=FC(l);if(c>1&&1===f)this._updateManyToOne&&this._updateManyToOne(l,s),r[u]=null;else if(1===c&&f>1)this._updateOneToMany&&this._updateOneToMany(l,s),r[u]=null;else if(1===c&&1===f)this._update&&this._update(l,s),r[u]=null;else if(c>1)for(var d=0;d<c;d++)this._remove&&this._remove(s[d]);else this._remove&&this._remove(s)}this._performRestAdd(i,r)},t.prototype._performRestAdd=function(t,e){for(var n=0;n<t.length;n++){var r=t[n],o=e[r],i=FC(o);if(i>1)for(var a=0;a<i;a++)this._add&&this._add(o[a]);else 1===i&&this._add&&this._add(o);e[r]=null}},t.prototype._initIndexMap=function(t,e,n,r){for(var o=this._diffModeMultiple,i=0;i<t.length;i++){var a="_ec_"+this[r](t[i],i);if(o||(n[i]=a),e){var u=e[a],s=FC(u);0===s?(e[a]=i,o&&n.push(a)):1===s?e[a]=[u,i]:u.push(i)}}},t}(),GC=UC;function jC(t){var e={},n=e.encode={},r=mt(),o=[],i=[],a=e.userOutput={dimensionNames:t.dimensions.slice(),encode:{}};z(t.dimensions,function(e){var u=t.getDimensionInfo(e),s=u.coordDim;if(s){0;var l=u.coordDimIndex;XC(n,s)[l]=e,u.isExtraCoord||(r.set(s,1),qC(u.type)&&(o[0]=e),XC(a.encode,s)[l]=u.index),u.defaultTooltip&&i.push(e)}Sp.each(function(t,e){var r=XC(n,e),o=u.otherDims[e];null!=o&&!1!==o&&(r[o]=u.name)})});var u=[],s={};r.each(function(t,e){var r=n[e];s[e]=r[0],u=u.concat(r)}),e.dataDimsOnCoord=u,e.encodeFirstDimNotExtra=s;var l=n.label;l&&l.length&&(o=l.slice());var c=n.tooltip;return c&&c.length?i=c.slice():i.length||(i=o.slice()),n.defaultedLabel=o,n.defaultedTooltip=i,e}function XC(t,e){return t.hasOwnProperty(e)||(t[e]=[]),t[e]}function YC(t){return"category"===t?"ordinal":"time"===t?"time":"float"}function qC(t){return!("ordinal"===t||"time"===t)}var ZC,$C,KC,JC,QC,tM,eM,nM,rM,oM,iM,aM,uM,sM,lM=function(){function t(t){this.otherDims={},null!=t&&I(this,t)}return t}(),cM=lM,fM=Math.floor,dM=K,hM=B,pM="undefined",gM=-1,mM="e\0\0",vM={float:typeof Float64Array===pM?Array:Float64Array,int:typeof Int32Array===pM?Array:Int32Array,ordinal:Array,number:Array,time:Array},yM=typeof Uint32Array===pM?Array:Uint32Array,bM=typeof Int32Array===pM?Array:Int32Array,xM=typeof Uint16Array===pM?Array:Uint16Array,wM=["hasItemOption","_nameList","_idList","_invertedIndicesMap","_rawData","_dimValueGetter","_count","_rawCount","_nameDimIdx","_idDimIdx","_nameRepeatCount"],_M=["_extent","_approximateExtent","_rawExtent"],SM=function(){function t(t,e){this.type="list",this._count=0,this._rawCount=0,this._storage={},this._storageArr=[],this._nameList=[],this._idList=[],this._visual={},this._layout={},this._itemVisuals=[],this._itemLayouts=[],this._graphicEls=[],this._rawExtent={},this._extent={},this._approximateExtent={},this._calculationInfo={},this.hasItemOption=!0,this.TRANSFERABLE_METHODS=["cloneShallow","downSample","lttbDownSample","map"],this.CHANGABLE_METHODS=["filterSelf","selectRange"],this.DOWNSAMPLE_METHODS=["downSample","lttbDownSample"],this.getRawIndex=QC,t=t||["x","y"];for(var n={},r=[],o={},i=0;i<t.length;i++){var a=t[i],u=q(a)?new cM({name:a}):a instanceof cM?a:new cM(a),s=u.name;u.type=u.type||"float",u.coordDim||(u.coordDim=s,u.coordDimIndex=0);var l=u.otherDims=u.otherDims||{};r.push(s),n[s]=u,u.index=i,u.createInvertedIndices&&(o[s]=[]),0===l.itemName&&(this._nameDimIdx=i,this._nameOrdinalMeta=u.ordinalMeta),0===l.itemId&&(this._idDimIdx=i,this._idOrdinalMeta=u.ordinalMeta)}this.dimensions=r,this._dimensionInfos=n,this.hostModel=e,this._dimensionsSummary=jC(this),this._invertedIndicesMap=o,this.userOutput=this._dimensionsSummary.userOutput}return t.prototype.getDimension=function(t){return"number"!==typeof t&&(isNaN(t)||this._dimensionInfos.hasOwnProperty(t))||(t=this.dimensions[t]),t},t.prototype.getDimensionInfo=function(t){return this._dimensionInfos[this.getDimension(t)]},t.prototype.getDimensionsOnCoord=function(){return this._dimensionsSummary.dataDimsOnCoord.slice()},t.prototype.mapDimension=function(t,e){var n=this._dimensionsSummary;if(null==e)return n.encodeFirstDimNotExtra[t];var r=n.encode[t];return r?r[e]:null},t.prototype.mapDimensionsAll=function(t){var e=this._dimensionsSummary,n=e.encode[t];return(n||[]).slice()},t.prototype.initData=function(t,e,n){var r=nm(t)||P(t),o=r?new dm(t,this.dimensions.length):t;this._rawData=o;var i=o.getSource().sourceFormat;this._storage={},this._indices=null,this._dontMakeIdFromName=null!=this._idDimIdx||i===Dp||!!o.fillStorage,this._nameList=(e||[]).slice(),this._idList=[],this._nameRepeatCount={},n||(this.hasItemOption=!1),this.defaultDimValueGetter=ZC[i],this._dimValueGetter=n=n||this.defaultDimValueGetter,this._dimValueGetterArrayRows=ZC.arrayRows,this._rawExtent={},this._initDataFromProvider(0,o.count()),o.pure&&(this.hasItemOption=!1)},t.prototype.getProvider=function(){return this._rawData},t.prototype.appendData=function(t){var e=this._rawData,n=this.count();e.appendData(t);var r=e.count();e.persistent||(r+=n),this._initDataFromProvider(n,r,!0)},t.prototype.appendValues=function(t,e){for(var n=this._storage,r=this.dimensions,o=r.length,i=this._rawExtent,a=this.count(),u=a+Math.max(t.length,e?e.length:0),s=0;s<o;s++){var l=r[s];i[l]||(i[l]=aM()),JC(n,this._dimensionInfos[l],u,!0)}for(var c=hM(r,function(t){return i[t]}),f=this._storageArr=hM(r,function(t){return n[t]}),d=[],h=a;h<u;h++){for(var p=h-a,g=0;g<o;g++){l=r[g];var m=this._dimValueGetterArrayRows(t[p]||d,l,p,g);f[g][h]=m;var v=c[g];m<v[0]&&(v[0]=m),m>v[1]&&(v[1]=m)}e&&(this._nameList[h]=e[p],this._dontMakeIdFromName||rM(this,h))}this._rawCount=this._count=u,this._extent={},$C(this)},t.prototype._initDataFromProvider=function(t,e,n){if(!(t>=e)){for(var r=this._rawData,o=this._storage,i=this.dimensions,a=i.length,u=this._dimensionInfos,s=this._nameList,l=this._idList,c=this._rawExtent,f=r.getSource().sourceFormat,d=f===Cp,h=0;h<a;h++){var p=i[h];c[p]||(c[p]=aM()),JC(o,u[p],e,n)}var g=this._storageArr=hM(i,function(t){return o[t]}),m=hM(i,function(t){return c[t]});if(r.fillStorage)r.fillStorage(t,e,g,m);else for(var v=[],y=t;y<e;y++){v=r.getItem(y,v);for(var b=0;b<a;b++){p=i[b];var x=g[b],w=this._dimValueGetter(v,p,y,b);x[y]=w;var _=m[b];w<_[0]&&(_[0]=w),w>_[1]&&(_[1]=w)}if(d&&!r.pure&&v){var S=v.name;null==s[y]&&null!=S&&(s[y]=xi(S,null));var C=v.id;null==l[y]&&null!=C&&(l[y]=xi(C,null))}this._dontMakeIdFromName||rM(this,y)}!r.persistent&&r.clean&&r.clean(),this._rawCount=this._count=e,this._extent={},$C(this)}},t.prototype.count=function(){return this._count},t.prototype.getIndices=function(){var t,e=this._indices;if(e){var n=e.constructor,r=this._count;if(n===Array){t=new n(r);for(var o=0;o<r;o++)t[o]=e[o]}else t=new n(e.buffer,0,r)}else{n=KC(this);t=new n(this.count());for(o=0;o<t.length;o++)t[o]=o}return t},t.prototype.getByDimIdx=function(t,e){if(!(e>=0&&e<this._count))return NaN;var n=this._storageArr[t];return n?n[this.getRawIndex(e)]:NaN},t.prototype.get=function(t,e){if(!(e>=0&&e<this._count))return NaN;var n=this._storage[t];return n?n[this.getRawIndex(e)]:NaN},t.prototype.getByRawIndex=function(t,e){if(!(e>=0&&e<this._rawCount))return NaN;var n=this._storage[t];return n?n[e]:NaN},t.prototype.getValues=function(t,e){var n=[];X(t)||(e=t,t=this.dimensions);for(var r=0,o=t.length;r<o;r++)n.push(this.get(t[r],e));return n},t.prototype.hasValue=function(t){for(var e=this._dimensionsSummary.dataDimsOnCoord,n=0,r=e.length;n<r;n++)if(isNaN(this.get(e[n],t)))return!1;return!0},t.prototype.getDataExtent=function(t){t=this.getDimension(t);var e=this._storage[t],n=aM();if(!e)return n;var r,o=this.count(),i=!this._indices;if(i)return this._rawExtent[t].slice();if(r=this._extent[t],r)return r.slice();r=n;for(var a=r[0],u=r[1],s=0;s<o;s++){var l=this.getRawIndex(s),c=e[l];c<a&&(a=c),c>u&&(u=c)}return r=[a,u],this._extent[t]=r,r},t.prototype.getApproximateExtent=function(t){return t=this.getDimension(t),this._approximateExtent[t]||this.getDataExtent(t)},t.prototype.setApproximateExtent=function(t,e){e=this.getDimension(e),this._approximateExtent[e]=t.slice()},t.prototype.getCalculationInfo=function(t){return this._calculationInfo[t]},t.prototype.setCalculationInfo=function(t,e){dM(t)?I(this._calculationInfo,t):this._calculationInfo[t]=e},t.prototype.getSum=function(t){var e=this._storage[t],n=0;if(e)for(var r=0,o=this.count();r<o;r++){var i=this.get(t,r);isNaN(i)||(n+=i)}return n},t.prototype.getMedian=function(t){var e=[];this.each(t,function(t){isNaN(t)||e.push(t)});var n=e.sort(function(t,e){return t-e}),r=this.count();return 0===r?0:r%2===1?n[(r-1)/2]:(n[r/2]+n[r/2-1])/2},t.prototype.rawIndexOf=function(t,e){var n=t&&this._invertedIndicesMap[t];var r=n[e];return null==r||isNaN(r)?gM:r},t.prototype.indexOfName=function(t){for(var e=0,n=this.count();e<n;e++)if(this.getName(e)===t)return e;return-1},t.prototype.indexOfRawIndex=function(t){if(t>=this._rawCount||t<0)return-1;if(!this._indices)return t;var e=this._indices,n=e[t];if(null!=n&&n<this._count&&n===t)return t;var r=0,o=this._count-1;while(r<=o){var i=(r+o)/2|0;if(e[i]<t)r=i+1;else{if(!(e[i]>t))return i;o=i-1}}return-1},t.prototype.indicesOfNearest=function(t,e,n){var r=this._storage,o=r[t],i=[];if(!o)return i;null==n&&(n=1/0);for(var a=1/0,u=-1,s=0,l=0,c=this.count();l<c;l++){var f=this.getRawIndex(l),d=e-o[f],h=Math.abs(d);h<=n&&((h<a||h===a&&d>=0&&u<0)&&(a=h,u=d,s=0),d===u&&(i[s++]=l))}return i.length=s,i},t.prototype.getRawDataItem=function(t){if(this._rawData.persistent)return this._rawData.getItem(this.getRawIndex(t));for(var e=[],n=0;n<this.dimensions.length;n++){var r=this.dimensions[n];e.push(this.get(r,t))}return e},t.prototype.getName=function(t){var e=this.getRawIndex(t),n=this._nameList[e];return null==n&&null!=this._nameDimIdx&&(n=nM(this,this._nameDimIdx,this._nameOrdinalMeta,e)),null==n&&(n=""),n},t.prototype.getId=function(t){return eM(this,this.getRawIndex(t))},t.prototype.each=function(t,e,n,r){var o=this;if(this._count){"function"===typeof t&&(r=n,n=e,e=t,t=[]);var i=n||r||this,a=hM(oM(t),this.getDimension,this);0;for(var u=a.length,s=hM(a,function(t){return o._dimensionInfos[t].index}),l=this._storageArr,c=0,f=this.count();c<f;c++){var d=this.getRawIndex(c);switch(u){case 0:e.call(i,c);break;case 1:e.call(i,l[s[0]][d],c);break;case 2:e.call(i,l[s[0]][d],l[s[1]][d],c);break;default:for(var h=0,p=[];h<u;h++)p[h]=l[s[h]][d];p[h]=c,e.apply(i,p)}}}},t.prototype.filterSelf=function(t,e,n,r){var o=this;if(this._count){"function"===typeof t&&(r=n,n=e,e=t,t=[]);var i=n||r||this,a=hM(oM(t),this.getDimension,this);0;for(var u=this.count(),s=KC(this),l=new s(u),c=[],f=a.length,d=0,h=hM(a,function(t){return o._dimensionInfos[t].index}),p=h[0],g=this._storageArr,m=0;m<u;m++){var v=void 0,y=this.getRawIndex(m);if(0===f)v=e.call(i,m);else if(1===f){var b=g[p][y];v=e.call(i,b,m)}else{for(var x=0;x<f;x++)c[x]=g[h[x]][y];c[x]=m,v=e.apply(i,c)}v&&(l[d++]=y)}return d<u&&(this._indices=l),this._count=d,this._extent={},this.getRawIndex=this._indices?tM:QC,this}},t.prototype.selectRange=function(t){var e=this,n=this._count;if(n){var r=[];for(var o in t)t.hasOwnProperty(o)&&r.push(o);0;var i=r.length;if(i){var a=this.count(),u=KC(this),s=new u(a),l=0,c=r[0],f=hM(r,function(t){return e._dimensionInfos[t].index}),d=t[c][0],h=t[c][1],p=this._storageArr,g=!1;if(!this._indices){var m=0;if(1===i){for(var v=p[f[0]],y=0;y<n;y++){var b=v[y];(b>=d&&b<=h||isNaN(b))&&(s[l++]=m),m++}g=!0}else if(2===i){v=p[f[0]];var x=p[f[1]],w=t[r[1]][0],_=t[r[1]][1];for(y=0;y<n;y++){b=v[y];var S=x[y];(b>=d&&b<=h||isNaN(b))&&(S>=w&&S<=_||isNaN(S))&&(s[l++]=m),m++}g=!0}}if(!g)if(1===i)for(y=0;y<a;y++){var C=this.getRawIndex(y);b=p[f[0]][C];(b>=d&&b<=h||isNaN(b))&&(s[l++]=C)}else for(y=0;y<a;y++){for(var M=!0,T=(C=this.getRawIndex(y),0);T<i;T++){var k=r[T];b=p[f[T]][C];(b<t[k][0]||b>t[k][1])&&(M=!1)}M&&(s[l++]=this.getRawIndex(y))}return l<a&&(this._indices=s),this._count=l,this._extent={},this.getRawIndex=this._indices?tM:QC,this}}},t.prototype.mapArray=function(t,e,n,r){"function"===typeof t&&(r=n,n=e,e=t,t=[]),n=n||r||this;var o=[];return this.each(t,function(){o.push(e&&e.apply(this,arguments))},n),o},t.prototype.map=function(t,e,n,r){var o=n||r||this,i=hM(oM(t),this.getDimension,this);var a=iM(this,i),u=a._storage;a._indices=this._indices,a.getRawIndex=a._indices?tM:QC;for(var s=[],l=i.length,c=this.count(),f=[],d=a._rawExtent,h=0;h<c;h++){for(var p=0;p<l;p++)f[p]=this.get(i[p],h);f[l]=h;var g=e&&e.apply(o,f);if(null!=g){"object"!==typeof g&&(s[0]=g,g=s);for(var m=this.getRawIndex(h),v=0;v<g.length;v++){var y=i[v],b=g[v],x=d[y],w=u[y];w&&(w[m]=b),b<x[0]&&(x[0]=b),b>x[1]&&(x[1]=b)}}}return a},t.prototype.downSample=function(t,e,n,r){for(var o=iM(this,[t]),i=o._storage,a=[],u=fM(1/e),s=i[t],l=this.count(),c=o._rawExtent[t],f=new(KC(this))(l),d=0,h=0;h<l;h+=u){u>l-h&&(u=l-h,a.length=u);for(var p=0;p<u;p++){var g=this.getRawIndex(h+p);a[p]=s[g]}var m=n(a),v=this.getRawIndex(Math.min(h+r(a,m)||0,l-1));s[v]=m,m<c[0]&&(c[0]=m),m>c[1]&&(c[1]=m),f[d++]=v}return o._count=d,o._indices=f,o.getRawIndex=tM,o},t.prototype.lttbDownSample=function(t,e){var n,r,o,i=iM(this,[]),a=i._storage,u=a[t],s=this.count(),l=new(KC(this))(s),c=0,f=fM(1/e),d=this.getRawIndex(0);l[c++]=d;for(var h=1;h<s-1;h+=f){for(var p=Math.min(h+f,s-1),g=Math.min(h+2*f,s),m=(g+p)/2,v=0,y=p;y<g;y++){var b=this.getRawIndex(y),x=u[b];isNaN(x)||(v+=x)}v/=g-p;var w=h,_=Math.min(h+f,s),S=h-1,C=u[d];n=-1,o=w;for(y=w;y<_;y++){b=this.getRawIndex(y),x=u[b];isNaN(x)||(r=Math.abs((S-m)*(x-C)-(S-y)*(v-C)),r>n&&(n=r,o=b))}l[c++]=o,d=o}return l[c++]=this.getRawIndex(s-1),i._count=c,i._indices=l,i.getRawIndex=tM,i},t.prototype.getItemModel=function(t){var e=this.hostModel,n=this.getRawDataItem(t);return new Yd(n,e,e&&e.ecModel)},t.prototype.diff=function(t){var e=this;return new GC(t?t.getIndices():[],this.getIndices(),function(e){return eM(t,e)},function(t){return eM(e,t)})},t.prototype.getVisual=function(t){var e=this._visual;return e&&e[t]},t.prototype.setVisual=function(t,e){this._visual=this._visual||{},dM(t)?I(this._visual,t):this._visual[t]=e},t.prototype.getItemVisual=function(t,e){var n=this._itemVisuals[t],r=n&&n[e];return null==r?this.getVisual(e):r},t.prototype.hasItemVisual=function(){return this._itemVisuals.length>0},t.prototype.ensureUniqueItemVisual=function(t,e){var n=this._itemVisuals,r=n[t];r||(r=n[t]={});var o=r[e];return null==o&&(o=this.getVisual(e),X(o)?o=o.slice():dM(o)&&(o=I({},o)),r[e]=o),o},t.prototype.setItemVisual=function(t,e,n){var r=this._itemVisuals[t]||{};this._itemVisuals[t]=r,dM(e)?I(r,e):r[e]=n},t.prototype.clearAllVisual=function(){this._visual={},this._itemVisuals=[]},t.prototype.setLayout=function(t,e){if(dM(t))for(var n in t)t.hasOwnProperty(n)&&this.setLayout(n,t[n]);else this._layout[t]=e},t.prototype.getLayout=function(t){return this._layout[t]},t.prototype.getItemLayout=function(t){return this._itemLayouts[t]},t.prototype.setItemLayout=function(t,e,n){this._itemLayouts[t]=n?I(this._itemLayouts[t]||{},e):e},t.prototype.clearItemLayouts=function(){this._itemLayouts.length=0},t.prototype.setItemGraphicEl=function(t,e){var n=this.hostModel;if(e){var r=Gs(e);r.dataIndex=t,r.dataType=this.dataType,r.seriesIndex=n&&n.seriesIndex,"group"===e.type&&e.traverse(uM,e)}this._graphicEls[t]=e},t.prototype.getItemGraphicEl=function(t){return this._graphicEls[t]},t.prototype.eachItemGraphicEl=function(t,e){z(this._graphicEls,function(n,r){n&&t&&t.call(e,n,r)})},t.prototype.cloneShallow=function(e){if(!e){var n=hM(this.dimensions,this.getDimensionInfo,this);e=new t(n,this.hostModel)}if(e._storage=this._storage,e._storageArr=this._storageArr,sM(e,this),this._indices){var r=this._indices.constructor;if(r===Array){var o=this._indices.length;e._indices=new r(o);for(var i=0;i<o;i++)e._indices[i]=this._indices[i]}else e._indices=new r(this._indices)}else e._indices=null;return e.getRawIndex=e._indices?tM:QC,e},t.prototype.wrapMethod=function(t,e){var n=this[t];"function"===typeof n&&(this.__wrappedMethods=this.__wrappedMethods||[],this.__wrappedMethods.push(t),this[t]=function(){var t=n.apply(this,arguments);return e.apply(this,[t].concat(st(arguments)))})},t.internalField=function(){function e(t,e,n,r){return Im(t[r],this._dimensionInfos[e])}function n(t){var e=t.constructor;return e===Array?t.slice():new e(t)}ZC={arrayRows:e,objectRows:function(t,e,n,r){return Im(t[e],this._dimensionInfos[e])},keyedColumns:e,original:function(t,e,n,r){var o=t&&(null==t.value?t:t.value);return!this._rawData.pure&&ci(t)&&(this.hasItemOption=!0),Im(o instanceof Array?o[r]:o,this._dimensionInfos[e])},typedArray:function(t,e,n,r){return t[r]}},$C=function(t){var e=t._invertedIndicesMap;z(e,function(n,r){var o=t._dimensionInfos[r],i=o.ordinalMeta;if(i){n=e[r]=new bM(i.categories.length);for(var a=0;a<n.length;a++)n[a]=gM;for(a=0;a<t._count;a++)n[t.get(r,a)]=a}})},nM=function(t,e,n,r){var o,i=t._storageArr[e];return i&&(o=i[r],n&&n.categories.length&&(o=n.categories[o])),xi(o,null)},KC=function(t){return t._rawCount>65535?yM:xM},JC=function(t,e,n,r){var o=vM[e.type],i=e.name;if(r){var a=t[i],u=a&&a.length;if(u!==n){for(var s=new o(n),l=0;l<u;l++)s[l]=a[l];t[i]=s}}else t[i]=new o(n)},QC=function(t){return t},tM=function(t){return t<this._count&&t>=0?this._indices[t]:-1},eM=function(t,e){var n=t._idList[e];return null==n&&null!=t._idDimIdx&&(n=nM(t,t._idDimIdx,t._idOrdinalMeta,e)),null==n&&(n=mM+e),n},oM=function(t){return X(t)||(t=null!=t?[t]:[]),t},function(t,e){for(var n=0;n<e.length;n++)t._dimensionInfos[e[n]]||console.error("Unkown dimension "+e[n])},iM=function(e,r){var o=e.dimensions,i=new t(hM(o,e.getDimensionInfo,e),e.hostModel);sM(i,e);for(var a=i._storage={},u=e._storage,s=i._storageArr=[],l=0;l<o.length;l++){var c=o[l];u[c]&&(E(r,c)>=0?(a[c]=n(u[c]),i._rawExtent[c]=aM(),i._extent[c]=null):a[c]=u[c],s.push(a[c]))}return i},aM=function(){return[1/0,-1/0]},uM=function(t){var e=Gs(t),n=Gs(this);e.seriesIndex=n.seriesIndex,e.dataIndex=n.dataIndex,e.dataType=n.dataType},sM=function(t,e){z(wM.concat(e.__wrappedMethods||[]),function(n){e.hasOwnProperty(n)&&(t[n]=e[n])}),t.__wrappedMethods=e.__wrappedMethods,z(_M,function(n){t[n]=k(e[n])}),t._calculationInfo=I({},e._calculationInfo)},rM=function(t,e){var n=t._nameList,r=t._idList,o=t._nameDimIdx,i=t._idDimIdx,a=n[e],u=r[e];if(null==a&&null!=o&&(n[e]=a=nM(t,o,t._nameOrdinalMeta,e)),null==u&&null!=i&&(r[e]=u=nM(t,i,t._idOrdinalMeta,e)),null==u&&null!=a){var s=t._nameRepeatCount,l=s[a]=(s[a]||0)+1;u=a,l>1&&(u+="__ec__"+l),r[e]=u}}}(),t}(),CM=SM;function MM(t,e,n){nm(e)||(e=om(e)),n=n||{},t=(t||[]).slice();for(var r=(n.dimsDef||[]).slice(),o=mt(),i=mt(),a=[],u=TM(e,t,r,n.dimCount),s=0;s<u;s++){var l=r[s],c=r[s]=I({},K(l)?l:{name:l}),f=c.name,d=a[s]=new cM;null!=f&&null==o.get(f)&&(d.name=d.displayName=f,o.set(f,s)),null!=c.type&&(d.type=c.type),null!=c.displayName&&(d.displayName=c.displayName)}var h=n.encodeDef;!h&&n.encodeDefaulter&&(h=n.encodeDefaulter(e,u));var p=mt(h);p.each(function(t,e){var n=ai(t).slice();if(1===n.length&&!q(n[0])&&n[0]<0)p.set(e,!1);else{var r=p.set(e,[]);z(n,function(t,n){var i=q(t)?o.get(t):t;null!=i&&i<u&&(r[n]=i,m(a[i],e,n))})}});var g=0;function m(t,e,n){null!=Sp.get(e)?t.otherDims[e]=n:(t.coordDim=e,t.coordDimIndex=n,i.set(e,!0))}z(t,function(t){var e,n,r,o;if(q(t))e=t,o={};else{o=t,e=o.name;var i=o.ordinalMeta;o.ordinalMeta=null,o=k(o),o.ordinalMeta=i,n=o.dimsDef,r=o.otherDims,o.name=o.coordDim=o.coordDimIndex=o.dimsDef=o.otherDims=null}var u=p.get(e);if(!1!==u){if(u=ai(u),!u.length)for(var s=0;s<(n&&n.length||1);s++){while(g<a.length&&null!=a[g].coordDim)g++;g<a.length&&u.push(g++)}z(u,function(t,i){var u=a[t];if(m(O(u,o),e,i),null==u.name&&n){var s=n[i];!K(s)&&(s={name:s}),u.name=u.displayName=s.name,u.defaultTooltip=s.defaultTooltip}r&&O(u.otherDims,r)})}});var v=n.generateCoord,y=n.generateCoordCount,b=null!=y;y=v?y||1:0;for(var x=v||"value",w=0;w<u;w++){d=a[w]=a[w]||new cM;var _=d.coordDim;null==_&&(d.coordDim=kM(x,i,b),d.coordDimIndex=0,(!v||y<=0)&&(d.isExtraCoord=!0),y--),null==d.name&&(d.name=kM(d.coordDim,o,!1)),null!=d.type||Vp(e,w)!==Lp.Must&&(!d.isExtraCoord||null==d.otherDims.itemName&&null==d.otherDims.seriesName)||(d.type="ordinal")}return a}function TM(t,e,n,r){var o=Math.max(t.dimensionsDetectedCount||1,e.length,n.length,r||0);return z(e,function(t){var e;K(t)&&(e=t.dimsDef)&&(o=Math.max(o,e.length))}),o}function kM(t,e,n){if(n||null!=e.get(t)){var r=0;while(null!=e.get(t+r))r++;t+=r}return e.set(t,!0),t}var DM=MM;function AM(t,e){return e=e||{},DM(e.coordDimensions||[],t,{dimsDef:e.dimensionsDefine||t.dimensionsDefine,encodeDef:e.encodeDefine||t.encodeDefine,dimCount:e.dimensionsCount,encodeDefaulter:e.encodeDefaulter,generateCoord:e.generateCoord,generateCoordCount:e.generateCoordCount})}var IM=function(){function t(t){this.coordSysDims=[],this.axisMap=mt(),this.categoryAxisMap=mt(),this.coordSysName=t}return t}();function OM(t){var e=t.get("coordinateSystem"),n=new IM(e),r=LM[e];if(r)return r(t,n,n.axisMap,n.categoryAxisMap),n}var LM={cartesian2d:function(t,e,n,r){var o=t.getReferringComponents("xAxis",Li).models[0],i=t.getReferringComponents("yAxis",Li).models[0];e.coordSysDims=["x","y"],n.set("x",o),n.set("y",i),EM(o)&&(r.set("x",o),e.firstCategoryDimIndex=0),EM(i)&&(r.set("y",i),null==e.firstCategoryDimIndex&&(e.firstCategoryDimIndex=1))},singleAxis:function(t,e,n,r){var o=t.getReferringComponents("singleAxis",Li).models[0];e.coordSysDims=["single"],n.set("single",o),EM(o)&&(r.set("single",o),e.firstCategoryDimIndex=0)},polar:function(t,e,n,r){var o=t.getReferringComponents("polar",Li).models[0],i=o.findAxisModel("radiusAxis"),a=o.findAxisModel("angleAxis");e.coordSysDims=["radius","angle"],n.set("radius",i),n.set("angle",a),EM(i)&&(r.set("radius",i),e.firstCategoryDimIndex=0),EM(a)&&(r.set("angle",a),null==e.firstCategoryDimIndex&&(e.firstCategoryDimIndex=1))},geo:function(t,e,n,r){e.coordSysDims=["lng","lat"]},parallel:function(t,e,n,r){var o=t.ecModel,i=o.getComponent("parallel",t.get("parallelIndex")),a=e.coordSysDims=i.dimensions.slice();z(i.parallelAxisIndex,function(t,i){var u=o.getComponent("parallelAxis",t),s=a[i];n.set(s,u),EM(u)&&(r.set(s,u),null==e.firstCategoryDimIndex&&(e.firstCategoryDimIndex=i))})}};function EM(t){return"category"===t.get("type")}function NM(t,e,n){n=n||{};var r,o,i,a,u=n.byIndex,s=n.stackedCoordDimension,l=!(!t||!t.get("stack"));if(z(e,function(t,n){q(t)&&(e[n]=t={name:t}),l&&!t.isExtraCoord&&(u||r||!t.ordinalMeta||(r=t),o||"ordinal"===t.type||"time"===t.type||s&&s!==t.coordDim||(o=t))}),!o||u||r||(u=!0),o){i="__\0ecstackresult",a="__\0ecstackedover",r&&(r.createInvertedIndices=!0);var c=o.coordDim,f=o.type,d=0;z(e,function(t){t.coordDim===c&&d++}),e.push({name:i,coordDim:c,coordDimIndex:d,type:f,isExtraCoord:!0,isCalculationCoord:!0}),d++,e.push({name:a,coordDim:a,coordDimIndex:d,type:f,isExtraCoord:!0,isCalculationCoord:!0})}return{stackedDimension:o&&o.name,stackedByDimension:r&&r.name,isStackedByIndex:u,stackedOverDimension:a,stackResultDimension:i}}function RM(t,e){return!!e&&e===t.getCalculationInfo("stackedDimension")}function PM(t,e){return RM(t,e)?t.getCalculationInfo("stackResultDimension"):e}function zM(t,e,n){n=n||{},nm(t)||(t=om(t));var r,o=e.get("coordinateSystem"),i=mg.get(o),a=OM(e);a&&a.coordSysDims&&(r=B(a.coordSysDims,function(t){var e={name:t},n=a.axisMap.get(t);if(n){var r=n.get("type");e.type=YC(r)}return e})),r||(r=i&&(i.getDimensionsInfo?i.getDimensionsInfo():i.dimensions.slice())||["x","y"]);var u,s,l=n.useEncodeDefaulter,c=AM(t,{coordDimensions:r,generateCoord:n.generateCoord,encodeDefaulter:Y(l)?l:l?j(Rp,r,e):null});a&&z(c,function(t,e){var r=t.coordDim,o=a.categoryAxisMap.get(r);o&&(null==u&&(u=e),t.ordinalMeta=o.getOrdinalMeta(),n.createInvertedIndices&&(t.createInvertedIndices=!0)),null!=t.otherDims.itemName&&(s=!0)}),s||null==u||(c[u].otherDims.itemName=0);var f=NM(e,c),d=new CM(c,e);d.setCalculationInfo(f);var h=null!=u&&BM(t)?function(t,e,n,r){return r===u?n:this.defaultDimValueGetter(t,e,n,r)}:null;return d.hasItemOption=!1,d.initData(t,null,h),d}function BM(t){if(t.sourceFormat===Cp){var e=VM(t.data||[]);return null!=e&&!X(li(e))}}function VM(t){var e=0;while(e<t.length&&null==t[e])e++;return t[e]}var HM=zM,FM=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n.hasSymbolVisual=!0,n}return i(e,t),e.prototype.getInitialData=function(t){return HM(this.getSource(),this,{useEncodeDefaulter:!0})},e.prototype.getLegendIcon=function(t){var e=new _o,n=zb("line",0,t.itemHeight/2,t.itemWidth,0,t.lineStyle.stroke,!1);e.add(n),n.setStyle(t.lineStyle);var r=this.getData().getVisual("symbol"),o=this.getData().getVisual("symbolRotate"),i="none"===r?"circle":r,a=.8*t.itemHeight,u=zb(i,(t.itemWidth-a)/2,(t.itemHeight-a)/2,a,a,t.itemStyle.fill);e.add(u),u.setStyle(t.itemStyle);var s="inherit"===t.iconRotate?o:t.iconRotate||0;return u.rotation=s*Math.PI/180,u.setOrigin([t.itemWidth/2,t.itemHeight/2]),i.indexOf("empty")>-1&&(u.style.stroke=u.style.fill,u.style.fill="#fff",u.style.lineWidth=2),e},e.type="series.line",e.dependencies=["grid","polar"],e.defaultOption={zlevel:0,z:3,coordinateSystem:"cartesian2d",legendHoverLink:!0,clip:!0,label:{position:"top"},endLabel:{show:!1,valueAnimation:!0,distance:8},lineStyle:{width:2,type:"solid"},emphasis:{scale:!0,lineStyle:{width:"bolder"}},step:!1,smooth:!1,smoothMonotone:null,symbol:"emptyCircle",symbolSize:4,symbolRotate:null,showSymbol:!0,showAllSymbol:"auto",connectNulls:!1,sampling:"none",animationEasing:"linear",progressive:0,hoverLayerThreshold:1/0},e}(Iv),WM=FM;function UM(t,e){var n=t.mapDimensionsAll("defaultedLabel"),r=n.length;if(1===r){var o=Sm(t,e,n[0]);return null!=o?o+"":null}if(r){for(var i=[],a=0;a<n.length;a++)i.push(Sm(t,e,n[a]));return i.join(" ")}}function GM(t,e){var n=t.mapDimensionsAll("defaultedLabel");if(!X(e))return e+"";for(var r=[],o=0;o<n.length;o++){var i=t.getDimensionInfo(n[o]);i&&r.push(e[i.index])}return r.join(" ")}var jM=function(t){function e(e,n,r,o){var i=t.call(this)||this;return i.updateData(e,n,r,o),i}return i(e,t),e.prototype._createSymbol=function(t,e,n,r,o){this.removeAll();var i=zb(t,-1,-1,2,2,null,o);i.attr({z2:100,culling:!0,scaleX:r[0]/2,scaleY:r[1]/2}),i.drift=XM,this._symbolType=t,this.add(i)},e.prototype.stopSymbolAnimation=function(t){this.childAt(0).stopAnimation(null,t)},e.prototype.getSymbolPath=function(){return this.childAt(0)},e.prototype.highlight=function(){kl(this.childAt(0))},e.prototype.downplay=function(){Dl(this.childAt(0))},e.prototype.setZ=function(t,e){var n=this.childAt(0);n.zlevel=t,n.z=e},e.prototype.setDraggable=function(t){var e=this.childAt(0);e.draggable=t,e.cursor=t?"move":e.cursor},e.prototype.updateData=function(t,n,r,o){this.silent=!1;var i=t.getItemVisual(n,"symbol")||"circle",a=t.hostModel,u=e.getSymbolSize(t,n),s=i!==this._symbolType,l=o&&o.disableAnimation;if(s){var c=t.getItemVisual(n,"symbolKeepAspect");this._createSymbol(i,t,n,u,c)}else{var f=this.childAt(0);f.silent=!1;var d={scaleX:u[0]/2,scaleY:u[1]/2};l?f.attr(d):Qf(f,d,a,n)}if(this._updateCommon(t,n,u,r,o),s){f=this.childAt(0);if(!l){d={scaleX:this._sizeX,scaleY:this._sizeY,style:{opacity:f.style.opacity}};f.scaleX=f.scaleY=0,f.style.opacity=0,td(f,d,a,n)}}l&&this.childAt(0).stopAnimation("remove"),this._seriesModel=a},e.prototype._updateCommon=function(t,e,n,r,o){var i,a,u,s,l,c,f,d,h=this.childAt(0),p=t.hostModel;if(r&&(i=r.emphasisItemStyle,a=r.blurItemStyle,u=r.selectItemStyle,s=r.focus,l=r.blurScope,c=r.labelStatesModels,f=r.hoverScale,d=r.cursorStyle),!r||t.hasItemOption){var g=r&&r.itemModel?r.itemModel:t.getItemModel(e),m=g.getModel("emphasis");i=m.getModel("itemStyle").getItemStyle(),u=g.getModel(["select","itemStyle"]).getItemStyle(),a=g.getModel(["blur","itemStyle"]).getItemStyle(),s=m.get("focus"),l=m.get("blurScope"),c=Sd(g),f=m.getShallow("scale"),d=g.getShallow("cursor")}var v=t.getItemVisual(e,"symbolRotate");h.attr("rotation",(v||0)*Math.PI/180||0);var y=t.getItemVisual(e,"symbolOffset")||0;y&&(X(y)||(y=[y,y]),h.x=Ro(y[0],n[0]),h.y=Ro(at(y[1],y[0])||0,n[1])),d&&h.attr("cursor",d);var b=t.getItemVisual(e,"style"),x=b.fill;if(h instanceof xs){var w=h.style;h.useStyle(I({image:w.image,x:w.x,y:w.y,width:w.width,height:w.height},b))}else h.__isEmptyBrush?h.useStyle(I({},b)):h.useStyle(b),h.style.decal=null,h.setColor(x,o&&o.symbolInnerColor),h.style.strokeNoScale=!0;var _=t.getItemVisual(e,"liftZ"),S=this._z2;null!=_?null==S&&(this._z2=h.z2,h.z2+=_):null!=S&&(h.z2=S,this._z2=null);var C=o&&o.useNameLabel;function M(e){return C?t.getName(e):UM(t,e)}_d(h,c,{labelFetcher:p,labelDataIndex:e,defaultText:M,inheritColor:x,defaultOpacity:b.opacity}),this._sizeX=n[0]/2,this._sizeY=n[1]/2;var T=h.ensureState("emphasis");if(T.style=i,h.ensureState("select").style=u,h.ensureState("blur").style=a,f){var k=Math.max(1.1,3/this._sizeY);T.scaleX=this._sizeX*k,T.scaleY=this._sizeY*k}this.setSymbolScale(1),Gl(this,s,l)},e.prototype.setSymbolScale=function(t){this.scaleX=this.scaleY=t},e.prototype.fadeOut=function(t,e){var n=this.childAt(0),r=this._seriesModel,o=Gs(this).dataIndex,i=e&&e.animation;if(this.silent=n.silent=!0,e&&e.fadeLabel){var a=n.getTextContent();a&&ed(a,{style:{opacity:0}},r,{dataIndex:o,removeOpt:i,cb:function(){n.removeTextContent()}})}else n.removeTextContent();ed(n,{style:{opacity:0},scaleX:0,scaleY:0},r,{dataIndex:o,cb:t,removeOpt:i})},e.getSymbolSize=function(t,e){var n=t.getItemVisual(e,"symbolSize");return X(n)?n.slice():[+n,+n]},e}(_o);function XM(t,e){this.parent.drift(t,e)}var YM=jM;function qM(t,e,n,r){return e&&!isNaN(e[0])&&!isNaN(e[1])&&!(r.isIgnore&&r.isIgnore(n))&&!(r.clipShape&&!r.clipShape.contain(e[0],e[1]))&&"none"!==t.getItemVisual(n,"symbol")}function ZM(t){return null==t||K(t)||(t={isIgnore:t}),t||{}}function $M(t){var e=t.hostModel,n=e.getModel("emphasis");return{emphasisItemStyle:n.getModel("itemStyle").getItemStyle(),blurItemStyle:e.getModel(["blur","itemStyle"]).getItemStyle(),selectItemStyle:e.getModel(["select","itemStyle"]).getItemStyle(),focus:n.get("focus"),blurScope:n.get("blurScope"),hoverScale:n.get("scale"),labelStatesModels:Sd(e),cursorStyle:e.get("cursor")}}var KM=function(){function t(t){this.group=new _o,this._SymbolCtor=t||YM}return t.prototype.updateData=function(t,e){e=ZM(e);var n=this.group,r=t.hostModel,o=this._data,i=this._SymbolCtor,a=e.disableAnimation,u=$M(t),s={disableAnimation:a},l=e.getSymbolPoint||function(e){return t.getItemLayout(e)};o||n.removeAll(),t.diff(o).add(function(r){var o=l(r);if(qM(t,o,r,e)){var a=new i(t,r,u,s);a.setPosition(o),t.setItemGraphicEl(r,a),n.add(a)}}).update(function(c,f){var d=o.getItemGraphicEl(f),h=l(c);if(qM(t,h,c,e)){if(d){d.updateData(t,c,u,s);var p={x:h[0],y:h[1]};a?d.attr(p):Qf(d,p,r)}else d=new i(t,c),d.setPosition(h);n.add(d),t.setItemGraphicEl(c,d)}else n.remove(d)}).remove(function(t){var e=o.getItemGraphicEl(t);e&&e.fadeOut(function(){n.remove(e)})}).execute(),this._getSymbolPoint=l,this._data=t},t.prototype.isPersistent=function(){return!0},t.prototype.updateLayout=function(){var t=this,e=this._data;e&&e.eachItemGraphicEl(function(e,n){var r=t._getSymbolPoint(n);e.setPosition(r),e.markRedraw()})},t.prototype.incrementalPrepareUpdate=function(t){this._seriesScope=$M(t),this._data=null,this.group.removeAll()},t.prototype.incrementalUpdate=function(t,e,n){function r(t){t.isGroup||(t.incremental=!0,t.ensureState("emphasis").hoverLayer=!0)}n=ZM(n);for(var o=t.start;o<t.end;o++){var i=e.getItemLayout(o);if(qM(e,i,o,n)){var a=new this._SymbolCtor(e,o,this._seriesScope);a.traverse(r),a.setPosition(i),this.group.add(a),e.setItemGraphicEl(o,a)}}},t.prototype.remove=function(t){var e=this.group,n=this._data;n&&t?n.eachItemGraphicEl(function(t){t.fadeOut(function(){e.remove(t)})}):e.removeAll()},t}(),JM=KM;function QM(t,e,n){var r=t.getBaseAxis(),o=t.getOtherAxis(r),i=tT(o,n),a=r.dim,u=o.dim,s=e.mapDimension(u),l=e.mapDimension(a),c="x"===u||"radius"===u?1:0,f=B(t.dimensions,function(t){return e.mapDimension(t)}),d=!1,h=e.getCalculationInfo("stackResultDimension");return RM(e,f[0])&&(d=!0,f[0]=h),RM(e,f[1])&&(d=!0,f[1]=h),{dataDimsForPoint:f,valueStart:i,valueAxisDim:u,baseAxisDim:a,stacked:!!d,valueDim:s,baseDim:l,baseDataOffset:c,stackedOverDimension:e.getCalculationInfo("stackedOverDimension")}}function tT(t,e){var n=0,r=t.scale.getExtent();return"start"===e?n=r[0]:"end"===e?n=r[1]:r[0]>0?n=r[0]:r[1]<0&&(n=r[1]),n}function eT(t,e,n,r){var o=NaN;t.stacked&&(o=n.get(n.getCalculationInfo("stackedOverDimension"),r)),isNaN(o)&&(o=t.valueStart);var i=t.baseDataOffset,a=[];return a[i]=n.get(t.baseDim,r),a[1-i]=o,e.dataToPoint(a)}var nT="undefined"!==typeof Float32Array,rT=nT?Float32Array:Array;function oT(t){return X(t)?nT?new Float32Array(t):t:new rT(t)}function iT(t,e){var n=[];return e.diff(t).add(function(t){n.push({cmd:"+",idx:t})}).update(function(t,e){n.push({cmd:"=",idx:e,idx1:t})}).remove(function(t){n.push({cmd:"-",idx:t})}).execute(),n}function aT(t,e,n,r,o,i,a,u){for(var s=iT(t,e),l=[],c=[],f=[],d=[],h=[],p=[],g=[],m=QM(o,e,a),v=t.getLayout("points")||[],y=e.getLayout("points")||[],b=0;b<s.length;b++){var x=s[b],w=!0,_=void 0,S=void 0;switch(x.cmd){case"=":_=2*x.idx,S=2*x.idx1;var C=v[_],M=v[_+1],T=y[S],k=y[S+1];(isNaN(C)||isNaN(M))&&(C=T,M=k),l.push(C,M),c.push(T,k),f.push(n[_],n[_+1]),d.push(r[S],r[S+1]),g.push(e.getRawIndex(x.idx1));break;case"+":var D=x.idx,A=m.dataDimsForPoint,I=o.dataToPoint([e.get(A[0],D),e.get(A[1],D)]);S=2*D,l.push(I[0],I[1]),c.push(y[S],y[S+1]);var O=eT(m,o,e,D);f.push(O[0],O[1]),d.push(r[S],r[S+1]),g.push(e.getRawIndex(D));break;case"-":w=!1}w&&(h.push(x),p.push(p.length))}p.sort(function(t,e){return g[t]-g[e]});var L=l.length,E=oT(L),N=oT(L),R=oT(L),P=oT(L),z=[];for(b=0;b<p.length;b++){var B=p[b],V=2*b,H=2*B;E[V]=l[H],E[V+1]=l[H+1],N[V]=c[H],N[V+1]=c[H+1],R[V]=f[H],R[V+1]=f[H+1],P[V]=d[H],P[V+1]=d[H+1],z[b]=h[B]}return{current:E,next:N,stackedOnCurrent:R,stackedOnNext:P,status:z}}var uT=Math.min,sT=Math.max;function lT(t,e){return isNaN(t)||isNaN(e)}function cT(t,e,n,r,o,i,a,u,s){for(var l,c,f,d,h,p,g=n,m=0;m<r;m++){var v=e[2*g],y=e[2*g+1];if(g>=o||g<0)break;if(lT(v,y)){if(s){g+=i;continue}break}if(g===n)t[i>0?"moveTo":"lineTo"](v,y),f=v,d=y;else{var b=v-l,x=y-c;if(b*b+x*x<.5){g+=i;continue}if(a>0){var w=g+i,_=e[2*w],S=e[2*w+1],C=m+1;if(s)while(lT(_,S)&&C<r)C++,w+=i,_=e[2*w],S=e[2*w+1];var M=.5,T=0,k=0,D=void 0,A=void 0;if(C>=r||lT(_,S))h=v,p=y;else{T=_-l,k=S-c;var I=v-l,O=_-v,L=y-c,E=S-y,N=void 0,R=void 0;"x"===u?(N=Math.abs(I),R=Math.abs(O),h=v-N*a,p=y,D=v+N*a,A=y):"y"===u?(N=Math.abs(L),R=Math.abs(E),h=v,p=y-N*a,D=v,A=y+N*a):(N=Math.sqrt(I*I+L*L),R=Math.sqrt(O*O+E*E),M=R/(R+N),h=v-T*a*(1-M),p=y-k*a*(1-M),D=v+T*a*M,A=y+k*a*M,D=uT(D,sT(_,v)),A=uT(A,sT(S,y)),D=sT(D,uT(_,v)),A=sT(A,uT(S,y)),T=D-v,k=A-y,h=v-T*N/R,p=y-k*N/R,h=uT(h,sT(l,v)),p=uT(p,sT(c,y)),h=sT(h,uT(l,v)),p=sT(p,uT(c,y)),T=v-h,k=y-p,D=v+T*R/N,A=y+k*R/N)}t.bezierCurveTo(f,d,h,p,v,y),f=D,d=A}else t.lineTo(v,y)}l=v,c=y,g+=i}return m}var fT=function(){function t(){this.smooth=0,this.smoothConstraint=!0}return t}(),dT=function(t){function e(e){var n=t.call(this,e)||this;return n.type="ec-polyline",n}return i(e,t),e.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},e.prototype.getDefaultShape=function(){return new fT},e.prototype.buildPath=function(t,e){var n=e.points,r=0,o=n.length/2;if(e.connectNulls){for(;o>0;o--)if(!lT(n[2*o-2],n[2*o-1]))break;for(;r<o;r++)if(!lT(n[2*r],n[2*r+1]))break}while(r<o)r+=cT(t,n,r,o,o,1,e.smooth,e.smoothMonotone,e.connectNulls)+1},e.prototype.getPointOn=function(t,e){this.path||(this.createPathProxy(),this.buildPath(this.path,this.shape));for(var n,r,o=this.path,i=o.data,a=Hu.CMD,u="x"===e,s=[],l=0;l<i.length;){var c=i[l++],f=void 0,d=void 0,h=void 0,p=void 0,g=void 0,m=void 0,v=void 0;switch(c){case a.M:n=i[l++],r=i[l++];break;case a.L:if(f=i[l++],d=i[l++],v=u?(t-n)/(f-n):(t-r)/(d-r),v<=1&&v>=0){var y=u?(d-r)*v+r:(f-n)*v+n;return u?[t,y]:[y,t]}n=f,r=d;break;case a.C:f=i[l++],d=i[l++],h=i[l++],p=i[l++],g=i[l++],m=i[l++];var b=u?Ya(n,f,h,g,t,s):Ya(r,d,p,m,t,s);if(b>0)for(var x=0;x<b;x++){var w=s[x];if(w<=1&&w>=0){y=u?ja(r,d,p,m,w):ja(n,f,h,g,w);return u?[t,y]:[y,t]}}n=g,r=m;break}}},e}(ds),hT=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e}(fT),pT=function(t){function e(e){var n=t.call(this,e)||this;return n.type="ec-polygon",n}return i(e,t),e.prototype.getDefaultShape=function(){return new hT},e.prototype.buildPath=function(t,e){var n=e.points,r=e.stackedOnPoints,o=0,i=n.length/2,a=e.smoothMonotone;if(e.connectNulls){for(;i>0;i--)if(!lT(n[2*i-2],n[2*i-1]))break;for(;o<i;o++)if(!lT(n[2*o],n[2*o+1]))break}while(o<i){var u=cT(t,n,o,i,i,1,e.smooth,a,e.connectNulls);cT(t,r,o+u-1,u,i,-1,e.stackedOnSmooth,a,e.connectNulls),o+=u+1,t.closePath()}},e}(ds);function gT(t,e,n,r,o){var i=t.getArea(),a=i.x,u=i.y,s=i.width,l=i.height,c=n.get(["lineStyle","width"])||2;a-=c/2,u-=c/2,s+=c,l+=c,a=Math.floor(a),s=Math.round(s);var f=new As({shape:{x:a,y:u,width:s,height:l}});if(e){var d=t.getBaseAxis(),h=d.isHorizontal(),p=d.inverse;h?(p&&(f.shape.x+=s),f.shape.width=0):(p||(f.shape.y+=l),f.shape.height=0);var g="function"===typeof o?function(t){o(t,f)}:null;td(f,{shape:{width:s,height:l,x:a,y:u}},n,null,r,g)}return f}function mT(t,e,n){var r=t.getArea(),o=Po(r.r0,1),i=Po(r.r,1),a=new Xc({shape:{cx:Po(t.cx,1),cy:Po(t.cy,1),r0:o,r:i,startAngle:r.startAngle,endAngle:r.endAngle,clockwise:r.clockwise}});if(e){var u="angle"===t.getBaseAxis().dim;u?a.shape.endAngle=r.startAngle:a.shape.r=o,td(a,{shape:{endAngle:r.endAngle,r:i}},n)}return a}function vT(t,e,n,r,o){return t?"polar"===t.type?mT(t,e,n):"cartesian2d"===t.type?gT(t,e,n,r,o):null:null}function yT(t,e){return t.type===e}function bT(t,e){if(t.length===e.length){for(var n=0;n<t.length;n++)if(t[n]!==e[n])return;return!0}}function xT(t){for(var e=1/0,n=1/0,r=-1/0,o=-1/0,i=0;i<t.length;){var a=t[i++],u=t[i++];isNaN(a)||(e=Math.min(a,e),r=Math.max(a,r)),isNaN(u)||(n=Math.min(u,n),o=Math.max(u,o))}return[[e,n],[r,o]]}function wT(t,e){var n=xT(t),r=n[0],o=n[1],i=xT(e),a=i[0],u=i[1];return Math.max(Math.abs(r[0]-a[0]),Math.abs(r[1]-a[1]),Math.abs(o[0]-u[0]),Math.abs(o[1]-u[1]))}function _T(t){return"number"===typeof t?t:t?.5:0}function ST(t,e,n){if(!n.valueDim)return[];for(var r=e.count(),o=oT(2*r),i=0;i<r;i++){var a=eT(n,t,e,i);o[2*i]=a[0],o[2*i+1]=a[1]}return o}function CT(t,e,n){for(var r=e.getBaseAxis(),o="x"===r.dim||"radius"===r.dim?0:1,i=[],a=0,u=[],s=[],l=[];a<t.length-2;a+=2)switch(l[0]=t[a+2],l[1]=t[a+3],s[0]=t[a],s[1]=t[a+1],i.push(s[0],s[1]),n){case"end":u[o]=l[o],u[1-o]=s[1-o],i.push(u[0],u[1]);break;case"middle":var c=(s[o]+l[o])/2,f=[];u[o]=f[o]=c,u[1-o]=s[1-o],f[1-o]=l[1-o],i.push(u[0],u[1]),i.push(f[0],f[1]);break;default:u[o]=s[o],u[1-o]=l[1-o],i.push(u[0],u[1])}return i.push(t[a++],t[a++]),i}function MT(t,e){var n=t.getVisual("visualMeta");if(n&&n.length&&t.count()&&"cartesian2d"===e.type){for(var r,o,i=n.length-1;i>=0;i--){var a=n[i].dimension,u=t.dimensions[a],s=t.getDimensionInfo(u);if(r=s&&s.coordDim,"x"===r||"y"===r){o=n[i];break}}if(o){var l=e.getAxis(r),c=B(o.stops,function(t){return{offset:0,coord:l.toGlobalCoord(l.dataToCoord(t.value,!0)),color:t.color}}),f=c.length,d=o.outerColors.slice();f&&c[0].coord>c[f-1].coord&&(c.reverse(),d.reverse());var h=10,p=c[0].coord-h,g=c[f-1].coord+h,m=g-p;if(m<.001)return"transparent";z(c,function(t){t.offset=(t.coord-p)/m}),c.push({offset:f?c[f-1].offset:.5,color:d[1]||"transparent"}),c.unshift({offset:f?c[0].offset:.5,color:d[0]||"transparent"});var v=new Cf(0,0,0,0,c,!0);return v[r]=p,v[r+"2"]=g,v}}}function TT(t,e,n){var r=t.get("showAllSymbol"),o="auto"===r;if(!r||o){var i=n.getAxesByScale("ordinal")[0];if(i&&(!o||!kT(i,e))){var a=e.mapDimension(i.dim),u={};return z(i.getViewLabels(),function(t){var e=i.scale.getRawOrdinalNumber(t.tickValue);u[e]=1}),function(t){return!u.hasOwnProperty(e.get(a,t))}}}}function kT(t,e){var n=t.getExtent(),r=Math.abs(n[1]-n[0])/t.scale.count();isNaN(r)&&(r=0);for(var o=e.count(),i=Math.max(1,Math.round(o/5)),a=0;a<o;a+=i)if(1.5*YM.getSymbolSize(e,a)[t.isHorizontal()?1:0]>r)return!1;return!0}function DT(t,e){return isNaN(t)||isNaN(e)}function AT(t){for(var e=t.length/2;e>0;e--)if(!DT(t[2*e-2],t[2*e-1]))break;return e-1}function IT(t,e){return[t[2*e],t[2*e+1]]}function OT(t,e,n){for(var r,o,i=t.length/2,a="x"===n?0:1,u=0,s=-1,l=0;l<i;l++)if(o=t[2*l+a],!isNaN(o)&&!isNaN(t[2*l+1-a]))if(0!==l){if(r<=e&&o>=e||r>=e&&o<=e){s=l;break}u=l,r=o}else r=o;return{range:[u,s],t:(e-r)/(o-r)}}function LT(t,e,n,r){if(yT(e,"cartesian2d")){var o=r.getModel("endLabel"),i=o.get("show"),a=o.get("valueAnimation"),u=r.getData(),s={lastFrameIndex:0},l=i?function(n,r){t._endLabelOnDuring(n,r,u,s,a,o,e)}:null,c=e.getBaseAxis().isHorizontal(),f=gT(e,n,r,function(){var e=t._endLabel;e&&n&&null!=s.originalX&&e.attr({x:s.originalX,y:s.originalY})},l);if(!r.get("clip",!0)){var d=f.shape,h=Math.max(d.width,d.height);c?(d.y-=h,d.height+=2*h):(d.x-=h,d.width+=2*h)}return l&&l(1,f),f}return mT(e,n,r)}function ET(t,e){var n=e.getBaseAxis(),r=n.isHorizontal(),o=n.inverse,i=r?o?"right":"left":"center",a=r?"middle":o?"top":"bottom";return{normal:{align:t.get("align")||i,verticalAlign:t.get("verticalAlign")||a}}}var NT=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.init=function(){var t=new _o,e=new JM;this.group.add(e.group),this._symbolDraw=e,this._lineGroup=t},e.prototype.render=function(t,e,n){var r=this,o=t.coordinateSystem,i=this.group,a=t.getData(),u=t.getModel("lineStyle"),s=t.getModel("areaStyle"),l=a.getLayout("points")||[],c="polar"===o.type,f=this._coordSys,d=this._symbolDraw,h=this._polyline,p=this._polygon,g=this._lineGroup,m=t.get("animation"),v=!s.isEmpty(),y=s.get("origin"),b=QM(o,a,y),x=v&&ST(o,a,b),w=t.get("showSymbol"),_=w&&!c&&TT(t,a,o),S=this._data;S&&S.eachItemGraphicEl(function(t,e){t.__temp&&(i.remove(t),S.setItemGraphicEl(e,null))}),w||d.remove(),i.add(g);var C,M=!c&&t.get("step");o&&o.getArea&&t.get("clip",!0)&&(C=o.getArea(),null!=C.width?(C.x-=.1,C.y-=.1,C.width+=.2,C.height+=.2):C.r0&&(C.r0-=.5,C.r+=.5)),this._clipShapeForSymbol=C;var T=MT(a,o)||a.getVisual("style")[a.getVisual("drawType")];h&&f.type===o.type&&M===this._step?(v&&!p?p=this._newPolygon(l,x):p&&!v&&(g.remove(p),p=this._polygon=null),c||this._initOrUpdateEndLabel(t,o,ep(T)),g.setClipPath(LT(this,o,!1,t)),w&&d.updateData(a,{isIgnore:_,clipShape:C,disableAnimation:!0,getSymbolPoint:function(t){return[l[2*t],l[2*t+1]]}}),bT(this._stackedOnPoints,x)&&bT(this._points,l)||(m?this._doUpdateAnimation(a,x,o,n,M,y):(M&&(l=CT(l,o,M),x&&(x=CT(x,o,M))),h.setShape({points:l}),p&&p.setShape({points:l,stackedOnPoints:x})))):(w&&d.updateData(a,{isIgnore:_,clipShape:C,disableAnimation:!0,getSymbolPoint:function(t){return[l[2*t],l[2*t+1]]}}),m&&this._initSymbolLabelAnimation(a,o,C),M&&(l=CT(l,o,M),x&&(x=CT(x,o,M))),h=this._newPolyline(l),v&&(p=this._newPolygon(l,x)),c||this._initOrUpdateEndLabel(t,o,ep(T)),g.setClipPath(LT(this,o,!0,t)));var k=t.get(["emphasis","focus"]),D=t.get(["emphasis","blurScope"]);if(h.useStyle(O(u.getLineStyle(),{fill:"none",stroke:T,lineJoin:"bevel"})),ql(h,t,"lineStyle"),h.style.lineWidth>0&&"bolder"===t.get(["emphasis","lineStyle","width"])){var A=h.getState("emphasis").style;A.lineWidth=+h.style.lineWidth+1}Gs(h).seriesIndex=t.seriesIndex,Gl(h,k,D);var I=_T(t.get("smooth")),L=t.get("smoothMonotone"),E=t.get("connectNulls");if(h.setShape({smooth:I,smoothMonotone:L,connectNulls:E}),p){var N=a.getCalculationInfo("stackedOnSeries"),R=0;p.useStyle(O(s.getAreaStyle(),{fill:T,opacity:.7,lineJoin:"bevel",decal:a.getVisual("style").decal})),N&&(R=_T(N.get("smooth"))),p.setShape({smooth:I,stackedOnSmooth:R,smoothMonotone:L,connectNulls:E}),ql(p,t,"areaStyle"),Gs(p).seriesIndex=t.seriesIndex,Gl(p,k,D)}var P=function(t){r._changePolyState(t)};a.eachItemGraphicEl(function(t){t&&(t.onHoverStateChange=P)}),this._polyline.onHoverStateChange=P,this._data=a,this._coordSys=o,this._stackedOnPoints=x,this._points=l,this._step=M,this._valueOrigin=y},e.prototype.dispose=function(){},e.prototype.highlight=function(t,e,n,r){var o=t.getData(),i=ki(o,r);if(this._changePolyState("emphasis"),!(i instanceof Array)&&null!=i&&i>=0){var a=o.getLayout("points"),u=o.getItemGraphicEl(i);if(!u){var s=a[2*i],l=a[2*i+1];if(isNaN(s)||isNaN(l))return;if(this._clipShapeForSymbol&&!this._clipShapeForSymbol.contain(s,l))return;var c=t.get("zlevel"),f=t.get("z");u=new YM(o,i),u.x=s,u.y=l,u.setZ(c,f);var d=u.getSymbolPath().getTextContent();d&&(d.zlevel=c,d.z=f,d.z2=this._polyline.z2+1),u.__temp=!0,o.setItemGraphicEl(i,u),u.stopSymbolAnimation(!0),this.group.add(u)}u.highlight()}else Wv.prototype.highlight.call(this,t,e,n,r)},e.prototype.downplay=function(t,e,n,r){var o=t.getData(),i=ki(o,r);if(this._changePolyState("normal"),null!=i&&i>=0){var a=o.getItemGraphicEl(i);a&&(a.__temp?(o.setItemGraphicEl(i,null),this.group.remove(a)):a.downplay())}else Wv.prototype.downplay.call(this,t,e,n,r)},e.prototype._changePolyState=function(t){var e=this._polygon;yl(this._polyline,t),e&&yl(e,t)},e.prototype._newPolyline=function(t){var e=this._polyline;return e&&this._lineGroup.remove(e),e=new dT({shape:{points:t},segmentIgnoreThreshold:2,z2:10}),this._lineGroup.add(e),this._polyline=e,e},e.prototype._newPolygon=function(t,e){var n=this._polygon;return n&&this._lineGroup.remove(n),n=new pT({shape:{points:t,stackedOnPoints:e},segmentIgnoreThreshold:2}),this._lineGroup.add(n),this._polygon=n,n},e.prototype._initSymbolLabelAnimation=function(t,e,n){var r,o,i=e.getBaseAxis(),a=i.inverse;"cartesian2d"===e.type?(r=i.isHorizontal(),o=!1):"polar"===e.type&&(r="angle"===i.dim,o=!0);var u=t.hostModel,s=u.get("animationDuration");"function"===typeof s&&(s=s(null));var l=u.get("animationDelay")||0,c="function"===typeof l?l(null):l;t.eachItemGraphicEl(function(t,i){var u=t;if(u){var f=[t.x,t.y],d=void 0,h=void 0,p=void 0;if(n)if(o){var g=n,m=e.pointToCoord(f);r?(d=g.startAngle,h=g.endAngle,p=-m[1]/180*Math.PI):(d=g.r0,h=g.r,p=m[0])}else{var v=n;r?(d=v.x,h=v.x+v.width,p=t.x):(d=v.y+v.height,h=v.y,p=t.y)}var y=h===d?0:(p-d)/(h-d);a&&(y=1-y);var b="function"===typeof l?l(i):s*y+c,x=u.getSymbolPath(),w=x.getTextContent();u.attr({scaleX:0,scaleY:0}),u.animateTo({scaleX:1,scaleY:1},{duration:200,delay:b}),w&&w.animateFrom({style:{opacity:0}},{duration:300,delay:b}),x.disableLabelAnimation=!0}})},e.prototype._initOrUpdateEndLabel=function(t,e,n){var r=t.getModel("endLabel");if(r.get("show")){var o=t.getData(),i=this._polyline,a=this._endLabel;a||(a=this._endLabel=new Us({z2:200}),a.ignoreClip=!0,i.setTextContent(this._endLabel),i.disableLabelAnimation=!0);var u=AT(o.getLayout("points"));u>=0&&(_d(i,Sd(t,"endLabel"),{inheritColor:n,labelFetcher:t,labelDataIndex:u,defaultText:function(t,e,n){return null!=n?GM(o,n):UM(o,t)},enableTextSetter:!0},ET(r,e)),i.textConfig.position=null)}else this._endLabel&&(this._polyline.removeTextContent(),this._endLabel=null)},e.prototype._endLabelOnDuring=function(t,e,n,r,o,i,a){var u=this._endLabel,s=this._polyline;if(u){t<1&&null==r.originalX&&(r.originalX=u.x,r.originalY=u.y);var l=n.getLayout("points"),c=n.hostModel,f=c.get("connectNulls"),d=i.get("precision"),h=i.get("distance")||0,p=a.getBaseAxis(),g=p.isHorizontal(),m=p.inverse,v=e.shape,y=m?g?v.x:v.y+v.height:g?v.x+v.width:v.y,b=(g?h:0)*(m?-1:1),x=(g?0:-h)*(m?-1:1),w=g?"x":"y",_=OT(l,y,w),S=_.range,C=S[1]-S[0],M=void 0;if(C>=1){if(C>1&&!f){var T=IT(l,S[0]);u.attr({x:T[0]+b,y:T[1]+x}),o&&(M=c.getRawValue(S[0]))}else{T=s.getPointOn(y,w);T&&u.attr({x:T[0]+b,y:T[1]+x});var k=c.getRawValue(S[0]),D=c.getRawValue(S[1]);o&&(M=Vi(n,d,k,D,_.t))}r.lastFrameIndex=S[0]}else{var A=1===t||r.lastFrameIndex>0?S[0]:0;T=IT(l,A);o&&(M=c.getRawValue(A)),u.attr({x:T[0]+b,y:T[1]+x})}o&&Ed(u).setLabelText(M)}},e.prototype._doUpdateAnimation=function(t,e,n,r,o,i){var a=this._polyline,u=this._polygon,s=t.hostModel,l=aT(this._data,t,this._stackedOnPoints,e,this._coordSys,n,this._valueOrigin,i),c=l.current,f=l.stackedOnCurrent,d=l.next,h=l.stackedOnNext;if(o&&(c=CT(l.current,n,o),f=CT(l.stackedOnCurrent,n,o),d=CT(l.next,n,o),h=CT(l.stackedOnNext,n,o)),wT(c,d)>3e3||u&&wT(f,h)>3e3)return a.setShape({points:d}),void(u&&u.setShape({points:d,stackedOnPoints:h}));a.shape.__points=l.current,a.shape.points=c;var p={shape:{points:d}};l.current!==c&&(p.shape.__points=l.next),a.stopAnimation(),Qf(a,p,s),u&&(u.setShape({points:c,stackedOnPoints:f}),u.stopAnimation(),Qf(u,{shape:{stackedOnPoints:h}},s),a.shape.points!==u.shape.points&&(u.shape.points=a.shape.points));for(var g=[],m=l.status,v=0;v<m.length;v++){var y=m[v].cmd;if("="===y){var b=t.getItemGraphicEl(m[v].idx1);b&&g.push({el:b,ptIdx:v})}}a.animators&&a.animators.length&&a.animators[0].during(function(){u&&u.dirtyShape();for(var t=a.shape.__points,e=0;e<g.length;e++){var n=g[e].el,r=2*g[e].ptIdx;n.x=t[r],n.y=t[r+1],n.markRedraw()}})},e.prototype.remove=function(t){var e=this.group,n=this._data;this._lineGroup.removeAll(),this._symbolDraw.remove(!0),n&&n.eachItemGraphicEl(function(t,r){t.__temp&&(e.remove(t),n.setItemGraphicEl(r,null))}),this._polyline=this._polygon=this._coordSys=this._points=this._stackedOnPoints=this._endLabel=this._data=null},e.type="line",e}(Wv),RT=NT;function PT(t,e){return{seriesType:t,plan:Ev(),reset:function(t){var n=t.getData(),r=t.coordinateSystem,o=t.pipelineContext,i=e||o.large;if(r){var a=B(r.dimensions,function(t){return n.mapDimension(t)}).slice(0,2),u=a.length,s=n.getCalculationInfo("stackResultDimension");RM(n,a[0])&&(a[0]=s),RM(n,a[1])&&(a[1]=s);var l=n.getDimensionInfo(a[0]),c=n.getDimensionInfo(a[1]),f=l&&l.index,d=c&&c.index;return u&&{progress:function(t,e){for(var n=t.end-t.start,o=i&&oT(n*u),a=[],s=[],l=t.start,c=0;l<t.end;l++){var h=void 0;if(1===u){var p=e.getByDimIdx(f,l);h=r.dataToPoint(p,null,s)}else a[0]=e.getByDimIdx(f,l),a[1]=e.getByDimIdx(d,l),h=r.dataToPoint(a,null,s);i?(o[c++]=h[0],o[c++]=h[1]):e.setItemLayout(l,h.slice())}i&&e.setLayout("points",o)}}}}}}var zT={average:function(t){for(var e=0,n=0,r=0;r<t.length;r++)isNaN(t[r])||(e+=t[r],n++);return 0===n?NaN:e/n},sum:function(t){for(var e=0,n=0;n<t.length;n++)e+=t[n]||0;return e},max:function(t){for(var e=-1/0,n=0;n<t.length;n++)t[n]>e&&(e=t[n]);return isFinite(e)?e:NaN},min:function(t){for(var e=1/0,n=0;n<t.length;n++)t[n]<e&&(e=t[n]);return isFinite(e)?e:NaN},nearest:function(t){return t[0]}},BT=function(t){return Math.round(t.length/2)};function VT(t){return{seriesType:t,reset:function(t,e,n){var r=t.getData(),o=t.get("sampling"),i=t.coordinateSystem,a=r.count();if(a>10&&"cartesian2d"===i.type&&o){var u=i.getBaseAxis(),s=i.getOtherAxis(u),l=u.getExtent(),c=n.getDevicePixelRatio(),f=Math.abs(l[1]-l[0])*(c||1),d=Math.round(a/f);if(d>1){"lttb"===o&&t.setData(r.lttbDownSample(r.mapDimension(s.dim),1/d));var h=void 0;"string"===typeof o?h=zT[o]:"function"===typeof o&&(h=o),h&&t.setData(r.downSample(r.mapDimension(s.dim),1/d,h,BT))}}}}}function HT(t){t.registerChartView(RT),t.registerSeriesModel(WM),t.registerLayout(PT("line",!0)),t.registerVisual({seriesType:"line",reset:function(t){var e=t.getData(),n=t.getModel("lineStyle").getLineStyle();n&&!n.stroke&&(n.stroke=e.getVisual("style").fill),e.setVisual("legendLineStyle",n)}}),t.registerProcessor(t.PRIORITY.PROCESSOR.STATISTIC,VT("line"))}var FT="__ec_stack_",WT=.5,UT="undefined"!==typeof Float32Array?Float32Array:Array;function GT(t){return t.get("stack")||FT+t.seriesIndex}function jT(t){return t.dim+t.index}function XT(t){var e=[],n=t.axis,r="axis0";if("category"===n.type){for(var o=n.getBandWidth(),i=0;i<t.count;i++)e.push(O({bandWidth:o,axisKey:r,stackId:FT+i},t));var a=$T(e),u=[];for(i=0;i<t.count;i++){var s=a[r][FT+i];s.offsetCenter=s.offset+s.width/2,u.push(s)}return u}}function YT(t,e){var n=[];return e.eachSeriesByType(t,function(t){tk(t)&&!ek(t)&&n.push(t)}),n}function qT(t){var e={};z(t,function(t){var n=t.coordinateSystem,r=n.getBaseAxis();if("time"===r.type||"value"===r.type)for(var o=t.getData(),i=r.dim+"_"+r.index,a=o.mapDimension(r.dim),u=0,s=o.count();u<s;++u){var l=o.get(a,u);e[i]?e[i].push(l):e[i]=[l]}});var n={};for(var r in e)if(e.hasOwnProperty(r)){var o=e[r];if(o){o.sort(function(t,e){return t-e});for(var i=null,a=1;a<o.length;++a){var u=o[a]-o[a-1];u>0&&(i=null===i?u:Math.min(i,u))}n[r]=i}}return n}function ZT(t){var e=qT(t),n=[];return z(t,function(t){var r,o=t.coordinateSystem,i=o.getBaseAxis(),a=i.getExtent();if("category"===i.type)r=i.getBandWidth();else if("value"===i.type||"time"===i.type){var u=i.dim+"_"+i.index,s=e[u],l=Math.abs(a[1]-a[0]),c=i.scale.getExtent(),f=Math.abs(c[1]-c[0]);r=s?l/f*s:l}else{var d=t.getData();r=Math.abs(a[1]-a[0])/d.count()}var h=Ro(t.get("barWidth"),r),p=Ro(t.get("barMaxWidth"),r),g=Ro(t.get("barMinWidth")||1,r),m=t.get("barGap"),v=t.get("barCategoryGap");n.push({bandWidth:r,barWidth:h,barMaxWidth:p,barMinWidth:g,barGap:m,barCategoryGap:v,axisKey:jT(i),stackId:GT(t)})}),$T(n)}function $T(t){var e={};z(t,function(t,n){var r=t.axisKey,o=t.bandWidth,i=e[r]||{bandWidth:o,remainedWidth:o,autoWidthCount:0,categoryGap:null,gap:"20%",stacks:{}},a=i.stacks;e[r]=i;var u=t.stackId;a[u]||i.autoWidthCount++,a[u]=a[u]||{width:0,maxWidth:0};var s=t.barWidth;s&&!a[u].width&&(a[u].width=s,s=Math.min(i.remainedWidth,s),i.remainedWidth-=s);var l=t.barMaxWidth;l&&(a[u].maxWidth=l);var c=t.barMinWidth;c&&(a[u].minWidth=c);var f=t.barGap;null!=f&&(i.gap=f);var d=t.barCategoryGap;null!=d&&(i.categoryGap=d)});var n={};return z(e,function(t,e){n[e]={};var r=t.stacks,o=t.bandWidth,i=t.categoryGap;if(null==i){var a=W(r).length;i=Math.max(35-4*a,15)+"%"}var u=Ro(i,o),s=Ro(t.gap,1),l=t.remainedWidth,c=t.autoWidthCount,f=(l-u)/(c+(c-1)*s);f=Math.max(f,0),z(r,function(t){var e=t.maxWidth,n=t.minWidth;if(t.width){r=t.width;e&&(r=Math.min(r,e)),n&&(r=Math.max(r,n)),t.width=r,l-=r+s*r,c--}else{var r=f;e&&e<r&&(r=Math.min(e,l)),n&&n>r&&(r=n),r!==f&&(t.width=r,l-=r+s*r,c--)}}),f=(l-u)/(c+(c-1)*s),f=Math.max(f,0);var d,h=0;z(r,function(t,e){t.width||(t.width=f),d=t,h+=t.width*(1+s)}),d&&(h-=d.width*s);var p=-h/2;z(r,function(t,r){n[e][r]=n[e][r]||{bandWidth:o,offset:p,width:t.width},p+=t.width*(1+s)})}),n}function KT(t,e,n){if(t&&e){var r=t[jT(e)];return null!=r&&null!=n?r[GT(n)]:r}}function JT(t,e){var n=YT(t,e),r=ZT(n),o={};z(n,function(t){var e=t.getData(),n=t.coordinateSystem,i=n.getBaseAxis(),a=GT(t),u=r[jT(i)][a],s=u.offset,l=u.width,c=n.getOtherAxis(i),f=t.get("barMinHeight")||0;o[a]=o[a]||[],e.setLayout({bandWidth:u.bandWidth,offset:s,size:l});for(var d=e.mapDimension(c.dim),h=e.mapDimension(i.dim),p=RM(e,d),g=c.isHorizontal(),m=nk(i,c,p),v=0,y=e.count();v<y;v++){var b=e.get(d,v),x=e.get(h,v),w=b>=0?"p":"n",_=m;p&&(o[a][x]||(o[a][x]={p:m,n:m}),_=o[a][x][w]);var S=void 0,C=void 0,M=void 0,T=void 0;if(g){var k=n.dataToPoint([b,x]);S=_,C=k[1]+s,M=k[0]-m,T=l,Math.abs(M)<f&&(M=(M<0?-1:1)*f),isNaN(M)||p&&(o[a][x][w]+=M)}else{k=n.dataToPoint([x,b]);S=k[0]+s,C=_,M=l,T=k[1]-m,Math.abs(T)<f&&(T=(T<=0?-1:1)*f),isNaN(T)||p&&(o[a][x][w]+=T)}e.setItemLayout(v,{x:S,y:C,width:M,height:T})}})}var QT={seriesType:"bar",plan:Ev(),reset:function(t){if(tk(t)&&ek(t)){var e=t.getData(),n=t.coordinateSystem,r=n.master.getRect(),o=n.getBaseAxis(),i=n.getOtherAxis(o),a=e.mapDimension(i.dim),u=e.mapDimension(o.dim),s=i.isHorizontal(),l=s?0:1,c=KT(ZT([t]),o,t).width;return c>WT||(c=WT),{progress:function(t,e){var f,d=t.count,h=new UT(2*d),p=new UT(2*d),g=new UT(d),m=[],v=[],y=0,b=0;while(null!=(f=t.next()))v[l]=e.get(a,f),v[1-l]=e.get(u,f),m=n.dataToPoint(v,null),p[y]=s?r.x+r.width:m[0],h[y++]=m[0],p[y]=s?m[1]:r.y+r.height,h[y++]=m[1],g[b++]=f;e.setLayout({largePoints:h,largeDataIndices:g,largeBackgroundPoints:p,barWidth:c,valueAxisStart:nk(o,i,!1),backgroundStart:s?r.x:r.y,valueAxisHorizontal:s})}}}}};function tk(t){return t.coordinateSystem&&"cartesian2d"===t.coordinateSystem.type}function ek(t){return t.pipelineContext&&t.pipelineContext.large}function nk(t,e,n){return e.toGlobalCoord(e.dataToCoord("log"===e.type?1:0))}var rk=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n}return i(e,t),e.prototype.getInitialData=function(t,e){return HM(this.getSource(),this,{useEncodeDefaulter:!0})},e.prototype.getMarkerPosition=function(t){var e=this.coordinateSystem;if(e){var n=e.dataToPoint(e.clampData(t)),r=this.getData(),o=r.getLayout("offset"),i=r.getLayout("size"),a=e.getBaseAxis().isHorizontal()?0:1;return n[a]+=o+i/2,n}return[NaN,NaN]},e.type="series.__base_bar__",e.defaultOption={zlevel:0,z:2,coordinateSystem:"cartesian2d",legendHoverLink:!0,barMinHeight:0,barMinAngle:0,large:!1,largeThreshold:400,progressive:3e3,progressiveChunkMode:"mod"},e}(Iv);Iv.registerClass(rk);var ok=rk,ik=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n}return i(e,t),e.prototype.getInitialData=function(){return HM(this.getSource(),this,{useEncodeDefaulter:!0,createInvertedIndices:!!this.get("realtimeSort",!0)||null})},e.prototype.getProgressive=function(){return!!this.get("large")&&this.get("progressive")},e.prototype.getProgressiveThreshold=function(){var t=this.get("progressiveThreshold"),e=this.get("largeThreshold");return e>t&&(t=e),t},e.prototype.brushSelector=function(t,e,n){return n.rect(e.getItemLayout(t))},e.type="series.bar",e.dependencies=["grid","polar"],e.defaultOption=Jd(ok.defaultOption,{clip:!0,roundCap:!1,showBackground:!1,backgroundStyle:{color:"rgba(180, 180, 180, 0.2)",borderColor:null,borderWidth:0,borderType:"solid",borderRadius:0,shadowBlur:0,shadowColor:null,shadowOffsetX:0,shadowOffsetY:0,opacity:1},select:{itemStyle:{borderColor:"#212121"}},realtimeSort:!1}),e}(ok),ak=ik,uk=function(){function t(){this.cx=0,this.cy=0,this.r0=0,this.r=0,this.startAngle=0,this.endAngle=2*Math.PI,this.clockwise=!0}return t}(),sk=function(t){function e(e){var n=t.call(this,e)||this;return n.type="sausage",n}return i(e,t),e.prototype.getDefaultShape=function(){return new uk},e.prototype.buildPath=function(t,e){var n=e.cx,r=e.cy,o=Math.max(e.r0||0,0),i=Math.max(e.r,0),a=.5*(i-o),u=o+a,s=e.startAngle,l=e.endAngle,c=e.clockwise,f=Math.cos(s),d=Math.sin(s),h=Math.cos(l),p=Math.sin(l),g=c?l-s<2*Math.PI:s-l<2*Math.PI;g&&(t.moveTo(f*o+n,d*o+r),t.arc(f*u+n,d*u+r,a,-Math.PI+s,s,!c)),t.arc(n,r,i,s,l,!c),t.moveTo(h*i+n,p*i+r),t.arc(h*u+n,p*u+r,a,l-2*Math.PI,l-Math.PI,!c),0!==o&&(t.arc(n,r,o,l,s,c),t.moveTo(f*o+n,p*o+r)),t.closePath()},e}(ds),lk=sk,ck=[0,0],fk=Math.max,dk=Math.min;function hk(t,e){var n=t.getArea&&t.getArea();if(yT(t,"cartesian2d")){var r=t.getBaseAxis();if("category"!==r.type||!r.onBand){var o=e.getLayout("bandWidth");r.isHorizontal()?(n.x-=o,n.width+=2*o):(n.y-=o,n.height+=2*o)}}return n}var pk=function(t){function e(){var n=t.call(this)||this;return n.type=e.type,n._isFirstFrame=!0,n}return i(e,t),e.prototype.render=function(t,e,n,r){this._model=t,this._removeOnRenderedListener(n),this._updateDrawMode(t);var o=t.get("coordinateSystem");("cartesian2d"===o||"polar"===o)&&(this._isLargeDraw?this._renderLarge(t,e,n):this._renderNormal(t,e,n,r))},e.prototype.incrementalPrepareRender=function(t){this._clear(),this._updateDrawMode(t),this._updateLargeClip(t)},e.prototype.incrementalRender=function(t,e){this._incrementalRenderLarge(t,e)},e.prototype._updateDrawMode=function(t){var e=t.pipelineContext.large;null!=this._isLargeDraw&&e===this._isLargeDraw||(this._isLargeDraw=e,this._clear())},e.prototype._renderNormal=function(t,e,n,r){var o,i=this.group,a=t.getData(),u=this._data,s=t.coordinateSystem,l=s.getBaseAxis();"cartesian2d"===s.type?o=l.isHorizontal():"polar"===s.type&&(o="angle"===l.dim);var c=t.isAnimationEnabled()?t:null,f=vk(t,s);f&&this._enableRealtimeSort(f,a,n);var d=t.get("clip",!0)||f,h=hk(s,a);i.removeClipPath();var p=t.get("roundCap",!0),g=t.get("showBackground",!0),m=t.getModel("backgroundStyle"),v=m.get("borderRadius")||0,y=[],b=this._backgroundEls,x=r&&r.isInitSort,w=r&&"changeAxisOrder"===r.type;function _(t){var e=bk[s.type](a,t),n=Ok(s,o,e);return n.useStyle(m.getItemStyle()),"cartesian2d"===s.type&&n.setShape("r",v),y[t]=n,n}a.diff(u).add(function(e){var n=a.getItemModel(e),r=bk[s.type](a,e,n);if(g&&_(e),a.hasValue(e)){var u=!1;d&&(u=gk[s.type](h,r));var m=mk[s.type](t,a,e,r,o,c,l.model,!1,p);wk(m,a,e,n,r,t,o,"polar"===s.type),x?m.attr({shape:r}):f?yk(f,c,m,r,e,o,!1,!1):td(m,{shape:r},t,e),a.setItemGraphicEl(e,m),i.add(m),m.ignore=u}}).update(function(e,n){var r=a.getItemModel(e),S=bk[s.type](a,e,r);if(g){var C=void 0;0===b.length?C=_(n):(C=b[n],C.useStyle(m.getItemStyle()),"cartesian2d"===s.type&&C.setShape("r",v),y[e]=C);var M=bk[s.type](a,e),T=Ik(o,M,s);Qf(C,{shape:T},c,e)}var k=u.getItemGraphicEl(n);if(!a.hasValue(e))return i.remove(k),void(k=null);var D=!1;d&&(D=gk[s.type](h,S),D&&i.remove(k)),k||(k=mk[s.type](t,a,e,S,o,c,l.model,!!k,p)),w||wk(k,a,e,r,S,t,o,"polar"===s.type),x?k.attr({shape:S}):f?yk(f,c,k,S,e,o,!0,w):Qf(k,{shape:S},t,e,null),a.setItemGraphicEl(e,k),k.ignore=D,i.add(k)}).remove(function(e){var n=u.getItemGraphicEl(e);n&&rd(n,t,e)}).execute();var S=this._backgroundGroup||(this._backgroundGroup=new _o);S.removeAll();for(var C=0;C<y.length;++C)S.add(y[C]);i.add(S),this._backgroundEls=y,this._data=a},e.prototype._renderLarge=function(t,e,n){this._clear(),Mk(t,this.group),this._updateLargeClip(t)},e.prototype._incrementalRenderLarge=function(t,e){this._removeBackground(),Mk(e,this.group,!0)},e.prototype._updateLargeClip=function(t){var e=t.get("clip",!0)?vT(t.coordinateSystem,!1,t):null;e?this.group.setClipPath(e):this.group.removeClipPath()},e.prototype._enableRealtimeSort=function(t,e,n){var r=this;if(e.count()){var o=t.baseAxis;if(this._isFirstFrame)this._dispatchInitSort(e,t,n),this._isFirstFrame=!1;else{var i=function(t){var n=e.getItemGraphicEl(t);if(n){var r=n.shape;return(o.isHorizontal()?Math.abs(r.height):Math.abs(r.width))||0}return 0};this._onRendered=function(){r._updateSortWithinSameData(e,i,o,n)},n.getZr().on("rendered",this._onRendered)}}},e.prototype._dataSort=function(t,e,n){var r=[];return t.each(t.mapDimension(e.dim),function(t,e){var o=n(e);o=null==o?NaN:o,r.push({dataIndex:e,mappedValue:o,ordinalNumber:t})}),r.sort(function(t,e){return e.mappedValue-t.mappedValue}),{ordinalNumbers:B(r,function(t){return t.ordinalNumber})}},e.prototype._isOrderChangedWithinSameData=function(t,e,n){for(var r=n.scale,o=t.mapDimension(n.dim),i=Number.MAX_VALUE,a=0,u=r.getOrdinalMeta().categories.length;a<u;++a){var s=t.rawIndexOf(o,r.getRawOrdinalNumber(a)),l=s<0?Number.MIN_VALUE:e(t.indexOfRawIndex(s));if(l>i)return!0;i=l}return!1},e.prototype._isOrderDifferentInView=function(t,e){for(var n=e.scale,r=n.getExtent(),o=Math.max(0,r[0]),i=Math.min(r[1],n.getOrdinalMeta().categories.length-1);o<=i;++o)if(t.ordinalNumbers[o]!==n.getRawOrdinalNumber(o))return!0},e.prototype._updateSortWithinSameData=function(t,e,n,r){if(this._isOrderChangedWithinSameData(t,e,n)){var o=this._dataSort(t,n,e);this._isOrderDifferentInView(o,n)&&(this._removeOnRenderedListener(r),r.dispatchAction({type:"changeAxisOrder",componentType:n.dim+"Axis",axisId:n.index,sortInfo:o}))}},e.prototype._dispatchInitSort=function(t,e,n){var r=e.baseAxis,o=this._dataSort(t,r,function(n){return t.get(t.mapDimension(e.otherAxis.dim),n)});n.dispatchAction({type:"changeAxisOrder",componentType:r.dim+"Axis",isInitSort:!0,axisId:r.index,sortInfo:o,animation:{duration:0}})},e.prototype.remove=function(t,e){this._clear(this._model),this._removeOnRenderedListener(e)},e.prototype.dispose=function(t,e){this._removeOnRenderedListener(e)},e.prototype._removeOnRenderedListener=function(t){this._onRendered&&(t.getZr().off("rendered",this._onRendered),this._onRendered=null)},e.prototype._clear=function(t){var e=this.group,n=this._data;t&&t.isAnimationEnabled()&&n&&!this._isLargeDraw?(this._removeBackground(),this._backgroundEls=[],n.eachItemGraphicEl(function(e){rd(e,t,Gs(e).dataIndex)})):e.removeAll(),this._data=null,this._isFirstFrame=!0},e.prototype._removeBackground=function(){this.group.remove(this._backgroundGroup),this._backgroundGroup=null},e.type="bar",e}(Wv),gk={cartesian2d:function(t,e){var n=e.width<0?-1:1,r=e.height<0?-1:1;n<0&&(e.x+=e.width,e.width=-e.width),r<0&&(e.y+=e.height,e.height=-e.height);var o=t.x+t.width,i=t.y+t.height,a=fk(e.x,t.x),u=dk(e.x+e.width,o),s=fk(e.y,t.y),l=dk(e.y+e.height,i),c=u<a,f=l<s;return e.x=c&&a>o?u:a,e.y=f&&s>i?l:s,e.width=c?0:u-a,e.height=f?0:l-s,n<0&&(e.x+=e.width,e.width=-e.width),r<0&&(e.y+=e.height,e.height=-e.height),c||f},polar:function(t,e){var n=e.r0<=e.r?1:-1;if(n<0){var r=e.r;e.r=e.r0,e.r0=r}var o=dk(e.r,t.r),i=fk(e.r0,t.r0);e.r=o,e.r0=i;var a=o-i<0;if(n<0){r=e.r;e.r=e.r0,e.r0=r}return a}},mk={cartesian2d:function(t,e,n,r,o,i,a,u,s){var l=new As({shape:I({},r),z2:1});if(l.__dataIndex=n,l.name="item",i){var c=l.shape,f=o?"height":"width";c[f]=0}return l},polar:function(t,e,n,r,o,i,a,u,s){var l=r.startAngle<r.endAngle,c=!o&&s?lk:Xc,f=new c({shape:O({clockwise:l},r),z2:1});if(f.name="item",i){var d=f.shape,h=o?"r":"endAngle",p={};d[h]=o?0:r.startAngle,p[h]=r[h],(u?Qf:td)(f,{shape:p},i)}return f}};function vk(t,e){var n=t.get("realtimeSort",!0),r=e.getBaseAxis();if(n&&"category"===r.type&&"cartesian2d"===e.type)return{baseAxis:r,otherAxis:e.getOtherAxis(r)}}function yk(t,e,n,r,o,i,a,u){var s,l;i?(l={x:r.x,width:r.width},s={y:r.y,height:r.height}):(l={y:r.y,height:r.height},s={x:r.x,width:r.width}),u||(a?Qf:td)(n,{shape:s},e,o,null);var c=e?t.baseAxis.model:null;(a?Qf:td)(n,{shape:l},c,o)}var bk={cartesian2d:function(t,e,n){var r=t.getItemLayout(e),o=n?_k(n,r):0,i=r.width>0?1:-1,a=r.height>0?1:-1;return{x:r.x+i*o/2,y:r.y+a*o/2,width:r.width-i*o,height:r.height-a*o}},polar:function(t,e,n){var r=t.getItemLayout(e);return{cx:r.cx,cy:r.cy,r0:r.r0,r:r.r,startAngle:r.startAngle,endAngle:r.endAngle}}};function xk(t){return null!=t.startAngle&&null!=t.endAngle&&t.startAngle===t.endAngle}function wk(t,e,n,r,o,i,a,u){var s=e.getItemVisual(n,"style");u||t.setShape("r",r.get(["itemStyle","borderRadius"])||0),t.useStyle(s);var l=r.getShallow("cursor");if(l&&t.attr("cursor",l),!u){var c=a?o.height>0?"bottom":"top":o.width>0?"left":"right",f=Sd(r);_d(t,f,{labelFetcher:i,labelDataIndex:n,defaultText:UM(i.getData(),n),inheritColor:s.fill,defaultOpacity:s.opacity,defaultOutsidePosition:c});var d=t.getTextContent();Nd(d,f,i.getRawValue(n),function(t){return GM(e,t)})}var h=r.getModel(["emphasis"]);Gl(t,h.get("focus"),h.get("blurScope")),ql(t,r),xk(o)&&(t.style.fill="none",t.style.stroke="none",z(t.states,function(t){t.style&&(t.style.fill=t.style.stroke="none")}))}function _k(t,e){var n=t.get(["itemStyle","borderColor"]);if(!n||"none"===n)return 0;var r=t.get(["itemStyle","borderWidth"])||0,o=isNaN(e.width)?Number.MAX_VALUE:Math.abs(e.width),i=isNaN(e.height)?Number.MAX_VALUE:Math.abs(e.height);return Math.min(r,o,i)}var Sk=function(){function t(){}return t}(),Ck=function(t){function e(e){var n=t.call(this,e)||this;return n.type="largeBar",n}return i(e,t),e.prototype.getDefaultShape=function(){return new Sk},e.prototype.buildPath=function(t,e){for(var n=e.points,r=this.__startPoint,o=this.__baseDimIdx,i=0;i<n.length;i+=2)r[o]=n[i+o],t.moveTo(r[0],r[1]),t.lineTo(n[i],n[i+1])},e}(ds);function Mk(t,e,n){var r=t.getData(),o=[],i=r.getLayout("valueAxisHorizontal")?1:0;o[1-i]=r.getLayout("valueAxisStart");var a=r.getLayout("largeDataIndices"),u=r.getLayout("barWidth"),s=t.getModel("backgroundStyle"),l=t.get("showBackground",!0);if(l){var c=r.getLayout("largeBackgroundPoints"),f=[];f[1-i]=r.getLayout("backgroundStart");var d=new Ck({shape:{points:c},incremental:!!n,silent:!0,z2:0});d.__startPoint=f,d.__baseDimIdx=i,d.__largeDataIndices=a,d.__barWidth=u,Ak(d,s,r),e.add(d)}var h=new Ck({shape:{points:r.getLayout("largePoints")},incremental:!!n});h.__startPoint=o,h.__baseDimIdx=i,h.__largeDataIndices=a,h.__barWidth=u,e.add(h),Dk(h,t,r),Gs(h).seriesIndex=t.seriesIndex,t.get("silent")||(h.on("mousedown",Tk),h.on("mousemove",Tk))}var Tk=Xv(function(t){var e=this,n=kk(e,t.offsetX,t.offsetY);Gs(e).dataIndex=n>=0?n:null},30,!1);function kk(t,e,n){var r=t.__baseDimIdx,o=1-r,i=t.shape.points,a=t.__largeDataIndices,u=Math.abs(t.__barWidth/2),s=t.__startPoint[o];ck[0]=e,ck[1]=n;for(var l=ck[r],c=ck[1-r],f=l-u,d=l+u,h=0,p=i.length/2;h<p;h++){var g=2*h,m=i[g+r],v=i[g+o];if(m>=f&&m<=d&&(s<=v?c>=s&&c<=v:c>=v&&c<=s))return a[h]}return-1}function Dk(t,e,n){var r=n.getVisual("style");t.useStyle(I({},r)),t.style.fill=null,t.style.stroke=r.fill,t.style.lineWidth=n.getLayout("barWidth")}function Ak(t,e,n){var r=e.get("borderColor")||e.get("color"),o=e.getItemStyle();t.useStyle(o),t.style.fill=null,t.style.stroke=r,t.style.lineWidth=n.getLayout("barWidth")}function Ik(t,e,n){if(yT(n,"cartesian2d")){var r=e,o=n.getArea();return{x:t?r.x:o.x,y:t?o.y:r.y,width:t?r.width:o.width,height:t?o.height:r.height}}o=n.getArea();var i=e;return{cx:o.cx,cy:o.cy,r0:t?o.r0:i.r0,r:t?o.r:i.r,startAngle:t?i.startAngle:0,endAngle:t?i.endAngle:2*Math.PI}}function Ok(t,e,n){var r="polar"===t.type?Xc:As;return new r({shape:Ik(e,n,t),silent:!0,z2:0})}var Lk=pk;function Ek(t){t.registerChartView(Lk),t.registerSeriesModel(ak),t.registerLayout(t.PRIORITY.VISUAL.LAYOUT,j(JT,"bar")),t.registerLayout(t.PRIORITY.VISUAL.PROGRESSIVE_LAYOUT,QT),t.registerProcessor(t.PRIORITY.PROCESSOR.STATISTIC,VT("bar")),t.registerAction({type:"changeAxisOrder",event:"changeAxisOrder",update:"update"},function(t,e){var n=t.componentType||"series";e.eachComponent({mainType:n,query:t},function(e){t.sortInfo&&e.axis.setCategorySortInfo(t.sortInfo)})})}var Nk=2*Math.PI,Rk=Math.PI/180;function Pk(t,e){return lp(t.getBoxLayoutParams(),{width:e.getWidth(),height:e.getHeight()})}function zk(t,e,n){e.eachSeriesByType(t,function(t){var e=t.getData(),r=e.mapDimension("value"),o=Pk(t,n),i=t.get("center"),a=t.get("radius");X(a)||(a=[0,a]),X(i)||(i=[i,i]);var u=Ro(o.width,n.getWidth()),s=Ro(o.height,n.getHeight()),l=Math.min(u,s),c=Ro(i[0],u)+o.x,f=Ro(i[1],s)+o.y,d=Ro(a[0],l/2),h=Ro(a[1],l/2),p=-t.get("startAngle")*Rk,g=t.get("minAngle")*Rk,m=0;e.each(r,function(t){!isNaN(t)&&m++});var v=e.getSum(r),y=Math.PI/(v||m)*2,b=t.get("clockwise"),x=t.get("roseType"),w=t.get("stillShowZeroSum"),_=e.getDataExtent(r);_[0]=0;var S=Nk,C=0,M=p,T=b?1:-1;if(e.setLayout({viewRect:o,r:h}),e.each(r,function(t,n){var r;if(isNaN(t))e.setItemLayout(n,{angle:NaN,startAngle:NaN,endAngle:NaN,clockwise:b,cx:c,cy:f,r0:d,r:x?NaN:h});else{r="area"!==x?0===v&&w?y:t*y:Nk/m,r<g?(r=g,S-=g):C+=t;var o=M+T*r;e.setItemLayout(n,{angle:r,startAngle:M,endAngle:o,clockwise:b,cx:c,cy:f,r0:d,r:x?No(t,_,[d,h]):h}),M=o}}),S<Nk&&m)if(S<=.001){var k=Nk/m;e.each(r,function(t,n){if(!isNaN(t)){var r=e.getItemLayout(n);r.angle=k,r.startAngle=p+T*n*k,r.endAngle=p+T*(n+1)*k}})}else y=S/C,M=p,e.each(r,function(t,n){if(!isNaN(t)){var r=e.getItemLayout(n),o=r.angle===g?g:t*y;r.startAngle=M,r.endAngle=M+T*o,M+=T*o}})})}function Bk(t){return{seriesType:t,reset:function(t,e){var n=e.findComponents({mainType:"legend"});if(n&&n.length){var r=t.getData();r.filterSelf(function(t){for(var e=r.getName(t),o=0;o<n.length;o++)if(!n[o].isSelected(e))return!1;return!0})}}}}var Vk=Math.PI/180;function Hk(t,e,n,r,o,i,a,u,s,l){if(!(t.length<2)){for(var c=t.length,f=0;f<c;f++)if("outer"===t[f].position&&"labelLine"===t[f].labelAlignTo){var d=t[f].label.x-l;t[f].linePoints[1][0]+=d,t[f].label.x=l}lb(t,s,s+a)&&p(t)}function h(t){for(var i=t.rB,a=i*i,u=0;u<t.list.length;u++){var s=t.list[u],l=Math.abs(s.label.y-n),c=r+s.len,f=c*c,d=Math.sqrt((1-Math.abs(l*l/a))*f);s.label.x=e+(d+s.len2)*o}}function p(t){for(var i={list:[],maxY:0},a={list:[],maxY:0},u=0;u<t.length;u++)if("none"===t[u].labelAlignTo){var s=t[u],l=s.label.y>n?a:i,c=Math.abs(s.label.y-n);if(c>l.maxY){var f=s.label.x-e-s.len2*o,d=r+s.len,p=Math.abs(f)<d?Math.sqrt(c*c/(1-f*f/d/d)):d;l.rB=p,l.maxY=c}l.list.push(s)}h(i),h(a)}}function Fk(t,e,n,r,o,i,a,u){for(var s=[],l=[],c=Number.MAX_VALUE,f=-Number.MAX_VALUE,d=0;d<t.length;d++){var h=t[d].label;Wk(t[d])||(h.x<e?(c=Math.min(c,h.x),s.push(t[d])):(f=Math.max(f,h.x),l.push(t[d])))}Hk(l,e,n,r,1,o,i,a,u,f),Hk(s,e,n,r,-1,o,i,a,u,c);for(d=0;d<t.length;d++){var p=t[d];h=p.label;if(!Wk(p)){var g=p.linePoints;if(g){var m="edge"===p.labelAlignTo,v=p.rect.width,y=void 0;y=m?h.x<e?g[2][0]-p.labelDistance-a-p.edgeDistance:a+o-p.edgeDistance-g[2][0]-p.labelDistance:h.x<e?h.x-a-p.bleedMargin:a+o-h.x-p.bleedMargin,y<p.rect.width&&(p.label.style.width=y,"edge"===p.labelAlignTo&&(v=y));var b=g[1][0]-g[2][0];m?h.x<e?g[2][0]=a+p.edgeDistance+v+p.labelDistance:g[2][0]=a+o-p.edgeDistance-v-p.labelDistance:(h.x<e?g[2][0]=h.x+p.labelDistance:g[2][0]=h.x-p.labelDistance,g[1][0]=g[2][0]+b),g[1][1]=g[2][1]=h.y}}}}function Wk(t){return"center"===t.position}function Uk(t){var e,n,r=t.getData(),o=[],i=!1,a=(t.get("minShowLabelAngle")||0)*Vk,u=r.getLayout("viewRect"),s=r.getLayout("r"),l=u.width,c=u.x,f=u.y,d=u.height;function h(t){t.ignore=!0}function p(t){if(!t.ignore)return!0;for(var e in t.states)if(!1===t.states[e].ignore)return!0;return!1}r.each(function(t){var u=r.getItemGraphicEl(t),f=u.shape,d=u.getTextContent(),g=u.getTextGuideLine(),m=r.getItemModel(t),v=m.getModel("label"),y=v.get("position")||m.get(["emphasis","label","position"]),b=v.get("distanceToLabelLine"),x=v.get("alignTo"),w=Ro(v.get("edgeDistance"),l),_=v.get("bleedMargin"),S=m.getModel("labelLine"),C=S.get("length");C=Ro(C,l);var M=S.get("length2");if(M=Ro(M,l),Math.abs(f.endAngle-f.startAngle)<a)return z(d.states,h),void(d.ignore=!0);if(p(d)){var T,k,D,A,I=(f.startAngle+f.endAngle)/2,O=Math.cos(I),L=Math.sin(I);e=f.cx,n=f.cy;var E,N="inside"===y||"inner"===y;if("center"===y)T=f.cx,k=f.cy,A="center";else{var R=(N?(f.r+f.r0)/2*O:f.r*O)+e,P=(N?(f.r+f.r0)/2*L:f.r*L)+n;if(T=R+3*O,k=P+3*L,!N){var B=R+O*(C+s-f.r),V=P+L*(C+s-f.r),H=B+(O<0?-1:1)*M,F=V;T="edge"===x?O<0?c+w:c+l-w:H+(O<0?-b:b),k=F,D=[[R,P],[B,V],[H,F]]}A=N?"center":"edge"===x?O>0?"right":"left":O>0?"left":"right"}var W=v.get("rotate");if(E="number"===typeof W?W*(Math.PI/180):W?O<0?-I+Math.PI:-I:0,i=!!E,d.x=T,d.y=k,d.rotation=E,d.setStyle({verticalAlign:"middle"}),N){d.setStyle({align:A});var U=d.states.select;U&&(U.x+=d.x,U.y+=d.y)}else{var G=d.getBoundingRect().clone();G.applyTransform(d.getComputedTransform());var j=(d.style.margin||0)+2.1;G.y-=j/2,G.height+=j,o.push({label:d,labelLine:g,position:y,len:C,len2:M,minTurnAngle:S.get("minTurnAngle"),maxSurfaceAngle:S.get("maxSurfaceAngle"),surfaceNormal:new Vr(O,L),linePoints:D,textAlign:A,labelDistance:b,labelAlignTo:x,edgeDistance:w,bleedMargin:_,rect:G})}u.setTextConfig({inside:N})}}),!i&&t.get("avoidLabelOverlap")&&Fk(o,e,n,s,l,d,c,f);for(var g=0;g<o.length;g++){var m=o[g],v=m.label,y=m.labelLine,b=isNaN(v.x)||isNaN(v.y);if(v){v.setStyle({align:m.textAlign}),b&&(z(v.states,h),v.ignore=!0);var x=v.states.select;x&&(x.x+=v.x,x.y+=v.y)}if(y){var w=m.linePoints;b||!w?(z(y.states,h),y.ignore=!0):(tb(w,m.minTurnAngle),eb(w,m.surfaceNormal,m.maxSurfaceAngle),y.setShape({points:w}),v.__hostTarget.textGuideLineConfig={anchor:new Vr(w[0][0],w[0][1])})}}}function Gk(t,e){var n=t.get("borderRadius");return null==n?null:(X(n)||(n=[n,n]),{innerCornerRadius:ao(n[0],e.r0),cornerRadius:ao(n[1],e.r)})}var jk=function(t){function e(e,n,r){var o=t.call(this)||this;o.z2=2;var i=new Us;return o.setTextContent(i),o.updateData(e,n,r,!0),o}return i(e,t),e.prototype.updateData=function(t,e,n,r){var o=this,i=t.hostModel,u=t.getItemModel(e),s=u.getModel("emphasis"),l=t.getItemLayout(e),c=I(Gk(u.getModel("itemStyle"),l)||{},l);if(isNaN(c.startAngle))o.setShape(c);else{if(r){o.setShape(c);var f=i.getShallow("animationType");"scale"===f?(o.shape.r=l.r0,td(o,{shape:{r:l.r}},i,e)):null!=n?(o.setShape({startAngle:n,endAngle:n}),td(o,{shape:{startAngle:l.startAngle,endAngle:l.endAngle}},i,e)):(o.shape.endAngle=l.startAngle,Qf(o,{shape:{endAngle:l.endAngle}},i,e))}else Qf(o,{shape:c},i,e);o.useStyle(t.getItemVisual(e,"style")),ql(o,u);var d=(l.startAngle+l.endAngle)/2,h=i.get("selectedOffset"),p=Math.cos(d)*h,g=Math.sin(d)*h,m=u.getShallow("cursor");m&&o.attr("cursor",m),this._updateLabel(i,t,e),o.ensureState("emphasis").shape=a({r:l.r+(s.get("scale")&&s.get("scaleSize")||0)},Gk(s.getModel("itemStyle"),l)),I(o.ensureState("select"),{x:p,y:g,shape:Gk(u.getModel(["select","itemStyle"]),l)}),I(o.ensureState("blur"),{shape:Gk(u.getModel(["blur","itemStyle"]),l)});var v=o.getTextGuideLine(),y=o.getTextContent();v&&I(v.ensureState("select"),{x:p,y:g}),I(y.ensureState("select"),{x:p,y:g}),Gl(this,s.get("focus"),s.get("blurScope"))}},e.prototype._updateLabel=function(t,e,n){var r=this,o=e.getItemModel(n),i=o.getModel("labelLine"),a=e.getItemVisual(n,"style"),u=a&&a.fill,s=a&&a.opacity;_d(r,Sd(o),{labelFetcher:e.hostModel,labelDataIndex:n,inheritColor:u,defaultOpacity:s,defaultText:t.getFormattedLabel(n,"normal")||e.getName(n)});var l=r.getTextContent();r.setTextConfig({position:null,rotation:null}),l.attr({z2:10});var c=t.get(["label","position"]);if("outside"!==c&&"outer"!==c)r.removeTextGuideLine();else{var f=this.getTextGuideLine();f||(f=new af,this.setTextGuideLine(f)),ob(this,ib(o),{stroke:u,opacity:ut(i.get(["lineStyle","opacity"]),s,1)})}},e}(Xc),Xk=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.ignoreLabelLineUpdate=!0,e}return i(e,t),e.prototype.init=function(){var t=new _o;this._sectorGroup=t},e.prototype.render=function(t,e,n,r){var o,i=t.getData(),a=this._data,u=this.group;if(!a&&i.count()>0){for(var s=i.getItemLayout(0),l=1;isNaN(s&&s.startAngle)&&l<i.count();++l)s=i.getItemLayout(l);s&&(o=s.startAngle)}i.diff(a).add(function(t){var e=new jk(i,t,o);i.setItemGraphicEl(t,e),u.add(e)}).update(function(t,e){var n=a.getItemGraphicEl(e);n.updateData(i,t,o),n.off("click"),u.add(n),i.setItemGraphicEl(t,n)}).remove(function(e){var n=a.getItemGraphicEl(e);rd(n,t,e)}).execute(),Uk(t),"expansion"!==t.get("animationTypeUpdate")&&(this._data=i)},e.prototype.dispose=function(){},e.prototype.containPoint=function(t,e){var n=e.getData(),r=n.getItemLayout(0);if(r){var o=t[0]-r.cx,i=t[1]-r.cy,a=Math.sqrt(o*o+i*i);return a<=r.r&&a>=r.r0}},e.type="pie",e}(Wv),Yk=Xk;function qk(t,e,n){e=X(e)&&{coordDimensions:e}||I({},e);var r=t.getSource(),o=AM(r,e),i=new CM(o,t);return i.initData(r,n),i}var Zk=function(){function t(t,e){this._getDataWithEncodedVisual=t,this._getRawData=e}return t.prototype.getAllNames=function(){var t=this._getRawData();return t.mapArray(t.getName)},t.prototype.containName=function(t){var e=this._getRawData();return e.indexOfName(t)>=0},t.prototype.indexOfName=function(t){var e=this._getDataWithEncodedVisual();return e.indexOfName(t)},t.prototype.getItemVisual=function(t,e){var n=this._getDataWithEncodedVisual();return n.getItemVisual(t,e)},t}(),$k=Zk,Kk=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.useColorPaletteOnData=!0,e}return i(e,t),e.prototype.init=function(e){t.prototype.init.apply(this,arguments),this.legendVisualProvider=new $k(G(this.getData,this),G(this.getRawData,this)),this._defaultLabelLine(e)},e.prototype.mergeOption=function(){t.prototype.mergeOption.apply(this,arguments)},e.prototype.getInitialData=function(){return qk(this,{coordDimensions:["value"],encodeDefaulter:j(Pp,this)})},e.prototype.getDataParams=function(e){var n=this.getData(),r=t.prototype.getDataParams.call(this,e),o=[];return n.each(n.mapDimension("value"),function(t){o.push(t)}),r.percent=Fo(o,e,n.hostModel.get("percentPrecision")),r.$vars.push("percent"),r},e.prototype._defaultLabelLine=function(t){ui(t,"labelLine",["show"]);var e=t.labelLine,n=t.emphasis.labelLine;e.show=e.show&&t.label.show,n.show=n.show&&t.emphasis.label.show},e.type="series.pie",e.defaultOption={zlevel:0,z:2,legendHoverLink:!0,center:["50%","50%"],radius:[0,"75%"],clockwise:!0,startAngle:90,minAngle:0,minShowLabelAngle:0,selectedOffset:10,percentPrecision:2,stillShowZeroSum:!0,left:0,top:0,right:0,bottom:0,width:null,height:null,label:{rotate:0,show:!0,overflow:"truncate",position:"outer",alignTo:"none",edgeDistance:"25%",bleedMargin:10,distanceToLabelLine:5},labelLine:{show:!0,length:15,length2:15,smooth:!1,minTurnAngle:90,maxSurfaceAngle:90,lineStyle:{width:1,type:"solid"}},itemStyle:{borderWidth:1},labelLayout:{hideOverlap:!0},emphasis:{scale:!0,scaleSize:5},avoidLabelOverlap:!0,animationType:"expansion",animationDuration:1e3,animationTypeUpdate:"transition",animationEasingUpdate:"cubicInOut",animationDurationUpdate:500,animationEasing:"cubicInOut"},e}(Iv),Jk=Kk;function Qk(t){t.registerChartView(Yk),t.registerSeriesModel(Jk),wb("pie",t.registerAction),t.registerLayout(j(zk,"pie")),t.registerProcessor(Bk("pie"))}var tD=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n.hasSymbolVisual=!0,n}return i(e,t),e.prototype.getInitialData=function(t,e){return HM(this.getSource(),this,{useEncodeDefaulter:!0})},e.prototype.getProgressive=function(){var t=this.option.progressive;return null==t?this.option.large?5e3:this.get("progressive"):t},e.prototype.getProgressiveThreshold=function(){var t=this.option.progressiveThreshold;return null==t?this.option.large?1e4:this.get("progressiveThreshold"):t},e.prototype.brushSelector=function(t,e,n){return n.point(e.getItemLayout(t))},e.type="series.scatter",e.dependencies=["grid","polar","geo","singleAxis","calendar"],e.defaultOption={coordinateSystem:"cartesian2d",zlevel:0,z:2,legendHoverLink:!0,symbolSize:10,large:!1,largeThreshold:2e3,itemStyle:{opacity:.8},emphasis:{scale:!0},clip:!0,select:{itemStyle:{borderColor:"#212121"}}},e}(Iv),eD=tD,nD=4,rD=function(){function t(){}return t}(),oD=function(t){function e(e){return t.call(this,e)||this}return i(e,t),e.prototype.getDefaultShape=function(){return new rD},e.prototype.buildPath=function(t,e){var n=e.points,r=e.size,o=this.symbolProxy,i=o.shape,a=t.getContext?t.getContext():t,u=a&&r[0]<nD;if(u)this._ctx=a;else{this._ctx=null;for(var s=0;s<n.length;){var l=n[s++],c=n[s++];isNaN(l)||isNaN(c)||(this.softClipShape&&!this.softClipShape.contain(l,c)||(i.x=l-r[0]/2,i.y=c-r[1]/2,i.width=r[0],i.height=r[1],o.buildPath(t,i,!0)))}}},e.prototype.afterBrush=function(){var t=this.shape,e=t.points,n=t.size,r=this._ctx;if(r)for(var o=0;o<e.length;){var i=e[o++],a=e[o++];isNaN(i)||isNaN(a)||(this.softClipShape&&!this.softClipShape.contain(i,a)||r.fillRect(i-n[0]/2,a-n[1]/2,n[0],n[1]))}},e.prototype.findDataIndex=function(t,e){for(var n=this.shape,r=n.points,o=n.size,i=Math.max(o[0],4),a=Math.max(o[1],4),u=r.length/2-1;u>=0;u--){var s=2*u,l=r[s]-i/2,c=r[s+1]-a/2;if(t>=l&&e>=c&&t<=l+i&&e<=c+a)return u}return-1},e}(ds),iD=function(){function t(){this.group=new _o}return t.prototype.isPersistent=function(){return!this._incremental},t.prototype.updateData=function(t,e){this.group.removeAll();var n=new oD({rectHover:!0,cursor:"default"});n.setShape({points:t.getLayout("points")}),this._setCommon(n,t,!1,e),this.group.add(n),this._incremental=null},t.prototype.updateLayout=function(t){if(!this._incremental){var e=t.getLayout("points");this.group.eachChild(function(t){if(null!=t.startIndex){var n=2*(t.endIndex-t.startIndex),r=4*t.startIndex*2;e=new Float32Array(e.buffer,r,n)}t.setShape("points",e)})}},t.prototype.incrementalPrepareUpdate=function(t){this.group.removeAll(),this._clearIncremental(),t.count()>2e6?(this._incremental||(this._incremental=new Rf({silent:!0})),this.group.add(this._incremental)):this._incremental=null},t.prototype.incrementalUpdate=function(t,e,n){var r;this._incremental?(r=new oD,this._incremental.addDisplayable(r,!0)):(r=new oD({rectHover:!0,cursor:"default",startIndex:t.start,endIndex:t.end}),r.incremental=!0,this.group.add(r)),r.setShape({points:e.getLayout("points")}),this._setCommon(r,e,!!this._incremental,n)},t.prototype._setCommon=function(t,e,n,r){var o=e.hostModel;r=r||{};var i=e.getVisual("symbolSize");t.setShape("size",i instanceof Array?i:[i,i]),t.softClipShape=r.clipShape||null,t.symbolProxy=zb(e.getVisual("symbol"),0,0,0,0),t.setColor=t.symbolProxy.setColor;var a=t.shape.size[0]<nD;t.useStyle(o.getModel("itemStyle").getItemStyle(a?["color","shadowBlur","shadowColor"]:["color"]));var u=e.getVisual("style"),s=u&&u.fill;if(s&&t.setColor(s),!n){var l=Gs(t);l.seriesIndex=o.seriesIndex,t.on("mousemove",function(e){l.dataIndex=null;var n=t.findDataIndex(e.offsetX,e.offsetY);n>=0&&(l.dataIndex=n+(t.startIndex||0))})}},t.prototype.remove=function(){this._clearIncremental(),this._incremental=null,this.group.removeAll()},t.prototype._clearIncremental=function(){var t=this._incremental;t&&t.clearDisplaybles()},t}(),aD=iD,uD=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n}return i(e,t),e.prototype.render=function(t,e,n){var r=t.getData(),o=this._updateSymbolDraw(r,t);o.updateData(r,{clipShape:this._getClipShape(t)}),this._finished=!0},e.prototype.incrementalPrepareRender=function(t,e,n){var r=t.getData(),o=this._updateSymbolDraw(r,t);o.incrementalPrepareUpdate(r),this._finished=!1},e.prototype.incrementalRender=function(t,e,n){this._symbolDraw.incrementalUpdate(t,e.getData(),{clipShape:this._getClipShape(e)}),this._finished=t.end===e.getData().count()},e.prototype.updateTransform=function(t,e,n){var r=t.getData();if(this.group.dirty(),!this._finished||r.count()>1e4||!this._symbolDraw.isPersistent())return{update:!0};var o=PT("").reset(t,e,n);o.progress&&o.progress({start:0,end:r.count(),count:r.count()},r),this._symbolDraw.updateLayout(r)},e.prototype._getClipShape=function(t){var e=t.coordinateSystem,n=e&&e.getArea&&e.getArea();return t.get("clip",!0)?n:null},e.prototype._updateSymbolDraw=function(t,e){var n=this._symbolDraw,r=e.pipelineContext,o=r.large;return n&&o===this._isLargeDraw||(n&&n.remove(),n=this._symbolDraw=o?new aD:new JM,this._isLargeDraw=o,this.group.removeAll()),this.group.add(n.group),n},e.prototype.remove=function(t,e){this._symbolDraw&&this._symbolDraw.remove(!0),this._symbolDraw=null},e.prototype.dispose=function(){},e.type="scatter",e}(Wv),sD=uD,lD=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.type="grid",e.dependencies=["xAxis","yAxis"],e.layoutMode="box",e.defaultOption={show:!1,zlevel:0,z:0,left:"10%",top:60,right:"10%",bottom:70,containLabel:!1,backgroundColor:"rgba(0,0,0,0)",borderWidth:1,borderColor:"#ccc"},e}(bp),cD=lD,fD=function(){function t(){}return t.prototype.getNeedCrossZero=function(){var t=this.option;return!t.scale},t.prototype.getCoordSysModel=function(){},t}(),dD=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.getCoordSysModel=function(){return this.getReferringComponents("grid",Li).models[0]},e.type="cartesian2dAxis",e}(bp);R(dD,fD);var hD={show:!0,zlevel:0,z:0,inverse:!1,name:"",nameLocation:"end",nameRotate:null,nameTruncate:{maxWidth:null,ellipsis:"...",placeholder:"."},nameTextStyle:{},nameGap:15,silent:!1,triggerEvent:!1,tooltip:{show:!1},axisPointer:{},axisLine:{show:!0,onZero:!0,onZeroAxisIndex:null,lineStyle:{color:"#6E7079",width:1,type:"solid"},symbol:["none","none"],symbolSize:[10,15]},axisTick:{show:!0,inside:!1,length:5,lineStyle:{width:1}},axisLabel:{show:!0,inside:!1,rotate:0,showMinLabel:null,showMaxLabel:null,margin:8,fontSize:12},splitLine:{show:!0,lineStyle:{color:["#E0E6F1"],width:1,type:"solid"}},splitArea:{show:!1,areaStyle:{color:["rgba(250,250,250,0.2)","rgba(210,219,238,0.2)"]}}},pD=D({boundaryGap:!0,deduplication:null,splitLine:{show:!1},axisTick:{alignWithLabel:!1,interval:"auto"},axisLabel:{interval:"auto"}},hD),gD=D({boundaryGap:[0,0],axisLine:{show:"auto"},axisTick:{show:"auto"},splitNumber:5,minorTick:{show:!1,splitNumber:5,length:3,lineStyle:{}},minorSplitLine:{show:!1,lineStyle:{color:"#F4F7FD",width:1}}},hD),mD=D({scale:!0,splitNumber:6,axisLabel:{showMinLabel:!1,showMaxLabel:!1,rich:{primary:{fontWeight:"bold"}}},splitLine:{show:!1}},gD),vD=O({scale:!0,logBase:10},gD),yD={category:pD,value:gD,time:mD,log:vD},bD=function(){function t(t){this.categories=t.categories||[],this._needCollect=t.needCollect,this._deduplication=t.deduplication}return t.createByAxisModel=function(e){var n=e.option,r=n.data,o=r&&B(r,xD);return new t({categories:o,needCollect:!o,deduplication:!1!==n.dedplication})},t.prototype.getOrdinal=function(t){return this._getOrCreateMap().get(t)},t.prototype.parseAndCollect=function(t){var e,n=this._needCollect;if("string"!==typeof t&&!n)return t;if(n&&!this._deduplication)return e=this.categories.length,this.categories[e]=t,e;var r=this._getOrCreateMap();return e=r.get(t),null==e&&(n?(e=this.categories.length,this.categories[e]=t,r.set(t,e)):e=NaN),e},t.prototype._getOrCreateMap=function(){return this._map||(this._map=mt(this.categories))},t}();function xD(t){return K(t)&&null!=t.value?t.value:t+""}var wD=bD,_D={value:1,category:1,time:1,log:1};function SD(t,e,n,r){z(_D,function(o,a){var u=D(D({},yD[a],!0),r,!0),s=function(t){function n(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];var o=t.apply(this,n)||this;return o.type=e+"Axis."+a,o}return i(n,t),n.prototype.mergeDefaultAndTheme=function(t,e){var n=dp(this),r=n?pp(t):{},o=e.getTheme();D(t,o.get(a+"Axis")),D(t,this.getDefaultOption()),t.type=CD(t),n&&hp(t,r,n)},n.prototype.optionUpdated=function(){var t=this.option;"category"===t.type&&(this.__ordinalMeta=wD.createByAxisModel(this))},n.prototype.getCategories=function(t){var e=this.option;if("category"===e.type)return t?e.data:this.__ordinalMeta.categories},n.prototype.getOrdinalMeta=function(){return this.__ordinalMeta},n.type=e+"Axis."+a,n.defaultOption=u,n}(n);t.registerComponentModel(s)}),t.registerSubTypeDefaulter(e+"Axis",CD)}function CD(t){return t.type||(t.data?"category":"value")}var MD=function(){function t(t){this._setting=t||{},this._extent=[1/0,-1/0]}return t.prototype.getSetting=function(t){return this._setting[t]},t.prototype.unionExtent=function(t){var e=this._extent;t[0]<e[0]&&(e[0]=t[0]),t[1]>e[1]&&(e[1]=t[1])},t.prototype.unionExtentFromData=function(t,e){this.unionExtent(t.getApproximateExtent(e))},t.prototype.getExtent=function(){return this._extent.slice()},t.prototype.setExtent=function(t,e){var n=this._extent;isNaN(t)||(n[0]=t),isNaN(e)||(n[1]=e)},t.prototype.isInExtentRange=function(t){return this._extent[0]<=t&&this._extent[1]>=t},t.prototype.isBlank=function(){return this._isBlank},t.prototype.setBlank=function(t){this._isBlank=t},t}();Qi(MD);var TD=MD,kD=Po;function DD(t,e,n,r){var o={},i=t[1]-t[0],a=o.interval=$o(i/e,!0);null!=n&&a<n&&(a=o.interval=n),null!=r&&a>r&&(a=o.interval=r);var u=o.intervalPrecision=AD(a),s=o.niceTickExtent=[kD(Math.ceil(t[0]/a)*a,u),kD(Math.floor(t[1]/a)*a,u)];return OD(s,t),o}function AD(t){return Bo(t)+2}function ID(t,e,n){t[e]=Math.max(Math.min(t[e],n[1]),n[0])}function OD(t,e){!isFinite(t[0])&&(t[0]=e[0]),!isFinite(t[1])&&(t[1]=e[1]),ID(t,0,e),ID(t,1,e),t[0]>t[1]&&(t[0]=t[1])}function LD(t,e){return t>=e[0]&&t<=e[1]}function ED(t,e){return e[1]===e[0]?.5:(t-e[0])/(e[1]-e[0])}function ND(t,e){return t*(e[1]-e[0])+e[0]}var RD=function(t){function e(e){var n=t.call(this,e)||this;n.type="ordinal";var r=n.getSetting("ordinalMeta");return r||(r=new wD({})),X(r)&&(r=new wD({categories:B(r,function(t){return K(t)?t.value:t})})),n._ordinalMeta=r,n._extent=n.getSetting("extent")||[0,r.categories.length-1],n}return i(e,t),e.prototype.parse=function(t){return"string"===typeof t?this._ordinalMeta.getOrdinal(t):Math.round(t)},e.prototype.contain=function(t){return t=this.parse(t),LD(t,this._extent)&&null!=this._ordinalMeta.categories[t]},e.prototype.normalize=function(t){return t=this._getTickNumber(this.parse(t)),ED(t,this._extent)},e.prototype.scale=function(t){return t=Math.round(ND(t,this._extent)),this.getRawOrdinalNumber(t)},e.prototype.getTicks=function(){var t=[],e=this._extent,n=e[0];while(n<=e[1])t.push({value:n}),n++;return t},e.prototype.getMinorTicks=function(t){},e.prototype.setSortInfo=function(t){if(null!=t){for(var e=t.ordinalNumbers,n=this._ordinalNumbersByTick=[],r=this._ticksByOrdinalNumber=[],o=0,i=this._ordinalMeta.categories.length,a=Math.min(i,e.length);o<a;++o){var u=e[o];n[o]=u,r[u]=o}for(var s=0;o<i;++o){while(null!=r[s])s++;n.push(s),r[s]=o}}else this._ordinalNumbersByTick=this._ticksByOrdinalNumber=null},e.prototype._getTickNumber=function(t){var e=this._ticksByOrdinalNumber;return e&&t>=0&&t<e.length?e[t]:t},e.prototype.getRawOrdinalNumber=function(t){var e=this._ordinalNumbersByTick;return e&&t>=0&&t<e.length?e[t]:t},e.prototype.getLabel=function(t){if(!this.isBlank()){var e=this.getRawOrdinalNumber(t.value),n=this._ordinalMeta.categories[e];return null==n?"":n+""}},e.prototype.count=function(){return this._extent[1]-this._extent[0]+1},e.prototype.unionExtentFromData=function(t,e){this.unionExtent(t.getApproximateExtent(e))},e.prototype.isInExtentRange=function(t){return t=this._getTickNumber(t),this._extent[0]<=t&&this._extent[1]>=t},e.prototype.getOrdinalMeta=function(){return this._ordinalMeta},e.prototype.niceTicks=function(){},e.prototype.niceExtent=function(){},e.type="ordinal",e}(TD);TD.registerClass(RD);var PD=RD,zD=Po,BD=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type="interval",e._interval=0,e._intervalPrecision=2,e}return i(e,t),e.prototype.parse=function(t){return t},e.prototype.contain=function(t){return LD(t,this._extent)},e.prototype.normalize=function(t){return ED(t,this._extent)},e.prototype.scale=function(t){return ND(t,this._extent)},e.prototype.setExtent=function(t,e){var n=this._extent;isNaN(t)||(n[0]=parseFloat(t)),isNaN(e)||(n[1]=parseFloat(e))},e.prototype.unionExtent=function(t){var e=this._extent;t[0]<e[0]&&(e[0]=t[0]),t[1]>e[1]&&(e[1]=t[1]),this.setExtent(e[0],e[1])},e.prototype.getInterval=function(){return this._interval},e.prototype.setInterval=function(t){this._interval=t,this._niceExtent=this._extent.slice(),this._intervalPrecision=AD(t)},e.prototype.getTicks=function(t){var e=this._interval,n=this._extent,r=this._niceExtent,o=this._intervalPrecision,i=[];if(!e)return i;var a=1e4;n[0]<r[0]&&(t?i.push({value:zD(r[0]-e,o)}):i.push({value:n[0]}));var u=r[0];while(u<=r[1]){if(i.push({value:u}),u=zD(u+e,o),u===i[i.length-1].value)break;if(i.length>a)return[]}var s=i.length?i[i.length-1].value:r[1];return n[1]>s&&(t?i.push({value:zD(s+e,o)}):i.push({value:n[1]})),i},e.prototype.getMinorTicks=function(t){for(var e=this.getTicks(!0),n=[],r=this.getExtent(),o=1;o<e.length;o++){var i=e[o],a=e[o-1],u=0,s=[],l=i.value-a.value,c=l/t;while(u<t-1){var f=zD(a.value+(u+1)*c);f>r[0]&&f<r[1]&&s.push(f),u++}n.push(s)}return n},e.prototype.getLabel=function(t,e){if(null==t)return"";var n=e&&e.precision;null==n?n=Bo(t.value)||0:"auto"===n&&(n=this._intervalPrecision);var r=zD(t.value,n,!0);return Uh(r)},e.prototype.niceTicks=function(t,e,n){t=t||5;var r=this._extent,o=r[1]-r[0];if(isFinite(o)){o<0&&(o=-o,r.reverse());var i=DD(r,t,e,n);this._intervalPrecision=i.intervalPrecision,this._interval=i.interval,this._niceExtent=i.niceTickExtent}},e.prototype.niceExtent=function(t){var e=this._extent;if(e[0]===e[1])if(0!==e[0]){var n=e[0];t.fixMax?e[0]-=n/2:(e[1]+=n/2,e[0]-=n/2)}else e[1]=1;var r=e[1]-e[0];isFinite(r)||(e[0]=0,e[1]=1),this.niceTicks(t.splitNumber,t.minInterval,t.maxInterval);var o=this._interval;t.fixMin||(e[0]=zD(Math.floor(e[0]/o)*o)),t.fixMax||(e[1]=zD(Math.ceil(e[1]/o)*o))},e.type="interval",e}(TD);TD.registerClass(BD);var VD=BD,HD=function(t,e,n,r){while(n<r){var o=n+r>>>1;t[o][1]<e?n=o+1:r=o}return n},FD=function(t){function e(e){var n=t.call(this,e)||this;return n.type="time",n}return i(e,t),e.prototype.getLabel=function(t){var e=this.getSetting("useUTC");return Mh(t.value,yh[Ch(_h(this._minLevelUnit))]||yh.second,e,this.getSetting("locale"))},e.prototype.getFormattedLabel=function(t,e,n){var r=this.getSetting("useUTC"),o=this.getSetting("locale");return Th(t,e,n,o,r)},e.prototype.getTicks=function(t){var e=this._interval,n=this._extent,r=[];if(!e)return r;r.push({value:n[0],level:0});var o=this.getSetting("useUTC"),i=$D(this._minLevelUnit,this._approxInterval,o,n);return r=r.concat(i),r.push({value:n[1],level:0}),r},e.prototype.niceExtent=function(t){var e=this._extent;if(e[0]===e[1]&&(e[0]-=ph,e[1]+=ph),e[1]===-1/0&&e[0]===1/0){var n=new Date;e[1]=+new Date(n.getFullYear(),n.getMonth(),n.getDate()),e[0]=e[1]-ph}this.niceTicks(t.splitNumber,t.minInterval,t.maxInterval)},e.prototype.niceTicks=function(t,e,n){t=t||10;var r=this._extent,o=r[1]-r[0];this._approxInterval=o/t,null!=e&&this._approxInterval<e&&(this._approxInterval=e),null!=n&&this._approxInterval>n&&(this._approxInterval=n);var i=WD.length,a=Math.min(HD(WD,this._approxInterval,0,i),i-1);this._interval=WD[a][1],this._minLevelUnit=WD[Math.max(a-1,0)][0]},e.prototype.parse=function(t){return"number"===typeof t?t:+Yo(t)},e.prototype.contain=function(t){return LD(this.parse(t),this._extent)},e.prototype.normalize=function(t){return ED(this.parse(t),this._extent)},e.prototype.scale=function(t){return ND(t,this._extent)},e.type="time",e}(VD),WD=[["second",fh],["minute",dh],["hour",hh],["quarter-day",6*hh],["half-day",12*hh],["day",1.2*ph],["half-week",3.5*ph],["week",7*ph],["month",31*ph],["quarter",95*ph],["half-year",gh/2],["year",gh]];function UD(t,e,n,r){var o=Yo(e),i=Yo(n),a=function(t){return Dh(o,t,r)===Dh(i,t,r)},u=function(){return a("year")},s=function(){return u()&&a("month")},l=function(){return s()&&a("day")},c=function(){return l()&&a("hour")},f=function(){return c()&&a("minute")},d=function(){return f()&&a("second")},h=function(){return d()&&a("millisecond")};switch(t){case"year":return u();case"month":return s();case"day":return l();case"hour":return c();case"minute":return f();case"second":return d();case"millisecond":return h()}}function GD(t,e){return t/=ph,t>16?16:t>7.5?7:t>3.5?4:t>1.5?2:1}function jD(t){var e=30*ph;return t/=e,t>6?6:t>3?3:t>2?2:1}function XD(t){return t/=hh,t>12?12:t>6?6:t>3.5?4:t>2?2:1}function YD(t,e){return t/=e?dh:fh,t>30?30:t>20?20:t>15?15:t>10?10:t>5?5:t>2?2:1}function qD(t){return $o(t,!0)}function ZD(t,e,n){var r=new Date(t);switch(_h(e)){case"year":case"month":r[zh(n)](0);case"day":r[Bh(n)](1);case"hour":r[Vh(n)](0);case"minute":r[Hh(n)](0);case"second":r[Fh(n)](0),r[Wh(n)](0)}return r.getTime()}function $D(t,e,n,r){var o=1e4,i=xh,a=0;function u(t,e,n,o,i,a,u){var s=new Date(e),l=e,c=s[o]();while(l<n&&l<=r[1])u.push({value:l}),c+=t,s[i](c),l=s.getTime();u.push({value:l,notAdd:!0})}function s(t,o,i){var a=[],s=!o.length;if(!UD(_h(t),r[0],r[1],n)){s&&(o=[{value:ZD(new Date(r[0]),t,n)},{value:r[1]}]);for(var l=0;l<o.length-1;l++){var c=o[l].value,f=o[l+1].value;if(c!==f){var d=void 0,h=void 0,p=void 0,g=!1;switch(t){case"year":d=Math.max(1,Math.round(e/ph/365)),h=Ah(n),p=Ph(n);break;case"half-year":case"quarter":case"month":d=jD(e),h=Ih(n),p=zh(n);break;case"week":case"half-week":case"day":d=GD(e,31),h=Oh(n),p=Bh(n),g=!0;break;case"half-day":case"quarter-day":case"hour":d=XD(e),h=Lh(n),p=Vh(n);break;case"minute":d=YD(e,!0),h=Eh(n),p=Hh(n);break;case"second":d=YD(e,!1),h=Nh(n),p=Fh(n);break;case"millisecond":d=qD(e),h=Rh(n),p=Wh(n);break}u(d,c,f,h,p,g,a),"year"===t&&i.length>1&&0===l&&i.unshift({value:i[0].value-d})}}for(l=0;l<a.length;l++)i.push(a[l]);return a}}for(var l=[],c=[],f=0,d=0,h=0;h<i.length&&a++<o;++h){var p=_h(i[h]);if(Sh(i[h])){s(i[h],l[l.length-1]||[],c);var g=i[h+1]?_h(i[h+1]):null;if(p!==g){if(c.length){d=f,c.sort(function(t,e){return t.value-e.value});for(var m=[],v=0;v<c.length;++v){var y=c[v].value;0!==v&&c[v-1].value===y||(m.push(c[v]),y>=r[0]&&y<=r[1]&&f++)}var b=(r[1]-r[0])/e;if(f>1.5*b&&d>b/1.5)break;if(l.push(m),f>b||t===i[h])break}c=[]}}}var x=H(B(l,function(t){return H(t,function(t){return t.value>=r[0]&&t.value<=r[1]&&!t.notAdd})}),function(t){return t.length>0}),w=[],_=x.length-1;for(h=0;h<x.length;++h)for(var S=x[h],C=0;C<S.length;++C)w.push({value:S[C].value,level:_-h});w.sort(function(t,e){return t.value-e.value});var M=[];for(h=0;h<w.length;++h)0!==h&&w[h].value===w[h-1].value||M.push(w[h]);return M}TD.registerClass(FD);var KD=FD,JD=TD.prototype,QD=VD.prototype,tA=Po,eA=Math.floor,nA=Math.ceil,rA=Math.pow,oA=Math.log,iA=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type="log",e.base=10,e._originalScale=new VD,e._interval=0,e}return i(e,t),e.prototype.getTicks=function(t){var e=this._originalScale,n=this._extent,r=e.getExtent(),o=QD.getTicks.call(this,t);return B(o,function(t){var e=t.value,o=Po(rA(this.base,e));return o=e===n[0]&&this._fixMin?uA(o,r[0]):o,o=e===n[1]&&this._fixMax?uA(o,r[1]):o,{value:o}},this)},e.prototype.setExtent=function(t,e){var n=this.base;t=oA(t)/oA(n),e=oA(e)/oA(n),QD.setExtent.call(this,t,e)},e.prototype.getExtent=function(){var t=this.base,e=JD.getExtent.call(this);e[0]=rA(t,e[0]),e[1]=rA(t,e[1]);var n=this._originalScale,r=n.getExtent();return this._fixMin&&(e[0]=uA(e[0],r[0])),this._fixMax&&(e[1]=uA(e[1],r[1])),e},e.prototype.unionExtent=function(t){this._originalScale.unionExtent(t);var e=this.base;t[0]=oA(t[0])/oA(e),t[1]=oA(t[1])/oA(e),JD.unionExtent.call(this,t)},e.prototype.unionExtentFromData=function(t,e){this.unionExtent(t.getApproximateExtent(e))},e.prototype.niceTicks=function(t){t=t||10;var e=this._extent,n=e[1]-e[0];if(!(n===1/0||n<=0)){var r=qo(n),o=t/n*r;o<=.5&&(r*=10);while(!isNaN(r)&&Math.abs(r)<1&&Math.abs(r)>0)r*=10;var i=[Po(nA(e[0]/r)*r),Po(eA(e[1]/r)*r)];this._interval=r,this._niceExtent=i}},e.prototype.niceExtent=function(t){QD.niceExtent.call(this,t),this._fixMin=t.fixMin,this._fixMax=t.fixMax},e.prototype.parse=function(t){return t},e.prototype.contain=function(t){return t=oA(t)/oA(this.base),LD(t,this._extent)},e.prototype.normalize=function(t){return t=oA(t)/oA(this.base),ED(t,this._extent)},e.prototype.scale=function(t){return t=ND(t,this._extent),rA(this.base,t)},e.type="log",e}(TD),aA=iA.prototype;function uA(t,e){return tA(t,Bo(e))}aA.getMinorTicks=QD.getMinorTicks,aA.getLabel=QD.getLabel,TD.registerClass(iA);var sA=iA,lA=function(){function t(t,e,n){this._prepareParams(t,e,n)}return t.prototype._prepareParams=function(t,e,n){n[1]<n[0]&&(n=[NaN,NaN]),this._dataMin=n[0],this._dataMax=n[1];var r=this._isOrdinal="ordinal"===t.type;this._needCrossZero=e.getNeedCrossZero&&e.getNeedCrossZero();var o=this._modelMinRaw=e.get("min",!0);Y(o)?this._modelMinNum=hA(t,o({min:n[0],max:n[1]})):"dataMin"!==o&&(this._modelMinNum=hA(t,o));var i=this._modelMaxRaw=e.get("max",!0);if(Y(i)?this._modelMaxNum=hA(t,i({min:n[0],max:n[1]})):"dataMax"!==i&&(this._modelMaxNum=hA(t,i)),r)this._axisDataLen=e.getCategories().length;else{var a=e.get("boundaryGap"),u=X(a)?a:[a||0,a||0];"boolean"===typeof u[0]||"boolean"===typeof u[1]?this._boundaryGapInner=[0,0]:this._boundaryGapInner=[ao(u[0],1),ao(u[1],1)]}},t.prototype.calculate=function(){var t=this._isOrdinal,e=this._dataMin,n=this._dataMax,r=this._axisDataLen,o=this._boundaryGapInner,i=t?null:n-e||Math.abs(e),a="dataMin"===this._modelMinRaw?e:this._modelMinNum,u="dataMax"===this._modelMaxRaw?n:this._modelMaxNum,s=null!=a,l=null!=u;null==a&&(a=t?r?0:NaN:e-o[0]*i),null==u&&(u=t?r?r-1:NaN:n+o[1]*i),(null==a||!isFinite(a))&&(a=NaN),(null==u||!isFinite(u))&&(u=NaN),a>u&&(a=NaN,u=NaN);var c=ot(a)||ot(u)||t&&!r;this._needCrossZero&&(a>0&&u>0&&!s&&(a=0),a<0&&u<0&&!l&&(u=0));var f=this._determinedMin,d=this._determinedMax;return null!=f&&(a=f,s=!0),null!=d&&(u=d,l=!0),{min:a,max:u,minFixed:s,maxFixed:l,isBlank:c}},t.prototype.modifyDataMinMax=function(t,e){this[fA[t]]=e},t.prototype.setDeterminedMinMax=function(t,e){var n=cA[t];this[n]=e},t.prototype.freeze=function(){this.frozen=!0},t}(),cA={min:"_determinedMin",max:"_determinedMax"},fA={min:"_dataMin",max:"_dataMax"};function dA(t,e,n){var r=t.rawExtentInfo;return r||(r=new lA(t,e,n),t.rawExtentInfo=r,r)}function hA(t,e){return null==e?null:ot(e)?NaN:t.parse(e)}function pA(t,e){var n=t.type,r=dA(t,e,t.getExtent()).calculate();t.setBlank(r.isBlank);var o=r.min,i=r.max,a=e.ecModel;if(a&&"time"===n){var u=YT("bar",a),s=!1;if(z(u,function(t){s=s||t.getBaseAxis()===e.axis}),s){var l=ZT(u),c=gA(o,i,e,l);o=c.min,i=c.max}}return{extent:[o,i],fixMin:r.minFixed,fixMax:r.maxFixed}}function gA(t,e,n,r){var o=n.axis.getExtent(),i=o[1]-o[0],a=KT(r,n.axis);if(void 0===a)return{min:t,max:e};var u=1/0;z(a,function(t){u=Math.min(t.offset,u)});var s=-1/0;z(a,function(t){s=Math.max(t.offset+t.width,s)}),u=Math.abs(u),s=Math.abs(s);var l=u+s,c=e-t,f=1-(u+s)/i,d=c/f-c;return e+=d*(s/l),t-=d*(u/l),{min:t,max:e}}function mA(t,e){var n=pA(t,e),r=n.extent,o=e.get("splitNumber");t instanceof sA&&(t.base=e.get("logBase"));var i=t.type;t.setExtent(r[0],r[1]),t.niceExtent({splitNumber:o,fixMin:n.fixMin,fixMax:n.fixMax,minInterval:"interval"===i||"time"===i?e.get("minInterval"):null,maxInterval:"interval"===i||"time"===i?e.get("maxInterval"):null});var a=e.get("interval");null!=a&&t.setInterval&&t.setInterval(a)}function vA(t,e){if(e=e||t.get("type"),e)switch(e){case"category":return new PD({ordinalMeta:t.getOrdinalMeta?t.getOrdinalMeta():t.getCategories(),extent:[1/0,-1/0]});case"time":return new KD({locale:t.ecModel.getLocaleModel(),useUTC:t.ecModel.get("useUTC")});default:return new(TD.getClass(e)||VD)}}function yA(t){var e=t.scale.getExtent(),n=e[0],r=e[1];return!(n>0&&r>0||n<0&&r<0)}function bA(t){var e=t.getLabelModel().get("formatter"),n="category"===t.type?t.scale.getExtent()[0]:null;return"time"===t.scale.type?function(e){return function(n,r){return t.scale.getFormattedLabel(n,r,e)}}(e):"string"===typeof e?function(e){return function(n){var r=t.scale.getLabel(n),o=e.replace("{value}",null!=r?r:"");return o}}(e):"function"===typeof e?function(e){return function(r,o){return null!=n&&(o=r.value-n),e(xA(t,r),o,null!=r.level?{level:r.level}:null)}}(e):function(e){return t.scale.getLabel(e)}}function xA(t,e){return"category"===t.type?t.scale.getLabel(e):e.value}function wA(t){var e=t.model,n=t.scale;if(e.get(["axisLabel","show"])&&!n.isBlank()){var r,o,i=n.getExtent();n instanceof PD?o=n.count():(r=n.getTicks(),o=r.length);var a,u=t.getLabelModel(),s=bA(t),l=1;o>40&&(l=Math.ceil(o/40));for(var c=0;c<o;c+=l){var f=r?r[c]:{value:i[0]+c},d=s(f,c),h=u.getTextRect(d),p=_A(h,u.get("rotate")||0);a?a.union(p):a=p}return a}}function _A(t,e){var n=e*Math.PI/180,r=t.width,o=t.height,i=r*Math.abs(Math.cos(n))+Math.abs(o*Math.sin(n)),a=r*Math.abs(Math.sin(n))+Math.abs(o*Math.cos(n)),u=new Zr(t.x,t.y,i,a);return u}function SA(t){var e=t.get("interval");return null==e?"auto":e}function CA(t){return"category"===t.type&&0===SA(t.getLabelModel())}function MA(t,e){var n={};return z(t.mapDimensionsAll(e),function(e){n[PM(t,e)]=!0}),W(n)}function TA(t,e,n){e&&z(MA(e,n),function(n){var r=e.getApproximateExtent(n);r[0]<t[0]&&(t[0]=r[0]),r[1]>t[1]&&(t[1]=r[1])})}var kA=function(){function t(t){this.type="cartesian",this._dimList=[],this._axes={},this.name=t||""}return t.prototype.getAxis=function(t){return this._axes[t]},t.prototype.getAxes=function(){return B(this._dimList,function(t){return this._axes[t]},this)},t.prototype.getAxesByScale=function(t){return t=t.toLowerCase(),H(this.getAxes(),function(e){return e.scale.type===t})},t.prototype.addAxis=function(t){var e=t.dim;this._axes[e]=t,this._dimList.push(e)},t}(),DA=kA,AA=["x","y"];function IA(t){return"interval"===t.type||"time"===t.type}var OA=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type="cartesian2d",e.dimensions=AA,e}return i(e,t),e.prototype.calcAffineTransform=function(){this._transform=this._invTransform=null;var t=this.getAxis("x").scale,e=this.getAxis("y").scale;if(IA(t)&&IA(e)){var n=t.getExtent(),r=e.getExtent(),o=this.dataToPoint([n[0],r[0]]),i=this.dataToPoint([n[1],r[1]]),a=n[1]-n[0],u=r[1]-r[0];if(a&&u){var s=(i[0]-o[0])/a,l=(i[1]-o[1])/u,c=o[0]-n[0]*s,f=o[1]-r[0]*l,d=this._transform=[s,0,0,l,c,f];this._invTransform=Mr([],d)}}},e.prototype.getBaseAxis=function(){return this.getAxesByScale("ordinal")[0]||this.getAxesByScale("time")[0]||this.getAxis("x")},e.prototype.containPoint=function(t){var e=this.getAxis("x"),n=this.getAxis("y");return e.contain(e.toLocalCoord(t[0]))&&n.contain(n.toLocalCoord(t[1]))},e.prototype.containData=function(t){return this.getAxis("x").containData(t[0])&&this.getAxis("y").containData(t[1])},e.prototype.dataToPoint=function(t,e,n){n=n||[];var r=t[0],o=t[1];if(this._transform&&null!=r&&isFinite(r)&&null!=o&&isFinite(o))return zt(n,t,this._transform);var i=this.getAxis("x"),a=this.getAxis("y");return n[0]=i.toGlobalCoord(i.dataToCoord(r,e)),n[1]=a.toGlobalCoord(a.dataToCoord(o,e)),n},e.prototype.clampData=function(t,e){var n=this.getAxis("x").scale,r=this.getAxis("y").scale,o=n.getExtent(),i=r.getExtent(),a=n.parse(t[0]),u=r.parse(t[1]);return e=e||[],e[0]=Math.min(Math.max(Math.min(o[0],o[1]),a),Math.max(o[0],o[1])),e[1]=Math.min(Math.max(Math.min(i[0],i[1]),u),Math.max(i[0],i[1])),e},e.prototype.pointToData=function(t,e){var n=[];if(this._invTransform)return zt(n,t,this._invTransform);var r=this.getAxis("x"),o=this.getAxis("y");return n[0]=r.coordToData(r.toLocalCoord(t[0]),e),n[1]=o.coordToData(o.toLocalCoord(t[1]),e),n},e.prototype.getOtherAxis=function(t){return this.getAxis("x"===t.dim?"y":"x")},e.prototype.getArea=function(){var t=this.getAxis("x").getGlobalExtent(),e=this.getAxis("y").getGlobalExtent(),n=Math.min(t[0],t[1]),r=Math.min(e[0],e[1]),o=Math.max(t[0],t[1])-n,i=Math.max(e[0],e[1])-r;return new Zr(n,r,o,i)},e}(DA),LA=OA,EA=Di();function NA(t){return"category"===t.type?PA(t):VA(t)}function RA(t,e){return"category"===t.type?BA(t,e):{ticks:B(t.scale.getTicks(),function(t){return t.value})}}function PA(t){var e=t.getLabelModel(),n=zA(t,e);return!e.get("show")||t.scale.isBlank()?{labels:[],labelCategoryInterval:n.labelCategoryInterval}:n}function zA(t,e){var n,r,o=HA(t,"labels"),i=SA(e),a=FA(o,i);return a||(Y(i)?n=YA(t,i):(r="auto"===i?UA(t):i,n=XA(t,r)),WA(o,i,{labels:n,labelCategoryInterval:r}))}function BA(t,e){var n,r,o=HA(t,"ticks"),i=SA(e),a=FA(o,i);if(a)return a;if(e.get("show")&&!t.scale.isBlank()||(n=[]),Y(i))n=YA(t,i,!0);else if("auto"===i){var u=zA(t,t.getLabelModel());r=u.labelCategoryInterval,n=B(u.labels,function(t){return t.tickValue})}else r=i,n=XA(t,r,!0);return WA(o,i,{ticks:n,tickCategoryInterval:r})}function VA(t){var e=t.scale.getTicks(),n=bA(t);return{labels:B(e,function(e,r){return{formattedLabel:n(e,r),rawLabel:t.scale.getLabel(e),tickValue:e.value}})}}function HA(t,e){return EA(t)[e]||(EA(t)[e]=[])}function FA(t,e){for(var n=0;n<t.length;n++)if(t[n].key===e)return t[n].value}function WA(t,e,n){return t.push({key:e,value:n}),n}function UA(t){var e=EA(t).autoInterval;return null!=e?e:EA(t).autoInterval=t.calculateCategoryInterval()}function GA(t){var e=jA(t),n=bA(t),r=(e.axisRotate-e.labelRotate)/180*Math.PI,o=t.scale,i=o.getExtent(),a=o.count();if(i[1]-i[0]<1)return 0;var u=1;a>40&&(u=Math.max(1,Math.floor(a/40)));for(var s=i[0],l=t.dataToCoord(s+1)-t.dataToCoord(s),c=Math.abs(l*Math.cos(r)),f=Math.abs(l*Math.sin(r)),d=0,h=0;s<=i[1];s+=u){var p=0,g=0,m=no(n({value:s}),e.font,"center","top");p=1.3*m.width,g=1.3*m.height,d=Math.max(d,p,7),h=Math.max(h,g,7)}var v=d/c,y=h/f;isNaN(v)&&(v=1/0),isNaN(y)&&(y=1/0);var b=Math.max(0,Math.floor(Math.min(v,y))),x=EA(t.model),w=t.getExtent(),_=x.lastAutoInterval,S=x.lastTickCount;return null!=_&&null!=S&&Math.abs(_-b)<=1&&Math.abs(S-a)<=1&&_>b&&x.axisExtent0===w[0]&&x.axisExtent1===w[1]?b=_:(x.lastTickCount=a,x.lastAutoInterval=b,x.axisExtent0=w[0],x.axisExtent1=w[1]),b}function jA(t){var e=t.getLabelModel();return{axisRotate:t.getRotate?t.getRotate():t.isHorizontal&&!t.isHorizontal()?90:0,labelRotate:e.get("rotate")||0,font:e.getFont()}}function XA(t,e,n){var r=bA(t),o=t.scale,i=o.getExtent(),a=t.getLabelModel(),u=[],s=Math.max((e||0)+1,1),l=i[0],c=o.count();0!==l&&s>1&&c/s>2&&(l=Math.round(Math.ceil(l/s)*s));var f=CA(t),d=a.get("showMinLabel")||f,h=a.get("showMaxLabel")||f;d&&l!==i[0]&&g(i[0]);for(var p=l;p<=i[1];p+=s)g(p);function g(t){var e={value:t};u.push(n?t:{formattedLabel:r(e),rawLabel:o.getLabel(e),tickValue:t})}return h&&p-s!==i[1]&&g(i[1]),u}function YA(t,e,n){var r=t.scale,o=bA(t),i=[];return z(r.getTicks(),function(t){var a=r.getLabel(t),u=t.value;e(t.value,a)&&i.push(n?u:{formattedLabel:o(t),rawLabel:a,tickValue:u})}),i}var qA=[0,1],ZA=function(){function t(t,e,n){this.onBand=!1,this.inverse=!1,this.dim=t,this.scale=e,this._extent=n||[0,0]}return t.prototype.contain=function(t){var e=this._extent,n=Math.min(e[0],e[1]),r=Math.max(e[0],e[1]);return t>=n&&t<=r},t.prototype.containData=function(t){return this.scale.contain(t)},t.prototype.getExtent=function(){return this._extent.slice()},t.prototype.getPixelPrecision=function(t){return Ho(t||this.scale.getExtent(),this._extent)},t.prototype.setExtent=function(t,e){var n=this._extent;n[0]=t,n[1]=e},t.prototype.dataToCoord=function(t,e){var n=this._extent,r=this.scale;return t=r.normalize(t),this.onBand&&"ordinal"===r.type&&(n=n.slice(),$A(n,r.count())),No(t,qA,n,e)},t.prototype.coordToData=function(t,e){var n=this._extent,r=this.scale;this.onBand&&"ordinal"===r.type&&(n=n.slice(),$A(n,r.count()));var o=No(t,n,qA,e);return this.scale.scale(o)},t.prototype.pointToData=function(t,e){},t.prototype.getTicksCoords=function(t){t=t||{};var e=t.tickModel||this.getTickModel(),n=RA(this,e),r=n.ticks,o=B(r,function(t){return{coord:this.dataToCoord("ordinal"===this.scale.type?this.scale.getRawOrdinalNumber(t):t),tickValue:t}},this),i=e.get("alignWithLabel");return KA(this,o,i,t.clamp),o},t.prototype.getMinorTicksCoords=function(){if("ordinal"===this.scale.type)return[];var t=this.model.getModel("minorTick"),e=t.get("splitNumber");e>0&&e<100||(e=5);var n=this.scale.getMinorTicks(e),r=B(n,function(t){return B(t,function(t){return{coord:this.dataToCoord(t),tickValue:t}},this)},this);return r},t.prototype.getViewLabels=function(){return NA(this).labels},t.prototype.getLabelModel=function(){return this.model.getModel("axisLabel")},t.prototype.getTickModel=function(){return this.model.getModel("axisTick")},t.prototype.getBandWidth=function(){var t=this._extent,e=this.scale.getExtent(),n=e[1]-e[0]+(this.onBand?1:0);0===n&&(n=1);var r=Math.abs(t[1]-t[0]);return Math.abs(r)/n},t.prototype.calculateCategoryInterval=function(){return GA(this)},t}();function $A(t,e){var n=t[1]-t[0],r=e,o=n/r/2;t[0]+=o,t[1]-=o}function KA(t,e,n,r){var o=e.length;if(t.onBand&&!n&&o){var i,a,u=t.getExtent();if(1===o)e[0].coord=u[0],i=e[1]={coord:u[0]};else{var s=e[o-1].tickValue-e[0].tickValue,l=(e[o-1].coord-e[0].coord)/s;z(e,function(t){t.coord-=l/2});var c=t.scale.getExtent();a=1+c[1]-e[o-1].tickValue,i={coord:e[o-1].coord+l*a},e.push(i)}var f=u[0]>u[1];d(e[0].coord,u[0])&&(r?e[0].coord=u[0]:e.shift()),r&&d(u[0],e[0].coord)&&e.unshift({coord:u[0]}),d(u[1],i.coord)&&(r?i.coord=u[1]:e.pop()),r&&d(i.coord,u[1])&&e.push({coord:u[1]})}function d(t,e){return t=Po(t),e=Po(e),f?t>e:t<e}}var JA=ZA,QA=function(t){function e(e,n,r,o,i){var a=t.call(this,e,n,r)||this;return a.index=0,a.type=o||"value",a.position=i||"bottom",a}return i(e,t),e.prototype.isHorizontal=function(){var t=this.position;return"top"===t||"bottom"===t},e.prototype.getGlobalExtent=function(t){var e=this.getExtent();return e[0]=this.toGlobalCoord(e[0]),e[1]=this.toGlobalCoord(e[1]),t&&e[0]>e[1]&&e.reverse(),e},e.prototype.pointToData=function(t,e){return this.coordToData(this.toLocalCoord(t["x"===this.dim?0:1]),e)},e.prototype.setCategorySortInfo=function(t){if("category"!==this.type)return!1;this.model.option.categorySortInfo=t,this.scale.setSortInfo(t)},e}(JA),tI=QA;function eI(t,e,n){n=n||{};var r=t.coordinateSystem,o=e.axis,i={},a=o.getAxesOnZeroOf()[0],u=o.position,s=a?"onZero":u,l=o.dim,c=r.getRect(),f=[c.x,c.x+c.width,c.y,c.y+c.height],d={left:0,right:1,top:0,bottom:1,onZero:2},h=e.get("offset")||0,p="x"===l?[f[2]-h,f[3]+h]:[f[0]-h,f[1]+h];if(a){var g=a.toGlobalCoord(a.dataToCoord(0));p[d.onZero]=Math.max(Math.min(g,p[1]),p[0])}i.position=["y"===l?p[d[s]]:f[0],"x"===l?p[d[s]]:f[3]],i.rotation=Math.PI/2*("x"===l?0:1);var m={top:-1,bottom:1,left:-1,right:1};i.labelDirection=i.tickDirection=i.nameDirection=m[u],i.labelOffset=a?p[d[u]]-p[d.onZero]:0,e.get(["axisTick","inside"])&&(i.tickDirection=-i.tickDirection),it(n.labelInside,e.get(["axisLabel","inside"]))&&(i.labelDirection=-i.labelDirection);var v=e.get(["axisLabel","rotate"]);return i.labelRotate="top"===s?-v:v,i.z2=1,i}function nI(t){return"cartesian2d"===t.get("coordinateSystem")}function rI(t){var e={xAxisModel:null,yAxisModel:null};return z(e,function(n,r){var o=r.replace(/Model$/,""),i=t.getReferringComponents(o,Li).models[0];e[r]=i}),e}var oI=function(){function t(t,e,n){this.type="grid",this._coordsMap={},this._coordsList=[],this._axesMap={},this._axesList=[],this.axisPointerEnabled=!0,this.dimensions=AA,this._initCartesian(t,e,n),this.model=t}return t.prototype.getRect=function(){return this._rect},t.prototype.update=function(t,e){var n=this._axesMap;this._updateScale(t,this.model),z(n.x,function(t){mA(t.scale,t.model)}),z(n.y,function(t){mA(t.scale,t.model)});var r={};z(n.x,function(t){aI(n,"y",t,r)}),z(n.y,function(t){aI(n,"x",t,r)}),this.resize(this.model,e)},t.prototype.resize=function(t,e,n){var r=t.getBoxLayoutParams(),o=!n&&t.get("containLabel"),i=lp(r,{width:e.getWidth(),height:e.getHeight()});this._rect=i;var a=this._axesList;function u(){z(a,function(t){var e=t.isHorizontal(),n=e?[0,i.width]:[0,i.height],r=t.inverse?1:0;t.setExtent(n[r],n[1-r]),sI(t,e?i.x:i.y)})}u(),o&&(z(a,function(t){if(!t.model.get(["axisLabel","inside"])){var e=wA(t);if(e){var n=t.isHorizontal()?"height":"width",r=t.model.get(["axisLabel","margin"]);i[n]-=e[n]+r,"top"===t.position?i.y+=e.height+r:"left"===t.position&&(i.x+=e.width+r)}}}),u()),z(this._coordsList,function(t){t.calcAffineTransform()})},t.prototype.getAxis=function(t,e){var n=this._axesMap[t];if(null!=n)return n[e||0]},t.prototype.getAxes=function(){return this._axesList.slice()},t.prototype.getCartesian=function(t,e){if(null!=t&&null!=e){var n="x"+t+"y"+e;return this._coordsMap[n]}K(t)&&(e=t.yAxisIndex,t=t.xAxisIndex);for(var r=0,o=this._coordsList;r<o.length;r++)if(o[r].getAxis("x").index===t||o[r].getAxis("y").index===e)return o[r]},t.prototype.getCartesians=function(){return this._coordsList.slice()},t.prototype.convertToPixel=function(t,e,n){var r=this._findConvertTarget(e);return r.cartesian?r.cartesian.dataToPoint(n):r.axis?r.axis.toGlobalCoord(r.axis.dataToCoord(n)):null},t.prototype.convertFromPixel=function(t,e,n){var r=this._findConvertTarget(e);return r.cartesian?r.cartesian.pointToData(n):r.axis?r.axis.coordToData(r.axis.toLocalCoord(n)):null},t.prototype._findConvertTarget=function(t){var e,n,r=t.seriesModel,o=t.xAxisModel||r&&r.getReferringComponents("xAxis",Li).models[0],i=t.yAxisModel||r&&r.getReferringComponents("yAxis",Li).models[0],a=t.gridModel,u=this._coordsList;if(r)e=r.coordinateSystem,E(u,e)<0&&(e=null);else if(o&&i)e=this.getCartesian(o.componentIndex,i.componentIndex);else if(o)n=this.getAxis("x",o.componentIndex);else if(i)n=this.getAxis("y",i.componentIndex);else if(a){var s=a.coordinateSystem;s===this&&(e=this._coordsList[0])}return{cartesian:e,axis:n}},t.prototype.containPoint=function(t){var e=this._coordsList[0];if(e)return e.containPoint(t)},t.prototype._initCartesian=function(t,e,n){var r=this,o=this,i={left:!1,right:!1,top:!1,bottom:!1},a={x:{},y:{}},u={x:0,y:0};if(e.eachComponent("xAxis",s("x"),this),e.eachComponent("yAxis",s("y"),this),!u.x||!u.y)return this._axesMap={},void(this._axesList=[]);function s(e){return function(n,r){if(iI(n,t)){var s=n.get("position");"x"===e?"top"!==s&&"bottom"!==s&&(s=i.bottom?"top":"bottom"):"left"!==s&&"right"!==s&&(s=i.left?"right":"left"),i[s]=!0;var l=new tI(e,vA(n),[0,0],n.get("type"),s),c="category"===l.type;l.onBand=c&&n.get("boundaryGap"),l.inverse=n.get("inverse"),n.axis=l,l.model=n,l.grid=o,l.index=r,o._axesList.push(l),a[e][r]=l,u[e]++}}}this._axesMap=a,z(a.x,function(e,n){z(a.y,function(o,i){var a="x"+n+"y"+i,u=new LA(a);u.master=r,u.model=t,r._coordsMap[a]=u,r._coordsList.push(u),u.addAxis(e),u.addAxis(o)})})},t.prototype._updateScale=function(t,e){function n(t,e){z(MA(t,e.dim),function(n){e.scale.unionExtentFromData(t,n)})}z(this._axesList,function(t){if(t.scale.setExtent(1/0,-1/0),"category"===t.type){var e=t.model.get("categorySortInfo");t.scale.setSortInfo(e)}}),t.eachSeries(function(t){if(nI(t)){var r=rI(t),o=r.xAxisModel,i=r.yAxisModel;if(!iI(o,e)||!iI(i,e))return;var a=this.getCartesian(o.componentIndex,i.componentIndex),u=t.getData(),s=a.getAxis("x"),l=a.getAxis("y");"list"===u.type&&(n(u,s),n(u,l))}},this)},t.prototype.getTooltipAxes=function(t){var e=[],n=[];return z(this.getCartesians(),function(r){var o=null!=t&&"auto"!==t?r.getAxis(t):r.getBaseAxis(),i=r.getOtherAxis(o);E(e,o)<0&&e.push(o),E(n,i)<0&&n.push(i)}),{baseAxes:e,otherAxes:n}},t.create=function(e,n){var r=[];return e.eachComponent("grid",function(o,i){var a=new t(o,e,n);a.name="grid_"+i,a.resize(o,n,!0),o.coordinateSystem=a,r.push(a)}),e.eachSeries(function(t){if(nI(t)){var e=rI(t),n=e.xAxisModel,r=e.yAxisModel,o=n.getCoordSysModel();0;var i=o.coordinateSystem;t.coordinateSystem=i.getCartesian(n.componentIndex,r.componentIndex)}}),r},t.dimensions=AA,t}();function iI(t,e){return t.getCoordSysModel()===e}function aI(t,e,n,r){n.getAxesOnZeroOf=function(){return o?[o]:[]};var o,i=t[e],a=n.model,u=a.get(["axisLine","onZero"]),s=a.get(["axisLine","onZeroAxisIndex"]);if(u){if(null!=s)uI(i[s])&&(o=i[s]);else for(var l in i)if(i.hasOwnProperty(l)&&uI(i[l])&&!r[c(i[l])]){o=i[l];break}o&&(r[c(o)]=!0)}function c(t){return t.dim+"_"+t.index}}function uI(t){return t&&"category"!==t.type&&"time"!==t.type&&yA(t)}function sI(t,e){var n=t.getExtent(),r=n[0]+n[1];t.toGlobalCoord="x"===t.dim?function(t){return t+e}:function(t){return r-t+e},t.toLocalCoord="x"===t.dim?function(t){return t-e}:function(t){return r-t+e}}var lI=oI,cI=Math.PI,fI=function(){function t(t,e){this.group=new _o,this.opt=e,this.axisModel=t,O(e,{labelOffset:0,nameDirection:1,tickDirection:1,labelDirection:1,silent:!0,handleAutoShown:function(){return!0}});var n=new _o({x:e.position[0],y:e.position[1],rotation:e.rotation});n.updateTransform(),this._transformGroup=n}return t.prototype.hasBuilder=function(t){return!!dI[t]},t.prototype.add=function(t){dI[t](this.opt,this.axisModel,this.group,this._transformGroup)},t.prototype.getGroup=function(){return this.group},t.innerTextLayout=function(t,e,n){var r,o,i=Go(e-t);return jo(i)?(o=n>0?"top":"bottom",r="center"):jo(i-cI)?(o=n>0?"bottom":"top",r="center"):(o="middle",r=i>0&&i<cI?n>0?"right":"left":n>0?"left":"right"),{rotation:i,textAlign:r,textVerticalAlign:o}},t.makeAxisEventDataBase=function(t){var e={componentType:t.mainType,componentIndex:t.componentIndex};return e[t.mainType+"Index"]=t.componentIndex,e},t.isLabelSilent=function(t){var e=t.get("tooltip");return t.get("silent")||!(t.get("triggerEvent")||e&&e.show)},t}(),dI={axisLine:function(t,e,n,r){var o=e.get(["axisLine","show"]);if("auto"===o&&t.handleAutoShown&&(o=t.handleAutoShown("axisLine")),o){var i=e.axis.getExtent(),a=r.transform,u=[i[0],0],s=[i[1],0];a&&(zt(u,u,a),zt(s,s,a));var l=I({lineCap:"round"},e.getModel(["axisLine","lineStyle"]).getLineStyle()),c=new cf({subPixelOptimize:!0,shape:{x1:u[0],y1:u[1],x2:s[0],y2:s[1]},style:l,strokeContainThreshold:t.strokeContainThreshold||5,silent:!0,z2:1});c.anid="line",n.add(c);var f=e.get(["axisLine","symbol"]),d=e.get(["axisLine","symbolSize"]),h=e.get(["axisLine","symbolOffset"])||0;if("number"===typeof h&&(h=[h,h]),null!=f){"string"===typeof f&&(f=[f,f]),"string"!==typeof d&&"number"!==typeof d||(d=[d,d]);var p=d[0],g=d[1];z([{rotate:t.rotation+Math.PI/2,offset:h[0],r:0},{rotate:t.rotation-Math.PI/2,offset:h[1],r:Math.sqrt((u[0]-s[0])*(u[0]-s[0])+(u[1]-s[1])*(u[1]-s[1]))}],function(e,r){if("none"!==f[r]&&null!=f[r]){var o=zb(f[r],-p/2,-g/2,p,g,l.stroke,!0),i=e.r+e.offset;o.attr({rotation:e.rotate,x:u[0]+i*Math.cos(t.rotation),y:u[1]-i*Math.sin(t.rotation),silent:!0,z2:11}),n.add(o)}})}}},axisTickLabel:function(t,e,n,r){var o=bI(n,r,e,t),i=wI(n,r,e,t);pI(e,i,o),xI(n,r,e,t.tickDirection)},axisName:function(t,e,n,r){var o=it(t.axisName,e.get("name"));if(o){var i,a,u=e.get("nameLocation"),s=t.nameDirection,l=e.getModel("nameTextStyle"),c=e.get("nameGap")||0,f=e.axis.getExtent(),d=f[0]>f[1]?-1:1,h=["start"===u?f[0]-d*c:"end"===u?f[1]+d*c:(f[0]+f[1])/2,vI(u)?t.labelOffset+s*c:0],p=e.get("nameRotate");null!=p&&(p=p*cI/180),vI(u)?i=fI.innerTextLayout(t.rotation,null!=p?p:t.rotation,s):(i=hI(t.rotation,u,p||0,f),a=t.axisNameAvailableWidth,null!=a&&(a=Math.abs(a/Math.sin(i.rotation)),!isFinite(a)&&(a=null)));var g=l.getFont(),m=e.get("nameTruncate",!0)||{},v=m.ellipsis,y=it(t.nameTruncateMaxWidth,m.maxWidth,a),b=new Us({x:h[0],y:h[1],rotation:i.rotation,silent:fI.isLabelSilent(e),style:Cd(l,{text:o,font:g,overflow:"truncate",width:y,ellipsis:v,fill:l.getTextColor()||e.get(["axisLine","lineStyle","color"]),align:l.get("align")||i.textAlign,verticalAlign:l.get("verticalAlign")||i.textVerticalAlign}),z2:1});if(yd({el:b,componentModel:e,itemName:o}),b.__fullText=o,b.anid="name",e.get("triggerEvent")){var x=fI.makeAxisEventDataBase(e);x.targetType="axisName",x.name=o,Gs(b).eventData=x}r.add(b),b.updateTransform(),n.add(b),b.decomposeTransform()}}};function hI(t,e,n,r){var o,i,a=Go(n-t),u=r[0]>r[1],s="start"===e&&!u||"start"!==e&&u;return jo(a-cI/2)?(i=s?"bottom":"top",o="center"):jo(a-1.5*cI)?(i=s?"top":"bottom",o="center"):(i="middle",o=a<1.5*cI&&a>cI/2?s?"left":"right":s?"right":"left"),{rotation:a,textAlign:o,textVerticalAlign:i}}function pI(t,e,n){if(!CA(t.axis)){var r=t.get(["axisLabel","showMinLabel"]),o=t.get(["axisLabel","showMaxLabel"]);e=e||[],n=n||[];var i=e[0],a=e[1],u=e[e.length-1],s=e[e.length-2],l=n[0],c=n[1],f=n[n.length-1],d=n[n.length-2];!1===r?(gI(i),gI(l)):mI(i,a)&&(r?(gI(a),gI(c)):(gI(i),gI(l))),!1===o?(gI(u),gI(f)):mI(s,u)&&(o?(gI(s),gI(d)):(gI(u),gI(f)))}}function gI(t){t&&(t.ignore=!0)}function mI(t,e){var n=t&&t.getBoundingRect().clone(),r=e&&e.getBoundingRect().clone();if(n&&r){var o=br([]);return Sr(o,o,-t.rotation),n.applyTransform(wr([],o,t.getLocalTransform())),r.applyTransform(wr([],o,e.getLocalTransform())),n.intersect(r)}}function vI(t){return"middle"===t||"center"===t}function yI(t,e,n,r,o){for(var i=[],a=[],u=[],s=0;s<t.length;s++){var l=t[s].coord;a[0]=l,a[1]=0,u[0]=l,u[1]=n,e&&(zt(a,a,e),zt(u,u,e));var c=new cf({subPixelOptimize:!0,shape:{x1:a[0],y1:a[1],x2:u[0],y2:u[1]},style:r,z2:2,autoBatch:!0,silent:!0});c.anid=o+"_"+t[s].tickValue,i.push(c)}return i}function bI(t,e,n,r){var o=n.axis,i=n.getModel("axisTick"),a=i.get("show");if("auto"===a&&r.handleAutoShown&&(a=r.handleAutoShown("axisTick")),a&&!o.scale.isBlank()){for(var u=i.getModel("lineStyle"),s=r.tickDirection*i.get("length"),l=o.getTicksCoords(),c=yI(l,e.transform,s,O(u.getLineStyle(),{stroke:n.get(["axisLine","lineStyle","color"])}),"ticks"),f=0;f<c.length;f++)t.add(c[f]);return c}}function xI(t,e,n,r){var o=n.axis,i=n.getModel("minorTick");if(i.get("show")&&!o.scale.isBlank()){var a=o.getMinorTicksCoords();if(a.length)for(var u=i.getModel("lineStyle"),s=r*i.get("length"),l=O(u.getLineStyle(),O(n.getModel("axisTick").getLineStyle(),{stroke:n.get(["axisLine","lineStyle","color"])})),c=0;c<a.length;c++)for(var f=yI(a[c],e.transform,s,l,"minorticks_"+c),d=0;d<f.length;d++)t.add(f[d])}}function wI(t,e,n,r){var o=n.axis,i=it(r.axisLabelShow,n.get(["axisLabel","show"]));if(i&&!o.scale.isBlank()){var a=n.getModel("axisLabel"),u=a.get("margin"),s=o.getViewLabels(),l=(it(r.labelRotate,a.get("rotate"))||0)*cI/180,c=fI.innerTextLayout(r.rotation,l,r.labelDirection),f=n.getCategories&&n.getCategories(!0),d=[],h=fI.isLabelSilent(n),p=n.get("triggerEvent");return z(s,function(i,s){var l="ordinal"===o.scale.type?o.scale.getRawOrdinalNumber(i.tickValue):i.tickValue,g=i.formattedLabel,m=i.rawLabel,v=a;if(f&&f[l]){var y=f[l];K(y)&&y.textStyle&&(v=new Yd(y.textStyle,a,n.ecModel))}var b=v.getTextColor()||n.get(["axisLine","lineStyle","color"]),x=o.dataToCoord(l),w=new Us({x:x,y:r.labelOffset+r.labelDirection*u,rotation:c.rotation,silent:h,z2:10,style:Cd(v,{text:g,align:v.getShallow("align",!0)||c.textAlign,verticalAlign:v.getShallow("verticalAlign",!0)||v.getShallow("baseline",!0)||c.textVerticalAlign,fill:"function"===typeof b?b("category"===o.type?m:"value"===o.type?l+"":l,s):b})});if(w.anid="label_"+l,p){var _=fI.makeAxisEventDataBase(n);_.targetType="axisLabel",_.value=m,Gs(w).eventData=_}e.add(w),w.updateTransform(),d.push(w),t.add(w),w.decomposeTransform()}),d}}var _I=fI;function SI(t,e){var n={axesInfo:{},seriesInvolved:!1,coordSysAxesInfo:{},coordSysMap:{}};return CI(n,t,e),n.seriesInvolved&&TI(n,t),n}function CI(t,e,n){var r=e.getComponent("tooltip"),o=e.getComponent("axisPointer"),i=o.get("link",!0)||[],a=[];z(n.getCoordinateSystems(),function(n){if(n.axisPointerEnabled){var u=EI(n.model),s=t.coordSysAxesInfo[u]={};t.coordSysMap[u]=n;var l=n.model,c=l.getModel("tooltip",r);if(z(n.getAxes(),j(p,!1,null)),n.getTooltipAxes&&r&&c.get("show")){var f="axis"===c.get("trigger"),d="cross"===c.get(["axisPointer","type"]),h=n.getTooltipAxes(c.get(["axisPointer","axis"]));(f||d)&&z(h.baseAxes,j(p,!d||"cross",f)),d&&z(h.otherAxes,j(p,"cross",!1))}}function p(r,u,l){var f=l.model.getModel("axisPointer",o),d=f.get("show");if(d&&("auto"!==d||r||LI(f))){null==u&&(u=f.get("triggerTooltip")),f=r?MI(l,c,o,e,r,u):f;var h=f.get("snap"),p=EI(l.model),g=u||h||"category"===l.type,m=t.axesInfo[p]={key:p,axis:l,coordSys:n,axisPointerModel:f,triggerTooltip:u,involveSeries:g,snap:h,useHandle:LI(f),seriesModels:[],linkGroup:null};s[p]=m,t.seriesInvolved=t.seriesInvolved||g;var v=kI(i,l);if(null!=v){var y=a[v]||(a[v]={axesInfo:{}});y.axesInfo[p]=m,y.mapper=i[v].mapper,m.linkGroup=y}}}})}function MI(t,e,n,r,o,i){var a=e.getModel("axisPointer"),u=["type","snap","lineStyle","shadowStyle","label","animation","animationDurationUpdate","animationEasingUpdate","z"],s={};z(u,function(t){s[t]=k(a.get(t))}),s.snap="category"!==t.type&&!!i,"cross"===a.get("type")&&(s.type="line");var l=s.label||(s.label={});if(null==l.show&&(l.show=!1),"cross"===o){var c=a.get(["label","show"]);if(l.show=null==c||c,!i){var f=s.lineStyle=a.get("crossStyle");f&&O(l,f.textStyle)}}return t.model.getModel("axisPointer",new Yd(s,n,r))}function TI(t,e){e.eachSeries(function(e){var n=e.coordinateSystem,r=e.get(["tooltip","trigger"],!0),o=e.get(["tooltip","show"],!0);n&&"none"!==r&&!1!==r&&"item"!==r&&!1!==o&&!1!==e.get(["axisPointer","show"],!0)&&z(t.coordSysAxesInfo[EI(n.model)],function(t){var r=t.axis;n.getAxis(r.dim)===r&&(t.seriesModels.push(e),null==t.seriesDataCount&&(t.seriesDataCount=0),t.seriesDataCount+=e.getData().count())})})}function kI(t,e){for(var n=e.model,r=e.dim,o=0;o<t.length;o++){var i=t[o]||{};if(DI(i[r+"AxisId"],n.id)||DI(i[r+"AxisIndex"],n.componentIndex)||DI(i[r+"AxisName"],n.name))return o}}function DI(t,e){return"all"===t||X(t)&&E(t,e)>=0||t===e}function AI(t){var e=II(t);if(e){var n=e.axisPointerModel,r=e.axis.scale,o=n.option,i=n.get("status"),a=n.get("value");null!=a&&(a=r.parse(a));var u=LI(n);null==i&&(o.status=u?"show":"hide");var s=r.getExtent().slice();s[0]>s[1]&&s.reverse(),(null==a||a>s[1])&&(a=s[1]),a<s[0]&&(a=s[0]),o.value=a,u&&(o.status=e.axis.scale.isBlank()?"hide":"show")}}function II(t){var e=(t.ecModel.getComponent("axisPointer")||{}).coordSysAxesInfo;return e&&e.axesInfo[EI(t)]}function OI(t){var e=II(t);return e&&e.axisPointerModel}function LI(t){return!!t.get(["handle","show"])}function EI(t){return t.type+"||"+t.id}var NI={},RI=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n}return i(e,t),e.prototype.render=function(e,n,r,o){this.axisPointerClass&&AI(e),t.prototype.render.apply(this,arguments),this._doUpdateAxisPointerClass(e,r,!0)},e.prototype.updateAxisPointer=function(t,e,n,r){this._doUpdateAxisPointerClass(t,n,!1)},e.prototype.remove=function(t,e){var n=this._axisPointer;n&&n.remove(e)},e.prototype.dispose=function(e,n){this._disposeAxisPointer(n),t.prototype.dispose.apply(this,arguments)},e.prototype._doUpdateAxisPointerClass=function(t,n,r){var o=e.getAxisPointerClass(this.axisPointerClass);if(o){var i=OI(t);i?(this._axisPointer||(this._axisPointer=new o)).render(t,i,n,r):this._disposeAxisPointer(n)}},e.prototype._disposeAxisPointer=function(t){this._axisPointer&&this._axisPointer.dispose(t),this._axisPointer=null},e.registerAxisPointerClass=function(t,e){NI[t]=e},e.getAxisPointerClass=function(t){return t&&NI[t]},e.type="axis",e}(Lv),PI=RI,zI=Di();function BI(t,e,n,r){var o=n.axis;if(!o.scale.isBlank()){var i=n.getModel("splitArea"),a=i.getModel("areaStyle"),u=a.get("color"),s=r.coordinateSystem.getRect(),l=o.getTicksCoords({tickModel:i,clamp:!0});if(l.length){var c=u.length,f=zI(t).splitAreaColors,d=mt(),h=0;if(f)for(var p=0;p<l.length;p++){var g=f.get(l[p].tickValue);if(null!=g){h=(g+(c-1)*p)%c;break}}var m=o.toGlobalCoord(l[0].coord),v=a.getAreaStyle();u=X(u)?u:[u];for(p=1;p<l.length;p++){var y=o.toGlobalCoord(l[p].coord),b=void 0,x=void 0,w=void 0,_=void 0;o.isHorizontal()?(b=m,x=s.y,w=y-b,_=s.height,m=b+w):(b=s.x,x=m,w=s.width,_=y-x,m=x+_);var S=l[p-1].tickValue;null!=S&&d.set(S,h),e.add(new As({anid:null!=S?"area_"+S:null,shape:{x:b,y:x,width:w,height:_},style:O({fill:u[h]},v),autoBatch:!0,silent:!0})),h=(h+1)%c}zI(t).splitAreaColors=d}}}function VI(t){zI(t).splitAreaColors=null}var HI=["axisLine","axisTickLabel","axisName"],FI=["splitArea","splitLine","minorSplitLine"],WI=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n.axisPointerClass="CartesianAxisPointer",n}return i(e,t),e.prototype.render=function(e,n,r,o){this.group.removeAll();var i=this._axisGroup;if(this._axisGroup=new _o,this.group.add(this._axisGroup),e.get("show")){var a=e.getCoordSysModel(),u=eI(a,e),s=new _I(e,I({handleAutoShown:function(t){for(var n=a.coordinateSystem.getCartesians(),r=0;r<n.length;r++){var o=n[r].getOtherAxis(e.axis).type;if("value"===o||"log"===o)return!0}return!1}},u));z(HI,s.add,s),this._axisGroup.add(s.getGroup()),z(FI,function(t){e.get([t,"show"])&&UI[t](this,this._axisGroup,e,a)},this),cd(i,this._axisGroup,e),t.prototype.render.call(this,e,n,r,o)}},e.prototype.remove=function(){VI(this)},e.type="cartesianAxis",e}(PI),UI={splitLine:function(t,e,n,r){var o=n.axis;if(!o.scale.isBlank()){var i=n.getModel("splitLine"),a=i.getModel("lineStyle"),u=a.get("color");u=X(u)?u:[u];for(var s=r.coordinateSystem.getRect(),l=o.isHorizontal(),c=0,f=o.getTicksCoords({tickModel:i}),d=[],h=[],p=a.getLineStyle(),g=0;g<f.length;g++){var m=o.toGlobalCoord(f[g].coord);l?(d[0]=m,d[1]=s.y,h[0]=m,h[1]=s.y+s.height):(d[0]=s.x,d[1]=m,h[0]=s.x+s.width,h[1]=m);var v=c++%u.length,y=f[g].tickValue;e.add(new cf({anid:null!=y?"line_"+f[g].tickValue:null,subPixelOptimize:!0,autoBatch:!0,shape:{x1:d[0],y1:d[1],x2:h[0],y2:h[1]},style:O({stroke:u[v]},p),silent:!0}))}}},minorSplitLine:function(t,e,n,r){var o=n.axis,i=n.getModel("minorSplitLine"),a=i.getModel("lineStyle"),u=r.coordinateSystem.getRect(),s=o.isHorizontal(),l=o.getMinorTicksCoords();if(l.length)for(var c=[],f=[],d=a.getLineStyle(),h=0;h<l.length;h++)for(var p=0;p<l[h].length;p++){var g=o.toGlobalCoord(l[h][p].coord);s?(c[0]=g,c[1]=u.y,f[0]=g,f[1]=u.y+u.height):(c[0]=u.x,c[1]=g,f[0]=u.x+u.width,f[1]=g),e.add(new cf({anid:"minor_line_"+l[h][p].tickValue,subPixelOptimize:!0,autoBatch:!0,shape:{x1:c[0],y1:c[1],x2:f[0],y2:f[1]},style:d,silent:!0}))}},splitArea:function(t,e,n,r){BI(t,e,n,r)}},GI=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n}return i(e,t),e.type="xAxis",e}(WI),jI=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type=GI.type,e}return i(e,t),e.type="yAxis",e}(WI),XI=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type="grid",e}return i(e,t),e.prototype.render=function(t,e){this.group.removeAll(),t.get("show")&&this.group.add(new As({shape:t.coordinateSystem.getRect(),style:O({fill:t.get("backgroundColor")},t.getItemStyle()),silent:!0,z2:-1}))},e.type="grid",e}(Lv),YI={offset:0};function qI(t){t.registerComponentView(XI),t.registerComponentModel(cD),t.registerCoordinateSystem("cartesian2d",lI),SD(t,"x",dD,YI),SD(t,"y",dD,YI),t.registerComponentView(GI),t.registerComponentView(jI),t.registerPreprocessor(function(t){t.xAxis&&t.yAxis&&!t.grid&&(t.grid={})})}function ZI(t){mS(qI),t.registerSeriesModel(eD),t.registerChartView(sD),t.registerLayout(PT("scatter"))}function $I(t){t.eachSeriesByType("radar",function(t){var e=t.getData(),n=[],r=t.coordinateSystem;if(r){var o=r.getIndicatorAxes();z(o,function(t,i){e.each(e.mapDimension(o[i].dim),function(t,e){n[e]=n[e]||[];var o=r.dataToPoint(t,i);n[e][i]=KI(o)?o:JI(r)})}),e.each(function(t){var o=F(n[t],function(t){return KI(t)})||JI(r);n[t].push(o.slice()),e.setItemLayout(t,n[t])})}})}function KI(t){return!isNaN(t[0])&&!isNaN(t[1])}function JI(t){return[t.cx,t.cy]}function QI(t){var e=t.polar;if(e){X(e)||(e=[e]);var n=[];z(e,function(e,r){e.indicator?(e.type&&!e.shape&&(e.shape=e.type),t.radar=t.radar||[],X(t.radar)||(t.radar=[t.radar]),t.radar.push(e)):n.push(e)}),t.polar=n}z(t.series,function(t){t&&"radar"===t.type&&t.polarIndex&&(t.radarIndex=t.polarIndex)})}function tO(t){return X(t)||(t=[+t,+t]),t}var eO=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n}return i(e,t),e.prototype.render=function(t,e,n){var o=t.coordinateSystem,i=this.group,a=t.getData(),u=this._data;function s(t,e){var n=t.getItemVisual(e,"symbol")||"circle";if("none"!==n){var r=tO(t.getItemVisual(e,"symbolSize")),o=zb(n,-1,-1,2,2),i=t.getItemVisual(e,"symbolRotate")||0;return o.attr({style:{strokeNoScale:!0},z2:100,scaleX:r[0]/2,scaleY:r[1]/2,rotation:i*Math.PI/180||0}),o}}function l(e,n,o,i,a,u){o.removeAll();for(var l=0;l<n.length-1;l++){var c=s(i,a);c&&(c.__dimIdx=l,e[l]?(c.setPosition(e[l]),r[u?"initProps":"updateProps"](c,{x:n[l][0],y:n[l][1]},t,a)):c.setPosition(n[l]),o.add(c))}}function c(t){return B(t,function(t){return[o.cx,o.cy]})}a.diff(u).add(function(e){var n=a.getItemLayout(e);if(n){var r=new nf,o=new af,i={shape:{points:n}};r.shape.points=c(n),o.shape.points=c(n),td(r,i,t,e),td(o,i,t,e);var u=new _o,s=new _o;u.add(o),u.add(r),u.add(s),l(o.shape.points,n,s,a,e,!0),a.setItemGraphicEl(e,u)}}).update(function(e,n){var r=u.getItemGraphicEl(n),o=r.childAt(0),i=r.childAt(1),s=r.childAt(2),c={shape:{points:a.getItemLayout(e)}};c.shape.points&&(l(o.shape.points,c.shape.points,s,a,e,!1),Qf(o,c,t),Qf(i,c,t),a.setItemGraphicEl(e,r))}).remove(function(t){i.remove(u.getItemGraphicEl(t))}).execute(),a.eachItemGraphicEl(function(t,e){var n=a.getItemModel(e),r=t.childAt(0),o=t.childAt(1),u=t.childAt(2),s=a.getItemVisual(e,"style"),l=s.fill;i.add(t),r.useStyle(O(n.getModel("lineStyle").getLineStyle(),{fill:"none",stroke:l})),ql(r,n,"lineStyle"),ql(o,n,"areaStyle");var c=n.getModel("areaStyle"),f=c.isEmpty()&&c.parentModel.isEmpty();o.ignore=f,z(["emphasis","select","blur"],function(t){var e=n.getModel([t,"areaStyle"]),r=e.isEmpty()&&e.parentModel.isEmpty();o.ensureState(t).ignore=r&&f}),o.useStyle(O(c.getAreaStyle(),{fill:l,opacity:.7,decal:s.decal}));var d=n.getModel("emphasis"),h=d.getModel("itemStyle").getItemStyle();u.eachChild(function(t){if(t instanceof xs){var r=t.style;t.useStyle(I({image:r.image,x:r.x,y:r.y,width:r.width,height:r.height},s))}else t.useStyle(s),t.setColor(l);var o=t.ensureState("emphasis");o.style=k(h);var i=a.get(a.dimensions[t.__dimIdx],e);(null==i||isNaN(i))&&(i=""),_d(t,Sd(n),{labelFetcher:a.hostModel,labelDataIndex:e,labelDimIndex:t.__dimIdx,defaultText:i,inheritColor:l,defaultOpacity:s.opacity})}),Gl(t,d.get("focus"),d.get("blurScope"))}),this._data=a},e.prototype.remove=function(){this.group.removeAll(),this._data=null},e.type="radar",e}(Wv),nO=eO,rO=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n.useColorPaletteOnData=!0,n.hasSymbolVisual=!0,n}return i(e,t),e.prototype.init=function(e){t.prototype.init.apply(this,arguments),this.legendVisualProvider=new $k(G(this.getData,this),G(this.getRawData,this))},e.prototype.getInitialData=function(t,e){return qk(this,{generateCoord:"indicator_",generateCoordCount:1/0})},e.prototype.formatTooltip=function(t,e,n){var r=this.getData(),o=this.coordinateSystem,i=o.getIndicatorAxes(),a=this.getData().getName(t),u=""===a?this.name:a,s=pv(this,t);return rv("section",{header:u,sortBlocks:!0,blocks:B(i,function(e){var n=r.get(r.mapDimension(e.dim),t);return rv("nameValue",{markerType:"subItem",markerColor:s,name:e.name,value:n,sortParam:n})})})},e.prototype.getTooltipPosition=function(t){if(null!=t)for(var e=this.getData(),n=this.coordinateSystem,r=e.getValues(B(n.dimensions,function(t){return e.mapDimension(t)}),t),o=0,i=r.length;o<i;o++)if(!isNaN(r[o])){var a=n.getIndicatorAxes();return n.coordToPoint(a[o].dataToCoord(r[o]),o)}},e.type="series.radar",e.dependencies=["radar"],e.defaultOption={zlevel:0,z:2,coordinateSystem:"radar",legendHoverLink:!0,radarIndex:0,lineStyle:{width:2,type:"solid"},label:{position:"top"},symbolSize:8},e}(Iv),oO=rO,iO=yD.value;function aO(t,e){return O({show:e},t)}var uO=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n}return i(e,t),e.prototype.optionUpdated=function(){var t=this.get("boundaryGap"),e=this.get("splitNumber"),n=this.get("scale"),r=this.get("axisLine"),o=this.get("axisTick"),i=this.get("axisLabel"),a=this.get("axisName"),u=this.get(["axisName","show"]),s=this.get(["axisName","formatter"]),l=this.get("axisNameGap"),c=this.get("triggerEvent"),f=B(this.get("indicator")||[],function(f){null!=f.max&&f.max>0&&!f.min?f.min=0:null!=f.min&&f.min<0&&!f.max&&(f.max=0);var d=a;null!=f.color&&(d=O({color:f.color},a));var h=D(k(f),{boundaryGap:t,splitNumber:e,scale:n,axisLine:r,axisTick:o,axisLabel:i,name:f.text,nameLocation:"end",nameGap:l,nameTextStyle:d,triggerEvent:c},!1);if(u||(h.name=""),"string"===typeof s){var p=h.name;h.name=s.replace("{value}",null!=p?p:"")}else"function"===typeof s&&(h.name=s(h.name,h));var g=new Yd(h,null,this.ecModel);return R(g,fD.prototype),g.mainType="radar",g.componentIndex=this.componentIndex,g},this);this._indicatorModels=f},e.prototype.getIndicatorModels=function(){return this._indicatorModels},e.type="radar",e.defaultOption={zlevel:0,z:0,center:["50%","50%"],radius:"75%",startAngle:90,axisName:{show:!0},boundaryGap:[0,0],splitNumber:5,axisNameGap:15,scale:!1,shape:"polygon",axisLine:D({lineStyle:{color:"#bbb"}},iO.axisLine),axisLabel:aO(iO.axisLabel,!1),axisTick:aO(iO.axisTick,!1),splitLine:aO(iO.splitLine,!0),splitArea:aO(iO.splitArea,!0),indicator:[]},e}(bp),sO=uO,lO=["axisLine","axisTickLabel","axisName"],cO=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n}return i(e,t),e.prototype.render=function(t,e,n){var r=this.group;r.removeAll(),this._buildAxes(t),this._buildSplitLineAndArea(t)},e.prototype._buildAxes=function(t){var e=t.coordinateSystem,n=e.getIndicatorAxes(),r=B(n,function(t){var n=new _I(t.model,{position:[e.cx,e.cy],rotation:t.angle,labelDirection:-1,tickDirection:-1,nameDirection:1});return n});z(r,function(t){z(lO,t.add,t),this.group.add(t.getGroup())},this)},e.prototype._buildSplitLineAndArea=function(t){var e=t.coordinateSystem,n=e.getIndicatorAxes();if(n.length){var r=t.get("shape"),o=t.getModel("splitLine"),i=t.getModel("splitArea"),a=o.getModel("lineStyle"),u=i.getModel("areaStyle"),s=o.get("show"),l=i.get("show"),c=a.get("color"),f=u.get("color"),d=X(c)?c:[c],h=X(f)?f:[f],p=[],g=[];if("circle"===r)for(var m=n[0].getTicksCoords(),v=e.cx,y=e.cy,b=0;b<m.length;b++){if(s){var x=D(p,d,b);p[x].push(new Tc({shape:{cx:v,cy:y,r:m[b].coord}}))}if(l&&b<m.length-1){x=D(g,h,b);g[x].push(new Zc({shape:{cx:v,cy:y,r0:m[b].coord,r:m[b+1].coord}}))}}else{var w,_=B(n,function(t,n){var r=t.getTicksCoords();return w=null==w?r.length-1:Math.min(r.length-1,w),B(r,function(t){return e.coordToPoint(t.coord,n)})}),S=[];for(b=0;b<=w;b++){for(var C=[],M=0;M<n.length;M++)C.push(_[M][b]);if(C[0]&&C.push(C[0].slice()),s){x=D(p,d,b);p[x].push(new af({shape:{points:C}}))}if(l&&S){x=D(g,h,b-1);g[x].push(new nf({shape:{points:C.concat(S)}}))}S=C.slice().reverse()}}var T=a.getLineStyle(),k=u.getAreaStyle();z(g,function(t,e){this.group.add(Yf(t,{style:O({stroke:"none",fill:h[e%h.length]},k),silent:!0}))},this),z(p,function(t,e){this.group.add(Yf(t,{style:O({fill:"none",stroke:d[e%d.length]},T),silent:!0}))},this)}function D(t,e,n){var r=n%e.length;return t[r]=t[r]||[],r}},e.type="radar",e}(Lv),fO=cO,dO=function(t){function e(e,n,r){var o=t.call(this,e,n,r)||this;return o.type="value",o.angle=0,o.name="",o}return i(e,t),e}(JA),hO=dO,pO=function(){function t(t,e,n){this.dimensions=[],this._model=t,this._indicatorAxes=B(t.getIndicatorModels(),function(t,e){var n="indicator_"+e,r=new hO(n,new VD);return r.name=t.get("name"),r.model=t,t.axis=r,this.dimensions.push(n),r},this),this.resize(t,n)}return t.prototype.getIndicatorAxes=function(){return this._indicatorAxes},t.prototype.dataToPoint=function(t,e){var n=this._indicatorAxes[e];return this.coordToPoint(n.dataToCoord(t),e)},t.prototype.coordToPoint=function(t,e){var n=this._indicatorAxes[e],r=n.angle,o=this.cx+t*Math.cos(r),i=this.cy-t*Math.sin(r);return[o,i]},t.prototype.pointToData=function(t){var e=t[0]-this.cx,n=t[1]-this.cy,r=Math.sqrt(e*e+n*n);e/=r,n/=r;for(var o,i=Math.atan2(-n,e),a=1/0,u=-1,s=0;s<this._indicatorAxes.length;s++){var l=this._indicatorAxes[s],c=Math.abs(i-l.angle);c<a&&(o=l,u=s,a=c)}return[u,+(o&&o.coordToData(r))]},t.prototype.resize=function(t,e){var n=t.get("center"),r=e.getWidth(),o=e.getHeight(),i=Math.min(r,o)/2;this.cx=Ro(n[0],r),this.cy=Ro(n[1],o),this.startAngle=t.get("startAngle")*Math.PI/180;var a=t.get("radius");"string"!==typeof a&&"number"!==typeof a||(a=[0,a]),this.r0=Ro(a[0],i),this.r=Ro(a[1],i),z(this._indicatorAxes,function(t,e){t.setExtent(this.r0,this.r);var n=this.startAngle+e*Math.PI*2/this._indicatorAxes.length;n=Math.atan2(Math.sin(n),Math.cos(n)),t.angle=n},this)},t.prototype.update=function(t,e){var n=this._indicatorAxes,r=this._model;z(n,function(t){t.scale.setExtent(1/0,-1/0)}),t.eachSeriesByType("radar",function(e,o){if("radar"===e.get("coordinateSystem")&&t.getComponent("radar",e.get("radarIndex"))===r){var i=e.getData();z(n,function(t){t.scale.unionExtentFromData(i,i.mapDimension(t.dim))})}},this);var o=r.get("splitNumber");function i(t){var e=Math.pow(10,Math.floor(Math.log(t)/Math.LN10)),n=t/e;return 2===n?n=5:n*=2,n*e}z(n,function(t,e){var n=pA(t.scale,t.model).extent;mA(t.scale,t.model);var r=t.model,a=t.scale,u=hA(a,r.get("min",!0)),s=hA(a,r.get("max",!0)),l=a.getInterval();if(null!=u&&null!=s)a.setExtent(+u,+s),a.setInterval((s-u)/o);else if(null!=u){var c=void 0;do{c=u+l*o,a.setExtent(+u,c),a.setInterval(l),l=i(l)}while(c<n[1]&&isFinite(c)&&isFinite(n[1]))}else if(null!=s){var f=void 0;do{f=s-l*o,a.setExtent(f,+s),a.setInterval(l),l=i(l)}while(f>n[0]&&isFinite(f)&&isFinite(n[0]))}else{var d=a.getTicks().length-1;d>o&&(l=i(l));c=Math.ceil(n[1]/l)*l,f=Po(c-l*o);a.setExtent(f,c),a.setInterval(l)}})},t.prototype.convertToPixel=function(t,e,n){return console.warn("Not implemented."),null},t.prototype.convertFromPixel=function(t,e,n){return console.warn("Not implemented."),null},t.prototype.containPoint=function(t){return console.warn("Not implemented."),!1},t.create=function(e,n){var r=[];return e.eachComponent("radar",function(o){var i=new t(o,e,n);r.push(i),o.coordinateSystem=i}),e.eachSeriesByType("radar",function(t){"radar"===t.get("coordinateSystem")&&(t.coordinateSystem=r[t.get("radarIndex")||0])}),r},t.dimensions=[],t}(),gO=pO;function mO(t){t.registerCoordinateSystem("radar",gO),t.registerComponentModel(sO),t.registerComponentView(fO),t.registerVisual({seriesType:"radar",reset:function(t){var e=t.getData();e.each(function(t){e.setItemVisual(t,"legendIcon","roundRect")}),e.setVisual("legendIcon","roundRect")}})}function vO(t){mS(mO),t.registerChartView(nO),t.registerSeriesModel(oO),t.registerLayout($I),t.registerProcessor(Bk("radar")),t.registerPreprocessor(QI)}var yO="\0_ec_interaction_mutex";function bO(t,e,n){var r=_O(t);r[e]=n}function xO(t,e,n){var r=_O(t),o=r[e];o===n&&(r[e]=null)}function wO(t,e){return!!_O(t)[e]}function _O(t){return t[yO]||(t[yO]={})}iS({type:"takeGlobalCursor",event:"globalCursorTaken",update:"update"},function(){});var SO=function(t){function e(e){var n=t.call(this)||this;n._zr=e;var r=G(n._mousedownHandler,n),o=G(n._mousemoveHandler,n),i=G(n._mouseupHandler,n),a=G(n._mousewheelHandler,n),u=G(n._pinchHandler,n);return n.enable=function(t,n){this.disable(),this._opt=O(k(n)||{},{zoomOnMouseWheel:!0,moveOnMouseMove:!0,moveOnMouseWheel:!1,preventDefaultMouseMove:!0}),null==t&&(t=!0),!0!==t&&"move"!==t&&"pan"!==t||(e.on("mousedown",r),e.on("mousemove",o),e.on("mouseup",i)),!0!==t&&"scale"!==t&&"zoom"!==t||(e.on("mousewheel",a),e.on("pinch",u))},n.disable=function(){e.off("mousedown",r),e.off("mousemove",o),e.off("mouseup",i),e.off("mousewheel",a),e.off("pinch",u)},n}return i(e,t),e.prototype.isDragging=function(){return this._dragging},e.prototype.isPinching=function(){return this._pinching},e.prototype.setPointerChecker=function(t){this.pointerChecker=t},e.prototype.dispose=function(){this.disable()},e.prototype._mousedownHandler=function(t){if(!(de(t)||t.target&&t.target.draggable)){var e=t.offsetX,n=t.offsetY;this.pointerChecker&&this.pointerChecker(t,e,n)&&(this._x=e,this._y=n,this._dragging=!0)}},e.prototype._mousemoveHandler=function(t){if(this._dragging&&TO("moveOnMouseMove",t,this._opt)&&"pinch"!==t.gestureEvent&&!wO(this._zr,"globalPan")){var e=t.offsetX,n=t.offsetY,r=this._x,o=this._y,i=e-r,a=n-o;this._x=e,this._y=n,this._opt.preventDefaultMouseMove&&fe(t.event),MO(this,"pan","moveOnMouseMove",t,{dx:i,dy:a,oldX:r,oldY:o,newX:e,newY:n,isAvailableBehavior:null})}},e.prototype._mouseupHandler=function(t){de(t)||(this._dragging=!1)},e.prototype._mousewheelHandler=function(t){var e=TO("zoomOnMouseWheel",t,this._opt),n=TO("moveOnMouseWheel",t,this._opt),r=t.wheelDelta,o=Math.abs(r),i=t.offsetX,a=t.offsetY;if(0!==r&&(e||n)){if(e){var u=o>3?1.4:o>1?1.2:1.1,s=r>0?u:1/u;CO(this,"zoom","zoomOnMouseWheel",t,{scale:s,originX:i,originY:a,isAvailableBehavior:null})}if(n){var l=Math.abs(r),c=(r>0?1:-1)*(l>3?.4:l>1?.15:.05);CO(this,"scrollMove","moveOnMouseWheel",t,{scrollDelta:c,originX:i,originY:a,isAvailableBehavior:null})}}},e.prototype._pinchHandler=function(t){if(!wO(this._zr,"globalPan")){var e=t.pinchScale>1?1.1:1/1.1;CO(this,"zoom",null,t,{scale:e,originX:t.pinchX,originY:t.pinchY,isAvailableBehavior:null})}},e}(Gt);function CO(t,e,n,r,o){t.pointerChecker&&t.pointerChecker(r,o.originX,o.originY)&&(fe(r.event),MO(t,e,n,r,o))}function MO(t,e,n,r,o){o.isAvailableBehavior=G(TO,null,n,r),t.trigger(e,o)}function TO(t,e,n){var r=n[t];return!t||r&&(!q(r)||e.event[r+"Key"])}var kO=SO;function DO(t,e,n){var r=t.target;r.x+=e,r.y+=n,r.dirty()}function AO(t,e,n,r){var o=t.target,i=t.zoomLimit,a=t.zoom=t.zoom||1;if(a*=e,i){var u=i.min||0,s=i.max||1/0;a=Math.max(Math.min(s,a),u)}var l=a/t.zoom;t.zoom=a,o.x-=(n-o.x)*(l-1),o.y-=(r-o.y)*(l-1),o.scaleX*=l,o.scaleY*=l,o.dirty()}var IO={axisPointer:1,tooltip:1,brush:1};function OO(t,e,n){var r=e.getComponentByElement(t.topTarget),o=r&&r.coordinateSystem;return r&&r!==n&&!IO.hasOwnProperty(r.mainType)&&o&&o.model!==n}var LO=["rect","circle","line","ellipse","polygon","polyline","path"],EO=mt(LO),NO=mt(LO.concat(["g"])),RO=mt(LO.concat(["g"])),PO=Di();function zO(t){var e=t.getItemStyle(),n=t.get("areaColor");return null!=n&&(e.fill=n),e}var BO=function(){function t(t){var e=new _o;this.uid=Zd("ec_map_draw"),this._controller=new kO(t.getZr()),this._controllerHost={target:e},this.group=e,e.add(this._regionsGroup=new _o),e.add(this._svgGroup=new _o)}return t.prototype.draw=function(t,e,n,r,o){var i="geo"===t.mainType,a=t.getData&&t.getData();i&&e.eachComponent({mainType:"series",subType:"map"},function(e){a||e.getHostGeoModel()!==t||(a=e.getData())});var u=t.coordinateSystem,s=this._regionsGroup,l=this.group,c=u.getTransformInfo(),f=c.raw,d=c.roam,h=!s.childAt(0)||o;h?(l.x=d.x,l.y=d.y,l.scaleX=d.scaleX,l.scaleY=d.scaleY,l.dirty()):Qf(l,d,t);var p=a&&a.getVisual("visualMeta")&&a.getVisual("visualMeta").length>0,g={api:n,geo:u,mapOrGeoModel:t,data:a,isVisualEncodedByVisualMap:p,isGeo:i,transformInfoRaw:f};"geoJSON"===u.resourceType?this._buildGeoJSON(g):"geoSVG"===u.resourceType&&this._buildSVG(g),this._updateController(t,e,n),this._updateMapSelectHandler(t,s,n,r)},t.prototype._buildGeoJSON=function(t){var e=this._regionsGroupByName=mt(),n=mt(),r=this._regionsGroup,o=t.transformInfoRaw,i=t.mapOrGeoModel,a=t.data,u=function(t){return[t[0]*o.scaleX+o.x,t[1]*o.scaleY+o.y]};r.removeAll(),z(t.geo.regions,function(o){var s=o.name,l=e.get(s),c=n.get(s)||{},f=c.dataIdx,d=c.regionModel;l||(l=e.set(s,new _o),r.add(l),f=a?a.indexOfName(s):null,d=t.isGeo?i.getRegionModel(s):a?a.getItemModel(f):null,n.set(s,{dataIdx:f,regionModel:d}));var h=new xf({segmentIgnoreThreshold:1,shape:{paths:[]}});l.add(h),z(o.geometries,function(t){if("polygon"===t.type){for(var e=[],n=0;n<t.exterior.length;++n)e.push(u(t.exterior[n]));h.shape.paths.push(new nf({segmentIgnoreThreshold:1,shape:{points:e}}));for(n=0;n<(t.interiors?t.interiors.length:0);++n){for(var r=t.interiors[n],o=[],i=0;i<r.length;++i)o.push(u(r[i]));h.shape.paths.push(new nf({segmentIgnoreThreshold:1,shape:{points:o}}))}}}),VO(t,h,f,d),h instanceof Ea&&(h.culling=!0);var p=u(o.getCenter());HO(t,h,s,d,i,f,p)}),e.each(function(e,r){var o=n.get(r),a=o.dataIdx,u=o.regionModel;FO(t,e,r,u,i,a),WO(t,e,r,u,i),UO(t,e,r,u,i)},this)},t.prototype._buildSVG=function(t){var e=t.geo.map,n=t.transformInfoRaw;this._svgGroup.x=n.x,this._svgGroup.y=n.y,this._svgGroup.scaleX=n.scaleX,this._svgGroup.scaleY=n.scaleY,this._svgResourceChanged(e)&&(this._freeSVG(),this._useSVG(e));var r=this._svgDispatcherMap=mt(),o=!1;z(this._svgGraphicRecord.named,function(e){var n=e.name,i=t.mapOrGeoModel,a=t.data,u=e.svgNodeTagLower,s=e.el,l=a?a.indexOfName(n):null,c=i.getRegionModel(n);if(null!=EO.get(u)&&s instanceof Ea&&VO(t,s,l,c),s instanceof Ea&&(s.culling=!0),s.z2EmphasisLift=0,!e.namedFrom&&(null!=RO.get(u)&&HO(t,s,n,c,i,l,null),FO(t,s,n,c,i,l),WO(t,s,n,c,i),null!=NO.get(u))){var f=UO(t,s,n,c,i);"self"===f&&(o=!0);var d=r.get(n)||r.set(n,[]);d.push(s)}},this),this._enableBlurEntireSVG(o,t)},t.prototype._enableBlurEntireSVG=function(t,e){if(t&&e.isGeo){var n=e.mapOrGeoModel.getModel(["blur","itemStyle"]).getItemStyle(),r=n.opacity;this._svgGraphicRecord.root.traverse(function(t){if(!t.isGroup){Cl(t);var e=t.ensureState("blur").style||{};null==e.opacity&&null!=r&&(e.opacity=r),t.ensureState("emphasis")}})}},t.prototype.remove=function(){this._regionsGroup.removeAll(),this._regionsGroupByName=null,this._svgGroup.removeAll(),this._freeSVG(),this._controller.dispose(),this._controllerHost=null},t.prototype.findHighDownDispatchers=function(t,e){if(null==t)return[];var n=e.coordinateSystem;if("geoJSON"===n.resourceType){var r=this._regionsGroupByName;if(r){var o=r.get(t);return o?[o]:[]}}else if("geoSVG"===n.resourceType)return this._svgDispatcherMap&&this._svgDispatcherMap.get(t)||[]},t.prototype._svgResourceChanged=function(t){return this._svgMapName!==t},t.prototype._useSVG=function(t){var e=Ow.getGeoResource(t);if(e&&"geoSVG"===e.type){var n=e.useGraphic(this.uid);this._svgGroup.add(n.root),this._svgGraphicRecord=n,this._svgMapName=t}},t.prototype._freeSVG=function(){var t=this._svgMapName;if(null!=t){var e=Ow.getGeoResource(t);e&&"geoSVG"===e.type&&e.freeGraphic(this.uid),this._svgGraphicRecord=null,this._svgDispatcherMap=null,this._svgGroup.removeAll(),this._svgMapName=null}},t.prototype._updateController=function(t,e,n){var r=t.coordinateSystem,o=this._controller,i=this._controllerHost;i.zoomLimit=t.get("scaleLimit"),i.zoom=r.getZoom(),o.enable(t.get("roam")||!1);var a=t.mainType;function u(){var e={type:"geoRoam",componentType:a};return e[a+"Id"]=t.id,e}o.off("pan").on("pan",function(t){this._mouseDownFlag=!1,DO(i,t.dx,t.dy),n.dispatchAction(I(u(),{dx:t.dx,dy:t.dy}))},this),o.off("zoom").on("zoom",function(t){this._mouseDownFlag=!1,AO(i,t.scale,t.originX,t.originY),n.dispatchAction(I(u(),{zoom:t.scale,originX:t.originX,originY:t.originY}))},this),o.setPointerChecker(function(e,o,i){return r.containPoint([o,i])&&!OO(e,n,t)})},t.prototype.resetForLabelLayout=function(){this.group.traverse(function(t){var e=t.getTextContent();e&&(e.ignore=PO(e).ignore)})},t.prototype._updateMapSelectHandler=function(t,e,n,r){var o=this;e.off("mousedown"),e.off("click"),t.get("selectedMode")&&(e.on("mousedown",function(){o._mouseDownFlag=!0}),e.on("click",function(t){o._mouseDownFlag&&(o._mouseDownFlag=!1)}))},t}();function VO(t,e,n,r){var o=r.getModel("itemStyle"),i=r.getModel(["emphasis","itemStyle"]),a=r.getModel(["blur","itemStyle"]),u=r.getModel(["select","itemStyle"]),s=zO(o),l=zO(i),c=zO(u),f=zO(a),d=t.data;if(d){var h=d.getItemVisual(n,"style"),p=d.getItemVisual(n,"decal");t.isVisualEncodedByVisualMap&&h.fill&&(s.fill=h.fill),p&&(s.decal=xx(p,t.api))}e.setStyle(s),e.style.strokeNoScale=!0,e.ensureState("emphasis").style=l,e.ensureState("select").style=c,e.ensureState("blur").style=f,Cl(e)}function HO(t,e,n,r,o,i,a){var u=t.data,s=t.isGeo,l=u&&isNaN(u.get(u.mapDimension("value"),i)),c=u&&u.getItemLayout(i);if(s||l||c&&c.showLabel){var f=s?n:i,d=void 0;(!u||i>=0)&&(d=o);var h=a?{normal:{align:"center",verticalAlign:"middle"}}:null;_d(e,Sd(r),{labelFetcher:d,labelDataIndex:f,defaultText:n},h);var p=e.getTextContent();if(p&&(PO(p).ignore=p.ignore,e.textConfig&&a)){var g=e.getBoundingRect().clone();e.textConfig.layoutRect=g,e.textConfig.position=[(a[0]-g.x)/g.width*100+"%",(a[1]-g.y)/g.height*100+"%"]}e.disableLabelAnimation=!0}else e.removeTextContent(),e.removeTextConfig(),e.disableLabelAnimation=null}function FO(t,e,n,r,o,i){t.data?t.data.setItemGraphicEl(i,e):Gs(e).eventData={componentType:"geo",componentIndex:o.componentIndex,geoIndex:o.componentIndex,name:n,region:r&&r.option||{}}}function WO(t,e,n,r,o){t.data||yd({el:e,componentModel:o,itemName:n,itemTooltipOption:r.get("tooltip")})}function UO(t,e,n,r,o){e.highDownSilentOnTouch=!!o.get("selectedMode");var i=r.getModel("emphasis"),a=i.get("focus");return Gl(e,a,i.get("blurScope")),t.isGeo&&Kl(e,o,n),a}var GO=BO,jO=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n}return i(e,t),e.prototype.render=function(t,e,n,r){if(!r||"mapToggleSelect"!==r.type||r.from!==this.uid){var o=this.group;if(o.removeAll(),!t.getHostGeoModel()){if(this._mapDraw&&r&&"geoRoam"===r.type&&this._mapDraw.resetForLabelLayout(),r&&"geoRoam"===r.type&&"series"===r.componentType&&r.seriesId===t.id){i=this._mapDraw;i&&o.add(i.group)}else if(t.needsDrawMap){var i=this._mapDraw||new GO(n);o.add(i.group),i.draw(t,e,n,this,r),this._mapDraw=i}else this._mapDraw&&this._mapDraw.remove(),this._mapDraw=null;t.get("showLegendSymbol")&&e.getComponent("legend")&&this._renderSymbols(t,e,n)}}},e.prototype.remove=function(){this._mapDraw&&this._mapDraw.remove(),this._mapDraw=null,this.group.removeAll()},e.prototype.dispose=function(){this._mapDraw&&this._mapDraw.remove(),this._mapDraw=null},e.prototype._renderSymbols=function(t,e,n){var r=t.originalData,o=this.group;r.each(r.mapDimension("value"),function(e,n){if(!isNaN(e)){var i=r.getItemLayout(n);if(i&&i.point){var a=i.point,u=i.offset,s=new Tc({style:{fill:t.getData().getVisual("style").fill},shape:{cx:a[0]+9*u,cy:a[1],r:3},silent:!0,z2:8+(u?0:Qs+1)});if(!u){var l=t.mainSeries.getData(),c=r.getName(n),f=l.indexOfName(c),d=r.getItemModel(n),h=d.getModel("label"),p=l.getItemGraphicEl(f);_d(s,Sd(d),{labelFetcher:{getFormattedLabel:function(e,n){return t.getFormattedLabel(f,n)}}}),s.disableLabelAnimation=!0,h.get("position")||s.setTextConfig({position:"bottom"}),p.onHoverStateChange=function(t){yl(s,t)}}o.add(s)}}})},e.type="map",e}(Wv),XO=jO,YO=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n.needsDrawMap=!1,n.seriesGroup=[],n.getTooltipPosition=function(t){if(null!=t){var e=this.getData().getName(t),n=this.coordinateSystem,r=n.getRegion(e);return r&&n.dataToPoint(r.getCenter())}},n}return i(e,t),e.prototype.getInitialData=function(t){for(var e=qk(this,{coordDimensions:["value"],encodeDefaulter:j(Pp,this)}),n=mt(),r=[],o=0,i=e.count();o<i;o++){var a=e.getName(o);n.set(a,!0)}var u=Ow.load(this.getMapType(),this.option.nameMap,this.option.nameProperty);return z(u.regions,function(t){var e=t.name;n.get(e)||r.push(e)}),e.appendValues([],r),e},e.prototype.getHostGeoModel=function(){var t=this.option.geoIndex;return null!=t?this.ecModel.getComponent("geo",t):null},e.prototype.getMapType=function(){return(this.getHostGeoModel()||this).option.map},e.prototype.getRawValue=function(t){var e=this.getData();return e.get(e.mapDimension("value"),t)},e.prototype.getRegionModel=function(t){var e=this.getData();return e.getItemModel(e.indexOfName(t))},e.prototype.formatTooltip=function(t,e,n){for(var r=this.getData(),o=this.getRawValue(t),i=r.getName(t),a=this.seriesGroup,u=[],s=0;s<a.length;s++){var l=a[s].originalData.indexOfName(i),c=r.mapDimension("value");isNaN(a[s].originalData.get(c,l))||u.push(a[s].name)}return rv("section",{header:u.join(", "),noHeader:!u.length,blocks:[rv("nameValue",{name:i,value:o})]})},e.prototype.setZoom=function(t){this.option.zoom=t},e.prototype.setCenter=function(t){this.option.center=t},e.prototype.getLegendIcon=function(t){var e=t.icon||"roundRect",n=zb(e,0,0,t.itemWidth,t.itemHeight,t.itemStyle.fill);return n.setStyle(t.itemStyle),n.style.stroke="none",e.indexOf("empty")>-1&&(n.style.stroke=n.style.fill,n.style.fill="#fff",n.style.lineWidth=2),n},e.type="series.map",e.dependencies=["geo"],e.layoutMode="box",e.defaultOption={zlevel:0,z:2,coordinateSystem:"geo",map:"",left:"center",top:"center",aspectScale:null,showLegendSymbol:!0,boundingCoords:null,center:null,zoom:1,scaleLimit:null,selectedMode:!0,label:{show:!1,color:"#000"},itemStyle:{borderWidth:.5,borderColor:"#444",areaColor:"#eee"},emphasis:{label:{show:!0,color:"rgb(100,0,0)"},itemStyle:{areaColor:"rgba(255,215,0,0.8)"}},select:{label:{show:!0,color:"rgb(100,0,0)"},itemStyle:{color:"rgba(255,215,0,0.8)"}},nameProperty:"name"},e}(Iv),qO=YO;function ZO(t,e){var n={};return z(t,function(t){t.each(t.mapDimension("value"),function(e,r){var o="ec-"+t.getName(r);n[o]=n[o]||[],isNaN(e)||n[o].push(e)})}),t[0].map(t[0].mapDimension("value"),function(r,o){for(var i,a="ec-"+t[0].getName(o),u=0,s=1/0,l=-1/0,c=n[a].length,f=0;f<c;f++)s=Math.min(s,n[a][f]),l=Math.max(l,n[a][f]),u+=n[a][f];return i="min"===e?s:"max"===e?l:"average"===e?u/c:u,0===c?NaN:i})}function $O(t){var e={};t.eachSeriesByType("map",function(t){var n=t.getHostGeoModel(),r=n?"o"+n.id:"i"+t.getMapType();(e[r]=e[r]||[]).push(t)}),z(e,function(t,e){for(var n=ZO(B(t,function(t){return t.getData()}),t[0].get("mapValueCalculation")),r=0;r<t.length;r++)t[r].originalData=t[r].getData();for(r=0;r<t.length;r++)t[r].seriesGroup=t,t[r].needsDrawMap=0===r&&!t[r].getHostGeoModel(),t[r].setData(n.cloneShallow()),t[r].mainSeries=t[0]})}function KO(t){var e={};t.eachSeriesByType("map",function(n){var r=n.getMapType();if(!n.getHostGeoModel()&&!e[r]){var o={};z(n.seriesGroup,function(e){var n=e.coordinateSystem,r=e.originalData;e.get("showLegendSymbol")&&t.getComponent("legend")&&r.each(r.mapDimension("value"),function(t,e){var i=r.getName(e),a=n.getRegion(i);if(a&&!isNaN(t)){var u=o[i]||0,s=n.dataToPoint(a.getCenter());o[i]=u+1,r.setItemLayout(e,{point:s,offset:u})}})});var i=n.getData();i.each(function(t){var e=i.getName(t),n=i.getItemLayout(t)||{};n.showLabel=!o[e],i.setItemLayout(t,n)}),e[r]=!0}})}var JO=zt,QO=function(t){function e(e){var n=t.call(this)||this;return n.type="view",n.dimensions=["x","y"],n._roamTransformable=new zr,n._rawTransformable=new zr,n.name=e,n}return i(e,t),e.prototype.setBoundingRect=function(t,e,n,r){return this._rect=new Zr(t,e,n,r),this._rect},e.prototype.getBoundingRect=function(){return this._rect},e.prototype.setViewRect=function(t,e,n,r){this._transformTo(t,e,n,r),this._viewRect=new Zr(t,e,n,r)},e.prototype._transformTo=function(t,e,n,r){var o=this.getBoundingRect(),i=this._rawTransformable;i.transform=o.calculateTransform(new Zr(t,e,n,r));var a=i.parent;i.parent=null,i.decomposeTransform(),i.parent=a,this._updateTransform()},e.prototype.setCenter=function(t){t&&(this._center=t,this._updateCenterAndZoom())},e.prototype.setZoom=function(t){t=t||1;var e=this.zoomLimit;e&&(null!=e.max&&(t=Math.min(e.max,t)),null!=e.min&&(t=Math.max(e.min,t))),this._zoom=t,this._updateCenterAndZoom()},e.prototype.getDefaultCenter=function(){var t=this.getBoundingRect(),e=t.x+t.width/2,n=t.y+t.height/2;return[e,n]},e.prototype.getCenter=function(){return this._center||this.getDefaultCenter()},e.prototype.getZoom=function(){return this._zoom||1},e.prototype.getRoamTransform=function(){return this._roamTransformable.getLocalTransform()},e.prototype._updateCenterAndZoom=function(){var t=this._rawTransformable.getLocalTransform(),e=this._roamTransformable,n=this.getDefaultCenter(),r=this.getCenter(),o=this.getZoom();r=zt([],r,t),n=zt([],n,t),e.originX=r[0],e.originY=r[1],e.x=n[0]-r[0],e.y=n[1]-r[1],e.scaleX=e.scaleY=o,this._updateTransform()},e.prototype._updateTransform=function(){var t=this._roamTransformable,e=this._rawTransformable;e.parent=t,t.updateTransform(),e.updateTransform(),xr(this.transform||(this.transform=[]),e.transform||yr()),this._rawTransform=e.getLocalTransform(),this.invTransform=this.invTransform||[],Mr(this.invTransform,this.transform),this.decomposeTransform()},e.prototype.getTransformInfo=function(){var t=this._rawTransformable,e=this._roamTransformable,n=new zr;return n.transform=e.transform,n.decomposeTransform(),{roam:{x:n.x,y:n.y,scaleX:n.scaleX,scaleY:n.scaleY},raw:{x:t.x,y:t.y,scaleX:t.scaleX,scaleY:t.scaleY}}},e.prototype.getViewRect=function(){return this._viewRect},e.prototype.getViewRectAfterRoam=function(){var t=this.getBoundingRect().clone();return t.applyTransform(this.transform),t},e.prototype.dataToPoint=function(t,e,n){var r=e?this._rawTransform:this.transform;return n=n||[],r?JO(n,t,r):_t(n,t)},e.prototype.pointToData=function(t){var e=this.invTransform;return e?JO([],t,e):[t[0],t[1]]},e.prototype.convertToPixel=function(t,e,n){var r=tL(e);return r===this?r.dataToPoint(n):null},e.prototype.convertFromPixel=function(t,e,n){var r=tL(e);return r===this?r.pointToData(n):null},e.prototype.containPoint=function(t){return this.getViewRectAfterRoam().contain(t[0],t[1])},e.dimensions=["x","y"],e}(zr);function tL(t){var e=t.seriesModel;return e?e.coordinateSystem:null}var eL=QO,nL={geoJSON:{aspectScale:.75,invertLongitute:!0},geoSVG:{aspectScale:1,invertLongitute:!1}},rL=function(t){function e(e,n,r){var o=t.call(this,e)||this;o.dimensions=["lng","lat"],o.type="geo",o._nameCoordMap=mt(),o.map=n;var i=Ow.load(n,r.nameMap,r.nameProperty),a=Ow.getGeoResource(n);o.resourceType=a?a.type:null;var u=nL[a.type];o._regionsMap=i.regionsMap,o._invertLongitute=u.invertLongitute,o.regions=i.regions,o.aspectScale=at(r.aspectScale,u.aspectScale);var s=i.boundingRect;return o.setBoundingRect(s.x,s.y,s.width,s.height),o}return i(e,t),e.prototype._transformTo=function(t,e,n,r){var o=this.getBoundingRect(),i=this._invertLongitute;o=o.clone(),i&&(o.y=-o.y-o.height);var a=this._rawTransformable;a.transform=o.calculateTransform(new Zr(t,e,n,r));var u=a.parent;a.parent=null,a.decomposeTransform(),a.parent=u,i&&(a.scaleY=-a.scaleY),this._updateTransform()},e.prototype.getRegion=function(t){return this._regionsMap.get(t)},e.prototype.getRegionByCoord=function(t){for(var e=this.regions,n=0;n<e.length;n++){var r=e[n];if("geoJSON"===r.type&&r.contain(t))return e[n]}},e.prototype.addGeoCoord=function(t,e){this._nameCoordMap.set(t,e)},e.prototype.getGeoCoord=function(t){var e=this._regionsMap.get(t);return this._nameCoordMap.get(t)||e&&e.getCenter()},e.prototype.dataToPoint=function(t,e,n){if("string"===typeof t&&(t=this.getGeoCoord(t)),t)return eL.prototype.dataToPoint.call(this,t,e,n)},e.prototype.convertToPixel=function(t,e,n){var r=oL(e);return r===this?r.dataToPoint(n):null},e.prototype.convertFromPixel=function(t,e,n){var r=oL(e);return r===this?r.pointToData(n):null},e}(eL);function oL(t){var e=t.geoModel,n=t.seriesModel;return e?e.coordinateSystem:n?n.coordinateSystem||(n.getReferringComponents("geo",Li).models[0]||{}).coordinateSystem:null}R(rL,eL);var iL=rL;function aL(t,e){var n=t.get("boundingCoords");if(null!=n){var r=n[0],o=n[1];isNaN(r[0])||isNaN(r[1])||isNaN(o[0])||isNaN(o[1])||this.setBoundingRect(r[0],r[1],o[0]-r[0],o[1]-r[1])}var i,a,u,s=this.getBoundingRect(),l=t.get("layoutCenter"),c=t.get("layoutSize"),f=e.getWidth(),d=e.getHeight(),h=s.width/s.height*this.aspectScale,p=!1;if(l&&c&&(i=[Ro(l[0],f),Ro(l[1],d)],a=Ro(c,Math.min(f,d)),isNaN(i[0])||isNaN(i[1])||isNaN(a)||(p=!0)),p)u={},h>1?(u.width=a,u.height=a/h):(u.height=a,u.width=a*h),u.y=i[1]-u.height/2,u.x=i[0]-u.width/2;else{var g=t.getBoxLayoutParams();g.aspect=h,u=lp(g,{width:f,height:d})}this.setViewRect(u.x,u.y,u.width,u.height),this.setCenter(t.get("center")),this.setZoom(t.get("zoom"))}function uL(t,e){z(e.get("geoCoord"),function(e,n){t.addGeoCoord(n,e)})}var sL=function(){function t(){this.dimensions=iL.prototype.dimensions}return t.prototype.create=function(t,e){var n=[];t.eachComponent("geo",function(t,r){var o=t.get("map"),i=new iL(o+r,o,{nameMap:t.get("nameMap"),nameProperty:t.get("nameProperty"),aspectScale:t.get("aspectScale")});i.zoomLimit=t.get("scaleLimit"),n.push(i),t.coordinateSystem=i,i.model=t,i.resize=aL,i.resize(t,e)}),t.eachSeries(function(t){var e=t.get("coordinateSystem");if("geo"===e){var r=t.get("geoIndex")||0;t.coordinateSystem=n[r]}});var r={};return t.eachSeriesByType("map",function(t){if(!t.getHostGeoModel()){var e=t.getMapType();r[e]=r[e]||[],r[e].push(t)}}),z(r,function(t,r){var o=B(t,function(t){return t.get("nameMap")}),i=new iL(r,r,{nameMap:A(o),nameProperty:t[0].get("nameProperty"),aspectScale:t[0].get("aspectScale")});i.zoomLimit=it.apply(null,B(t,function(t){return t.get("scaleLimit")})),n.push(i),i.resize=aL,i.resize(t[0],e),z(t,function(t){t.coordinateSystem=i,uL(i,t)})}),n},t.prototype.getFilledRegions=function(t,e,n,r){for(var o=(t||[]).slice(),i=mt(),a=0;a<o.length;a++)i.set(o[a].name,o[a]);var u=Ow.load(e,n,r);return z(u.regions,function(t){var e=t.name;!i.get(e)&&o.push({name:e})}),o},t}(),lL=new sL,cL=lL,fL=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n}return i(e,t),e.prototype.init=function(t,e,n){var r=Ow.getGeoResource(t.map);if(r&&"geoJSON"===r.type){var o=t.itemStyle=t.itemStyle||{};"color"in o||(o.color="#eee")}this.mergeDefaultAndTheme(t,n),ui(t,"label",["show"])},e.prototype.optionUpdated=function(){var t=this,e=this.option;e.regions=cL.getFilledRegions(e.regions,e.map,e.nameMap,e.nameProperty);var n={};this._optionModelMap=V(e.regions||[],function(e,r){var o=r.name;return o&&(e.set(o,new Yd(r,t,t.ecModel)),r.selected&&(n[o]=!0)),e},mt()),e.selectedMap||(e.selectedMap=n)},e.prototype.getRegionModel=function(t){return this._optionModelMap.get(t)||new Yd(null,this,this.ecModel)},e.prototype.getFormattedLabel=function(t,e){var n=this.getRegionModel(t),r="normal"===e?n.get(["label","formatter"]):n.get(["emphasis","label","formatter"]),o={name:t};return"function"===typeof r?(o.status=e,r(o)):"string"===typeof r?r.replace("{a}",null!=t?t:""):void 0},e.prototype.setZoom=function(t){this.option.zoom=t},e.prototype.setCenter=function(t){this.option.center=t},e.prototype.select=function(t){var e=this.option,n=e.selectedMode;if(n){"multiple"!==n&&(e.selectedMap=null);var r=e.selectedMap||(e.selectedMap={});r[t]=!0}},e.prototype.unSelect=function(t){var e=this.option.selectedMap;e&&(e[t]=!1)},e.prototype.toggleSelected=function(t){this[this.isSelected(t)?"unSelect":"select"](t)},e.prototype.isSelected=function(t){var e=this.option.selectedMap;return!(!e||!e[t])},e.type="geo",e.layoutMode="box",e.defaultOption={zlevel:0,z:0,show:!0,left:"center",top:"center",aspectScale:null,silent:!1,map:"",boundingCoords:null,center:null,zoom:1,scaleLimit:null,label:{show:!1,color:"#000"},itemStyle:{borderWidth:.5,borderColor:"#444"},emphasis:{label:{show:!0,color:"rgb(100,0,0)"},itemStyle:{color:"rgba(255,215,0,0.8)"}},select:{label:{show:!0,color:"rgb(100,0,0)"},itemStyle:{color:"rgba(255,215,0,0.8)"}},regions:[]},e}(bp),dL=fL;function hL(t,e,n){var r=t.getZoom(),o=t.getCenter(),i=e.zoom,a=t.dataToPoint(o);if(null!=e.dx&&null!=e.dy&&(a[0]-=e.dx,a[1]-=e.dy,t.setCenter(t.pointToData(a))),null!=i){if(n){var u=n.min||0,s=n.max||1/0;i=Math.max(Math.min(r*i,s),u)/r}t.scaleX*=i,t.scaleY*=i;var l=(e.originX-t.x)*(i-1),c=(e.originY-t.y)*(i-1);t.x-=l,t.y-=c,t.updateTransform(),t.setCenter(t.pointToData(a)),t.setZoom(i*r)}return{center:t.getCenter(),zoom:t.getZoom()}}var pL=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n.focusBlurEnabled=!0,n}return i(e,t),e.prototype.init=function(t,e){var n=new GO(e);this._mapDraw=n,this.group.add(n.group),this._api=e},e.prototype.render=function(t,e,n,r){var o=this._mapDraw;t.get("show")?o.draw(t,e,n,this,r):this._mapDraw.group.removeAll(),o.group.on("click",this._handleRegionClick,this),o.group.silent=t.get("silent"),this._model=t,this.updateSelectStatus(t,e,n)},e.prototype._handleRegionClick=function(t){var e;Cb(t.target,function(t){return null!=(e=Gs(t).eventData)},!0),e&&this._api.dispatchAction({type:"geoToggleSelect",geoId:this._model.id,name:e.name})},e.prototype.updateSelectStatus=function(t,e,n){var r=this;this._mapDraw.group.traverse(function(t){var e=Gs(t).eventData;if(e)return r._model.isSelected(e.name)?n.enterSelect(t):n.leaveSelect(t),!0})},e.prototype.findHighDownDispatchers=function(t){return this._mapDraw&&this._mapDraw.findHighDownDispatchers(t,this._model)},e.prototype.dispose=function(){this._mapDraw&&this._mapDraw.remove()},e.type="geo",e}(Lv),gL=pL;function mL(t){function e(e,n){n.update="geo:updateSelectStatus",t.registerAction(n,function(t,n){var r={},o=[];return n.eachComponent({mainType:"geo",query:t},function(n){n[e](t.name);var i=n.coordinateSystem;z(i.regions,function(t){r[t.name]=n.isSelected(t.name)||!1});var a=[];z(r,function(t,e){r[e]&&a.push(e)}),o.push({geoIndex:n.componentIndex,name:a})}),{selected:r,allSelected:o,name:t.name}})}t.registerCoordinateSystem("geo",cL),t.registerComponentModel(dL),t.registerComponentView(gL),e("toggleSelected",{type:"geoToggleSelect",event:"geoselectchanged"}),e("select",{type:"geoSelect",event:"geoselected"}),e("unSelect",{type:"geoUnSelect",event:"geounselected"}),t.registerAction({type:"geoRoam",event:"geoRoam",update:"updateTransform"},function(t,e){var n=t.componentType||"series";e.eachComponent({mainType:n,query:t},function(e){var r=e.coordinateSystem;if("geo"===r.type){var o=hL(r,t,e.get("scaleLimit"));e.setCenter&&e.setCenter(o.center),e.setZoom&&e.setZoom(o.zoom),"series"===n&&z(e.seriesGroup,function(t){t.setCenter(o.center),t.setZoom(o.zoom)})}})})}function vL(t){mS(mL),t.registerChartView(XO),t.registerSeriesModel(qO),t.registerLayout(KO),t.registerProcessor(t.PRIORITY.PROCESSOR.STATISTIC,$O),wb("map",t.registerAction)}function yL(t){var e=t;e.hierNode={defaultAncestor:null,ancestor:e,prelim:0,modifier:0,change:0,shift:0,i:0,thread:null};var n,r,o=[e];while(n=o.pop())if(r=n.children,n.isExpand&&r.length)for(var i=r.length,a=i-1;a>=0;a--){var u=r[a];u.hierNode={defaultAncestor:null,ancestor:u,prelim:0,modifier:0,change:0,shift:0,i:a,thread:null},o.push(u)}}function bL(t,e){var n=t.isExpand?t.children:[],r=t.parentNode.children,o=t.hierNode.i?r[t.hierNode.i-1]:null;if(n.length){CL(t);var i=(n[0].hierNode.prelim+n[n.length-1].hierNode.prelim)/2;o?(t.hierNode.prelim=o.hierNode.prelim+e(t,o),t.hierNode.modifier=t.hierNode.prelim-i):t.hierNode.prelim=i}else o&&(t.hierNode.prelim=o.hierNode.prelim+e(t,o));t.parentNode.hierNode.defaultAncestor=ML(t,o,t.parentNode.hierNode.defaultAncestor||r[0],e)}function xL(t){var e=t.hierNode.prelim+t.parentNode.hierNode.modifier;t.setLayout({x:e},!0),t.hierNode.modifier+=t.parentNode.hierNode.modifier}function wL(t){return arguments.length?t:IL}function _L(t,e){return t-=Math.PI/2,{x:e*Math.cos(t),y:e*Math.sin(t)}}function SL(t,e){return lp(t.getBoxLayoutParams(),{width:e.getWidth(),height:e.getHeight()})}function CL(t){var e=t.children,n=e.length,r=0,o=0;while(--n>=0){var i=e[n];i.hierNode.prelim+=r,i.hierNode.modifier+=r,o+=i.hierNode.change,r+=i.hierNode.shift+o}}function ML(t,e,n,r){if(e){var o=t,i=t,a=i.parentNode.children[0],u=e,s=o.hierNode.modifier,l=i.hierNode.modifier,c=a.hierNode.modifier,f=u.hierNode.modifier;while(u=TL(u),i=kL(i),u&&i){o=TL(o),a=kL(a),o.hierNode.ancestor=t;var d=u.hierNode.prelim+f-i.hierNode.prelim-l+r(u,i);d>0&&(AL(DL(u,t,n),t,d),l+=d,s+=d),f+=u.hierNode.modifier,l+=i.hierNode.modifier,s+=o.hierNode.modifier,c+=a.hierNode.modifier}u&&!TL(o)&&(o.hierNode.thread=u,o.hierNode.modifier+=f-s),i&&!kL(a)&&(a.hierNode.thread=i,a.hierNode.modifier+=l-c,n=t)}return n}function TL(t){var e=t.children;return e.length&&t.isExpand?e[e.length-1]:t.hierNode.thread}function kL(t){var e=t.children;return e.length&&t.isExpand?e[0]:t.hierNode.thread}function DL(t,e,n){return t.hierNode.ancestor.parentNode===e.parentNode?t.hierNode.ancestor:n}function AL(t,e,n){var r=n/(e.hierNode.i-t.hierNode.i);e.hierNode.change-=r,e.hierNode.shift+=n,e.hierNode.modifier+=n,e.hierNode.prelim+=n,t.hierNode.change+=r}function IL(t,e){return t.parentNode===e.parentNode?1:2}var OL=function(){function t(){this.parentPoint=[],this.childPoints=[]}return t}(),LL=function(t){function e(e){return t.call(this,e)||this}return i(e,t),e.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},e.prototype.getDefaultShape=function(){return new OL},e.prototype.buildPath=function(t,e){var n=e.childPoints,r=n.length,o=e.parentPoint,i=n[0],a=n[r-1];if(1===r)return t.moveTo(o[0],o[1]),void t.lineTo(i[0],i[1]);var u=e.orient,s="TB"===u||"BT"===u?0:1,l=1-s,c=Ro(e.forkPosition,1),f=[];f[s]=o[s],f[l]=o[l]+(a[l]-o[l])*c,t.moveTo(o[0],o[1]),t.lineTo(f[0],f[1]),t.moveTo(i[0],i[1]),f[s]=i[s],t.lineTo(f[0],f[1]),f[s]=a[s],t.lineTo(f[0],f[1]),t.lineTo(a[0],a[1]);for(var d=1;d<r-1;d++){var h=n[d];t.moveTo(h[0],h[1]),f[s]=h[s],t.lineTo(f[0],f[1])}},e}(ds),EL=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n._mainGroup=new _o,n}return i(e,t),e.prototype.init=function(t,e){this._controller=new kO(e.getZr()),this._controllerHost={target:this.group},this.group.add(this._mainGroup)},e.prototype.render=function(t,e,n){var r=t.getData(),o=t.layoutInfo,i=this._mainGroup,a=t.get("layout");"radial"===a?(i.x=o.x+o.width/2,i.y=o.y+o.height/2):(i.x=o.x,i.y=o.y),this._updateViewCoordSys(t),this._updateController(t,e,n);var u=this._data;r.diff(u).add(function(e){NL(r,e)&&RL(r,e,null,i,t)}).update(function(e,n){var o=u.getItemGraphicEl(n);NL(r,e)?RL(r,e,o,i,t):o&&zL(u,n,o,i,t)}).remove(function(e){var n=u.getItemGraphicEl(e);n&&zL(u,e,n,i,t)}).execute(),this._nodeScaleRatio=t.get("nodeScaleRatio"),this._updateNodeAndLinkScale(t),!0===t.get("expandAndCollapse")&&r.eachItemGraphicEl(function(e,r){e.off("click").on("click",function(){n.dispatchAction({type:"treeExpandAndCollapse",seriesId:t.id,dataIndex:r})})}),this._data=r},e.prototype._updateViewCoordSys=function(t){var e=t.getData(),n=[];e.each(function(t){var r=e.getItemLayout(t);!r||isNaN(r.x)||isNaN(r.y)||n.push([+r.x,+r.y])});var r=[],o=[];hu(n,r,o);var i=this._min,a=this._max;o[0]-r[0]===0&&(r[0]=i?i[0]:r[0]-1,o[0]=a?a[0]:o[0]+1),o[1]-r[1]===0&&(r[1]=i?i[1]:r[1]-1,o[1]=a?a[1]:o[1]+1);var u=t.coordinateSystem=new eL;u.zoomLimit=t.get("scaleLimit"),u.setBoundingRect(r[0],r[1],o[0]-r[0],o[1]-r[1]),u.setCenter(t.get("center")),u.setZoom(t.get("zoom")),this.group.attr({x:u.x,y:u.y,scaleX:u.scaleX,scaleY:u.scaleY}),this._min=r,this._max=o},e.prototype._updateController=function(t,e,n){var r=this,o=this._controller,i=this._controllerHost,a=this.group;o.setPointerChecker(function(e,r,o){var i=a.getBoundingRect();return i.applyTransform(a.transform),i.contain(r,o)&&!OO(e,n,t)}),o.enable(t.get("roam")),i.zoomLimit=t.get("scaleLimit"),i.zoom=t.coordinateSystem.getZoom(),o.off("pan").off("zoom").on("pan",function(e){DO(i,e.dx,e.dy),n.dispatchAction({seriesId:t.id,type:"treeRoam",dx:e.dx,dy:e.dy})}).on("zoom",function(e){AO(i,e.scale,e.originX,e.originY),n.dispatchAction({seriesId:t.id,type:"treeRoam",zoom:e.scale,originX:e.originX,originY:e.originY}),r._updateNodeAndLinkScale(t),n.updateLabelLayout()})},e.prototype._updateNodeAndLinkScale=function(t){var e=t.getData(),n=this._getNodeGlobalScale(t);e.eachItemGraphicEl(function(t,e){t.setSymbolScale(n)})},e.prototype._getNodeGlobalScale=function(t){var e=t.coordinateSystem;if("view"!==e.type)return 1;var n=this._nodeScaleRatio,r=e.scaleX||1,o=e.getZoom(),i=(o-1)*n+1;return i/r},e.prototype.dispose=function(){this._controller&&this._controller.dispose(),this._controllerHost=null},e.prototype.remove=function(){this._mainGroup.removeAll(),this._data=null},e.type="tree",e}(Wv);function NL(t,e){var n=t.getItemLayout(e);return n&&!isNaN(n.x)&&!isNaN(n.y)}function RL(t,e,n,r,o){var i=!n,a=t.tree.getNodeByDataIndex(e),u=a.getModel(),s=a.getVisual("style").fill,l=!1===a.isExpand&&0!==a.children.length?s:"#fff",c=t.tree.root,f=a.parentNode===c?a:a.parentNode||a,d=t.getItemGraphicEl(f.dataIndex),h=f.getLayout(),p=d?{x:d.__oldX,y:d.__oldY,rawX:d.__radialOldRawX,rawY:d.__radialOldRawY}:h,g=a.getLayout();i?(n=new YM(t,e,null,{symbolInnerColor:l,useNameLabel:!0}),n.x=p.x,n.y=p.y):n.updateData(t,e,null,{symbolInnerColor:l,useNameLabel:!0}),n.__radialOldRawX=n.__radialRawX,n.__radialOldRawY=n.__radialRawY,n.__radialRawX=g.rawX,n.__radialRawY=g.rawY,r.add(n),t.setItemGraphicEl(e,n),n.__oldX=n.x,n.__oldY=n.y,Qf(n,{x:g.x,y:g.y},o);var m=n.getSymbolPath();if("radial"===o.get("layout")){var v=c.children[0],y=v.getLayout(),b=v.children.length,x=void 0,w=void 0;if(g.x===y.x&&!0===a.isExpand){var _={x:(v.children[0].getLayout().x+v.children[b-1].getLayout().x)/2,y:(v.children[0].getLayout().y+v.children[b-1].getLayout().y)/2};x=Math.atan2(_.y-y.y,_.x-y.x),x<0&&(x=2*Math.PI+x),w=_.x<y.x,w&&(x-=Math.PI)}else x=Math.atan2(g.y-y.y,g.x-y.x),x<0&&(x=2*Math.PI+x),0===a.children.length||0!==a.children.length&&!1===a.isExpand?(w=g.x<y.x,w&&(x-=Math.PI)):(w=g.x>y.x,w||(x-=Math.PI));var S=w?"left":"right",C=u.getModel("label"),M=C.get("rotate"),T=M*(Math.PI/180),k=m.getTextContent();k&&(m.setTextConfig({position:C.get("position")||S,rotation:null==M?-x:T,origin:"center"}),k.setStyle("verticalAlign","middle"))}var D=u.get(["emphasis","focus"]),A="ancestor"===D?a.getAncestorsIndices():"descendant"===D?a.getDescendantIndices():null;A&&(Gs(n).focus=A),PL(o,a,c,n,p,h,g,r),n.__edge&&(n.onHoverStateChange=function(e){if("blur"!==e){var r=a.parentNode&&t.getItemGraphicEl(a.parentNode.dataIndex);r&&r.hoverState===Zs||yl(n.__edge,e)}})}function PL(t,e,n,r,o,i,a,u){var s=e.getModel(),l=t.get("edgeShape"),c=t.get("layout"),f=t.getOrient(),d=t.get(["lineStyle","curveness"]),h=t.get("edgeForkPosition"),p=s.getModel("lineStyle").getLineStyle(),g=r.__edge;if("curve"===l)e.parentNode&&e.parentNode!==n&&(g||(g=r.__edge=new gf({shape:BL(c,f,d,o,o)})),Qf(g,{shape:BL(c,f,d,i,a)},t));else if("polyline"===l)if("orthogonal"===c){if(e!==n&&e.children&&0!==e.children.length&&!0===e.isExpand){for(var m=e.children,v=[],y=0;y<m.length;y++){var b=m[y].getLayout();v.push([b.x,b.y])}g||(g=r.__edge=new LL({shape:{parentPoint:[a.x,a.y],childPoints:[[a.x,a.y]],orient:f,forkPosition:h}})),Qf(g,{shape:{parentPoint:[a.x,a.y],childPoints:v}},t)}}else 0;g&&(g.useStyle(O({strokeNoScale:!0,fill:null},p)),ql(g,s,"lineStyle"),Cl(g),u.add(g))}function zL(t,e,n,r,o){var i,a=t.tree.getNodeByDataIndex(e),u=t.tree.root,s=a.parentNode===u?a:a.parentNode||a;while(i=s.getLayout(),null==i)s=s.parentNode===u?s:s.parentNode||s;var l={duration:o.get("animationDurationUpdate"),easing:o.get("animationEasingUpdate")};ed(n,{x:i.x+1,y:i.y+1},o,{cb:function(){r.remove(n),t.setItemGraphicEl(e,null)},removeOpt:l}),n.fadeOut(null,{fadeLabel:!0,animation:l});var c=t.getItemGraphicEl(s.dataIndex),f=c.__edge,d=n.__edge||(!1===s.isExpand||1===s.children.length?f:void 0),h=o.get("edgeShape"),p=o.get("layout"),g=o.get("orient"),m=o.get(["lineStyle","curveness"]);d&&("curve"===h?ed(d,{shape:BL(p,g,m,i,i),style:{opacity:0}},o,{cb:function(){r.remove(d)},removeOpt:l}):"polyline"===h&&"orthogonal"===o.get("layout")&&ed(d,{shape:{parentPoint:[i.x,i.y],childPoints:[[i.x,i.y]]},style:{opacity:0}},o,{cb:function(){r.remove(d)},removeOpt:l}))}function BL(t,e,n,r,o){var i,a,u,s,l,c,f,d;if("radial"===t){l=r.rawX,f=r.rawY,c=o.rawX,d=o.rawY;var h=_L(l,f),p=_L(l,f+(d-f)*n),g=_L(c,d+(f-d)*n),m=_L(c,d);return{x1:h.x||0,y1:h.y||0,x2:m.x||0,y2:m.y||0,cpx1:p.x||0,cpy1:p.y||0,cpx2:g.x||0,cpy2:g.y||0}}return l=r.x,f=r.y,c=o.x,d=o.y,"LR"!==e&&"RL"!==e||(i=l+(c-l)*n,a=f,u=c+(l-c)*n,s=d),"TB"!==e&&"BT"!==e||(i=l,a=f+(d-f)*n,u=c,s=d+(f-d)*n),{x1:l,y1:f,x2:c,y2:d,cpx1:i,cpy1:a,cpx2:u,cpy2:s}}var VL=EL,HL=Di();function FL(t){var e=t.mainData,n=t.datas;n||(n={main:e},t.datasAttr={main:"data"}),t.datas=t.mainData=null,qL(e,n,t),z(n,function(n){z(e.TRANSFERABLE_METHODS,function(e){n.wrapMethod(e,j(WL,t))})}),e.wrapMethod("cloneShallow",j(GL,t)),z(e.CHANGABLE_METHODS,function(n){e.wrapMethod(n,j(UL,t))}),ct(n[e.dataType]===e)}function WL(t,e){if(YL(this)){var n=I({},HL(this).datas);n[this.dataType]=e,qL(e,n,t)}else ZL(e,this.dataType,HL(this).mainData,t);return e}function UL(t,e){return t.struct&&t.struct.update(),e}function GL(t,e){return z(HL(e).datas,function(n,r){n!==e&&ZL(n.cloneShallow(),r,e,t)}),e}function jL(t){var e=HL(this).mainData;return null==t||null==e?e:HL(e).datas[t]}function XL(){var t=HL(this).mainData;return null==t?[{data:t}]:B(W(HL(t).datas),function(e){return{type:e,data:HL(t).datas[e]}})}function YL(t){return HL(t).mainData===t}function qL(t,e,n){HL(t).datas={},z(e,function(e,r){ZL(e,r,t,n)})}function ZL(t,e,n,r){HL(n).datas[e]=t,HL(t).mainData=n,t.dataType=e,r.struct&&(t[r.structAttr]=r.struct,r.struct[r.datasAttr[e]]=t),t.getLinkedData=jL,t.getLinkedDataAll=XL}var $L=FL,KL=function(){function t(t,e){this.depth=0,this.height=0,this.dataIndex=-1,this.children=[],this.viewChildren=[],this.isExpand=!1,this.name=t||"",this.hostTree=e}return t.prototype.isRemoved=function(){return this.dataIndex<0},t.prototype.eachNode=function(t,e,n){"function"===typeof t&&(n=e,e=t,t=null),t=t||{},q(t)&&(t={order:t});var r,o=t.order||"preorder",i=this[t.attr||"children"];"preorder"===o&&(r=e.call(n,this));for(var a=0;!r&&a<i.length;a++)i[a].eachNode(t,e,n);"postorder"===o&&e.call(n,this)},t.prototype.updateDepthAndHeight=function(t){var e=0;this.depth=t;for(var n=0;n<this.children.length;n++){var r=this.children[n];r.updateDepthAndHeight(t+1),r.height>e&&(e=r.height)}this.height=e+1},t.prototype.getNodeById=function(t){if(this.getId()===t)return this;for(var e=0,n=this.children,r=n.length;e<r;e++){var o=n[e].getNodeById(t);if(o)return o}},t.prototype.contains=function(t){if(t===this)return!0;for(var e=0,n=this.children,r=n.length;e<r;e++){var o=n[e].contains(t);if(o)return o}},t.prototype.getAncestors=function(t){var e=[],n=t?this:this.parentNode;while(n)e.push(n),n=n.parentNode;return e.reverse(),e},t.prototype.getAncestorsIndices=function(){var t=[],e=this;while(e)t.push(e.dataIndex),e=e.parentNode;return t.reverse(),t},t.prototype.getDescendantIndices=function(){var t=[];return this.eachNode(function(e){t.push(e.dataIndex)}),t},t.prototype.getValue=function(t){var e=this.hostTree.data;return e.get(e.getDimension(t||"value"),this.dataIndex)},t.prototype.setLayout=function(t,e){this.dataIndex>=0&&this.hostTree.data.setItemLayout(this.dataIndex,t,e)},t.prototype.getLayout=function(){return this.hostTree.data.getItemLayout(this.dataIndex)},t.prototype.getModel=function(t){if(!(this.dataIndex<0)){var e=this.hostTree,n=e.data.getItemModel(this.dataIndex);return n.getModel(t)}},t.prototype.getLevelModel=function(){return(this.hostTree.levelModels||[])[this.depth]},t.prototype.setVisual=function(t,e){this.dataIndex>=0&&this.hostTree.data.setItemVisual(this.dataIndex,t,e)},t.prototype.getVisual=function(t){return this.hostTree.data.getItemVisual(this.dataIndex,t)},t.prototype.getRawIndex=function(){return this.hostTree.data.getRawIndex(this.dataIndex)},t.prototype.getId=function(){return this.hostTree.data.getId(this.dataIndex)},t.prototype.isAncestorOf=function(t){var e=t.parentNode;while(e){if(e===this)return!0;e=e.parentNode}return!1},t.prototype.isDescendantOf=function(t){return t!==this&&t.isAncestorOf(this)},t}(),JL=function(){function t(t){this.type="tree",this._nodes=[],this.hostModel=t}return t.prototype.eachNode=function(t,e,n){this.root.eachNode(t,e,n)},t.prototype.getNodeByDataIndex=function(t){var e=this.data.getRawIndex(t);return this._nodes[e]},t.prototype.getNodeById=function(t){return this.root.getNodeById(t)},t.prototype.update=function(){for(var t=this.data,e=this._nodes,n=0,r=e.length;n<r;n++)e[n].dataIndex=-1;for(n=0,r=t.count();n<r;n++)e[t.getRawIndex(n)].dataIndex=n},t.prototype.clearLayouts=function(){this.data.clearItemLayouts()},t.createTree=function(e,n,r){var o=new t(n),i=[],a=1;function u(t,e){var n=t.value;a=Math.max(a,X(n)?n.length:1),i.push(t);var r=new KL(xi(t.name,""),o);e?QL(r,e):o.root=r,o._nodes.push(r);var s=t.children;if(s)for(var l=0;l<s.length;l++)u(s[l],r)}u(e),o.root.updateDepthAndHeight(0);var s=AM(i,{coordDimensions:["value"],dimensionsCount:a}),l=new CM(s,n);return l.initData(i),r&&r(l),$L({mainData:l,struct:o,structAttr:"tree"}),o.update(),o},t}();function QL(t,e){var n=e.children;t.parentNode!==e&&(n.push(t),t.parentNode=e)}var tE=JL;function eE(t,e,n){if(t&&E(e,t.type)>=0){var r=n.getData().tree.root,o=t.targetNode;if("string"===typeof o&&(o=r.getNodeById(o)),o&&r.contains(o))return{node:o};var i=t.targetNodeId;if(null!=i&&(o=r.getNodeById(i)))return{node:o}}}function nE(t){var e=[];while(t)t=t.parentNode,t&&e.push(t);return e.reverse()}function rE(t,e){var n=nE(t);return E(n,e)>=0}function oE(t,e){var n=[];while(t){var r=t.dataIndex;n.push({name:t.name,dataIndex:r,value:e.getRawValue(r)}),t=t.parentNode}return n.reverse(),n}var iE=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.hasSymbolVisual=!0,e.ignoreStyleOnData=!0,e}return i(e,t),e.prototype.getInitialData=function(t){var e={name:t.name,children:t.data},n=t.leaves||{},r=new Yd(n,this,this.ecModel),o=tE.createTree(e,this,i);function i(t){t.wrapMethod("getItemModel",function(t,e){var n=o.getNodeByDataIndex(e);return n&&n.children.length&&n.isExpand||(t.parentModel=r),t})}var a=0;o.eachNode("preorder",function(t){t.depth>a&&(a=t.depth)});var u=t.expandAndCollapse,s=u&&t.initialTreeDepth>=0?t.initialTreeDepth:a;return o.root.eachNode("preorder",function(t){var e=t.hostTree.data.getRawDataItem(t.dataIndex);t.isExpand=e&&null!=e.collapsed?!e.collapsed:t.depth<=s}),o.data},e.prototype.getOrient=function(){var t=this.get("orient");return"horizontal"===t?t="LR":"vertical"===t&&(t="TB"),t},e.prototype.setZoom=function(t){this.option.zoom=t},e.prototype.setCenter=function(t){this.option.center=t},e.prototype.formatTooltip=function(t,e,n){var r=this.getData().tree,o=r.root.children[0],i=r.getNodeByDataIndex(t),a=i.getValue(),u=i.name;while(i&&i!==o)u=i.parentNode.name+"."+u,i=i.parentNode;return rv("nameValue",{name:u,value:a,noValue:isNaN(a)||null==a})},e.prototype.getDataParams=function(e){var n=t.prototype.getDataParams.apply(this,arguments),r=this.getData().tree.getNodeByDataIndex(e);return n.treeAncestors=oE(r,this),n},e.type="series.tree",e.layoutMode="box",e.defaultOption={zlevel:0,z:2,coordinateSystem:"view",left:"12%",top:"12%",right:"12%",bottom:"12%",layout:"orthogonal",edgeShape:"curve",edgeForkPosition:"50%",roam:!1,nodeScaleRatio:.4,center:null,zoom:1,orient:"LR",symbol:"emptyCircle",symbolSize:7,expandAndCollapse:!0,initialTreeDepth:2,lineStyle:{color:"#ccc",width:1.5,curveness:.5},itemStyle:{color:"lightsteelblue",borderWidth:1.5},label:{show:!0},animationEasing:"linear",animationDuration:700,animationDurationUpdate:500},e}(Iv),aE=iE;function uE(t,e,n){var r,o=[t],i=[];while(r=o.pop())if(i.push(r),r.isExpand){var a=r.children;if(a.length)for(var u=0;u<a.length;u++)o.push(a[u])}while(r=i.pop())e(r,n)}function sE(t,e){var n,r=[t];while(n=r.pop())if(e(n),n.isExpand){var o=n.children;if(o.length)for(var i=o.length-1;i>=0;i--)r.push(o[i])}}function lE(t,e){t.eachSeriesByType("tree",function(t){cE(t,e)})}function cE(t,e){var n=SL(t,e);t.layoutInfo=n;var r=t.get("layout"),o=0,i=0,a=null;"radial"===r?(o=2*Math.PI,i=Math.min(n.height,n.width)/2,a=wL(function(t,e){return(t.parentNode===e.parentNode?1:2)/t.depth})):(o=n.width,i=n.height,a=wL());var u=t.getData().tree.root,s=u.children[0];if(s){yL(u),uE(s,bL,a),u.hierNode.modifier=-s.hierNode.prelim,sE(s,xL);var l=s,c=s,f=s;sE(s,function(t){var e=t.getLayout().x;e<l.getLayout().x&&(l=t),e>c.getLayout().x&&(c=t),t.depth>f.depth&&(f=t)});var d=l===c?1:a(l,c)/2,h=d-l.getLayout().x,p=0,g=0,m=0,v=0;if("radial"===r)p=o/(c.getLayout().x+d+h),g=i/(f.depth-1||1),sE(s,function(t){m=(t.getLayout().x+h)*p,v=(t.depth-1)*g;var e=_L(m,v);t.setLayout({x:e.x,y:e.y,rawX:m,rawY:v},!0)});else{var y=t.getOrient();"RL"===y||"LR"===y?(g=i/(c.getLayout().x+d+h),p=o/(f.depth-1||1),sE(s,function(t){v=(t.getLayout().x+h)*g,m="LR"===y?(t.depth-1)*p:o-(t.depth-1)*p,t.setLayout({x:m,y:v},!0)})):"TB"!==y&&"BT"!==y||(p=o/(c.getLayout().x+d+h),g=i/(f.depth-1||1),sE(s,function(t){m=(t.getLayout().x+h)*p,v="TB"===y?(t.depth-1)*g:i-(t.depth-1)*g,t.setLayout({x:m,y:v},!0)}))}}}function fE(t){t.eachSeriesByType("tree",function(t){var e=t.getData(),n=e.tree;n.eachNode(function(t){var n=t.getModel(),r=n.getModel("itemStyle").getItemStyle(),o=e.ensureUniqueItemVisual(t.dataIndex,"style");I(o,r)})})}function dE(t){t.registerAction({type:"treeExpandAndCollapse",event:"treeExpandAndCollapse",update:"update"},function(t,e){e.eachComponent({mainType:"series",subType:"tree",query:t},function(e){var n=t.dataIndex,r=e.getData().tree,o=r.getNodeByDataIndex(n);o.isExpand=!o.isExpand})}),t.registerAction({type:"treeRoam",event:"treeRoam",update:"none"},function(t,e){e.eachComponent({mainType:"series",subType:"tree",query:t},function(e){var n=e.coordinateSystem,r=hL(n,t);e.setCenter&&e.setCenter(r.center),e.setZoom&&e.setZoom(r.zoom)})})}function hE(t){t.registerChartView(VL),t.registerSeriesModel(aE),t.registerLayout(lE),t.registerVisual(fE),dE(t)}var pE=function(){},gE=["treemapZoomToNode","treemapRender","treemapMove"];function mE(t){for(var e=0;e<gE.length;e++)t.registerAction({type:gE[e],update:"updateView"},pE);t.registerAction({type:"treemapRootToNode",update:"updateView"},function(t,e){function n(e,n){var r=["treemapZoomToNode","treemapRootToNode"],o=eE(t,r,e);if(o){var i=e.getViewRoot();i&&(t.direction=rE(i,o.node)?"rollUp":"drillDown"),e.resetViewRoot(o.node)}}e.eachComponent({mainType:"series",subType:"treemap",query:t},n)})}function vE(t){var e=t.getData(),n=e.tree,r={};n.eachNode(function(e){var n=e;while(n&&n.depth>1)n=n.parentNode;var o=Yp(t.ecModel,n.name||n.dataIndex+"",r);e.setVisual("decal",o)})}var yE=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n.preventUsingHoverLayer=!0,n}return i(e,t),e.prototype.getInitialData=function(t,e){var n={name:t.name,children:t.data};bE(n);var r=t.levels||[],o=this.designatedVisualItemStyle={},i=new Yd({itemStyle:o},this,e);r=t.levels=xE(r,e);var a=B(r||[],function(t){return new Yd(t,i,e)},this),u=tE.createTree(n,this,s);function s(t){t.wrapMethod("getItemModel",function(t,e){var n=u.getNodeByDataIndex(e),r=n?a[n.depth]:null;return t.parentModel=r||i,t})}return u.data},e.prototype.optionUpdated=function(){this.resetViewRoot()},e.prototype.formatTooltip=function(t,e,n){var r=this.getData(),o=this.getRawValue(t),i=r.getName(t);return rv("nameValue",{name:i,value:o})},e.prototype.getDataParams=function(e){var n=t.prototype.getDataParams.apply(this,arguments),r=this.getData().tree.getNodeByDataIndex(e);return n.treePathInfo=oE(r,this),n},e.prototype.setLayoutInfo=function(t){this.layoutInfo=this.layoutInfo||{},I(this.layoutInfo,t)},e.prototype.mapIdToIndex=function(t){var e=this._idIndexMap;e||(e=this._idIndexMap=mt(),this._idIndexMapCount=0);var n=e.get(t);return null==n&&e.set(t,n=this._idIndexMapCount++),n},e.prototype.getViewRoot=function(){return this._viewRoot},e.prototype.resetViewRoot=function(t){t?this._viewRoot=t:t=this._viewRoot;var e=this.getRawData().tree.root;t&&(t===e||e.contains(t))||(this._viewRoot=e)},e.prototype.enableAriaDecal=function(){vE(this)},e.type="series.treemap",e.layoutMode="box",e.defaultOption={progressive:0,left:"center",top:"middle",width:"80%",height:"80%",sort:!0,clipWindow:"origin",squareRatio:.5*(1+Math.sqrt(5)),leafDepth:null,drillDownIcon:"▶",zoomToNodeRatio:.1024,roam:!0,nodeClick:"zoomToNode",animation:!0,animationDurationUpdate:900,animationEasing:"quinticInOut",breadcrumb:{show:!0,height:22,left:"center",top:"bottom",emptyItemWidth:25,itemStyle:{color:"rgba(0,0,0,0.7)",textStyle:{color:"#fff"}}},label:{show:!0,distance:0,padding:5,position:"inside",color:"#fff",overflow:"truncate"},upperLabel:{show:!1,position:[0,"50%"],height:20,overflow:"truncate",verticalAlign:"middle"},itemStyle:{color:null,colorAlpha:null,colorSaturation:null,borderWidth:0,gapWidth:0,borderColor:"#fff",borderColorSaturation:null},emphasis:{upperLabel:{show:!0,position:[0,"50%"],ellipsis:!0,verticalAlign:"middle"}},visualDimension:0,visualMin:null,visualMax:null,color:[],colorAlpha:null,colorSaturation:null,colorMappingBy:"index",visibleMin:10,childrenVisibleMin:null,levels:[]},e}(Iv);function bE(t){var e=0;z(t.children,function(t){bE(t);var n=t.value;X(n)&&(n=n[0]),e+=n});var n=t.value;X(n)&&(n=n[0]),(null==n||isNaN(n))&&(n=e),n<0&&(n=0),X(t.value)?t.value[0]=n:t.value=n}function xE(t,e){var n=ai(e.get("color")),r=ai(e.get(["aria","decal","decals"]));if(n){var o,i;t=t||[],z(t,function(t){var e=new Yd(t),n=e.get("color"),r=e.get("decal");(e.get(["itemStyle","color"])||n&&"none"!==n)&&(o=!0),(e.get(["itemStyle","decal"])||r&&"none"!==r)&&(i=!0)});var a=t[0]||(t[0]={});return o||(a.color=n.slice()),!i&&r&&(a.decal=r.slice()),t}}var wE=yE,_E=8,SE=8,CE=5,ME=function(){function t(t){this.group=new _o,t.add(this.group)}return t.prototype.render=function(t,e,n,r){var o=t.getModel("breadcrumb"),i=this.group;if(i.removeAll(),o.get("show")&&n){var a=o.getModel("itemStyle"),u=a.getModel("textStyle"),s={pos:{left:o.get("left"),right:o.get("right"),top:o.get("top"),bottom:o.get("bottom")},box:{width:e.getWidth(),height:e.getHeight()},emptyItemWidth:o.get("emptyItemWidth"),totalWidth:0,renderList:[]};this._prepare(n,s,u),this._renderContent(t,s,a,u,r),cp(i,s.pos,s.box)}},t.prototype._prepare=function(t,e,n){for(var r=t;r;r=r.parentNode){var o=xi(r.getModel().get("name"),""),i=n.getTextRect(o),a=Math.max(i.width+2*_E,e.emptyItemWidth);e.totalWidth+=a+SE,e.renderList.push({node:r,text:o,width:a})}},t.prototype._renderContent=function(t,e,n,r,o){for(var i=0,a=e.emptyItemWidth,u=t.get(["breadcrumb","height"]),s=sp(e.pos,e.box),l=e.totalWidth,c=e.renderList,f=c.length-1;f>=0;f--){var d=c[f],h=d.node,p=d.width,g=d.text;l>s.width&&(l-=p-a,p=a,g=null);var m=new nf({shape:{points:TE(i,0,p,u,f===c.length-1,0===f)},style:O(n.getItemStyle(),{lineJoin:"bevel"}),textContent:new Us({style:{text:g,fill:r.getTextColor(),font:r.getFont()}}),textConfig:{position:"inside"},z2:1e4*Qs,onclick:j(o,h)});m.disableLabelAnimation=!0,this.group.add(m),kE(m,t,h),i+=p+SE}},t.prototype.remove=function(){this.group.removeAll()},t}();function TE(t,e,n,r,o,i){var a=[[o?t:t-CE,e],[t+n,e],[t+n,e+r],[o?t:t-CE,e+r]];return!i&&a.splice(2,0,[t+n+CE,e+r/2]),!o&&a.push([t,e+r/2]),a}function kE(t,e,n){Gs(t).eventData={componentType:"series",componentSubType:"treemap",componentIndex:e.componentIndex,seriesIndex:e.componentIndex,seriesName:e.name,seriesType:"treemap",selfType:"breadcrumb",nodeData:{dataIndex:n&&n.dataIndex,name:n&&n.name},treePathInfo:n&&oE(n,e)}}var DE=ME,AE=function(){function t(){this._storage=[],this._elExistsMap={}}return t.prototype.add=function(t,e,n,r,o){return!this._elExistsMap[t.id]&&(this._elExistsMap[t.id]=!0,this._storage.push({el:t,target:e,duration:n,delay:r,easing:o}),!0)},t.prototype.finished=function(t){return this._finishedCallback=t,this},t.prototype.start=function(){for(var t=this,e=this._storage.length,n=function(){e--,e<=0&&(t._storage.length=0,t._elExistsMap={},t._finishedCallback&&t._finishedCallback())},r=0,o=this._storage.length;r<o;r++){var i=this._storage[r];i.el.animateTo(i.target,{duration:i.duration,delay:i.delay,easing:i.easing,setToFinal:!0,done:n,aborted:n})}return this},t}();function IE(){return new AE}var OE=_o,LE=As,EE=3,NE="label",RE="upperLabel",PE=10*Qs,zE=2*Qs,BE=3*Qs,VE=ta([["fill","color"],["stroke","strokeColor"],["lineWidth","strokeWidth"],["shadowBlur"],["shadowOffsetX"],["shadowOffsetY"],["shadowColor"]]),HE=function(t){var e=VE(t);return e.stroke=e.fill=e.lineWidth=null,e},FE=Di(),WE=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n._state="ready",n._storage=UE(),n}return i(e,t),e.prototype.render=function(t,e,n,r){var o=e.findComponents({mainType:"series",subType:"treemap",query:r});if(!(E(o,t)<0)){this.seriesModel=t,this.api=n,this.ecModel=e;var i=["treemapZoomToNode","treemapRootToNode"],a=eE(r,i,t),u=r&&r.type,s=t.layoutInfo,l=!this._oldTree,c=this._storage,f="treemapRootToNode"===u&&a&&c?{rootNodeGroup:c.nodeGroup[a.node.getRawIndex()],direction:r.direction}:null,d=this._giveContainerGroup(s),h=this._doRender(d,t,f);l||u&&"treemapZoomToNode"!==u&&"treemapRootToNode"!==u?h.renderFinally():this._doAnimation(d,h,t,f),this._resetController(n),this._renderBreadcrumb(t,n,a)}},e.prototype._giveContainerGroup=function(t){var e=this._containerGroup;return e||(e=this._containerGroup=new OE,this._initEvents(e),this.group.add(e)),e.x=t.x,e.y=t.y,e},e.prototype._doRender=function(t,e,n){var r=e.getData().tree,o=this._oldTree,i=UE(),a=UE(),u=this._storage,s=[];function l(t,r,o,l){return GE(e,a,u,n,i,s,t,r,o,l)}f(r.root?[r.root]:[],o&&o.root?[o.root]:[],t,r===o||!o,0);var c=d(u);return this._oldTree=r,this._storage=a,{lastsForAnimation:i,willDeleteEls:c,renderFinally:h};function f(t,e,n,r,o){function i(t){return t.getId()}function a(i,a){var u=null!=i?t[i]:null,s=null!=a?e[a]:null,c=l(u,s,n,o);c&&f(u&&u.viewChildren||[],s&&s.viewChildren||[],c,r,o+1)}r?(e=t,z(t,function(t,e){!t.isRemoved()&&a(e,e)})):new GC(e,t,i,i).add(a).update(a).remove(j(a,null)).execute()}function d(t){var e=UE();return t&&z(t,function(t,n){var r=e[n];z(t,function(t){t&&(r.push(t),FE(t).willDelete=!0)})}),e}function h(){z(c,function(t){z(t,function(t){t.parent&&t.parent.remove(t)})}),z(s,function(t){t.invisible=!0,t.dirty()})}},e.prototype._doAnimation=function(t,e,n,r){if(n.get("animation")){var o=n.get("animationDurationUpdate"),i=n.get("animationEasing"),a=(Y(o)?0:o)||0,u=(Y(i)?null:i)||"cubicOut",s=IE();z(e.willDeleteEls,function(t,e){z(t,function(t,n){if(!t.invisible){var o,i=t.parent,l=FE(i);if(r&&"drillDown"===r.direction)o=i===r.rootNodeGroup?{shape:{x:0,y:0,width:l.nodeWidth,height:l.nodeHeight},style:{opacity:0}}:{style:{opacity:0}};else{var c=0,f=0;l.willDelete||(c=l.nodeWidth/2,f=l.nodeHeight/2),o="nodeGroup"===e?{x:c,y:f,style:{opacity:0}}:{shape:{x:c,y:f,width:0,height:0},style:{opacity:0}}}o&&s.add(t,o,a,0,u)}})}),z(this._storage,function(t,n){z(t,function(t,r){var o=e.lastsForAnimation[n][r],i={};o&&(t instanceof _o?null!=o.oldX&&(i.x=t.x,i.y=t.y,t.x=o.oldX,t.y=o.oldY):(o.oldShape&&(i.shape=I({},t.shape),t.setShape(o.oldShape)),o.fadein?(t.setStyle("opacity",0),i.style={opacity:1}):1!==t.style.opacity&&(i.style={opacity:1})),s.add(t,i,a,0,u))})},this),this._state="animating",s.finished(G(function(){this._state="ready",e.renderFinally()},this)).start()}},e.prototype._resetController=function(t){var e=this._controller;e||(e=this._controller=new kO(t.getZr()),e.enable(this.seriesModel.get("roam")),e.on("pan",G(this._onPan,this)),e.on("zoom",G(this._onZoom,this)));var n=new Zr(0,0,t.getWidth(),t.getHeight());e.setPointerChecker(function(t,e,r){return n.contain(e,r)})},e.prototype._clearController=function(){var t=this._controller;t&&(t.dispose(),t=null)},e.prototype._onPan=function(t){if("animating"!==this._state&&(Math.abs(t.dx)>EE||Math.abs(t.dy)>EE)){var e=this.seriesModel.getData().tree.root;if(!e)return;var n=e.getLayout();if(!n)return;this.api.dispatchAction({type:"treemapMove",from:this.uid,seriesId:this.seriesModel.id,rootRect:{x:n.x+t.dx,y:n.y+t.dy,width:n.width,height:n.height}})}},e.prototype._onZoom=function(t){var e=t.originX,n=t.originY;if("animating"!==this._state){var r=this.seriesModel.getData().tree.root;if(!r)return;var o=r.getLayout();if(!o)return;var i=new Zr(o.x,o.y,o.width,o.height),a=this.seriesModel.layoutInfo;e-=a.x,n-=a.y;var u=yr();_r(u,u,[-e,-n]),Cr(u,u,[t.scale,t.scale]),_r(u,u,[e,n]),i.applyTransform(u),this.api.dispatchAction({type:"treemapRender",from:this.uid,seriesId:this.seriesModel.id,rootRect:{x:i.x,y:i.y,width:i.width,height:i.height}})}},e.prototype._initEvents=function(t){var e=this;t.on("click",function(t){if("ready"===e._state){var n=e.seriesModel.get("nodeClick",!0);if(n){var r=e.findTarget(t.offsetX,t.offsetY);if(r){var o=r.node;if(o.getLayout().isLeafRoot)e._rootToNode(r);else if("zoomToNode"===n)e._zoomToNode(r);else if("link"===n){var i=o.hostTree.data.getItemModel(o.dataIndex),a=i.get("link",!0),u=i.get("target",!0)||"blank";a&&np(a,u)}}}}},this)},e.prototype._renderBreadcrumb=function(t,e,n){var r=this;n||(n=null!=t.get("leafDepth",!0)?{node:t.getViewRoot()}:this.findTarget(e.getWidth()/2,e.getHeight()/2),n||(n={node:t.getData().tree.root})),(this._breadcrumb||(this._breadcrumb=new DE(this.group))).render(t,e,n.node,function(e){"animating"!==r._state&&(rE(t.getViewRoot(),e)?r._rootToNode({node:e}):r._zoomToNode({node:e}))})},e.prototype.remove=function(){this._clearController(),this._containerGroup&&this._containerGroup.removeAll(),this._storage=UE(),this._state="ready",this._breadcrumb&&this._breadcrumb.remove()},e.prototype.dispose=function(){this._clearController()},e.prototype._zoomToNode=function(t){this.api.dispatchAction({type:"treemapZoomToNode",from:this.uid,seriesId:this.seriesModel.id,targetNode:t.node})},e.prototype._rootToNode=function(t){this.api.dispatchAction({type:"treemapRootToNode",from:this.uid,seriesId:this.seriesModel.id,targetNode:t.node})},e.prototype.findTarget=function(t,e){var n,r=this.seriesModel.getViewRoot();return r.eachNode({attr:"viewChildren",order:"preorder"},function(r){var o=this._storage.background[r.getRawIndex()];if(o){var i=o.transformCoordToLocal(t,e),a=o.shape;if(!(a.x<=i[0]&&i[0]<=a.x+a.width&&a.y<=i[1]&&i[1]<=a.y+a.height))return!1;n={node:r,offsetX:i[0],offsetY:i[1]}}},this),n},e.type="treemap",e}(Wv);function UE(){return{nodeGroup:[],background:[],content:[]}}function GE(t,e,n,r,o,i,a,u,s,l){if(a){var c=a.getLayout(),f=t.getData(),d=a.getModel();if(f.setItemGraphicEl(a.dataIndex,null),c&&c.isInView){var h=c.width,p=c.height,g=c.borderWidth,m=c.invisible,v=a.getRawIndex(),y=u&&u.getRawIndex(),b=a.viewChildren,x=c.upperHeight,w=b&&b.length,_=d.getModel("itemStyle"),S=d.getModel(["emphasis","itemStyle"]),C=d.getModel(["blur","itemStyle"]),M=d.getModel(["select","itemStyle"]),T=_.get("borderRadius")||0,k=V("nodeGroup",OE);if(k){if(s.add(k),k.x=c.x||0,k.y=c.y||0,k.markRedraw(),FE(k).nodeWidth=h,FE(k).nodeHeight=p,c.isAboveViewRoot)return k;var D=V("background",LE,l,zE);D&&N(k,D,w&&c.upperLabelHeight);var A=d.get(["emphasis","focus"]),O=d.get(["emphasis","blurScope"]),L="ancestor"===A?a.getAncestorsIndices():"descendant"===A?a.getDescendantIndices():A;if(w)$l(k)&&Zl(k,!1),D&&(Zl(D,!0),f.setItemGraphicEl(a.dataIndex,D),jl(D,L,O));else{var E=V("content",LE,l,BE);E&&R(k,E),D&&$l(D)&&Zl(D,!1),Zl(k,!0),f.setItemGraphicEl(a.dataIndex,k),jl(k,L,O)}return k}}}function N(e,n,r){var o=Gs(n);if(o.dataIndex=a.dataIndex,o.seriesIndex=t.seriesIndex,n.setShape({x:0,y:0,width:h,height:p,r:T}),m)P(n);else{n.invisible=!1;var i=a.getVisual("style"),u=i.stroke,s=HE(_);s.fill=u;var l=VE(S);l.fill=S.get("borderColor");var c=VE(C);c.fill=C.get("borderColor");var f=VE(M);if(f.fill=M.get("borderColor"),r){var d=h-2*g;z(n,u,i.opacity,{x:g,y:0,width:d,height:x})}else n.removeTextContent();n.setStyle(s),n.ensureState("emphasis").style=l,n.ensureState("blur").style=c,n.ensureState("select").style=f,Cl(n)}e.add(n)}function R(e,n){var r=Gs(n);r.dataIndex=a.dataIndex,r.seriesIndex=t.seriesIndex;var o=Math.max(h-2*g,0),i=Math.max(p-2*g,0);if(n.culling=!0,n.setShape({x:g,y:g,width:o,height:i,r:T}),m)P(n);else{n.invisible=!1;var u=a.getVisual("style"),s=u.fill,l=HE(_);l.fill=s,l.decal=u.decal;var c=VE(S),f=VE(C),d=VE(M);z(n,s,u.opacity,null),n.setStyle(l),n.ensureState("emphasis").style=c,n.ensureState("blur").style=f,n.ensureState("select").style=d,Cl(n)}e.add(n)}function P(t){!t.invisible&&i.push(t)}function z(e,n,r,o){var i=d.getModel(o?RE:NE),u=xi(d.get("name"),null),s=i.getShallow("show");_d(e,Sd(d,o?RE:NE),{defaultText:s?u:null,inheritColor:n,defaultOpacity:r,labelFetcher:t,labelDataIndex:a.dataIndex});var l=e.getTextContent(),f=l.style,h=lt(f.padding||0);o&&(e.setTextConfig({layoutRect:o}),l.disableLabelLayout=!0),l.beforeUpdate=function(){var t=Math.max((o?o.width:e.shape.width)-h[1]-h[3],0),n=Math.max((o?o.height:e.shape.height)-h[0]-h[2],0);f.width===t&&f.height===n||l.setStyle({width:t,height:n})},f.truncateMinChar=2,f.lineOverflow="truncate",B(f,o,c);var p=l.getState("emphasis");B(p?p.style:null,o,c)}function B(e,n,r){var o=e?e.text:null;if(!n&&r.isLeafRoot&&null!=o){var i=t.get("drillDownIcon",!0);e.text=i?i+" "+o:o}}function V(t,r,i,a){var u=null!=y&&n[t][y],s=o[t];return u?(n[t][y]=null,H(s,u)):m||(u=new r,u instanceof Ea&&(u.z2=jE(i,a)),F(s,u)),e[t][v]=u}function H(t,e){var n=t[v]={};e instanceof OE?(n.oldX=e.x,n.oldY=e.y):n.oldShape=I({},e.shape)}function F(t,e){var n=t[v]={},i=a.parentNode,u=e instanceof _o;if(i&&(!r||"drillDown"===r.direction)){var s=0,l=0,c=o.background[i.getRawIndex()];!r&&c&&c.oldShape&&(s=c.oldShape.width,l=c.oldShape.height),u?(n.oldX=0,n.oldY=l):n.oldShape={x:s,y:l,width:0,height:0}}n.fadein=!u}}function jE(t,e){return t*PE+e}var XE=WE,YE=z,qE=K,ZE=-1,$E=function(){function t(e){var n=e.mappingMethod,r=e.type,o=this.option=k(e);this.type=r,this.mappingMethod=n,this._normalizeData=sN[n];var i=t.visualHandlers[r];this.applyVisual=i.applyVisual,this.getColorMapper=i.getColorMapper,this._normalizedToVisual=i._normalizedToVisual[n],"piecewise"===n?(QE(o),KE(o)):"category"===n?o.categories?JE(o):QE(o,!0):(ct("linear"!==n||o.dataExtent),QE(o))}return t.prototype.mapValueToVisual=function(t){var e=this._normalizeData(t);return this._normalizedToVisual(e,t)},t.prototype.getNormalizer=function(){return G(this._normalizeData,this)},t.listVisualTypes=function(){return W(t.visualHandlers)},t.isValidType=function(e){return t.visualHandlers.hasOwnProperty(e)},t.eachVisual=function(t,e,n){K(t)?z(t,e,n):e.call(n,t)},t.mapVisual=function(e,n,r){var o,i=X(e)?[]:K(e)?{}:(o=!0,null);return t.eachVisual(e,function(t,e){var a=n.call(r,t,e);o?i=a:i[e]=a}),i},t.retrieveVisuals=function(e){var n,r={};return e&&YE(t.visualHandlers,function(t,o){e.hasOwnProperty(o)&&(r[o]=e[o],n=!0)}),n?r:null},t.prepareVisualTypes=function(t){if(X(t))t=t.slice();else{if(!qE(t))return[];var e=[];YE(t,function(t,n){e.push(n)}),t=e}return t.sort(function(t,e){return"color"===e&&"color"!==t&&0===t.indexOf("color")?1:-1}),t},t.dependsOn=function(t,e){return"color"===e?!(!t||0!==t.indexOf(e)):t===e},t.findPieceIndex=function(t,e,n){for(var r,o=1/0,i=0,a=e.length;i<a;i++){var u=e[i].value;if(null!=u){if(u===t||"string"===typeof u&&u===t+"")return i;n&&f(u,i)}}for(i=0,a=e.length;i<a;i++){var s=e[i],l=s.interval,c=s.close;if(l){if(l[0]===-1/0){if(lN(c[1],t,l[1]))return i}else if(l[1]===1/0){if(lN(c[0],l[0],t))return i}else if(lN(c[0],l[0],t)&&lN(c[1],t,l[1]))return i;n&&f(l[0],i),n&&f(l[1],i)}}if(n)return t===1/0?e.length-1:t===-1/0?0:r;function f(e,n){var i=Math.abs(e-t);i<o&&(o=i,r=n)}},t.visualHandlers={color:{applyVisual:nN("color"),getColorMapper:function(){var t=this.option;return G("category"===t.mappingMethod?function(t,e){return!e&&(t=this._normalizeData(t)),rN.call(this,t)}:function(e,n,r){var o=!!r;return!n&&(e=this._normalizeData(e)),r=xn(e,t.parsedVisual,r),o?r:Sn(r,"rgba")},this)},_normalizedToVisual:{linear:function(t){return Sn(xn(t,this.option.parsedVisual),"rgba")},category:rN,piecewise:function(t,e){var n=aN.call(this,e);return null==n&&(n=Sn(xn(t,this.option.parsedVisual),"rgba")),n},fixed:oN}},colorHue:tN(function(t,e){return wn(t,e)}),colorSaturation:tN(function(t,e){return wn(t,null,e)}),colorLightness:tN(function(t,e){return wn(t,null,null,e)}),colorAlpha:tN(function(t,e){return _n(t,e)}),decal:{applyVisual:nN("decal"),_normalizedToVisual:{linear:null,category:rN,piecewise:null,fixed:null}},opacity:{applyVisual:nN("opacity"),_normalizedToVisual:iN([0,1])},liftZ:{applyVisual:nN("liftZ"),_normalizedToVisual:{linear:oN,category:oN,piecewise:oN,fixed:oN}},symbol:{applyVisual:function(t,e,n){var r=this.mapValueToVisual(t);n("symbol",r)},_normalizedToVisual:{linear:eN,category:rN,piecewise:function(t,e){var n=aN.call(this,e);return null==n&&(n=eN.call(this,t)),n},fixed:oN}},symbolSize:{applyVisual:nN("symbolSize"),_normalizedToVisual:iN([0,1])}},t}();function KE(t){var e=t.pieceList;t.hasSpecialVisual=!1,z(e,function(e,n){e.originIndex=n,null!=e.visual&&(t.hasSpecialVisual=!0)})}function JE(t){var e=t.categories,n=t.categoryMap={},r=t.visual;if(YE(e,function(t,e){n[t]=e}),!X(r)){var o=[];K(r)?YE(r,function(t,e){var r=n[e];o[null!=r?r:ZE]=t}):o[ZE]=r,r=uN(t,o)}for(var i=e.length-1;i>=0;i--)null==r[i]&&(delete n[e[i]],e.pop())}function QE(t,e){var n=t.visual,r=[];K(n)?YE(n,function(t){r.push(t)}):null!=n&&r.push(n);var o={color:1,symbol:1};e||1!==r.length||o.hasOwnProperty(t.type)||(r[1]=r[0]),uN(t,r)}function tN(t){return{applyVisual:function(e,n,r){var o=this.mapValueToVisual(e);r("color",t(n("color"),o))},_normalizedToVisual:iN([0,1])}}function eN(t){var e=this.option.visual;return e[Math.round(No(t,[0,1],[0,e.length-1],!0))]||{}}function nN(t){return function(e,n,r){r(t,this.mapValueToVisual(e))}}function rN(t){var e=this.option.visual;return e[this.option.loop&&t!==ZE?t%e.length:t]}function oN(){return this.option.visual[0]}function iN(t){return{linear:function(e){return No(e,t,this.option.visual,!0)},category:rN,piecewise:function(e,n){var r=aN.call(this,n);return null==r&&(r=No(e,t,this.option.visual,!0)),r},fixed:oN}}function aN(t){var e=this.option,n=e.pieceList;if(e.hasSpecialVisual){var r=$E.findPieceIndex(t,n),o=n[r];if(o&&o.visual)return o.visual[this.type]}}function uN(t,e){return t.visual=e,"color"===t.type&&(t.parsedVisual=B(e,function(t){return gn(t)})),e}var sN={linear:function(t){return No(t,this.option.dataExtent,[0,1],!0)},piecewise:function(t){var e=this.option.pieceList,n=$E.findPieceIndex(t,e,!0);if(null!=n)return No(n,[0,e.length-1],[0,1],!0)},category:function(t){var e=this.option.categories?this.option.categoryMap[t]:t;return null==e?ZE:e},fixed:xt};function lN(t,e,n){return t?e<=n:e<n}var cN=$E,fN="itemStyle",dN=Di(),hN={seriesType:"treemap",reset:function(t){var e=t.getData().tree,n=e.root;n.isRemoved()||pN(n,{},t.getViewRoot().getAncestors(),t)}};function pN(t,e,n,r){var o=t.getModel(),i=t.getLayout(),a=t.hostTree.data;if(i&&!i.invisible&&i.isInView){var u,s=o.getModel(fN),l=gN(s,e,r),c=a.ensureUniqueItemVisual(t.dataIndex,"style"),f=s.get("borderColor"),d=s.get("borderColorSaturation");null!=d&&(u=mN(l),f=vN(d,u)),c.stroke=f;var h=t.viewChildren;if(h&&h.length){var p=bN(t,o,i,s,l,h);z(h,function(t,e){if(t.depth>=n.length||t===n[t.depth]){var i=wN(o,l,t,e,p,r);pN(t,i,n,r)}})}else u=mN(l),c.fill=u}}function gN(t,e,n){var r=I({},e),o=n.designatedVisualItemStyle;return z(["color","colorAlpha","colorSaturation"],function(n){o[n]=e[n];var i=t.get(n);o[n]=null,null!=i&&(r[n]=i)}),r}function mN(t){var e=yN(t,"color");if(e){var n=yN(t,"colorAlpha"),r=yN(t,"colorSaturation");return r&&(e=wn(e,null,null,r)),n&&(e=_n(e,n)),e}}function vN(t,e){return null!=e?wn(e,null,null,t):null}function yN(t,e){var n=t[e];if(null!=n&&"none"!==n)return n}function bN(t,e,n,r,o,i){if(i&&i.length){var a=xN(e,"color")||null!=o.color&&"none"!==o.color&&(xN(e,"colorAlpha")||xN(e,"colorSaturation"));if(a){var u=e.get("visualMin"),s=e.get("visualMax"),l=n.dataExtent.slice();null!=u&&u<l[0]&&(l[0]=u),null!=s&&s>l[1]&&(l[1]=s);var c=e.get("colorMappingBy"),f={type:a.name,dataExtent:l,visual:a.range};"color"!==f.type||"index"!==c&&"id"!==c?f.mappingMethod="linear":(f.mappingMethod="category",f.loop=!0);var d=new cN(f);return dN(d).drColorMappingBy=c,d}}}function xN(t,e){var n=t.get(e);return X(n)&&n.length?{name:e,range:n}:null}function wN(t,e,n,r,o,i){var a=I({},e);if(o){var u=o.type,s="color"===u&&dN(o).drColorMappingBy,l="index"===s?r:"id"===s?i.mapIdToIndex(n.getId()):n.getValue(t.get("visualDimension"));a[u]=o.mapValueToVisual(l)}return a}var _N=Math.max,SN=Math.min,CN=it,MN=z,TN=["itemStyle","borderWidth"],kN=["itemStyle","gapWidth"],DN=["upperLabel","show"],AN=["upperLabel","height"],IN={seriesType:"treemap",reset:function(t,e,n,r){var o=n.getWidth(),i=n.getHeight(),a=t.option,u=lp(t.getBoxLayoutParams(),{width:n.getWidth(),height:n.getHeight()}),s=a.size||[],l=Ro(CN(u.width,s[0]),o),c=Ro(CN(u.height,s[1]),i),f=r&&r.type,d=["treemapZoomToNode","treemapRootToNode"],h=eE(r,d,t),p="treemapRender"===f||"treemapMove"===f?r.rootRect:null,g=t.getViewRoot(),m=nE(g);if("treemapMove"!==f){var v="treemapZoomToNode"===f?BN(t,h,g,l,c):p?[p.width,p.height]:[l,c],y=a.sort;y&&"asc"!==y&&"desc"!==y&&(y="desc");var b={squareRatio:a.squareRatio,sort:y,leafDepth:a.leafDepth};g.hostTree.clearLayouts();var x={x:0,y:0,width:v[0],height:v[1],area:v[0]*v[1]};g.setLayout(x),ON(g,b,!1,0),x=g.getLayout(),MN(m,function(t,e){var n=(m[e+1]||g).getValue();t.setLayout(I({dataExtent:[n,n],borderWidth:0,upperHeight:0},x))})}var w=t.getData().tree.root;w.setLayout(VN(u,p,h),!0),t.setLayoutInfo(u),HN(w,new Zr(-u.x,-u.y,o,i),m,g,0)}};function ON(t,e,n,r){var o,i;if(!t.isRemoved()){var a=t.getLayout();o=a.width,i=a.height;var u=t.getModel(),s=u.get(TN),l=u.get(kN)/2,c=FN(u),f=Math.max(s,c),d=s-l,h=f-l;t.setLayout({borderWidth:s,upperHeight:f,upperLabelHeight:c},!0),o=_N(o-2*d,0),i=_N(i-d-h,0);var p=o*i,g=LN(t,u,p,e,n,r);if(g.length){var m={x:d,y:h,width:o,height:i},v=SN(o,i),y=1/0,b=[];b.area=0;for(var x=0,w=g.length;x<w;){var _=g[x];b.push(_),b.area+=_.getLayout().area;var S=PN(b,v,e.squareRatio);S<=y?(x++,y=S):(b.area-=b.pop().getLayout().area,zN(b,v,m,l,!1),v=SN(m.width,m.height),b.length=b.area=0,y=1/0)}if(b.length&&zN(b,v,m,l,!0),!n){var C=u.get("childrenVisibleMin");null!=C&&p<C&&(n=!0)}for(x=0,w=g.length;x<w;x++)ON(g[x],e,n,r+1)}}}function LN(t,e,n,r,o,i){var a=t.children||[],u=r.sort;"asc"!==u&&"desc"!==u&&(u=null);var s=null!=r.leafDepth&&r.leafDepth<=i;if(o&&!s)return t.viewChildren=[];a=H(a,function(t){return!t.isRemoved()}),NN(a,u);var l=RN(e,a,u);if(0===l.sum)return t.viewChildren=[];if(l.sum=EN(e,n,l.sum,u,a),0===l.sum)return t.viewChildren=[];for(var c=0,f=a.length;c<f;c++){var d=a[c].getValue()/l.sum*n;a[c].setLayout({area:d})}return s&&(a.length&&t.setLayout({isLeafRoot:!0},!0),a.length=0),t.viewChildren=a,t.setLayout({dataExtent:l.dataExtent},!0),a}function EN(t,e,n,r,o){if(!r)return n;for(var i=t.get("visibleMin"),a=o.length,u=a,s=a-1;s>=0;s--){var l=o["asc"===r?a-s-1:s].getValue();l/n*e<i&&(u=s,n-=l)}return"asc"===r?o.splice(0,a-u):o.splice(u,a-u),n}function NN(t,e){return e&&t.sort(function(t,n){var r="asc"===e?t.getValue()-n.getValue():n.getValue()-t.getValue();return 0===r?"asc"===e?t.dataIndex-n.dataIndex:n.dataIndex-t.dataIndex:r}),t}function RN(t,e,n){for(var r=0,o=0,i=e.length;o<i;o++)r+=e[o].getValue();var a,u=t.get("visualDimension");return e&&e.length?"value"===u&&n?(a=[e[e.length-1].getValue(),e[0].getValue()],"asc"===n&&a.reverse()):(a=[1/0,-1/0],MN(e,function(t){var e=t.getValue(u);e<a[0]&&(a[0]=e),e>a[1]&&(a[1]=e)})):a=[NaN,NaN],{sum:r,dataExtent:a}}function PN(t,e,n){for(var r=0,o=1/0,i=0,a=void 0,u=t.length;i<u;i++)a=t[i].getLayout().area,a&&(a<o&&(o=a),a>r&&(r=a));var s=t.area*t.area,l=e*e*n;return s?_N(l*r/s,s/(l*o)):1/0}function zN(t,e,n,r,o){var i=e===n.width?0:1,a=1-i,u=["x","y"],s=["width","height"],l=n[u[i]],c=e?t.area/e:0;(o||c>n[s[a]])&&(c=n[s[a]]);for(var f=0,d=t.length;f<d;f++){var h=t[f],p={},g=c?h.getLayout().area/c:0,m=p[s[a]]=_N(c-2*r,0),v=n[u[i]]+n[s[i]]-l,y=f===d-1||v<g?v:g,b=p[s[i]]=_N(y-2*r,0);p[u[a]]=n[u[a]]+SN(r,m/2),p[u[i]]=l+SN(r,b/2),l+=y,h.setLayout(p,!0)}n[u[a]]+=c,n[s[a]]-=c}function BN(t,e,n,r,o){var i,a=(e||{}).node,u=[r,o];if(!a||a===n)return u;var s=r*o,l=s*t.option.zoomToNodeRatio;while(i=a.parentNode){for(var c=0,f=i.children,d=0,h=f.length;d<h;d++)c+=f[d].getValue();var p=a.getValue();if(0===p)return u;l*=c/p;var g=i.getModel(),m=g.get(TN),v=Math.max(m,FN(g));l+=4*m*m+(3*m+v)*Math.pow(l,.5),l>Uo&&(l=Uo),a=i}l<s&&(l=s);var y=Math.pow(l/s,.5);return[r*y,o*y]}function VN(t,e,n){if(e)return{x:e.x,y:e.y};var r={x:0,y:0};if(!n)return r;var o=n.node,i=o.getLayout();if(!i)return r;var a=[i.width/2,i.height/2],u=o;while(u){var s=u.getLayout();a[0]+=s.x,a[1]+=s.y,u=u.parentNode}return{x:t.width/2-a[0],y:t.height/2-a[1]}}function HN(t,e,n,r,o){var i=t.getLayout(),a=n[o],u=a&&a===t;if(!(a&&!u||o===n.length&&t!==r)){t.setLayout({isInView:!0,invisible:!u&&!e.intersect(i),isAboveViewRoot:u},!0);var s=new Zr(e.x-i.x,e.y-i.y,e.width,e.height);MN(t.viewChildren||[],function(t){HN(t,s,n,r,o+1)})}}function FN(t){return t.get(DN)?t.get(AN):0}function WN(t){t.registerSeriesModel(wE),t.registerChartView(XE),t.registerVisual(hN),t.registerLayout(IN),mE(t)}function UN(t){var e=t.findComponents({mainType:"legend"});e&&e.length&&t.eachSeriesByType("graph",function(t){var n=t.getCategoriesData(),r=t.getGraph(),o=r.data,i=n.mapArray(n.getName);o.filterSelf(function(t){var n=o.getItemModel(t),r=n.getShallow("category");if(null!=r){"number"===typeof r&&(r=i[r]);for(var a=0;a<e.length;a++)if(!e[a].isSelected(r))return!1}return!0})})}function GN(t){var e={};t.eachSeriesByType("graph",function(t){var n=t.getCategoriesData(),r=t.getData(),o={};n.each(function(r){var i=n.getName(r);o["ec-"+i]=r;var a=n.getItemModel(r),u=a.getModel("itemStyle").getItemStyle();u.fill||(u.fill=t.getColorFromPalette(i,e)),n.setItemVisual(r,"style",u);for(var s=["symbol","symbolSize","symbolKeepAspect"],l=0;l<s.length;l++){var c=a.getShallow(s[l],!0);null!=c&&n.setItemVisual(r,s[l],c)}}),n.count()&&r.each(function(t){var e=r.getItemModel(t),i=e.getShallow("category");if(null!=i){"string"===typeof i&&(i=o["ec-"+i]);var a=n.getItemVisual(i,"style"),u=r.ensureUniqueItemVisual(t,"style");I(u,a);for(var s=["symbol","symbolSize","symbolKeepAspect"],l=0;l<s.length;l++)r.setItemVisual(t,s[l],n.getItemVisual(i,s[l]))}})})}function jN(t){return t instanceof Array||(t=[t,t]),t}function XN(t){t.eachSeriesByType("graph",function(t){var e=t.getGraph(),n=t.getEdgeData(),r=jN(t.get("edgeSymbol")),o=jN(t.get("edgeSymbolSize"));n.setVisual("fromSymbol",r&&r[0]),n.setVisual("toSymbol",r&&r[1]),n.setVisual("fromSymbolSize",o&&o[0]),n.setVisual("toSymbolSize",o&&o[1]),n.setVisual("style",t.getModel("lineStyle").getLineStyle()),n.each(function(t){var r=n.getItemModel(t),o=e.getEdgeByIndex(t),i=jN(r.getShallow("symbol",!0)),a=jN(r.getShallow("symbolSize",!0)),u=r.getModel("lineStyle").getLineStyle(),s=n.ensureUniqueItemVisual(t,"style");switch(I(s,u),s.stroke){case"source":var l=o.node1.getVisual("style");s.stroke=l&&l.fill;break;case"target":l=o.node2.getVisual("style");s.stroke=l&&l.fill;break}i[0]&&o.setVisual("fromSymbol",i[0]),i[1]&&o.setVisual("toSymbol",i[1]),a[0]&&o.setVisual("fromSymbolSize",a[0]),a[1]&&o.setVisual("toSymbolSize",a[1])})})}var YN="--\x3e",qN=function(t){return t.get("autoCurveness")||null},ZN=function(t,e){var n=qN(t),r=20,o=[];if("number"===typeof n)r=n;else if(X(n))return void(t.__curvenessList=n);e>r&&(r=e);var i=r%2?r+2:r+3;o=[];for(var a=0;a<i;a++)o.push((a%2?a+1:a)/10*(a%2?-1:1));t.__curvenessList=o},$N=function(t,e,n){var r=[t.id,t.dataIndex].join("."),o=[e.id,e.dataIndex].join(".");return[n.uid,r,o].join(YN)},KN=function(t){var e=t.split(YN);return[e[0],e[2],e[1]].join(YN)},JN=function(t,e){var n=$N(t.node1,t.node2,e);return e.__edgeMap[n]},QN=function(t,e){var n=tR($N(t.node1,t.node2,e),e),r=tR($N(t.node2,t.node1,e),e);return n+r},tR=function(t,e){var n=e.__edgeMap;return n[t]?n[t].length:0};function eR(t){qN(t)&&(t.__curvenessList=[],t.__edgeMap={},ZN(t))}function nR(t,e,n,r){if(qN(n)){var o=$N(t,e,n),i=n.__edgeMap,a=i[KN(o)];i[o]&&!a?i[o].isForward=!0:a&&i[o]&&(a.isForward=!0,i[o].isForward=!1),i[o]=i[o]||[],i[o].push(r)}}function rR(t,e,n,r){var o=qN(e),i=X(o);if(!o)return null;var a=JN(t,e);if(!a)return null;for(var u=-1,s=0;s<a.length;s++)if(a[s]===n){u=s;break}var l=QN(t,e);ZN(e,l),t.lineStyle=t.lineStyle||{};var c=$N(t.node1,t.node2,e),f=e.__curvenessList,d=i?0:l%2?0:1;if(a.isForward)return f[d+u];var h=KN(c),p=tR(h,e),g=f[u+p+d];return r?i?o&&0===o[0]?(p+d)%2?g:-g:((p%2?0:1)+d)%2?g:-g:(p+d)%2?g:-g:f[u+p+d]}function oR(t){var e=t.coordinateSystem;if(!e||"view"===e.type){var n=t.getGraph();n.eachNode(function(t){var e=t.getModel();t.setLayout([+e.get("x"),+e.get("y")])}),iR(n,t)}}function iR(t,e){t.eachEdge(function(t,n){var r=ut(t.getModel().get(["lineStyle","curveness"]),-rR(t,e,n,!0),0),o=St(t.node1.getLayout()),i=St(t.node2.getLayout()),a=[o,i];+r&&a.push([(o[0]+i[0])/2-(o[1]-i[1])*r,(o[1]+i[1])/2-(i[0]-o[0])*r]),t.setLayout(a)})}function aR(t,e){t.eachSeriesByType("graph",function(t){var e=t.get("layout"),n=t.coordinateSystem;if(n&&"view"!==n.type){var r=t.getData(),o=[];z(n.dimensions,function(t){o=o.concat(r.mapDimensionsAll(t))});for(var i=0;i<r.count();i++){for(var a=[],u=!1,s=0;s<o.length;s++){var l=r.get(o[s],i);isNaN(l)||(u=!0),a.push(l)}u?r.setItemLayout(i,n.dataToPoint(a)):r.setItemLayout(i,[NaN,NaN])}iR(r.graph,t)}else e&&"none"!==e||oR(t)})}function uR(t){var e=t.coordinateSystem;if("view"!==e.type)return 1;var n=t.option.nodeScaleRatio,r=e.scaleX,o=e.getZoom(),i=(o-1)*n+1;return i/r}function sR(t){var e=t.getVisual("symbolSize");return e instanceof Array&&(e=(e[0]+e[1])/2),+e}var lR=Math.PI,cR=[];function fR(t,e){var n=t.coordinateSystem;if(!n||"view"===n.type){var r=n.getBoundingRect(),o=t.getData(),i=o.graph,a=r.width/2+r.x,u=r.height/2+r.y,s=Math.min(r.width,r.height)/2,l=o.count();o.setLayout({cx:a,cy:u}),l&&(dR[e](t,i,o,s,a,u,l),i.eachEdge(function(e,n){var r,o=ut(e.getModel().get(["lineStyle","curveness"]),rR(e,t,n),0),i=St(e.node1.getLayout()),s=St(e.node2.getLayout()),l=(i[0]+s[0])/2,c=(i[1]+s[1])/2;+o&&(o*=3,r=[a*o+l*(1-o),u*o+c*(1-o)]),e.setLayout([i,s,r])}))}}var dR={value:function(t,e,n,r,o,i,a){var u=0,s=n.getSum("value"),l=2*Math.PI/(s||a);e.eachNode(function(t){var e=t.getValue("value"),n=l*(s?e:1)/2;u+=n,t.setLayout([r*Math.cos(u)+o,r*Math.sin(u)+i]),u+=n})},symbolSize:function(t,e,n,r,o,i,a){var u=0;cR.length=a;var s=uR(t);e.eachNode(function(t){var e=sR(t);isNaN(e)&&(e=2),e<0&&(e=0),e*=s;var n=Math.asin(e/2/r);isNaN(n)&&(n=lR/2),cR[t.dataIndex]=n,u+=2*n});var l=(2*lR-u)/a/2,c=0;e.eachNode(function(t){var e=l+cR[t.dataIndex];c+=e,t.setLayout([r*Math.cos(c)+o,r*Math.sin(c)+i]),c+=e})}};function hR(t){t.eachSeriesByType("graph",function(t){"circular"===t.get("layout")&&fR(t,"symbolSize")})}var pR=Tt;function gR(t,e,n){for(var r=t,o=e,i=n.rect,a=i.width,u=i.height,s=[i.x+a/2,i.y+u/2],l=null==n.gravity?.1:n.gravity,c=0;c<r.length;c++){var f=r[c];f.p||(f.p=wt(a*(Math.random()-.5)+s[0],u*(Math.random()-.5)+s[1])),f.pp=St(f.p),f.edges=null}var d,h,p=null==n.friction?.6:n.friction,g=p;return{warmUp:function(){g=.8*p},setFixed:function(t){r[t].fixed=!0},setUnfixed:function(t){r[t].fixed=!1},beforeStep:function(t){d=t},afterStep:function(t){h=t},step:function(t){d&&d(r,o);for(var e=[],n=r.length,i=0;i<o.length;i++){var a=o[i];if(!a.ignoreForceLayout){var u=a.n1,c=a.n2;kt(e,c.p,u.p);var f=Dt(e)-a.d,p=c.w/(u.w+c.w);isNaN(p)&&(p=0),Ot(e,e),!u.fixed&&pR(u.p,u.p,e,p*f*g),!c.fixed&&pR(c.p,c.p,e,-(1-p)*f*g)}}for(i=0;i<n;i++){var m=r[i];m.fixed||(kt(e,s,m.p),pR(m.p,m.p,e,l*g))}for(i=0;i<n;i++){u=r[i];for(var v=i+1;v<n;v++){c=r[v];kt(e,c.p,u.p);f=Dt(e);0===f&&(Ct(e,Math.random()-.5,Math.random()-.5),f=1);var y=(u.rep+c.rep)/f/f;!u.fixed&&pR(u.pp,u.pp,e,y),!c.fixed&&pR(c.pp,c.pp,e,-y)}}var b=[];for(i=0;i<n;i++){m=r[i];m.fixed||(kt(b,m.p,m.pp),pR(m.p,m.p,b,g),_t(m.pp,m.p))}g*=.992;var x=g<.01;h&&h(r,o,x),t&&t(x)}}}function mR(t){t.eachSeriesByType("graph",function(t){var e=t.coordinateSystem;if(!e||"view"===e.type)if("force"===t.get("layout")){var n=t.preservedPoints||{},r=t.getGraph(),o=r.data,i=r.edgeData,a=t.getModel("force"),u=a.get("initLayout");t.preservedPoints?o.each(function(t){var e=o.getId(t);o.setItemLayout(t,n[e]||[NaN,NaN])}):u&&"none"!==u?"circular"===u&&fR(t,"value"):oR(t);var s=o.getDataExtent("value"),l=i.getDataExtent("value"),c=a.get("repulsion"),f=a.get("edgeLength"),d=X(c)?c:[c,c],h=X(f)?f:[f,f];h=[h[1],h[0]];var p=o.mapArray("value",function(t,e){var n=o.getItemLayout(e),r=No(t,s,d);return isNaN(r)&&(r=(d[0]+d[1])/2),{w:r,rep:r,fixed:o.getItemModel(e).get("fixed"),p:!n||isNaN(n[0])||isNaN(n[1])?null:n}}),g=i.mapArray("value",function(e,n){var o=r.getEdgeByIndex(n),i=No(e,l,h);isNaN(i)&&(i=(h[0]+h[1])/2);var a=o.getModel(),u=ut(o.getModel().get(["lineStyle","curveness"]),-rR(o,t,n,!0),0);return{n1:p[o.node1.dataIndex],n2:p[o.node2.dataIndex],d:i,curveness:u,ignoreForceLayout:a.get("ignoreForceLayout")}}),m=e.getBoundingRect(),v=gR(p,g,{rect:m,gravity:a.get("gravity"),friction:a.get("friction")});v.beforeStep(function(t,e){for(var n=0,o=t.length;n<o;n++)t[n].fixed&&_t(t[n].p,r.getNodeByIndex(n).getLayout())}),v.afterStep(function(t,e,i){for(var a=0,u=t.length;a<u;a++)t[a].fixed||r.getNodeByIndex(a).setLayout(t[a].p),n[o.getId(a)]=t[a].p;for(a=0,u=e.length;a<u;a++){var s=e[a],l=r.getEdgeByIndex(a),c=s.n1.p,f=s.n2.p,d=l.getLayout();d=d?d.slice():[],d[0]=d[0]||[],d[1]=d[1]||[],_t(d[0],c),_t(d[1],f),+s.curveness&&(d[2]=[(c[0]+f[0])/2-(c[1]-f[1])*s.curveness,(c[1]+f[1])/2-(f[0]-c[0])*s.curveness]),l.setLayout(d)}}),t.forceLayout=v,t.preservedPoints=n,v.step()}else t.forceLayout=null})}function vR(t,e,n){var r=I(t.getBoxLayoutParams(),{aspect:n});return lp(r,{width:e.getWidth(),height:e.getHeight()})}function yR(t,e){var n=[];return t.eachSeriesByType("graph",function(t){var r=t.get("coordinateSystem");if(!r||"view"===r){var o=t.getData(),i=o.mapArray(function(t){var e=o.getItemModel(t);return[+e.get("x"),+e.get("y")]}),a=[],u=[];hu(i,a,u),u[0]-a[0]===0&&(u[0]+=1,a[0]-=1),u[1]-a[1]===0&&(u[1]+=1,a[1]-=1);var s=(u[0]-a[0])/(u[1]-a[1]),l=vR(t,e,s);isNaN(s)&&(a=[l.x,l.y],u=[l.x+l.width,l.y+l.height]);var c=u[0]-a[0],f=u[1]-a[1],d=l.width,h=l.height,p=t.coordinateSystem=new eL;p.zoomLimit=t.get("scaleLimit"),p.setBoundingRect(a[0],a[1],c,f),p.setViewRect(l.x,l.y,d,h),p.setCenter(t.get("center")),p.setZoom(t.get("zoom")),n.push(p)}}),n}var bR=cf.prototype,xR=gf.prototype,wR=function(){function t(){this.x1=0,this.y1=0,this.x2=0,this.y2=0,this.percent=1}return t}();(function(t){function e(){return null!==t&&t.apply(this,arguments)||this}i(e,t)})(wR);function _R(t){return isNaN(+t.cpx1)||isNaN(+t.cpy1)}var SR=function(t){function e(e){var n=t.call(this,e)||this;return n.type="ec-line",n}return i(e,t),e.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},e.prototype.getDefaultShape=function(){return new wR},e.prototype.buildPath=function(t,e){_R(e)?bR.buildPath.call(this,t,e):xR.buildPath.call(this,t,e)},e.prototype.pointAt=function(t){return _R(this.shape)?bR.pointAt.call(this,t):xR.pointAt.call(this,t)},e.prototype.tangentAt=function(t){var e=this.shape,n=_R(e)?[e.x2-e.x1,e.y2-e.y1]:xR.tangentAt.call(this,t);return Ot(n,n)},e}(ds),CR=SR,MR=["fromSymbol","toSymbol"];function TR(t){return"_"+t+"Type"}function kR(t,e,n){var r=e.getItemVisual(n,t);if(r&&"none"!==r){var o=e.getItemVisual(n,t+"Size"),i=e.getItemVisual(n,t+"Rotate"),a=e.getItemVisual(n,t+"Offset")||0,u=e.getItemVisual(n,t+"KeepAspect"),s=X(o)?o:[o,o],l=X(a)?a:[a,a];l[0]=Ro(l[0],s[0]),l[1]=Ro(at(l[1],l[0]),s[1]);var c=zb(r,-s[0]/2+l[0],-s[1]/2+l[1],s[0],s[1],null,u);return c.__specifiedRotation=null==i||isNaN(i)?void 0:+i*Math.PI/180||0,c.name=t,c}}function DR(t){var e=new CR({name:"line",subPixelOptimize:!0});return AR(e.shape,t),e}function AR(t,e){t.x1=e[0][0],t.y1=e[0][1],t.x2=e[1][0],t.y2=e[1][1],t.percent=1;var n=e[2];n?(t.cpx1=n[0],t.cpy1=n[1]):(t.cpx1=NaN,t.cpy1=NaN)}var IR=function(t){function e(e,n,r){var o=t.call(this)||this;return o._createLine(e,n,r),o}return i(e,t),e.prototype._createLine=function(t,e,n){var r=t.hostModel,o=t.getItemLayout(e),i=DR(o);i.shape.percent=0,td(i,{shape:{percent:1}},r,e),this.add(i),z(MR,function(n){var r=kR(n,t,e);this.add(r),this[TR(n)]=t.getItemVisual(e,n)},this),this._updateCommonStl(t,e,n)},e.prototype.updateData=function(t,e,n){var r=t.hostModel,o=this.childOfName("line"),i=t.getItemLayout(e),a={shape:{}};AR(a.shape,i),Qf(o,a,r,e),z(MR,function(n){var r=t.getItemVisual(e,n),o=TR(n);if(this[o]!==r){this.remove(this.childOfName(n));var i=kR(n,t,e);this.add(i)}this[o]=r},this),this._updateCommonStl(t,e,n)},e.prototype.getLinePath=function(){return this.childAt(0)},e.prototype._updateCommonStl=function(t,e,n){var r=t.hostModel,o=this.childOfName("line"),i=n&&n.emphasisLineStyle,a=n&&n.blurLineStyle,u=n&&n.selectLineStyle,s=n&&n.labelStatesModels;if(!n||t.hasItemOption){var l=t.getItemModel(e);i=l.getModel(["emphasis","lineStyle"]).getLineStyle(),a=l.getModel(["blur","lineStyle"]).getLineStyle(),u=l.getModel(["select","lineStyle"]).getLineStyle(),s=Sd(l)}var c=t.getItemVisual(e,"style"),f=c.stroke;o.useStyle(c),o.style.fill=null,o.style.strokeNoScale=!0,o.ensureState("emphasis").style=i,o.ensureState("blur").style=a,o.ensureState("select").style=u,z(MR,function(t){var e=this.childOfName(t);if(e){e.setColor(f),e.style.opacity=c.opacity;for(var n=0;n<Ks.length;n++){var r=Ks[n],i=o.getState(r);if(i){var a=i.style||{},u=e.ensureState(r),s=u.style||(u.style={});null!=a.stroke&&(s[e.__isEmptyBrush?"stroke":"fill"]=a.stroke),null!=a.opacity&&(s.opacity=a.opacity)}}e.markRedraw()}},this);var d=r.getRawValue(e);_d(this,s,{labelDataIndex:e,labelFetcher:{getFormattedLabel:function(e,n){return r.getFormattedLabel(e,n,t.dataType)}},inheritColor:f||"#000",defaultOpacity:c.opacity,defaultText:(null==d?t.getName(e):isFinite(d)?Po(d):d)+""});var h=this.getTextContent();if(h){var p=s.normal;h.__align=h.style.align,h.__verticalAlign=h.style.verticalAlign,h.__position=p.get("position")||"middle";var g=p.get("distance");X(g)||(g=[g,g]),h.__labelDistance=g}this.setTextConfig({position:null,local:!0,inside:!1}),Gl(this)},e.prototype.highlight=function(){kl(this)},e.prototype.downplay=function(){Dl(this)},e.prototype.updateLayout=function(t,e){this.setLinePoints(t.getItemLayout(e))},e.prototype.setLinePoints=function(t){var e=this.childOfName("line");AR(e.shape,t),e.dirty()},e.prototype.beforeUpdate=function(){var t=this,e=t.childOfName("fromSymbol"),n=t.childOfName("toSymbol"),r=t.getTextContent();if(e||n||r&&!r.ignore){var o=1,i=this.parent;while(i)i.scaleX&&(o/=i.scaleX),i=i.parent;var a=t.childOfName("line");if(this.__dirty||a.__dirty){var u=a.shape.percent,s=a.pointAt(0),l=a.pointAt(u),c=kt([],l,s);if(Ot(c,c),e&&(e.setPosition(s),S(e,0),e.scaleX=e.scaleY=o*u,e.markRedraw()),n&&(n.setPosition(l),S(n,1),n.scaleX=n.scaleY=o*u,n.markRedraw()),r&&!r.ignore){r.x=r.y=0,r.originX=r.originY=0;var f=void 0,d=void 0,h=r.__labelDistance,p=h[0]*o,g=h[1]*o,m=u/2,v=a.tangentAt(m),y=[v[1],-v[0]],b=a.pointAt(m);y[1]>0&&(y[0]=-y[0],y[1]=-y[1]);var x=v[0]<0?-1:1;if("start"!==r.__position&&"end"!==r.__position){var w=-Math.atan2(v[1],v[0]);l[0]<s[0]&&(w=Math.PI+w),r.rotation=w}var _=void 0;switch(r.__position){case"insideStartTop":case"insideMiddleTop":case"insideEndTop":case"middle":_=-g,d="bottom";break;case"insideStartBottom":case"insideMiddleBottom":case"insideEndBottom":_=g,d="top";break;default:_=0,d="middle"}switch(r.__position){case"end":r.x=c[0]*p+l[0],r.y=c[1]*g+l[1],f=c[0]>.8?"left":c[0]<-.8?"right":"center",d=c[1]>.8?"top":c[1]<-.8?"bottom":"middle";break;case"start":r.x=-c[0]*p+s[0],r.y=-c[1]*g+s[1],f=c[0]>.8?"right":c[0]<-.8?"left":"center",d=c[1]>.8?"bottom":c[1]<-.8?"top":"middle";break;case"insideStartTop":case"insideStart":case"insideStartBottom":r.x=p*x+s[0],r.y=s[1]+_,f=v[0]<0?"right":"left",r.originX=-p*x,r.originY=-_;break;case"insideMiddleTop":case"insideMiddle":case"insideMiddleBottom":case"middle":r.x=b[0],r.y=b[1]+_,f="center",r.originY=-_;break;case"insideEndTop":case"insideEnd":case"insideEndBottom":r.x=-p*x+l[0],r.y=l[1]+_,f=v[0]>=0?"right":"left",r.originX=p*x,r.originY=-_;break}r.scaleX=r.scaleY=o,r.setStyle({verticalAlign:r.__verticalAlign||d,align:r.__align||f})}}}function S(t,e){var n=t.__specifiedRotation;if(null==n){var r=a.tangentAt(e);t.attr("rotation",(1===e?-1:1)*Math.PI/2-Math.atan2(r[1],r[0]))}else t.attr("rotation",n)}},e}(_o),OR=IR,LR=function(){function t(t){this.group=new _o,this._LineCtor=t||OR}return t.prototype.isPersistent=function(){return!0},t.prototype.updateData=function(t){var e=this,n=this,r=n.group,o=n._lineData;n._lineData=t,o||r.removeAll();var i=NR(t);t.diff(o).add(function(n){e._doAdd(t,n,i)}).update(function(n,r){e._doUpdate(o,t,r,n,i)}).remove(function(t){r.remove(o.getItemGraphicEl(t))}).execute()},t.prototype.updateLayout=function(){var t=this._lineData;t&&t.eachItemGraphicEl(function(e,n){e.updateLayout(t,n)},this)},t.prototype.incrementalPrepareUpdate=function(t){this._seriesScope=NR(t),this._lineData=null,this.group.removeAll()},t.prototype.incrementalUpdate=function(t,e){function n(t){t.isGroup||ER(t)||(t.incremental=!0,t.ensureState("emphasis").hoverLayer=!0)}for(var r=t.start;r<t.end;r++){var o=e.getItemLayout(r);if(PR(o)){var i=new this._LineCtor(e,r,this._seriesScope);i.traverse(n),this.group.add(i),e.setItemGraphicEl(r,i)}}},t.prototype.remove=function(){this.group.removeAll()},t.prototype._doAdd=function(t,e,n){var r=t.getItemLayout(e);if(PR(r)){var o=new this._LineCtor(t,e,n);t.setItemGraphicEl(e,o),this.group.add(o)}},t.prototype._doUpdate=function(t,e,n,r,o){var i=t.getItemGraphicEl(n);PR(e.getItemLayout(r))?(i?i.updateData(e,r,o):i=new this._LineCtor(e,r,o),e.setItemGraphicEl(r,i),this.group.add(i)):this.group.remove(i)},t}();function ER(t){return t.animators&&t.animators.length>0}function NR(t){var e=t.hostModel;return{lineStyle:e.getModel("lineStyle").getLineStyle(),emphasisLineStyle:e.getModel(["emphasis","lineStyle"]).getLineStyle(),blurLineStyle:e.getModel(["blur","lineStyle"]).getLineStyle(),selectLineStyle:e.getModel(["select","lineStyle"]).getLineStyle(),labelStatesModels:Sd(e)}}function RR(t){return isNaN(t[0])||isNaN(t[1])}function PR(t){return!RR(t[0])&&!RR(t[1])}var zR=LR,BR=[],VR=[],HR=[],FR=Ja,WR=Rt,UR=Math.abs;function GR(t,e,n){for(var r,o=t[0],i=t[1],a=t[2],u=1/0,s=n*n,l=.1,c=.1;c<=.9;c+=.1){BR[0]=FR(o[0],i[0],a[0],c),BR[1]=FR(o[1],i[1],a[1],c);var f=UR(WR(BR,e)-s);f<u&&(u=f,r=c)}for(var d=0;d<32;d++){var h=r+l;VR[0]=FR(o[0],i[0],a[0],r),VR[1]=FR(o[1],i[1],a[1],r),HR[0]=FR(o[0],i[0],a[0],h),HR[1]=FR(o[1],i[1],a[1],h);f=WR(VR,e)-s;if(UR(f)<.01)break;var p=WR(HR,e)-s;l/=2,f<0?p>=0?r+=l:r-=l:p>=0?r-=l:r+=l}return r}function jR(t,e){var n=[],r=nu,o=[[],[],[]],i=[[],[]],a=[];e/=2,t.eachEdge(function(t,u){var s=t.getLayout(),l=t.getVisual("fromSymbol"),c=t.getVisual("toSymbol");s.__original||(s.__original=[St(s[0]),St(s[1])],s[2]&&s.__original.push(St(s[2])));var f=s.__original;if(null!=s[2]){if(_t(o[0],f[0]),_t(o[1],f[2]),_t(o[2],f[1]),l&&"none"!==l){var d=sR(t.node1),h=GR(o,f[0],d*e);r(o[0][0],o[1][0],o[2][0],h,n),o[0][0]=n[3],o[1][0]=n[4],r(o[0][1],o[1][1],o[2][1],h,n),o[0][1]=n[3],o[1][1]=n[4]}if(c&&"none"!==c){d=sR(t.node2),h=GR(o,f[1],d*e);r(o[0][0],o[1][0],o[2][0],h,n),o[1][0]=n[1],o[2][0]=n[2],r(o[0][1],o[1][1],o[2][1],h,n),o[1][1]=n[1],o[2][1]=n[2]}_t(s[0],o[0]),_t(s[1],o[2]),_t(s[2],o[1])}else{if(_t(i[0],f[0]),_t(i[1],f[1]),kt(a,i[1],i[0]),Ot(a,a),l&&"none"!==l){d=sR(t.node1);Tt(i[0],i[0],a,d*e)}if(c&&"none"!==c){d=sR(t.node2);Tt(i[1],i[1],a,-d*e)}_t(s[0],i[0]),_t(s[1],i[1])}})}function XR(t){return"view"===t.type}var YR=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n}return i(e,t),e.prototype.init=function(t,e){var n=new JM,r=new zR,o=this.group;this._controller=new kO(e.getZr()),this._controllerHost={target:o},o.add(n.group),o.add(r.group),this._symbolDraw=n,this._lineDraw=r,this._firstRender=!0},e.prototype.render=function(t,e,n){var r=this,o=t.coordinateSystem;this._model=t;var i=this._symbolDraw,a=this._lineDraw,u=this.group;if(XR(o)){var s={x:o.x,y:o.y,scaleX:o.scaleX,scaleY:o.scaleY};this._firstRender?u.attr(s):Qf(u,s,t)}jR(t.getGraph(),uR(t));var l=t.getData();i.updateData(l);var c=t.getEdgeData();a.updateData(c),this._updateNodeAndLinkScale(),this._updateController(t,e,n),clearTimeout(this._layoutTimeout);var f=t.forceLayout,d=t.get(["force","layoutAnimation"]);f&&this._startForceLayoutIteration(f,d),l.graph.eachNode(function(t){var e=t.dataIndex,n=t.getGraphicEl(),o=t.getModel();n.off("drag").off("dragend");var i=o.get("draggable");i&&n.on("drag",function(){f&&(f.warmUp(),!r._layouting&&r._startForceLayoutIteration(f,d),f.setFixed(e),l.setItemLayout(e,[n.x,n.y]))}).on("dragend",function(){f&&f.setUnfixed(e)}),n.setDraggable(i&&!!f);var a=o.get(["emphasis","focus"]);"adjacency"===a&&(Gs(n).focus=t.getAdjacentDataIndices())}),l.graph.eachEdge(function(t){var e=t.getGraphicEl(),n=t.getModel().get(["emphasis","focus"]);"adjacency"===n&&(Gs(e).focus={edge:[t.dataIndex],node:[t.node1.dataIndex,t.node2.dataIndex]})});var h="circular"===t.get("layout")&&t.get(["circular","rotateLabel"]),p=l.getLayout("cx"),g=l.getLayout("cy");l.eachItemGraphicEl(function(t,e){var n=l.getItemModel(e),r=n.get(["label","rotate"])||0,o=t.getSymbolPath();if(h){var i=l.getItemLayout(e),a=Math.atan2(i[1]-g,i[0]-p);a<0&&(a=2*Math.PI+a);var u=i[0]<p;u&&(a-=Math.PI);var s=u?"left":"right";o.setTextConfig({rotation:-a,position:s,origin:"center"});var c=o.ensureState("emphasis");I(c.textConfig||(c.textConfig={}),{position:s})}else o.setTextConfig({rotation:r*=Math.PI/180})}),this._firstRender=!1},e.prototype.dispose=function(){this._controller&&this._controller.dispose(),this._controllerHost=null},e.prototype._startForceLayoutIteration=function(t,e){var n=this;(function r(){t.step(function(t){n.updateLayout(n._model),(n._layouting=!t)&&(e?n._layoutTimeout=setTimeout(r,16):r())})})()},e.prototype._updateController=function(t,e,n){var r=this,o=this._controller,i=this._controllerHost,a=this.group;o.setPointerChecker(function(e,r,o){var i=a.getBoundingRect();return i.applyTransform(a.transform),i.contain(r,o)&&!OO(e,n,t)}),XR(t.coordinateSystem)?(o.enable(t.get("roam")),i.zoomLimit=t.get("scaleLimit"),i.zoom=t.coordinateSystem.getZoom(),o.off("pan").off("zoom").on("pan",function(e){DO(i,e.dx,e.dy),n.dispatchAction({seriesId:t.id,type:"graphRoam",dx:e.dx,dy:e.dy})}).on("zoom",function(e){AO(i,e.scale,e.originX,e.originY),n.dispatchAction({seriesId:t.id,type:"graphRoam",zoom:e.scale,originX:e.originX,originY:e.originY}),r._updateNodeAndLinkScale(),jR(t.getGraph(),uR(t)),r._lineDraw.updateLayout(),n.updateLabelLayout()})):o.disable()},e.prototype._updateNodeAndLinkScale=function(){var t=this._model,e=t.getData(),n=uR(t);e.eachItemGraphicEl(function(t,e){t.setSymbolScale(n)})},e.prototype.updateLayout=function(t){jR(t.getGraph(),uR(t)),this._symbolDraw.updateLayout(),this._lineDraw.updateLayout()},e.prototype.remove=function(t,e){this._symbolDraw&&this._symbolDraw.remove(),this._lineDraw&&this._lineDraw.remove()},e.type="graph",e}(Wv),qR=YR;function ZR(t){return"_EC_"+t}var $R=function(){function t(t){this.type="graph",this.nodes=[],this.edges=[],this._nodesMap={},this._edgesMap={},this._directed=t||!1}return t.prototype.isDirected=function(){return this._directed},t.prototype.addNode=function(t,e){t=null==t?""+e:""+t;var n=this._nodesMap;if(!n[ZR(t)]){var r=new KR(t,e);return r.hostGraph=this,this.nodes.push(r),n[ZR(t)]=r,r}},t.prototype.getNodeByIndex=function(t){var e=this.data.getRawIndex(t);return this.nodes[e]},t.prototype.getNodeById=function(t){return this._nodesMap[ZR(t)]},t.prototype.addEdge=function(t,e,n){var r=this._nodesMap,o=this._edgesMap;if("number"===typeof t&&(t=this.nodes[t]),"number"===typeof e&&(e=this.nodes[e]),t instanceof KR||(t=r[ZR(t)]),e instanceof KR||(e=r[ZR(e)]),t&&e){var i=t.id+"-"+e.id,a=new JR(t,e,n);return a.hostGraph=this,this._directed&&(t.outEdges.push(a),e.inEdges.push(a)),t.edges.push(a),t!==e&&e.edges.push(a),this.edges.push(a),o[i]=a,a}},t.prototype.getEdgeByIndex=function(t){var e=this.edgeData.getRawIndex(t);return this.edges[e]},t.prototype.getEdge=function(t,e){t instanceof KR&&(t=t.id),e instanceof KR&&(e=e.id);var n=this._edgesMap;return this._directed?n[t+"-"+e]:n[t+"-"+e]||n[e+"-"+t]},t.prototype.eachNode=function(t,e){for(var n=this.nodes,r=n.length,o=0;o<r;o++)n[o].dataIndex>=0&&t.call(e,n[o],o)},t.prototype.eachEdge=function(t,e){for(var n=this.edges,r=n.length,o=0;o<r;o++)n[o].dataIndex>=0&&n[o].node1.dataIndex>=0&&n[o].node2.dataIndex>=0&&t.call(e,n[o],o)},t.prototype.breadthFirstTraverse=function(t,e,n,r){if(e instanceof KR||(e=this._nodesMap[ZR(e)]),e){for(var o="out"===n?"outEdges":"in"===n?"inEdges":"edges",i=0;i<this.nodes.length;i++)this.nodes[i].__visited=!1;if(!t.call(r,e,null)){var a=[e];while(a.length){var u=a.shift(),s=u[o];for(i=0;i<s.length;i++){var l=s[i],c=l.node1===u?l.node2:l.node1;if(!c.__visited){if(t.call(r,c,u))return;a.push(c),c.__visited=!0}}}}}},t.prototype.update=function(){for(var t=this.data,e=this.edgeData,n=this.nodes,r=this.edges,o=0,i=n.length;o<i;o++)n[o].dataIndex=-1;for(o=0,i=t.count();o<i;o++)n[t.getRawIndex(o)].dataIndex=o;e.filterSelf(function(t){var n=r[e.getRawIndex(t)];return n.node1.dataIndex>=0&&n.node2.dataIndex>=0});for(o=0,i=r.length;o<i;o++)r[o].dataIndex=-1;for(o=0,i=e.count();o<i;o++)r[e.getRawIndex(o)].dataIndex=o},t.prototype.clone=function(){for(var e=new t(this._directed),n=this.nodes,r=this.edges,o=0;o<n.length;o++)e.addNode(n[o].id,n[o].dataIndex);for(o=0;o<r.length;o++){var i=r[o];e.addEdge(i.node1.id,i.node2.id,i.dataIndex)}return e},t}(),KR=function(){function t(t,e){this.inEdges=[],this.outEdges=[],this.edges=[],this.dataIndex=-1,this.id=null==t?"":t,this.dataIndex=null==e?-1:e}return t.prototype.degree=function(){return this.edges.length},t.prototype.inDegree=function(){return this.inEdges.length},t.prototype.outDegree=function(){return this.outEdges.length},t.prototype.getModel=function(t){if(!(this.dataIndex<0)){var e=this.hostGraph,n=e.data.getItemModel(this.dataIndex);return n.getModel(t)}},t.prototype.getAdjacentDataIndices=function(){for(var t={edge:[],node:[]},e=0;e<this.edges.length;e++){var n=this.edges[e];n.dataIndex<0||(t.edge.push(n.dataIndex),t.node.push(n.node1.dataIndex,n.node2.dataIndex))}return t},t}(),JR=function(){function t(t,e,n){this.dataIndex=-1,this.node1=t,this.node2=e,this.dataIndex=null==n?-1:n}return t.prototype.getModel=function(t){if(!(this.dataIndex<0)){var e=this.hostGraph,n=e.edgeData.getItemModel(this.dataIndex);return n.getModel(t)}},t.prototype.getAdjacentDataIndices=function(){return{edge:[this.dataIndex],node:[this.node1.dataIndex,this.node2.dataIndex]}},t}();function QR(t,e){return{getValue:function(n){var r=this[t][e];return r.get(r.getDimension(n||"value"),this.dataIndex)},setVisual:function(n,r){this.dataIndex>=0&&this[t][e].setItemVisual(this.dataIndex,n,r)},getVisual:function(n){return this[t][e].getItemVisual(this.dataIndex,n)},setLayout:function(n,r){this.dataIndex>=0&&this[t][e].setItemLayout(this.dataIndex,n,r)},getLayout:function(){return this[t][e].getItemLayout(this.dataIndex)},getGraphicEl:function(){return this[t][e].getItemGraphicEl(this.dataIndex)},getRawIndex:function(){return this[t][e].getRawIndex(this.dataIndex)}}}R(KR,QR("hostGraph","data")),R(JR,QR("hostGraph","edgeData"));var tP=$R;function eP(t,e,n,r,o){for(var i=new tP(r),a=0;a<t.length;a++)i.addNode(it(t[a].id,t[a].name,a),a);var u=[],s=[],l=0;for(a=0;a<e.length;a++){var c=e[a],f=c.source,d=c.target;i.addEdge(f,d,l)&&(s.push(c),u.push(it(xi(c.id,null),f+" > "+d)),l++)}var h,p=n.get("coordinateSystem");if("cartesian2d"===p||"polar"===p)h=HM(t,n);else{var g=mg.get(p),m=g&&g.dimensions||[];E(m,"value")<0&&m.concat(["value"]);var v=AM(t,{coordDimensions:m});h=new CM(v,n),h.initData(t)}var y=new CM(["value"],n);return y.initData(s,u),o&&o(h,y),$L({mainData:h,struct:i,structAttr:"graph",datas:{node:h,edge:y},datasAttr:{node:"data",edge:"edgeData"}}),i.update(),i}var nP=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n.hasSymbolVisual=!0,n}return i(e,t),e.prototype.init=function(e){t.prototype.init.apply(this,arguments);var n=this;function r(){return n._categoriesData}this.legendVisualProvider=new $k(r,r),this.fillDataTextStyle(e.edges||e.links),this._updateCategoriesData()},e.prototype.mergeOption=function(e){t.prototype.mergeOption.apply(this,arguments),this.fillDataTextStyle(e.edges||e.links),this._updateCategoriesData()},e.prototype.mergeDefaultAndTheme=function(e){t.prototype.mergeDefaultAndTheme.apply(this,arguments),ui(e,"edgeLabel",["show"])},e.prototype.getInitialData=function(t,e){var n=t.edges||t.links||[],r=t.data||t.nodes||[],o=this;if(r&&n){eR(this);var i=eP(r,n,this,!0,a);return z(i.edges,function(t){nR(t.node1,t.node2,this,t.dataIndex)},this),i.data}function a(t,e){t.wrapMethod("getItemModel",function(t){var e=o._categoriesModels,n=t.getShallow("category"),r=e[n];return r&&(r.parentModel=t.parentModel,t.parentModel=r),t});var n=Yd.prototype.getModel;function r(t,e){var r=n.call(this,t,e);return r.resolveParentPath=i,r}function i(t){if(t&&("label"===t[0]||"label"===t[1])){var e=t.slice();return"label"===t[0]?e[0]="edgeLabel":"label"===t[1]&&(e[1]="edgeLabel"),e}return t}e.wrapMethod("getItemModel",function(t){return t.resolveParentPath=i,t.getModel=r,t})}},e.prototype.getGraph=function(){return this.getData().graph},e.prototype.getEdgeData=function(){return this.getGraph().edgeData},e.prototype.getCategoriesData=function(){return this._categoriesData},e.prototype.formatTooltip=function(t,e,n){if("edge"===n){var r=this.getData(),o=this.getDataParams(t,n),i=r.graph.getEdgeByIndex(t),a=r.getName(i.node1.dataIndex),u=r.getName(i.node2.dataIndex),s=[];return null!=a&&s.push(a),null!=u&&s.push(u),rv("nameValue",{name:s.join(" > "),value:o.value,noValue:null==o.value})}var l=vv({series:this,dataIndex:t,multipleSeries:e});return l},e.prototype._updateCategoriesData=function(){var t=B(this.option.categories||[],function(t){return null!=t.value?t:I({value:0},t)}),e=new CM(["value"],this);e.initData(t),this._categoriesData=e,this._categoriesModels=e.mapArray(function(t){return e.getItemModel(t)})},e.prototype.setZoom=function(t){this.option.zoom=t},e.prototype.setCenter=function(t){this.option.center=t},e.prototype.isAnimationEnabled=function(){return t.prototype.isAnimationEnabled.call(this)&&!("force"===this.get("layout")&&this.get(["force","layoutAnimation"]))},e.type="series.graph",e.dependencies=["grid","polar","geo","singleAxis","calendar"],e.defaultOption={zlevel:0,z:2,coordinateSystem:"view",legendHoverLink:!0,layout:null,circular:{rotateLabel:!1},force:{initLayout:null,repulsion:[0,50],gravity:.1,friction:.6,edgeLength:30,layoutAnimation:!0},left:"center",top:"center",symbol:"circle",symbolSize:10,edgeSymbol:["none","none"],edgeSymbolSize:10,edgeLabel:{position:"middle",distance:5},draggable:!1,roam:!1,center:null,zoom:1,nodeScaleRatio:.6,label:{show:!1,formatter:"{b}"},itemStyle:{},lineStyle:{color:"#aaa",width:1,opacity:.5},emphasis:{scale:!0,label:{show:!0}},select:{itemStyle:{borderColor:"#212121"}}},e}(Iv),rP=nP,oP={type:"graphRoam",event:"graphRoam",update:"none"};function iP(t){t.registerChartView(qR),t.registerSeriesModel(rP),t.registerProcessor(UN),t.registerVisual(GN),t.registerVisual(XN),t.registerLayout(aR),t.registerLayout(t.PRIORITY.VISUAL.POST_CHART_LAYOUT,hR),t.registerLayout(mR),t.registerCoordinateSystem("graphView",{dimensions:eL.dimensions,create:yR}),t.registerAction({type:"focusNodeAdjacency",event:"focusNodeAdjacency",update:"series:focusNodeAdjacency"},function(){}),t.registerAction({type:"unfocusNodeAdjacency",event:"unfocusNodeAdjacency",update:"series:unfocusNodeAdjacency"},function(){}),t.registerAction(oP,function(t,e){e.eachComponent({mainType:"series",query:t},function(e){var n=e.coordinateSystem,r=hL(n,t);e.setCenter&&e.setCenter(r.center),e.setZoom&&e.setZoom(r.zoom)})})}var aP=function(){function t(){this.angle=0,this.width=10,this.r=10,this.x=0,this.y=0}return t}(),uP=function(t){function e(e){var n=t.call(this,e)||this;return n.type="pointer",n}return i(e,t),e.prototype.getDefaultShape=function(){return new aP},e.prototype.buildPath=function(t,e){var n=Math.cos,r=Math.sin,o=e.r,i=e.width,a=e.angle,u=e.x-n(a)*i*(i>=o/3?1:2),s=e.y-r(a)*i*(i>=o/3?1:2);a=e.angle-Math.PI/2,t.moveTo(u,s),t.lineTo(e.x+n(a)*i,e.y+r(a)*i),t.lineTo(e.x+n(e.angle)*o,e.y+r(e.angle)*o),t.lineTo(e.x-n(a)*i,e.y-r(a)*i),t.lineTo(u,s)},e}(ds),sP=uP;function lP(t,e){var n=t.get("center"),r=e.getWidth(),o=e.getHeight(),i=Math.min(r,o),a=Ro(n[0],e.getWidth()),u=Ro(n[1],e.getHeight()),s=Ro(t.get("radius"),i/2);return{cx:a,cy:u,r:s}}function cP(t,e){var n=null==t?"":t+"";return e&&("string"===typeof e?n=e.replace("{value}",n):"function"===typeof e&&(n=e(t))),n}var fP=2*Math.PI,dP=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n}return i(e,t),e.prototype.render=function(t,e,n){this.group.removeAll();var r=t.get(["axisLine","lineStyle","color"]),o=lP(t,n);this._renderMain(t,e,n,r,o),this._data=t.getData()},e.prototype.dispose=function(){},e.prototype._renderMain=function(t,e,n,r,o){for(var i=this.group,a=t.get("clockwise"),u=-t.get("startAngle")/180*Math.PI,s=-t.get("endAngle")/180*Math.PI,l=t.getModel("axisLine"),c=l.get("roundCap"),f=c?lk:Xc,d=l.get("show"),h=l.getModel("lineStyle"),p=h.get("width"),g=(s-u)%fP||s===u?(s-u)%fP:fP,m=u,v=0;d&&v<r.length;v++){var y=Math.min(Math.max(r[v][0],0),1);s=u+g*y;var b=new f({shape:{startAngle:m,endAngle:s,cx:o.cx,cy:o.cy,clockwise:a,r0:o.r-p,r:o.r},silent:!0});b.setStyle({fill:r[v][1]}),b.setStyle(h.getLineStyle(["color","width"])),i.add(b),m=s}var x=function(t){if(t<=0)return r[0][1];var e;for(e=0;e<r.length;e++)if(r[e][0]>=t&&(0===e?0:r[e-1][0])<t)return r[e][1];return r[e-1][1]};if(!a){var w=u;u=s,s=w}this._renderTicks(t,e,n,x,o,u,s,a,p),this._renderTitleAndDetail(t,e,n,x,o),this._renderAnchor(t,o),this._renderPointer(t,e,n,x,o,u,s,a,p)},e.prototype._renderTicks=function(t,e,n,r,o,i,a,u,s){for(var l,c,f=this.group,d=o.cx,h=o.cy,p=o.r,g=+t.get("min"),m=+t.get("max"),v=t.getModel("splitLine"),y=t.getModel("axisTick"),b=t.getModel("axisLabel"),x=t.get("splitNumber"),w=y.get("splitNumber"),_=Ro(v.get("length"),p),S=Ro(y.get("length"),p),C=i,M=(a-i)/x,T=M/w,k=v.getModel("lineStyle").getLineStyle(),D=y.getModel("lineStyle").getLineStyle(),A=v.get("distance"),I=0;I<=x;I++){if(l=Math.cos(C),c=Math.sin(C),v.get("show")){var O=A?A+s:s,L=new cf({shape:{x1:l*(p-O)+d,y1:c*(p-O)+h,x2:l*(p-_-O)+d,y2:c*(p-_-O)+h},style:k,silent:!0});"auto"===k.stroke&&L.setStyle({stroke:r(I/x)}),f.add(L)}if(b.get("show")){O=b.get("distance")+A;var E=cP(Po(I/x*(m-g)+g),b.get("formatter")),N=r(I/x);f.add(new Us({style:Cd(b,{text:E,x:l*(p-_-O)+d,y:c*(p-_-O)+h,verticalAlign:c<-.8?"top":c>.8?"bottom":"middle",align:l<-.4?"left":l>.4?"right":"center"},{inheritColor:N}),silent:!0}))}if(y.get("show")&&I!==x){O=y.get("distance");O=O?O+s:s;for(var R=0;R<=w;R++){l=Math.cos(C),c=Math.sin(C);var P=new cf({shape:{x1:l*(p-O)+d,y1:c*(p-O)+h,x2:l*(p-S-O)+d,y2:c*(p-S-O)+h},silent:!0,style:D});"auto"===D.stroke&&P.setStyle({stroke:r((I+R/w)/x)}),f.add(P),C+=T}C-=T}else C+=M}},e.prototype._renderPointer=function(t,e,n,r,o,i,a,u,s){var l=this.group,c=this._data,f=this._progressEls,d=[],h=t.get(["pointer","show"]),p=t.getModel("progress"),g=p.get("show"),m=t.getData(),v=m.mapDimension("value"),y=+t.get("min"),b=+t.get("max"),x=[y,b],w=[i,a];function _(e,n){var r,i=m.getItemModel(e),a=i.getModel("pointer"),u=Ro(a.get("width"),o.r),s=Ro(a.get("length"),o.r),l=t.get(["pointer","icon"]),c=a.get("offsetCenter"),f=Ro(c[0],o.r),d=Ro(c[1],o.r),h=a.get("keepAspect");return r=l?zb(l,f-u/2,d-s,u,s,null,h):new sP({shape:{angle:-Math.PI/2,width:u,r:s,x:f,y:d}}),r.rotation=-(n+Math.PI/2),r.x=o.cx,r.y=o.cy,r}function S(t,e){var n=p.get("roundCap"),r=n?lk:Xc,a=p.get("overlap"),l=a?p.get("width"):s/m.count(),c=a?o.r-l:o.r-(t+1)*l,f=a?o.r:o.r-t*l,d=new r({shape:{startAngle:i,endAngle:e,cx:o.cx,cy:o.cy,clockwise:u,r0:c,r:f}});return a&&(d.z2=b-m.get(v,t)%b),d}(g||h)&&(m.diff(c).add(function(e){if(h){var n=_(e,i);td(n,{rotation:-(No(m.get(v,e),x,w,!0)+Math.PI/2)},t),l.add(n),m.setItemGraphicEl(e,n)}if(g){var r=S(e,i),o=p.get("clip");td(r,{shape:{endAngle:No(m.get(v,e),x,w,o)}},t),l.add(r),d[e]=r}}).update(function(e,n){if(h){var r=c.getItemGraphicEl(n),o=r?r.rotation:i,a=_(e,o);a.rotation=o,Qf(a,{rotation:-(No(m.get(v,e),x,w,!0)+Math.PI/2)},t),l.add(a),m.setItemGraphicEl(e,a)}if(g){var u=f[n],s=u?u.shape.endAngle:i,y=S(e,s),b=p.get("clip");Qf(y,{shape:{endAngle:No(m.get(v,e),x,w,b)}},t),l.add(y),d[e]=y}}).execute(),m.each(function(t){var e=m.getItemModel(t),n=e.getModel("emphasis");if(h){var o=m.getItemGraphicEl(t),i=m.getItemVisual(t,"style"),a=i.fill;if(o instanceof xs){var u=o.style;o.useStyle(I({image:u.image,x:u.x,y:u.y,width:u.width,height:u.height},i))}else o.useStyle(i),"pointer"!==o.type&&o.setColor(a);o.setStyle(e.getModel(["pointer","itemStyle"]).getItemStyle()),"auto"===o.style.fill&&o.setStyle("fill",r(No(m.get(v,t),x,[0,1],!0))),o.z2EmphasisLift=0,ql(o,e),Gl(o,n.get("focus"),n.get("blurScope"))}if(g){var s=d[t];s.useStyle(m.getItemVisual(t,"style")),s.setStyle(e.getModel(["progress","itemStyle"]).getItemStyle()),s.z2EmphasisLift=0,ql(s,e),Gl(s,n.get("focus"),n.get("blurScope"))}}),this._progressEls=d)},e.prototype._renderAnchor=function(t,e){var n=t.getModel("anchor"),r=n.get("show");if(r){var o=n.get("size"),i=n.get("icon"),a=n.get("offsetCenter"),u=n.get("keepAspect"),s=zb(i,e.cx-o/2+Ro(a[0],e.r),e.cy-o/2+Ro(a[1],e.r),o,o,null,u);s.z2=n.get("showAbove")?1:0,s.setStyle(n.getModel("itemStyle").getItemStyle()),this.group.add(s)}},e.prototype._renderTitleAndDetail=function(t,e,n,r,o){var i=this,a=t.getData(),u=a.mapDimension("value"),s=+t.get("min"),l=+t.get("max"),c=new _o,f=[],d=[],h=t.isAnimationEnabled();a.diff(this._data).add(function(t){f[t]=new Us({silent:!0}),d[t]=new Us({silent:!0})}).update(function(t,e){f[t]=i._titleEls[e],d[t]=i._detailEls[e]}).execute(),a.each(function(e){var n=a.getItemModel(e),i=a.get(u,e),p=new _o,g=r(No(i,[s,l],[0,1],!0)),m=n.getModel("title");if(m.get("show")){var v=m.get("offsetCenter"),y=o.cx+Ro(v[0],o.r),b=o.cy+Ro(v[1],o.r),x=f[e];x.attr({style:Cd(m,{x:y,y:b,text:a.getName(e),align:"center",verticalAlign:"middle"},{inheritColor:g})}),p.add(x)}var w=n.getModel("detail");if(w.get("show")){var _=w.get("offsetCenter"),S=o.cx+Ro(_[0],o.r),C=o.cy+Ro(_[1],o.r),M=Ro(w.get("width"),o.r),T=Ro(w.get("height"),o.r),k=t.get(["progress","show"])?a.getItemVisual(e,"style").fill:g,D=(x=d[e],w.get("formatter"));x.attr({style:Cd(w,{x:S,y:C,text:cP(i,D),width:isNaN(M)?null:M,height:isNaN(T)?null:T,align:"center",verticalAlign:"middle"},{inheritColor:k})}),Nd(x,{normal:w},i,function(t){return cP(t,D)}),h&&Rd(x,e,a,t,{getFormattedLabel:function(t,e,n,r,o,a){return cP(a?a.interpolatedValue:i,D)}}),p.add(x)}c.add(p)}),this.group.add(c),this._titleEls=f,this._detailEls=d},e.type="gauge",e}(Wv),hP=dP,pP=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n.visualStyleAccessPath="itemStyle",n.useColorPaletteOnData=!0,n}return i(e,t),e.prototype.getInitialData=function(t,e){return qk(this,["value"])},e.type="series.gauge",e.defaultOption={zlevel:0,z:2,center:["50%","50%"],legendHoverLink:!0,radius:"75%",startAngle:225,endAngle:-45,clockwise:!0,min:0,max:100,splitNumber:10,axisLine:{show:!0,roundCap:!1,lineStyle:{color:[[1,"#E6EBF8"]],width:10}},progress:{show:!1,overlap:!0,width:10,roundCap:!1,clip:!0},splitLine:{show:!0,length:10,distance:10,lineStyle:{color:"#63677A",width:3,type:"solid"}},axisTick:{show:!0,splitNumber:5,length:6,distance:10,lineStyle:{color:"#63677A",width:1,type:"solid"}},axisLabel:{show:!0,distance:15,color:"#464646",fontSize:12},pointer:{icon:null,offsetCenter:[0,0],show:!0,length:"60%",width:6,keepAspect:!1},anchor:{show:!1,showAbove:!1,size:6,icon:"circle",offsetCenter:[0,0],keepAspect:!1,itemStyle:{color:"#fff",borderWidth:0,borderColor:"#5470c6"}},title:{show:!0,offsetCenter:[0,"20%"],color:"#464646",fontSize:16,valueAnimation:!1},detail:{show:!0,backgroundColor:"rgba(0,0,0,0)",borderWidth:0,borderColor:"#ccc",width:100,height:null,padding:[5,10],offsetCenter:[0,"40%"],color:"#464646",fontSize:30,fontWeight:"bold",lineHeight:30,valueAnimation:!1}},e}(Iv),gP=pP;function mP(t){t.registerChartView(hP),t.registerSeriesModel(gP)}var vP=["itemStyle","opacity"],yP=function(t){function e(e,n){var r=t.call(this)||this,o=r,i=new af,a=new Us;return o.setTextContent(a),r.setTextGuideLine(i),r.updateData(e,n,!0),r}return i(e,t),e.prototype.updateData=function(t,e,n){var r=this,o=t.hostModel,i=t.getItemModel(e),a=t.getItemLayout(e),u=i.getModel("emphasis"),s=i.get(vP);s=null==s?1:s,r.useStyle(t.getItemVisual(e,"style")),r.style.lineJoin="round",n?(r.setShape({points:a.points}),r.style.opacity=0,td(r,{style:{opacity:s}},o,e)):Qf(r,{style:{opacity:s},shape:{points:a.points}},o,e),ql(r,i),this._updateLabel(t,e),Gl(this,u.get("focus"),u.get("blurScope"))},e.prototype._updateLabel=function(t,e){var n=this,r=this.getTextGuideLine(),o=n.getTextContent(),i=t.hostModel,a=t.getItemModel(e),u=t.getItemLayout(e),s=u.label,l=t.getItemVisual(e,"style"),c=l.fill;_d(o,Sd(a),{labelFetcher:t.hostModel,labelDataIndex:e,defaultOpacity:l.opacity,defaultText:t.getName(e)},{normal:{align:s.textAlign,verticalAlign:s.verticalAlign}}),n.setTextConfig({local:!0,inside:!!s.inside,insideStroke:c,outsideFill:c});var f=s.linePoints;r.setShape({points:f}),n.textGuideLineConfig={anchor:f?new Vr(f[0][0],f[0][1]):null},Qf(o,{style:{x:s.x,y:s.y}},i,e),o.attr({rotation:s.rotation,originX:s.x,originY:s.y,z2:10}),ob(n,ib(a),{stroke:c})},e}(nf),bP=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n.ignoreLabelLineUpdate=!0,n}return i(e,t),e.prototype.render=function(t,e,n){var r=t.getData(),o=this._data,i=this.group;r.diff(o).add(function(t){var e=new yP(r,t);r.setItemGraphicEl(t,e),i.add(e)}).update(function(t,e){var n=o.getItemGraphicEl(e);n.updateData(r,t),i.add(n),r.setItemGraphicEl(t,n)}).remove(function(e){var n=o.getItemGraphicEl(e);rd(n,t,e)}).execute(),this._data=r},e.prototype.remove=function(){this.group.removeAll(),this._data=null},e.prototype.dispose=function(){},e.type="funnel",e}(Wv),xP=bP,wP=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n.useColorPaletteOnData=!0,n}return i(e,t),e.prototype.init=function(e){t.prototype.init.apply(this,arguments),this.legendVisualProvider=new $k(G(this.getData,this),G(this.getRawData,this)),this._defaultLabelLine(e)},e.prototype.getInitialData=function(t,e){return qk(this,{coordDimensions:["value"],encodeDefaulter:j(Pp,this)})},e.prototype._defaultLabelLine=function(t){ui(t,"labelLine",["show"]);var e=t.labelLine,n=t.emphasis.labelLine;e.show=e.show&&t.label.show,n.show=n.show&&t.emphasis.label.show},e.prototype.getDataParams=function(e){var n=this.getData(),r=t.prototype.getDataParams.call(this,e),o=n.mapDimension("value"),i=n.getSum(o);return r.percent=i?+(n.get(o,e)/i*100).toFixed(2):0,r.$vars.push("percent"),r},e.type="series.funnel",e.defaultOption={zlevel:0,z:2,legendHoverLink:!0,left:80,top:60,right:80,bottom:60,minSize:"0%",maxSize:"100%",sort:"descending",orient:"vertical",gap:0,funnelAlign:"center",label:{show:!0,position:"outer"},labelLine:{show:!0,length:20,lineStyle:{width:1}},itemStyle:{borderColor:"#fff",borderWidth:1},emphasis:{label:{show:!0}},select:{itemStyle:{borderColor:"#212121"}}},e}(Iv),_P=wP;function SP(t,e){return lp(t.getBoxLayoutParams(),{width:e.getWidth(),height:e.getHeight()})}function CP(t,e){for(var n=t.mapDimension("value"),r=t.mapArray(n,function(t){return t}),o=[],i="ascending"===e,a=0,u=t.count();a<u;a++)o[a]=a;return"function"===typeof e?o.sort(e):"none"!==e&&o.sort(function(t,e){return i?r[t]-r[e]:r[e]-r[t]}),o}function MP(t){var e=t.hostModel,n=e.get("orient");t.each(function(e){var r,o,i,a,u=t.getItemModel(e),s=u.getModel("label"),l=s.get("position"),c=u.getModel("labelLine"),f=t.getItemLayout(e),d=f.points,h="inner"===l||"inside"===l||"center"===l||"insideLeft"===l||"insideRight"===l;if(h)"insideLeft"===l?(o=(d[0][0]+d[3][0])/2+5,i=(d[0][1]+d[3][1])/2,r="left"):"insideRight"===l?(o=(d[1][0]+d[2][0])/2-5,i=(d[1][1]+d[2][1])/2,r="right"):(o=(d[0][0]+d[1][0]+d[2][0]+d[3][0])/4,i=(d[0][1]+d[1][1]+d[2][1]+d[3][1])/4,r="center"),a=[[o,i],[o,i]];else{var p=void 0,g=void 0,m=void 0,v=void 0,y=c.get("length");0,"left"===l?(p=(d[3][0]+d[0][0])/2,g=(d[3][1]+d[0][1])/2,m=p-y,o=m-5,r="right"):"right"===l?(p=(d[1][0]+d[2][0])/2,g=(d[1][1]+d[2][1])/2,m=p+y,o=m+5,r="left"):"top"===l?(p=(d[3][0]+d[0][0])/2,g=(d[3][1]+d[0][1])/2,v=g-y,i=v-5,r="center"):"bottom"===l?(p=(d[1][0]+d[2][0])/2,g=(d[1][1]+d[2][1])/2,v=g+y,i=v+5,r="center"):"rightTop"===l?(p="horizontal"===n?d[3][0]:d[1][0],g="horizontal"===n?d[3][1]:d[1][1],"horizontal"===n?(v=g-y,i=v-5,r="center"):(m=p+y,o=m+5,r="top")):"rightBottom"===l?(p=d[2][0],g=d[2][1],"horizontal"===n?(v=g+y,i=v+5,r="center"):(m=p+y,o=m+5,r="bottom")):"leftTop"===l?(p=d[0][0],g="horizontal"===n?d[0][1]:d[1][1],"horizontal"===n?(v=g-y,i=v-5,r="center"):(m=p-y,o=m-5,r="right")):"leftBottom"===l?(p="horizontal"===n?d[1][0]:d[3][0],g="horizontal"===n?d[1][1]:d[2][1],"horizontal"===n?(v=g+y,i=v+5,r="center"):(m=p-y,o=m-5,r="right")):(p=(d[1][0]+d[2][0])/2,g=(d[1][1]+d[2][1])/2,"horizontal"===n?(v=g+y,i=v+5,r="center"):(m=p+y,o=m+5,r="left")),"horizontal"===n?(m=p,o=m):(v=g,i=v),a=[[p,g],[m,v]]}f.label={linePoints:a,x:o,y:i,verticalAlign:"middle",textAlign:r,inside:h}})}function TP(t,e){t.eachSeriesByType("funnel",function(t){var n=t.getData(),r=n.mapDimension("value"),o=t.get("sort"),i=SP(t,e),a=t.get("orient"),u=i.width,s=i.height,l=CP(n,o),c=i.x,f=i.y,d="horizontal"===a?[Ro(t.get("minSize"),s),Ro(t.get("maxSize"),s)]:[Ro(t.get("minSize"),u),Ro(t.get("maxSize"),u)],h=n.getDataExtent(r),p=t.get("min"),g=t.get("max");null==p&&(p=Math.min(h[0],0)),null==g&&(g=h[1]);var m=t.get("funnelAlign"),v=t.get("gap"),y="horizontal"===a?u:s,b=(y-v*(n.count()-1))/n.count(),x=function(t,e){if("horizontal"===a){var o=n.get(r,t)||0,i=No(o,[p,g],d,!0),l=void 0;switch(m){case"top":l=f;break;case"center":l=f+(s-i)/2;break;case"bottom":l=f+(s-i);break}return[[e,l],[e,l+i]]}var h,v=n.get(r,t)||0,y=No(v,[p,g],d,!0);switch(m){case"left":h=c;break;case"center":h=c+(u-y)/2;break;case"right":h=c+u-y;break}return[[h,e],[h+y,e]]};"ascending"===o&&(b=-b,v=-v,"horizontal"===a?c+=u:f+=s,l=l.reverse());for(var w=0;w<l.length;w++){var _=l[w],S=l[w+1],C=n.getItemModel(_);if("horizontal"===a){var M=C.get(["itemStyle","width"]);null==M?M=b:(M=Ro(M,u),"ascending"===o&&(M=-M));var T=x(_,c),k=x(S,c+M);c+=M+v,n.setItemLayout(_,{points:T.concat(k.slice().reverse())})}else{var D=C.get(["itemStyle","height"]);null==D?D=b:(D=Ro(D,s),"ascending"===o&&(D=-D));T=x(_,f),k=x(S,f+D);f+=D+v,n.setItemLayout(_,{points:T.concat(k.slice().reverse())})}}MP(n)})}function kP(t){t.registerChartView(xP),t.registerSeriesModel(_P),t.registerLayout(TP),t.registerProcessor(Bk("funnel"))}var DP=.3,AP=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n._dataGroup=new _o,n._initialized=!1,n}return i(e,t),e.prototype.init=function(){this.group.add(this._dataGroup)},e.prototype.render=function(t,e,n,r){var o=this._dataGroup,i=t.getData(),a=this._data,u=t.coordinateSystem,s=u.dimensions,l=EP(t);function c(t){var e=LP(i,o,t,s,u);NP(e,i,t,l)}function f(e,n){var r=a.getItemGraphicEl(n),o=OP(i,e,s,u);i.setItemGraphicEl(e,r),Qf(r,{shape:{points:o}},t,e),NP(r,i,e,l)}function d(t){var e=a.getItemGraphicEl(t);o.remove(e)}if(i.diff(a).add(c).update(f).remove(d).execute(),!this._initialized){this._initialized=!0;var h=IP(u,t,function(){setTimeout(function(){o.removeClipPath()})});o.setClipPath(h)}this._data=i},e.prototype.incrementalPrepareRender=function(t,e,n){this._initialized=!0,this._data=null,this._dataGroup.removeAll()},e.prototype.incrementalRender=function(t,e,n){for(var r=e.getData(),o=e.coordinateSystem,i=o.dimensions,a=EP(e),u=t.start;u<t.end;u++){var s=LP(r,this._dataGroup,u,i,o);s.incremental=!0,NP(s,r,u,a)}},e.prototype.remove=function(){this._dataGroup&&this._dataGroup.removeAll(),this._data=null},e.type="parallel",e}(Wv);function IP(t,e,n){var r=t.model,o=t.getRect(),i=new As({shape:{x:o.x,y:o.y,width:o.width,height:o.height}}),a="horizontal"===r.get("layout")?"width":"height";return i.setShape(a,0),td(i,{shape:{width:o.width,height:o.height}},e,n),i}function OP(t,e,n,r){for(var o=[],i=0;i<n.length;i++){var a=n[i],u=t.get(t.mapDimension(a),e);RP(u,r.getAxis(a).type)||o.push(r.dataToPoint(u,a))}return o}function LP(t,e,n,r,o){var i=OP(t,n,r,o),a=new af({shape:{points:i},z2:10});return e.add(a),t.setItemGraphicEl(n,a),a}function EP(t){var e=t.get("smooth",!0);return!0===e&&(e=DP),e=Qo(e),ot(e)&&(e=0),{smooth:e}}function NP(t,e,n,r){t.useStyle(e.getItemVisual(n,"style")),t.style.fill=null,t.setShape("smooth",r.smooth);var o=e.getItemModel(n),i=o.getModel("emphasis");ql(t,o,"lineStyle"),Gl(t,i.get("focus"),i.get("blurScope"))}function RP(t,e){return"category"===e?null==t:null==t||isNaN(t)}var PP=AP,zP=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n.visualStyleAccessPath="lineStyle",n.visualDrawType="stroke",n}return i(e,t),e.prototype.getInitialData=function(t,e){return HM(this.getSource(),this,{useEncodeDefaulter:G(BP,null,this)})},e.prototype.getRawIndicesByActiveState=function(t){var e=this.coordinateSystem,n=this.getData(),r=[];return e.eachActiveState(n,function(e,o){t===e&&r.push(n.getRawIndex(o))}),r},e.type="series.parallel",e.dependencies=["parallel"],e.defaultOption={zlevel:0,z:2,coordinateSystem:"parallel",parallelIndex:0,label:{show:!1},inactiveOpacity:.05,activeOpacity:1,lineStyle:{width:1,opacity:.45,type:"solid"},emphasis:{label:{show:!1}},progressive:500,smooth:!1,animationEasing:"linear"},e}(Iv);function BP(t){var e=t.ecModel.getComponent("parallel",t.get("parallelIndex"));if(e){var n={};return z(e.dimensions,function(t){var e=VP(t);n[t]=e}),n}}function VP(t){return+t.replace("dim","")}var HP=zP,FP=["lineStyle","opacity"],WP={seriesType:"parallel",reset:function(t,e){var n=t.coordinateSystem,r={normal:t.get(["lineStyle","opacity"]),active:t.get("activeOpacity"),inactive:t.get("inactiveOpacity")};return{progress:function(t,e){n.eachActiveState(e,function(t,n){var o=r[t];if("normal"===t&&e.hasItemOption){var i=e.getItemModel(n).get(FP,!0);null!=i&&(o=i)}var a=e.ensureUniqueItemVisual(n,"style");a.opacity=o},t.start,t.end)}}}},UP=WP;function GP(t){jP(t),XP(t)}function jP(t){if(!t.parallel){var e=!1;z(t.series,function(t){t&&"parallel"===t.type&&(e=!0)}),e&&(t.parallel=[{}])}}function XP(t){var e=ai(t.parallelAxis);z(e,function(e){if(K(e)){var n=e.parallelIndex||0,r=ai(t.parallel)[n];r&&r.parallelAxisDefault&&D(e,r.parallelAxisDefault,!1)}})}var YP=5,qP=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n}return i(e,t),e.prototype.render=function(t,e,n){this._model=t,this._api=n,this._handlers||(this._handlers={},z(ZP,function(t,e){n.getZr().on(e,this._handlers[e]=G(t,this))},this)),Yv(this,"_throttledDispatchExpand",t.get("axisExpandRate"),"fixRate")},e.prototype.dispose=function(t,e){z(this._handlers,function(t,n){e.getZr().off(n,t)}),this._handlers=null},e.prototype._throttledDispatchExpand=function(t){this._dispatchExpand(t)},e.prototype._dispatchExpand=function(t){t&&this._api.dispatchAction(I({type:"parallelAxisExpand"},t))},e.type="parallel",e}(Lv),ZP={mousedown:function(t){$P(this,"click")&&(this._mouseDownPoint=[t.offsetX,t.offsetY])},mouseup:function(t){var e=this._mouseDownPoint;if($P(this,"click")&&e){var n=[t.offsetX,t.offsetY],r=Math.pow(e[0]-n[0],2)+Math.pow(e[1]-n[1],2);if(r>YP)return;var o=this._model.coordinateSystem.getSlidedAxisExpandWindow([t.offsetX,t.offsetY]);"none"!==o.behavior&&this._dispatchExpand({axisExpandWindow:o.axisExpandWindow})}this._mouseDownPoint=null},mousemove:function(t){if(!this._mouseDownPoint&&$P(this,"mousemove")){var e=this._model,n=e.coordinateSystem.getSlidedAxisExpandWindow([t.offsetX,t.offsetY]),r=n.behavior;"jump"===r&&this._throttledDispatchExpand.debounceNextCall(e.get("axisExpandDebounce")),this._throttledDispatchExpand("none"===r?null:{axisExpandWindow:n.axisExpandWindow,animation:"jump"===r?null:{duration:0}})}}};function $P(t,e){var n=t._model;return n.get("axisExpandable")&&n.get("axisExpandTriggerOn")===e}var KP=qP,JP=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n}return i(e,t),e.prototype.init=function(){t.prototype.init.apply(this,arguments),this.mergeOption({})},e.prototype.mergeOption=function(t){var e=this.option;t&&D(e,t,!0),this._initDimensions()},e.prototype.contains=function(t,e){var n=t.get("parallelIndex");return null!=n&&e.getComponent("parallel",n)===this},e.prototype.setAxisExpand=function(t){z(["axisExpandable","axisExpandCenter","axisExpandCount","axisExpandWidth","axisExpandWindow"],function(e){t.hasOwnProperty(e)&&(this.option[e]=t[e])},this)},e.prototype._initDimensions=function(){var t=this.dimensions=[],e=this.parallelAxisIndex=[],n=H(this.ecModel.queryComponents({mainType:"parallelAxis"}),function(t){return(t.get("parallelIndex")||0)===this.componentIndex},this);z(n,function(n){t.push("dim"+n.get("dim")),e.push(n.componentIndex)})},e.type="parallel",e.dependencies=["parallelAxis"],e.layoutMode="box",e.defaultOption={zlevel:0,z:0,left:80,top:60,right:80,bottom:60,layout:"horizontal",axisExpandable:!1,axisExpandCenter:null,axisExpandCount:0,axisExpandWidth:50,axisExpandRate:17,axisExpandDebounce:50,axisExpandSlideTriggerArea:[-.15,.05,.4],axisExpandTriggerOn:"click",parallelAxisDefault:null},e}(bp),QP=JP,tz=function(t){function e(e,n,r,o,i){var a=t.call(this,e,n,r)||this;return a.type=o||"value",a.axisIndex=i,a}return i(e,t),e.prototype.isHorizontal=function(){return"horizontal"!==this.coordinateSystem.getModel().get("layout")},e}(JA),ez=tz;function nz(t,e,n,r,o,i){t=t||0;var a=n[1]-n[0];if(null!=o&&(o=oz(o,[0,a])),null!=i&&(i=Math.max(i,null!=o?o:0)),"all"===r){var u=Math.abs(e[1]-e[0]);u=oz(u,[0,a]),o=i=oz(u,[o,i]),r=0}e[0]=oz(e[0],n),e[1]=oz(e[1],n);var s=rz(e,r);e[r]+=t;var l,c=o||0,f=n.slice();return s.sign<0?f[0]+=c:f[1]-=c,e[r]=oz(e[r],f),l=rz(e,r),null!=o&&(l.sign!==s.sign||l.span<o)&&(e[1-r]=e[r]+s.sign*o),l=rz(e,r),null!=i&&l.span>i&&(e[1-r]=e[r]+l.sign*i),e}function rz(t,e){var n=t[e]-t[1-e];return{span:Math.abs(n),sign:n>0?-1:n<0?1:e?-1:1}}function oz(t,e){return Math.min(null!=e[1]?e[1]:1/0,Math.max(null!=e[0]?e[0]:-1/0,t))}var iz=z,az=Math.min,uz=Math.max,sz=Math.floor,lz=Math.ceil,cz=Po,fz=Math.PI,dz=function(){function t(t,e,n){this.type="parallel",this._axesMap=mt(),this._axesLayout={},this.dimensions=t.dimensions,this._model=t,this._init(t,e,n)}return t.prototype._init=function(t,e,n){var r=t.dimensions,o=t.parallelAxisIndex;iz(r,function(t,n){var r=o[n],i=e.getComponent("parallelAxis",r),a=this._axesMap.set(t,new ez(t,vA(i),[0,0],i.get("type"),r)),u="category"===a.type;a.onBand=u&&i.get("boundaryGap"),a.inverse=i.get("inverse"),i.axis=a,a.model=i,a.coordinateSystem=i.coordinateSystem=this},this)},t.prototype.update=function(t,e){this._updateAxesFromSeries(this._model,t)},t.prototype.containPoint=function(t){var e=this._makeLayoutInfo(),n=e.axisBase,r=e.layoutBase,o=e.pixelDimIndex,i=t[1-o],a=t[o];return i>=n&&i<=n+e.axisLength&&a>=r&&a<=r+e.layoutLength},t.prototype.getModel=function(){return this._model},t.prototype._updateAxesFromSeries=function(t,e){e.eachSeries(function(n){if(t.contains(n,e)){var r=n.getData();iz(this.dimensions,function(t){var e=this._axesMap.get(t);e.scale.unionExtentFromData(r,r.mapDimension(t)),mA(e.scale,e.model)},this)}},this)},t.prototype.resize=function(t,e){this._rect=lp(t.getBoxLayoutParams(),{width:e.getWidth(),height:e.getHeight()}),this._layoutAxes()},t.prototype.getRect=function(){return this._rect},t.prototype._makeLayoutInfo=function(){var t,e=this._model,n=this._rect,r=["x","y"],o=["width","height"],i=e.get("layout"),a="horizontal"===i?0:1,u=n[o[a]],s=[0,u],l=this.dimensions.length,c=hz(e.get("axisExpandWidth"),s),f=hz(e.get("axisExpandCount")||0,[0,l]),d=e.get("axisExpandable")&&l>3&&l>f&&f>1&&c>0&&u>0,h=e.get("axisExpandWindow");if(h)t=hz(h[1]-h[0],s),h[1]=h[0]+t;else{t=hz(c*(f-1),s);var p=e.get("axisExpandCenter")||sz(l/2);h=[c*p-t/2],h[1]=h[0]+t}var g=(u-t)/(l-f);g<3&&(g=0);var m=[sz(cz(h[0]/c,1))+1,lz(cz(h[1]/c,1))-1],v=g/c*h[0];return{layout:i,pixelDimIndex:a,layoutBase:n[r[a]],layoutLength:u,axisBase:n[r[1-a]],axisLength:n[o[1-a]],axisExpandable:d,axisExpandWidth:c,axisCollapseWidth:g,axisExpandWindow:h,axisCount:l,winInnerIndices:m,axisExpandWindow0Pos:v}},t.prototype._layoutAxes=function(){var t=this._rect,e=this._axesMap,n=this.dimensions,r=this._makeLayoutInfo(),o=r.layout;e.each(function(t){var e=[0,r.axisLength],n=t.inverse?1:0;t.setExtent(e[n],e[1-n])}),iz(n,function(e,n){var i=(r.axisExpandable?gz:pz)(n,r),a={horizontal:{x:i.position,y:r.axisLength},vertical:{x:0,y:i.position}},u={horizontal:fz/2,vertical:0},s=[a[o].x+t.x,a[o].y+t.y],l=u[o],c=yr();Sr(c,c,l),_r(c,c,s),this._axesLayout[e]={position:s,rotation:l,transform:c,axisNameAvailableWidth:i.axisNameAvailableWidth,axisLabelShow:i.axisLabelShow,nameTruncateMaxWidth:i.nameTruncateMaxWidth,tickDirection:1,labelDirection:1}},this)},t.prototype.getAxis=function(t){return this._axesMap.get(t)},t.prototype.dataToPoint=function(t,e){return this.axisCoordToPoint(this._axesMap.get(e).dataToCoord(t),e)},t.prototype.eachActiveState=function(t,e,n,r){null==n&&(n=0),null==r&&(r=t.count());var o=this._axesMap,i=this.dimensions,a=[],u=[];z(i,function(e){a.push(t.mapDimension(e)),u.push(o.get(e).model)});for(var s=this.hasAxisBrushed(),l=n;l<r;l++){var c=void 0;if(s){c="active";for(var f=t.getValues(a,l),d=0,h=i.length;d<h;d++){var p=u[d].getActiveState(f[d]);if("inactive"===p){c="inactive";break}}}else c="normal";e(c,l)}},t.prototype.hasAxisBrushed=function(){for(var t=this.dimensions,e=this._axesMap,n=!1,r=0,o=t.length;r<o;r++)"normal"!==e.get(t[r]).model.getActiveState()&&(n=!0);return n},t.prototype.axisCoordToPoint=function(t,e){var n=this._axesLayout[e];return ad([t,0],n.transform)},t.prototype.getAxisLayout=function(t){return k(this._axesLayout[t])},t.prototype.getSlidedAxisExpandWindow=function(t){var e=this._makeLayoutInfo(),n=e.pixelDimIndex,r=e.axisExpandWindow.slice(),o=r[1]-r[0],i=[0,e.axisExpandWidth*(e.axisCount-1)];if(!this.containPoint(t))return{behavior:"none",axisExpandWindow:r};var a,u=t[n]-e.layoutBase-e.axisExpandWindow0Pos,s="slide",l=e.axisCollapseWidth,c=this._model.get("axisExpandSlideTriggerArea"),f=null!=c[0];if(l)f&&l&&u<o*c[0]?(s="jump",a=u-o*c[2]):f&&l&&u>o*(1-c[0])?(s="jump",a=u-o*(1-c[2])):(a=u-o*c[1])>=0&&(a=u-o*(1-c[1]))<=0&&(a=0),a*=e.axisExpandWidth/l,a?nz(a,r,i,"all"):s="none";else{var d=r[1]-r[0],h=i[1]*u/d;r=[uz(0,h-d/2)],r[1]=az(i[1],r[0]+d),r[0]=r[1]-d}return{axisExpandWindow:r,behavior:s}},t}();function hz(t,e){return az(uz(t,e[0]),e[1])}function pz(t,e){var n=e.layoutLength/(e.axisCount-1);return{position:n*t,axisNameAvailableWidth:n,axisLabelShow:!0}}function gz(t,e){var n,r,o=e.layoutLength,i=e.axisExpandWidth,a=e.axisCount,u=e.axisCollapseWidth,s=e.winInnerIndices,l=u,c=!1;return t<s[0]?(n=t*u,r=u):t<=s[1]?(n=e.axisExpandWindow0Pos+t*i-e.axisExpandWindow[0],l=i,c=!0):(n=o-(a-1-t)*u,r=u),{position:n,axisNameAvailableWidth:l,axisLabelShow:c,nameTruncateMaxWidth:r}}var mz=dz;function vz(t,e){var n=[];return t.eachComponent("parallel",function(r,o){var i=new mz(r,t,e);i.name="parallel_"+o,i.resize(r,e),r.coordinateSystem=i,i.model=r,n.push(i)}),t.eachSeries(function(t){if("parallel"===t.get("coordinateSystem")){var e=t.getReferringComponents("parallel",Li).models[0];t.coordinateSystem=e.coordinateSystem}}),n}var yz={create:vz},bz=yz,xz=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n.activeIntervals=[],n}return i(e,t),e.prototype.getAreaSelectStyle=function(){return ta([["fill","color"],["lineWidth","borderWidth"],["stroke","borderColor"],["width","width"],["opacity","opacity"]])(this.getModel("areaSelectStyle"))},e.prototype.setActiveIntervals=function(t){var e=this.activeIntervals=k(t);if(e)for(var n=e.length-1;n>=0;n--)zo(e[n])},e.prototype.getActiveState=function(t){var e=this.activeIntervals;if(!e.length)return"normal";if(null==t||isNaN(+t))return"inactive";if(1===e.length){var n=e[0];if(n[0]<=t&&t<=n[1])return"active"}else for(var r=0,o=e.length;r<o;r++)if(e[r][0]<=t&&t<=e[r][1])return"active";return"inactive"},e}(bp);R(xz,fD);var wz=xz,_z=!0,Sz=Math.min,Cz=Math.max,Mz=Math.pow,Tz=1e4,kz=6,Dz=6,Az="globalPan",Iz={w:[0,0],e:[0,1],n:[1,0],s:[1,1]},Oz={w:"ew",e:"ew",n:"ns",s:"ns",ne:"nesw",sw:"nesw",nw:"nwse",se:"nwse"},Lz={brushStyle:{lineWidth:2,stroke:"rgba(210,219,238,0.3)",fill:"#D2DBEE"},transformable:!0,brushMode:"single",removeOnClick:!1},Ez=0,Nz=function(t){function e(e){var n=t.call(this)||this;return n._track=[],n._covers=[],n._handlers={},n._zr=e,n.group=new _o,n._uid="brushController_"+Ez++,z(dB,function(t,e){this._handlers[e]=G(t,this)},n),n}return i(e,t),e.prototype.enableBrush=function(t){return this._brushType&&this._doDisableBrush(),t.brushType&&this._doEnableBrush(t),this},e.prototype._doEnableBrush=function(t){var e=this._zr;this._enableGlobalPan||bO(e,Az,this._uid),z(this._handlers,function(t,n){e.on(n,t)}),this._brushType=t.brushType,this._brushOption=D(k(Lz),t,!0)},e.prototype._doDisableBrush=function(){var t=this._zr;xO(t,Az,this._uid),z(this._handlers,function(e,n){t.off(n,e)}),this._brushType=this._brushOption=null},e.prototype.setPanels=function(t){if(t&&t.length){var e=this._panels={};z(t,function(t){e[t.panelId]=k(t)})}else this._panels=null;return this},e.prototype.mount=function(t){t=t||{},this._enableGlobalPan=t.enableGlobalPan;var e=this.group;return this._zr.add(e),e.attr({x:t.x||0,y:t.y||0,rotation:t.rotation||0,scaleX:t.scaleX||1,scaleY:t.scaleY||1}),this._transform=e.getLocalTransform(),this},e.prototype.updateCovers=function(t){t=B(t,function(t){return D(k(Lz),t,!0)});var e="\0-brush-index-",n=this._covers,r=this._covers=[],o=this,i=this._creatingCover;return new GC(n,t,u,a).add(s).update(s).remove(l).execute(),this;function a(t,n){return(null!=t.id?t.id:e+n)+"-"+t.brushType}function u(t,e){return a(t.__brushOption,e)}function s(e,a){var u=t[e];if(null!=a&&n[a]===i)r[e]=n[a];else{var s=r[e]=null!=a?(n[a].__brushOption=u,n[a]):Pz(o,Rz(o,u));Vz(o,s)}}function l(t){n[t]!==i&&o.group.remove(n[t])}},e.prototype.unmount=function(){return this.enableBrush(!1),Uz(this),this._zr.remove(this.group),this},e.prototype.dispose=function(){this.unmount(),this.off()},e}(Gt);function Rz(t,e){var n=gB[e.brushType].createCover(t,e);return n.__brushOption=e,Bz(n,e),t.group.add(n),n}function Pz(t,e){var n=Hz(e);return n.endCreating&&(n.endCreating(t,e),Bz(e,e.__brushOption)),e}function zz(t,e){var n=e.__brushOption;Hz(e).updateCoverShape(t,e,n.range,n)}function Bz(t,e){var n=e.z;null==n&&(n=Tz),t.traverse(function(t){t.z=n,t.z2=n})}function Vz(t,e){Hz(e).updateCommon(t,e),zz(t,e)}function Hz(t){return gB[t.__brushOption.brushType]}function Fz(t,e,n){var r,o=t._panels;if(!o)return _z;var i=t._transform;return z(o,function(t){t.isTargetByCursor(e,n,i)&&(r=t)}),r}function Wz(t,e){var n=t._panels;if(!n)return _z;var r=e.__brushOption.panelId;return null!=r?n[r]:_z}function Uz(t){var e=t._covers,n=e.length;return z(e,function(e){t.group.remove(e)},t),e.length=0,!!n}function Gz(t,e){var n=B(t._covers,function(t){var e=t.__brushOption,n=k(e.range);return{brushType:e.brushType,panelId:e.panelId,range:n}});t.trigger("brush",{areas:n,isEnd:!!e.isEnd,removeOnClick:!!e.removeOnClick})}function jz(t){var e=t._track;if(!e.length)return!1;var n=e[e.length-1],r=e[0],o=n[0]-r[0],i=n[1]-r[1],a=Mz(o*o+i*i,.5);return a>kz}function Xz(t){var e=t.length-1;return e<0&&(e=0),[t[0],t[e]]}function Yz(t,e,n,r){var o=new _o;return o.add(new As({name:"main",style:Kz(n),silent:!0,draggable:!0,cursor:"move",drift:j(nB,t,e,o,["n","s","w","e"]),ondragend:j(Gz,e,{isEnd:!0})})),z(r,function(n){o.add(new As({name:n.join(""),style:{opacity:0},draggable:!0,silent:!0,invisible:!0,drift:j(nB,t,e,o,n),ondragend:j(Gz,e,{isEnd:!0})}))}),o}function qz(t,e,n,r){var o=r.brushStyle.lineWidth||0,i=Cz(o,Dz),a=n[0][0],u=n[1][0],s=a-o/2,l=u-o/2,c=n[0][1],f=n[1][1],d=c-i+o/2,h=f-i+o/2,p=c-a,g=f-u,m=p+o,v=g+o;$z(t,e,"main",a,u,p,g),r.transformable&&($z(t,e,"w",s,l,i,v),$z(t,e,"e",d,l,i,v),$z(t,e,"n",s,l,m,i),$z(t,e,"s",s,h,m,i),$z(t,e,"nw",s,l,i,i),$z(t,e,"ne",d,l,i,i),$z(t,e,"sw",s,h,i,i),$z(t,e,"se",d,h,i,i))}function Zz(t,e){var n=e.__brushOption,r=n.transformable,o=e.childAt(0);o.useStyle(Kz(n)),o.attr({silent:!r,cursor:r?"move":"default"}),z([["w"],["e"],["n"],["s"],["s","e"],["s","w"],["n","e"],["n","w"]],function(n){var o=e.childOfName(n.join("")),i=1===n.length?tB(t,n[0]):eB(t,n);o&&o.attr({silent:!r,invisible:!r,cursor:r?Oz[i]+"-resize":null})})}function $z(t,e,n,r,o,i,a){var u=e.childOfName(n);u&&u.setShape(aB(iB(t,e,[[r,o],[r+i,o+a]])))}function Kz(t){return O({strokeNoScale:!0},t.brushStyle)}function Jz(t,e,n,r){var o=[Sz(t,n),Sz(e,r)],i=[Cz(t,n),Cz(e,r)];return[[o[0],i[0]],[o[1],i[1]]]}function Qz(t){return id(t.group)}function tB(t,e){var n={w:"left",e:"right",n:"top",s:"bottom"},r={left:"w",right:"e",top:"n",bottom:"s"},o=ud(n[e],Qz(t));return r[o]}function eB(t,e){var n=[tB(t,e[0]),tB(t,e[1])];return("e"===n[0]||"w"===n[0])&&n.reverse(),n.join("")}function nB(t,e,n,r,o,i){var a=n.__brushOption,u=t.toRectRange(a.range),s=oB(e,o,i);z(r,function(t){var e=Iz[t];u[e[0]][e[1]]+=s[e[0]]}),a.range=t.fromRectRange(Jz(u[0][0],u[1][0],u[0][1],u[1][1])),Vz(e,n),Gz(e,{isEnd:!1})}function rB(t,e,n,r){var o=e.__brushOption.range,i=oB(t,n,r);z(o,function(t){t[0]+=i[0],t[1]+=i[1]}),Vz(t,e),Gz(t,{isEnd:!1})}function oB(t,e,n){var r=t.group,o=r.transformCoordToLocal(e,n),i=r.transformCoordToLocal(0,0);return[o[0]-i[0],o[1]-i[1]]}function iB(t,e,n){var r=Wz(t,e);return r&&r!==_z?r.clipPath(n,t._transform):k(n)}function aB(t){var e=Sz(t[0][0],t[1][0]),n=Sz(t[0][1],t[1][1]),r=Cz(t[0][0],t[1][0]),o=Cz(t[0][1],t[1][1]);return{x:e,y:n,width:r-e,height:o-n}}function uB(t,e,n){if(t._brushType&&!pB(t,e.offsetX,e.offsetY)){var r=t._zr,o=t._covers,i=Fz(t,e,n);if(!t._dragging)for(var a=0;a<o.length;a++){var u=o[a].__brushOption;if(i&&(i===_z||u.panelId===i.panelId)&&gB[u.brushType].contain(o[a],n[0],n[1]))return}i&&r.setCursorStyle("crosshair")}}function sB(t){var e=t.event;e.preventDefault&&e.preventDefault()}function lB(t,e,n){return t.childOfName("main").contain(e,n)}function cB(t,e,n,r){var o,i=t._creatingCover,a=t._creatingPanel,u=t._brushOption;if(t._track.push(n.slice()),jz(t)||i){if(a&&!i){"single"===u.brushMode&&Uz(t);var s=k(u);s.brushType=fB(s.brushType,a),s.panelId=a===_z?null:a.panelId,i=t._creatingCover=Rz(t,s),t._covers.push(i)}if(i){var l=gB[fB(t._brushType,a)],c=i.__brushOption;c.range=l.getCreatingRange(iB(t,i,t._track)),r&&(Pz(t,i),l.updateCommon(t,i)),zz(t,i),o={isEnd:r}}}else r&&"single"===u.brushMode&&u.removeOnClick&&Fz(t,e,n)&&Uz(t)&&(o={isEnd:r,removeOnClick:!0});return o}function fB(t,e){return"auto"===t?e.defaultBrushType:t}var dB={mousedown:function(t){if(this._dragging)hB(this,t);else if(!t.target||!t.target.draggable){sB(t);var e=this.group.transformCoordToLocal(t.offsetX,t.offsetY);this._creatingCover=null;var n=this._creatingPanel=Fz(this,t,e);n&&(this._dragging=!0,this._track=[e.slice()])}},mousemove:function(t){var e=t.offsetX,n=t.offsetY,r=this.group.transformCoordToLocal(e,n);if(uB(this,t,r),this._dragging){sB(t);var o=cB(this,t,r,!1);o&&Gz(this,o)}},mouseup:function(t){hB(this,t)}};function hB(t,e){if(t._dragging){sB(e);var n=e.offsetX,r=e.offsetY,o=t.group.transformCoordToLocal(n,r),i=cB(t,e,o,!0);t._dragging=!1,t._track=[],t._creatingCover=null,i&&Gz(t,i)}}function pB(t,e,n){var r=t._zr;return e<0||e>r.getWidth()||n<0||n>r.getHeight()}var gB={lineX:mB(0),lineY:mB(1),rect:{createCover:function(t,e){function n(t){return t}return Yz({toRectRange:n,fromRectRange:n},t,e,[["w"],["e"],["n"],["s"],["s","e"],["s","w"],["n","e"],["n","w"]])},getCreatingRange:function(t){var e=Xz(t);return Jz(e[1][0],e[1][1],e[0][0],e[0][1])},updateCoverShape:function(t,e,n,r){qz(t,e,n,r)},updateCommon:Zz,contain:lB},polygon:{createCover:function(t,e){var n=new _o;return n.add(new af({name:"main",style:Kz(e),silent:!0})),n},getCreatingRange:function(t){return t},endCreating:function(t,e){e.remove(e.childAt(0)),e.add(new nf({name:"main",draggable:!0,drift:j(rB,t,e),ondragend:j(Gz,t,{isEnd:!0})}))},updateCoverShape:function(t,e,n,r){e.childAt(0).setShape({points:iB(t,e,n)})},updateCommon:Zz,contain:lB}};function mB(t){return{createCover:function(e,n){return Yz({toRectRange:function(e){var n=[e,[0,100]];return t&&n.reverse(),n},fromRectRange:function(e){return e[t]}},e,n,[[["w"],["e"]],[["n"],["s"]]][t])},getCreatingRange:function(e){var n=Xz(e),r=Sz(n[0][t],n[1][t]),o=Cz(n[0][t],n[1][t]);return[r,o]},updateCoverShape:function(e,n,r,o){var i,a=Wz(e,n);if(a!==_z&&a.getLinearBrushOtherExtent)i=a.getLinearBrushOtherExtent(t);else{var u=e._zr;i=[0,[u.getWidth(),u.getHeight()][1-t]]}var s=[r,i];t&&s.reverse(),qz(e,n,s,o)},updateCommon:Zz,contain:lB}}var vB=Nz;function yB(t){return t=wB(t),function(e){return fd(e,t)}}function bB(t,e){return t=wB(t),function(n){var r=null!=e?e:n,o=r?t.width:t.height,i=r?t.x:t.y;return[i,i+(o||0)]}}function xB(t,e,n){var r=wB(t);return function(t,o){return r.contain(o[0],o[1])&&!OO(t,e,n)}}function wB(t){return Zr.create(t)}var _B=["axisLine","axisTickLabel","axisName"],SB=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n}return i(e,t),e.prototype.init=function(e,n){t.prototype.init.apply(this,arguments),(this._brushController=new vB(n.getZr())).on("brush",G(this._onBrush,this))},e.prototype.render=function(t,e,n,r){if(!CB(t,e,r)){this.axisModel=t,this.api=n,this.group.removeAll();var o=this._axisGroup;if(this._axisGroup=new _o,this.group.add(this._axisGroup),t.get("show")){var i=TB(t,e),a=i.coordinateSystem,u=t.getAreaSelectStyle(),s=u.width,l=t.axis.dim,c=a.getAxisLayout(l),f=I({strokeContainThreshold:s},c),d=new _I(t,f);z(_B,d.add,d),this._axisGroup.add(d.getGroup()),this._refreshBrushController(f,u,t,i,s,n),cd(o,this._axisGroup,t)}}},e.prototype._refreshBrushController=function(t,e,n,r,o,i){var a=n.axis.getExtent(),u=a[1]-a[0],s=Math.min(30,.1*Math.abs(u)),l=Zr.create({x:a[0],y:-o/2,width:u,height:o});l.x-=s,l.width+=2*s,this._brushController.mount({enableGlobalPan:!0,rotation:t.rotation,x:t.position[0],y:t.position[1]}).setPanels([{panelId:"pl",clipPath:yB(l),isTargetByCursor:xB(l,i,r),getLinearBrushOtherExtent:bB(l,0)}]).enableBrush({brushType:"lineX",brushStyle:e,removeOnClick:!0}).updateCovers(MB(n))},e.prototype._onBrush=function(t){var e=t.areas,n=this.axisModel,r=n.axis,o=B(e,function(t){return[r.coordToData(t.range[0],!0),r.coordToData(t.range[1],!0)]});(!n.option.realtime===t.isEnd||t.removeOnClick)&&this.api.dispatchAction({type:"axisAreaSelect",parallelAxisId:n.id,intervals:o})},e.prototype.dispose=function(){this._brushController.dispose()},e.type="parallelAxis",e}(Lv);function CB(t,e,n){return n&&"axisAreaSelect"===n.type&&e.findComponents({mainType:"parallelAxis",query:n})[0]===t}function MB(t){var e=t.axis;return B(t.activeIntervals,function(t){return{brushType:"lineX",panelId:"pl",range:[e.dataToCoord(t[0],!0),e.dataToCoord(t[1],!0)]}})}function TB(t,e){return e.getComponent("parallel",t.get("parallelIndex"))}var kB=SB,DB={type:"axisAreaSelect",event:"axisAreaSelected"};function AB(t){t.registerAction(DB,function(t,e){e.eachComponent({mainType:"parallelAxis",query:t},function(e){e.axis.model.setActiveIntervals(t.intervals)})}),t.registerAction("parallelAxisExpand",function(t,e){e.eachComponent({mainType:"parallel",query:t},function(e){e.setAxisExpand(t)})})}var IB={type:"value",areaSelectStyle:{width:20,borderWidth:1,borderColor:"rgba(160,197,232)",color:"rgba(160,197,232)",opacity:.3},realtime:!0,z:10};function OB(t){t.registerComponentView(KP),t.registerComponentModel(QP),t.registerCoordinateSystem("parallel",bz),t.registerPreprocessor(GP),t.registerComponentModel(wz),t.registerComponentView(kB),SD(t,"parallel",wz,IB),AB(t)}function LB(t){mS(OB),t.registerChartView(PP),t.registerSeriesModel(HP),t.registerVisual(t.PRIORITY.VISUAL.BRUSH,UP)}var EB=function(){function t(){this.x1=0,this.y1=0,this.x2=0,this.y2=0,this.cpx1=0,this.cpy1=0,this.cpx2=0,this.cpy2=0,this.extent=0}return t}(),NB=function(t){function e(e){return t.call(this,e)||this}return i(e,t),e.prototype.getDefaultShape=function(){return new EB},e.prototype.buildPath=function(t,e){var n=e.extent;t.moveTo(e.x1,e.y1),t.bezierCurveTo(e.cpx1,e.cpy1,e.cpx2,e.cpy2,e.x2,e.y2),"vertical"===e.orient?(t.lineTo(e.x2+n,e.y2),t.bezierCurveTo(e.cpx2+n,e.cpy2,e.cpx1+n,e.cpy1,e.x1+n,e.y1)):(t.lineTo(e.x2,e.y2+n),t.bezierCurveTo(e.cpx2,e.cpy2+n,e.cpx1,e.cpy1+n,e.x1,e.y1+n)),t.closePath()},e.prototype.highlight=function(){kl(this)},e.prototype.downplay=function(){Dl(this)},e}(ds),RB=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n._focusAdjacencyDisabled=!1,n}return i(e,t),e.prototype.render=function(t,e,n){var r=this,o=t.getGraph(),i=this.group,a=t.layoutInfo,u=a.width,s=a.height,l=t.getData(),c=t.getData("edge"),f=t.get("orient");this._model=t,i.removeAll(),i.x=a.x,i.y=a.y,o.eachEdge(function(e){var n=new NB,r=Gs(n);r.dataIndex=e.dataIndex,r.seriesIndex=t.seriesIndex,r.dataType="edge";var o,a,l,d,h,p,g,m,v=e.getModel(),y=v.getModel("lineStyle"),b=y.get("curveness"),x=e.node1.getLayout(),w=e.node1.getModel(),_=w.get("localX"),S=w.get("localY"),C=e.node2.getLayout(),M=e.node2.getModel(),T=M.get("localX"),k=M.get("localY"),D=e.getLayout();switch(n.shape.extent=Math.max(1,D.dy),n.shape.orient=f,"vertical"===f?(o=(null!=_?_*u:x.x)+D.sy,a=(null!=S?S*s:x.y)+x.dy,l=(null!=T?T*u:C.x)+D.ty,d=null!=k?k*s:C.y,h=o,p=a*(1-b)+d*b,g=l,m=a*b+d*(1-b)):(o=(null!=_?_*u:x.x)+x.dx,a=(null!=S?S*s:x.y)+D.sy,l=null!=T?T*u:C.x,d=(null!=k?k*s:C.y)+D.ty,h=o*(1-b)+l*b,p=a,g=o*b+l*(1-b),m=d),n.setShape({x1:o,y1:a,x2:l,y2:d,cpx1:h,cpy1:p,cpx2:g,cpy2:m}),n.useStyle(y.getItemStyle()),n.style.fill){case"source":n.style.fill=e.node1.getVisual("color"),n.style.decal=e.node1.getVisual("style").decal;break;case"target":n.style.fill=e.node2.getVisual("color"),n.style.decal=e.node2.getVisual("style").decal;break;case"gradient":var A=e.node1.getVisual("color"),I=e.node2.getVisual("color");"string"===typeof A&&"string"===typeof I&&(n.style.fill=new Cf(0,0,1,0,[{color:A,offset:0},{color:I,offset:1}]))}var O=v.getModel("emphasis");ql(n,v,"lineStyle",function(t){return t.getItemStyle()}),i.add(n),c.setItemGraphicEl(e.dataIndex,n);var L=O.get("focus");Gl(n,"adjacency"===L?e.getAdjacentDataIndices():L,O.get("blurScope")),Gs(n).dataType="edge"}),o.eachNode(function(e){var n=e.getLayout(),r=e.getModel(),o=r.get("localX"),a=r.get("localY"),c=r.getModel("emphasis"),f=new As({shape:{x:null!=o?o*u:n.x,y:null!=a?a*s:n.y,width:n.dx,height:n.dy},style:r.getModel("itemStyle").getItemStyle(),z2:10});_d(f,Sd(r),{labelFetcher:t,labelDataIndex:e.dataIndex,defaultText:e.id}),f.disableLabelAnimation=!0,f.setStyle("fill",e.getVisual("color")),f.setStyle("decal",e.getVisual("style").decal),ql(f,r),i.add(f),l.setItemGraphicEl(e.dataIndex,f),Gs(f).dataType="node";var d=c.get("focus");Gl(f,"adjacency"===d?e.getAdjacentDataIndices():d,c.get("blurScope"))}),l.eachItemGraphicEl(function(e,o){var i=l.getItemModel(o);i.get("draggable")&&(e.drift=function(e,i){r._focusAdjacencyDisabled=!0,this.shape.x+=e,this.shape.y+=i,this.dirty(),n.dispatchAction({type:"dragNode",seriesId:t.id,dataIndex:l.getRawIndex(o),localX:this.shape.x/u,localY:this.shape.y/s})},e.ondragend=function(){r._focusAdjacencyDisabled=!1},e.draggable=!0,e.cursor="move")}),!this._data&&t.isAnimationEnabled()&&i.setClipPath(PB(i.getBoundingRect(),t,function(){i.removeClipPath()})),this._data=t.getData()},e.prototype.dispose=function(){},e.type="sankey",e}(Wv);function PB(t,e,n){var r=new As({shape:{x:t.x-10,y:t.y-10,width:0,height:t.height+20}});return td(r,{shape:{width:t.width+20}},e,n),r}var zB=RB,BB=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n}return i(e,t),e.prototype.getInitialData=function(t,e){var n=t.edges||t.links,r=t.data||t.nodes,o=t.levels;this.levelModels=[];for(var i=this.levelModels,a=0;a<o.length;a++)null!=o[a].depth&&o[a].depth>=0&&(i[o[a].depth]=new Yd(o[a],this,e));if(r&&n){var u=eP(r,n,this,!0,s);return u.data}function s(t,e){t.wrapMethod("getItemModel",function(t,e){var n=t.parentModel,r=n.getData().getItemLayout(e);if(r){var o=r.depth,i=n.levelModels[o];i&&(t.parentModel=i)}return t}),e.wrapMethod("getItemModel",function(t,e){var n=t.parentModel,r=n.getGraph().getEdgeByIndex(e),o=r.node1.getLayout();if(o){var i=o.depth,a=n.levelModels[i];a&&(t.parentModel=a)}return t})}},e.prototype.setNodePosition=function(t,e){var n=this.option.data[t];n.localX=e[0],n.localY=e[1]},e.prototype.getGraph=function(){return this.getData().graph},e.prototype.getEdgeData=function(){return this.getGraph().edgeData},e.prototype.formatTooltip=function(t,e,n){function r(t){return isNaN(t)||null==t}if("edge"===n){var o=this.getDataParams(t,n),i=o.data,a=o.value,u=i.source+" -- "+i.target;return rv("nameValue",{name:u,value:a,noValue:r(a)})}var s=this.getGraph().getNodeByIndex(t),l=s.getLayout().value,c=this.getDataParams(t,n).data.name;return rv("nameValue",{name:null!=c?c+"":null,value:l,noValue:r(l)})},e.prototype.optionUpdated=function(){},e.prototype.getDataParams=function(e,n){var r=t.prototype.getDataParams.call(this,e,n);if(null==r.value&&"node"===n){var o=this.getGraph().getNodeByIndex(e),i=o.getLayout().value;r.value=i}return r},e.type="series.sankey",e.defaultOption={zlevel:0,z:2,coordinateSystem:"view",left:"5%",top:"5%",right:"20%",bottom:"5%",orient:"horizontal",nodeWidth:20,nodeGap:8,draggable:!0,layoutIterations:32,label:{show:!0,position:"right",fontSize:12},levels:[],nodeAlign:"justify",lineStyle:{color:"#314656",opacity:.2,curveness:.5},emphasis:{label:{show:!0},lineStyle:{opacity:.5}},select:{itemStyle:{borderColor:"#212121"}},animationEasing:"linear",animationDuration:1e3},e}(Iv),VB=BB;function HB(t,e){t.eachSeriesByType("sankey",function(t){var n=t.get("nodeWidth"),r=t.get("nodeGap"),o=FB(t,e);t.layoutInfo=o;var i=o.width,a=o.height,u=t.getGraph(),s=u.nodes,l=u.edges;UB(s);var c=H(s,function(t){return 0===t.getLayout().value}),f=0!==c.length?0:t.get("layoutIterations"),d=t.get("orient"),h=t.get("nodeAlign");WB(s,l,n,r,i,a,f,d,h)})}function FB(t,e){return lp(t.getBoxLayoutParams(),{width:e.getWidth(),height:e.getHeight()})}function WB(t,e,n,r,o,i,a,u,s){GB(t,e,n,o,i,u,s),ZB(t,e,i,o,r,a,u),sV(t,u)}function UB(t){z(t,function(t){var e=aV(t.outEdges,iV),n=aV(t.inEdges,iV),r=t.getValue()||0,o=Math.max(e,n,r);t.setLayout({value:o},!0)})}function GB(t,e,n,r,o,i,a){for(var u=[],s=[],l=[],c=[],f=0,d=0;d<e.length;d++)u[d]=1;for(d=0;d<t.length;d++)s[d]=t[d].inEdges.length,0===s[d]&&l.push(t[d]);var h=-1;while(l.length){for(var p=0;p<l.length;p++){var g=l[p],m=g.hostGraph.data.getRawDataItem(g.dataIndex),v=null!=m.depth&&m.depth>=0;v&&m.depth>h&&(h=m.depth),g.setLayout({depth:v?m.depth:f},!0),"vertical"===i?g.setLayout({dy:n},!0):g.setLayout({dx:n},!0);for(var y=0;y<g.outEdges.length;y++){var b=g.outEdges[y],x=e.indexOf(b);u[x]=0;var w=b.node2,_=t.indexOf(w);0===--s[_]&&c.indexOf(w)<0&&c.push(w)}}++f,l=c,c=[]}for(d=0;d<u.length;d++)if(1===u[d])throw new Error("Sankey is a DAG, the original data has cycle!");var S=h>f-1?h:f-1;a&&"left"!==a&&XB(t,a,i,S);var C="vertical"===i?(o-n)/S:(r-n)/S;qB(t,C,i)}function jB(t){var e=t.hostGraph.data.getRawDataItem(t.dataIndex);return null!=e.depth&&e.depth>=0}function XB(t,e,n,r){if("right"===e){var o=[],i=t,a=0;while(i.length){for(var u=0;u<i.length;u++){var s=i[u];s.setLayout({skNodeHeight:a},!0);for(var l=0;l<s.inEdges.length;l++){var c=s.inEdges[l];o.indexOf(c.node1)<0&&o.push(c.node1)}}i=o,o=[],++a}z(t,function(t){jB(t)||t.setLayout({depth:Math.max(0,r-t.getLayout().skNodeHeight)},!0)})}else"justify"===e&&YB(t,r)}function YB(t,e){z(t,function(t){jB(t)||t.outEdges.length||t.setLayout({depth:e},!0)})}function qB(t,e,n){z(t,function(t){var r=t.getLayout().depth*e;"vertical"===n?t.setLayout({y:r},!0):t.setLayout({x:r},!0)})}function ZB(t,e,n,r,o,i,a){var u=$B(t,a);KB(u,e,n,r,o,a),JB(u,o,n,r,a);for(var s=1;i>0;i--)s*=.99,QB(u,s,a),JB(u,o,n,r,a),uV(u,s,a),JB(u,o,n,r,a)}function $B(t,e){var n=[],r="vertical"===e?"y":"x",o=Bi(t,function(t){return t.getLayout()[r]});return o.keys.sort(function(t,e){return t-e}),z(o.keys,function(t){n.push(o.buckets.get(t))}),n}function KB(t,e,n,r,o,i){var a=1/0;z(t,function(t){var e=t.length,u=0;z(t,function(t){u+=t.getLayout().value});var s="vertical"===i?(r-(e-1)*o)/u:(n-(e-1)*o)/u;s<a&&(a=s)}),z(t,function(t){z(t,function(t,e){var n=t.getLayout().value*a;"vertical"===i?(t.setLayout({x:e},!0),t.setLayout({dx:n},!0)):(t.setLayout({y:e},!0),t.setLayout({dy:n},!0))})}),z(e,function(t){var e=+t.getValue()*a;t.setLayout({dy:e},!0)})}function JB(t,e,n,r,o){var i="vertical"===o?"x":"y";z(t,function(t){var a,u,s;t.sort(function(t,e){return t.getLayout()[i]-e.getLayout()[i]});for(var l=0,c=t.length,f="vertical"===o?"dx":"dy",d=0;d<c;d++)u=t[d],s=l-u.getLayout()[i],s>0&&(a=u.getLayout()[i]+s,"vertical"===o?u.setLayout({x:a},!0):u.setLayout({y:a},!0)),l=u.getLayout()[i]+u.getLayout()[f]+e;var h="vertical"===o?r:n;if(s=l-e-h,s>0){a=u.getLayout()[i]-s,"vertical"===o?u.setLayout({x:a},!0):u.setLayout({y:a},!0),l=a;for(d=c-2;d>=0;--d)u=t[d],s=u.getLayout()[i]+u.getLayout()[f]+e-l,s>0&&(a=u.getLayout()[i]-s,"vertical"===o?u.setLayout({x:a},!0):u.setLayout({y:a},!0)),l=u.getLayout()[i]}})}function QB(t,e,n){z(t.slice().reverse(),function(t){z(t,function(t){if(t.outEdges.length){var r=aV(t.outEdges,tV,n)/aV(t.outEdges,iV);if(isNaN(r)){var o=t.outEdges.length;r=o?aV(t.outEdges,eV,n)/o:0}if("vertical"===n){var i=t.getLayout().x+(r-oV(t,n))*e;t.setLayout({x:i},!0)}else{var a=t.getLayout().y+(r-oV(t,n))*e;t.setLayout({y:a},!0)}}})})}function tV(t,e){return oV(t.node2,e)*t.getValue()}function eV(t,e){return oV(t.node2,e)}function nV(t,e){return oV(t.node1,e)*t.getValue()}function rV(t,e){return oV(t.node1,e)}function oV(t,e){return"vertical"===e?t.getLayout().x+t.getLayout().dx/2:t.getLayout().y+t.getLayout().dy/2}function iV(t){return t.getValue()}function aV(t,e,n){var r=0,o=t.length,i=-1;while(++i<o){var a=+e(t[i],n);isNaN(a)||(r+=a)}return r}function uV(t,e,n){z(t,function(t){z(t,function(t){if(t.inEdges.length){var r=aV(t.inEdges,nV,n)/aV(t.inEdges,iV);if(isNaN(r)){var o=t.inEdges.length;r=o?aV(t.inEdges,rV,n)/o:0}if("vertical"===n){var i=t.getLayout().x+(r-oV(t,n))*e;t.setLayout({x:i},!0)}else{var a=t.getLayout().y+(r-oV(t,n))*e;t.setLayout({y:a},!0)}}})})}function sV(t,e){var n="vertical"===e?"x":"y";z(t,function(t){t.outEdges.sort(function(t,e){return t.node2.getLayout()[n]-e.node2.getLayout()[n]}),t.inEdges.sort(function(t,e){return t.node1.getLayout()[n]-e.node1.getLayout()[n]})}),z(t,function(t){var e=0,n=0;z(t.outEdges,function(t){t.setLayout({sy:e},!0),e+=t.getLayout().dy}),z(t.inEdges,function(t){t.setLayout({ty:n},!0),n+=t.getLayout().dy})})}function lV(t){t.eachSeriesByType("sankey",function(t){var e=t.getGraph(),n=e.nodes;if(n.length){var r=1/0,o=-1/0;z(n,function(t){var e=t.getLayout().value;e<r&&(r=e),e>o&&(o=e)}),z(n,function(e){var n=new cN({type:"color",mappingMethod:"linear",dataExtent:[r,o],visual:t.get("color")}),i=n.mapValueToVisual(e.getLayout().value),a=e.getModel().get(["itemStyle","color"]);null!=a?(e.setVisual("color",a),e.setVisual("style",{fill:a})):(e.setVisual("color",i),e.setVisual("style",{fill:i}))})}})}function cV(t){t.registerChartView(zB),t.registerSeriesModel(VB),t.registerLayout(HB),t.registerVisual(lV),t.registerAction({type:"dragNode",event:"dragnode",update:"update"},function(t,e){e.eachComponent({mainType:"series",subType:"sankey",query:t},function(e){e.setNodePosition(t.dataIndex,[t.localX,t.localY])})})}var fV=function(){function t(){}return t.prototype.getInitialData=function(t,e){var n,r,o=e.getComponent("xAxis",this.get("xAxisIndex")),i=e.getComponent("yAxis",this.get("yAxisIndex")),a=o.get("type"),u=i.get("type");"category"===a?(t.layout="horizontal",n=o.getOrdinalMeta(),r=!0):"category"===u?(t.layout="vertical",n=i.getOrdinalMeta(),r=!0):t.layout=t.layout||"horizontal";var s=["x","y"],l="horizontal"===t.layout?0:1,c=this._baseAxisDim=s[l],f=s[1-l],d=[o,i],h=d[l].get("type"),p=d[1-l].get("type"),g=t.data;if(g&&r){var m=[];z(g,function(t,e){var n;X(t)?(n=t.slice(),t.unshift(e)):X(t.value)?(n=t.value.slice(),t.value.unshift(e)):n=t,m.push(n)}),t.data=m}var v=this.defaultValueDimensions,y=[{name:c,type:YC(h),ordinalMeta:n,otherDims:{tooltip:!1,itemName:0},dimsDef:["base"]},{name:f,type:YC(p),dimsDef:v.slice()}];return qk(this,{coordDimensions:y,dimensionsCount:v.length+1,encodeDefaulter:j(Rp,y,this)})},t.prototype.getBaseAxis=function(){var t=this._baseAxisDim;return this.ecModel.getComponent(t+"Axis",this.get(t+"AxisIndex")).axis},t}(),dV=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n.defaultValueDimensions=[{name:"min",defaultTooltip:!0},{name:"Q1",defaultTooltip:!0},{name:"median",defaultTooltip:!0},{name:"Q3",defaultTooltip:!0},{name:"max",defaultTooltip:!0}],n.visualDrawType="stroke",n}return i(e,t),e.type="series.boxplot",e.dependencies=["xAxis","yAxis","grid"],e.defaultOption={zlevel:0,z:2,coordinateSystem:"cartesian2d",legendHoverLink:!0,layout:null,boxWidth:[7,50],itemStyle:{color:"#fff",borderWidth:1},emphasis:{scale:!0,itemStyle:{borderWidth:2,shadowBlur:5,shadowOffsetX:1,shadowOffsetY:1,shadowColor:"rgba(0,0,0,0.2)"}},animationDuration:800},e}(Iv);R(dV,fV,!0);var hV=dV,pV=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n}return i(e,t),e.prototype.render=function(t,e,n){var r=t.getData(),o=this.group,i=this._data;this._data||o.removeAll();var a="horizontal"===t.get("layout")?1:0;r.diff(i).add(function(t){if(r.hasValue(t)){var e=r.getItemLayout(t),n=vV(e,r,t,a,!0);r.setItemGraphicEl(t,n),o.add(n)}}).update(function(t,e){var n=i.getItemGraphicEl(e);if(r.hasValue(t)){var u=r.getItemLayout(t);n?yV(u,n,r,t):n=vV(u,r,t,a),o.add(n),r.setItemGraphicEl(t,n)}else o.remove(n)}).remove(function(t){var e=i.getItemGraphicEl(t);e&&o.remove(e)}).execute(),this._data=r},e.prototype.remove=function(t){var e=this.group,n=this._data;this._data=null,n&&n.eachItemGraphicEl(function(t){t&&e.remove(t)})},e.type="boxplot",e}(Wv),gV=function(){function t(){}return t}(),mV=function(t){function e(e){var n=t.call(this,e)||this;return n.type="boxplotBoxPath",n}return i(e,t),e.prototype.getDefaultShape=function(){return new gV},e.prototype.buildPath=function(t,e){var n=e.points,r=0;for(t.moveTo(n[r][0],n[r][1]),r++;r<4;r++)t.lineTo(n[r][0],n[r][1]);for(t.closePath();r<n.length;r++)t.moveTo(n[r][0],n[r][1]),r++,t.lineTo(n[r][0],n[r][1])},e}(ds);function vV(t,e,n,r,o){var i=t.ends,a=new mV({shape:{points:o?bV(i,r,t):i}});return yV(t,a,e,n,o),a}function yV(t,e,n,o,i){var a=n.hostModel,u=r[i?"initProps":"updateProps"];u(e,{shape:{points:t.ends}},a,o),e.useStyle(n.getItemVisual(o,"style")),e.style.strokeNoScale=!0,e.z2=100;var s=n.getItemModel(o);ql(e,s),Gl(e,s.get(["emphasis","focus"]),s.get(["emphasis","blurScope"]))}function bV(t,e,n){return B(t,function(t){return t=t.slice(),t[e]=n.initBaseline,t})}var xV=pV;function wV(t,e){}var _V=z;function SV(t){var e=CV(t);_V(e,function(t){var e=t.seriesModels;e.length&&(MV(t),_V(e,function(e,n){TV(e,t.boxOffsetList[n],t.boxWidthList[n])}))})}function CV(t){var e=[],n=[];return t.eachSeriesByType("boxplot",function(t){var r=t.getBaseAxis(),o=E(n,r);o<0&&(o=n.length,n[o]=r,e[o]={axis:r,seriesModels:[]}),e[o].seriesModels.push(t)}),e}function MV(t){var e,n,r=t.axis,o=t.seriesModels,i=o.length,a=t.boxWidthList=[],u=t.boxOffsetList=[],s=[];if("category"===r.type)n=r.getBandWidth();else{var l=0;_V(o,function(t){l=Math.max(l,t.getData().count())}),e=r.getExtent(),Math.abs(e[1]-e[0])}_V(o,function(t){var e=t.get("boxWidth");X(e)||(e=[e,e]),s.push([Ro(e[0],n)||0,Ro(e[1],n)||0])});var c=.8*n-2,f=c/i*.3,d=(c-f*(i-1))/i,h=d/2-c/2;_V(o,function(t,e){u.push(h),h+=f+d,a.push(Math.min(Math.max(d,s[e][0]),s[e][1]))})}function TV(t,e,n){var r=t.coordinateSystem,o=t.getData(),i=n/2,a="horizontal"===t.get("layout")?0:1,u=1-a,s=["x","y"],l=o.mapDimension(s[a]),c=o.mapDimensionsAll(s[u]);if(!(null==l||c.length<5))for(var f=0;f<o.count();f++){var d=o.get(l,f),h=b(d,c[2],f),p=b(d,c[0],f),g=b(d,c[1],f),m=b(d,c[3],f),v=b(d,c[4],f),y=[];x(y,g,!1),x(y,m,!0),y.push(p,g,v,m),w(y,p),w(y,v),w(y,h),o.setItemLayout(f,{initBaseline:h[u],ends:y})}function b(t,n,i){var s,l=o.get(n,i),c=[];return c[a]=t,c[u]=l,isNaN(t)||isNaN(l)?s=[NaN,NaN]:(s=r.dataToPoint(c),s[a]+=e),s}function x(t,e,n){var r=e.slice(),o=e.slice();r[a]+=i,o[a]-=i,n?t.push(r,o):t.push(o,r)}function w(t,e){var n=e.slice(),r=e.slice();n[a]-=i,r[a]+=i,t.push(n,r)}}function kV(t,e){e=e||{};for(var n=[],r=[],o=e.boundIQR,i="none"===o||0===o,a=0;a<t.length;a++){var u=zo(t[a].slice()),s=Ko(u,.25),l=Ko(u,.5),c=Ko(u,.75),f=u[0],d=u[u.length-1],h=(null==o?1.5:o)*(c-s),p=i?f:Math.max(f,s-h),g=i?d:Math.min(d,c+h),m=e.itemNameFormatter,v=Y(m)?m({value:a}):q(m)?m.replace("{value}",a+""):a+"";n.push([v,p,s,l,c,g]);for(var y=0;y<u.length;y++){var b=u[y];if(b<p||b>g){var x=[v,b];r.push(x)}}}return{boxData:n,outliers:r}}var DV={type:"echarts:boxplot",transform:function(t){var e=t.upstream;if(e.sourceFormat!==Mp){var n="";0,eg(n)}var r=kV(e.getRawData(),t.config);return[{dimensions:["ItemName","Low","Q1","Q2","Q3","High"],data:r.boxData},{data:r.outliers}]}};function AV(t){t.registerSeriesModel(hV),t.registerChartView(xV),t.registerVisual(wV),t.registerLayout(SV),t.registerTransform(DV)}var IV=["color","borderColor"],OV=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n}return i(e,t),e.prototype.render=function(t,e,n){this.group.removeClipPath(),this._updateDrawMode(t),this._isLargeDraw?this._renderLarge(t):this._renderNormal(t)},e.prototype.incrementalPrepareRender=function(t,e,n){this._clear(),this._updateDrawMode(t)},e.prototype.incrementalRender=function(t,e,n,r){this._isLargeDraw?this._incrementalRenderLarge(t,e):this._incrementalRenderNormal(t,e)},e.prototype._updateDrawMode=function(t){var e=t.pipelineContext.large;null!=this._isLargeDraw&&e===this._isLargeDraw||(this._isLargeDraw=e,this._clear())},e.prototype._renderNormal=function(t){var e=t.getData(),n=this._data,r=this.group,o=e.getLayout("isSimpleBox"),i=t.get("clip",!0),a=t.coordinateSystem,u=a.getArea&&a.getArea();this._data||r.removeAll(),e.diff(n).add(function(n){if(e.hasValue(n)){var a=e.getItemLayout(n);if(i&&RV(u,a))return;var s=NV(a,n,!0);td(s,{shape:{points:a.ends}},t,n),PV(s,e,n,o),r.add(s),e.setItemGraphicEl(n,s)}}).update(function(a,s){var l=n.getItemGraphicEl(s);if(e.hasValue(a)){var c=e.getItemLayout(a);i&&RV(u,c)?r.remove(l):(l?Qf(l,{shape:{points:c.ends}},t,a):l=NV(c,a),PV(l,e,a,o),r.add(l),e.setItemGraphicEl(a,l))}else r.remove(l)}).remove(function(t){var e=n.getItemGraphicEl(t);e&&r.remove(e)}).execute(),this._data=e},e.prototype._renderLarge=function(t){this._clear(),HV(t,this.group);var e=t.get("clip",!0)?vT(t.coordinateSystem,!1,t):null;e?this.group.setClipPath(e):this.group.removeClipPath()},e.prototype._incrementalRenderNormal=function(t,e){var n,r=e.getData(),o=r.getLayout("isSimpleBox");while(null!=(n=t.next())){var i=r.getItemLayout(n),a=NV(i,n);PV(a,r,n,o),a.incremental=!0,this.group.add(a)}},e.prototype._incrementalRenderLarge=function(t,e){HV(e,this.group,!0)},e.prototype.remove=function(t){this._clear()},e.prototype._clear=function(){this.group.removeAll(),this._data=null},e.type="candlestick",e}(Wv),LV=function(){function t(){}return t}(),EV=function(t){function e(e){var n=t.call(this,e)||this;return n.type="normalCandlestickBox",n}return i(e,t),e.prototype.getDefaultShape=function(){return new LV},e.prototype.buildPath=function(t,e){var n=e.points;this.__simpleBox?(t.moveTo(n[4][0],n[4][1]),t.lineTo(n[6][0],n[6][1])):(t.moveTo(n[0][0],n[0][1]),t.lineTo(n[1][0],n[1][1]),t.lineTo(n[2][0],n[2][1]),t.lineTo(n[3][0],n[3][1]),t.closePath(),t.moveTo(n[4][0],n[4][1]),t.lineTo(n[5][0],n[5][1]),t.moveTo(n[6][0],n[6][1]),t.lineTo(n[7][0],n[7][1]))},e}(ds);function NV(t,e,n){var r=t.ends;return new EV({shape:{points:n?zV(r,t):r},z2:100})}function RV(t,e){for(var n=!0,r=0;r<e.ends.length;r++)if(t.contain(e.ends[r][0],e.ends[r][1])){n=!1;break}return n}function PV(t,e,n,r){var o=e.getItemModel(n);t.useStyle(e.getItemVisual(n,"style")),t.style.strokeNoScale=!0,t.__simpleBox=r,ql(t,o)}function zV(t,e){return B(t,function(t){return t=t.slice(),t[1]=e.initBaseline,t})}var BV=function(){function t(){}return t}(),VV=function(t){function e(e){var n=t.call(this,e)||this;return n.type="largeCandlestickBox",n}return i(e,t),e.prototype.getDefaultShape=function(){return new BV},e.prototype.buildPath=function(t,e){for(var n=e.points,r=0;r<n.length;)if(this.__sign===n[r++]){var o=n[r++];t.moveTo(o,n[r++]),t.lineTo(o,n[r++])}else r+=3},e}(ds);function HV(t,e,n){var r=t.getData(),o=r.getLayout("largePoints"),i=new VV({shape:{points:o},__sign:1});e.add(i);var a=new VV({shape:{points:o},__sign:-1});e.add(a),FV(1,i,t,r),FV(-1,a,t,r),n&&(i.incremental=!0,a.incremental=!0)}function FV(t,e,n,r){var o=n.get(["itemStyle",t>0?"borderColor":"borderColor0"])||n.get(["itemStyle",t>0?"color":"color0"]),i=n.getModel("itemStyle").getItemStyle(IV);e.useStyle(i),e.style.fill=null,e.style.stroke=o}var WV=OV,UV=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n.defaultValueDimensions=[{name:"open",defaultTooltip:!0},{name:"close",defaultTooltip:!0},{name:"lowest",defaultTooltip:!0},{name:"highest",defaultTooltip:!0}],n}return i(e,t),e.prototype.getShadowDim=function(){return"open"},e.prototype.brushSelector=function(t,e,n){var r=e.getItemLayout(t);return r&&n.rect(r.brushRect)},e.type="series.candlestick",e.dependencies=["xAxis","yAxis","grid"],e.defaultOption={zlevel:0,z:2,coordinateSystem:"cartesian2d",legendHoverLink:!0,layout:null,clip:!0,itemStyle:{color:"#eb5454",color0:"#47b262",borderColor:"#eb5454",borderColor0:"#47b262",borderWidth:1},emphasis:{scale:!0,itemStyle:{borderWidth:2}},barMaxWidth:null,barMinWidth:null,barWidth:null,large:!0,largeThreshold:600,progressive:3e3,progressiveThreshold:1e4,progressiveChunkMode:"mod",animationEasing:"linear",animationDuration:300},e}(Iv);R(UV,fV,!0);var GV=UV;function jV(t){t&&X(t.series)&&z(t.series,function(t){K(t)&&"k"===t.type&&(t.type="candlestick")})}var XV=["itemStyle","borderColor"],YV=["itemStyle","borderColor0"],qV=["itemStyle","color"],ZV=["itemStyle","color0"],$V={seriesType:"candlestick",plan:Ev(),performRawSeries:!0,reset:function(t,e){function n(t,e){return e.get(t>0?qV:ZV)}function r(t,e){return e.get(t>0?XV:YV)}if(!e.isSeriesFiltered(t)){var o=t.pipelineContext.large;return!o&&{progress:function(t,e){var o;while(null!=(o=t.next())){var i=e.getItemModel(o),a=e.getItemLayout(o).sign,u=i.getItemStyle();u.fill=n(a,i),u.stroke=r(a,i)||u.fill;var s=e.ensureUniqueItemVisual(o,"style");I(s,u)}}}}}},KV=$V,JV="undefined"!==typeof Float32Array?Float32Array:Array,QV={seriesType:"candlestick",plan:Ev(),reset:function(t){var e=t.coordinateSystem,n=t.getData(),r=eH(t,n),o=0,i=1,a=["x","y"],u=n.mapDimension(a[o]),s=n.mapDimensionsAll(a[i]),l=s[0],c=s[1],f=s[2],d=s[3];if(n.setLayout({candleWidth:r,isSimpleBox:r<=1.3}),!(null==u||s.length<4))return{progress:t.pipelineContext.large?p:h};function h(t,n){var a;while(null!=(a=t.next())){var s=n.get(u,a),h=n.get(l,a),p=n.get(c,a),g=n.get(f,a),m=n.get(d,a),v=Math.min(h,p),y=Math.max(h,p),b=C(v,s),x=C(y,s),w=C(g,s),_=C(m,s),S=[];M(S,x,0),M(S,b,1),S.push(k(_),k(x),k(w),k(b)),n.setItemLayout(a,{sign:tH(n,a,h,p,c),initBaseline:h>p?x[i]:b[i],ends:S,brushRect:T(g,m,s)})}function C(t,n){var r=[];return r[o]=n,r[i]=t,isNaN(n)||isNaN(t)?[NaN,NaN]:e.dataToPoint(r)}function M(t,e,n){var i=e.slice(),a=e.slice();i[o]=Kf(i[o]+r/2,1,!1),a[o]=Kf(a[o]-r/2,1,!0),n?t.push(i,a):t.push(a,i)}function T(t,e,n){var a=C(t,n),u=C(e,n);return a[o]-=r/2,u[o]-=r/2,{x:a[0],y:a[1],width:i?r:u[0]-a[0],height:i?u[1]-a[1]:r}}function k(t){return t[o]=Kf(t[o],1),t}}function p(t,n){var r,a,s=new JV(4*t.count),h=0,p=[],g=[];while(null!=(a=t.next())){var m=n.get(u,a),v=n.get(l,a),y=n.get(c,a),b=n.get(f,a),x=n.get(d,a);isNaN(m)||isNaN(b)||isNaN(x)?(s[h++]=NaN,h+=3):(s[h++]=tH(n,a,v,y,c),p[o]=m,p[i]=b,r=e.dataToPoint(p,null,g),s[h++]=r?r[0]:NaN,s[h++]=r?r[1]:NaN,p[i]=x,r=e.dataToPoint(p,null,g),s[h++]=r?r[1]:NaN)}n.setLayout("largePoints",s)}}};function tH(t,e,n,r,o){var i;return i=n>r?-1:n<r?1:e>0?t.get(o,e-1)<=r?1:-1:1,i}function eH(t,e){var n,r=t.getBaseAxis(),o="category"===r.type?r.getBandWidth():(n=r.getExtent(),Math.abs(n[1]-n[0])/e.count()),i=Ro(at(t.get("barMaxWidth"),o),o),a=Ro(at(t.get("barMinWidth"),1),o),u=t.get("barWidth");return null!=u?Ro(u,o):Math.max(Math.min(o/2,i),a)}var nH=QV;function rH(t){t.registerChartView(WV),t.registerSeriesModel(GV),t.registerPreprocessor(jV),t.registerVisual(KV),t.registerLayout(nH)}var oH=3;function iH(t){return X(t)||(t=[+t,+t]),t}function aH(t,e){var n=e.rippleEffectColor||e.color;t.eachChild(function(t){t.attr({z:e.z,zlevel:e.zlevel,style:{stroke:"stroke"===e.brushType?n:null,fill:"fill"===e.brushType?n:null}})})}var uH=function(t){function e(e,n){var r=t.call(this)||this,o=new YM(e,n),i=new _o;return r.add(o),r.add(i),r.updateData(e,n),r}return i(e,t),e.prototype.stopEffectAnimation=function(){this.childAt(1).removeAll()},e.prototype.startEffectAnimation=function(t){for(var e=t.symbolType,n=t.color,r=this.childAt(1),o=0;o<oH;o++){var i=zb(e,-1,-1,2,2,n);i.attr({style:{strokeNoScale:!0},z2:99,silent:!0,scaleX:.5,scaleY:.5});var a=-o/oH*t.period+t.effectOffset;i.animate("",!0).when(t.period,{scaleX:t.rippleScale/2,scaleY:t.rippleScale/2}).delay(a).start(),i.animateStyle(!0).when(t.period,{opacity:0}).delay(a).start(),r.add(i)}aH(r,t)},e.prototype.updateEffectAnimation=function(t){for(var e=this._effectCfg,n=this.childAt(1),r=["symbolType","period","rippleScale"],o=0;o<r.length;o++){var i=r[o];if(e[i]!==t[i])return this.stopEffectAnimation(),void this.startEffectAnimation(t)}aH(n,t)},e.prototype.highlight=function(){kl(this)},e.prototype.downplay=function(){Dl(this)},e.prototype.updateData=function(t,e){var n=this,r=t.hostModel;this.childAt(0).updateData(t,e);var o=this.childAt(1),i=t.getItemModel(e),a=t.getItemVisual(e,"symbol"),u=iH(t.getItemVisual(e,"symbolSize")),s=t.getItemVisual(e,"style"),l=s&&s.fill;o.setScale(u),o.traverse(function(t){t.setStyle("fill",l)});var c=t.getItemVisual(e,"symbolOffset");c&&(X(c)||(c=[c,c]),o.x=Ro(c[0],u[0]),o.y=Ro(at(c[1],c[0])||0,u[1]));var f=t.getItemVisual(e,"symbolRotate");o.rotation=(f||0)*Math.PI/180||0;var d={};d.showEffectOn=r.get("showEffectOn"),d.rippleScale=i.get(["rippleEffect","scale"]),d.brushType=i.get(["rippleEffect","brushType"]),d.period=1e3*i.get(["rippleEffect","period"]),d.effectOffset=e/t.count(),d.z=r.getShallow("z")||0,d.zlevel=r.getShallow("zlevel")||0,d.symbolType=a,d.color=l,d.rippleEffectColor=i.get(["rippleEffect","color"]),this.off("mouseover").off("mouseout").off("emphasis").off("normal"),"render"===d.showEffectOn?(this._effectCfg?this.updateEffectAnimation(d):this.startEffectAnimation(d),this._effectCfg=d):(this._effectCfg=null,this.stopEffectAnimation(),this.onHoverStateChange=function(t){"emphasis"===t?"render"!==d.showEffectOn&&n.startEffectAnimation(d):"normal"===t&&"render"!==d.showEffectOn&&n.stopEffectAnimation()}),this._effectCfg=d,Gl(this)},e.prototype.fadeOut=function(t){this.off("mouseover").off("mouseout"),t&&t()},e}(_o),sH=uH,lH=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n}return i(e,t),e.prototype.init=function(){this._symbolDraw=new JM(sH)},e.prototype.render=function(t,e,n){var r=t.getData(),o=this._symbolDraw;o.updateData(r,{clipShape:this._getClipShape(t)}),this.group.add(o.group)},e.prototype._getClipShape=function(t){var e=t.coordinateSystem,n=e&&e.getArea&&e.getArea();return t.get("clip",!0)?n:null},e.prototype.updateTransform=function(t,e,n){var r=t.getData();this.group.dirty();var o=PT("").reset(t,e,n);o.progress&&o.progress({start:0,end:r.count(),count:r.count()},r),this._symbolDraw.updateLayout()},e.prototype._updateGroupTransform=function(t){var e=t.coordinateSystem;e&&e.getRoamTransform&&(this.group.transform=Tr(e.getRoamTransform()),this.group.decomposeTransform())},e.prototype.remove=function(t,e){this._symbolDraw&&this._symbolDraw.remove(!0)},e.type="effectScatter",e}(Wv),cH=lH,fH=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n.hasSymbolVisual=!0,n}return i(e,t),e.prototype.getInitialData=function(t,e){return HM(this.getSource(),this,{useEncodeDefaulter:!0})},e.prototype.brushSelector=function(t,e,n){return n.point(e.getItemLayout(t))},e.type="series.effectScatter",e.dependencies=["grid","polar"],e.defaultOption={coordinateSystem:"cartesian2d",zlevel:0,z:2,legendHoverLink:!0,effectType:"ripple",progressive:0,showEffectOn:"render",clip:!0,rippleEffect:{period:4,scale:2.5,brushType:"fill"},symbolSize:10},e}(Iv),dH=fH;function hH(t){t.registerChartView(cH),t.registerSeriesModel(dH),t.registerLayout(PT("effectScatter"))}var pH=function(t){function e(e,n,r){var o=t.call(this)||this;return o.add(o.createLine(e,n,r)),o._updateEffectSymbol(e,n),o}return i(e,t),e.prototype.createLine=function(t,e,n){return new OR(t,e,n)},e.prototype._updateEffectSymbol=function(t,e){var n=t.getItemModel(e),r=n.getModel("effect"),o=r.get("symbolSize"),i=r.get("symbol");X(o)||(o=[o,o]);var a=t.getItemVisual(e,"style"),u=r.get("color")||a&&a.stroke,s=this.childAt(1);this._symbolType!==i&&(this.remove(s),s=zb(i,-.5,-.5,1,1,u),s.z2=100,s.culling=!0,this.add(s)),s&&(s.setStyle("shadowColor",u),s.setStyle(r.getItemStyle(["color"])),s.scaleX=o[0],s.scaleY=o[1],s.setColor(u),this._symbolType=i,this._symbolScale=o,this._updateEffectAnimation(t,r,e))},e.prototype._updateEffectAnimation=function(t,e,n){var r=this.childAt(1);if(r){var o=this,i=t.getItemLayout(n),a=1e3*e.get("period"),u=e.get("loop"),s=e.get("constantSpeed"),l=it(e.get("delay"),function(e){return e/t.count()*a/3});if(r.ignore=!0,this._updateAnimationPoints(r,i),s>0&&(a=this._getLineLength(r)/s*1e3),(a!==this._period||u!==this._loop)&&(r.stopAnimation(),a>0)){var c=void 0;c="function"===typeof l?l(n):l,r.__t>0&&(c=-a*r.__t),r.__t=0;var f=r.animate("",u).when(a,{__t:1}).delay(c).during(function(){o._updateSymbolPosition(r)});u||f.done(function(){o.remove(r)}),f.start()}this._period=a,this._loop=u}},e.prototype._getLineLength=function(t){return Et(t.__p1,t.__cp1)+Et(t.__cp1,t.__p2)},e.prototype._updateAnimationPoints=function(t,e){t.__p1=e[0],t.__p2=e[1],t.__cp1=e[2]||[(e[0][0]+e[1][0])/2,(e[0][1]+e[1][1])/2]},e.prototype.updateData=function(t,e,n){this.childAt(0).updateData(t,e,n),this._updateEffectSymbol(t,e)},e.prototype._updateSymbolPosition=function(t){var e=t.__p1,n=t.__p2,r=t.__cp1,o=t.__t,i=[t.x,t.y],a=i.slice(),u=Ja,s=Qa;i[0]=u(e[0],r[0],n[0],o),i[1]=u(e[1],r[1],n[1],o);var l=s(e[0],r[0],n[0],o),c=s(e[1],r[1],n[1],o);t.rotation=-Math.atan2(c,l)-Math.PI/2,"line"!==this._symbolType&&"rect"!==this._symbolType&&"roundRect"!==this._symbolType||(void 0!==t.__lastT&&t.__lastT<t.__t?(t.scaleY=1.05*Et(a,i),1===o&&(i[0]=a[0]+(i[0]-a[0])/2,i[1]=a[1]+(i[1]-a[1])/2)):1===t.__lastT?t.scaleY=2*Et(e,i):t.scaleY=this._symbolScale[1]),t.__lastT=t.__t,t.ignore=!1,t.x=i[0],t.y=i[1]},e.prototype.updateLayout=function(t,e){this.childAt(0).updateLayout(t,e);var n=t.getItemModel(e).getModel("effect");this._updateEffectAnimation(t,n,e)},e}(_o),gH=pH,mH=function(t){function e(e,n,r){var o=t.call(this)||this;return o._createPolyline(e,n,r),o}return i(e,t),e.prototype._createPolyline=function(t,e,n){var r=t.getItemLayout(e),o=new af({shape:{points:r}});this.add(o),this._updateCommonStl(t,e,n)},e.prototype.updateData=function(t,e,n){var r=t.hostModel,o=this.childAt(0),i={shape:{points:t.getItemLayout(e)}};Qf(o,i,r,e),this._updateCommonStl(t,e,n)},e.prototype._updateCommonStl=function(t,e,n){var r=this.childAt(0),o=t.getItemModel(e),i=n&&n.emphasisLineStyle;n&&!t.hasItemOption||(i=o.getModel(["emphasis","lineStyle"]).getLineStyle()),r.useStyle(t.getItemVisual(e,"style")),r.style.fill=null,r.style.strokeNoScale=!0;var a=r.ensureState("emphasis");a.style=i,Gl(this)},e.prototype.updateLayout=function(t,e){var n=this.childAt(0);n.setShape("points",t.getItemLayout(e))},e}(_o),vH=mH,yH=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._lastFrame=0,e._lastFramePercent=0,e}return i(e,t),e.prototype.createLine=function(t,e,n){return new vH(t,e,n)},e.prototype._updateAnimationPoints=function(t,e){this._points=e;for(var n=[0],r=0,o=1;o<e.length;o++){var i=e[o-1],a=e[o];r+=Et(i,a),n.push(r)}if(0!==r){for(o=0;o<n.length;o++)n[o]/=r;this._offsets=n,this._length=r}else this._length=0},e.prototype._getLineLength=function(){return this._length},e.prototype._updateSymbolPosition=function(t){var e=t.__t,n=this._points,r=this._offsets,o=n.length;if(r){var i,a=this._lastFrame;if(e<this._lastFramePercent){var u=Math.min(a+1,o-1);for(i=u;i>=0;i--)if(r[i]<=e)break;i=Math.min(i,o-2)}else{for(i=a;i<o;i++)if(r[i]>e)break;i=Math.min(i-1,o-2)}var s=(e-r[i])/(r[i+1]-r[i]),l=n[i],c=n[i+1];t.x=l[0]*(1-s)+s*c[0],t.y=l[1]*(1-s)+s*c[1];var f=c[0]-l[0],d=c[1]-l[1];t.rotation=-Math.atan2(d,f)-Math.PI/2,this._lastFrame=i,this._lastFramePercent=e,t.ignore=!1}},e}(gH),bH=yH,xH=function(){function t(){this.polyline=!1,this.curveness=0,this.segs=[]}return t}(),wH=function(t){function e(e){return t.call(this,e)||this}return i(e,t),e.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},e.prototype.getDefaultShape=function(){return new xH},e.prototype.buildPath=function(t,e){var n=e.segs,r=e.curveness;if(e.polyline)for(var o=0;o<n.length;){var i=n[o++];if(i>0){t.moveTo(n[o++],n[o++]);for(var a=1;a<i;a++)t.lineTo(n[o++],n[o++])}}else for(o=0;o<n.length;){var u=n[o++],s=n[o++],l=n[o++],c=n[o++];if(t.moveTo(u,s),r>0){var f=(u+l)/2-(s-c)*r,d=(s+c)/2-(l-u)*r;t.quadraticCurveTo(f,d,l,c)}else t.lineTo(l,c)}},e.prototype.findDataIndex=function(t,e){var n=this.shape,r=n.segs,o=n.curveness,i=this.style.lineWidth;if(n.polyline)for(var a=0,u=0;u<r.length;){var s=r[u++];if(s>0)for(var l=r[u++],c=r[u++],f=1;f<s;f++){var d=r[u++],h=r[u++];if(Fu(l,c,d,h,i,t,e))return a}a++}else for(a=0,u=0;u<r.length;){l=r[u++],c=r[u++],d=r[u++],h=r[u++];if(o>0){var p=(l+d)/2-(c-h)*o,g=(c+h)/2-(d-l)*o;if(Uu(l,c,p,g,d,h,i,t,e))return a}else if(Fu(l,c,d,h,i,t,e))return a;a++}return-1},e}(ds),_H=function(){function t(){this.group=new _o}return t.prototype.isPersistent=function(){return!this._incremental},t.prototype.updateData=function(t){this.group.removeAll();var e=new wH({rectHover:!0,cursor:"default"});e.setShape({segs:t.getLayout("linesPoints")}),this._setCommon(e,t),this.group.add(e),this._incremental=null},t.prototype.incrementalPrepareUpdate=function(t){this.group.removeAll(),this._clearIncremental(),t.count()>5e5?(this._incremental||(this._incremental=new Rf({silent:!0})),this.group.add(this._incremental)):this._incremental=null},t.prototype.incrementalUpdate=function(t,e){var n=new wH;n.setShape({segs:e.getLayout("linesPoints")}),this._setCommon(n,e,!!this._incremental),this._incremental?this._incremental.addDisplayable(n,!0):(n.rectHover=!0,n.cursor="default",n.__startIndex=t.start,this.group.add(n))},t.prototype.remove=function(){this._clearIncremental(),this._incremental=null,this.group.removeAll()},t.prototype._setCommon=function(t,e,n){var r=e.hostModel;t.setShape({polyline:r.get("polyline"),curveness:r.get(["lineStyle","curveness"])}),t.useStyle(r.getModel("lineStyle").getLineStyle()),t.style.strokeNoScale=!0;var o=e.getVisual("style");if(o&&o.stroke&&t.setStyle("stroke",o.stroke),t.setStyle("fill",null),!n){var i=Gs(t);i.seriesIndex=r.seriesIndex,t.on("mousemove",function(e){i.dataIndex=null;var n=t.findDataIndex(e.offsetX,e.offsetY);n>0&&(i.dataIndex=n+t.__startIndex)})}},t.prototype._clearIncremental=function(){var t=this._incremental;t&&t.clearDisplaybles()},t}(),SH=_H,CH={seriesType:"lines",plan:Ev(),reset:function(t){var e=t.coordinateSystem,n=t.get("polyline"),r=t.pipelineContext.large;return{progress:function(o,i){var a=[];if(r){var u=void 0,s=o.end-o.start;if(n){for(var l=0,c=o.start;c<o.end;c++)l+=t.getLineCoordsCount(c);u=new Float32Array(s+2*l)}else u=new Float32Array(4*s);var f=0,d=[];for(c=o.start;c<o.end;c++){var h=t.getLineCoords(c,a);n&&(u[f++]=h);for(var p=0;p<h;p++)d=e.dataToPoint(a[p],!1,d),u[f++]=d[0],u[f++]=d[1]}i.setLayout("linesPoints",u)}else for(c=o.start;c<o.end;c++){var g=i.getItemModel(c),m=(h=t.getLineCoords(c,a),[]);if(n)for(var v=0;v<h;v++)m.push(e.dataToPoint(a[v]));else{m[0]=e.dataToPoint(a[0]),m[1]=e.dataToPoint(a[1]);var y=g.get(["lineStyle","curveness"]);+y&&(m[2]=[(m[0][0]+m[1][0])/2-(m[0][1]-m[1][1])*y,(m[0][1]+m[1][1])/2-(m[1][0]-m[0][0])*y])}i.setItemLayout(c,m)}}}}},MH=CH,TH=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n}return i(e,t),e.prototype.render=function(t,e,n){var r=t.getData(),o=this._updateLineDraw(r,t),i=t.get("zlevel"),a=t.get(["effect","trailLength"]),u=n.getZr(),s="svg"===u.painter.getType();(s||u.painter.getLayer(i).clear(!0),null==this._lastZlevel||s||u.configLayer(this._lastZlevel,{motionBlur:!1}),this._showEffect(t)&&a)&&(s||u.configLayer(i,{motionBlur:!0,lastFrameAlpha:Math.max(Math.min(a/10+.9,1),0)}));o.updateData(r);var l=t.get("clip",!0)&&vT(t.coordinateSystem,!1,t);l?this.group.setClipPath(l):this.group.removeClipPath(),this._lastZlevel=i,this._finished=!0},e.prototype.incrementalPrepareRender=function(t,e,n){var r=t.getData(),o=this._updateLineDraw(r,t);o.incrementalPrepareUpdate(r),this._clearLayer(n),this._finished=!1},e.prototype.incrementalRender=function(t,e,n){this._lineDraw.incrementalUpdate(t,e.getData()),this._finished=t.end===e.getData().count()},e.prototype.updateTransform=function(t,e,n){var r=t.getData(),o=t.pipelineContext;if(!this._finished||o.large||o.progressiveRender)return{update:!0};var i=MH.reset(t,e,n);i.progress&&i.progress({start:0,end:r.count(),count:r.count()},r),this._lineDraw.updateLayout(),this._clearLayer(n)},e.prototype._updateLineDraw=function(t,e){var n=this._lineDraw,r=this._showEffect(e),o=!!e.get("polyline"),i=e.pipelineContext,a=i.large;return n&&r===this._hasEffet&&o===this._isPolyline&&a===this._isLargeDraw||(n&&n.remove(),n=this._lineDraw=a?new SH:new zR(o?r?bH:vH:r?gH:OR),this._hasEffet=r,this._isPolyline=o,this._isLargeDraw=a,this.group.removeAll()),this.group.add(n.group),n},e.prototype._showEffect=function(t){return!!t.get(["effect","show"])},e.prototype._clearLayer=function(t){var e=t.getZr(),n="svg"===e.painter.getType();n||null==this._lastZlevel||e.painter.getLayer(this._lastZlevel).clear(!0)},e.prototype.remove=function(t,e){this._lineDraw&&this._lineDraw.remove(),this._lineDraw=null,this._clearLayer(e)},e.type="lines",e}(Wv),kH=TH,DH="undefined"===typeof Uint32Array?Array:Uint32Array,AH="undefined"===typeof Float64Array?Array:Float64Array;function IH(t){var e=t.data;e&&e[0]&&e[0][0]&&e[0][0].coord&&(t.data=B(e,function(t){var e=[t[0].coord,t[1].coord],n={coords:e};return t[0].name&&(n.fromName=t[0].name),t[1].name&&(n.toName=t[1].name),A([n,t[0],t[1]])}))}var OH=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n.visualStyleAccessPath="lineStyle",n.visualDrawType="stroke",n}return i(e,t),e.prototype.init=function(e){e.data=e.data||[],IH(e);var n=this._processFlatCoordsArray(e.data);this._flatCoords=n.flatCoords,this._flatCoordsOffset=n.flatCoordsOffset,n.flatCoords&&(e.data=new Float32Array(n.count)),t.prototype.init.apply(this,arguments)},e.prototype.mergeOption=function(e){if(IH(e),e.data){var n=this._processFlatCoordsArray(e.data);this._flatCoords=n.flatCoords,this._flatCoordsOffset=n.flatCoordsOffset,n.flatCoords&&(e.data=new Float32Array(n.count))}t.prototype.mergeOption.apply(this,arguments)},e.prototype.appendData=function(t){var e=this._processFlatCoordsArray(t.data);e.flatCoords&&(this._flatCoords?(this._flatCoords=vt(this._flatCoords,e.flatCoords),this._flatCoordsOffset=vt(this._flatCoordsOffset,e.flatCoordsOffset)):(this._flatCoords=e.flatCoords,this._flatCoordsOffset=e.flatCoordsOffset),t.data=new Float32Array(e.count)),this.getRawData().appendData(t.data)},e.prototype._getCoordsFromItemModel=function(t){var e=this.getData().getItemModel(t),n=e.option instanceof Array?e.option:e.getShallow("coords");return n},e.prototype.getLineCoordsCount=function(t){return this._flatCoordsOffset?this._flatCoordsOffset[2*t+1]:this._getCoordsFromItemModel(t).length},e.prototype.getLineCoords=function(t,e){if(this._flatCoordsOffset){for(var n=this._flatCoordsOffset[2*t],r=this._flatCoordsOffset[2*t+1],o=0;o<r;o++)e[o]=e[o]||[],e[o][0]=this._flatCoords[n+2*o],e[o][1]=this._flatCoords[n+2*o+1];return r}var i=this._getCoordsFromItemModel(t);for(o=0;o<i.length;o++)e[o]=e[o]||[],e[o][0]=i[o][0],e[o][1]=i[o][1];return i.length},e.prototype._processFlatCoordsArray=function(t){var e=0;if(this._flatCoords&&(e=this._flatCoords.length),"number"===typeof t[0]){for(var n=t.length,r=new DH(n),o=new AH(n),i=0,a=0,u=0,s=0;s<n;){u++;var l=t[s++];r[a++]=i+e,r[a++]=l;for(var c=0;c<l;c++){var f=t[s++],d=t[s++];o[i++]=f,o[i++]=d}}return{flatCoordsOffset:new Uint32Array(r.buffer,0,a),flatCoords:o,count:u}}return{flatCoordsOffset:null,flatCoords:null,count:t.length}},e.prototype.getInitialData=function(t,e){var n=new CM(["value"],this);return n.hasItemOption=!1,n.initData(t.data,[],function(t,e,r,o){if(t instanceof Array)return NaN;n.hasItemOption=!0;var i=t.value;return null!=i?i instanceof Array?i[o]:i:void 0}),n},e.prototype.formatTooltip=function(t,e,n){var r=this.getData(),o=r.getItemModel(t),i=o.get("name");if(i)return i;var a=o.get("fromName"),u=o.get("toName"),s=[];return null!=a&&s.push(a),null!=u&&s.push(u),rv("nameValue",{name:s.join(" > ")})},e.prototype.preventIncremental=function(){return!!this.get(["effect","show"])},e.prototype.getProgressive=function(){var t=this.option.progressive;return null==t?this.option.large?1e4:this.get("progressive"):t},e.prototype.getProgressiveThreshold=function(){var t=this.option.progressiveThreshold;return null==t?this.option.large?2e4:this.get("progressiveThreshold"):t},e.type="series.lines",e.dependencies=["grid","polar","geo","calendar"],e.defaultOption={coordinateSystem:"geo",zlevel:0,z:2,legendHoverLink:!0,xAxisIndex:0,yAxisIndex:0,symbol:["none","none"],symbolSize:[10,10],geoIndex:0,effect:{show:!1,period:4,constantSpeed:0,symbol:"circle",symbolSize:3,loop:!0,trailLength:.2},large:!1,largeThreshold:2e3,polyline:!1,clip:!0,label:{show:!1,position:"end"},lineStyle:{opacity:.5}},e}(Iv),LH=OH;function EH(t){return t instanceof Array||(t=[t,t]),t}var NH={seriesType:"lines",reset:function(t){var e=EH(t.get("symbol")),n=EH(t.get("symbolSize")),r=t.getData();function o(t,e){var n=t.getItemModel(e),r=EH(n.getShallow("symbol",!0)),o=EH(n.getShallow("symbolSize",!0));r[0]&&t.setItemVisual(e,"fromSymbol",r[0]),r[1]&&t.setItemVisual(e,"toSymbol",r[1]),o[0]&&t.setItemVisual(e,"fromSymbolSize",o[0]),o[1]&&t.setItemVisual(e,"toSymbolSize",o[1])}return r.setVisual("fromSymbol",e&&e[0]),r.setVisual("toSymbol",e&&e[1]),r.setVisual("fromSymbolSize",n&&n[0]),r.setVisual("toSymbolSize",n&&n[1]),{dataEach:r.hasItemOption?o:null}}},RH=NH;function PH(t){t.registerChartView(kH),t.registerSeriesModel(LH),t.registerLayout(MH),t.registerVisual(RH)}var zH=256,BH=function(){function t(){this.blurSize=30,this.pointSize=20,this.maxOpacity=1,this.minOpacity=0,this._gradientPixels={inRange:null,outOfRange:null};var t=L();this.canvas=t}return t.prototype.update=function(t,e,n,r,o,i){var a=this._getBrush(),u=this._getGradient(o,"inRange"),s=this._getGradient(o,"outOfRange"),l=this.pointSize+this.blurSize,c=this.canvas,f=c.getContext("2d"),d=t.length;c.width=e,c.height=n;for(var h=0;h<d;++h){var p=t[h],g=p[0],m=p[1],v=p[2],y=r(v);f.globalAlpha=y,f.drawImage(a,g-l,m-l)}if(!c.width||!c.height)return c;var b=f.getImageData(0,0,c.width,c.height),x=b.data,w=0,_=x.length,S=this.minOpacity,C=this.maxOpacity,M=C-S;while(w<_){y=x[w+3]/256;var T=4*Math.floor(y*(zH-1));if(y>0){var k=i(y)?u:s;y>0&&(y=y*M+S),x[w++]=k[T],x[w++]=k[T+1],x[w++]=k[T+2],x[w++]=k[T+3]*y*256}else w+=4}return f.putImageData(b,0,0),c},t.prototype._getBrush=function(){var t=this._brushCanvas||(this._brushCanvas=L()),e=this.pointSize+this.blurSize,n=2*e;t.width=n,t.height=n;var r=t.getContext("2d");return r.clearRect(0,0,n,n),r.shadowOffsetX=n,r.shadowBlur=this.blurSize,r.shadowColor="#000",r.beginPath(),r.arc(-e,e,this.pointSize,0,2*Math.PI,!0),r.closePath(),r.fill(),t},t.prototype._getGradient=function(t,e){for(var n=this._gradientPixels,r=n[e]||(n[e]=new Uint8ClampedArray(1024)),o=[0,0,0,0],i=0,a=0;a<256;a++)t[e](a/255,!0,o),r[i++]=o[0],r[i++]=o[1],r[i++]=o[2],r[i++]=o[3];return r},t}(),VH=BH;function HH(t,e,n){var r=t[1]-t[0];e=B(e,function(e){return{interval:[(e.interval[0]-t[0])/r,(e.interval[1]-t[0])/r]}});var o=e.length,i=0;return function(t){var r;for(r=i;r<o;r++){var a=e[r].interval;if(a[0]<=t&&t<=a[1]){i=r;break}}if(r===o)for(r=i-1;r>=0;r--){a=e[r].interval;if(a[0]<=t&&t<=a[1]){i=r;break}}return r>=0&&r<o&&n[r]}}function FH(t,e){var n=t[1]-t[0];return e=[(e[0]-t[0])/n,(e[1]-t[0])/n],function(t){return t>=e[0]&&t<=e[1]}}function WH(t){var e=t.dimensions;return"lng"===e[0]&&"lat"===e[1]}var UH=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n}return i(e,t),e.prototype.render=function(t,e,n){var r;e.eachComponent("visualMap",function(e){e.eachTargetSeries(function(n){n===t&&(r=e)})}),this.group.removeAll(),this._incrementalDisplayable=null;var o=t.coordinateSystem;"cartesian2d"===o.type||"calendar"===o.type?this._renderOnCartesianAndCalendar(t,n,0,t.getData().count()):WH(o)&&this._renderOnGeo(o,t,r,n)},e.prototype.incrementalPrepareRender=function(t,e,n){this.group.removeAll()},e.prototype.incrementalRender=function(t,e,n,r){var o=e.coordinateSystem;o&&(WH(o)?this.render(e,n,r):this._renderOnCartesianAndCalendar(e,r,t.start,t.end,!0))},e.prototype._renderOnCartesianAndCalendar=function(t,e,n,r,o){var i,a,u,s,l=t.coordinateSystem;if(yT(l,"cartesian2d")){var c=l.getAxis("x"),f=l.getAxis("y");0,i=c.getBandWidth(),a=f.getBandWidth(),u=c.scale.getExtent(),s=f.scale.getExtent()}for(var d=this.group,h=t.getData(),p=t.getModel(["emphasis","itemStyle"]).getItemStyle(),g=t.getModel(["blur","itemStyle"]).getItemStyle(),m=t.getModel(["select","itemStyle"]).getItemStyle(),v=Sd(t),y=t.get(["emphasis","focus"]),b=t.get(["emphasis","blurScope"]),x=yT(l,"cartesian2d")?[h.mapDimension("x"),h.mapDimension("y"),h.mapDimension("value")]:[h.mapDimension("time"),h.mapDimension("value")],w=n;w<r;w++){var _=void 0,S=h.getItemVisual(w,"style");if(yT(l,"cartesian2d")){var C=h.get(x[0],w),M=h.get(x[1],w);if(isNaN(h.get(x[2],w))||C<u[0]||C>u[1]||M<s[0]||M>s[1])continue;var T=l.dataToPoint([C,M]);_=new As({shape:{x:Math.floor(Math.round(T[0])-i/2),y:Math.floor(Math.round(T[1])-a/2),width:Math.ceil(i),height:Math.ceil(a)},style:S})}else{if(isNaN(h.get(x[1],w)))continue;_=new As({z2:1,shape:l.dataToRect([h.get(x[0],w)]).contentShape,style:S})}var k=h.getItemModel(w);if(h.hasItemOption){var D=k.getModel("emphasis");p=D.getModel("itemStyle").getItemStyle(),g=k.getModel(["blur","itemStyle"]).getItemStyle(),m=k.getModel(["select","itemStyle"]).getItemStyle(),y=D.get("focus"),b=D.get("blurScope"),v=Sd(k)}var A=t.getRawValue(w),I="-";A&&null!=A[2]&&(I=A[2]+""),_d(_,v,{labelFetcher:t,labelDataIndex:w,defaultOpacity:S.opacity,defaultText:I}),_.ensureState("emphasis").style=p,_.ensureState("blur").style=g,_.ensureState("select").style=m,Gl(_,y,b),_.incremental=o,o&&(_.states.emphasis.hoverLayer=!0),d.add(_),h.setItemGraphicEl(w,_)}},e.prototype._renderOnGeo=function(t,e,n,r){var o=n.targetVisuals.inRange,i=n.targetVisuals.outOfRange,a=e.getData(),u=this._hmLayer||this._hmLayer||new VH;u.blurSize=e.get("blurSize"),u.pointSize=e.get("pointSize"),u.minOpacity=e.get("minOpacity"),u.maxOpacity=e.get("maxOpacity");var s=t.getViewRect().clone(),l=t.getRoamTransform();s.applyTransform(l);var c=Math.max(s.x,0),f=Math.max(s.y,0),d=Math.min(s.width+s.x,r.getWidth()),h=Math.min(s.height+s.y,r.getHeight()),p=d-c,g=h-f,m=[a.mapDimension("lng"),a.mapDimension("lat"),a.mapDimension("value")],v=a.mapArray(m,function(e,n,r){var o=t.dataToPoint([e,n]);return o[0]-=c,o[1]-=f,o.push(r),o}),y=n.getExtent(),b="visualMap.continuous"===n.type?FH(y,n.option.range):HH(y,n.getPieceList(),n.option.selected);u.update(v,p,g,o.color.getNormalizer(),{inRange:o.color.getColorMapper(),outOfRange:i.color.getColorMapper()},b);var x=new xs({style:{width:p,height:g,x:c,y:f,image:u.canvas},silent:!0});this.group.add(x)},e.type="heatmap",e}(Wv),GH=UH,jH=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n}return i(e,t),e.prototype.getInitialData=function(t,e){return HM(this.getSource(),this,{generateCoord:"value"})},e.prototype.preventIncremental=function(){var t=mg.get(this.get("coordinateSystem"));if(t&&t.dimensions)return"lng"===t.dimensions[0]&&"lat"===t.dimensions[1]},e.type="series.heatmap",e.dependencies=["grid","geo","calendar"],e.defaultOption={coordinateSystem:"cartesian2d",zlevel:0,z:2,geoIndex:0,blurSize:30,pointSize:20,maxOpacity:1,minOpacity:0,select:{itemStyle:{borderColor:"#212121"}}},e}(Iv),XH=jH;function YH(t){t.registerChartView(GH),t.registerSeriesModel(XH)}var qH=["itemStyle","borderWidth"],ZH=[{xy:"x",wh:"width",index:0,posDesc:["left","right"]},{xy:"y",wh:"height",index:1,posDesc:["top","bottom"]}],$H=new Tc,KH=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n}return i(e,t),e.prototype.render=function(t,e,n){var r=this.group,o=t.getData(),i=this._data,a=t.coordinateSystem,u=a.getBaseAxis(),s=u.isHorizontal(),l=a.master.getRect(),c={ecSize:{width:n.getWidth(),height:n.getHeight()},seriesModel:t,coordSys:a,coordSysExtent:[[l.x,l.x+l.width],[l.y,l.y+l.height]],isHorizontal:s,valueDim:ZH[+s],categoryDim:ZH[1-+s]};return o.diff(i).add(function(t){if(o.hasValue(t)){var e=lF(o,t),n=JH(o,t,e,c),i=dF(o,c,n);o.setItemGraphicEl(t,i),r.add(i),yF(i,c,n)}}).update(function(t,e){var n=i.getItemGraphicEl(e);if(o.hasValue(t)){var a=lF(o,t),u=JH(o,t,a,c),s=gF(o,u);n&&s!==n.__pictorialShapeStr&&(r.remove(n),o.setItemGraphicEl(t,null),n=null),n?hF(n,c,u):n=dF(o,c,u,!0),o.setItemGraphicEl(t,n),n.__pictorialSymbolMeta=u,r.add(n),yF(n,c,u)}else r.remove(n)}).remove(function(t){var e=i.getItemGraphicEl(t);e&&pF(i,t,e.__pictorialSymbolMeta.animationModel,e)}).execute(),this._data=o,this.group},e.prototype.remove=function(t,e){var n=this.group,r=this._data;t.get("animation")?r&&r.eachItemGraphicEl(function(e){pF(r,Gs(e).dataIndex,t,e)}):n.removeAll()},e.type="pictorialBar",e}(Wv);function JH(t,e,n,r){var o=t.getItemLayout(e),i=n.get("symbolRepeat"),a=n.get("symbolClip"),u=n.get("symbolPosition")||"start",s=n.get("symbolRotate"),l=(s||0)*Math.PI/180||0,c=n.get("symbolPatternSize")||2,f=n.isAnimationEnabled(),d={dataIndex:e,layout:o,itemModel:n,symbolType:t.getItemVisual(e,"symbol")||"circle",style:t.getItemVisual(e,"style"),symbolClip:a,symbolRepeat:i,symbolRepeatDirection:n.get("symbolRepeatDirection"),symbolPatternSize:c,rotation:l,animationModel:f?n:null,hoverScale:f&&n.get(["emphasis","scale"]),z2:n.getShallow("z",!0)||0};QH(n,i,o,r,d),eF(t,e,o,i,a,d.boundingLength,d.pxSign,c,r,d),nF(n,d.symbolScale,l,r,d);var h=d.symbolSize,p=n.get("symbolOffset");return X(p)&&(p=[Ro(p[0],h[0]),Ro(p[1],h[1])]),rF(n,h,o,i,a,p,u,d.valueLineWidth,d.boundingLength,d.repeatCutLength,r,d),d}function QH(t,e,n,r,o){var i,a=r.valueDim,u=t.get("symbolBoundingData"),s=r.coordSys.getOtherAxis(r.coordSys.getBaseAxis()),l=s.toGlobalCoord(s.dataToCoord(0)),c=1-+(n[a.wh]<=0);if(X(u)){var f=[tF(s,u[0])-l,tF(s,u[1])-l];f[1]<f[0]&&f.reverse(),i=f[c]}else i=null!=u?tF(s,u)-l:e?r.coordSysExtent[a.index][c]-l:n[a.wh];o.boundingLength=i,e&&(o.repeatCutLength=n[a.wh]),o.pxSign=i>0?1:i<0?-1:0}function tF(t,e){return t.toGlobalCoord(t.dataToCoord(t.scale.parse(e)))}function eF(t,e,n,r,o,i,a,u,s,l){var c,f=s.valueDim,d=s.categoryDim,h=Math.abs(n[d.wh]),p=t.getItemVisual(e,"symbolSize");c=X(p)?p.slice():null==p?["100%","100%"]:[p,p],c[d.index]=Ro(c[d.index],h),c[f.index]=Ro(c[f.index],r?h:Math.abs(i)),l.symbolSize=c;var g=l.symbolScale=[c[0]/u,c[1]/u];g[f.index]*=(s.isHorizontal?-1:1)*a}function nF(t,e,n,r,o){var i=t.get(qH)||0;i&&($H.attr({scaleX:e[0],scaleY:e[1],rotation:n}),$H.updateTransform(),i/=$H.getLineScale(),i*=e[r.valueDim.index]),o.valueLineWidth=i}function rF(t,e,n,r,o,i,a,u,s,l,c,f){var d=c.categoryDim,h=c.valueDim,p=f.pxSign,g=Math.max(e[h.index]+u,0),m=g;if(r){var v=Math.abs(s),y=it(t.get("symbolMargin"),"15%")+"",b=!1;y.lastIndexOf("!")===y.length-1&&(b=!0,y=y.slice(0,y.length-1));var x=Ro(y,e[h.index]),w=Math.max(g+2*x,0),_=b?0:2*x,S=ti(r),C=S?r:bF((v+_)/w),M=v-C*g;x=M/2/(b?C:C-1),w=g+2*x,_=b?0:2*x,S||"fixed"===r||(C=l?bF((Math.abs(l)+_)/w):0),m=C*w-_,f.repeatTimes=C,f.symbolMargin=x}var T=p*(m/2),k=f.pathPosition=[];k[d.index]=n[d.wh]/2,k[h.index]="start"===a?T:"end"===a?s-T:s/2,i&&(k[0]+=i[0],k[1]+=i[1]);var D=f.bundlePosition=[];D[d.index]=n[d.xy],D[h.index]=n[h.xy];var A=f.barRectShape=I({},n);A[h.wh]=p*Math.max(Math.abs(n[h.wh]),Math.abs(k[h.index]+T)),A[d.wh]=n[d.wh];var O=f.clipShape={};O[d.xy]=-n[d.xy],O[d.wh]=c.ecSize[d.wh],O[h.xy]=0,O[h.wh]=n[h.wh]}function oF(t){var e=t.symbolPatternSize,n=zb(t.symbolType,-e/2,-e/2,e,e);return n.attr({culling:!0}),"image"!==n.type&&n.setStyle({strokeNoScale:!0}),n}function iF(t,e,n,r){var o=t.__pictorialBundle,i=n.symbolSize,a=n.valueLineWidth,u=n.pathPosition,s=e.valueDim,l=n.repeatTimes||0,c=0,f=i[e.valueDim.index]+a+2*n.symbolMargin;for(mF(t,function(t){t.__pictorialAnimationIndex=c,t.__pictorialRepeatTimes=l,c<l?vF(t,null,p(c),n,r):vF(t,null,{scaleX:0,scaleY:0},n,r,function(){o.remove(t)}),c++});c<l;c++){var d=oF(n);d.__pictorialAnimationIndex=c,d.__pictorialRepeatTimes=l,o.add(d);var h=p(c);vF(d,{x:h.x,y:h.y,scaleX:0,scaleY:0},{scaleX:h.scaleX,scaleY:h.scaleY,rotation:h.rotation},n,r)}function p(t){var e=u.slice(),r=n.pxSign,o=t;return("start"===n.symbolRepeatDirection?r>0:r<0)&&(o=l-1-t),e[s.index]=f*(o-l/2+.5)+u[s.index],{x:e[0],y:e[1],scaleX:n.symbolScale[0],scaleY:n.symbolScale[1],rotation:n.rotation}}}function aF(t,e,n,r){var o=t.__pictorialBundle,i=t.__pictorialMainPath;i?vF(i,null,{x:n.pathPosition[0],y:n.pathPosition[1],scaleX:n.symbolScale[0],scaleY:n.symbolScale[1],rotation:n.rotation},n,r):(i=t.__pictorialMainPath=oF(n),o.add(i),vF(i,{x:n.pathPosition[0],y:n.pathPosition[1],scaleX:0,scaleY:0,rotation:n.rotation},{scaleX:n.symbolScale[0],scaleY:n.symbolScale[1]},n,r))}function uF(t,e,n){var r=I({},e.barRectShape),o=t.__pictorialBarRect;o?vF(o,null,{shape:r},e,n):(o=t.__pictorialBarRect=new As({z2:2,shape:r,silent:!0,style:{stroke:"transparent",fill:"transparent",lineWidth:0}}),t.add(o))}function sF(t,e,n,o){if(n.symbolClip){var i=t.__pictorialClipPath,a=I({},n.clipShape),u=e.valueDim,s=n.animationModel,l=n.dataIndex;if(i)Qf(i,{shape:a},s,l);else{a[u.wh]=0,i=new As({shape:a}),t.__pictorialBundle.setClipPath(i),t.__pictorialClipPath=i;var c={};c[u.wh]=n.clipShape[u.wh],r[o?"updateProps":"initProps"](i,{shape:c},s,l)}}}function lF(t,e){var n=t.getItemModel(e);return n.getAnimationDelayParams=cF,n.isAnimationEnabled=fF,n}function cF(t){return{index:t.__pictorialAnimationIndex,count:t.__pictorialRepeatTimes}}function fF(){return this.parentModel.isAnimationEnabled()&&!!this.getShallow("animation")}function dF(t,e,n,r){var o=new _o,i=new _o;return o.add(i),o.__pictorialBundle=i,i.x=n.bundlePosition[0],i.y=n.bundlePosition[1],n.symbolRepeat?iF(o,e,n):aF(o,e,n),uF(o,n,r),sF(o,e,n,r),o.__pictorialShapeStr=gF(t,n),o.__pictorialSymbolMeta=n,o}function hF(t,e,n){var r=n.animationModel,o=n.dataIndex,i=t.__pictorialBundle;Qf(i,{x:n.bundlePosition[0],y:n.bundlePosition[1]},r,o),n.symbolRepeat?iF(t,e,n,!0):aF(t,e,n,!0),uF(t,n,!0),sF(t,e,n,!0)}function pF(t,e,n,r){var o=r.__pictorialBarRect;o&&o.removeTextContent();var i=[];mF(r,function(t){i.push(t)}),r.__pictorialMainPath&&i.push(r.__pictorialMainPath),r.__pictorialClipPath&&(n=null),z(i,function(t){ed(t,{scaleX:0,scaleY:0},n,e,function(){r.parent&&r.parent.remove(r)})}),t.setItemGraphicEl(e,null)}function gF(t,e){return[t.getItemVisual(e.dataIndex,"symbol")||"none",!!e.symbolRepeat,!!e.symbolClip].join(":")}function mF(t,e,n){z(t.__pictorialBundle.children(),function(r){r!==t.__pictorialBarRect&&e.call(n,r)})}function vF(t,e,n,o,i,a){e&&t.attr(e),o.symbolClip&&!i?n&&t.attr(n):n&&r[i?"updateProps":"initProps"](t,n,o.animationModel,o.dataIndex,a)}function yF(t,e,n){var r=n.dataIndex,o=n.itemModel,i=o.getModel("emphasis"),a=i.getModel("itemStyle").getItemStyle(),u=o.getModel(["blur","itemStyle"]).getItemStyle(),s=o.getModel(["select","itemStyle"]).getItemStyle(),l=o.getShallow("cursor"),c=i.get("focus"),f=i.get("blurScope"),d=i.get("scale");mF(t,function(t){if(t instanceof xs){var e=t.style;t.useStyle(I({image:e.image,x:e.x,y:e.y,width:e.width,height:e.height},n.style))}else t.useStyle(n.style);var r=t.ensureState("emphasis");r.style=a,d&&(r.scaleX=1.1*t.scaleX,r.scaleY=1.1*t.scaleY),t.ensureState("blur").style=u,t.ensureState("select").style=s,l&&(t.cursor=l),t.z2=n.z2});var h=e.valueDim.posDesc[+(n.boundingLength>0)],p=t.__pictorialBarRect;_d(p,Sd(o),{labelFetcher:e.seriesModel,labelDataIndex:r,defaultText:UM(e.seriesModel.getData(),r),inheritColor:n.style.fill,defaultOpacity:n.style.opacity,defaultOutsidePosition:h}),Gl(t,c,f)}function bF(t){var e=Math.round(t);return Math.abs(t-e)<1e-4?e:Math.ceil(t)}var xF=KH,wF=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n.hasSymbolVisual=!0,n.defaultSymbol="roundRect",n}return i(e,t),e.prototype.getInitialData=function(e){return e.stack=null,t.prototype.getInitialData.apply(this,arguments)},e.type="series.pictorialBar",e.dependencies=["grid"],e.defaultOption=Jd(ok.defaultOption,{symbol:"circle",symbolSize:null,symbolRotate:null,symbolPosition:null,symbolOffset:null,symbolMargin:null,symbolRepeat:!1,symbolRepeatDirection:"end",symbolClip:!1,symbolBoundingData:null,symbolPatternSize:400,barGap:"-100%",progressive:0,emphasis:{scale:!1},select:{itemStyle:{borderColor:"#212121"}}}),e}(ok),_F=wF;function SF(t){t.registerChartView(xF),t.registerSeriesModel(_F),t.registerLayout(j(JT,"pictorialBar"))}var CF=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n._layers=[],n}return i(e,t),e.prototype.render=function(t,e,n){var r=t.getData(),o=this,i=this.group,a=t.getLayerSeries(),u=r.getLayout("layoutInfo"),s=u.rect,l=u.boundaryGap;function c(t){return t.name}i.x=0,i.y=s.y+l[0];var f=new GC(this._layersSeries||[],a,c,c),d=[];function h(e,n,u){var s=o._layers;if("remove"!==e){for(var l,c,f=[],h=[],p=a[n].indices,g=0;g<p.length;g++){var m=r.getItemLayout(p[g]),v=m.x,y=m.y0,b=m.y;f.push(v,y),h.push(v,y+b),l=r.getItemVisual(p[g],"style")}var x=r.getItemLayout(p[0]),w=t.getModel("label"),_=w.get("margin"),S=t.getModel("emphasis");if("add"===e){var C=d[n]=new _o;c=new pT({shape:{points:f,stackedOnPoints:h,smooth:.4,stackedOnSmooth:.4,smoothConstraint:!1},z2:0}),C.add(c),i.add(C),t.isAnimationEnabled()&&c.setClipPath(MF(c.getBoundingRect(),t,function(){c.removeClipPath()}))}else{C=s[u];c=C.childAt(0),i.add(C),d[n]=C,Qf(c,{shape:{points:f,stackedOnPoints:h}},t)}_d(c,Sd(t),{labelDataIndex:p[g-1],defaultText:r.getName(p[g-1]),inheritColor:l.fill},{normal:{verticalAlign:"middle"}}),c.setTextConfig({position:null,local:!0});var M=c.getTextContent();M&&(M.x=x.x-_,M.y=x.y0+x.y/2),c.useStyle(l),r.setItemGraphicEl(n,c),ql(c,t),Gl(c,S.get("focus"),S.get("blurScope"))}else i.remove(s[n])}f.add(G(h,this,"add")).update(G(h,this,"update")).remove(G(h,this,"remove")).execute(),this._layersSeries=a,this._layers=d},e.type="themeRiver",e}(Wv);function MF(t,e,n){var r=new As({shape:{x:t.x-10,y:t.y-10,width:0,height:t.height+20}});return td(r,{shape:{x:t.x-50,width:t.width+100,height:t.height+20}},e,n),r}var TF=CF,kF=2,DF=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n.useColorPaletteOnData=!0,n}return i(e,t),e.prototype.init=function(e){t.prototype.init.apply(this,arguments),this.legendVisualProvider=new $k(G(this.getData,this),G(this.getRawData,this))},e.prototype.fixData=function(t){var e=t.length,n={},r=Bi(t,function(t){return n.hasOwnProperty(t[0]+"")||(n[t[0]+""]=-1),t[2]}),o=[];r.buckets.each(function(t,e){o.push({name:e,dataList:t})});for(var i=o.length,a=0;a<i;++a){for(var u=o[a].name,s=0;s<o[a].dataList.length;++s){var l=o[a].dataList[s][0]+"";n[l]=a}for(var l in n)n.hasOwnProperty(l)&&n[l]!==a&&(n[l]=a,t[e]=[l,0,u],e++)}return t},e.prototype.getInitialData=function(t,e){for(var n=this.getReferringComponents("singleAxis",Li).models[0],r=n.get("type"),o=H(t.data,function(t){return void 0!==t[2]}),i=this.fixData(o||[]),a=[],u=this.nameMap=mt(),s=0,l=0;l<i.length;++l)a.push(i[l][kF]),u.get(i[l][kF])||(u.set(i[l][kF],s),s++);var c=AM(i,{coordDimensions:["single"],dimensionsDefine:[{name:"time",type:YC(r)},{name:"value",type:"float"},{name:"name",type:"ordinal"}],encodeDefine:{single:0,value:1,itemName:2}}),f=new CM(c,this);return f.initData(i),f},e.prototype.getLayerSeries=function(){for(var t=this.getData(),e=t.count(),n=[],r=0;r<e;++r)n[r]=r;var o=t.mapDimension("single"),i=Bi(n,function(e){return t.get("name",e)}),a=[];return i.buckets.each(function(e,n){e.sort(function(e,n){return t.get(o,e)-t.get(o,n)}),a.push({name:n,indices:e})}),a},e.prototype.getAxisTooltipData=function(t,e,n){X(t)||(t=t?[t]:[]);for(var r,o=this.getData(),i=this.getLayerSeries(),a=[],u=i.length,s=0;s<u;++s){for(var l=Number.MAX_VALUE,c=-1,f=i[s].indices.length,d=0;d<f;++d){var h=o.get(t[0],i[s].indices[d]),p=Math.abs(h-e);p<=l&&(r=h,l=p,c=i[s].indices[d])}a.push(c)}return{dataIndices:a,nestestValue:r}},e.prototype.formatTooltip=function(t,e,n){var r=this.getData(),o=r.getName(t),i=r.get(r.mapDimension("value"),t);return rv("nameValue",{name:o,value:i})},e.type="series.themeRiver",e.dependencies=["singleAxis"],e.defaultOption={zlevel:0,z:2,coordinateSystem:"singleAxis",boundaryGap:["10%","10%"],singleAxisIndex:0,animationEasing:"linear",label:{margin:4,show:!0,position:"left",fontSize:11},emphasis:{label:{show:!0}}},e}(Iv),AF=DF;function IF(t,e){t.eachSeriesByType("themeRiver",function(t){var e=t.getData(),n=t.coordinateSystem,r={},o=n.getRect();r.rect=o;var i=t.get("boundaryGap"),a=n.getAxis();if(r.boundaryGap=i,"horizontal"===a.orient){i[0]=Ro(i[0],o.height),i[1]=Ro(i[1],o.height);var u=o.height-i[0]-i[1];OF(e,t,u)}else{i[0]=Ro(i[0],o.width),i[1]=Ro(i[1],o.width);var s=o.width-i[0]-i[1];OF(e,t,s)}e.setLayout("layoutInfo",r)})}function OF(t,e,n){if(t.count())for(var r,o=e.coordinateSystem,i=e.getLayerSeries(),a=t.mapDimension("single"),u=t.mapDimension("value"),s=B(i,function(e){return B(e.indices,function(e){var n=o.dataToPoint(t.get(a,e));return n[1]=t.get(u,e),n})}),l=LF(s),c=l.y0,f=n/l.max,d=i.length,h=i[0].indices.length,p=0;p<h;++p){r=c[p]*f,t.setItemLayout(i[0].indices[p],{layerIndex:0,x:s[0][p][0],y0:r,y:s[0][p][1]*f});for(var g=1;g<d;++g)r+=s[g-1][p][1]*f,t.setItemLayout(i[g].indices[p],{layerIndex:g,x:s[g][p][0],y0:r,y:s[g][p][1]*f})}}function LF(t){for(var e=t.length,n=t[0].length,r=[],o=[],i=0,a=0;a<n;++a){for(var u=0,s=0;s<e;++s)u+=t[s][a][1];u>i&&(i=u),r.push(u)}for(var l=0;l<n;++l)o[l]=(i-r[l])/2;i=0;for(var c=0;c<n;++c){var f=r[c]+o[c];f>i&&(i=f)}return{y0:o,max:i}}function EF(t){t.registerChartView(TF),t.registerSeriesModel(AF),t.registerLayout(IF),t.registerProcessor(Bk("themeRiver"))}var NF=2,RF=4,PF=function(t){function e(e,n,r,o){var i=t.call(this)||this;i.z2=NF,i.textConfig={inside:!0},Gs(i).seriesIndex=n.seriesIndex;var a=new Us({z2:RF,silent:e.getModel().get(["label","silent"])});return i.setTextContent(a),i.updateData(!0,e,n,r,o),i}return i(e,t),e.prototype.updateData=function(t,e,n,r,o){this.node=e,e.piece=this,n=n||this._seriesModel,r=r||this._ecModel;var i=this;Gs(i).dataIndex=e.dataIndex;var a=e.getModel(),u=a.getModel("emphasis"),s=e.getLayout(),l=I({},s);l.label=null;var c=e.getVisual("style");c.lineJoin="bevel";var f=e.getVisual("decal");f&&(c.decal=xx(f,o));var d=Gk(a.getModel("itemStyle"),l);I(l,d),z(Ks,function(t){var e=i.ensureState(t),n=a.getModel([t,"itemStyle"]);e.style=n.getItemStyle();var r=Gk(n,l);r&&(e.shape=r)}),t?(i.setShape(l),i.shape.r=s.r0,Qf(i,{shape:{r:s.r}},n,e.dataIndex)):Qf(i,{shape:l},n),i.useStyle(c),this._updateLabel(n);var h=a.getShallow("cursor");h&&i.attr("cursor",h),this._seriesModel=n||this._seriesModel,this._ecModel=r||this._ecModel;var p=u.get("focus"),g="ancestor"===p?e.getAncestorsIndices():"descendant"===p?e.getDescendantIndices():p;Gl(this,g,u.get("blurScope"))},e.prototype._updateLabel=function(t){var e=this,n=this.node.getModel(),r=n.getModel("label"),o=this.node.getLayout(),i=o.endAngle-o.startAngle,a=(o.startAngle+o.endAngle)/2,u=Math.cos(a),s=Math.sin(a),l=this,c=l.getTextContent(),f=this.node.dataIndex,d=r.get("minAngle")/180*Math.PI,h=r.get("show")&&!(null!=d&&Math.abs(i)<d);function p(t,e){var n=t.get(e);return null==n?r.get(e):n}c.ignore=!h,z(Js,function(r){var i="normal"===r?n.getModel("label"):n.getModel([r,"label"]),d="normal"===r,h=d?c:c.ensureState(r),g=t.getFormattedLabel(f,r);d&&(g=g||e.node.name),h.style=Cd(i,{},null,"normal"!==r,!0),g&&(h.style.text=g);var m=i.get("show");null==m||d||(h.ignore=!m);var v,y=p(i,"position"),b=d?l:l.states[r],x=b.style.fill;b.textConfig={outsideFill:"inherit"===i.get("color")?x:null,inside:"outside"!==y};var w=p(i,"distance")||0,_=p(i,"align");"outside"===y?(v=o.r+w,_=a>Math.PI/2?"right":"left"):_&&"center"!==_?"left"===_?(v=o.r0+w,a>Math.PI/2&&(_="right")):"right"===_&&(v=o.r-w,a>Math.PI/2&&(_="left")):(v=(o.r+o.r0)/2,_="center"),h.style.align=_,h.style.verticalAlign=p(i,"verticalAlign")||"middle",h.x=v*u+o.cx,h.y=v*s+o.cy;var S=p(i,"rotate"),C=0;"radial"===S?(C=-a,C<-Math.PI/2&&(C+=Math.PI)):"tangential"===S?(C=Math.PI/2-a,C>Math.PI/2?C-=Math.PI:C<-Math.PI/2&&(C+=Math.PI)):"number"===typeof S&&(C=S*Math.PI/180),h.rotation=C}),c.dirtyStyle()},e}(Xc),zF=PF,BF="sunburstRootToNode",VF="sunburstHighlight",HF="sunburstUnhighlight";function FF(t){t.registerAction({type:BF,update:"updateView"},function(t,e){function n(e,n){var r=eE(t,[BF],e);if(r){var o=e.getViewRoot();o&&(t.direction=rE(o,r.node)?"rollUp":"drillDown"),e.resetViewRoot(r.node)}}e.eachComponent({mainType:"series",subType:"sunburst",query:t},n)}),t.registerAction({type:VF,update:"none"},function(t,e,n){function r(e){var n=eE(t,[VF],e);n&&(t.dataIndex=n.node.dataIndex)}t=I({},t),e.eachComponent({mainType:"series",subType:"sunburst",query:t},r),n.dispatchAction(I(t,{type:"highlight"}))}),t.registerAction({type:HF,update:"updateView"},function(t,e,n){t=I({},t),n.dispatchAction(I(t,{type:"downplay"}))})}var WF=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n}return i(e,t),e.prototype.render=function(t,e,n,r){var o=this;this.seriesModel=t,this.api=n,this.ecModel=e;var i=t.getData(),a=i.tree.root,u=t.getViewRoot(),s=this.group,l=t.get("renderLabelForZeroData"),c=[];u.eachNode(function(t){c.push(t)});var f=this._oldChildren||[];function d(t,e){function n(t){return t.getId()}function r(n,r){var o=null==n?null:t[n],i=null==r?null:e[r];h(o,i)}0===t.length&&0===e.length||new GC(e,t,n,n).add(r).update(r).remove(j(r,null)).execute()}function h(r,o){if(l||!r||r.getValue()||(r=null),r!==a&&o!==a)if(o&&o.piece)r?(o.piece.updateData(!1,r,t,e,n),i.setItemGraphicEl(r.dataIndex,o.piece)):p(o);else if(r){var u=new zF(r,t,e,n);s.add(u),i.setItemGraphicEl(r.dataIndex,u)}}function p(t){t&&t.piece&&(s.remove(t.piece),t.piece=null)}function g(r,i){i.depth>0?(o.virtualPiece?o.virtualPiece.updateData(!1,r,t,e,n):(o.virtualPiece=new zF(r,t,e,n),s.add(o.virtualPiece)),i.piece.off("click"),o.virtualPiece.on("click",function(t){o._rootToNode(i.parentNode)})):o.virtualPiece&&(s.remove(o.virtualPiece),o.virtualPiece=null)}d(c,f),g(a,u),this._initEvents(),this._oldChildren=c},e.prototype._initEvents=function(){var t=this;this.group.off("click"),this.group.on("click",function(e){var n=!1,r=t.seriesModel.getViewRoot();r.eachNode(function(r){if(!n&&r.piece&&r.piece===e.target){var o=r.getModel().get("nodeClick");if("rootToNode"===o)t._rootToNode(r);else if("link"===o){var i=r.getModel(),a=i.get("link");if(a){var u=i.get("target",!0)||"_blank";np(a,u)}}n=!0}})})},e.prototype._rootToNode=function(t){t!==this.seriesModel.getViewRoot()&&this.api.dispatchAction({type:BF,from:this.uid,seriesId:this.seriesModel.id,targetNode:t})},e.prototype.containPoint=function(t,e){var n=e.getData(),r=n.getItemLayout(0);if(r){var o=t[0]-r.cx,i=t[1]-r.cy,a=Math.sqrt(o*o+i*i);return a<=r.r&&a>=r.r0}},e.type="sunburst",e}(Wv),UF=WF,GF=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n.ignoreStyleOnData=!0,n}return i(e,t),e.prototype.getInitialData=function(t,e){var n={name:t.name,children:t.data};jF(n);var r=B(t.levels||[],function(t){return new Yd(t,this,e)},this),o=tE.createTree(n,this,i);function i(t){t.wrapMethod("getItemModel",function(t,e){var n=o.getNodeByDataIndex(e),i=r[n.depth];return i&&(t.parentModel=i),t})}return o.data},e.prototype.optionUpdated=function(){this.resetViewRoot()},e.prototype.getDataParams=function(e){var n=t.prototype.getDataParams.apply(this,arguments),r=this.getData().tree.getNodeByDataIndex(e);return n.treePathInfo=oE(r,this),n},e.prototype.getViewRoot=function(){return this._viewRoot},e.prototype.resetViewRoot=function(t){t?this._viewRoot=t:t=this._viewRoot;var e=this.getRawData().tree.root;t&&(t===e||e.contains(t))||(this._viewRoot=e)},e.prototype.enableAriaDecal=function(){vE(this)},e.type="series.sunburst",e.defaultOption={zlevel:0,z:2,center:["50%","50%"],radius:[0,"75%"],clockwise:!0,startAngle:90,minAngle:0,stillShowZeroSum:!0,nodeClick:"rootToNode",renderLabelForZeroData:!1,label:{rotate:"radial",show:!0,opacity:1,align:"center",position:"inside",distance:5,silent:!0},itemStyle:{borderWidth:1,borderColor:"white",borderType:"solid",shadowBlur:0,shadowColor:"rgba(0, 0, 0, 0.2)",shadowOffsetX:0,shadowOffsetY:0,opacity:1},emphasis:{focus:"descendant"},blur:{itemStyle:{opacity:.2},label:{opacity:.1}},animationType:"expansion",animationDuration:1e3,animationDurationUpdate:500,data:[],levels:[],sort:"desc"},e}(Iv);function jF(t){var e=0;z(t.children,function(t){jF(t);var n=t.value;X(n)&&(n=n[0]),e+=n});var n=t.value;X(n)&&(n=n[0]),(null==n||isNaN(n))&&(n=e),n<0&&(n=0),X(t.value)?t.value[0]=n:t.value=n}var XF=GF,YF=Math.PI/180;function qF(t,e,n){e.eachSeriesByType(t,function(t){var e=t.get("center"),r=t.get("radius");X(r)||(r=[0,r]),X(e)||(e=[e,e]);var o=n.getWidth(),i=n.getHeight(),a=Math.min(o,i),u=Ro(e[0],o),s=Ro(e[1],i),l=Ro(r[0],a/2),c=Ro(r[1],a/2),f=-t.get("startAngle")*YF,d=t.get("minAngle")*YF,h=t.getData().tree.root,p=t.getViewRoot(),g=p.depth,m=t.get("sort");null!=m&&ZF(p,m);var v=0;z(p.children,function(t){!isNaN(t.getValue())&&v++});var y=p.getValue(),b=Math.PI/(y||v)*2,x=p.depth>0,w=p.height-(x?-1:1),_=(c-l)/(w||1),S=t.get("clockwise"),C=t.get("stillShowZeroSum"),M=S?1:-1,T=function(t,e){if(t){var n=e;if(t!==h){var r=t.getValue(),o=0===y&&C?b:r*b;o<d&&(o=d),n=e+M*o;var i=t.depth-g-(x?-1:1),c=l+_*i,f=l+_*(i+1),p=t.getModel();null!=p.get("r0")&&(c=Ro(p.get("r0"),a/2)),null!=p.get("r")&&(f=Ro(p.get("r"),a/2)),t.setLayout({angle:o,startAngle:e,endAngle:n,clockwise:S,cx:u,cy:s,r0:c,r:f})}if(t.children&&t.children.length){var m=0;z(t.children,function(t){m+=T(t,e+m)})}return n-e}};if(x){var k=l,D=l+_,A=2*Math.PI;h.setLayout({angle:A,startAngle:f,endAngle:f+A,clockwise:S,cx:u,cy:s,r0:k,r:D})}T(p,f)})}function ZF(t,e){var n=t.children||[];t.children=$F(n,e),n.length&&z(t.children,function(t){ZF(t,e)})}function $F(t,e){if("function"===typeof e){var n=B(t,function(t,e){var n=t.getValue();return{params:{depth:t.depth,height:t.height,dataIndex:t.dataIndex,getValue:function(){return n}},index:e}});return n.sort(function(t,n){return e(t.params,n.params)}),B(n,function(e){return t[e.index]})}var r="asc"===e;return t.sort(function(t,e){var n=(t.getValue()-e.getValue())*(r?1:-1);return 0===n?(t.dataIndex-e.dataIndex)*(r?-1:1):n})}function KF(t){var e={};function n(t,n,r){var o=t;while(o&&o.depth>1)o=o.parentNode;var i=n.getColorFromPalette(o.name||o.dataIndex+"",e);return t.depth>1&&"string"===typeof i&&(i=yn(i,(t.depth-1)/(r-1)*.5)),i}t.eachSeriesByType("sunburst",function(t){var e=t.getData(),r=e.tree;r.eachNode(function(o){var i=o.getModel(),a=i.getModel("itemStyle").getItemStyle();a.fill||(a.fill=n(o,t,r.root.height));var u=e.ensureUniqueItemVisual(o.dataIndex,"style");I(u,a)})})}function JF(t){t.registerChartView(UF),t.registerSeriesModel(XF),t.registerLayout(j(qF,"sunburst")),t.registerProcessor(j(Bk,"sunburst")),t.registerVisual(KF),FF(t)}function QF(t,e){return e=e||[0,0],B(["x","y"],function(n,r){var o=this.getAxis(n),i=e[r],a=t[r]/2;return"category"===o.type?o.getBandWidth():Math.abs(o.dataToCoord(i-a)-o.dataToCoord(i+a))},this)}function tW(t){var e=t.master.getRect();return{coordSys:{type:"cartesian2d",x:e.x,y:e.y,width:e.width,height:e.height},api:{coord:function(e){return t.dataToPoint(e)},size:G(QF,t)}}}function eW(t,e){return e=e||[0,0],B([0,1],function(n){var r=e[n],o=t[n]/2,i=[],a=[];return i[n]=r-o,a[n]=r+o,i[1-n]=a[1-n]=e[1-n],Math.abs(this.dataToPoint(i)[n]-this.dataToPoint(a)[n])},this)}function nW(t){var e=t.getBoundingRect();return{coordSys:{type:"geo",x:e.x,y:e.y,width:e.width,height:e.height,zoom:t.getZoom()},api:{coord:function(e){return t.dataToPoint(e)},size:G(eW,t)}}}function rW(t,e){var n=this.getAxis(),r=e instanceof Array?e[0]:e,o=(t instanceof Array?t[0]:t)/2;return"category"===n.type?n.getBandWidth():Math.abs(n.dataToCoord(r-o)-n.dataToCoord(r+o))}function oW(t){var e=t.getRect();return{coordSys:{type:"singleAxis",x:e.x,y:e.y,width:e.width,height:e.height},api:{coord:function(e){return t.dataToPoint(e)},size:G(rW,t)}}}function iW(t,e){return e=e||[0,0],B(["Radius","Angle"],function(n,r){var o="get"+n+"Axis",i=this[o](),a=e[r],u=t[r]/2,s="category"===i.type?i.getBandWidth():Math.abs(i.dataToCoord(a-u)-i.dataToCoord(a+u));return"Angle"===n&&(s=s*Math.PI/180),s},this)}function aW(t){var e=t.getRadiusAxis(),n=t.getAngleAxis(),r=e.getExtent();return r[0]>r[1]&&r.reverse(),{coordSys:{type:"polar",cx:t.cx,cy:t.cy,r:r[1],r0:r[0]},api:{coord:function(r){var o=e.dataToRadius(r[0]),i=n.dataToAngle(r[1]),a=t.coordToPoint([o,i]);return a.push(o,i*Math.PI/180),a},size:G(iW,t)}}}function uW(t){var e=t.getRect(),n=t.getRangeInfo();return{coordSys:{type:"calendar",x:e.x,y:e.y,width:e.width,height:e.height,cellWidth:t.getCellWidth(),cellHeight:t.getCellHeight(),rangeInfo:{start:n.start,end:n.end,weeks:n.weeks,dayCount:n.allDay}},api:{coord:function(e,n){return t.dataToPoint(e,n)}}}}function sW(t,e,n,r){return t&&(t.legacy||!1!==t.legacy&&!n&&!r&&"tspan"!==e&&("text"===e||bt(t,"text")))}function lW(t,e,n){var r,o,i,a=t;if("text"===e)i=a;else{i={},bt(a,"text")&&(i.text=a.text),bt(a,"rich")&&(i.rich=a.rich),bt(a,"textFill")&&(i.fill=a.textFill),bt(a,"textStroke")&&(i.stroke=a.textStroke),o={type:"text",style:i,silent:!0},r={};var u=bt(a,"textPosition");n?r.position=u?a.textPosition:"inside":u&&(r.position=a.textPosition),bt(a,"textPosition")&&(r.position=a.textPosition),bt(a,"textOffset")&&(r.offset=a.textOffset),bt(a,"textRotation")&&(r.rotation=a.textRotation),bt(a,"textDistance")&&(r.distance=a.textDistance)}return cW(i,t),z(i.rich,function(t){cW(t,t)}),{textConfig:r,textContent:o}}function cW(t,e){e&&(e.font=e.textFont||e.font,bt(e,"textStrokeWidth")&&(t.lineWidth=e.textStrokeWidth),bt(e,"textAlign")&&(t.align=e.textAlign),bt(e,"textVerticalAlign")&&(t.verticalAlign=e.textVerticalAlign),bt(e,"textLineHeight")&&(t.lineHeight=e.textLineHeight),bt(e,"textWidth")&&(t.width=e.textWidth),bt(e,"textHeight")&&(t.height=e.textHeight),bt(e,"textBackgroundColor")&&(t.backgroundColor=e.textBackgroundColor),bt(e,"textPadding")&&(t.padding=e.textPadding),bt(e,"textBorderColor")&&(t.borderColor=e.textBorderColor),bt(e,"textBorderWidth")&&(t.borderWidth=e.textBorderWidth),bt(e,"textBorderRadius")&&(t.borderRadius=e.textBorderRadius),bt(e,"textBoxShadowColor")&&(t.shadowColor=e.textBoxShadowColor),bt(e,"textBoxShadowBlur")&&(t.shadowBlur=e.textBoxShadowBlur),bt(e,"textBoxShadowOffsetX")&&(t.shadowOffsetX=e.textBoxShadowOffsetX),bt(e,"textBoxShadowOffsetY")&&(t.shadowOffsetY=e.textBoxShadowOffsetY))}function fW(t,e,n){var r=t;r.textPosition=r.textPosition||n.position||"inside",null!=n.offset&&(r.textOffset=n.offset),null!=n.rotation&&(r.textRotation=n.rotation),null!=n.distance&&(r.textDistance=n.distance);var o=r.textPosition.indexOf("inside")>=0,i=t.fill||"#000";dW(r,e);var a=null==r.textFill;return o?a&&(r.textFill=n.insideFill||"#fff",!r.textStroke&&n.insideStroke&&(r.textStroke=n.insideStroke),!r.textStroke&&(r.textStroke=i),null==r.textStrokeWidth&&(r.textStrokeWidth=2)):(a&&(r.textFill=t.fill||n.outsideFill||"#000"),!r.textStroke&&n.outsideStroke&&(r.textStroke=n.outsideStroke)),r.text=e.text,r.rich=e.rich,z(e.rich,function(t){dW(t,t)}),r}function dW(t,e){e&&(bt(e,"fill")&&(t.textFill=e.fill),bt(e,"stroke")&&(t.textStroke=e.fill),bt(e,"lineWidth")&&(t.textStrokeWidth=e.lineWidth),bt(e,"font")&&(t.font=e.font),bt(e,"fontStyle")&&(t.fontStyle=e.fontStyle),bt(e,"fontWeight")&&(t.fontWeight=e.fontWeight),bt(e,"fontSize")&&(t.fontSize=e.fontSize),bt(e,"fontFamily")&&(t.fontFamily=e.fontFamily),bt(e,"align")&&(t.textAlign=e.align),bt(e,"verticalAlign")&&(t.textVerticalAlign=e.verticalAlign),bt(e,"lineHeight")&&(t.textLineHeight=e.lineHeight),bt(e,"width")&&(t.textWidth=e.width),bt(e,"height")&&(t.textHeight=e.height),bt(e,"backgroundColor")&&(t.textBackgroundColor=e.backgroundColor),bt(e,"padding")&&(t.textPadding=e.padding),bt(e,"borderColor")&&(t.textBorderColor=e.borderColor),bt(e,"borderWidth")&&(t.textBorderWidth=e.borderWidth),bt(e,"borderRadius")&&(t.textBorderRadius=e.borderRadius),bt(e,"shadowColor")&&(t.textBoxShadowColor=e.shadowColor),bt(e,"shadowBlur")&&(t.textBoxShadowBlur=e.shadowBlur),bt(e,"shadowOffsetX")&&(t.textBoxShadowOffsetX=e.shadowOffsetX),bt(e,"shadowOffsetY")&&(t.textBoxShadowOffsetY=e.shadowOffsetY),bt(e,"textShadowColor")&&(t.textShadowColor=e.textShadowColor),bt(e,"textShadowBlur")&&(t.textShadowBlur=e.textShadowBlur),bt(e,"textShadowOffsetX")&&(t.textShadowOffsetX=e.textShadowOffsetX),bt(e,"textShadowOffsetY")&&(t.textShadowOffsetY=e.textShadowOffsetY))}var hW=Hu.CMD,pW=2*Math.PI,gW=["x","y"],mW=["width","height"],vW=[];function yW(t,e){return Math.abs(t-e)<1e-5}function bW(t){var e,n,r,o,i,a=t.data,u=t.len(),s=[],l=0,c=0,f=0,d=0;function h(t,n){e&&e.length>2&&s.push(e),e=[t,n]}function p(t,n,r,o){yW(t,r)&&yW(n,o)||e.push(t,n,r,o,r,o)}function g(t,n,r,o,i,a){var u=Math.abs(n-t),s=4*Math.tan(u/4)/3,l=n<t?-1:1,c=Math.cos(t),f=Math.sin(t),d=Math.cos(n),h=Math.sin(n),p=c*i+r,g=f*a+o,m=d*i+r,v=h*a+o,y=i*s*l,b=a*s*l;e.push(p-y*f,g+b*c,m+y*h,v-b*d,m,v)}for(var m=0;m<u;){var v=a[m++],y=1===m;switch(y&&(l=a[m],c=a[m+1],f=l,d=c,v!==hW.L&&v!==hW.C&&v!==hW.Q||(e=[f,d])),v){case hW.M:l=f=a[m++],c=d=a[m++],h(f,d);break;case hW.L:n=a[m++],r=a[m++],p(l,c,n,r),l=n,c=r;break;case hW.C:e.push(a[m++],a[m++],a[m++],a[m++],l=a[m++],c=a[m++]);break;case hW.Q:n=a[m++],r=a[m++],o=a[m++],i=a[m++],e.push(l+2/3*(n-l),c+2/3*(r-c),o+2/3*(n-o),i+2/3*(r-i),o,i),l=o,c=i;break;case hW.A:var b=a[m++],x=a[m++],w=a[m++],_=a[m++],S=a[m++],C=a[m++]+S;m+=1;var M=!a[m++];n=Math.cos(S)*w+b,r=Math.sin(S)*_+x,y?(f=n,d=r,h(f,d)):p(l,c,n,r),l=Math.cos(C)*w+b,c=Math.sin(C)*_+x;for(var T=(M?-1:1)*Math.PI/2,k=S;M?k>C:k<C;k+=T){var D=M?Math.max(k+T,C):Math.min(k+T,C);g(k,D,b,x,w,_)}break;case hW.R:f=l=a[m++],d=c=a[m++],n=f+a[m++],r=d+a[m++],h(n,d),p(n,d,n,r),p(n,r,f,r),p(f,r,f,d),p(f,d,n,d);break;case hW.Z:e&&p(l,c,f,d),l=f,c=d;break}}return e&&e.length>2&&s.push(e),s}function xW(t,e){var n=t.length,r=e.length;if(n===r)return[t,e];for(var o=n<r?t:e,i=Math.min(n,r),a=Math.abs(r-n)/6,u=(i-2)/6,s=Math.ceil(a/u)+1,l=[o[0],o[1]],c=a,f=[],d=[],h=2;h<i;){var p=o[h-2],g=o[h-1],m=o[h++],v=o[h++],y=o[h++],b=o[h++],x=o[h++],w=o[h++];if(c<=0)l.push(m,v,y,b,x,w);else{for(var _=Math.min(c,s-1)+1,S=1;S<=_;S++){var C=S/_;Za(p,m,y,x,C,f),Za(g,v,b,w,C,d),p=f[3],g=d[3],l.push(f[1],d[1],f[2],d[2],p,g),m=f[5],v=d[5],y=f[6],b=d[6]}c-=_-1}}return o===t?[l,e]:[t,l]}function wW(t,e){for(var n=t.length,r=t[n-2],o=t[n-1],i=[],a=0;a<e.length;)i[a++]=r,i[a++]=o;return i}function _W(t,e){for(var n,r,o,i=[],a=[],u=0;u<Math.max(t.length,e.length);u++){var s=t[u],l=e[u],c=void 0,f=void 0;s?l?(n=xW(s,l),c=n[0],f=n[1],r=c,o=f):(f=wW(o||s,s),c=s):(c=wW(r||l,l),f=l),i.push(c),a.push(f)}return[i,a]}function SW(t){for(var e=0,n=0,r=0,o=t.length,i=0,a=o-2;i<o;a=i,i+=2){var u=t[a],s=t[a+1],l=t[i],c=t[i+1],f=u*c-l*s;e+=f,n+=(u+l)*f,r+=(s+c)*f}return 0===e?[t[0]||0,t[1]||0]:[n/e/3,r/e/3,e]}function CW(t,e,n,r){for(var o=(t.length-2)/6,i=1/0,a=0,u=t.length,s=u-2,l=0;l<o;l++){for(var c=6*l,f=0,d=0;d<u;d+=2){var h=0===d?c:(c+d-2)%s+2,p=t[h]-n[0],g=t[h+1]-n[1],m=e[d]-r[0],v=e[d+1]-r[1],y=m-p,b=v-g;f+=y*y+b*b}f<i&&(i=f,a=l)}return a}function MW(t){for(var e=[],n=t.length,r=0;r<n;r+=2)e[r]=t[n-r-2],e[r+1]=t[n-r-1];return e}function TW(t,e,n,r){for(var o,i=[],a=0;a<t.length;a++){var u=t[a],s=e[a],l=SW(u),c=SW(s);null==o&&(o=l[2]<0!==c[2]<0);var f=[],d=[],h=0,p=1/0,g=[],m=u.length;o&&(u=MW(u));for(var v=6*CW(u,s,l,c),y=m-2,b=0;b<y;b+=2){var x=(v+b)%y+2;f[b+2]=u[x]-l[0],f[b+3]=u[x+1]-l[1]}if(f[0]=u[v]-l[0],f[1]=u[v+1]-l[1],n>0)for(var w=r/n,_=-r/2;_<=r/2;_+=w){var S=Math.sin(_),C=Math.cos(_),M=0;for(b=0;b<u.length;b+=2){var T=f[b],k=f[b+1],D=s[b]-c[0],A=s[b+1]-c[1],I=D*C-A*S,O=D*S+A*C;g[b]=I,g[b+1]=O;var L=I-T,E=O-k;M+=L*L+E*E}if(M<p){p=M,h=_;for(var N=0;N<g.length;N++)d[N]=g[N]}}else for(var R=0;R<m;R+=2)d[R]=s[R]-c[0],d[R+1]=s[R+1]-c[1];i.push({from:f,to:d,fromCp:l,toCp:c,rotation:-h})}return i}function kW(t,e,n){var r,o;if(!t||!e)return e;!t.path&&t.createPathProxy(),r=t.path,r.beginPath(),t.buildPath(r,t.shape),!e.path&&e.createPathProxy(),o=e.path,o===r&&(o=new Hu(!1)),o.beginPath(),LW(e)?e.__oldBuildPath(o,e.shape):e.buildPath(o,e.shape);var i=_W(bW(r),bW(o)),a=i[0],u=i[1],s=TW(a,u,10,Math.PI);AW(e,s,0);var l=n&&n.done,c=n&&n.aborted,f=n&&n.during;return e.animateTo({__morphT:1},O({during:function(t){e.dirtyShape(),f&&f(t)},done:function(){OW(e),e.createPathProxy(),e.dirtyShape(),l&&l()},aborted:function(){c&&c()}},n)),e}function DW(t){for(var e=this.__morphingData,n=this.__morphT,r=1-n,o=[],i=0;i<e.length;i++){var a=e[i],u=a.from,s=a.to,l=a.rotation*n,c=a.fromCp,f=a.toCp,d=Math.sin(l),h=Math.cos(l);Pt(o,c,f,n);for(var p=0;p<u.length;p+=2){var g=u[p],m=u[p+1],v=s[p],y=s[p+1],b=g*r+v*n,x=m*r+y*n;vW[p]=b*h-x*d+o[0],vW[p+1]=b*d+x*h+o[1]}for(p=0;p<u.length;)0===p&&t.moveTo(vW[p++],vW[p++]),t.bezierCurveTo(vW[p++],vW[p++],vW[p++],vW[p++],vW[p++],vW[p++])}}function AW(t,e,n){if(LW(t))IW(t,e,n);else{var r=t;r.__oldBuildPath=r.buildPath,r.buildPath=DW,IW(r,e,n)}}function IW(t,e,n){t.__morphingData=e,t.__morphT=n}function OW(t){LW(t)&&(t.buildPath=t.__oldBuildPath,t.__oldBuildPath=t.__morphingData=null)}function LW(t){return null!=t.__oldBuildPath}function EW(t){return!!t.__combiningSubList}function NW(t){return LW(t)||EW(t)}function RW(t,e,n,r){for(var o=[],i=0,a=0;a<t.length;a++){var u=t[a];if(EW(u)){for(var s=u.__combiningSubList,l=0;l<s.length;l++)o.push(s[l]);i+=s.length}else o.push(u),i++}if(i){var c=n?n.dividingMethod:null,f=GW(e,i,c);ct(f.length===i);var d=n&&n.done,h=n&&n.aborted,p=n&&n.during,g=0,m=!1,v=O({during:function(t){p&&p(t)},done:function(){g++,g===f.length&&(zW(e),d&&d())},aborted:function(){m||(m=!0,h&&h())}},n);for(a=0;a<i;a++){var y=o[a],b=f[a];r&&r(e,b,!0),kW(y,b,v)}return PW(e,f),{fromIndividuals:o,toIndividuals:f,count:i}}}function PW(t,e){if(EW(t))BW(t,e);else{var n=t;BW(n,e),n.__oldAddSelfToZr=t.addSelfToZr,n.__oldRemoveSelfFromZr=t.removeSelfFromZr,n.addSelfToZr=VW,n.removeSelfFromZr=FW,n.__oldBuildPath=n.buildPath,n.buildPath=xt,n.childrenRef=WW}}function zW(t){if(EW(t)){var e=t;BW(e,null),e.addSelfToZr=e.__oldAddSelfToZr,e.removeSelfFromZr=e.__oldRemoveSelfFromZr,e.buildPath=e.__oldBuildPath,e.childrenRef=e.__combiningSubList=e.__oldAddSelfToZr=e.__oldRemoveSelfFromZr=e.__oldBuildPath=null}}function BW(t,e){if(t.__combiningSubList!==e){if(HW(t,"removeSelfFromZr"),t.__combiningSubList=e,e)for(var n=0;n<e.length;n++)e[n].parent=t;HW(t,"addSelfToZr")}}function VW(t){this.__oldAddSelfToZr(t),HW(this,"addSelfToZr")}function HW(t,e){var n=t.__combiningSubList,r=t.__zr;if(n&&r)for(var o=0;o<n.length;o++){var i=n[o];i[e](r)}}function FW(t){this.__oldRemoveSelfFromZr(t);for(var e=this.__combiningSubList,n=0;n<e.length;n++){var r=e[n];r.removeSelfFromZr(t)}}function WW(){return this.__combiningSubList}function UW(t,e,n,r){var o,i=e.length,a=n?n.dividingMethod:null,u=!1;if(EW(t)){var s=t.__combiningSubList;s.length===i?o=s:(o=GW(t,i,a),u=!0)}else o=GW(t,i,a),u=!0;ct(o.length===i);for(var l=0;l<i;l++)u&&r&&r(t,o[l],!1),kW(o[l],e[l],n);return{fromIndividuals:o,toIndividuals:e,count:i}}function GW(t,e,n){return"duplicate"===n?XW(t,e):jW(t,e)}function jW(t,e){var n=[];if(e<=0)return n;if(1===e)return XW(t,e);if(t instanceof As)for(var r=t.shape,o=r.height>r.width?1:0,i=mW[o],a=gW[o],u=r[i]/e,s=r[a],l=0;l<e;l++,s+=u){var c={x:r.x,y:r.y,width:r.width,height:r.height};c[a]=s,c[i]=l<e-1?u:r[a]+r[i]-s;var f=new As({shape:c});n.push(f)}else{if(!(t instanceof Xc))return XW(t,e);r=t.shape;var d=r.clockwise,h=r.startAngle,p=r.endAngle,g=YW(h,r.endAngle,d),m=(g-h)/e,v=h;for(l=0;l<e;l++,v+=m){f=new Xc({shape:{cx:r.cx,cy:r.cy,r:r.r,r0:r.r0,clockwise:d,startAngle:v,endAngle:l===e-1?p:v+m}});n.push(f)}}return n}function XW(t,e){var n=[];if(e<=0)return n;for(var r=t.constructor,o=0;o<e;o++){var i=new r({shape:k(t.shape)});n.push(i)}return n}function YW(t,e,n){return e+pW*Math[n?"ceil":"floor"]((t-e)/pW)}var qW=Di(),ZW={x:1,y:1,scaleX:1,scaleY:1,originX:1,originY:1,rotation:1},$W=(W(ZW).join(", "),{color:"fill",borderColor:"stroke"}),KW={symbol:1,symbolSize:1,symbolKeepAspect:1,legendIcon:1,visualMeta:1,liftZ:1,decal:1},JW="emphasis",QW="normal",tU="blur",eU="select",nU=[QW,JW,tU,eU],rU={normal:["itemStyle"],emphasis:[JW,"itemStyle"],blur:[tU,"itemStyle"],select:[eU,"itemStyle"]},oU={normal:["label"],emphasis:[JW,"label"],blur:[tU,"label"],select:[eU,"label"]},iU="e\0\0",aU={normal:{},emphasis:{},blur:{},select:{}},uU={position:["x","y"],scale:["scaleX","scaleY"],origin:["originX","originY"]},sU=new zr,lU={cartesian2d:tW,geo:nW,singleAxis:oW,polar:aW,calendar:uW},cU=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n}return i(e,t),e.prototype.optionUpdated=function(){this.currentZLevel=this.get("zlevel",!0),this.currentZ=this.get("z",!0)},e.prototype.getInitialData=function(t,e){return HM(this.getSource(),this)},e.prototype.getDataParams=function(e,n,r){var o=t.prototype.getDataParams.call(this,e,n);return r&&(o.info=qW(r).info),o},e.type="series.custom",e.dependencies=["grid","polar","geo","singleAxis","calendar"],e.defaultOption={coordinateSystem:"cartesian2d",zlevel:0,z:2,legendHoverLink:!0,clip:!1},e}(Iv),fU=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n}return i(e,t),e.prototype.render=function(t,e,n,r){var o=this._data,i=t.getData(),a=this.group,u=NU(t,i,e,n);o||a.removeAll();var s=t.__transientTransitionOpt;if(!s||null!=s.from&&null!=s.to){var l=new tG(t,s),c=s?"multiple":"oneToOne";new GC(o?o.getIndices():[],i.getIndices(),dU(o,c,s&&s.from),dU(i,c,s&&s.to),null,c).add(function(e){PU(n,null,e,u(e,r),t,a,i,null)}).remove(function(e){ZU(o.getItemGraphicEl(e),t,a)}).update(function(e,s){l.reset("oneToOne");var c=o.getItemGraphicEl(s);l.findAndAddFrom(c),l.hasFrom()&&(QU(c,a),c=null),PU(n,c,e,u(e,r),t,a,i,l),l.applyMorphing()}).updateManyToOne(function(e,s){l.reset("manyToOne");for(var c=0;c<s.length;c++){var f=o.getItemGraphicEl(s[c]);l.findAndAddFrom(f),QU(f,a)}PU(n,null,e,u(e,r),t,a,i,l),l.applyMorphing()}).updateOneToMany(function(e,s){l.reset("oneToMany");var c=e.length,f=o.getItemGraphicEl(s);l.findAndAddFrom(f),QU(f,a);for(var d=0;d<c;d++)PU(n,null,e[d],u(e[d],r),t,a,i,l);l.applyMorphing()}).execute()}else o&&o.each(function(e){ZU(o.getItemGraphicEl(e),t,a)}),i.each(function(e){PU(n,null,e,u(e,r),t,a,i,null)});var f=t.get("clip",!0)?vT(t.coordinateSystem,!1,t):null;f?a.setClipPath(f):a.removeClipPath(),this._data=i},e.prototype.incrementalPrepareRender=function(t,e,n){this.group.removeAll(),this._data=null},e.prototype.incrementalRender=function(t,e,n,r,o){var i=e.getData(),a=NU(e,i,n,r);function u(t){t.isGroup||(t.incremental=!0,t.ensureState("emphasis").hoverLayer=!0)}for(var s=t.start;s<t.end;s++){var l=PU(null,null,s,a(s,o),e,this.group,i,null);l&&l.traverse(u)}},e.prototype.filterForExposedEvent=function(t,e,n,r){var o=e.element;if(null==o||n.name===o)return!0;while((n=n.__hostTarget||n.parent)&&n!==this.group)if(n.name===o)return!0;return!1},e.type="custom",e}(Wv);function dU(t,e,n){if(t){if("oneToOne"===e)return function(e,n){return t.getId(n)};var r=t.getDimension(n),o=t.getDimensionInfo(r);if(!o){var i="";0,eg(i)}var a=o.ordinalMeta;return function(e,n){var o=t.get(r,n);return a&&(o=a.categories[o]),null==o||ot(o)?e+"":"_ec_"+o}}}function hU(t){var e,n=t.type;if("path"===n){var r=t.shape,o=null!=r.width&&null!=r.height?{x:r.x||0,y:r.y||0,width:r.width,height:r.height}:null,i=$U(r);e=Gf(i,null,o,r.layout||"center"),qW(e).customPathData=i}else if("image"===n)e=new xs({}),qW(e).customImagePath=t.style.image;else if("text"===n)e=new Us({});else if("group"===n)e=new _o;else{if("compoundPath"===n)throw new Error('"compoundPath" is not supported yet.');var a=Uf(n);if(!a){var u="";0,eg(u)}e=new a}return qW(e).customGraphicType=n,e.name=t.name,e.z2EmphasisLift=1,e.z2SelectLift=1,e}function pU(t,e,n,r,o,i,a,u,s,l){var c={},f={},d=e.isGroup?null:e;!n&&vU("shape",e,null,o,c,s),yU("shape",o,f),!n&&vU("extra",e,null,o,c,s),yU("extra",o,f),!n&&bU(e,null,o,c,s),xU(o,f);var h=a&&a.normal.cfg;if(h&&e.setTextConfig(h),"text"===e.type&&i){var p=i;bt(p,"textFill")&&(p.fill=p.textFill),bt(p,"textStroke")&&(p.stroke=p.textStroke)}if(i){var g=void 0,m=JU(e)?i.decal:null;t&&m&&(m.dirty=!0,g=xx(m,t)),i.__decalPattern=g}return!n&&wU(e,null,o,i,c,s),d&&bt(o,"invisible")&&(d.invisible=o.invisible),n||(gU(e,f,i),mU(e,r,o,u,c,s)),bt(o,"silent")&&(e.silent=o.silent),bt(o,"ignore")&&(e.ignore=o.ignore),l||bt(o,"info")&&(qW(e).info=o.info),i?e.dirty():e.markRedraw(),n?f:null}function gU(t,e,n){var r=t.isGroup?null:t;if(r&&n){var o=n.__decalPattern,i=void 0;o&&(i=n.decal,n.decal=o),r.useStyle(n),o&&(n.decal=i);for(var a=r.animators,u=0;u<a.length;u++){var s=a[u];"style"===s.targetName&&s.changeTarget(r.style)}}e&&t.attr(e)}function mU(t,e,n,r,o,i){if(o){var a=n.during;qW(t).userDuring=a;var u=a?G(kU,{el:t,userDuring:a}):null,s={dataIndex:e,isFrom:!0,during:u};i?td(t,o,r,s):Qf(t,o,r,s)}}function vU(t,e,n,r,o,i){var a=r[t];if(a){var u,s=e[t],l=a.enterFrom;if(i&&l){!u&&(u=o[t]={});for(var c=W(l),f=0;f<c.length;f++){var d=c[f];u[d]=l[d]}}if(!i&&s&&(null==n||"shape"!==t))if(a.transition){!u&&(u=o[t]={});var h=ai(a.transition);for(f=0;f<h.length;f++){d=h[f];var p=s[d];0,u[d]=p}}else if(E(r.transition,t)>=0){!u&&(u=o[t]={});var g=W(s);for(f=0;f<g.length;f++){d=g[f],p=s[d];SU(a[d],p)&&(u[d]=p)}}var m=a.leaveTo;if(m){var v=CU(e),y=v[t]||(v[t]={}),b=W(m);for(f=0;f<b.length;f++){d=b[f];y[d]=m[d]}}}}function yU(t,e,n){var r=e[t];if(r)for(var o=n[t]={},i=W(r),a=0;a<i.length;a++){var u=i[a];o[u]=zn(r[u])}}function bU(t,e,n,r,o){var i=n.enterFrom;if(o&&i)for(var a=W(i),u=0;u<a.length;u++){var s=a[u];0,r[s]=i[s]}if(!o)if(e){var l=_U(e,t);EU(r,"x",l),EU(r,"y",l),EU(r,"scaleX",l),EU(r,"scaleY",l),EU(r,"originX",l),EU(r,"originY",l),EU(r,"rotation",l)}else if(n.transition){var c=ai(n.transition);for(u=0;u<c.length;u++){s=c[u];if("style"!==s&&"shape"!==s&&"extra"!==s){var f=t[s];0,r[s]=f}}}else EU(r,"x",t),EU(r,"y",t);var d=n.leaveTo;if(d){var h=CU(t),p=W(d);for(u=0;u<p.length;u++){s=p[u];0,h[s]=d[s]}}}function xU(t,e){OU(t,e,"position"),OU(t,e,"scale"),OU(t,e,"origin"),LU(t,e,"x"),LU(t,e,"y"),LU(t,e,"scaleX"),LU(t,e,"scaleY"),LU(t,e,"originX"),LU(t,e,"originY"),LU(t,e,"rotation")}function wU(t,e,n,r,o,i){if(r){var a,u=e||t,s=u.style,l=r.enterFrom;if(i&&l){var c=W(l);!a&&(a=o.style={});for(var f=0;f<c.length;f++){var d=c[f];a[d]=l[d]}}if(!i&&s)if(r.transition){var h=ai(r.transition);!a&&(a=o.style={});for(f=0;f<h.length;f++){d=h[f];var p=s[d];a[d]=p}}else if(t.getAnimationStyleProps&&E(n.transition,"style")>=0){var g=t.getAnimationStyleProps(),m=g?g.style:null;if(m){!a&&(a=o.style={});var v=W(r);for(f=0;f<v.length;f++){d=v[f];if(m[d]){p=s[d];a[d]=p}}}}var y=r.leaveTo;if(y){var b=W(y),x=CU(t),w=x.style||(x.style={});for(f=0;f<b.length;f++){d=b[f];w[d]=y[d]}}}}function _U(t,e){if(!t||t===e||t.parent===e.parent)return t;var n=sU.transform||(sU.transform=br([])),r=t.getComputedTransform();r?xr(n,r):br(n);var o=e.parent;return o&&o.getComputedTransform(),sU.originX=t.originX,sU.originY=t.originY,sU.parent=o,sU.decomposeTransform(),sU}function SU(t,e){return P(t)?t!==e:null!=t&&isFinite(t)}function CU(t){var e=qW(t);return e.leaveToProps||(e.leaveToProps={})}var MU={},TU={setTransform:function(t,e){return MU.el[t]=e,this},getTransform:function(t){return MU.el[t]},setShape:function(t,e){var n=MU.el.shape||(MU.el.shape={});return n[t]=e,MU.isShapeDirty=!0,this},getShape:function(t){var e=MU.el.shape;if(e)return e[t]},setStyle:function(t,e){var n=MU.el.style;return n&&(n[t]=e,MU.isStyleDirty=!0),this},getStyle:function(t){var e=MU.el.style;if(e)return e[t]},setExtra:function(t,e){var n=MU.el.extra||(MU.el.extra={});return n[t]=e,this},getExtra:function(t){var e=MU.el.extra;if(e)return e[t]}};function kU(){var t=this,e=t.el;if(e){var n=qW(e).userDuring,r=t.userDuring;n===r?(MU.el=e,MU.isShapeDirty=!1,MU.isStyleDirty=!1,r(TU),MU.isShapeDirty&&e.dirtyShape&&e.dirtyShape(),MU.isStyleDirty&&e.dirtyStyle&&e.dirtyStyle()):t.el=t.userDuring=null}}function DU(t,e,n,r,o,i,a){var u=e.isGroup?null:e,s=o&&o[t].cfg;if(u){var l=u.ensureState(t);if(!1===r){var c=u.getState(t);c&&(c.style=null)}else l.style=r||null;s&&(l.textConfig=s),Cl(u)}}function AU(t,e,n,r){if(!t.isGroup){var o=t,i=n.currentZ,a=n.currentZLevel;o.z=i,o.zlevel=a;var u=e.z2;null!=u&&(o.z2=u||0);for(var s=0;s<nU.length;s++)IU(o,e,nU[s])}}function IU(t,e,n){var r,o=n===QW,i=o?e:WU(e,n),a=i?i.z2:null;null!=a&&(r=o?t:t.ensureState(n),r.z2=a||0)}function OU(t,e,n,r){var o=t[n],i=uU[n];o&&(r?(e[i[0]]=r[i[0]],e[i[1]]=r[i[1]]):(e[i[0]]=o[0],e[i[1]]=o[1]))}function LU(t,e,n,r){null!=t[n]&&(e[n]=r?r[n]:t[n])}function EU(t,e,n){n&&(t[e]=n[e])}function NU(t,e,n,r){var o=t.get("renderItem"),i=t.coordinateSystem,a={};i&&(a=i.prepareCustoms?i.prepareCustoms(i):lU[i.type](i));for(var u,s,l=O({getWidth:r.getWidth,getHeight:r.getHeight,getZr:r.getZr,getDevicePixelRatio:r.getDevicePixelRatio,value:x,style:_,ordinalRawValue:w,styleEmphasis:S,visual:T,barLayout:k,currentSeriesIndices:D,font:A},a.api||{}),c={context:{},seriesId:t.id,seriesName:t.name,seriesIndex:t.seriesIndex,coordSys:a.coordSys,dataInsideLength:e.count(),encode:RU(t.getData())},f={},d={},h={},p={},g=0;g<nU.length;g++){var m=nU[g];h[m]=t.getModel(rU[m]),p[m]=t.getModel(oU[m])}function v(t){return t===u?s||(s=e.getItemModel(t)):e.getItemModel(t)}function y(t,n){return e.hasItemOption?t===u?f[n]||(f[n]=v(t).getModel(rU[n])):v(t).getModel(rU[n]):h[n]}function b(t,n){return e.hasItemOption?t===u?d[n]||(d[n]=v(t).getModel(oU[n])):v(t).getModel(oU[n]):p[n]}return function(t,n){return u=t,s=null,f={},d={},o&&o(O({dataIndexInside:t,dataIndex:e.getRawIndex(t),actionType:n?n.type:null},c),l)};function x(t,n){return null==n&&(n=u),e.get(e.getDimension(t||0),n)}function w(t,n){null==n&&(n=u);var r=e.getDimensionInfo(t||0);if(r){var o=e.get(r.name,n),i=r&&r.ordinalMeta;return i?i.categories[o]:o}}function _(n,r){null==r&&(r=u);var o=e.getItemVisual(r,"style"),i=o&&o.fill,a=o&&o.opacity,s=y(r,QW).getItemStyle();null!=i&&(s.fill=i),null!=a&&(s.opacity=a);var l={inheritColor:q(i)?i:"#000"},c=b(r,QW),f=Cd(c,null,l,!1,!0);f.text=c.getShallow("show")?at(t.getFormattedLabel(r,QW),UM(e,r)):null;var d=Md(c,l,!1);return M(n,s),s=fW(s,f,d),n&&C(s,n),s.legacy=!0,s}function S(n,r){null==r&&(r=u);var o=y(r,JW).getItemStyle(),i=b(r,JW),a=Cd(i,null,null,!0,!0);a.text=i.getShallow("show")?ut(t.getFormattedLabel(r,JW),t.getFormattedLabel(r,QW),UM(e,r)):null;var s=Md(i,null,!0);return M(n,o),o=fW(o,a,s),n&&C(o,n),o.legacy=!0,o}function C(t,e){for(var n in e)bt(e,n)&&(t[n]=e[n])}function M(t,e){t&&(t.textFill&&(e.textFill=t.textFill),t.textPosition&&(e.textPosition=t.textPosition))}function T(t,n){if(null==n&&(n=u),bt($W,t)){var r=e.getItemVisual(n,"style");return r?r[$W[t]]:null}if(bt(KW,t))return e.getItemVisual(n,t)}function k(t){if("cartesian2d"===i.type){var e=i.getBaseAxis();return XT(O({axis:e},t))}}function D(){return n.getCurrentSeriesIndices()}function A(t){return Ld(t,n)}}function RU(t){var e={};return z(t.dimensions,function(n,r){var o=t.getDimensionInfo(n);if(!o.isExtraCoord){var i=o.coordDim,a=e[i]=e[i]||[];a[o.coordDimIndex]=r}}),e}function PU(t,e,n,r,o,i,a,u){if(r)return e=zU(t,e,n,r,o,i,!0,u),e&&a.setItemGraphicEl(n,e),e&&Gl(e,r.focus,r.blurScope),e;QU(e,i)}function zU(t,e,n,r,o,i,a,u){var s=-1;e&&BU(e,r)&&(s=i.childrenRef().indexOf(e),e=null);var l=!e;e?e.clearStates():e=hU(r);var c=qW(e).canMorph=r.morph&&JU(e),f=c&&u&&u.hasFrom(),d=l&&!f;aU.normal.cfg=aU.normal.conOpt=aU.emphasis.cfg=aU.emphasis.conOpt=aU.blur.cfg=aU.blur.conOpt=aU.select.cfg=aU.select.conOpt=null,aU.isLegacy=!1,HU(e,n,r,o,d,aU),VU(e,n,r,o,d);var h=pU(t,e,f,n,r,r.style,aU,o,d,!1);f&&u.addTo(e,r,n,h);for(var p=0;p<nU.length;p++){var g=nU[p];if(g!==QW){var m=WU(r,g),v=UU(r,m,g);DU(g,e,m,v,aU,a,!1)}}return AU(e,r,o,aU),"group"===r.type&&GU(t,e,n,r,o,u),s>=0?i.replaceAt(e,s):i.add(e),e}function BU(t,e){var n=qW(t),r=e.type,o=e.shape,i=e.style;return null!=r&&r!==n.customGraphicType||"path"===r&&KU(o)&&$U(o)!==n.customPathData||"image"===r&&bt(i,"image")&&i.image!==n.customImagePath}function VU(t,e,n,r,o){var i=n.clipPath;if(!1===i)t&&t.getClipPath()&&t.removeClipPath();else if(i){var a=t.getClipPath();a&&BU(a,i)&&(a=null),a||(a=hU(i),t.setClipPath(a)),pU(null,a,null,e,i,null,null,r,o,!1)}}function HU(t,e,n,r,o,i){if(!t.isGroup){FU(n,null,i),FU(n,JW,i);var a=i.normal.conOpt,u=i.emphasis.conOpt,s=i.blur.conOpt,l=i.select.conOpt;if(null!=a||null!=u||null!=l||null!=s){var c=t.getTextContent();if(!1===a)c&&t.removeTextContent();else{a=i.normal.conOpt=a||{type:"text"},c?c.clearStates():(c=hU(a),t.setTextContent(c));var f=a&&a.style;pU(null,c,null,e,a,f,null,r,o,!0);for(var d=0;d<nU.length;d++){var h=nU[d];if(h!==QW){var p=i[h].conOpt;DU(h,c,p,UU(a,p,h),null,!1,!0)}}f?c.dirty():c.markRedraw()}}}}function FU(t,e,n){var r=e?WU(t,e):t,o=e?UU(t,r,JW):t.style,i=t.type,a=r?r.textConfig:null,u=t.textContent,s=u?e?WU(u,e):u:null;if(o&&(n.isLegacy||sW(o,i,!!a,!!s))){n.isLegacy=!0;var l=lW(o,i,!e);!a&&l.textConfig&&(a=l.textConfig),!s&&l.textContent&&(s=l.textContent)}if(!e&&s){var c=s;!c.type&&(c.type="text")}var f=e?n[e]:n.normal;f.cfg=a,f.conOpt=s}function WU(t,e){return e?t?t[e]:null:t}function UU(t,e,n){var r=e&&e.style;return null==r&&n===JW&&t&&(r=t.styleEmphasis),r}function GU(t,e,n,r,o,i){var a=r.children,u=a?a.length:0,s=r.$mergeChildren,l="byName"===s||r.diffChildrenByName,c=!1===s;if(u||l||c)if(l)jU({api:t,oldChildren:e.children()||[],newChildren:a||[],dataIndex:n,seriesModel:o,group:e,morphPreparation:i});else{c&&e.removeAll();for(var f=0;f<u;f++)a[f]&&zU(t,e.childAt(f),n,a[f],o,e,!1,i);for(var d=e.childCount()-1;d>=f;d--)ZU(e.childAt(d),o,e)}}function jU(t){new GC(t.oldChildren,t.newChildren,XU,XU,t).add(YU).update(YU).remove(qU).execute()}function XU(t,e){var n=t&&t.name;return null!=n?n:iU+e}function YU(t,e){var n=this.context,r=null!=t?n.newChildren[t]:null,o=null!=e?n.oldChildren[e]:null;zU(n.api,o,n.dataIndex,r,n.seriesModel,n.group,!1,n.morphPreparation)}function qU(t){var e=this.context,n=e.oldChildren[t];ZU(n,e.seriesModel,e.group)}function ZU(t,e,n){if(t){var r=qW(t).leaveToProps;r?Qf(t,r,e,{cb:function(){n.remove(t)}}):n.remove(t)}}function $U(t){return t&&(t.pathData||t.d)}function KU(t){return t&&(bt(t,"pathData")||bt(t,"d"))}function JU(t){return t&&t instanceof ds}function QU(t,e){t&&e.remove(t)}var tG=function(){function t(t,e){this._fromList=[],this._toList=[],this._toElOptionList=[],this._allPropsFinalList=[],this._toDataIndices=[],this._morphConfigList=[],this._seriesModel=t,this._transOpt=e}return t.prototype.hasFrom=function(){return!!this._fromList.length},t.prototype.findAndAddFrom=function(t){if(t&&(qW(t).canMorph&&this._fromList.push(t),t.isGroup))for(var e=t.childrenRef(),n=0;n<e.length;n++)this.findAndAddFrom(e[n])},t.prototype.addTo=function(t,e,n,r){t&&(this._toList.push(t),this._toElOptionList.push(e),this._toDataIndices.push(n),this._allPropsFinalList.push(r))},t.prototype.applyMorphing=function(){var t=this._type,e=this._fromList,n=this._toList,r=n.length,o=e.length;if(o&&r)if("oneToOne"===t)for(var i=0;i<r;i++)this._oneToOneForSingleTo(i,i);else if("manyToOne"===t)for(var a=Math.max(1,Math.floor(o/r)),u=(i=0,0);i<r;i++,u+=a){var s=i+1>=r?o-u:a;this._manyToOneForSingleTo(i,u>=o?null:u,s)}else if("oneToMany"===t)for(var l=Math.max(1,Math.floor(r/o)),c=0,f=0;c<r;c+=l,f++){var d=c+l>=r?r-c:l;this._oneToManyForSingleFrom(c,d,f>=o?null:f)}},t.prototype._oneToOneForSingleTo=function(t,e){var n=this._toList[t],r=this._toElOptionList[t],o=this._toDataIndices[t],i=this._allPropsFinalList[t],a=this._fromList[e],u=this._getOrCreateMorphConfig(o),s=u.duration;if(a&&EW(a)){if(gU(n,i,r.style),s){var l=RW([a],n,u,eG);this._processResultIndividuals(l,t,null)}}else{var c=s&&a&&(a!==n||NW(a))?a:null,f={};vU("shape",n,c,r,f,!1),vU("extra",n,c,r,f,!1),bU(n,c,r,f,!1),wU(n,c,r,r.style,f,!1),gU(n,i,r.style),c&&kW(c,n,u),mU(n,o,r,this._seriesModel,f,!1)}},t.prototype._manyToOneForSingleTo=function(t,e,n){var r=this._toList[t],o=this._toElOptionList[t],i=this._allPropsFinalList[t];gU(r,i,o.style);var a=this._getOrCreateMorphConfig(this._toDataIndices[t]);if(a.duration&&null!=e){for(var u=[],s=e;s<n;s++)u.push(this._fromList[s]);var l=RW(u,r,a,eG);this._processResultIndividuals(l,t,null)}},t.prototype._oneToManyForSingleFrom=function(t,e,n){for(var r=null==n?null:this._fromList[n],o=this._toList,i=[],a=t;a<e;a++){var u=o[a];gU(u,this._allPropsFinalList[a],this._toElOptionList[a].style),i.push(u)}var s=this._getOrCreateMorphConfig(this._toDataIndices[t]);if(s.duration&&r){var l=UW(r,i,s,eG);this._processResultIndividuals(l,t,e)}},t.prototype._processResultIndividuals=function(t,e,n){for(var r=null!=n,o=0;o<t.count;o++){var i=t.fromIndividuals[o],a=t.toIndividuals[o],u=e+(r?o:0),s=this._toElOptionList[u],l=this._toDataIndices[u],c={};bU(a,i,s,c,!1),wU(a,i,s,s.style,c,!1),mU(a,l,s,this._seriesModel,c,!1)}},t.prototype._getOrCreateMorphConfig=function(t){var e,n,r,o=this._morphConfigList,i=o[t];if(i)return i;var a=this._seriesModel,u=this._transOpt;if(a.isAnimationEnabled()){var s=void 0;if(a&&a.ecModel){var l=a.ecModel.getUpdatePayload();s=l&&l.animation}if(s)e=s.duration||0,n=s.easing||"cubicOut",r=s.delay||0;else{n=a.get("animationEasingUpdate");var c=a.get("animationDelayUpdate");r=Y(c)?c(t):c;var f=a.get("animationDurationUpdate");e=Y(f)?f(t):f}}return i={duration:e||0,delay:r,easing:n,dividingMethod:u?u.dividingMethod:null},o[t]=i,i},t.prototype.reset=function(t){this._type=t,this._fromList.length=this._toList.length=this._toElOptionList.length=this._allPropsFinalList.length=this._toDataIndices.length=0},t}();function eG(t,e,n){e.style=n?k(t.style):t.style,e.zlevel=t.zlevel,e.z=t.z,e.z2=t.z2}function nG(t){t.registerChartView(fU),t.registerSeriesModel(cU)}var rG=Di(),oG=k,iG=G,aG=function(){function t(){this._dragging=!1,this.animationThreshold=15}return t.prototype.render=function(t,e,n,r){var o=e.get("value"),i=e.get("status");if(this._axisModel=t,this._axisPointerModel=e,this._api=n,r||this._lastValue!==o||this._lastStatus!==i){this._lastValue=o,this._lastStatus=i;var a=this._group,u=this._handle;if(!i||"hide"===i)return a&&a.hide(),void(u&&u.hide());a&&a.show(),u&&u.show();var s={};this.makeElOption(s,o,t,e,n);var l=s.graphicKey;l!==this._lastGraphicKey&&this.clear(n),this._lastGraphicKey=l;var c=this._moveAnimation=this.determineAnimation(t,e);if(a){var f=j(uG,e,c);this.updatePointerEl(a,s,f),this.updateLabelEl(a,s,f,e)}else a=this._group=new _o,this.createPointerEl(a,s,t,e),this.createLabelEl(a,s,t,e),n.getZr().add(a);fG(a,e,!0),this._renderHandle(o)}},t.prototype.remove=function(t){this.clear(t)},t.prototype.dispose=function(t){this.clear(t)},t.prototype.determineAnimation=function(t,e){var n=e.get("animation"),r=t.axis,o="category"===r.type,i=e.get("snap");if(!i&&!o)return!1;if("auto"===n||null==n){var a=this.animationThreshold;if(o&&r.getBandWidth()>a)return!0;if(i){var u=II(t).seriesDataCount,s=r.getExtent();return Math.abs(s[0]-s[1])/u>a}return!1}return!0===n},t.prototype.makeElOption=function(t,e,n,r,o){},t.prototype.createPointerEl=function(t,e,n,o){var i=e.pointer;if(i){var a=rG(t).pointerEl=new r[i.type](oG(e.pointer));t.add(a)}},t.prototype.createLabelEl=function(t,e,n,r){if(e.label){var o=rG(t).labelEl=new Us(oG(e.label));t.add(o),lG(o,r)}},t.prototype.updatePointerEl=function(t,e,n){var r=rG(t).pointerEl;r&&e.pointer&&(r.setStyle(e.pointer.style),n(r,{shape:e.pointer.shape}))},t.prototype.updateLabelEl=function(t,e,n,r){var o=rG(t).labelEl;o&&(o.setStyle(e.label.style),n(o,{x:e.label.x,y:e.label.y}),lG(o,r))},t.prototype._renderHandle=function(t){if(!this._dragging&&this.updateHandleTransform){var e,n=this._axisPointerModel,r=this._api.getZr(),o=this._handle,i=n.getModel("handle"),a=n.get("status");if(!i.get("show")||!a||"hide"===a)return o&&r.remove(o),void(this._handle=null);this._handle||(e=!0,o=this._handle=hd(i.get("icon"),{cursor:"move",draggable:!0,onmousemove:function(t){fe(t.event)},onmousedown:iG(this._onHandleDragMove,this,0,0),drift:iG(this._onHandleDragMove,this),ondragend:iG(this._onHandleDragEnd,this)}),r.add(o)),fG(o,n,!1),o.setStyle(i.getItemStyle(null,["color","borderColor","borderWidth","opacity","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY"]));var u=i.get("size");X(u)||(u=[u,u]),o.scaleX=u[0]/2,o.scaleY=u[1]/2,Yv(this,"_doDispatchAxisPointer",i.get("throttle")||0,"fixRate"),this._moveHandleToValue(t,e)}},t.prototype._moveHandleToValue=function(t,e){uG(this._axisPointerModel,!e&&this._moveAnimation,this._handle,cG(this.getHandleTransform(t,this._axisModel,this._axisPointerModel)))},t.prototype._onHandleDragMove=function(t,e){var n=this._handle;if(n){this._dragging=!0;var r=this.updateHandleTransform(cG(n),[t,e],this._axisModel,this._axisPointerModel);this._payloadInfo=r,n.stopAnimation(),n.attr(cG(r)),rG(n).lastProp=null,this._doDispatchAxisPointer()}},t.prototype._doDispatchAxisPointer=function(){var t=this._handle;if(t){var e=this._payloadInfo,n=this._axisModel;this._api.dispatchAction({type:"updateAxisPointer",x:e.cursorPoint[0],y:e.cursorPoint[1],tooltipOption:e.tooltipOption,axesInfo:[{axisDim:n.axis.dim,axisIndex:n.componentIndex}]})}},t.prototype._onHandleDragEnd=function(){this._dragging=!1;var t=this._handle;if(t){var e=this._axisPointerModel.get("value");this._moveHandleToValue(e),this._api.dispatchAction({type:"hideTip"})}},t.prototype.clear=function(t){this._lastValue=null,this._lastStatus=null;var e=t.getZr(),n=this._group,r=this._handle;e&&n&&(this._lastGraphicKey=null,n&&e.remove(n),r&&e.remove(r),this._group=null,this._handle=null,this._payloadInfo=null)},t.prototype.doClear=function(){},t.prototype.buildLabel=function(t,e,n){return n=n||0,{x:t[n],y:t[1-n],width:e[n],height:e[1-n]}},t}();function uG(t,e,n,r){sG(rG(n).lastProp,r)||(rG(n).lastProp=r,e?Qf(n,r,t):(n.stopAnimation(),n.attr(r)))}function sG(t,e){if(K(t)&&K(e)){var n=!0;return z(e,function(e,r){n=n&&sG(t[r],e)}),!!n}return t===e}function lG(t,e){t[e.get(["label","show"])?"show":"hide"]()}function cG(t){return{x:t.x||0,y:t.y||0,rotation:t.rotation||0}}function fG(t,e,n){var r=e.get("z"),o=e.get("zlevel");t&&t.traverse(function(t){"group"!==t.type&&(null!=r&&(t.z=r),null!=o&&(t.zlevel=o),t.silent=n)})}var dG=aG;function hG(t){var e,n=t.get("type"),r=t.getModel(n+"Style");return"line"===n?(e=r.getLineStyle(),e.fill=null):"shadow"===n&&(e=r.getAreaStyle(),e.stroke=null),e}function pG(t,e,n,r,o){var i=n.get("value"),a=mG(i,e.axis,e.ecModel,n.get("seriesDataIndices"),{precision:n.get(["label","precision"]),formatter:n.get(["label","formatter"])}),u=n.getModel("label"),s=jh(u.get("padding")||0),l=u.getFont(),c=no(a,l),f=o.position,d=c.width+s[1]+s[3],h=c.height+s[0]+s[2],p=o.align;"right"===p&&(f[0]-=d),"center"===p&&(f[0]-=d/2);var g=o.verticalAlign;"bottom"===g&&(f[1]-=h),"middle"===g&&(f[1]-=h/2),gG(f,d,h,r);var m=u.get("backgroundColor");m&&"auto"!==m||(m=e.get(["axisLine","lineStyle","color"])),t.label={x:f[0],y:f[1],style:Cd(u,{text:a,font:l,fill:u.getTextColor(),padding:s,backgroundColor:m}),z2:10}}function gG(t,e,n,r){var o=r.getWidth(),i=r.getHeight();t[0]=Math.min(t[0]+e,o)-e,t[1]=Math.min(t[1]+n,i)-n,t[0]=Math.max(t[0],0),t[1]=Math.max(t[1],0)}function mG(t,e,n,r,o){t=e.scale.parse(t);var i=e.scale.getLabel({value:t},{precision:o.precision}),a=o.formatter;if(a){var u={value:xA(e,{value:t}),axisDimension:e.dim,axisIndex:e.index,seriesData:[]};z(r,function(t){var e=n.getSeriesByIndex(t.seriesIndex),r=t.dataIndexInside,o=e&&e.getDataParams(r);o&&u.seriesData.push(o)}),q(a)?i=a.replace("{value}",i):Y(a)&&(i=a(u))}return i}function vG(t,e,n){var r=yr();return Sr(r,r,n.rotation),_r(r,r,n.position),ad([t.dataToCoord(e),(n.labelOffset||0)+(n.labelDirection||1)*(n.labelMargin||0)],r)}function yG(t,e,n,r,o,i){var a=_I.innerTextLayout(n.rotation,0,n.labelDirection);n.labelMargin=o.get(["label","margin"]),pG(e,r,o,i,{position:vG(r.axis,t,n),align:a.textAlign,verticalAlign:a.textVerticalAlign})}function bG(t,e,n){return n=n||0,{x1:t[n],y1:t[1-n],x2:e[n],y2:e[1-n]}}function xG(t,e,n){return n=n||0,{x:t[n],y:t[1-n],width:e[n],height:e[1-n]}}function wG(t,e,n,r,o,i){return{cx:t,cy:e,r0:n,r:r,startAngle:o,endAngle:i,clockwise:!0}}var _G=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.makeElOption=function(t,e,n,r,o){var i=n.axis,a=i.grid,u=r.get("type"),s=SG(a,i).getOtherAxis(i).getGlobalExtent(),l=i.toGlobalCoord(i.dataToCoord(e,!0));if(u&&"none"!==u){var c=hG(r),f=CG[u](i,l,s);f.style=c,t.graphicKey=f.type,t.pointer=f}var d=eI(a.model,n);yG(e,t,d,n,r,o)},e.prototype.getHandleTransform=function(t,e,n){var r=eI(e.axis.grid.model,e,{labelInside:!1});r.labelMargin=n.get(["handle","margin"]);var o=vG(e.axis,t,r);return{x:o[0],y:o[1],rotation:r.rotation+(r.labelDirection<0?Math.PI:0)}},e.prototype.updateHandleTransform=function(t,e,n,r){var o=n.axis,i=o.grid,a=o.getGlobalExtent(!0),u=SG(i,o).getOtherAxis(o).getGlobalExtent(),s="x"===o.dim?0:1,l=[t.x,t.y];l[s]+=e[s],l[s]=Math.min(a[1],l[s]),l[s]=Math.max(a[0],l[s]);var c=(u[1]+u[0])/2,f=[c,c];f[s]=l[s];var d=[{verticalAlign:"middle"},{align:"center"}];return{x:l[0],y:l[1],rotation:t.rotation,cursorPoint:f,tooltipOption:d[s]}},e}(dG);function SG(t,e){var n={};return n[e.dim+"AxisIndex"]=e.index,t.getCartesian(n)}var CG={line:function(t,e,n){var r=bG([e,n[0]],[e,n[1]],MG(t));return{type:"Line",subPixelOptimize:!0,shape:r}},shadow:function(t,e,n){var r=Math.max(1,t.getBandWidth()),o=n[1]-n[0];return{type:"Rect",shape:xG([e-r/2,n[0]],[r,o],MG(t))}}};function MG(t){return"x"===t.dim?0:1}var TG=_G,kG=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n}return i(e,t),e.type="axisPointer",e.defaultOption={show:"auto",zlevel:0,z:50,type:"line",snap:!1,triggerTooltip:!0,value:null,status:null,link:[],animation:null,animationDurationUpdate:200,lineStyle:{color:"#B9BEC9",width:1,type:"dashed"},shadowStyle:{color:"rgba(210,219,238,0.2)"},label:{show:!0,formatter:null,precision:"auto",margin:3,color:"#fff",padding:[5,7,5,7],backgroundColor:"auto",borderColor:null,borderWidth:0,borderRadius:3},handle:{show:!1,icon:"M10.7,11.9v-1.3H9.3v1.3c-4.9,0.3-8.8,4.4-8.8,9.4c0,5,3.9,9.1,8.8,9.4h1.3c4.9-0.3,8.8-4.4,8.8-9.4C19.5,16.3,15.6,12.2,10.7,11.9z M13.3,24.4H6.7v-1.2h6.6z M13.3,22H6.7v-1.2h6.6z M13.3,19.6H6.7v-1.2h6.6z",size:45,margin:50,color:"#333",shadowBlur:3,shadowColor:"#aaa",shadowOffsetX:0,shadowOffsetY:2,throttle:40}},e}(bp),DG=kG,AG=Di(),IG=z;function OG(t,e,n){if(!d.node){var r=e.getZr();AG(r).records||(AG(r).records={}),LG(r,e);var o=AG(r).records[t]||(AG(r).records[t]={});o.handler=n}}function LG(t,e){function n(n,r){t.on(n,function(n){var o=PG(e);IG(AG(t).records,function(t){t&&r(t,n,o.dispatchAction)}),EG(o.pendings,e)})}AG(t).initialized||(AG(t).initialized=!0,n("click",j(RG,"click")),n("mousemove",j(RG,"mousemove")),n("globalout",NG))}function EG(t,e){var n,r=t.showTip.length,o=t.hideTip.length;r?n=t.showTip[r-1]:o&&(n=t.hideTip[o-1]),n&&(n.dispatchAction=null,e.dispatchAction(n))}function NG(t,e,n){t.handler("leave",null,n)}function RG(t,e,n,r){e.handler(t,n,r)}function PG(t){var e={showTip:[],hideTip:[]},n=function(r){var o=e[r.type];o?o.push(r):(r.dispatchAction=n,t.dispatchAction(r))};return{dispatchAction:n,pendings:e}}function zG(t,e){if(!d.node){var n=e.getZr(),r=(AG(n).records||{})[t];r&&(AG(n).records[t]=null)}}var BG=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n}return i(e,t),e.prototype.render=function(t,e,n){var r=e.getComponent("tooltip"),o=t.get("triggerOn")||r&&r.get("triggerOn")||"mousemove|click";OG("axisPointer",n,function(t,e,n){"none"!==o&&("leave"===t||o.indexOf(t)>=0)&&n({type:"updateAxisPointer",currTrigger:t,x:e&&e.offsetX,y:e&&e.offsetY})})},e.prototype.remove=function(t,e){zG("axisPointer",e)},e.prototype.dispose=function(t,e){zG("axisPointer",e)},e.type="axisPointer",e}(Lv),VG=BG;function HG(t,e){var n,r=[],o=t.seriesIndex;if(null==o||!(n=e.getSeriesByIndex(o)))return{point:[]};var i=n.getData(),a=ki(i,t);if(null==a||a<0||X(a))return{point:[]};var u=i.getItemGraphicEl(a),s=n.coordinateSystem;if(n.getTooltipPosition)r=n.getTooltipPosition(a)||[];else if(s&&s.dataToPoint)if(t.isStacked){var l=s.getBaseAxis(),c=s.getOtherAxis(l),f=c.dim,d=l.dim,h="x"===f||"radius"===f?1:0,p=i.mapDimension(d),g=[];g[h]=i.get(p,a),g[1-h]=i.get(i.getCalculationInfo("stackResultDimension"),a),r=s.dataToPoint(g)||[]}else r=s.dataToPoint(i.getValues(B(s.dimensions,function(t){return i.mapDimension(t)}),a))||[];else if(u){var m=u.getBoundingRect().clone();m.applyTransform(u.transform),r=[m.x+m.width/2,m.y+m.height/2]}return{point:r,el:u}}var FG=Di();function WG(t,e,n){var r=t.currTrigger,o=[t.x,t.y],i=t,a=t.dispatchAction||G(n.dispatchAction,n),u=e.getComponent("axisPointer").coordSysAxesInfo;if(u){JG(o)&&(o=HG({seriesIndex:i.seriesIndex,dataIndex:i.dataIndex},e).point);var s=JG(o),l=i.axesInfo,c=u.axesInfo,f="leave"===r||JG(o),d={},h={},p={list:[],map:{}},g={showPointer:j(jG,h),showTooltip:j(XG,p)};z(u.coordSysMap,function(t,e){var n=s||t.containPoint(o);z(u.coordSysAxesInfo[e],function(t,e){var r=t.axis,i=$G(l,t);if(!f&&n&&(!l||i)){var a=i&&i.value;null!=a||s||(a=r.pointToData(o)),null!=a&&UG(t,a,g,!1,d)}})});var m={};return z(c,function(t,e){var n=t.linkGroup;n&&!h[e]&&z(n.axesInfo,function(e,r){var o=h[r];if(e!==t&&o){var i=o.value;n.mapper&&(i=t.axis.scale.parse(n.mapper(i,KG(e),KG(t)))),m[t.key]=i}})}),z(m,function(t,e){UG(c[e],t,g,!0,d)}),YG(h,c,d),qG(p,o,t,a),ZG(c,a,n),d}}function UG(t,e,n,r,o){var i=t.axis;if(!i.scale.isBlank()&&i.containData(e))if(t.involveSeries){var a=GG(e,t),u=a.payloadBatch,s=a.snapToValue;u[0]&&null==o.seriesIndex&&I(o,u[0]),!r&&t.snap&&i.containData(s)&&null!=s&&(e=s),n.showPointer(t,e,u),n.showTooltip(t,a,s)}else n.showPointer(t,e)}function GG(t,e){var n=e.axis,r=n.dim,o=t,i=[],a=Number.MAX_VALUE,u=-1;return z(e.seriesModels,function(e,s){var l,c,f=e.getData().mapDimensionsAll(r);if(e.getAxisTooltipData){var d=e.getAxisTooltipData(f,t,n);c=d.dataIndices,l=d.nestestValue}else{if(c=e.getData().indicesOfNearest(f[0],t,"category"===n.type?.5:null),!c.length)return;l=e.getData().get(f[0],c[0])}if(null!=l&&isFinite(l)){var h=t-l,p=Math.abs(h);p<=a&&((p<a||h>=0&&u<0)&&(a=p,u=h,o=l,i.length=0),z(c,function(t){i.push({seriesIndex:e.seriesIndex,dataIndexInside:t,dataIndex:e.getData().getRawIndex(t)})}))}}),{payloadBatch:i,snapToValue:o}}function jG(t,e,n,r){t[e.key]={value:n,payloadBatch:r}}function XG(t,e,n,r){var o=n.payloadBatch,i=e.axis,a=i.model,u=e.axisPointerModel;if(e.triggerTooltip&&o.length){var s=e.coordSys.model,l=EI(s),c=t.map[l];c||(c=t.map[l]={coordSysId:s.id,coordSysIndex:s.componentIndex,coordSysType:s.type,coordSysMainType:s.mainType,dataByAxis:[]},t.list.push(c)),c.dataByAxis.push({axisDim:i.dim,axisIndex:a.componentIndex,axisType:a.type,axisId:a.id,value:r,valueLabelOpt:{precision:u.get(["label","precision"]),formatter:u.get(["label","formatter"])},seriesDataIndices:o.slice()})}}function YG(t,e,n){var r=n.axesInfo=[];z(e,function(e,n){var o=e.axisPointerModel.option,i=t[n];i?(!e.useHandle&&(o.status="show"),o.value=i.value,o.seriesDataIndices=(i.payloadBatch||[]).slice()):!e.useHandle&&(o.status="hide"),"show"===o.status&&r.push({axisDim:e.axis.dim,axisIndex:e.axis.model.componentIndex,value:o.value})})}function qG(t,e,n,r){if(!JG(e)&&t.list.length){var o=((t.list[0].dataByAxis[0]||{}).seriesDataIndices||[])[0]||{};r({type:"showTip",escapeConnect:!0,x:e[0],y:e[1],tooltipOption:n.tooltipOption,position:n.position,dataIndexInside:o.dataIndexInside,dataIndex:o.dataIndex,seriesIndex:o.seriesIndex,dataByCoordSys:t.list})}else r({type:"hideTip"})}function ZG(t,e,n){var r=n.getZr(),o="axisPointerLastHighlights",i=FG(r)[o]||{},a=FG(r)[o]={};z(t,function(t,e){var n=t.axisPointerModel.option;"show"===n.status&&z(n.seriesDataIndices,function(t){var e=t.seriesIndex+" | "+t.dataIndex;a[e]=t})});var u=[],s=[];z(i,function(t,e){!a[e]&&s.push(t)}),z(a,function(t,e){!i[e]&&u.push(t)}),s.length&&n.dispatchAction({type:"downplay",escapeConnect:!0,notBlur:!0,batch:s}),u.length&&n.dispatchAction({type:"highlight",escapeConnect:!0,notBlur:!0,batch:u})}function $G(t,e){for(var n=0;n<(t||[]).length;n++){var r=t[n];if(e.axis.dim===r.axisDim&&e.axis.model.componentIndex===r.axisIndex)return r}}function KG(t){var e=t.axis.model,n={},r=n.axisDim=t.axis.dim;return n.axisIndex=n[r+"AxisIndex"]=e.componentIndex,n.axisName=n[r+"AxisName"]=e.name,n.axisId=n[r+"AxisId"]=e.id,n}function JG(t){return!t||null==t[0]||isNaN(t[0])||null==t[1]||isNaN(t[1])}function QG(t){PI.registerAxisPointerClass("CartesianAxisPointer",TG),t.registerComponentModel(DG),t.registerComponentView(VG),t.registerPreprocessor(function(t){if(t){(!t.axisPointer||0===t.axisPointer.length)&&(t.axisPointer={});var e=t.axisPointer.link;e&&!X(e)&&(t.axisPointer.link=[e])}}),t.registerProcessor(t.PRIORITY.PROCESSOR.STATISTIC,function(t,e){t.getComponent("axisPointer").coordSysAxesInfo=SI(t,e)}),t.registerAction({type:"updateAxisPointer",event:"updateAxisPointer",update:":updateAxisPointer"},WG)}function tj(t){mS(qI),mS(QG)}var ej=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.makeElOption=function(t,e,n,r,o){var i=n.axis;"angle"===i.dim&&(this.animationThreshold=Math.PI/18);var a=i.polar,u=a.getOtherAxis(i),s=u.getExtent(),l=i.dataToCoord(e),c=r.get("type");if(c&&"none"!==c){var f=hG(r),d=rj[c](i,a,l,s);d.style=f,t.graphicKey=d.type,t.pointer=d}var h=r.get(["label","margin"]),p=nj(e,n,r,a,h);pG(t,n,r,o,p)},e}(dG);function nj(t,e,n,r,o){var i=e.axis,a=i.dataToCoord(t),u=r.getAngleAxis().getExtent()[0];u=u/180*Math.PI;var s,l,c,f=r.getRadiusAxis().getExtent();if("radius"===i.dim){var d=yr();Sr(d,d,u),_r(d,d,[r.cx,r.cy]),s=ad([a,-o],d);var h=e.getModel("axisLabel").get("rotate")||0,p=_I.innerTextLayout(u,h*Math.PI/180,-1);l=p.textAlign,c=p.textVerticalAlign}else{var g=f[1];s=r.coordToPoint([g+o,a]);var m=r.cx,v=r.cy;l=Math.abs(s[0]-m)/g<.3?"center":s[0]>m?"left":"right",c=Math.abs(s[1]-v)/g<.3?"middle":s[1]>v?"top":"bottom"}return{position:s,align:l,verticalAlign:c}}var rj={line:function(t,e,n,r){return"angle"===t.dim?{type:"Line",shape:bG(e.coordToPoint([r[0],n]),e.coordToPoint([r[1],n]))}:{type:"Circle",shape:{cx:e.cx,cy:e.cy,r:n}}},shadow:function(t,e,n,r){var o=Math.max(1,t.getBandWidth()),i=Math.PI/180;return"angle"===t.dim?{type:"Sector",shape:wG(e.cx,e.cy,r[0],r[1],(-n-o/2)*i,(o/2-n)*i)}:{type:"Sector",shape:wG(e.cx,e.cy,n-o/2,n+o/2,0,2*Math.PI)}}},oj=ej,ij=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n}return i(e,t),e.prototype.findAxisModel=function(t){var e,n=this.ecModel;return n.eachComponent(t,function(t){t.getCoordSysModel()===this&&(e=t)},this),e},e.type="polar",e.dependencies=["radiusAxis","angleAxis"],e.defaultOption={zlevel:0,z:0,center:["50%","50%"],radius:"80%"},e}(bp),aj=ij,uj=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.getCoordSysModel=function(){return this.getReferringComponents("polar",Li).models[0]},e.type="polarAxis",e}(bp);R(uj,fD);var sj=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n}return i(e,t),e.type="angleAxis",e}(uj),lj=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n}return i(e,t),e.type="radiusAxis",e}(uj),cj=function(t){function e(e,n){return t.call(this,"radius",e,n)||this}return i(e,t),e.prototype.pointToData=function(t,e){return this.polar.pointToData(t,e)["radius"===this.dim?0:1]},e}(JA);cj.prototype.dataToRadius=JA.prototype.dataToCoord,cj.prototype.radiusToData=JA.prototype.coordToData;var fj=cj,dj=Di(),hj=function(t){function e(e,n){return t.call(this,"angle",e,n||[0,360])||this}return i(e,t),e.prototype.pointToData=function(t,e){return this.polar.pointToData(t,e)["radius"===this.dim?0:1]},e.prototype.calculateCategoryInterval=function(){var t=this,e=t.getLabelModel(),n=t.scale,r=n.getExtent(),o=n.count();if(r[1]-r[0]<1)return 0;var i=r[0],a=t.dataToCoord(i+1)-t.dataToCoord(i),u=Math.abs(a),s=no(null==i?"":i+"",e.getFont(),"center","top"),l=Math.max(s.height,7),c=l/u;isNaN(c)&&(c=1/0);var f=Math.max(0,Math.floor(c)),d=dj(t.model),h=d.lastAutoInterval,p=d.lastTickCount;return null!=h&&null!=p&&Math.abs(h-f)<=1&&Math.abs(p-o)<=1&&h>f?f=h:(d.lastTickCount=o,d.lastAutoInterval=f),f},e}(JA);hj.prototype.dataToAngle=JA.prototype.dataToCoord,hj.prototype.angleToData=JA.prototype.coordToData;var pj=hj,gj=function(){function t(t){this.dimensions=["radius","angle"],this.type="polar",this.cx=0,this.cy=0,this._radiusAxis=new fj,this._angleAxis=new pj,this.axisPointerEnabled=!0,this.name=t||"",this._radiusAxis.polar=this._angleAxis.polar=this}return t.prototype.containPoint=function(t){var e=this.pointToCoord(t);return this._radiusAxis.contain(e[0])&&this._angleAxis.contain(e[1])},t.prototype.containData=function(t){return this._radiusAxis.containData(t[0])&&this._angleAxis.containData(t[1])},t.prototype.getAxis=function(t){var e="_"+t+"Axis";return this[e]},t.prototype.getAxes=function(){return[this._radiusAxis,this._angleAxis]},t.prototype.getAxesByScale=function(t){var e=[],n=this._angleAxis,r=this._radiusAxis;return n.scale.type===t&&e.push(n),r.scale.type===t&&e.push(r),e},t.prototype.getAngleAxis=function(){return this._angleAxis},t.prototype.getRadiusAxis=function(){return this._radiusAxis},t.prototype.getOtherAxis=function(t){var e=this._angleAxis;return t===e?this._radiusAxis:e},t.prototype.getBaseAxis=function(){return this.getAxesByScale("ordinal")[0]||this.getAxesByScale("time")[0]||this.getAngleAxis()},t.prototype.getTooltipAxes=function(t){var e=null!=t&&"auto"!==t?this.getAxis(t):this.getBaseAxis();return{baseAxes:[e],otherAxes:[this.getOtherAxis(e)]}},t.prototype.dataToPoint=function(t,e){return this.coordToPoint([this._radiusAxis.dataToRadius(t[0],e),this._angleAxis.dataToAngle(t[1],e)])},t.prototype.pointToData=function(t,e){var n=this.pointToCoord(t);return[this._radiusAxis.radiusToData(n[0],e),this._angleAxis.angleToData(n[1],e)]},t.prototype.pointToCoord=function(t){var e=t[0]-this.cx,n=t[1]-this.cy,r=this.getAngleAxis(),o=r.getExtent(),i=Math.min(o[0],o[1]),a=Math.max(o[0],o[1]);r.inverse?i=a-360:a=i+360;var u=Math.sqrt(e*e+n*n);e/=u,n/=u;var s=Math.atan2(-n,e)/Math.PI*180,l=s<i?1:-1;while(s<i||s>a)s+=360*l;return[u,s]},t.prototype.coordToPoint=function(t){var e=t[0],n=t[1]/180*Math.PI,r=Math.cos(n)*e+this.cx,o=-Math.sin(n)*e+this.cy;return[r,o]},t.prototype.getArea=function(){var t=this.getAngleAxis(),e=this.getRadiusAxis(),n=e.getExtent().slice();n[0]>n[1]&&n.reverse();var r=t.getExtent(),o=Math.PI/180;return{cx:this.cx,cy:this.cy,r0:n[0],r:n[1],startAngle:-r[0]*o,endAngle:-r[1]*o,clockwise:t.inverse,contain:function(t,e){var n=t-this.cx,r=e-this.cy,o=n*n+r*r,i=this.r,a=this.r0;return o<=i*i&&o>=a*a}}},t.prototype.convertToPixel=function(t,e,n){var r=mj(e);return r===this?this.dataToPoint(n):null},t.prototype.convertFromPixel=function(t,e,n){var r=mj(e);return r===this?this.pointToData(n):null},t}();function mj(t){var e=t.seriesModel,n=t.polarModel;return n&&n.coordinateSystem||e&&e.coordinateSystem}var vj=gj;function yj(t,e,n){var r=e.get("center"),o=n.getWidth(),i=n.getHeight();t.cx=Ro(r[0],o),t.cy=Ro(r[1],i);var a=t.getRadiusAxis(),u=Math.min(o,i)/2,s=e.get("radius");null==s?s=[0,"100%"]:X(s)||(s=[0,s]);var l=[Ro(s[0],u),Ro(s[1],u)];a.inverse?a.setExtent(l[1],l[0]):a.setExtent(l[0],l[1])}function bj(t,e){var n=this,r=n.getAngleAxis(),o=n.getRadiusAxis();if(r.scale.setExtent(1/0,-1/0),o.scale.setExtent(1/0,-1/0),t.eachSeries(function(t){if(t.coordinateSystem===n){var e=t.getData();z(MA(e,"radius"),function(t){o.scale.unionExtentFromData(e,t)}),z(MA(e,"angle"),function(t){r.scale.unionExtentFromData(e,t)})}}),mA(r.scale,r.model),mA(o.scale,o.model),"category"===r.type&&!r.onBand){var i=r.getExtent(),a=360/r.scale.count();r.inverse?i[1]+=a:i[1]-=a,r.setExtent(i[0],i[1])}}function xj(t){return"angleAxis"===t.mainType}function wj(t,e){if(t.type=e.get("type"),t.scale=vA(e),t.onBand=e.get("boundaryGap")&&"category"===t.type,t.inverse=e.get("inverse"),xj(e)){t.inverse=t.inverse!==e.get("clockwise");var n=e.get("startAngle");t.setExtent(n,n+(t.inverse?-360:360))}e.axis=t,t.model=e}var _j={dimensions:vj.prototype.dimensions,create:function(t,e){var n=[];return t.eachComponent("polar",function(t,r){var o=new vj(r+"");o.update=bj;var i=o.getRadiusAxis(),a=o.getAngleAxis(),u=t.findAxisModel("radiusAxis"),s=t.findAxisModel("angleAxis");wj(i,u),wj(a,s),yj(o,t,e),n.push(o),t.coordinateSystem=o,o.model=t}),t.eachSeries(function(t){if("polar"===t.get("coordinateSystem")){var e=t.getReferringComponents("polar",Li).models[0];0,t.coordinateSystem=e.coordinateSystem}}),n}},Sj=_j,Cj=["axisLine","axisLabel","axisTick","minorTick","splitLine","minorSplitLine","splitArea"];function Mj(t,e,n){e[1]>e[0]&&(e=e.slice().reverse());var r=t.coordToPoint([e[0],n]),o=t.coordToPoint([e[1],n]);return{x1:r[0],y1:r[1],x2:o[0],y2:o[1]}}function Tj(t){var e=t.getRadiusAxis();return e.inverse?0:1}function kj(t){var e=t[0],n=t[t.length-1];e&&n&&Math.abs(Math.abs(e.coord-n.coord)-360)<1e-4&&t.pop()}var Dj=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n.axisPointerClass="PolarAxisPointer",n}return i(e,t),e.prototype.render=function(t,e){if(this.group.removeAll(),t.get("show")){var n=t.axis,r=n.polar,o=r.getRadiusAxis().getExtent(),i=n.getTicksCoords(),a=n.getMinorTicksCoords(),u=B(n.getViewLabels(),function(t){t=k(t);var e=n.scale,r="ordinal"===e.type?e.getRawOrdinalNumber(t.tickValue):t.tickValue;return t.coord=n.dataToCoord(r),t});kj(u),kj(i),z(Cj,function(e){!t.get([e,"show"])||n.scale.isBlank()&&"axisLine"!==e||Aj[e](this.group,t,r,i,a,o,u)},this)}},e.type="angleAxis",e}(PI),Aj={axisLine:function(t,e,n,r,o,i){var a,u=e.getModel(["axisLine","lineStyle"]),s=Tj(n),l=s?0:1;a=0===i[l]?new Tc({shape:{cx:n.cx,cy:n.cy,r:i[s]},style:u.getLineStyle(),z2:1,silent:!0}):new Zc({shape:{cx:n.cx,cy:n.cy,r:i[s],r0:i[l]},style:u.getLineStyle(),z2:1,silent:!0}),a.style.fill=null,t.add(a)},axisTick:function(t,e,n,r,o,i){var a=e.getModel("axisTick"),u=(a.get("inside")?-1:1)*a.get("length"),s=i[Tj(n)],l=B(r,function(t){return new cf({shape:Mj(n,[s,s+u],t.coord)})});t.add(Yf(l,{style:O(a.getModel("lineStyle").getLineStyle(),{stroke:e.get(["axisLine","lineStyle","color"])})}))},minorTick:function(t,e,n,r,o,i){if(o.length){for(var a=e.getModel("axisTick"),u=e.getModel("minorTick"),s=(a.get("inside")?-1:1)*u.get("length"),l=i[Tj(n)],c=[],f=0;f<o.length;f++)for(var d=0;d<o[f].length;d++)c.push(new cf({shape:Mj(n,[l,l+s],o[f][d].coord)}));t.add(Yf(c,{style:O(u.getModel("lineStyle").getLineStyle(),O(a.getLineStyle(),{stroke:e.get(["axisLine","lineStyle","color"])}))}))}},axisLabel:function(t,e,n,r,o,i,a){var u=e.getCategories(!0),s=e.getModel("axisLabel"),l=s.get("margin"),c=e.get("triggerEvent");z(a,function(r,o){var a=s,f=r.tickValue,d=i[Tj(n)],h=n.coordToPoint([d+l,r.coord]),p=n.cx,g=n.cy,m=Math.abs(h[0]-p)/d<.3?"center":h[0]>p?"left":"right",v=Math.abs(h[1]-g)/d<.3?"middle":h[1]>g?"top":"bottom";if(u&&u[f]){var y=u[f];K(y)&&y.textStyle&&(a=new Yd(y.textStyle,s,s.ecModel))}var b=new Us({silent:_I.isLabelSilent(e),style:Cd(a,{x:h[0],y:h[1],fill:a.getTextColor()||e.get(["axisLine","lineStyle","color"]),text:r.formattedLabel,align:m,verticalAlign:v})});if(t.add(b),c){var x=_I.makeAxisEventDataBase(e);x.targetType="axisLabel",x.value=r.rawLabel,Gs(b).eventData=x}},this)},splitLine:function(t,e,n,r,o,i){var a=e.getModel("splitLine"),u=a.getModel("lineStyle"),s=u.get("color"),l=0;s=s instanceof Array?s:[s];for(var c=[],f=0;f<r.length;f++){var d=l++%s.length;c[d]=c[d]||[],c[d].push(new cf({shape:Mj(n,i,r[f].coord)}))}for(f=0;f<c.length;f++)t.add(Yf(c[f],{style:O({stroke:s[f%s.length]},u.getLineStyle()),silent:!0,z:e.get("z")}))},minorSplitLine:function(t,e,n,r,o,i){if(o.length){for(var a=e.getModel("minorSplitLine"),u=a.getModel("lineStyle"),s=[],l=0;l<o.length;l++)for(var c=0;c<o[l].length;c++)s.push(new cf({shape:Mj(n,i,o[l][c].coord)}));t.add(Yf(s,{style:u.getLineStyle(),silent:!0,z:e.get("z")}))}},splitArea:function(t,e,n,r,o,i){if(r.length){var a=e.getModel("splitArea"),u=a.getModel("areaStyle"),s=u.get("color"),l=0;s=s instanceof Array?s:[s];for(var c=[],f=Math.PI/180,d=-r[0].coord*f,h=Math.min(i[0],i[1]),p=Math.max(i[0],i[1]),g=e.get("clockwise"),m=1,v=r.length;m<=v;m++){var y=m===v?r[0].coord:r[m].coord,b=l++%s.length;c[b]=c[b]||[],c[b].push(new Xc({shape:{cx:n.cx,cy:n.cy,r0:h,r:p,startAngle:d,endAngle:-y*f,clockwise:g},silent:!0})),d=-y*f}for(m=0;m<c.length;m++)t.add(Yf(c[m],{style:O({fill:s[m%s.length]},u.getAreaStyle()),silent:!0}))}}},Ij=Dj,Oj=["axisLine","axisTickLabel","axisName"],Lj=["splitLine","splitArea","minorSplitLine"],Ej=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n.axisPointerClass="PolarAxisPointer",n}return i(e,t),e.prototype.render=function(t,e){if(this.group.removeAll(),t.get("show")){var n=this._axisGroup,r=this._axisGroup=new _o;this.group.add(r);var o=t.axis,i=o.polar,a=i.getAngleAxis(),u=o.getTicksCoords(),s=o.getMinorTicksCoords(),l=a.getExtent()[0],c=o.getExtent(),f=Rj(i,t,l),d=new _I(t,f);z(Oj,d.add,d),r.add(d.getGroup()),cd(n,r,t),z(Lj,function(e){t.get([e,"show"])&&!o.scale.isBlank()&&Nj[e](this.group,t,i,l,c,u,s)},this)}},e.type="radiusAxis",e}(PI),Nj={splitLine:function(t,e,n,r,o,i){var a=e.getModel("splitLine"),u=a.getModel("lineStyle"),s=u.get("color"),l=0;s=s instanceof Array?s:[s];for(var c=[],f=0;f<i.length;f++){var d=l++%s.length;c[d]=c[d]||[],c[d].push(new Tc({shape:{cx:n.cx,cy:n.cy,r:i[f].coord}}))}for(f=0;f<c.length;f++)t.add(Yf(c[f],{style:O({stroke:s[f%s.length],fill:null},u.getLineStyle()),silent:!0}))},minorSplitLine:function(t,e,n,r,o,i,a){if(a.length){for(var u=e.getModel("minorSplitLine"),s=u.getModel("lineStyle"),l=[],c=0;c<a.length;c++)for(var f=0;f<a[c].length;f++)l.push(new Tc({shape:{cx:n.cx,cy:n.cy,r:a[c][f].coord}}));t.add(Yf(l,{style:O({fill:null},s.getLineStyle()),silent:!0}))}},splitArea:function(t,e,n,r,o,i){if(i.length){var a=e.getModel("splitArea"),u=a.getModel("areaStyle"),s=u.get("color"),l=0;s=s instanceof Array?s:[s];for(var c=[],f=i[0].coord,d=1;d<i.length;d++){var h=l++%s.length;c[h]=c[h]||[],c[h].push(new Xc({shape:{cx:n.cx,cy:n.cy,r0:f,r:i[d].coord,startAngle:0,endAngle:2*Math.PI},silent:!0})),f=i[d].coord}for(d=0;d<c.length;d++)t.add(Yf(c[d],{style:O({fill:s[d%s.length]},u.getAreaStyle()),silent:!0}))}}};function Rj(t,e,n){return{position:[t.cx,t.cy],rotation:n/180*Math.PI,labelDirection:-1,tickDirection:-1,nameDirection:1,labelRotate:e.getModel("axisLabel").get("rotate"),z2:1}}var Pj=Ej;function zj(t){return t.get("stack")||"__ec_stack_"+t.seriesIndex}function Bj(t,e){return e.dim+t.model.componentIndex}function Vj(t,e,n){var r={},o=Hj(H(e.getSeriesByType(t),function(t){return!e.isSeriesFiltered(t)&&t.coordinateSystem&&"polar"===t.coordinateSystem.type}));e.eachSeriesByType(t,function(t){if("polar"===t.coordinateSystem.type){var e=t.getData(),n=t.coordinateSystem,i=n.getBaseAxis(),a=Bj(n,i),u=zj(t),s=o[a][u],l=s.offset,c=s.width,f=n.getOtherAxis(i),d=t.coordinateSystem.cx,h=t.coordinateSystem.cy,p=t.get("barMinHeight")||0,g=t.get("barMinAngle")||0;r[u]=r[u]||[];for(var m=e.mapDimension(f.dim),v=e.mapDimension(i.dim),y=RM(e,m),b="radius"!==i.dim||!t.get("roundCap",!0),x=f.dataToCoord(0),w=0,_=e.count();w<_;w++){var S=e.get(m,w),C=e.get(v,w),M=S>=0?"p":"n",T=x;y&&(r[u][C]||(r[u][C]={p:x,n:x}),T=r[u][C][M]);var k=void 0,D=void 0,A=void 0,I=void 0;if("radius"===f.dim){var O=f.dataToCoord(S)-x,L=i.dataToCoord(C);Math.abs(O)<p&&(O=(O<0?-1:1)*p),k=T,D=T+O,A=L-l,I=A-c,y&&(r[u][C][M]=D)}else{var E=f.dataToCoord(S,b)-x,N=i.dataToCoord(C);Math.abs(E)<g&&(E=(E<0?-1:1)*g),k=N+l,D=k+c,A=T,I=T+E,y&&(r[u][C][M]=I)}e.setItemLayout(w,{cx:d,cy:h,r0:k,r:D,startAngle:-A*Math.PI/180,endAngle:-I*Math.PI/180})}}})}function Hj(t){var e={};z(t,function(t,n){var r=t.getData(),o=t.coordinateSystem,i=o.getBaseAxis(),a=Bj(o,i),u=i.getExtent(),s="category"===i.type?i.getBandWidth():Math.abs(u[1]-u[0])/r.count(),l=e[a]||{bandWidth:s,remainedWidth:s,autoWidthCount:0,categoryGap:"20%",gap:"30%",stacks:{}},c=l.stacks;e[a]=l;var f=zj(t);c[f]||l.autoWidthCount++,c[f]=c[f]||{width:0,maxWidth:0};var d=Ro(t.get("barWidth"),s),h=Ro(t.get("barMaxWidth"),s),p=t.get("barGap"),g=t.get("barCategoryGap");d&&!c[f].width&&(d=Math.min(l.remainedWidth,d),c[f].width=d,l.remainedWidth-=d),h&&(c[f].maxWidth=h),null!=p&&(l.gap=p),null!=g&&(l.categoryGap=g)});var n={};return z(e,function(t,e){n[e]={};var r=t.stacks,o=t.bandWidth,i=Ro(t.categoryGap,o),a=Ro(t.gap,1),u=t.remainedWidth,s=t.autoWidthCount,l=(u-i)/(s+(s-1)*a);l=Math.max(l,0),z(r,function(t,e){var n=t.maxWidth;n&&n<l&&(n=Math.min(n,u),t.width&&(n=Math.min(n,t.width)),u-=n,t.width=n,s--)}),l=(u-i)/(s+(s-1)*a),l=Math.max(l,0);var c,f=0;z(r,function(t,e){t.width||(t.width=l),c=t,f+=t.width*(1+a)}),c&&(f-=c.width*a);var d=-f/2;z(r,function(t,r){n[e][r]=n[e][r]||{offset:d,width:t.width},d+=t.width*(1+a)})}),n}var Fj=Vj,Wj={startAngle:90,clockwise:!0,splitNumber:12,axisLabel:{rotate:0}},Uj={splitNumber:5},Gj=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n}return i(e,t),e.type="polar",e}(Lv);function jj(t){mS(QG),PI.registerAxisPointerClass("PolarAxisPointer",oj),t.registerCoordinateSystem("polar",Sj),t.registerComponentModel(aj),t.registerComponentView(Gj),SD(t,"angle",sj,Wj),SD(t,"radius",lj,Uj),t.registerComponentView(Ij),t.registerComponentView(Pj),t.registerLayout(j(Fj,"bar"))}function Xj(t,e){e=e||{};var n=t.coordinateSystem,r=t.axis,o={},i=r.position,a=r.orient,u=n.getRect(),s=[u.x,u.x+u.width,u.y,u.y+u.height],l={horizontal:{top:s[2],bottom:s[3]},vertical:{left:s[0],right:s[1]}};o.position=["vertical"===a?l.vertical[i]:s[0],"horizontal"===a?l.horizontal[i]:s[3]];var c={horizontal:0,vertical:1};o.rotation=Math.PI/2*c[a];var f={top:-1,bottom:1,right:1,left:-1};o.labelDirection=o.tickDirection=o.nameDirection=f[i],t.get(["axisTick","inside"])&&(o.tickDirection=-o.tickDirection),it(e.labelInside,t.get(["axisLabel","inside"]))&&(o.labelDirection=-o.labelDirection);var d=e.rotate;return null==d&&(d=t.get(["axisLabel","rotate"])),o.labelRotation="top"===i?-d:d,o.z2=1,o}var Yj=["axisLine","axisTickLabel","axisName"],qj=["splitArea","splitLine"],Zj=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n.axisPointerClass="SingleAxisPointer",n}return i(e,t),e.prototype.render=function(e,n,r,o){var i=this.group;i.removeAll();var a=this._axisGroup;this._axisGroup=new _o;var u=Xj(e),s=new _I(e,u);z(Yj,s.add,s),i.add(this._axisGroup),i.add(s.getGroup()),z(qj,function(t){e.get([t,"show"])&&$j[t](this,this.group,this._axisGroup,e)},this),cd(a,this._axisGroup,e),t.prototype.render.call(this,e,n,r,o)},e.prototype.remove=function(){VI(this)},e.type="singleAxis",e}(PI),$j={splitLine:function(t,e,n,r){var o=r.axis;if(!o.scale.isBlank()){var i=r.getModel("splitLine"),a=i.getModel("lineStyle"),u=a.get("color");u=u instanceof Array?u:[u];for(var s=r.coordinateSystem.getRect(),l=o.isHorizontal(),c=[],f=0,d=o.getTicksCoords({tickModel:i}),h=[],p=[],g=0;g<d.length;++g){var m=o.toGlobalCoord(d[g].coord);l?(h[0]=m,h[1]=s.y,p[0]=m,p[1]=s.y+s.height):(h[0]=s.x,h[1]=m,p[0]=s.x+s.width,p[1]=m);var v=f++%u.length;c[v]=c[v]||[],c[v].push(new cf({subPixelOptimize:!0,shape:{x1:h[0],y1:h[1],x2:p[0],y2:p[1]},silent:!0}))}var y=a.getLineStyle(["color"]);for(g=0;g<c.length;++g)e.add(Yf(c[g],{style:O({stroke:u[g%u.length]},y),silent:!0}))}},splitArea:function(t,e,n,r){BI(t,n,r,r)}},Kj=Zj,Jj=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n}return i(e,t),e.prototype.getCoordSysModel=function(){return this},e.type="singleAxis",e.layoutMode="box",e.defaultOption={left:"5%",top:"5%",right:"5%",bottom:"5%",type:"value",position:"bottom",orient:"horizontal",axisLine:{show:!0,lineStyle:{width:1,type:"solid"}},tooltip:{show:!0},axisTick:{show:!0,length:6,lineStyle:{width:1}},axisLabel:{show:!0,interval:"auto"},splitLine:{show:!0,lineStyle:{type:"dashed",opacity:.2}}},e}(bp);R(Jj,fD.prototype);var Qj=Jj,tX=function(t){function e(e,n,r,o,i){var a=t.call(this,e,n,r)||this;return a.type=o||"value",a.position=i||"bottom",a}return i(e,t),e.prototype.isHorizontal=function(){var t=this.position;return"top"===t||"bottom"===t},e.prototype.pointToData=function(t,e){return this.coordinateSystem.pointToData(t)[0]},e}(JA),eX=tX,nX=function(){function t(t,e,n){this.type="single",this.dimension="single",this.dimensions=["single"],this.axisPointerEnabled=!0,this.model=t,this._init(t,e,n)}return t.prototype._init=function(t,e,n){var r=this.dimension,o=new eX(r,vA(t),[0,0],t.get("type"),t.get("position")),i="category"===o.type;o.onBand=i&&t.get("boundaryGap"),o.inverse=t.get("inverse"),o.orient=t.get("orient"),t.axis=o,o.model=t,o.coordinateSystem=this,this._axis=o},t.prototype.update=function(t,e){t.eachSeries(function(t){if(t.coordinateSystem===this){var e=t.getData();z(e.mapDimensionsAll(this.dimension),function(t){this._axis.scale.unionExtentFromData(e,t)},this),mA(this._axis.scale,this._axis.model)}},this)},t.prototype.resize=function(t,e){this._rect=lp({left:t.get("left"),top:t.get("top"),right:t.get("right"),bottom:t.get("bottom"),width:t.get("width"),height:t.get("height")},{width:e.getWidth(),height:e.getHeight()}),this._adjustAxis()},t.prototype.getRect=function(){return this._rect},t.prototype._adjustAxis=function(){var t=this._rect,e=this._axis,n=e.isHorizontal(),r=n?[0,t.width]:[0,t.height],o=e.reverse?1:0;e.setExtent(r[o],r[1-o]),this._updateAxisTransform(e,n?t.x:t.y)},t.prototype._updateAxisTransform=function(t,e){var n=t.getExtent(),r=n[0]+n[1],o=t.isHorizontal();t.toGlobalCoord=o?function(t){return t+e}:function(t){return r-t+e},t.toLocalCoord=o?function(t){return t-e}:function(t){return r-t+e}},t.prototype.getAxis=function(){return this._axis},t.prototype.getBaseAxis=function(){return this._axis},t.prototype.getAxes=function(){return[this._axis]},t.prototype.getTooltipAxes=function(){return{baseAxes:[this.getAxis()],otherAxes:[]}},t.prototype.containPoint=function(t){var e=this.getRect(),n=this.getAxis(),r=n.orient;return"horizontal"===r?n.contain(n.toLocalCoord(t[0]))&&t[1]>=e.y&&t[1]<=e.y+e.height:n.contain(n.toLocalCoord(t[1]))&&t[0]>=e.y&&t[0]<=e.y+e.height},t.prototype.pointToData=function(t){var e=this.getAxis();return[e.coordToData(e.toLocalCoord(t["horizontal"===e.orient?0:1]))]},t.prototype.dataToPoint=function(t){var e=this.getAxis(),n=this.getRect(),r=[],o="horizontal"===e.orient?0:1;return t instanceof Array&&(t=t[0]),r[o]=e.toGlobalCoord(e.dataToCoord(+t)),r[1-o]=0===o?n.y+n.height/2:n.x+n.width/2,r},t.prototype.convertToPixel=function(t,e,n){var r=rX(e);return r===this?this.dataToPoint(n):null},t.prototype.convertFromPixel=function(t,e,n){var r=rX(e);return r===this?this.pointToData(n):null},t}();function rX(t){var e=t.seriesModel,n=t.singleAxisModel;return n&&n.coordinateSystem||e&&e.coordinateSystem}var oX=nX;function iX(t,e){var n=[];return t.eachComponent("singleAxis",function(r,o){var i=new oX(r,t,e);i.name="single_"+o,i.resize(r,e),r.coordinateSystem=i,n.push(i)}),t.eachSeries(function(t){if("singleAxis"===t.get("coordinateSystem")){var e=t.getReferringComponents("singleAxis",Li).models[0];t.coordinateSystem=e&&e.coordinateSystem}}),n}var aX={create:iX,dimensions:oX.prototype.dimensions},uX=aX,sX=["x","y"],lX=["width","height"],cX=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.makeElOption=function(t,e,n,r,o){var i=n.axis,a=i.coordinateSystem,u=hX(a,1-dX(i)),s=a.dataToPoint(e)[0],l=r.get("type");if(l&&"none"!==l){var c=hG(r),f=fX[l](i,s,u);f.style=c,t.graphicKey=f.type,t.pointer=f}var d=Xj(n);yG(e,t,d,n,r,o)},e.prototype.getHandleTransform=function(t,e,n){var r=Xj(e,{labelInside:!1});r.labelMargin=n.get(["handle","margin"]);var o=vG(e.axis,t,r);return{x:o[0],y:o[1],rotation:r.rotation+(r.labelDirection<0?Math.PI:0)}},e.prototype.updateHandleTransform=function(t,e,n,r){var o=n.axis,i=o.coordinateSystem,a=dX(o),u=hX(i,a),s=[t.x,t.y];s[a]+=e[a],s[a]=Math.min(u[1],s[a]),s[a]=Math.max(u[0],s[a]);var l=hX(i,1-a),c=(l[1]+l[0])/2,f=[c,c];return f[a]=s[a],{x:s[0],y:s[1],rotation:t.rotation,cursorPoint:f,tooltipOption:{verticalAlign:"middle"}}},e}(dG),fX={line:function(t,e,n){var r=bG([e,n[0]],[e,n[1]],dX(t));return{type:"Line",subPixelOptimize:!0,shape:r}},shadow:function(t,e,n){var r=t.getBandWidth(),o=n[1]-n[0];return{type:"Rect",shape:xG([e-r/2,n[0]],[r,o],dX(t))}}};function dX(t){return t.isHorizontal()?0:1}function hX(t,e){var n=t.getRect();return[n[sX[e]],n[sX[e]]+n[lX[e]]]}var pX=cX,gX=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n}return i(e,t),e.type="single",e}(Lv);function mX(t){mS(QG),PI.registerAxisPointerClass("SingleAxisPointer",pX),t.registerComponentView(gX),t.registerComponentView(Kj),t.registerComponentModel(Qj),SD(t,"single",Qj,Qj.defaultOption),t.registerCoordinateSystem("single",uX)}var vX=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n}return i(e,t),e.prototype.init=function(e,n,r){var o=pp(e);t.prototype.init.apply(this,arguments),yX(e,o)},e.prototype.mergeOption=function(e){t.prototype.mergeOption.apply(this,arguments),yX(this.option,e)},e.prototype.getCellSize=function(){return this.option.cellSize},e.type="calendar",e.defaultOption={zlevel:0,z:2,left:80,top:60,cellSize:20,orient:"horizontal",splitLine:{show:!0,lineStyle:{color:"#000",width:1,type:"solid"}},itemStyle:{color:"#fff",borderWidth:1,borderColor:"#ccc"},dayLabel:{show:!0,firstDay:0,position:"start",margin:"50%",nameMap:"en",color:"#000"},monthLabel:{show:!0,position:"start",margin:5,align:"center",nameMap:"en",formatter:null,color:"#000"},yearLabel:{show:!0,position:null,margin:30,formatter:null,color:"#ccc",fontFamily:"sans-serif",fontWeight:"bolder",fontSize:20}},e}(bp);function yX(t,e){var n,r=t.cellSize;n=X(r)?r:t.cellSize=[r,r],1===n.length&&(n[1]=n[0]);var o=B([0,1],function(t){return fp(e,t)&&(n[t]="auto"),null!=n[t]&&"auto"!==n[t]});hp(t,e,{type:"box",ignoreSize:o})}var bX=vX,xX={EN:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],CN:["一月","二月","三月","四月","五月","六月","七月","八月","九月","十月","十一月","十二月"]},wX={EN:["S","M","T","W","T","F","S"],CN:["日","一","二","三","四","五","六"]},_X=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n}return i(e,t),e.prototype.render=function(t,e,n){var r=this.group;r.removeAll();var o=t.coordinateSystem,i=o.getRangeInfo(),a=o.getOrient();this._renderDayRect(t,i,r),this._renderLines(t,i,a,r),this._renderYearText(t,i,a,r),this._renderMonthText(t,a,r),this._renderWeekText(t,i,a,r)},e.prototype._renderDayRect=function(t,e,n){for(var r=t.coordinateSystem,o=t.getModel("itemStyle").getItemStyle(),i=r.getCellWidth(),a=r.getCellHeight(),u=e.start.time;u<=e.end.time;u=r.getNextNDay(u,1).time){var s=r.dataToRect([u],!1).tl,l=new As({shape:{x:s[0],y:s[1],width:i,height:a},cursor:"default",style:o});n.add(l)}},e.prototype._renderLines=function(t,e,n,r){var o=this,i=t.coordinateSystem,a=t.getModel(["splitLine","lineStyle"]).getLineStyle(),u=t.get(["splitLine","show"]),s=a.lineWidth;this._tlpoints=[],this._blpoints=[],this._firstDayOfMonth=[],this._firstDayPoints=[];for(var l=e.start,c=0;l.time<=e.end.time;c++){d(l.formatedDate),0===c&&(l=i.getDateInfo(e.start.y+"-"+e.start.m));var f=l.date;f.setMonth(f.getMonth()+1),l=i.getDateInfo(f)}function d(e){o._firstDayOfMonth.push(i.getDateInfo(e)),o._firstDayPoints.push(i.dataToRect([e],!1).tl);var s=o._getLinePointsOfOneWeek(t,e,n);o._tlpoints.push(s[0]),o._blpoints.push(s[s.length-1]),u&&o._drawSplitline(s,a,r)}d(i.getNextNDay(e.end.time,1).formatedDate),u&&this._drawSplitline(o._getEdgesPoints(o._tlpoints,s,n),a,r),u&&this._drawSplitline(o._getEdgesPoints(o._blpoints,s,n),a,r)},e.prototype._getEdgesPoints=function(t,e,n){var r=[t[0].slice(),t[t.length-1].slice()],o="horizontal"===n?0:1;return r[0][o]=r[0][o]-e/2,r[1][o]=r[1][o]+e/2,r},e.prototype._drawSplitline=function(t,e,n){var r=new af({z2:20,shape:{points:t},style:e});n.add(r)},e.prototype._getLinePointsOfOneWeek=function(t,e,n){for(var r=t.coordinateSystem,o=r.getDateInfo(e),i=[],a=0;a<7;a++){var u=r.getNextNDay(o.time,a),s=r.dataToRect([u.time],!1);i[2*u.day]=s.tl,i[2*u.day+1]=s["horizontal"===n?"bl":"tr"]}return i},e.prototype._formatterLabel=function(t,e){return"string"===typeof t&&t?Qh(t,e):"function"===typeof t?t(e):e.nameMap},e.prototype._yearTextPositionControl=function(t,e,n,r,o){var i=e[0],a=e[1],u=["center","bottom"];"bottom"===r?(a+=o,u=["center","top"]):"left"===r?i-=o:"right"===r?(i+=o,u=["center","top"]):a-=o;var s=0;return"left"!==r&&"right"!==r||(s=Math.PI/2),{rotation:s,x:i,y:a,style:{align:u[0],verticalAlign:u[1]}}},e.prototype._renderYearText=function(t,e,n,r){var o=t.getModel("yearLabel");if(o.get("show")){var i=o.get("margin"),a=o.get("position");a||(a="horizontal"!==n?"top":"left");var u=[this._tlpoints[this._tlpoints.length-1],this._blpoints[0]],s=(u[0][0]+u[1][0])/2,l=(u[0][1]+u[1][1])/2,c="horizontal"===n?0:1,f={top:[s,u[c][1]],bottom:[s,u[1-c][1]],left:[u[1-c][0],l],right:[u[c][0],l]},d=e.start.y;+e.end.y>+e.start.y&&(d=d+"-"+e.end.y);var h=o.get("formatter"),p={start:e.start.y,end:e.end.y,nameMap:d},g=this._formatterLabel(h,p),m=new Us({z2:30,style:Cd(o,{text:g})});m.attr(this._yearTextPositionControl(m,f[a],n,a,i)),r.add(m)}},e.prototype._monthTextPositionControl=function(t,e,n,r,o){var i="left",a="top",u=t[0],s=t[1];return"horizontal"===n?(s+=o,e&&(i="center"),"start"===r&&(a="bottom")):(u+=o,e&&(a="middle"),"start"===r&&(i="right")),{x:u,y:s,align:i,verticalAlign:a}},e.prototype._renderMonthText=function(t,e,n){var r=t.getModel("monthLabel");if(r.get("show")){var o=r.get("nameMap"),i=r.get("margin"),a=r.get("position"),u=r.get("align"),s=[this._tlpoints,this._blpoints];q(o)&&(o=xX[o.toUpperCase()]||[]);var l="start"===a?0:1,c="horizontal"===e?0:1;i="start"===a?-i:i;for(var f="center"===u,d=0;d<s[l].length-1;d++){var h=s[l][d].slice(),p=this._firstDayOfMonth[d];if(f){var g=this._firstDayPoints[d];h[c]=(g[c]+s[0][d+1][c])/2}var m=r.get("formatter"),v=o[+p.m-1],y={yyyy:p.y,yy:(p.y+"").slice(2),MM:p.m,M:+p.m,nameMap:v},b=this._formatterLabel(m,y),x=new Us({z2:30,style:I(Cd(r,{text:b}),this._monthTextPositionControl(h,f,e,a,i))});n.add(x)}}},e.prototype._weekTextPositionControl=function(t,e,n,r,o){var i="center",a="middle",u=t[0],s=t[1],l="start"===n;return"horizontal"===e?(u=u+r+(l?1:-1)*o[0]/2,i=l?"right":"left"):(s=s+r+(l?1:-1)*o[1]/2,a=l?"bottom":"top"),{x:u,y:s,align:i,verticalAlign:a}},e.prototype._renderWeekText=function(t,e,n,r){var o=t.getModel("dayLabel");if(o.get("show")){var i=t.coordinateSystem,a=o.get("position"),u=o.get("nameMap"),s=o.get("margin"),l=i.getFirstDayOfWeek();q(u)&&(u=wX[u.toUpperCase()]||[]);var c=i.getNextNDay(e.end.time,7-e.lweek).time,f=[i.getCellWidth(),i.getCellHeight()];s=Ro(s,Math.min(f[1],f[0])),"start"===a&&(c=i.getNextNDay(e.start.time,-(7+e.fweek)).time,s=-s);for(var d=0;d<7;d++){var h=i.getNextNDay(c,d),p=i.dataToRect([h.time],!1).center,g=d;g=Math.abs((d+l)%7);var m=new Us({z2:30,style:I(Cd(o,{text:u[g]}),this._weekTextPositionControl(p,n,a,s,f))});r.add(m)}}},e.type="calendar",e}(Lv),SX=_X,CX=864e5,MX=function(){function t(e,n,r){this.type="calendar",this.dimensions=t.dimensions,this.getDimensionsInfo=t.getDimensionsInfo,this._model=e}return t.getDimensionsInfo=function(){return[{name:"time",type:"time"},"value"]},t.prototype.getRangeInfo=function(){return this._rangeInfo},t.prototype.getModel=function(){return this._model},t.prototype.getRect=function(){return this._rect},t.prototype.getCellWidth=function(){return this._sw},t.prototype.getCellHeight=function(){return this._sh},t.prototype.getOrient=function(){return this._orient},t.prototype.getFirstDayOfWeek=function(){return this._firstDayOfWeek},t.prototype.getDateInfo=function(t){t=Yo(t);var e=t.getFullYear(),n=t.getMonth()+1,r=n<10?"0"+n:""+n,o=t.getDate(),i=o<10?"0"+o:""+o,a=t.getDay();return a=Math.abs((a+7-this.getFirstDayOfWeek())%7),{y:e+"",m:r,d:i,day:a,time:t.getTime(),formatedDate:e+"-"+r+"-"+i,date:t}},t.prototype.getNextNDay=function(t,e){return e=e||0,0===e?this.getDateInfo(t):(t=new Date(this.getDateInfo(t).time),t.setDate(t.getDate()+e),this.getDateInfo(t))},t.prototype.update=function(t,e){this._firstDayOfWeek=+this._model.getModel("dayLabel").get("firstDay"),this._orient=this._model.get("orient"),this._lineWidth=this._model.getModel("itemStyle").getItemStyle().lineWidth||0,this._rangeInfo=this._getRangeInfo(this._initRangeOption());var n=this._rangeInfo.weeks||1,r=["width","height"],o=this._model.getCellSize().slice(),i=this._model.getBoxLayoutParams(),a="horizontal"===this._orient?[n,7]:[7,n];z([0,1],function(t){l(o,t)&&(i[r[t]]=o[t]*a[t])});var u={width:e.getWidth(),height:e.getHeight()},s=this._rect=lp(i,u);function l(t,e){return null!=t[e]&&"auto"!==t[e]}z([0,1],function(t){l(o,t)||(o[t]=s[r[t]]/a[t])}),this._sw=o[0],this._sh=o[1]},t.prototype.dataToPoint=function(t,e){X(t)&&(t=t[0]),null==e&&(e=!0);var n=this.getDateInfo(t),r=this._rangeInfo,o=n.formatedDate;if(e&&!(n.time>=r.start.time&&n.time<r.end.time+CX))return[NaN,NaN];var i=n.day,a=this._getRangeInfo([r.start.time,o]).nthWeek;return"vertical"===this._orient?[this._rect.x+i*this._sw+this._sw/2,this._rect.y+a*this._sh+this._sh/2]:[this._rect.x+a*this._sw+this._sw/2,this._rect.y+i*this._sh+this._sh/2]},t.prototype.pointToData=function(t){var e=this.pointToDate(t);return e&&e.time},t.prototype.dataToRect=function(t,e){var n=this.dataToPoint(t,e);return{contentShape:{x:n[0]-(this._sw-this._lineWidth)/2,y:n[1]-(this._sh-this._lineWidth)/2,width:this._sw-this._lineWidth,height:this._sh-this._lineWidth},center:n,tl:[n[0]-this._sw/2,n[1]-this._sh/2],tr:[n[0]+this._sw/2,n[1]-this._sh/2],br:[n[0]+this._sw/2,n[1]+this._sh/2],bl:[n[0]-this._sw/2,n[1]+this._sh/2]}},t.prototype.pointToDate=function(t){var e=Math.floor((t[0]-this._rect.x)/this._sw)+1,n=Math.floor((t[1]-this._rect.y)/this._sh)+1,r=this._rangeInfo.range;return"vertical"===this._orient?this._getDateByWeeksAndDay(n,e-1,r):this._getDateByWeeksAndDay(e,n-1,r)},t.prototype.convertToPixel=function(t,e,n){var r=TX(e);return r===this?r.dataToPoint(n):null},t.prototype.convertFromPixel=function(t,e,n){var r=TX(e);return r===this?r.pointToData(n):null},t.prototype.containPoint=function(t){return console.warn("Not implemented."),!1},t.prototype._initRangeOption=function(){var t,e=this._model.get("range");if(X(e)&&1===e.length&&(e=e[0]),X(e))t=e;else{var n=e.toString();if(/^\d{4}$/.test(n)&&(t=[n+"-01-01",n+"-12-31"]),/^\d{4}[\/|-]\d{1,2}$/.test(n)){var r=this.getDateInfo(n),o=r.date;o.setMonth(o.getMonth()+1);var i=this.getNextNDay(o,-1);t=[r.formatedDate,i.formatedDate]}/^\d{4}[\/|-]\d{1,2}[\/|-]\d{1,2}$/.test(n)&&(t=[n,n])}if(!t)return e;var a=this._getRangeInfo(t);return a.start.time>a.end.time&&t.reverse(),t},t.prototype._getRangeInfo=function(t){var e,n=[this.getDateInfo(t[0]),this.getDateInfo(t[1])];n[0].time>n[1].time&&(e=!0,n.reverse());var r=Math.floor(n[1].time/CX)-Math.floor(n[0].time/CX)+1,o=new Date(n[0].time),i=o.getDate(),a=n[1].date.getDate();o.setDate(i+r-1);var u=o.getDate();if(u!==a){var s=o.getTime()-n[1].time>0?1:-1;while((u=o.getDate())!==a&&(o.getTime()-n[1].time)*s>0)r-=s,o.setDate(u-s)}var l=Math.floor((r+n[0].day+6)/7),c=e?1-l:l-1;return e&&n.reverse(),{range:[n[0].formatedDate,n[1].formatedDate],start:n[0],end:n[1],allDay:r,weeks:l,nthWeek:c,fweek:n[0].day,lweek:n[1].day}},t.prototype._getDateByWeeksAndDay=function(t,e,n){var r=this._getRangeInfo(n);if(t>r.weeks||0===t&&e<r.fweek||t===r.weeks&&e>r.lweek)return null;var o=7*(t-1)-r.fweek+e,i=new Date(r.start.time);return i.setDate(+r.start.d+o),this.getDateInfo(i)},t.create=function(e,n){var r=[];return e.eachComponent("calendar",function(o){var i=new t(o,e,n);r.push(i),o.coordinateSystem=i}),e.eachSeries(function(t){"calendar"===t.get("coordinateSystem")&&(t.coordinateSystem=r[t.get("calendarIndex")||0])}),r},t.dimensions=["time","value"],t}();function TX(t){var e=t.calendarModel,n=t.seriesModel,r=e?e.coordinateSystem:n?n.coordinateSystem:null;return r}var kX=MX;function DX(t){t.registerComponentModel(bX),t.registerComponentView(SX),t.registerCoordinateSystem("calendar",kX)}var AX=Di(),IX={path:null,compoundPath:null,group:_o,image:xs,text:Us},OX=function(t){var e=t.graphic;X(e)?e[0]&&e[0].elements?t.graphic=[t.graphic[0]]:t.graphic=[{elements:e}]:e&&!e.elements&&(t.graphic=[{elements:[e]}])},LX=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n.preventAutoZ=!0,n}return i(e,t),e.prototype.mergeOption=function(e,n){var r=this.option.elements;this.option.elements=null,t.prototype.mergeOption.call(this,e,n),this.option.elements=r},e.prototype.optionUpdated=function(t,e){var n=this.option,r=(e?n:t).elements,o=n.elements=e?[]:n.elements,i=[];this._flatten(r,i,null);var a=fi(o,i,"normalMerge"),u=this._elOptionsToUpdate=[];z(a,function(t,e){var n=t.newOption;n&&(u.push(n),BX(t,n),VX(o,e,n),HX(o[e],n))},this);for(var s=o.length-1;s>=0;s--)null==o[s]?o.splice(s,1):delete o[s].$action},e.prototype._flatten=function(t,e,n){z(t,function(t){if(t){n&&(t.parentOption=n),e.push(t);var r=t.children;"group"===t.type&&r&&this._flatten(r,e,t),delete t.children}},this)},e.prototype.useElOptionsToUpdate=function(){var t=this._elOptionsToUpdate;return this._elOptionsToUpdate=null,t},e.type="graphic",e.defaultOption={elements:[]},e}(bp),EX=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n}return i(e,t),e.prototype.init=function(){this._elMap=mt()},e.prototype.render=function(t,e,n){t!==this._lastGraphicModel&&this._clear(),this._lastGraphicModel=t,this._updateElements(t),this._relocate(t,n)},e.prototype._updateElements=function(t){var e=t.useElOptionsToUpdate();if(e){var n=this._elMap,r=this.group;z(e,function(e){var o=xi(e.id,null),i=null!=o?n.get(o):null,a=xi(e.parentId,null),u=null!=a?n.get(a):r,s=e.type,l=e.style;"text"===s&&l&&e.hv&&e.hv[1]&&(l.textVerticalAlign=l.textBaseline=l.verticalAlign=l.align=null);var c=e.textContent,f=e.textConfig;if(l&&sW(l,s,!!f,!!c)){var d=lW(l,s,!0);!f&&d.textConfig&&(f=e.textConfig=d.textConfig),!c&&d.textContent&&(c=d.textContent)}var h=PX(e);var p=e.$action||"merge";"merge"===p?i?i.attr(h):NX(o,u,h,n):"replace"===p?(RX(i,n),NX(o,u,h,n)):"remove"===p&&RX(i,n);var g=n.get(o);if(g&&c)if("merge"===p){var m=g.getTextContent();m?m.attr(c):g.setTextContent(new Us(c))}else"replace"===p&&g.setTextContent(new Us(c));if(g){var v=AX(g);v.__ecGraphicWidthOption=e.width,v.__ecGraphicHeightOption=e.height,FX(g,t,e),yd({el:g,componentModel:t,itemName:g.name,itemTooltipOption:e.tooltip})}})}},e.prototype._relocate=function(t,e){for(var n=t.option.elements,r=this.group,o=this._elMap,i=e.getWidth(),a=e.getHeight(),u=0;u<n.length;u++){var s=n[u],l=xi(s.id,null),c=null!=l?o.get(l):null;if(c&&c.isGroup){var f=c.parent,d=f===r,h=AX(c),p=AX(f);h.__ecGraphicWidth=Ro(h.__ecGraphicWidthOption,d?i:p.__ecGraphicWidth)||0,h.__ecGraphicHeight=Ro(h.__ecGraphicHeightOption,d?a:p.__ecGraphicHeight)||0}}for(u=n.length-1;u>=0;u--){s=n[u],l=xi(s.id,null),c=null!=l?o.get(l):null;if(c){f=c.parent,p=AX(f);var g=f===r?{width:i,height:a}:{width:p.__ecGraphicWidth,height:p.__ecGraphicHeight};cp(c,s,g,null,{hv:s.hv,boundingMode:s.bounding})}}},e.prototype._clear=function(){var t=this._elMap;t.each(function(e){RX(e,t)}),this._elMap=mt()},e.prototype.dispose=function(){this._clear()},e.type="graphic",e}(Lv);function NX(t,e,n,r){var o=n.type;var i=bt(IX,o)?IX[o]:Uf(o);var a=new i(n);e.add(a),r.set(t,a),AX(a).__ecGraphicId=t}function RX(t,e){var n=t&&t.parent;n&&("group"===t.type&&t.traverse(function(t){RX(t,e)}),e.removeKey(AX(t).__ecGraphicId),n.remove(t))}function PX(t){return t=I({},t),z(["id","parentId","$action","hv","bounding","textContent"].concat(op),function(e){delete t[e]}),t}function zX(t,e){var n;return z(e,function(e){null!=t[e]&&"auto"!==t[e]&&(n=!0)}),n}function BX(t,e){var n=t.existing;if(e.id=t.keyInfo.id,!e.type&&n&&(e.type=n.type),null==e.parentId){var r=e.parentOption;r?e.parentId=r.id:n&&(e.parentId=n.parentId)}e.parentOption=null}function VX(t,e,n){var r=I({},n),o=t[e],i=n.$action||"merge";"merge"===i?o?(D(o,r,!0),hp(o,r,{ignoreSize:!0}),gp(n,o)):t[e]=r:"replace"===i?t[e]=r:"remove"===i&&o&&(t[e]=null)}function HX(t,e){if(t&&(t.hv=e.hv=[zX(e,["left","right"]),zX(e,["top","bottom"])],"group"===t.type)){var n=t,r=e;null==n.width&&(n.width=r.width=0),null==n.height&&(n.height=r.height=0)}}function FX(t,e,n){var r=Gs(t).eventData;t.silent||t.ignore||r||(r=Gs(t).eventData={componentType:"graphic",componentIndex:e.componentIndex,name:t.name}),r&&(r.info=n.info)}function WX(t){t.registerComponentModel(LX),t.registerComponentView(EX),t.registerPreprocessor(OX)}var UX=["x","y","radius","angle","single"],GX=["cartesian2d","polar","singleAxis"];function jX(t){var e=t.get("coordinateSystem");return E(GX,e)>=0}function XX(t){return t+"Axis"}function YX(t,e){var n,r=mt(),o=[],i=mt();t.eachComponent({mainType:"dataZoom",query:e},function(t){i.get(t.uid)||u(t)});do{n=!1,t.eachComponent("dataZoom",a)}while(n);function a(t){!i.get(t.uid)&&s(t)&&(u(t),n=!0)}function u(t){i.set(t.uid,!0),o.push(t),l(t)}function s(t){var e=!1;return t.eachTargetAxis(function(t,n){var o=r.get(t);o&&o[n]&&(e=!0)}),e}function l(t){t.eachTargetAxis(function(t,e){(r.get(t)||r.set(t,[]))[e]=!0})}return o}function qX(t){var e=t.ecModel,n={infoList:[],infoMap:mt()};return t.eachTargetAxis(function(t,r){var o=e.getComponent(XX(t),r);if(o){var i=o.getCoordSysModel();if(i){var a=i.uid,u=n.infoMap.get(a);u||(u={model:i,axisModels:[]},n.infoList.push(u),n.infoMap.set(a,u)),u.axisModels.push(o)}}}),n}var ZX=function(){function t(){this.indexList=[],this.indexMap=[]}return t.prototype.add=function(t){this.indexMap[t]||(this.indexList.push(t),this.indexMap[t]=!0)},t}(),$X=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n._autoThrottle=!0,n._noTarget=!0,n._rangePropMode=["percent","percent"],n}return i(e,t),e.prototype.init=function(t,e,n){var r=KX(t);this.settledOption=r,this.mergeDefaultAndTheme(t,n),this._doInit(r)},e.prototype.mergeOption=function(t){var e=KX(t);D(this.option,t,!0),D(this.settledOption,e,!0),this._doInit(e)},e.prototype._doInit=function(t){var e=this.option;this._setDefaultThrottle(t),this._updateRangeUse(t);var n=this.settledOption;z([["start","startValue"],["end","endValue"]],function(t,r){"value"===this._rangePropMode[r]&&(e[t[0]]=n[t[0]]=null)},this),this._resetTarget()},e.prototype._resetTarget=function(){var t=this.get("orient",!0),e=this._targetAxisInfoMap=mt(),n=this._fillSpecifiedTargetAxis(e);n?this._orient=t||this._makeAutoOrientByTargetAxis():(this._orient=t||"horizontal",this._fillAutoTargetAxisByOrient(e,this._orient)),this._noTarget=!0,e.each(function(t){t.indexList.length&&(this._noTarget=!1)},this)},e.prototype._fillSpecifiedTargetAxis=function(t){var e=!1;return z(UX,function(n){var r=this.getReferringComponents(XX(n),Ei);if(r.specified){e=!0;var o=new ZX;z(r.models,function(t){o.add(t.componentIndex)}),t.set(n,o)}},this),e},e.prototype._fillAutoTargetAxisByOrient=function(t,e){var n=this.ecModel,r=!0;if(r){var o="vertical"===e?"y":"x",i=n.findComponents({mainType:o+"Axis"});a(i,o)}if(r){i=n.findComponents({mainType:"singleAxis",filter:function(t){return t.get("orient",!0)===e}});a(i,"single")}function a(e,n){var o=e[0];if(o){var i=new ZX;if(i.add(o.componentIndex),t.set(n,i),r=!1,"x"===n||"y"===n){var a=o.getReferringComponents("grid",Li).models[0];a&&z(e,function(t){o.componentIndex!==t.componentIndex&&a===t.getReferringComponents("grid",Li).models[0]&&i.add(t.componentIndex)})}}}r&&z(UX,function(e){if(r){var o=n.findComponents({mainType:XX(e),filter:function(t){return"category"===t.get("type",!0)}});if(o[0]){var i=new ZX;i.add(o[0].componentIndex),t.set(e,i),r=!1}}},this)},e.prototype._makeAutoOrientByTargetAxis=function(){var t;return this.eachTargetAxis(function(e){!t&&(t=e)},this),"y"===t?"vertical":"horizontal"},e.prototype._setDefaultThrottle=function(t){if(t.hasOwnProperty("throttle")&&(this._autoThrottle=!1),this._autoThrottle){var e=this.ecModel.option;this.option.throttle=e.animation&&e.animationDurationUpdate>0?100:20}},e.prototype._updateRangeUse=function(t){var e=this._rangePropMode,n=this.get("rangeMode");z([["start","startValue"],["end","endValue"]],function(r,o){var i=null!=t[r[0]],a=null!=t[r[1]];i&&!a?e[o]="percent":!i&&a?e[o]="value":n?e[o]=n[o]:i&&(e[o]="percent")})},e.prototype.noTarget=function(){return this._noTarget},e.prototype.getFirstTargetAxisModel=function(){var t;return this.eachTargetAxis(function(e,n){null==t&&(t=this.ecModel.getComponent(XX(e),n))},this),t},e.prototype.eachTargetAxis=function(t,e){this._targetAxisInfoMap.each(function(n,r){z(n.indexList,function(n){t.call(e,r,n)})})},e.prototype.getAxisProxy=function(t,e){var n=this.getAxisModel(t,e);if(n)return n.__dzAxisProxy},e.prototype.getAxisModel=function(t,e){var n=this._targetAxisInfoMap.get(t);if(n&&n.indexMap[e])return this.ecModel.getComponent(XX(t),e)},e.prototype.setRawRange=function(t){var e=this.option,n=this.settledOption;z([["start","startValue"],["end","endValue"]],function(r){null==t[r[0]]&&null==t[r[1]]||(e[r[0]]=n[r[0]]=t[r[0]],e[r[1]]=n[r[1]]=t[r[1]])},this),this._updateRangeUse(t)},e.prototype.setCalculatedRange=function(t){var e=this.option;z(["start","startValue","end","endValue"],function(n){e[n]=t[n]})},e.prototype.getPercentRange=function(){var t=this.findRepresentativeAxisProxy();if(t)return t.getDataPercentWindow()},e.prototype.getValueRange=function(t,e){if(null!=t||null!=e)return this.getAxisProxy(t,e).getDataValueWindow();var n=this.findRepresentativeAxisProxy();return n?n.getDataValueWindow():void 0},e.prototype.findRepresentativeAxisProxy=function(t){if(t)return t.__dzAxisProxy;for(var e,n=this._targetAxisInfoMap.keys(),r=0;r<n.length;r++)for(var o=n[r],i=this._targetAxisInfoMap.get(o),a=0;a<i.indexList.length;a++){var u=this.getAxisProxy(o,i.indexList[a]);if(u.hostedBy(this))return u;e||(e=u)}return e},e.prototype.getRangePropMode=function(){return this._rangePropMode.slice()},e.prototype.getOrient=function(){return this._orient},e.type="dataZoom",e.dependencies=["xAxis","yAxis","radiusAxis","angleAxis","singleAxis","series","toolbox"],e.defaultOption={zlevel:0,z:4,filterMode:"filter",start:0,end:100},e}(bp);function KX(t){var e={};return z(["start","end","startValue","endValue","throttle"],function(n){t.hasOwnProperty(n)&&(e[n]=t[n])}),e}var JX=$X,QX=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n}return i(e,t),e.type="dataZoom.select",e}(JX),tY=QX,eY=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n}return i(e,t),e.prototype.render=function(t,e,n,r){this.dataZoomModel=t,this.ecModel=e,this.api=n},e.type="dataZoom",e}(Lv),nY=eY,rY=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n}return i(e,t),e.type="dataZoom.select",e}(nY),oY=rY,iY=z,aY=zo,uY=function(){function t(t,e,n,r){this._dimName=t,this._axisIndex=e,this.ecModel=r,this._dataZoomModel=n}return t.prototype.hostedBy=function(t){return this._dataZoomModel===t},t.prototype.getDataValueWindow=function(){return this._valueWindow.slice()},t.prototype.getDataPercentWindow=function(){return this._percentWindow.slice()},t.prototype.getTargetSeriesModels=function(){var t=[];return this.ecModel.eachSeries(function(e){if(jX(e)){var n=XX(this._dimName),r=e.getReferringComponents(n,Li).models[0];r&&this._axisIndex===r.componentIndex&&t.push(e)}},this),t},t.prototype.getAxisModel=function(){return this.ecModel.getComponent(this._dimName+"Axis",this._axisIndex)},t.prototype.getMinMaxSpan=function(){return k(this._minMaxSpan)},t.prototype.calculateDataWindow=function(t){var e,n=this._dataExtent,r=this.getAxisModel(),o=r.axis.scale,i=this._dataZoomModel.getRangePropMode(),a=[0,100],u=[],s=[];iY(["start","end"],function(r,l){var c=t[r],f=t[r+"Value"];"percent"===i[l]?(null==c&&(c=a[l]),f=o.parse(No(c,a,n))):(e=!0,f=null==f?n[l]:o.parse(f),c=No(f,n,a)),s[l]=f,u[l]=c}),aY(s),aY(u);var l=this._minMaxSpan;function c(t,e,n,r,i){var a=i?"Span":"ValueSpan";nz(0,t,n,"all",l["min"+a],l["max"+a]);for(var u=0;u<2;u++)e[u]=No(t[u],n,r,!0),i&&(e[u]=o.parse(e[u]))}return e?c(s,u,n,a,!1):c(u,s,a,n,!0),{valueWindow:s,percentWindow:u}},t.prototype.reset=function(t){if(t===this._dataZoomModel){var e=this.getTargetSeriesModels();this._dataExtent=sY(this,this._dimName,e),this._updateMinMaxSpan();var n=this.calculateDataWindow(t.settledOption);this._valueWindow=n.valueWindow,this._percentWindow=n.percentWindow,this._setAxisModel()}},t.prototype.filterData=function(t,e){if(t===this._dataZoomModel){var n=this._dimName,r=this.getTargetSeriesModels(),o=t.get("filterMode"),i=this._valueWindow;"none"!==o&&iY(r,function(t){var e=t.getData(),r=e.mapDimensionsAll(n);r.length&&("weakFilter"===o?e.filterSelf(function(t){for(var n,o,a,u=0;u<r.length;u++){var s=e.get(r[u],t),l=!isNaN(s),c=s<i[0],f=s>i[1];if(l&&!c&&!f)return!0;l&&(a=!0),c&&(n=!0),f&&(o=!0)}return a&&n&&o}):iY(r,function(n){if("empty"===o)t.setData(e=e.map(n,function(t){return a(t)?t:NaN}));else{var r={};r[n]=i,e.selectRange(r)}}),iY(r,function(t){e.setApproximateExtent(i,t)}))})}function a(t){return t>=i[0]&&t<=i[1]}},t.prototype._updateMinMaxSpan=function(){var t=this._minMaxSpan={},e=this._dataZoomModel,n=this._dataExtent;iY(["min","max"],function(r){var o=e.get(r+"Span"),i=e.get(r+"ValueSpan");null!=i&&(i=this.getAxisModel().axis.scale.parse(i)),null!=i?o=No(n[0]+i,n,[0,100],!0):null!=o&&(i=No(o,[0,100],n,!0)-n[0]),t[r+"Span"]=o,t[r+"ValueSpan"]=i},this)},t.prototype._setAxisModel=function(){var t=this.getAxisModel(),e=this._percentWindow,n=this._valueWindow;if(e){var r=Ho(n,[0,500]);r=Math.min(r,20);var o=t.axis.scale.rawExtentInfo;0!==e[0]&&o.setDeterminedMinMax("min",+n[0].toFixed(r)),100!==e[1]&&o.setDeterminedMinMax("max",+n[1].toFixed(r)),o.freeze()}},t}();function sY(t,e,n){var r=[1/0,-1/0];iY(n,function(t){TA(r,t.getData(),e)});var o=t.getAxisModel(),i=dA(o.axis.scale,o,r).calculate();return[i.min,i.max]}var lY=uY,cY={getTargetSeries:function(t){function e(e){t.eachComponent("dataZoom",function(n){n.eachTargetAxis(function(r,o){var i=t.getComponent(XX(r),o);e(r,o,i,n)})})}e(function(t,e,n,r){n.__dzAxisProxy=null});var n=[];e(function(e,r,o,i){o.__dzAxisProxy||(o.__dzAxisProxy=new lY(e,r,i,t),n.push(o.__dzAxisProxy))});var r=mt();return z(n,function(t){z(t.getTargetSeriesModels(),function(t){r.set(t.uid,t)})}),r},overallReset:function(t,e){t.eachComponent("dataZoom",function(t){t.eachTargetAxis(function(e,n){t.getAxisProxy(e,n).reset(t)}),t.eachTargetAxis(function(n,r){t.getAxisProxy(n,r).filterData(t,e)})}),t.eachComponent("dataZoom",function(t){var e=t.findRepresentativeAxisProxy();if(e){var n=e.getDataPercentWindow(),r=e.getDataValueWindow();t.setCalculatedRange({start:n[0],end:n[1],startValue:r[0],endValue:r[1]})}})}},fY=cY;function dY(t){t.registerAction("dataZoom",function(t,e){var n=YX(e,t);z(n,function(e){e.setRawRange({start:t.start,end:t.end,startValue:t.startValue,endValue:t.endValue})})})}var hY=!1;function pY(t){hY||(hY=!0,t.registerProcessor(t.PRIORITY.PROCESSOR.FILTER,fY),dY(t),t.registerSubTypeDefaulter("dataZoom",function(){return"slider"}))}function gY(t){t.registerComponentModel(tY),t.registerComponentView(oY),pY(t)}var mY=function(){function t(){}return t}(),vY={};function yY(t,e){vY[t]=e}function bY(t){return vY[t]}var xY=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n}return i(e,t),e.prototype.optionUpdated=function(){t.prototype.optionUpdated.apply(this,arguments);var e=this.ecModel;z(this.option.feature,function(t,n){var r=bY(n);r&&(r.getDefaultOption&&(r.defaultOption=r.getDefaultOption(e)),D(t,r.defaultOption))})},e.type="toolbox",e.layoutMode={type:"box",ignoreSize:!0},e.defaultOption={show:!0,z:6,zlevel:0,orient:"horizontal",left:"right",top:"top",backgroundColor:"transparent",borderColor:"#ccc",borderRadius:0,borderWidth:0,padding:5,itemSize:15,itemGap:8,showTitle:!0,iconStyle:{borderColor:"#666",color:"none"},emphasis:{iconStyle:{borderColor:"#3E98C5"}},tooltip:{show:!1,position:"bottom"}},e}(bp),wY=xY;function _Y(t,e,n){var r=e.getBoxLayoutParams(),o=e.get("padding"),i={width:n.getWidth(),height:n.getHeight()},a=lp(r,i,o);up(e.get("orient"),t,e.get("itemGap"),a.width,a.height),cp(t,r,i,o)}function SY(t,e){var n=jh(e.get("padding")),r=e.getItemStyle(["color","opacity"]);return r.fill=e.get("backgroundColor"),t=new As({shape:{x:t.x-n[3],y:t.y-n[0],width:t.width+n[1]+n[3],height:t.height+n[0]+n[2],r:e.get("borderRadius")},style:r,silent:!0,z2:-1}),t}var CY=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.render=function(t,e,n,r){var o=this.group;if(o.removeAll(),t.get("show")){var i=+t.get("itemSize"),a=t.get("feature")||{},u=this._features||(this._features={}),s=[];z(a,function(t,e){s.push(e)}),new GC(this._featureNames||[],s).add(l).update(l).remove(j(l,null)).execute(),this._featureNames=s,_Y(o,t,n),o.add(SY(o.getBoundingRect(),t)),o.eachChild(function(t){var e=t.__title,r=t.ensureState("emphasis"),a=r.textConfig||(r.textConfig={}),u=t.getTextContent(),s=u&&u.states.emphasis;if(s&&!Y(s)&&e){var l=s.style||(s.style={}),c=no(e,Us.makeFont(l)),f=t.x+o.x,d=t.y+o.y+i,h=!1;d+c.height>n.getHeight()&&(a.position="top",h=!0);var p=h?-5-c.height:i+8;f+c.width/2>n.getWidth()?(a.position=["100%",p],l.align="right"):f-c.width/2<0&&(a.position=[0,p],l.align="left")}})}function l(o,i){var l,f=s[o],d=s[i],h=a[f],p=new Yd(h,t,t.ecModel);if(r&&null!=r.newTitle&&r.featureName===f&&(h.title=r.newTitle),f&&!d){if(MY(f))l={onclick:p.option.onclick,featureName:f};else{var g=bY(f);if(!g)return;l=new g}u[f]=l}else if(l=u[d],!l)return;l.uid=Zd("toolbox-feature"),l.model=p,l.ecModel=e,l.api=n;var m=l instanceof mY;f||!d?!p.get("show")||m&&l.unusable?m&&l.remove&&l.remove(e,n):(c(p,l,f),p.setIconStatus=function(t,e){var n=this.option,r=this.iconPaths;n.iconStatus=n.iconStatus||{},n.iconStatus[t]=e,r[t]&&("emphasis"===e?kl:Dl)(r[t])},l instanceof mY&&l.render&&l.render(p,e,n,r)):m&&l.dispose&&l.dispose(e,n)}function c(r,a,u){var s,l,c=r.getModel("iconStyle"),f=r.getModel(["emphasis","iconStyle"]),d=a instanceof mY&&a.getIcons?a.getIcons():r.get("icon"),h=r.get("title")||{};"string"===typeof d?(s={},s[u]=d):s=d,"string"===typeof h?(l={},l[u]=h):l=h;var p=r.iconPaths={};z(s,function(u,s){var d=hd(u,{},{x:-i/2,y:-i/2,width:i,height:i});d.setStyle(c.getItemStyle());var h=d.ensureState("emphasis");h.style=f.getItemStyle();var g=new Us({style:{text:l[s],align:f.get("textAlign"),borderRadius:f.get("textBorderRadius"),padding:f.get("textPadding"),fill:null},ignore:!0});d.setTextContent(g),yd({el:d,componentModel:t,itemName:s,formatterParamsExtra:{title:l[s]}}),d.__title=l[s],d.on("mouseover",function(){var e=f.getItemStyle(),n="vertical"===t.get("orient")?null==t.get("right")?"right":"left":null==t.get("bottom")?"bottom":"top";g.setStyle({fill:f.get("textFill")||e.fill||e.stroke||"#000",backgroundColor:f.get("textBackgroundColor")}),d.setTextConfig({position:f.get("textPosition")||n}),g.ignore=!t.get("showTitle"),kl(this)}).on("mouseout",function(){"emphasis"!==r.get(["iconStatus",s])&&Dl(this),g.hide()}),("emphasis"===r.get(["iconStatus",s])?kl:Dl)(d),o.add(d),d.on("click",G(a.onclick,a,e,n,s)),p[s]=d})}},e.prototype.updateView=function(t,e,n,r){z(this._features,function(t){t instanceof mY&&t.updateView&&t.updateView(t.model,e,n,r)})},e.prototype.remove=function(t,e){z(this._features,function(n){n instanceof mY&&n.remove&&n.remove(t,e)}),this.group.removeAll()},e.prototype.dispose=function(t,e){z(this._features,function(n){n instanceof mY&&n.dispose&&n.dispose(t,e)})},e.type="toolbox",e}(Lv);function MY(t){return 0===t.indexOf("my")}var TY=CY,kY=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.onclick=function(t,e){var n=this.model,r=n.get("name")||t.get("title.0.text")||"echarts",o="svg"===e.getZr().painter.getType(),i=o?"svg":n.get("type",!0)||"png",a=e.getConnectedDataURL({type:i,backgroundColor:n.get("backgroundColor",!0)||t.get("backgroundColor")||"#fff",connectedBackgroundColor:n.get("connectedBackgroundColor"),excludeComponents:n.get("excludeComponents"),pixelRatio:n.get("pixelRatio")});if("function"!==typeof MouseEvent||!d.browser.newEdge&&(d.browser.ie||d.browser.edge))if(window.navigator.msSaveOrOpenBlob||o){var u=a.split(","),s=u[0].indexOf("base64")>-1,l=o?decodeURIComponent(u[1]):u[1];s&&(l=window.atob(l));var c=r+"."+i;if(window.navigator.msSaveOrOpenBlob){var f=l.length,h=new Uint8Array(f);while(f--)h[f]=l.charCodeAt(f);var p=new Blob([h]);window.navigator.msSaveOrOpenBlob(p,c)}else{var g=document.createElement("iframe");document.body.appendChild(g);var m=g.contentWindow,v=m.document;v.open("image/svg+xml","replace"),v.write(l),v.close(),m.focus(),v.execCommand("SaveAs",!0,c),document.body.removeChild(g)}}else{var y=n.get("lang"),b='<body style="margin:0;"><img src="'+a+'" style="max-width:100%;" title="'+(y&&y[0]||"")+'" /></body>',x=window.open();x.document.write(b),x.document.title=r}else{var w=document.createElement("a");w.download=r+"."+i,w.target="_blank",w.href=a;var _=new MouseEvent("click",{view:document.defaultView,bubbles:!0,cancelable:!1});w.dispatchEvent(_)}},e.getDefaultOption=function(t){var e={show:!0,icon:"M4.7,22.9L29.3,45.5L54.7,23.4M4.6,43.6L4.6,58L53.8,58L53.8,43.6M29.2,45.1L29.2,0",title:t.getLocale(["toolbox","saveAsImage","title"]),type:"png",connectedBackgroundColor:"#fff",name:"",excludeComponents:["toolbox"],lang:t.getLocale(["toolbox","saveAsImage","lang"])};return e},e}(mY);kY.prototype.unusable=!d.canvasSupported;var DY=kY,AY="__ec_magicType_stack__",IY=[["line","bar"],["stack"]],OY=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.getIcons=function(){var t=this.model,e=t.get("icon"),n={};return z(t.get("type"),function(t){e[t]&&(n[t]=e[t])}),n},e.getDefaultOption=function(t){var e={show:!0,type:[],icon:{line:"M4.1,28.9h7.1l9.3-22l7.4,38l9.7-19.7l3,12.8h14.9M4.1,58h51.4",bar:"M6.7,22.9h10V48h-10V22.9zM24.9,13h10v35h-10V13zM43.2,2h10v46h-10V2zM3.1,58h53.7",stack:"M8.2,38.4l-8.4,4.1l30.6,15.3L60,42.5l-8.1-4.1l-21.5,11L8.2,38.4z M51.9,30l-8.1,4.2l-13.4,6.9l-13.9-6.9L8.2,30l-8.4,4.2l8.4,4.2l22.2,11l21.5-11l8.1-4.2L51.9,30z M51.9,21.7l-8.1,4.2L35.7,30l-5.3,2.8L24.9,30l-8.4-4.1l-8.3-4.2l-8.4,4.2L8.2,30l8.3,4.2l13.9,6.9l13.4-6.9l8.1-4.2l8.1-4.1L51.9,21.7zM30.4,2.2L-0.2,17.5l8.4,4.1l8.3,4.2l8.4,4.2l5.5,2.7l5.3-2.7l8.1-4.2l8.1-4.2l8.1-4.1L30.4,2.2z"},title:t.getLocale(["toolbox","magicType","title"]),option:{},seriesIndex:{}};return e},e.prototype.onclick=function(t,e,n){var r=this.model,o=r.get(["seriesIndex",n]);if(LY[n]){var i,a={series:[]},u=function(t){var e=t.subType,o=t.id,i=LY[n](e,o,t,r);i&&(O(i,t.option),a.series.push(i));var u=t.coordinateSystem;if(u&&"cartesian2d"===u.type&&("line"===n||"bar"===n)){var s=u.getAxesByScale("ordinal")[0];if(s){var l=s.dim,c=l+"Axis",f=t.getReferringComponents(c,Li).models[0],d=f.componentIndex;a[c]=a[c]||[];for(var h=0;h<=d;h++)a[c][d]=a[c][d]||{};a[c][d].boundaryGap="bar"===n}}};z(IY,function(t){E(t,n)>=0&&z(t,function(t){r.setIconStatus(t,"normal")})}),r.setIconStatus(n,"emphasis"),t.eachComponent({mainType:"series",query:null==o?null:{seriesIndex:o}},u);var s=n;"stack"===n&&(i=D({stack:r.option.title.tiled,tiled:r.option.title.stack},r.option.title),"emphasis"!==r.get(["iconStatus",n])&&(s="tiled")),e.dispatchAction({type:"changeMagicType",currentType:s,newOption:a,newTitle:i,featureName:"magicType"})}},e}(mY),LY={line:function(t,e,n,r){if("bar"===t)return D({id:e,type:"line",data:n.get("data"),stack:n.get("stack"),markPoint:n.get("markPoint"),markLine:n.get("markLine")},r.get(["option","line"])||{},!0)},bar:function(t,e,n,r){if("line"===t)return D({id:e,type:"bar",data:n.get("data"),stack:n.get("stack"),markPoint:n.get("markPoint"),markLine:n.get("markLine")},r.get(["option","bar"])||{},!0)},stack:function(t,e,n,r){var o=n.get("stack")===AY;if("line"===t||"bar"===t)return r.setIconStatus("stack",o?"normal":"emphasis"),D({id:e,stack:o?"":AY},r.get(["option","stack"])||{},!0)}};iS({type:"changeMagicType",event:"magicTypeChanged",update:"prepareAndUpdate"},function(t,e){e.mergeOption(t.newOption)});var EY=OY,NY=new Array(60).join("-"),RY="\t";function PY(t){var e={},n=[],r=[];return t.eachRawSeries(function(t){var o=t.coordinateSystem;if(!o||"cartesian2d"!==o.type&&"polar"!==o.type)n.push(t);else{var i=o.getBaseAxis();if("category"===i.type){var a=i.dim+"_"+i.index;e[a]||(e[a]={categoryAxis:i,valueAxis:o.getOtherAxis(i),series:[]},r.push({axisDim:i.dim,axisIndex:i.index})),e[a].series.push(t)}else n.push(t)}}),{seriesGroupByCategoryAxis:e,other:n,meta:r}}function zY(t){var e=[];return z(t,function(t,n){var r=t.categoryAxis,o=t.valueAxis,i=o.dim,a=[" "].concat(B(t.series,function(t){return t.name})),u=[r.model.getCategories()];z(t.series,function(t){var e=t.getRawData();u.push(t.getRawData().mapArray(e.mapDimension(i),function(t){return t}))});for(var s=[a.join(RY)],l=0;l<u[0].length;l++){for(var c=[],f=0;f<u.length;f++)c.push(u[f][l]);s.push(c.join(RY))}e.push(s.join("\n"))}),e.join("\n\n"+NY+"\n\n")}function BY(t){return B(t,function(t){var e=t.getRawData(),n=[t.name],r=[];return e.each(e.dimensions,function(){for(var t=arguments.length,o=arguments[t-1],i=e.getName(o),a=0;a<t-1;a++)r[a]=arguments[a];n.push((i?i+RY:"")+r.join(RY))}),n.join("\n")}).join("\n\n"+NY+"\n\n")}function VY(t){var e=PY(t);return{value:H([zY(e.seriesGroupByCategoryAxis),BY(e.other)],function(t){return!!t.replace(/[\n\t\s]/g,"")}).join("\n\n"+NY+"\n\n"),meta:e.meta}}function HY(t){return t.replace(/^\s\s*/,"").replace(/\s\s*$/,"")}function FY(t){var e=t.slice(0,t.indexOf("\n"));if(e.indexOf(RY)>=0)return!0}var WY=new RegExp("["+RY+"]+","g");function UY(t){for(var e=t.split(/\n+/g),n=HY(e.shift()).split(WY),r=[],o=B(n,function(t){return{name:t,data:[]}}),i=0;i<e.length;i++){var a=HY(e[i]).split(WY);r.push(a.shift());for(var u=0;u<a.length;u++)o[u]&&(o[u].data[i]=a[u])}return{series:o,categories:r}}function GY(t){for(var e=t.split(/\n+/g),n=HY(e.shift()),r=[],o=0;o<e.length;o++){var i=HY(e[o]);if(i){var a=i.split(WY),u="",s=void 0,l=!1;isNaN(a[0])?(l=!0,u=a[0],a=a.slice(1),r[o]={name:u,value:[]},s=r[o].value):s=r[o]=[];for(var c=0;c<a.length;c++)s.push(+a[c]);1===s.length&&(l?r[o].value=s[0]:r[o]=s[0])}}return{name:n,data:r}}function jY(t,e){var n=t.split(new RegExp("\n*"+NY+"\n*","g")),r={series:[]};return z(n,function(t,n){if(FY(t)){var o=UY(t),i=e[n],a=i.axisDim+"Axis";i&&(r[a]=r[a]||[],r[a][i.axisIndex]={data:o.categories},r.series=r.series.concat(o.series))}else{o=GY(t);r.series.push(o)}}),r}var XY=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.onclick=function(t,e){var n=e.getDom(),r=this.model;this._dom&&n.removeChild(this._dom);var o=document.createElement("div");o.style.cssText="position:absolute;left:5px;top:5px;bottom:5px;right:5px;",o.style.backgroundColor=r.get("backgroundColor")||"#fff";var i=document.createElement("h4"),a=r.get("lang")||[];i.innerHTML=a[0]||r.get("title"),i.style.cssText="margin: 10px 20px;",i.style.color=r.get("textColor");var u=document.createElement("div"),s=document.createElement("textarea");u.style.cssText="display:block;width:100%;overflow:auto;";var l=r.get("optionToContent"),c=r.get("contentToOption"),f=VY(t);if("function"===typeof l){var d=l(e.getOption());"string"===typeof d?u.innerHTML=d:tt(d)&&u.appendChild(d)}else u.appendChild(s),s.readOnly=r.get("readOnly"),s.style.cssText="width:100%;height:100%;font-family:monospace;font-size:14px;line-height:1.6rem;",s.style.color=r.get("textColor"),s.style.borderColor=r.get("textareaBorderColor"),s.style.backgroundColor=r.get("textareaColor"),s.value=f.value;var h=f.meta,p=document.createElement("div");p.style.cssText="position:absolute;bottom:0;left:0;right:0;";var g="float:right;margin-right:20px;border:none;cursor:pointer;padding:2px 5px;font-size:12px;border-radius:3px",m=document.createElement("div"),v=document.createElement("div");g+=";background-color:"+r.get("buttonColor"),g+=";color:"+r.get("buttonTextColor");var y=this;function b(){n.removeChild(o),y._dom=null}le(m,"click",b),le(v,"click",function(){if(null==c&&null!=l||null!=c&&null==l)b();else{var t;try{t="function"===typeof c?c(u,e.getOption()):jY(s.value,h)}catch(n){throw b(),new Error("Data view format error "+n)}t&&e.dispatchAction({type:"changeDataView",newOption:t}),b()}}),m.innerHTML=a[1],v.innerHTML=a[2],v.style.cssText=g,m.style.cssText=g,!r.get("readOnly")&&p.appendChild(v),p.appendChild(m),o.appendChild(i),o.appendChild(u),o.appendChild(p),u.style.height=n.clientHeight-80+"px",n.appendChild(o),this._dom=o},e.prototype.remove=function(t,e){this._dom&&e.getDom().removeChild(this._dom)},e.prototype.dispose=function(t,e){this.remove(t,e)},e.getDefaultOption=function(t){var e={show:!0,readOnly:!1,optionToContent:null,contentToOption:null,icon:"M17.5,17.3H33 M17.5,17.3H33 M45.4,29.5h-28 M11.5,2v56H51V14.8L38.4,2H11.5z M38.4,2.2v12.7H51 M45.4,41.7h-28",title:t.getLocale(["toolbox","dataView","title"]),lang:t.getLocale(["toolbox","dataView","lang"]),backgroundColor:"#fff",textColor:"#000",textareaColor:"#fff",textareaBorderColor:"#333",buttonColor:"#c23531",buttonTextColor:"#fff"};return e},e}(mY);function YY(t,e){return B(t,function(t,n){var r=e&&e[n];if(K(r)&&!X(r)){var o=K(t)&&!X(t);o||(t={value:t});var i=null!=r.name&&null==t.name;return t=O(t,r),i&&delete t.name,t}return t})}iS({type:"changeDataView",event:"dataViewChanged",update:"prepareAndUpdate"},function(t,e){var n=[];z(t.newOption.series,function(t){var r=e.getSeriesByName(t.name)[0];if(r){var o=r.get("data");n.push({name:t.name,data:YY(t.data,o)})}else n.push(I({type:"scatter"},t))}),e.mergeOption(O({series:n},t.newOption))});var qY=XY,ZY=z,$Y=Di();function KY(t,e){var n=eq(t);ZY(e,function(e,r){for(var o=n.length-1;o>=0;o--){var i=n[o];if(i[r])break}if(o<0){var a=t.queryComponents({mainType:"dataZoom",subType:"select",id:r})[0];if(a){var u=a.getPercentRange();n[0][r]={dataZoomId:r,start:u[0],end:u[1]}}}}),n.push(e)}function JY(t){var e=eq(t),n=e[e.length-1];e.length>1&&e.pop();var r={};return ZY(n,function(t,n){for(var o=e.length-1;o>=0;o--)if(t=e[o][n],t){r[n]=t;break}}),r}function QY(t){$Y(t).snapshots=null}function tq(t){return eq(t).length}function eq(t){var e=$Y(t);return e.snapshots||(e.snapshots=[{}]),e.snapshots}var nq=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.onclick=function(t,e){QY(t),e.dispatchAction({type:"restore",from:this.uid})},e.getDefaultOption=function(t){var e={show:!0,icon:"M3.8,33.4 M47,18.9h9.8V8.7 M56.3,20.1 C52.1,9,40.5,0.6,26.8,2.1C12.6,3.7,1.6,16.2,2.1,30.6 M13,41.1H3.1v10.2 M3.7,39.9c4.2,11.1,15.8,19.5,29.5,18 c14.2-1.6,25.2-14.1,24.7-28.5",title:t.getLocale(["toolbox","restore","title"])};return e},e}(mY);iS({type:"restore",event:"restore",update:"prepareAndUpdate"},function(t,e){e.resetOption("recreate")});var rq=nq,oq=["grid","xAxis","yAxis","geo","graph","polar","radiusAxis","angleAxis","bmap"],iq=function(){function t(t,e,n){var r=this;this._targetInfoList=[];var o=uq(e,t);z(sq,function(t,e){(!n||!n.include||E(n.include,e)>=0)&&t(o,r._targetInfoList)})}return t.prototype.setOutputRanges=function(t,e){return this.matchOutputRanges(t,e,function(t,e,n){if((t.coordRanges||(t.coordRanges=[])).push(e),!t.coordRange){t.coordRange=e;var r=fq[t.brushType](0,n,e);t.__rangeOffset={offset:hq[t.brushType](r.values,t.range,[1,1]),xyMinMax:r.xyMinMax}}}),t},t.prototype.matchOutputRanges=function(t,e,n){z(t,function(t){var r=this.findTargetInfo(t,e);r&&!0!==r&&z(r.coordSyses,function(r){var o=fq[t.brushType](1,r,t.range,!0);n(t,o.values,r,e)})},this)},t.prototype.setInputRanges=function(t,e){z(t,function(t){var n=this.findTargetInfo(t,e);if(t.range=t.range||[],n&&!0!==n){t.panelId=n.panelId;var r=fq[t.brushType](0,n.coordSys,t.coordRange),o=t.__rangeOffset;t.range=o?hq[t.brushType](r.values,o.offset,gq(r.xyMinMax,o.xyMinMax)):r.values}},this)},t.prototype.makePanelOpts=function(t,e){return B(this._targetInfoList,function(n){var r=n.getPanelRect();return{panelId:n.panelId,defaultBrushType:e?e(n):null,clipPath:yB(r),isTargetByCursor:xB(r,t,n.coordSysModel),getLinearBrushOtherExtent:bB(r)}})},t.prototype.controlSeries=function(t,e,n){var r=this.findTargetInfo(t,n);return!0===r||r&&E(r.coordSyses,e.coordinateSystem)>=0},t.prototype.findTargetInfo=function(t,e){for(var n=this._targetInfoList,r=uq(e,t),o=0;o<n.length;o++){var i=n[o],a=t.panelId;if(a){if(i.panelId===a)return i}else for(var u=0;u<lq.length;u++)if(lq[u](r,i))return i}return!0},t}();function aq(t){return t[0]>t[1]&&t.reverse(),t}function uq(t,e){return Ii(t,e,{includeMainTypes:oq})}var sq={grid:function(t,e){var n=t.xAxisModels,r=t.yAxisModels,o=t.gridModels,i=mt(),a={},u={};(n||r||o)&&(z(n,function(t){var e=t.axis.grid.model;i.set(e.id,e),a[e.id]=!0}),z(r,function(t){var e=t.axis.grid.model;i.set(e.id,e),u[e.id]=!0}),z(o,function(t){i.set(t.id,t),a[t.id]=!0,u[t.id]=!0}),i.each(function(t){var o=t.coordinateSystem,i=[];z(o.getCartesians(),function(t,e){(E(n,t.getAxis("x").model)>=0||E(r,t.getAxis("y").model)>=0)&&i.push(t)}),e.push({panelId:"grid--"+t.id,gridModel:t,coordSysModel:t,coordSys:i[0],coordSyses:i,getPanelRect:cq.grid,xAxisDeclared:a[t.id],yAxisDeclared:u[t.id]})}))},geo:function(t,e){z(t.geoModels,function(t){var n=t.coordinateSystem;e.push({panelId:"geo--"+t.id,geoModel:t,coordSysModel:t,coordSys:n,coordSyses:[n],getPanelRect:cq.geo})})}},lq=[function(t,e){var n=t.xAxisModel,r=t.yAxisModel,o=t.gridModel;return!o&&n&&(o=n.axis.grid.model),!o&&r&&(o=r.axis.grid.model),o&&o===e.gridModel},function(t,e){var n=t.geoModel;return n&&n===e.geoModel}],cq={grid:function(){return this.coordSys.master.getRect().clone()},geo:function(){var t=this.coordSys,e=t.getBoundingRect().clone();return e.applyTransform(id(t)),e}},fq={lineX:j(dq,0),lineY:j(dq,1),rect:function(t,e,n,r){var o=t?e.pointToData([n[0][0],n[1][0]],r):e.dataToPoint([n[0][0],n[1][0]],r),i=t?e.pointToData([n[0][1],n[1][1]],r):e.dataToPoint([n[0][1],n[1][1]],r),a=[aq([o[0],i[0]]),aq([o[1],i[1]])];return{values:a,xyMinMax:a}},polygon:function(t,e,n,r){var o=[[1/0,-1/0],[1/0,-1/0]],i=B(n,function(n){var i=t?e.pointToData(n,r):e.dataToPoint(n,r);return o[0][0]=Math.min(o[0][0],i[0]),o[1][0]=Math.min(o[1][0],i[1]),o[0][1]=Math.max(o[0][1],i[0]),o[1][1]=Math.max(o[1][1],i[1]),i});return{values:i,xyMinMax:o}}};function dq(t,e,n,r){var o=n.getAxis(["x","y"][t]),i=aq(B([0,1],function(t){return e?o.coordToData(o.toLocalCoord(r[t]),!0):o.toGlobalCoord(o.dataToCoord(r[t]))})),a=[];return a[t]=i,a[1-t]=[NaN,NaN],{values:i,xyMinMax:a}}var hq={lineX:j(pq,0),lineY:j(pq,1),rect:function(t,e,n){return[[t[0][0]-n[0]*e[0][0],t[0][1]-n[0]*e[0][1]],[t[1][0]-n[1]*e[1][0],t[1][1]-n[1]*e[1][1]]]},polygon:function(t,e,n){return B(t,function(t,r){return[t[0]-n[0]*e[r][0],t[1]-n[1]*e[r][1]]})}};function pq(t,e,n,r){return[e[0]-r[t]*n[0],e[1]-r[t]*n[1]]}function gq(t,e){var n=mq(t),r=mq(e),o=[n[0]/r[0],n[1]/r[1]];return isNaN(o[0])&&(o[0]=1),isNaN(o[1])&&(o[1]=1),o}function mq(t){return t?[t[0][1]-t[0][0],t[1][1]-t[1][0]]:[NaN,NaN]}var vq=iq,yq=z,bq=Si("toolbox-dataZoom_"),xq=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.render=function(t,e,n,r){this._brushController||(this._brushController=new vB(n.getZr()),this._brushController.on("brush",G(this._onBrush,this)).mount()),Cq(t,e,this,r,n),Sq(t,e)},e.prototype.onclick=function(t,e,n){wq[n].call(this)},e.prototype.remove=function(t,e){this._brushController&&this._brushController.unmount()},e.prototype.dispose=function(t,e){this._brushController&&this._brushController.dispose()},e.prototype._onBrush=function(t){var e=t.areas;if(t.isEnd&&e.length){var n={},r=this.ecModel;this._brushController.updateCovers([]);var o=new vq(_q(this.model),r,{include:["grid"]});o.matchOutputRanges(e,r,function(t,e,n){if("cartesian2d"===n.type){var r=t.brushType;"rect"===r?(i("x",n,e[0]),i("y",n,e[1])):i({lineX:"x",lineY:"y"}[r],n,e)}}),KY(r,n),this._dispatchZoomAction(n)}function i(t,e,o){var i=e.getAxis(t),u=i.model,s=a(t,u,r),l=s.findRepresentativeAxisProxy(u).getMinMaxSpan();null==l.minValueSpan&&null==l.maxValueSpan||(o=nz(0,o.slice(),i.scale.getExtent(),0,l.minValueSpan,l.maxValueSpan)),s&&(n[s.id]={dataZoomId:s.id,startValue:o[0],endValue:o[1]})}function a(t,e,n){var r;return n.eachComponent({mainType:"dataZoom",subType:"select"},function(n){var o=n.getAxisModel(t,e.componentIndex);o&&(r=n)}),r}},e.prototype._dispatchZoomAction=function(t){var e=[];yq(t,function(t,n){e.push(k(t))}),e.length&&this.api.dispatchAction({type:"dataZoom",from:this.uid,batch:e})},e.getDefaultOption=function(t){var e={show:!0,filterMode:"filter",icon:{zoom:"M0,13.5h26.9 M13.5,26.9V0 M32.1,13.5H58V58H13.5 V32.1",back:"M22,1.4L9.9,13.5l12.3,12.3 M10.3,13.5H54.9v44.6 H10.3v-26"},title:t.getLocale(["toolbox","dataZoom","title"]),brushStyle:{borderWidth:0,color:"rgba(210,219,238,0.2)"}};return e},e}(mY),wq={zoom:function(){var t=!this._isZoomActive;this.api.dispatchAction({type:"takeGlobalCursor",key:"dataZoomSelect",dataZoomSelectActive:t})},back:function(){this._dispatchZoomAction(JY(this.ecModel))}};function _q(t){var e={xAxisIndex:t.get("xAxisIndex",!0),yAxisIndex:t.get("yAxisIndex",!0),xAxisId:t.get("xAxisId",!0),yAxisId:t.get("yAxisId",!0)};return null==e.xAxisIndex&&null==e.xAxisId&&(e.xAxisIndex="all"),null==e.yAxisIndex&&null==e.yAxisId&&(e.yAxisIndex="all"),e}function Sq(t,e){t.setIconStatus("back",tq(e)>1?"emphasis":"normal")}function Cq(t,e,n,r,o){var i=n._isZoomActive;r&&"takeGlobalCursor"===r.type&&(i="dataZoomSelect"===r.key&&r.dataZoomSelectActive),n._isZoomActive=i,t.setIconStatus("zoom",i?"emphasis":"normal");var a=new vq(_q(t),e,{include:["grid"]}),u=a.makePanelOpts(o,function(t){return t.xAxisDeclared&&!t.yAxisDeclared?"lineX":!t.xAxisDeclared&&t.yAxisDeclared?"lineY":"rect"});n._brushController.setPanels(u).enableBrush(!(!i||!u.length)&&{brushType:"auto",brushStyle:t.getModel("brushStyle").getItemStyle()})}Wp("dataZoom",function(t){var e=t.getComponent("toolbox",0),n=["feature","dataZoom"];if(e&&null!=e.get(n)){var r=e.getModel(n),o=[],i=_q(r),a=Ii(t,i);return yq(a.xAxisModels,function(t){return u(t,"xAxis","xAxisIndex")}),yq(a.yAxisModels,function(t){return u(t,"yAxis","yAxisIndex")}),o}function u(t,e,n){var i=t.componentIndex,a={type:"select",$fromToolbox:!0,filterMode:r.get("filterMode",!0)||"filter",id:bq+e+i};a[n]=i,o.push(a)}});var Mq=xq;function Tq(t){t.registerComponentModel(wY),t.registerComponentView(TY),yY("saveAsImage",DY),yY("magicType",EY),yY("dataView",qY),yY("dataZoom",Mq),yY("restore",rq),mS(gY)}var kq=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n}return i(e,t),e.type="tooltip",e.dependencies=["axisPointer"],e.defaultOption={zlevel:0,z:60,show:!0,showContent:!0,trigger:"item",triggerOn:"mousemove|click",alwaysShowContent:!1,displayMode:"single",renderMode:"auto",confine:null,showDelay:0,hideDelay:100,transitionDuration:.4,enterable:!1,backgroundColor:"#fff",shadowBlur:10,shadowColor:"rgba(0, 0, 0, .2)",shadowOffsetX:1,shadowOffsetY:2,borderRadius:4,borderWidth:1,padding:null,extraCssText:"",axisPointer:{type:"line",axis:"auto",animation:"auto",animationDurationUpdate:200,animationEasingUpdate:"exponentialOut",crossStyle:{color:"#999",width:1,type:"dashed",textStyle:{}}},textStyle:{color:"#666",fontSize:14}},e}(bp),Dq=kq;function Aq(t){var e=t.get("confine");return null!=e?!!e:"richText"===t.get("renderMode")}function Iq(t){if(d.domSupported)for(var e=document.documentElement.style,n=0,r=t.length;n<r;n++)if(t[n]in e)return t[n]}var Oq=Iq(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),Lq=Iq(["webkitTransition","transition","OTransition","MozTransition","msTransition"]);function Eq(t,e){if(!t)return e;e=Gh(e,!0);var n=t.indexOf(e);return t=-1===n?e:"-"+t.slice(0,n)+"-"+e,t.toLowerCase()}function Nq(t,e){var n=t.currentStyle||document.defaultView&&document.defaultView.getComputedStyle(t);return n?e?n[e]:n:null}var Rq=Eq(Lq,"transition"),Pq=Eq(Oq,"transform"),zq="position:absolute;display:block;border-style:solid;white-space:nowrap;z-index:9999999;"+(d.transform3dSupported?"will-change:transform;":"");function Bq(t){return t="left"===t?"right":"right"===t?"left":"top"===t?"bottom":"top",t}function Vq(t,e,n){if(!q(n)||"inside"===n)return"";e=ep(e);var r=Bq(n),o=r+":-6px;",i=Pq+":";E(["left","right"],r)>-1?(o+="top:50%",i+="translateY(-50%) rotate("+("left"===r?-225:-45)+"deg)"):(o+="left:50%",i+="translateX(-50%) rotate("+("top"===r?225:45)+"deg)");var a=e+" solid 1px;",u=["position:absolute;width:10px;height:10px;",o+";"+i+";","border-bottom:"+a,"border-right:"+a,"background-color:"+t+";","box-shadow:8px 8px 16px -3px #000;"];return'<div style="'+u.join("")+'"></div>'}function Hq(t,e){var n="cubic-bezier(0.23,1,0.32,1)",r=" "+t/2+"s "+n,o="opacity"+r+",visibility"+r;return e||(r=" "+t+"s "+n,o+=d.transformSupported?","+Pq+r:",left"+r+",top"+r),Rq+":"+o}function Fq(t,e,n){var r=t.toFixed(0)+"px",o=e.toFixed(0)+"px";if(!d.transformSupported)return n?"top:"+o+";left:"+r+";":[["top",o],["left",r]];var i=d.transform3dSupported,a="translate"+(i?"3d":"")+"("+r+","+o+(i?",0":"")+")";return n?"top:0;left:0;"+Pq+":"+a+";":[["top",0],["left",0],[Oq,a]]}function Wq(t){var e=[],n=t.get("fontSize"),r=t.getTextColor();r&&e.push("color:"+r),e.push("font:"+t.getFont()),n&&e.push("line-height:"+Math.round(3*n/2)+"px");var o=t.get("textShadowColor"),i=t.get("textShadowBlur")||0,a=t.get("textShadowOffsetX")||0,u=t.get("textShadowOffsetY")||0;return o&&i&&e.push("text-shadow:"+a+"px "+u+"px "+i+"px "+o),z(["decoration","align"],function(n){var r=t.get(n);r&&e.push("text-"+n+":"+r)}),e.join(";")}function Uq(t,e,n){var r=[],o=t.get("transitionDuration"),i=t.get("backgroundColor"),a=t.get("shadowBlur"),u=t.get("shadowColor"),s=t.get("shadowOffsetX"),l=t.get("shadowOffsetY"),c=t.getModel("textStyle"),f=gv(t,"html"),h=s+"px "+l+"px "+a+"px "+u;return r.push("box-shadow:"+h),e&&o&&r.push(Hq(o,n)),i&&(d.canvasSupported?r.push("background-color:"+i):(r.push("background-color:#"+bn(i)),r.push("filter:alpha(opacity=70)"))),z(["width","color","radius"],function(e){var n="border-"+e,o=Gh(n),i=t.get(o);null!=i&&r.push(n+":"+i+("color"===e?"":"px"))}),r.push(Wq(c)),null!=f&&r.push("padding:"+jh(f).join("px ")+"px"),r.join(";")+";"}function Gq(t,e,n,r,o){var i=e&&e.painter;if(n){var a=i&&i.getViewportRoot();a&&$t(t,a,document.body,r,o)}else{t[0]=r,t[1]=o;var u=i&&i.getViewportRootOffset();u&&(t[0]+=u.offsetLeft,t[1]+=u.offsetTop)}t[2]=t[0]/e.getWidth(),t[3]=t[1]/e.getHeight()}var jq=function(){function t(t,e,n){if(this._show=!1,this._styleCoord=[0,0,0,0],this._enterable=!0,this._firstShow=!0,this._longHide=!0,d.wxa)return null;var r=document.createElement("div");r.domBelongToZr=!0,this.el=r;var o=this._zr=e.getZr(),i=this._appendToBody=n&&n.appendToBody;Gq(this._styleCoord,o,i,e.getWidth()/2,e.getHeight()/2),i?document.body.appendChild(r):t.appendChild(r),this._container=t;var a=this;r.onmouseenter=function(){a._enterable&&(clearTimeout(a._hideTimeout),a._show=!0),a._inContent=!0},r.onmousemove=function(t){if(t=t||window.event,!a._enterable){var e=o.handler,n=o.painter.getViewportRoot();ue(n,t,!0),e.dispatch("mousemove",t)}},r.onmouseleave=function(){a._inContent=!1,a._enterable&&a._show&&a.hideLater(a._hideDelay)}}return t.prototype.update=function(t){var e=this._container,n=Nq(e,"position"),r=e.style;"absolute"!==r.position&&"absolute"!==n&&(r.position="relative");var o=t.get("alwaysShowContent");o&&this._moveIfResized(),this.el.className=t.get("className")||""},t.prototype.show=function(t,e){clearTimeout(this._hideTimeout),clearTimeout(this._longHideTimeout);var n=this.el,r=n.style,o=this._styleCoord;n.innerHTML?r.cssText=zq+Uq(t,!this._firstShow,this._longHide)+Fq(o[0],o[1],!0)+"border-color:"+ep(e)+";"+(t.get("extraCssText")||"")+";pointer-event:"+(this._enterable?"auto":"none"):r.display="none",this._show=!0,this._firstShow=!1,this._longHide=!1},t.prototype.setContent=function(t,e,n,r,o){if(null!=t){var i=this.el;if(q(o)&&"item"===n.get("trigger")&&!Aq(n)&&(t+=Vq(n.get("backgroundColor"),r,o)),q(t))i.innerHTML=t;else if(t){i.innerHTML="",X(t)||(t=[t]);for(var a=0;a<t.length;a++)tt(t[a])&&t[a].parentNode!==i&&i.appendChild(t[a])}}},t.prototype.setEnterable=function(t){this._enterable=t},t.prototype.getSize=function(){var t=this.el;return[t.clientWidth,t.clientHeight]},t.prototype.moveTo=function(t,e){var n=this._styleCoord;if(Gq(n,this._zr,this._appendToBody,t,e),null!=n[0]&&null!=n[1]){var r=this.el.style,o=Fq(n[0],n[1]);z(o,function(t){r[t[0]]=t[1]})}},t.prototype._moveIfResized=function(){var t=this._styleCoord[2],e=this._styleCoord[3];this.moveTo(t*this._zr.getWidth(),e*this._zr.getHeight())},t.prototype.hide=function(){var t=this,e=this.el.style;e.visibility="hidden",e.opacity="0",d.transform3dSupported&&(e.willChange=""),this._show=!1,this._longHideTimeout=setTimeout(function(){return t._longHide=!0},500)},t.prototype.hideLater=function(t){!this._show||this._inContent&&this._enterable||(t?(this._hideDelay=t,this._show=!1,this._hideTimeout=setTimeout(G(this.hide,this),t)):this.hide())},t.prototype.isShow=function(){return this._show},t.prototype.dispose=function(){this.el.parentNode.removeChild(this.el)},t.prototype.getOuterSize=function(){var t=this.el.clientWidth,e=this.el.clientHeight,n=Nq(this.el);return n&&(t+=parseInt(n.borderLeftWidth,10)+parseInt(n.borderRightWidth,10),e+=parseInt(n.borderTopWidth,10)+parseInt(n.borderBottomWidth,10)),{width:t,height:e}},t}(),Xq=jq,Yq=function(){function t(t){this._show=!1,this._styleCoord=[0,0,0,0],this._enterable=!0,this._zr=t.getZr(),$q(this._styleCoord,this._zr,t.getWidth()/2,t.getHeight()/2)}return t.prototype.update=function(t){var e=t.get("alwaysShowContent");e&&this._moveIfResized()},t.prototype.show=function(){this._hideTimeout&&clearTimeout(this._hideTimeout),this.el.show(),this._show=!0},t.prototype.setContent=function(t,e,n,r,o){K(t)&&eg(""),this.el&&this._zr.remove(this.el);var i=n.getModel("textStyle");this.el=new Us({style:{rich:e.richTextStyles,text:t,lineHeight:22,backgroundColor:n.get("backgroundColor"),borderRadius:n.get("borderRadius"),borderWidth:1,borderColor:r,shadowColor:n.get("shadowColor"),shadowBlur:n.get("shadowBlur"),shadowOffsetX:n.get("shadowOffsetX"),shadowOffsetY:n.get("shadowOffsetY"),textShadowColor:i.get("textShadowColor"),textShadowBlur:i.get("textShadowBlur")||0,textShadowOffsetX:i.get("textShadowOffsetX")||0,textShadowOffsetY:i.get("textShadowOffsetY")||0,fill:n.get(["textStyle","color"]),padding:gv(n,"richText"),verticalAlign:"top",align:"left"},z:n.get("z")}),this._zr.add(this.el);var a=this;this.el.on("mouseover",function(){a._enterable&&(clearTimeout(a._hideTimeout),a._show=!0),a._inContent=!0}),this.el.on("mouseout",function(){a._enterable&&a._show&&a.hideLater(a._hideDelay),a._inContent=!1})},t.prototype.setEnterable=function(t){this._enterable=t},t.prototype.getSize=function(){var t=this.el,e=this.el.getBoundingRect(),n=Zq(t.style);return[e.width+n.left+n.right,e.height+n.top+n.bottom]},t.prototype.moveTo=function(t,e){var n=this.el;if(n){var r=this._styleCoord;$q(r,this._zr,t,e),t=r[0],e=r[1];var o=n.style,i=qq(o.borderWidth||0),a=Zq(o);n.x=t+i+a.left,n.y=e+i+a.top,n.markRedraw()}},t.prototype._moveIfResized=function(){var t=this._styleCoord[2],e=this._styleCoord[3];this.moveTo(t*this._zr.getWidth(),e*this._zr.getHeight())},t.prototype.hide=function(){this.el&&this.el.hide(),this._show=!1},t.prototype.hideLater=function(t){!this._show||this._inContent&&this._enterable||(t?(this._hideDelay=t,this._show=!1,this._hideTimeout=setTimeout(G(this.hide,this),t)):this.hide())},t.prototype.isShow=function(){return this._show},t.prototype.getOuterSize=function(){var t=this.getSize();return{width:t[0],height:t[1]}},t.prototype.dispose=function(){this._zr.remove(this.el)},t}();function qq(t){return Math.max(0,t)}function Zq(t){var e=qq(t.shadowBlur||0),n=qq(t.shadowOffsetX||0),r=qq(t.shadowOffsetY||0);return{left:qq(e-n),right:qq(e+n),top:qq(e-r),bottom:qq(e+r)}}function $q(t,e,n,r){t[0]=n,t[1]=r,t[2]=t[0]/e.getWidth(),t[3]=t[1]/e.getHeight()}var Kq=Yq,Jq=G,Qq=z,tZ=Ro,eZ=new As({shape:{x:-1,y:-1,width:2,height:2}}),nZ=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n}return i(e,t),e.prototype.init=function(t,e){if(!d.node){var n=t.getComponent("tooltip"),r=n.get("renderMode");this._renderMode=zi(r),this._tooltipContent="richText"===this._renderMode?new Kq(e):new Xq(e.getDom(),e,{appendToBody:n.get("appendToBody",!0)})}},e.prototype.render=function(t,e,n){if(!d.node){this.group.removeAll(),this._tooltipModel=t,this._ecModel=e,this._api=n,this._alwaysShowContent=t.get("alwaysShowContent");var r=this._tooltipContent;r.update(t),r.setEnterable(t.get("enterable")),this._initGlobalListener(),this._keepShow()}},e.prototype._initGlobalListener=function(){var t=this._tooltipModel,e=t.get("triggerOn");OG("itemTooltip",this._api,Jq(function(t,n,r){"none"!==e&&(e.indexOf(t)>=0?this._tryShow(n,r):"leave"===t&&this._hide(r))},this))},e.prototype._keepShow=function(){var t=this._tooltipModel,e=this._ecModel,n=this._api;if(null!=this._lastX&&null!=this._lastY&&"none"!==t.get("triggerOn")){var r=this;clearTimeout(this._refreshUpdateTimeout),this._refreshUpdateTimeout=setTimeout(function(){!n.isDisposed()&&r.manuallyShowTip(t,e,n,{x:r._lastX,y:r._lastY,dataByCoordSys:r._lastDataByCoordSys})})}},e.prototype.manuallyShowTip=function(t,e,n,r){if(r.from!==this.uid&&!d.node){var o=oZ(r,n);this._ticket="";var i=r.dataByCoordSys,a=lZ(r,e,n);if(a){var u=a.el.getBoundingRect().clone();u.applyTransform(a.el.transform),this._tryShow({offsetX:u.x+u.width/2,offsetY:u.y+u.height/2,target:a.el,position:r.position,positionDefault:"bottom"},o)}else if(r.tooltip&&null!=r.x&&null!=r.y){var s=eZ;s.x=r.x,s.y=r.y,s.update(),Gs(s).tooltipConfig={name:null,option:r.tooltip},this._tryShow({offsetX:r.x,offsetY:r.y,target:s},o)}else if(i)this._tryShow({offsetX:r.x,offsetY:r.y,position:r.position,dataByCoordSys:i,tooltipOption:r.tooltipOption},o);else if(null!=r.seriesIndex){if(this._manuallyAxisShowTip(t,e,n,r))return;var l=HG(r,e),c=l.point[0],f=l.point[1];null!=c&&null!=f&&this._tryShow({offsetX:c,offsetY:f,target:l.el,position:r.position,positionDefault:"bottom"},o)}else null!=r.x&&null!=r.y&&(n.dispatchAction({type:"updateAxisPointer",x:r.x,y:r.y}),this._tryShow({offsetX:r.x,offsetY:r.y,position:r.position,target:n.getZr().findHover(r.x,r.y).target},o))}},e.prototype.manuallyHideTip=function(t,e,n,r){var o=this._tooltipContent;!this._alwaysShowContent&&this._tooltipModel&&o.hideLater(this._tooltipModel.get("hideDelay")),this._lastX=this._lastY=this._lastDataByCoordSys=null,r.from!==this.uid&&this._hide(oZ(r,n))},e.prototype._manuallyAxisShowTip=function(t,e,n,r){var o=r.seriesIndex,i=r.dataIndex,a=e.getComponent("axisPointer").coordSysAxesInfo;if(null!=o&&null!=i&&null!=a){var u=e.getSeriesByIndex(o);if(u){var s=u.getData(),l=rZ([s.getItemModel(i),u,(u.coordinateSystem||{}).model],this._tooltipModel);if("axis"===l.get("trigger"))return n.dispatchAction({type:"updateAxisPointer",seriesIndex:o,dataIndex:i,position:r.position}),!0}}},e.prototype._tryShow=function(t,e){var n=t.target,r=this._tooltipModel;if(r){this._lastX=t.offsetX,this._lastY=t.offsetY;var o=t.dataByCoordSys;if(o&&o.length)this._showAxisTooltip(o,t);else if(n){var i,a;this._lastDataByCoordSys=null,Cb(n,function(t){return null!=Gs(t).dataIndex?(i=t,!0):null!=Gs(t).tooltipConfig?(a=t,!0):void 0},!0),i?this._showSeriesItemTooltip(t,i,e):a?this._showComponentItemTooltip(t,a,e):this._hide(e)}else this._lastDataByCoordSys=null,this._hide(e)}},e.prototype._showOrMove=function(t,e){var n=t.get("showDelay");e=G(e,this),clearTimeout(this._showTimout),n>0?this._showTimout=setTimeout(e,n):e()},e.prototype._showAxisTooltip=function(t,e){var n=this._ecModel,r=this._tooltipModel,o=[e.offsetX,e.offsetY],i=rZ([e.tooltipOption],r),a=this._renderMode,u=[],s=rv("section",{blocks:[],noHeader:!0}),l=[],c=new mv;Qq(t,function(t){Qq(t.dataByAxis,function(t){var e=n.getComponent(t.axisDim+"Axis",t.axisIndex),r=t.value;if(e&&null!=r){var o=mG(r,e.axis,n,t.seriesDataIndices,t.valueLabelOpt),i=rv("section",{header:o,noHeader:!ft(o),sortBlocks:!0,blocks:[]});s.blocks.push(i),z(t.seriesDataIndices,function(s){var f=n.getSeriesByIndex(s.seriesIndex),d=s.dataIndexInside,h=f.getDataParams(d);h.axisDim=t.axisDim,h.axisIndex=t.axisIndex,h.axisType=t.axisType,h.axisId=t.axisId,h.axisValue=xA(e.axis,{value:r}),h.axisValueLabel=o,h.marker=c.makeTooltipMarker("item",ep(h.color),a);var p=Tm(f.formatTooltip(d,!0,null));p.markupFragment&&i.blocks.push(p.markupFragment),p.markupText&&l.push(p.markupText),u.push(h)})}})}),s.blocks.reverse(),l.reverse();var f=e.position,d=i.get("order"),h=uv(s,c,a,d,n.get("useUTC"),i.get("textStyle"));h&&l.unshift(h);var p="richText"===a?"\n\n":"<br/>",g=l.join(p);this._showOrMove(i,function(){this._updateContentNotChangedOnAxis(t)?this._updatePosition(i,f,o[0],o[1],this._tooltipContent,u):this._showTooltipContent(i,g,u,Math.random()+"",o[0],o[1],f,null,c)})},e.prototype._showSeriesItemTooltip=function(t,e,n){var r=this._ecModel,o=Gs(e),i=o.seriesIndex,a=r.getSeriesByIndex(i),u=o.dataModel||a,s=o.dataIndex,l=o.dataType,c=u.getData(l),f=this._renderMode,d=t.positionDefault,h=rZ([c.getItemModel(s),u,a&&(a.coordinateSystem||{}).model],this._tooltipModel,d?{position:d}:null),p=h.get("trigger");if(null==p||"item"===p){var g=u.getDataParams(s,l),m=new mv;g.marker=m.makeTooltipMarker("item",ep(g.color),f);var v=Tm(u.formatTooltip(s,!1,l)),y=h.get("order"),b=v.markupFragment?uv(v.markupFragment,m,f,y,r.get("useUTC"),h.get("textStyle")):v.markupText,x="item_"+u.name+"_"+s;this._showOrMove(h,function(){this._showTooltipContent(h,b,g,x,t.offsetX,t.offsetY,t.position,t.target,m)}),n({type:"showTip",dataIndexInside:s,dataIndex:c.getRawIndex(s),seriesIndex:i,from:this.uid})}},e.prototype._showComponentItemTooltip=function(t,e,n){var r=Gs(e),o=r.tooltipConfig,i=o.option||{};if(q(i)){var a=i;i={content:a,formatter:a}}var u=[i],s=this._ecModel.getComponent(r.componentMainType,r.componentIndex);s&&u.push(s),u.push({formatter:i.content});var l=t.positionDefault,c=rZ(u,this._tooltipModel,l?{position:l}:null),f=c.get("content"),d=Math.random()+"",h=new mv;this._showOrMove(c,function(){var n=k(c.get("formatterParams")||{});this._showTooltipContent(c,f,n,d,t.offsetX,t.offsetY,t.position,e,h)}),n({type:"showTip",from:this.uid})},e.prototype._showTooltipContent=function(t,e,n,r,o,i,a,u,s){if(this._ticket="",t.get("showContent")&&t.get("show")){var l=this._tooltipContent,c=t.get("formatter");a=a||t.get("position");var f=e,d=this._getNearestPoint([o,i],n,t.get("trigger"),t.get("borderColor")),h=d.color;if(c&&q(c)){var p=t.ecModel.get("useUTC"),g=X(n)?n[0]:n,m=g&&g.axisType&&g.axisType.indexOf("time")>=0;f=c,m&&(f=Mh(g.axisValue,f,p)),f=Jh(f,n,!0)}else if(Y(c)){var v=Jq(function(e,r){e===this._ticket&&(l.setContent(r,s,t,h,a),this._updatePosition(t,a,o,i,l,n,u))},this);this._ticket=r,f=c(n,r,v)}l.setContent(f,s,t,h,a),l.show(t,h),this._updatePosition(t,a,o,i,l,n,u)}},e.prototype._getNearestPoint=function(t,e,n,r){return"axis"===n||X(e)?{color:r||("html"===this._renderMode?"#fff":"none")}:X(e)?void 0:{color:r||e.color||e.borderColor}},e.prototype._updatePosition=function(t,e,n,r,o,i,a){var u=this._api.getWidth(),s=this._api.getHeight();e=e||t.get("position");var l=o.getSize(),c=t.get("align"),f=t.get("verticalAlign"),d=a&&a.getBoundingRect().clone();if(a&&d.applyTransform(a.transform),Y(e)&&(e=e([n,r],i,o.el,d,{viewSize:[u,s],contentSize:l.slice()})),X(e))n=tZ(e[0],u),r=tZ(e[1],s);else if(K(e)){var h=e;h.width=l[0],h.height=l[1];var p=lp(h,{width:u,height:s});n=p.x,r=p.y,c=null,f=null}else if(q(e)&&a){var g=uZ(e,d,l);n=g[0],r=g[1]}else{g=iZ(n,r,o,u,s,c?null:20,f?null:20);n=g[0],r=g[1]}if(c&&(n-=sZ(c)?l[0]/2:"right"===c?l[0]:0),f&&(r-=sZ(f)?l[1]/2:"bottom"===f?l[1]:0),Aq(t)){g=aZ(n,r,o,u,s);n=g[0],r=g[1]}o.moveTo(n,r)},e.prototype._updateContentNotChangedOnAxis=function(t){var e=this._lastDataByCoordSys,n=!!e&&e.length===t.length;return n&&Qq(e,function(e,r){var o=e.dataByAxis||[],i=t[r]||{},a=i.dataByAxis||[];n=n&&o.length===a.length,n&&Qq(o,function(t,e){var r=a[e]||{},o=t.seriesDataIndices||[],i=r.seriesDataIndices||[];n=n&&t.value===r.value&&t.axisType===r.axisType&&t.axisId===r.axisId&&o.length===i.length,n&&Qq(o,function(t,e){var r=i[e];n=n&&t.seriesIndex===r.seriesIndex&&t.dataIndex===r.dataIndex})})}),this._lastDataByCoordSys=t,!!n},e.prototype._hide=function(t){this._lastDataByCoordSys=null,t({type:"hideTip",from:this.uid})},e.prototype.dispose=function(t,e){d.node||(this._tooltipContent.dispose(),zG("itemTooltip",e))},e.type="tooltip",e}(Lv);function rZ(t,e,n){var r,o=e.ecModel;n?(r=new Yd(n,o,o),r=new Yd(e.option,r,o)):r=e;for(var i=t.length-1;i>=0;i--){var a=t[i];a&&(a instanceof Yd&&(a=a.get("tooltip",!0)),q(a)&&(a={formatter:a}),a&&(r=new Yd(a,r,o)))}return r}function oZ(t,e){return t.dispatchAction||G(e.dispatchAction,e)}function iZ(t,e,n,r,o,i,a){var u=n.getOuterSize(),s=u.width,l=u.height;return null!=i&&(t+s+i+2>r?t-=s+i:t+=i),null!=a&&(e+l+a>o?e-=l+a:e+=a),[t,e]}function aZ(t,e,n,r,o){var i=n.getOuterSize(),a=i.width,u=i.height;return t=Math.min(t+a,r)-a,e=Math.min(e+u,o)-u,t=Math.max(t,0),e=Math.max(e,0),[t,e]}function uZ(t,e,n){var r=n[0],o=n[1],i=10,a=5,u=0,s=0,l=e.width,c=e.height;switch(t){case"inside":u=e.x+l/2-r/2,s=e.y+c/2-o/2;break;case"top":u=e.x+l/2-r/2,s=e.y-o-i;break;case"bottom":u=e.x+l/2-r/2,s=e.y+c+i;break;case"left":u=e.x-r-i-a,s=e.y+c/2-o/2;break;case"right":u=e.x+l+i+a,s=e.y+c/2-o/2}return[u,s]}function sZ(t){return"center"===t||"middle"===t}function lZ(t,e,n){var r=Oi(t).queryOptionMap,o=r.keys()[0];if(o&&"series"!==o){var i=Ni(e,o,r.get(o),{useDefault:!1,enableAll:!1,enableNone:!1}),a=i.models[0];if(a){var u,s=n.getViewOfComponentModel(a);return s.group.traverse(function(e){var n=Gs(e).tooltipConfig;if(n&&n.name===t.name)return u=e,!0}),u?{componentMainType:o,componentIndex:a.componentIndex,el:u}:void 0}}}var cZ=nZ;function fZ(t){mS(QG),t.registerComponentModel(Dq),t.registerComponentView(cZ),t.registerAction({type:"showTip",event:"showTip",update:"tooltip:manuallyShowTip"},function(){}),t.registerAction({type:"hideTip",event:"hideTip",update:"tooltip:manuallyHideTip"},function(){})}var dZ=["rect","polygon","keep","clear"];function hZ(t,e){var n=ai(t?t.brush:[]);if(n.length){var r=[];z(n,function(t){var e=t.hasOwnProperty("toolbox")?t.toolbox:[];e instanceof Array&&(r=r.concat(e))});var o=t&&t.toolbox;X(o)&&(o=o[0]),o||(o={feature:{}},t.toolbox=[o]);var i=o.feature||(o.feature={}),a=i.brush||(i.brush={}),u=a.type||(a.type=[]);u.push.apply(u,r),pZ(u),e&&!u.length&&u.push.apply(u,dZ)}}function pZ(t){var e={};z(t,function(t){e[t]=1}),t.length=0,z(e,function(e,n){t.push(n)})}var gZ=z;function mZ(t){if(t)for(var e in t)if(t.hasOwnProperty(e))return!0}function vZ(t,e,n){var r={};return gZ(e,function(e){var i=r[e]=o();gZ(t[e],function(t,r){if(cN.isValidType(r)){var o={type:r,visual:t};n&&n(o,e),i[r]=new cN(o),"opacity"===r&&(o=k(o),o.type="colorAlpha",i.__hidden.__alphaForOpacity=new cN(o))}})}),r;function o(){var t=function(){};t.prototype.__hidden=t.prototype;var e=new t;return e}}function yZ(t,e,n){var r;z(n,function(t){e.hasOwnProperty(t)&&mZ(e[t])&&(r=!0)}),r&&z(n,function(n){e.hasOwnProperty(n)&&mZ(e[n])?t[n]=k(e[n]):delete t[n]})}function bZ(t,e,n,r,o,i){var a,u={};function s(t){return Ey(n,a,t)}function l(t,e){Ry(n,a,t,e)}function c(t,c){a=null==i?t:c;var f=n.getRawDataItem(a);if(!f||!1!==f.visualMap)for(var d=r.call(o,t),h=e[d],p=u[d],g=0,m=p.length;g<m;g++){var v=p[g];h[v]&&h[v].applyVisual(t,s,l)}}z(t,function(t){var n=cN.prepareVisualTypes(e[t]);u[t]=n}),null==i?n.each(c):n.each([i],c)}function xZ(t,e,n,r){var o={};return z(t,function(t){var n=cN.prepareVisualTypes(e[t]);o[t]=n}),{progress:function(t,i){var a,u;function s(t){return Ey(i,u,t)}function l(t,e){Ry(i,u,t,e)}null!=r&&(a=i.getDimension(r));while(null!=(u=t.next())){var c=i.getRawDataItem(u);if(!c||!1!==c.visualMap)for(var f=null!=r?i.get(a,u):u,d=n(f),h=e[d],p=o[d],g=0,m=p.length;g<m;g++){var v=p[g];h[v]&&h[v].applyVisual(f,s,l)}}}}}function wZ(t){var e=t.brushType,n={point:function(r){return _Z[e].point(r,n,t)},rect:function(r){return _Z[e].rect(r,n,t)}};return n}var _Z={lineX:SZ(0),lineY:SZ(1),rect:{point:function(t,e,n){return t&&n.boundingRect.contain(t[0],t[1])},rect:function(t,e,n){return t&&n.boundingRect.intersect(t)}},polygon:{point:function(t,e,n){return t&&n.boundingRect.contain(t[0],t[1])&&nw(n.range,t[0],t[1])},rect:function(t,e,n){var r=n.range;if(!t||r.length<=1)return!1;var o=t.x,i=t.y,a=t.width,u=t.height,s=r[0];return!!(nw(r,o,i)||nw(r,o+a,i)||nw(r,o,i+u)||nw(r,o+a,i+u)||Zr.create(t).contain(s[0],s[1])||pd(o,i,o+a,i,r)||pd(o,i,o,i+u,r)||pd(o+a,i,o+a,i+u,r)||pd(o,i+u,o+a,i+u,r))||void 0}}};function SZ(t){var e=["x","y"],n=["width","height"];return{point:function(e,n,r){if(e){var o=r.range,i=e[t];return CZ(i,o)}},rect:function(r,o,i){if(r){var a=i.range,u=[r[e[t]],r[e[t]]+r[n[t]]];return u[1]<u[0]&&u.reverse(),CZ(u[0],a)||CZ(u[1],a)||CZ(a[0],u)||CZ(a[1],u)}}}}function CZ(t,e){return e[0]<=t&&t<=e[1]}var MZ=["inBrush","outOfBrush"],TZ="__ecBrushSelect",kZ="__ecInBrushSelectEvent";function DZ(t){t.eachComponent({mainType:"brush"},function(e){var n=e.brushTargetManager=new vq(e.option,t);n.setInputRanges(e.areas,t)})}function AZ(t,e,n){var r,o,i=[];t.eachComponent({mainType:"brush"},function(t){n&&"takeGlobalCursor"===n.type&&t.setBrushOption("brush"===n.key?n.brushOption:{brushType:!1})}),DZ(t),t.eachComponent({mainType:"brush"},function(e,n){var a={brushId:e.id,brushIndex:n,brushName:e.name,areas:k(e.areas),selected:[]};i.push(a);var u=e.option,s=u.brushLink,l=[],c=[],f=[],d=!1;n||(r=u.throttleType,o=u.throttleDelay);var h=B(e.areas,function(t){var e=NZ[t.brushType],n=O({boundingRect:e?e(t):void 0},t);return n.selectors=wZ(n),n}),p=vZ(e.option,MZ,function(t){t.mappingMethod="fixed"});function g(t){return"all"===s||!!l[t]}function m(t){return!!t.length}function v(t,e){var n=t.coordinateSystem;d=d||n.hasAxisBrushed(),g(e)&&n.eachActiveState(t.getData(),function(t,e){"active"===t&&(c[e]=1)})}function y(n,r,o){if(n.brushSelector&&!EZ(e,r)&&(z(h,function(r){e.brushTargetManager.controlSeries(r,n,t)&&o.push(r),d=d||m(o)}),g(r)&&m(o))){var i=n.getData();i.each(function(t){LZ(n,o,i,t)&&(c[t]=1)})}}X(s)&&z(s,function(t){l[t]=1}),t.eachSeries(function(t,e){var n=f[e]=[];"parallel"===t.subType?v(t,e):y(t,e,n)}),t.eachSeries(function(t,e){var n={seriesId:t.id,seriesIndex:e,seriesName:t.name,dataIndex:[]};a.selected.push(n);var r=f[e],o=t.getData(),i=g(e)?function(t){return c[t]?(n.dataIndex.push(o.getRawIndex(t)),"inBrush"):"outOfBrush"}:function(e){return LZ(t,r,o,e)?(n.dataIndex.push(o.getRawIndex(e)),"inBrush"):"outOfBrush"};(g(e)?d:m(r))&&bZ(MZ,p,o,i)})}),IZ(e,r,o,i,n)}function IZ(t,e,n,r,o){if(o){var i=t.getZr();if(!i[kZ]){i[TZ]||(i[TZ]=OZ);var a=Yv(i,TZ,n,e);a(t,r)}}}function OZ(t,e){if(!t.isDisposed()){var n=t.getZr();n[kZ]=!0,t.dispatchAction({type:"brushSelect",batch:e}),n[kZ]=!1}}function LZ(t,e,n,r){for(var o=0,i=e.length;o<i;o++){var a=e[o];if(t.brushSelector(r,n,a.selectors,a))return!0}}function EZ(t,e){var n=t.option.seriesIndex;return null!=n&&"all"!==n&&(X(n)?E(n,e)<0:e!==n)}var NZ={rect:function(t){return RZ(t.range)},polygon:function(t){for(var e,n=t.range,r=0,o=n.length;r<o;r++){e=e||[[1/0,-1/0],[1/0,-1/0]];var i=n[r];i[0]<e[0][0]&&(e[0][0]=i[0]),i[0]>e[0][1]&&(e[0][1]=i[0]),i[1]<e[1][0]&&(e[1][0]=i[1]),i[1]>e[1][1]&&(e[1][1]=i[1])}return e&&RZ(e)}};function RZ(t){return new Zr(t[0][0],t[1][0],t[0][1]-t[0][0],t[1][1]-t[1][0])}var PZ=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n}return i(e,t),e.prototype.init=function(t,e){this.ecModel=t,this.api=e,this.model,(this._brushController=new vB(e.getZr())).on("brush",G(this._onBrush,this)).mount()},e.prototype.render=function(t,e,n,r){this.model=t,this._updateController(t,e,n,r)},e.prototype.updateTransform=function(t,e,n,r){DZ(e),this._updateController(t,e,n,r)},e.prototype.updateVisual=function(t,e,n,r){this.updateTransform(t,e,n,r)},e.prototype.updateView=function(t,e,n,r){this._updateController(t,e,n,r)},e.prototype._updateController=function(t,e,n,r){(!r||r.$from!==t.id)&&this._brushController.setPanels(t.brushTargetManager.makePanelOpts(n)).enableBrush(t.brushOption).updateCovers(t.areas.slice())},e.prototype.dispose=function(){this._brushController.dispose()},e.prototype._onBrush=function(t){var e=this.model.id,n=this.model.brushTargetManager.setOutputRanges(t.areas,this.ecModel);(!t.isEnd||t.removeOnClick)&&this.api.dispatchAction({type:"brush",brushId:e,areas:k(n),$from:e}),t.isEnd&&this.api.dispatchAction({type:"brushEnd",brushId:e,areas:k(n),$from:e})},e.type="brush",e}(Lv),zZ=PZ,BZ="#ddd",VZ=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n.areas=[],n.brushOption={},n}return i(e,t),e.prototype.optionUpdated=function(t,e){var n=this.option;!e&&yZ(n,t,["inBrush","outOfBrush"]);var r=n.inBrush=n.inBrush||{};n.outOfBrush=n.outOfBrush||{color:BZ},r.hasOwnProperty("liftZ")||(r.liftZ=5)},e.prototype.setAreas=function(t){t&&(this.areas=B(t,function(t){return HZ(this.option,t)},this))},e.prototype.setBrushOption=function(t){this.brushOption=HZ(this.option,t),this.brushType=this.brushOption.brushType},e.type="brush",e.dependencies=["geo","grid","xAxis","yAxis","parallel","series"],e.defaultOption={seriesIndex:"all",brushType:"rect",brushMode:"single",transformable:!0,brushStyle:{borderWidth:1,color:"rgba(210,219,238,0.3)",borderColor:"#D2DBEE"},throttleType:"fixRate",throttleDelay:0,removeOnClick:!0,z:1e4},e}(bp);function HZ(t,e){return D({brushType:t.brushType,brushMode:t.brushMode,transformable:t.transformable,brushStyle:new Yd(t.brushStyle).getItemStyle(),removeOnClick:t.removeOnClick,z:t.z},e,!0)}var FZ=VZ,WZ=["rect","polygon","lineX","lineY","keep","clear"],UZ=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.render=function(t,e,n){var r,o,i;e.eachComponent({mainType:"brush"},function(t){r=t.brushType,o=t.brushOption.brushMode||"single",i=i||!!t.areas.length}),this._brushType=r,this._brushMode=o,z(t.get("type",!0),function(e){t.setIconStatus(e,("keep"===e?"multiple"===o:"clear"===e?i:e===r)?"emphasis":"normal")})},e.prototype.updateView=function(t,e,n){this.render(t,e,n)},e.prototype.getIcons=function(){var t=this.model,e=t.get("icon",!0),n={};return z(t.get("type",!0),function(t){e[t]&&(n[t]=e[t])}),n},e.prototype.onclick=function(t,e,n){var r=this._brushType,o=this._brushMode;"clear"===n?(e.dispatchAction({type:"axisAreaSelect",intervals:[]}),e.dispatchAction({type:"brush",command:"clear",areas:[]})):e.dispatchAction({type:"takeGlobalCursor",key:"brush",brushOption:{brushType:"keep"===n?r:r!==n&&n,brushMode:"keep"===n?"multiple"===o?"single":"multiple":o}})},e.getDefaultOption=function(t){var e={show:!0,type:WZ.slice(),icon:{rect:"M7.3,34.7 M0.4,10V-0.2h9.8 M89.6,10V-0.2h-9.8 M0.4,60v10.2h9.8 M89.6,60v10.2h-9.8 M12.3,22.4V10.5h13.1 M33.6,10.5h7.8 M49.1,10.5h7.8 M77.5,22.4V10.5h-13 M12.3,31.1v8.2 M77.7,31.1v8.2 M12.3,47.6v11.9h13.1 M33.6,59.5h7.6 M49.1,59.5 h7.7 M77.5,47.6v11.9h-13",polygon:"M55.2,34.9c1.7,0,3.1,1.4,3.1,3.1s-1.4,3.1-3.1,3.1 s-3.1-1.4-3.1-3.1S53.5,34.9,55.2,34.9z M50.4,51c1.7,0,3.1,1.4,3.1,3.1c0,1.7-1.4,3.1-3.1,3.1c-1.7,0-3.1-1.4-3.1-3.1 C47.3,52.4,48.7,51,50.4,51z M55.6,37.1l1.5-7.8 M60.1,13.5l1.6-8.7l-7.8,4 M59,19l-1,5.3 M24,16.1l6.4,4.9l6.4-3.3 M48.5,11.6 l-5.9,3.1 M19.1,12.8L9.7,5.1l1.1,7.7 M13.4,29.8l1,7.3l6.6,1.6 M11.6,18.4l1,6.1 M32.8,41.9 M26.6,40.4 M27.3,40.2l6.1,1.6 M49.9,52.1l-5.6-7.6l-4.9-1.2",lineX:"M15.2,30 M19.7,15.6V1.9H29 M34.8,1.9H40.4 M55.3,15.6V1.9H45.9 M19.7,44.4V58.1H29 M34.8,58.1H40.4 M55.3,44.4 V58.1H45.9 M12.5,20.3l-9.4,9.6l9.6,9.8 M3.1,29.9h16.5 M62.5,20.3l9.4,9.6L62.3,39.7 M71.9,29.9H55.4",lineY:"M38.8,7.7 M52.7,12h13.2v9 M65.9,26.6V32 M52.7,46.3h13.2v-9 M24.9,12H11.8v9 M11.8,26.6V32 M24.9,46.3H11.8v-9 M48.2,5.1l-9.3-9l-9.4,9.2 M38.9-3.9V12 M48.2,53.3l-9.3,9l-9.4-9.2 M38.9,62.3V46.4",keep:"M4,10.5V1h10.3 M20.7,1h6.1 M33,1h6.1 M55.4,10.5V1H45.2 M4,17.3v6.6 M55.6,17.3v6.6 M4,30.5V40h10.3 M20.7,40 h6.1 M33,40h6.1 M55.4,30.5V40H45.2 M21,18.9h62.9v48.6H21V18.9z",clear:"M22,14.7l30.9,31 M52.9,14.7L22,45.7 M4.7,16.8V4.2h13.1 M26,4.2h7.8 M41.6,4.2h7.8 M70.3,16.8V4.2H57.2 M4.7,25.9v8.6 M70.3,25.9v8.6 M4.7,43.2v12.6h13.1 M26,55.8h7.8 M41.6,55.8h7.8 M70.3,43.2v12.6H57.2"},title:t.getLocale(["toolbox","brush","title"])};return e},e}(mY),GZ=UZ;function jZ(t){t.registerComponentView(zZ),t.registerComponentModel(FZ),t.registerPreprocessor(hZ),t.registerVisual(t.PRIORITY.VISUAL.BRUSH,AZ),t.registerAction({type:"brush",event:"brush",update:"updateVisual"},function(t,e){e.eachComponent({mainType:"brush",query:t},function(e){e.setAreas(t.areas)})}),t.registerAction({type:"brushSelect",event:"brushSelected",update:"none"},function(){}),t.registerAction({type:"brushEnd",event:"brushEnd",update:"none"},function(){}),yY("brush",GZ)}var XZ=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n.layoutMode={type:"box",ignoreSize:!0},n}return i(e,t),e.type="title",e.defaultOption={zlevel:0,z:6,show:!0,text:"",target:"blank",subtext:"",subtarget:"blank",left:0,top:0,backgroundColor:"rgba(0,0,0,0)",borderColor:"#ccc",borderWidth:0,padding:5,itemGap:10,textStyle:{fontSize:18,fontWeight:"bold",color:"#464646"},subtextStyle:{fontSize:12,color:"#6E7079"}},e}(bp),YZ=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n}return i(e,t),e.prototype.render=function(t,e,n){if(this.group.removeAll(),t.get("show")){var r=this.group,o=t.getModel("textStyle"),i=t.getModel("subtextStyle"),a=t.get("textAlign"),u=at(t.get("textBaseline"),t.get("textVerticalAlign")),s=new Us({style:Cd(o,{text:t.get("text"),fill:o.getTextColor()},{disableBox:!0}),z2:10}),l=s.getBoundingRect(),c=t.get("subtext"),f=new Us({style:Cd(i,{text:c,fill:i.getTextColor(),y:l.height+t.get("itemGap"),verticalAlign:"top"},{disableBox:!0}),z2:10}),d=t.get("link"),h=t.get("sublink"),p=t.get("triggerEvent",!0);s.silent=!d&&!p,f.silent=!h&&!p,d&&s.on("click",function(){np(d,"_"+t.get("target"))}),h&&f.on("click",function(){np(h,"_"+t.get("subtarget"))}),Gs(s).eventData=Gs(f).eventData=p?{componentType:"title",componentIndex:t.componentIndex}:null,r.add(s),c&&r.add(f);var g=r.getBoundingRect(),m=t.getBoxLayoutParams();m.width=g.width,m.height=g.height;var v=lp(m,{width:n.getWidth(),height:n.getHeight()},t.get("padding"));a||(a=t.get("left")||t.get("right"),"middle"===a&&(a="center"),"right"===a?v.x+=v.width:"center"===a&&(v.x+=v.width/2)),u||(u=t.get("top")||t.get("bottom"),"center"===u&&(u="middle"),"bottom"===u?v.y+=v.height:"middle"===u&&(v.y+=v.height/2),u=u||"top"),r.x=v.x,r.y=v.y,r.markRedraw();var y={align:a,verticalAlign:u};s.setStyle(y),f.setStyle(y),g=r.getBoundingRect();var b=v.margin,x=t.getItemStyle(["color","opacity"]);x.fill=t.get("backgroundColor");var w=new As({shape:{x:g.x-b[3],y:g.y-b[0],width:g.width+b[1]+b[3],height:g.height+b[0]+b[2],r:t.get("borderRadius")},style:x,subPixelOptimize:!0,silent:!0});r.add(w)}},e.type="title",e}(Lv);function qZ(t){t.registerComponentModel(XZ),t.registerComponentView(YZ)}var ZZ=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n.layoutMode="box",n}return i(e,t),e.prototype.init=function(t,e,n){this.mergeDefaultAndTheme(t,n),this._initData()},e.prototype.mergeOption=function(e){t.prototype.mergeOption.apply(this,arguments),this._initData()},e.prototype.setCurrentIndex=function(t){null==t&&(t=this.option.currentIndex);var e=this._data.count();this.option.loop?t=(t%e+e)%e:(t>=e&&(t=e-1),t<0&&(t=0)),this.option.currentIndex=t},e.prototype.getCurrentIndex=function(){return this.option.currentIndex},e.prototype.isIndexMax=function(){return this.getCurrentIndex()>=this._data.count()-1},e.prototype.setPlayState=function(t){this.option.autoPlay=!!t},e.prototype.getPlayState=function(){return!!this.option.autoPlay},e.prototype._initData=function(){var t,e=this.option,n=e.data||[],r=e.axisType,o=this._names=[];"category"===r?(t=[],z(n,function(e,n){var r,i=xi(li(e),"");K(e)?(r=k(e),r.value=n):r=n,t.push(r),o.push(i)})):t=n;var i={category:"ordinal",time:"time",value:"number"}[r]||"number",a=this._data=new CM([{name:"value",type:i}],this);a.initData(t,o)},e.prototype.getData=function(){return this._data},e.prototype.getCategories=function(){if("category"===this.get("axisType"))return this._names.slice()},e.type="timeline",e.defaultOption={zlevel:0,z:4,show:!0,axisType:"time",realtime:!0,left:"20%",top:null,right:"20%",bottom:0,width:null,height:40,padding:5,controlPosition:"left",autoPlay:!1,rewind:!1,loop:!0,playInterval:2e3,currentIndex:0,itemStyle:{},label:{color:"#000"},data:[]},e}(bp),$Z=ZZ,KZ=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n}return i(e,t),e.type="timeline.slider",e.defaultOption=Jd($Z.defaultOption,{backgroundColor:"rgba(0,0,0,0)",borderColor:"#ccc",borderWidth:0,orient:"horizontal",inverse:!1,tooltip:{trigger:"item"},symbol:"circle",symbolSize:12,lineStyle:{show:!0,width:2,color:"#DAE1F5"},label:{position:"auto",show:!0,interval:"auto",rotate:0,color:"#A4B1D7"},itemStyle:{color:"#A4B1D7",borderWidth:1},checkpointStyle:{symbol:"circle",symbolSize:15,color:"#316bf3",borderColor:"#fff",borderWidth:2,shadowBlur:2,shadowOffsetX:1,shadowOffsetY:1,shadowColor:"rgba(0, 0, 0, 0.3)",animation:!0,animationDuration:300,animationEasing:"quinticInOut"},controlStyle:{show:!0,showPlayBtn:!0,showPrevBtn:!0,showNextBtn:!0,itemSize:24,itemGap:12,position:"left",playIcon:"path://M31.6,53C17.5,53,6,41.5,6,27.4S17.5,1.8,31.6,1.8C45.7,1.8,57.2,13.3,57.2,27.4S45.7,53,31.6,53z M31.6,3.3 C18.4,3.3,7.5,14.1,7.5,27.4c0,13.3,10.8,24.1,24.1,24.1C44.9,51.5,55.7,40.7,55.7,27.4C55.7,14.1,44.9,3.3,31.6,3.3z M24.9,21.3 c0-2.2,1.6-3.1,3.5-2l10.5,6.1c1.899,1.1,1.899,2.9,0,4l-10.5,6.1c-1.9,1.1-3.5,0.2-3.5-2V21.3z",stopIcon:"path://M30.9,53.2C16.8,53.2,5.3,41.7,5.3,27.6S16.8,2,30.9,2C45,2,56.4,13.5,56.4,27.6S45,53.2,30.9,53.2z M30.9,3.5C17.6,3.5,6.8,14.4,6.8,27.6c0,13.3,10.8,24.1,24.101,24.1C44.2,51.7,55,40.9,55,27.6C54.9,14.4,44.1,3.5,30.9,3.5z M36.9,35.8c0,0.601-0.4,1-0.9,1h-1.3c-0.5,0-0.9-0.399-0.9-1V19.5c0-0.6,0.4-1,0.9-1H36c0.5,0,0.9,0.4,0.9,1V35.8z M27.8,35.8 c0,0.601-0.4,1-0.9,1h-1.3c-0.5,0-0.9-0.399-0.9-1V19.5c0-0.6,0.4-1,0.9-1H27c0.5,0,0.9,0.4,0.9,1L27.8,35.8L27.8,35.8z",nextIcon:"M2,18.5A1.52,1.52,0,0,1,.92,18a1.49,1.49,0,0,1,0-2.12L7.81,9.36,1,3.11A1.5,1.5,0,1,1,3,.89l8,7.34a1.48,1.48,0,0,1,.49,1.09,1.51,1.51,0,0,1-.46,1.1L3,18.08A1.5,1.5,0,0,1,2,18.5Z",prevIcon:"M10,.5A1.52,1.52,0,0,1,11.08,1a1.49,1.49,0,0,1,0,2.12L4.19,9.64,11,15.89a1.5,1.5,0,1,1-2,2.22L1,10.77A1.48,1.48,0,0,1,.5,9.68,1.51,1.51,0,0,1,1,8.58L9,.92A1.5,1.5,0,0,1,10,.5Z",prevBtnSize:18,nextBtnSize:18,color:"#A4B1D7",borderColor:"#A4B1D7",borderWidth:1},emphasis:{label:{show:!0,color:"#6f778d"},itemStyle:{color:"#316BF3"},controlStyle:{color:"#316BF3",borderColor:"#316BF3",borderWidth:2}},progress:{lineStyle:{color:"#316BF3"},itemStyle:{color:"#316BF3"},label:{color:"#6f778d"}},data:[]}),e}($Z);R(KZ,Mm.prototype);var JZ=KZ,QZ=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n}return i(e,t),e.type="timeline",e}(Lv),t$=QZ,e$=function(t){function e(e,n,r,o){var i=t.call(this,e,n,r)||this;return i.type=o||"value",i}return i(e,t),e.prototype.getLabelModel=function(){return this.model.getModel("label")},e.prototype.isHorizontal=function(){return"horizontal"===this.model.get("orient")},e}(JA),n$=e$,r$=Math.PI,o$=Di(),i$=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n}return i(e,t),e.prototype.init=function(t,e){this.api=e},e.prototype.render=function(t,e,n){if(this.model=t,this.api=n,this.ecModel=e,this.group.removeAll(),t.get("show",!0)){var r=this._layout(t,n),o=this._createGroup("_mainGroup"),i=this._createGroup("_labelGroup"),a=this._axis=this._createAxis(r,t);t.formatTooltip=function(t){var e=a.scale.getLabel({value:t});return rv("nameValue",{noName:!0,value:e})},z(["AxisLine","AxisTick","Control","CurrentPointer"],function(e){this["_render"+e](r,o,a,t)},this),this._renderAxisLabel(r,i,a,t),this._position(r,t)}this._doPlayStop(),this._updateTicksStatus()},e.prototype.remove=function(){this._clearTimer(),this.group.removeAll()},e.prototype.dispose=function(){this._clearTimer()},e.prototype._layout=function(t,e){var n,r=t.get(["label","position"]),o=t.get("orient"),i=u$(t,e);n=null==r||"auto"===r?"horizontal"===o?i.y+i.height/2<e.getHeight()/2?"-":"+":i.x+i.width/2<e.getWidth()/2?"+":"-":q(r)?{horizontal:{top:"-",bottom:"+"},vertical:{left:"-",right:"+"}}[o][r]:r;var a,u,s,l={horizontal:"center",vertical:n>=0||"+"===n?"left":"right"},c={horizontal:n>=0||"+"===n?"top":"bottom",vertical:"middle"},f={horizontal:0,vertical:r$/2},d="vertical"===o?i.height:i.width,h=t.getModel("controlStyle"),p=h.get("show",!0),g=p?h.get("itemSize"):0,m=p?h.get("itemGap"):0,v=g+m,y=t.get(["label","rotate"])||0;y=y*r$/180;var b=h.get("position",!0),x=p&&h.get("showPlayBtn",!0),w=p&&h.get("showPrevBtn",!0),_=p&&h.get("showNextBtn",!0),S=0,C=d;"left"===b||"bottom"===b?(x&&(a=[0,0],S+=v),w&&(u=[S,0],S+=v),_&&(s=[C-g,0],C-=v)):(x&&(a=[C-g,0],C-=v),w&&(u=[0,0],S+=v),_&&(s=[C-g,0],C-=v));var M=[S,C];return t.get("inverse")&&M.reverse(),{viewRect:i,mainLength:d,orient:o,rotation:f[o],labelRotation:y,labelPosOpt:n,labelAlign:t.get(["label","align"])||l[o],labelBaseline:t.get(["label","verticalAlign"])||t.get(["label","baseline"])||c[o],playPosition:a,prevBtnPosition:u,nextBtnPosition:s,axisExtent:M,controlSize:g,controlGap:m}},e.prototype._position=function(t,e){var n=this._mainGroup,r=this._labelGroup,o=t.viewRect;if("vertical"===t.orient){var i=yr(),a=o.x,u=o.y+o.height;_r(i,i,[-a,-u]),Sr(i,i,-r$/2),_r(i,i,[a,u]),o=o.clone(),o.applyTransform(i)}var s=m(o),l=m(n.getBoundingRect()),c=m(r.getBoundingRect()),f=[n.x,n.y],d=[r.x,r.y];d[0]=f[0]=s[0][0];var h=t.labelPosOpt;if(null==h||q(h)){var p="+"===h?0:1;v(f,l,s,1,p),v(d,c,s,1,1-p)}else{p=h>=0?0:1;v(f,l,s,1,p),d[1]=f[1]+h}function g(t){t.originX=s[0][0]-t.x,t.originY=s[1][0]-t.y}function m(t){return[[t.x,t.x+t.width],[t.y,t.y+t.height]]}function v(t,e,n,r,o){t[r]+=n[r][o]-e[r][o]}n.setPosition(f),r.setPosition(d),n.rotation=r.rotation=t.rotation,g(n),g(r)},e.prototype._createAxis=function(t,e){var n=e.getData(),r=e.get("axisType"),o=a$(e,r);o.getTicks=function(){return n.mapArray(["value"],function(t){return{value:t}})};var i=n.getDataExtent("value");o.setExtent(i[0],i[1]),o.niceTicks();var a=new n$("value",o,t.axisExtent,r);return a.model=e,a},e.prototype._createGroup=function(t){var e=this[t]=new _o;return this.group.add(e),e},e.prototype._renderAxisLine=function(t,e,n,r){var o=n.getExtent();if(r.get(["lineStyle","show"])){var i=new cf({shape:{x1:o[0],y1:0,x2:o[1],y2:0},style:I({lineCap:"round"},r.getModel("lineStyle").getLineStyle()),silent:!0,z2:1});e.add(i);var a=this._progressLine=new cf({shape:{x1:o[0],x2:this._currentPointer?this._currentPointer.x:o[0],y1:0,y2:0},style:O({lineCap:"round",lineWidth:i.style.lineWidth},r.getModel(["progress","lineStyle"]).getLineStyle()),silent:!0,z2:1});e.add(a)}},e.prototype._renderAxisTick=function(t,e,n,r){var o=this,i=r.getData(),a=n.scale.getTicks();this._tickSymbols=[],z(a,function(t){var a=n.dataToCoord(t.value),u=i.getItemModel(t.value),s=u.getModel("itemStyle"),l=u.getModel(["emphasis","itemStyle"]),c=u.getModel(["progress","itemStyle"]),f={x:a,y:0,onclick:G(o._changeTimeline,o,t.value)},d=l$(u,s,e,f);d.ensureState("emphasis").style=l.getItemStyle(),d.ensureState("progress").style=c.getItemStyle(),Gl(d);var h=Gs(d);u.get("tooltip")?(h.dataIndex=t.value,h.dataModel=r):h.dataIndex=h.dataModel=null,o._tickSymbols.push(d)})},e.prototype._renderAxisLabel=function(t,e,n,r){var o=this,i=n.getLabelModel();if(i.get("show")){var a=r.getData(),u=n.getViewLabels();this._tickLabels=[],z(u,function(r){var i=r.tickValue,u=a.getItemModel(i),s=u.getModel("label"),l=u.getModel(["emphasis","label"]),c=u.getModel(["progress","label"]),f=n.dataToCoord(r.tickValue),d=new Us({x:f,y:0,rotation:t.labelRotation-t.rotation,onclick:G(o._changeTimeline,o,i),silent:!1,style:Cd(s,{text:r.formattedLabel,align:t.labelAlign,verticalAlign:t.labelBaseline})});d.ensureState("emphasis").style=Cd(l),d.ensureState("progress").style=Cd(c),e.add(d),Gl(d),o$(d).dataIndex=i,o._tickLabels.push(d)})}},e.prototype._renderControl=function(t,e,n,r){var o=t.controlSize,i=t.rotation,a=r.getModel("controlStyle").getItemStyle(),u=r.getModel(["emphasis","controlStyle"]).getItemStyle(),s=r.getPlayState(),l=r.get("inverse",!0);function c(t,n,s,l){if(t){var c=ao(at(r.get(["controlStyle",n+"BtnSize"]),o),o),f=[0,-c/2,c,c],d=s$(r,n+"Icon",f,{x:t[0],y:t[1],originX:o/2,originY:0,rotation:l?-i:0,rectHover:!0,style:a,onclick:s});d.ensureState("emphasis").style=u,e.add(d),Gl(d)}}c(t.nextBtnPosition,"next",G(this._changeTimeline,this,l?"-":"+")),c(t.prevBtnPosition,"prev",G(this._changeTimeline,this,l?"+":"-")),c(t.playPosition,s?"stop":"play",G(this._handlePlayClick,this,!s),!0)},e.prototype._renderCurrentPointer=function(t,e,n,r){var o=r.getData(),i=r.getCurrentIndex(),a=o.getItemModel(i).getModel("checkpointStyle"),u=this,s={onCreate:function(t){t.draggable=!0,t.drift=G(u._handlePointerDrag,u),t.ondragend=G(u._handlePointerDragend,u),c$(t,u._progressLine,i,n,r,!0)},onUpdate:function(t){c$(t,u._progressLine,i,n,r)}};this._currentPointer=l$(a,a,this._mainGroup,{},this._currentPointer,s)},e.prototype._handlePlayClick=function(t){this._clearTimer(),this.api.dispatchAction({type:"timelinePlayChange",playState:t,from:this.uid})},e.prototype._handlePointerDrag=function(t,e,n){this._clearTimer(),this._pointerChangeTimeline([n.offsetX,n.offsetY])},e.prototype._handlePointerDragend=function(t){this._pointerChangeTimeline([t.offsetX,t.offsetY],!0)},e.prototype._pointerChangeTimeline=function(t,e){var n=this._toAxisCoord(t)[0],r=this._axis,o=zo(r.getExtent().slice());n>o[1]&&(n=o[1]),n<o[0]&&(n=o[0]),this._currentPointer.x=n,this._currentPointer.markRedraw(),this._progressLine.shape.x2=n,this._progressLine.dirty();var i=this._findNearestTick(n),a=this.model;(e||i!==a.getCurrentIndex()&&a.get("realtime"))&&this._changeTimeline(i)},e.prototype._doPlayStop=function(){var t=this;this._clearTimer(),this.model.getPlayState()&&(this._timer=setTimeout(function(){var e=t.model;t._changeTimeline(e.getCurrentIndex()+(e.get("rewind",!0)?-1:1))},this.model.get("playInterval")))},e.prototype._toAxisCoord=function(t){var e=this._mainGroup.getLocalTransform();return ad(t,e,!0)},e.prototype._findNearestTick=function(t){var e,n=this.model.getData(),r=1/0,o=this._axis;return n.each(["value"],function(n,i){var a=o.dataToCoord(n),u=Math.abs(a-t);u<r&&(r=u,e=i)}),e},e.prototype._clearTimer=function(){this._timer&&(clearTimeout(this._timer),this._timer=null)},e.prototype._changeTimeline=function(t){var e=this.model.getCurrentIndex();"+"===t?t=e+1:"-"===t&&(t=e-1),this.api.dispatchAction({type:"timelineChange",currentIndex:t,from:this.uid})},e.prototype._updateTicksStatus=function(){var t=this.model.getCurrentIndex(),e=this._tickSymbols,n=this._tickLabels;if(e)for(var r=0;r<e.length;r++)e&&e[r]&&e[r].toggleState("progress",r<t);if(n)for(r=0;r<n.length;r++)n&&n[r]&&n[r].toggleState("progress",o$(n[r]).dataIndex<=t)},e.type="timeline.slider",e}(t$);function a$(t,e){if(e=e||t.get("type"),e)switch(e){case"category":return new PD({ordinalMeta:t.getCategories(),extent:[1/0,-1/0]});case"time":return new KD({locale:t.ecModel.getLocaleModel(),useUTC:t.ecModel.get("useUTC")});default:return new VD}}function u$(t,e){return lp(t.getBoxLayoutParams(),{width:e.getWidth(),height:e.getHeight()},t.get("padding"))}function s$(t,e,n,r){var o=r.style,i=hd(t.get(["controlStyle",e]),r||{},new Zr(n[0],n[1],n[2],n[3]));return o&&i.setStyle(o),i}function l$(t,e,n,r,o,i){var a=e.get("color");if(o)o.setColor(a),n.add(o),i&&i.onUpdate(o);else{var u=t.get("symbol");o=zb(u,-1,-1,2,2,a),o.setStyle("strokeNoScale",!0),n.add(o),i&&i.onCreate(o)}var s=e.getItemStyle(["color"]);o.setStyle(s),r=D({rectHover:!0,z2:100},r,!0);var l=t.get("symbolSize");l=l instanceof Array?l.slice():[+l,+l],r.scaleX=l[0]/2,r.scaleY=l[1]/2;var c=t.get("symbolOffset");c&&(r.x=r.x||0,r.y=r.y||0,r.x+=Ro(c[0],l[0]),r.y+=Ro(c[1],l[1]));var f=t.get("symbolRotate");return r.rotation=(f||0)*Math.PI/180||0,o.attr(r),o.updateTransform(),o}function c$(t,e,n,r,o,i){if(!t.dragging){var a=o.getModel("checkpointStyle"),u=r.dataToCoord(o.getData().get("value",n));if(i||!a.get("animation",!0))t.attr({x:u,y:0}),e&&e.attr({shape:{x2:u}});else{var s={duration:a.get("animationDuration",!0),easing:a.get("animationEasing",!0)};t.stopAnimation(null,!0),t.animateTo({x:u,y:0},s),e&&e.animateTo({shape:{x2:u}},s)}}}var f$=i$;function d$(t){t.registerAction({type:"timelineChange",event:"timelineChanged",update:"prepareAndUpdate"},function(t,e){var n=e.getComponent("timeline");return n&&null!=t.currentIndex&&(n.setCurrentIndex(t.currentIndex),!n.get("loop",!0)&&n.isIndexMax()&&n.setPlayState(!1)),e.resetOption("timeline",{replaceMerge:n.get("replaceMerge",!0)}),O({currentIndex:n.option.currentIndex},t)}),t.registerAction({type:"timelinePlayChange",event:"timelinePlayChanged",update:"update"},function(t,e){var n=e.getComponent("timeline");n&&null!=t.playState&&n.setPlayState(t.playState)})}function h$(t){var e=t&&t.timeline;X(e)||(e=e?[e]:[]),z(e,function(t){t&&p$(t)})}function p$(t){var e=t.type,n={number:"value",time:"time"};if(n[e]&&(t.axisType=n[e],delete t.type),g$(t),m$(t,"controlPosition")){var r=t.controlStyle||(t.controlStyle={});m$(r,"position")||(r.position=t.controlPosition),"none"!==r.position||m$(r,"show")||(r.show=!1,delete r.position),delete t.controlPosition}z(t.data||[],function(t){K(t)&&!X(t)&&(!m$(t,"value")&&m$(t,"name")&&(t.value=t.name),g$(t))})}function g$(t){var e=t.itemStyle||(t.itemStyle={}),n=e.emphasis||(e.emphasis={}),r=t.label||t.label||{},o=r.normal||(r.normal={}),i={normal:1,emphasis:1};z(r,function(t,e){i[e]||m$(o,e)||(o[e]=t)}),n.label&&!m$(r,"emphasis")&&(r.emphasis=n.label,delete n.label)}function m$(t,e){return t.hasOwnProperty(e)}function v$(t){t.registerComponentModel(JZ),t.registerComponentView(f$),t.registerSubTypeDefaulter("timeline",function(){return"slider"}),d$(t),t.registerPreprocessor(h$)}function y$(t,e){if(!t)return!1;for(var n=X(t)?t:[t],r=0;r<n.length;r++)if(n[r]&&n[r][e])return!0;return!1}function b$(t){ui(t,"label",["show"])}var x$=Di(),w$=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n.createdBySelf=!1,n}return i(e,t),e.prototype.init=function(t,e,n){this.mergeDefaultAndTheme(t,n),this._mergeOption(t,n,!1,!0)},e.prototype.isAnimationEnabled=function(){if(d.node)return!1;var t=this.__hostSeries;return this.getShallow("animation")&&t&&t.isAnimationEnabled()},e.prototype.mergeOption=function(t,e){this._mergeOption(t,e,!1,!1)},e.prototype._mergeOption=function(t,e,n,r){var o=this.mainType;n||e.eachSeries(function(t){var n=t.get(this.mainType,!0),i=x$(t)[o];n&&n.data?(i?i._mergeOption(n,e,!0):(r&&b$(n),z(n.data,function(t){t instanceof Array?(b$(t[0]),b$(t[1])):b$(t)}),i=this.createMarkerModelFromSeries(n,this,e),I(i,{mainType:this.mainType,seriesIndex:t.seriesIndex,name:t.name,createdBySelf:!0}),i.__hostSeries=t),x$(t)[o]=i):x$(t)[o]=null},this)},e.prototype.formatTooltip=function(t,e,n){var r=this.getData(),o=this.getRawValue(t),i=r.getName(t);return rv("section",{header:this.name,blocks:[rv("nameValue",{name:i,value:o,noName:!i,noValue:null==o})]})},e.prototype.getData=function(){return this._data},e.prototype.setData=function(t){this._data=t},e.getMarkerModelFromSeries=function(t,e){return x$(t)[e]},e.type="marker",e.dependencies=["series","grid","polar","geo"],e}(bp);R(w$,Mm.prototype);var _$=w$,S$=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n}return i(e,t),e.prototype.createMarkerModelFromSeries=function(t,n,r){return new e(t,n,r)},e.type="markPoint",e.defaultOption={zlevel:0,z:5,symbol:"pin",symbolSize:50,tooltip:{trigger:"item"},label:{show:!0,position:"inside"},itemStyle:{borderWidth:2},emphasis:{label:{show:!0}}},e}(_$),C$=S$;function M$(t){return!(isNaN(parseFloat(t.x))&&isNaN(parseFloat(t.y)))}function T$(t){return!isNaN(parseFloat(t.x))&&!isNaN(parseFloat(t.y))}function k$(t,e,n,r,o,i){var a=[],u=RM(e,r),s=u?e.getCalculationInfo("stackResultDimension"):r,l=N$(e,s,t),c=e.indicesOfNearest(s,l)[0];a[o]=e.get(n,c),a[i]=e.get(s,c);var f=e.get(r,c),d=Bo(e.get(r,c));return d=Math.min(d,20),d>=0&&(a[i]=+a[i].toFixed(d)),[a,f]}var D$={min:j(k$,"min"),max:j(k$,"max"),average:j(k$,"average"),median:j(k$,"median")};function A$(t,e){var n=t.getData(),r=t.coordinateSystem;if(e&&!T$(e)&&!X(e.coord)&&r){var o=r.dimensions,i=I$(e,n,r,t);if(e=k(e),e.type&&D$[e.type]&&i.baseAxis&&i.valueAxis){var a=E(o,i.baseAxis.dim),u=E(o,i.valueAxis.dim),s=D$[e.type](n,i.baseDataDim,i.valueDataDim,a,u);e.coord=s[0],e.value=s[1]}else{for(var l=[null!=e.xAxis?e.xAxis:e.radiusAxis,null!=e.yAxis?e.yAxis:e.angleAxis],c=0;c<2;c++)D$[l[c]]&&(l[c]=N$(n,n.mapDimension(o[c]),l[c]));e.coord=l}}return e}function I$(t,e,n,r){var o={};return null!=t.valueIndex||null!=t.valueDim?(o.valueDataDim=null!=t.valueIndex?e.getDimension(t.valueIndex):t.valueDim,o.valueAxis=n.getAxis(O$(r,o.valueDataDim)),o.baseAxis=n.getOtherAxis(o.valueAxis),o.baseDataDim=e.mapDimension(o.baseAxis.dim)):(o.baseAxis=r.getBaseAxis(),o.valueAxis=n.getOtherAxis(o.baseAxis),o.baseDataDim=e.mapDimension(o.baseAxis.dim),o.valueDataDim=e.mapDimension(o.valueAxis.dim)),o}function O$(t,e){var n=t.getData(),r=n.dimensions;e=n.getDimension(e);for(var o=0;o<r.length;o++){var i=n.getDimensionInfo(r[o]);if(i.name===e)return i.coordDim}}function L$(t,e){return!(t&&t.containData&&e.coord&&!M$(e))||t.containData(e.coord)}function E$(t,e,n,r){return r<2?t.coord&&t.coord[r]:t.value}function N$(t,e,n){if("average"===n){var r=0,o=0;return t.each(e,function(t,e){isNaN(t)||(r+=t,o++)}),r/o}return"median"===n?t.getMedian(e):t.getDataExtent(e)["max"===n?1:0]}var R$=Di(),P$=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n}return i(e,t),e.prototype.init=function(){this.markerGroupMap=mt()},e.prototype.render=function(t,e,n){var r=this,o=this.markerGroupMap;o.each(function(t){R$(t).keep=!1}),e.eachSeries(function(t){var o=_$.getMarkerModelFromSeries(t,r.type);o&&r.renderSeries(t,o,e,n)}),o.each(function(t){!R$(t).keep&&r.group.remove(t.group)})},e.prototype.markKeep=function(t){R$(t).keep=!0},e.prototype.blurSeries=function(t){var e=this;z(t,function(t){var n=_$.getMarkerModelFromSeries(t,e.type);if(n){var r=n.getData();r.eachItemGraphicEl(function(t){t&&Al(t)})}})},e.type="marker",e}(Lv),z$=P$;function B$(t,e,n){var r=e.coordinateSystem;t.each(function(o){var i,a=t.getItemModel(o),u=Ro(a.get("x"),n.getWidth()),s=Ro(a.get("y"),n.getHeight());if(isNaN(u)||isNaN(s)){if(e.getMarkerPosition)i=e.getMarkerPosition(t.getValues(t.dimensions,o));else if(r){var l=t.get(r.dimensions[0],o),c=t.get(r.dimensions[1],o);i=r.dataToPoint([l,c])}}else i=[u,s];isNaN(u)||(i[0]=u),isNaN(s)||(i[1]=s),t.setItemLayout(o,i)})}var V$=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n}return i(e,t),e.prototype.updateTransform=function(t,e,n){e.eachSeries(function(t){var e=_$.getMarkerModelFromSeries(t,"markPoint");e&&(B$(e.getData(),t,n),this.markerGroupMap.get(t.id).updateLayout())},this)},e.prototype.renderSeries=function(t,e,n,r){var o=t.coordinateSystem,i=t.id,a=t.getData(),u=this.markerGroupMap,s=u.get(i)||u.set(i,new JM),l=H$(o,t,e);e.setData(l),B$(e.getData(),t,r),l.each(function(t){var n=l.getItemModel(t),r=n.getShallow("symbol"),o=n.getShallow("symbolSize"),i=n.getShallow("symbolRotate");if(Y(r)||Y(o)||Y(i)){var u=e.getRawValue(t),s=e.getDataParams(t);Y(r)&&(r=r(u,s)),Y(o)&&(o=o(u,s)),Y(i)&&(i=i(u,s))}var c=n.getModel("itemStyle").getItemStyle(),f=Ny(a,"color");c.fill||(c.fill=f),l.setItemVisual(t,{symbol:r,symbolSize:o,symbolRotate:i,style:c})}),s.updateData(l),this.group.add(s.group),l.eachItemGraphicEl(function(t){t.traverse(function(t){Gs(t).dataModel=e})}),this.markKeep(s),s.group.silent=e.get("silent")||t.get("silent")},e.type="markPoint",e}(z$);function H$(t,e,n){var r;r=t?B(t&&t.dimensions,function(t){var n=e.getData().getDimensionInfo(e.getData().mapDimension(t))||{};return O({name:t},n)}):[{name:"value",type:"float"}];var o=new CM(r,n),i=B(n.get("data"),j(A$,e));return t&&(i=H(i,j(L$,t))),o.initData(i,null,t?E$:function(t){return t.value}),o}var F$=V$;function W$(t){t.registerComponentModel(C$),t.registerComponentView(F$),t.registerPreprocessor(function(t){y$(t.series,"markPoint")&&(t.markPoint=t.markPoint||{})})}var U$=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n}return i(e,t),e.prototype.createMarkerModelFromSeries=function(t,n,r){return new e(t,n,r)},e.type="markLine",e.defaultOption={zlevel:0,z:5,symbol:["circle","arrow"],symbolSize:[8,16],symbolOffset:0,precision:2,tooltip:{trigger:"item"},label:{show:!0,position:"end",distance:5},lineStyle:{type:"dashed"},emphasis:{label:{show:!0},lineStyle:{width:3}},animationEasing:"linear"},e}(_$),G$=U$,j$=Di(),X$=function(t,e,n,r){var o,i=t.getData();if(X(r))o=r;else{var a=r.type;if("min"===a||"max"===a||"average"===a||"median"===a||null!=r.xAxis||null!=r.yAxis){var u=void 0,s=void 0;if(null!=r.yAxis||null!=r.xAxis)u=e.getAxis(null!=r.yAxis?"y":"x"),s=it(r.yAxis,r.xAxis);else{var l=I$(r,i,e,t);u=l.valueAxis;var c=PM(i,l.valueDataDim);s=N$(i,c,a)}var f="x"===u.dim?0:1,d=1-f,h=k(r),p={coord:[]};h.type=null,h.coord=[],h.coord[d]=-1/0,p.coord[d]=1/0;var g=n.get("precision");g>=0&&"number"===typeof s&&(s=+s.toFixed(Math.min(g,20))),h.coord[f]=p.coord[f]=s,o=[h,p,{type:a,valueIndex:r.valueIndex,value:s}]}else o=[]}var m=[A$(t,o[0]),A$(t,o[1]),I({},o[2])];return m[2].type=m[2].type||null,D(m[2],m[0]),D(m[2],m[1]),m};function Y$(t){return!isNaN(t)&&!isFinite(t)}function q$(t,e,n,r){var o=1-t,i=r.dimensions[t];return Y$(e[o])&&Y$(n[o])&&e[t]===n[t]&&r.getAxis(i).containData(e[t])}function Z$(t,e){if("cartesian2d"===t.type){var n=e[0].coord,r=e[1].coord;if(n&&r&&(q$(1,n,r,t)||q$(0,n,r,t)))return!0}return L$(t,e[0])&&L$(t,e[1])}function $$(t,e,n,r,o){var i,a=r.coordinateSystem,u=t.getItemModel(e),s=Ro(u.get("x"),o.getWidth()),l=Ro(u.get("y"),o.getHeight());if(isNaN(s)||isNaN(l)){if(r.getMarkerPosition)i=r.getMarkerPosition(t.getValues(t.dimensions,e));else{var c=a.dimensions,f=t.get(c[0],e),d=t.get(c[1],e);i=a.dataToPoint([f,d])}if(yT(a,"cartesian2d")){var h=a.getAxis("x"),p=a.getAxis("y");c=a.dimensions;Y$(t.get(c[0],e))?i[0]=h.toGlobalCoord(h.getExtent()[n?0:1]):Y$(t.get(c[1],e))&&(i[1]=p.toGlobalCoord(p.getExtent()[n?0:1]))}isNaN(s)||(i[0]=s),isNaN(l)||(i[1]=l)}else i=[s,l];t.setItemLayout(e,i)}var K$=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n}return i(e,t),e.prototype.updateTransform=function(t,e,n){e.eachSeries(function(t){var e=_$.getMarkerModelFromSeries(t,"markLine");if(e){var r=e.getData(),o=j$(e).from,i=j$(e).to;o.each(function(e){$$(o,e,!0,t,n),$$(i,e,!1,t,n)}),r.each(function(t){r.setItemLayout(t,[o.getItemLayout(t),i.getItemLayout(t)])}),this.markerGroupMap.get(t.id).updateLayout()}},this)},e.prototype.renderSeries=function(t,e,n,r){var o=t.coordinateSystem,i=t.id,a=t.getData(),u=this.markerGroupMap,s=u.get(i)||u.set(i,new zR);this.group.add(s.group);var l=J$(o,t,e),c=l.from,f=l.to,d=l.line;j$(e).from=c,j$(e).to=f,e.setData(d);var h=e.get("symbol"),p=e.get("symbolSize"),g=e.get("symbolRotate"),m=e.get("symbolOffset");function v(e,n,o){var i=e.getItemModel(n);$$(e,n,o,t,r);var u=i.getModel("itemStyle").getItemStyle();null==u.fill&&(u.fill=Ny(a,"color")),e.setItemVisual(n,{symbolKeepAspect:i.get("symbolKeepAspect"),symbolOffset:at(i.get("symbolOffset"),m[o?0:1]),symbolRotate:at(i.get("symbolRotate",!0),g[o?0:1]),symbolSize:at(i.get("symbolSize"),p[o?0:1]),symbol:at(i.get("symbol",!0),h[o?0:1]),style:u})}X(h)||(h=[h,h]),X(p)||(p=[p,p]),X(g)||(g=[g,g]),X(m)||(m=[m,m]),l.from.each(function(t){v(c,t,!0),v(f,t,!1)}),d.each(function(t){var e=d.getItemModel(t).getModel("lineStyle").getLineStyle();d.setItemLayout(t,[c.getItemLayout(t),f.getItemLayout(t)]),null==e.stroke&&(e.stroke=c.getItemVisual(t,"style").fill),d.setItemVisual(t,{fromSymbolKeepAspect:c.getItemVisual(t,"symbolKeepAspect"),fromSymbolOffset:c.getItemVisual(t,"symbolOffset"),fromSymbolRotate:c.getItemVisual(t,"symbolRotate"),fromSymbolSize:c.getItemVisual(t,"symbolSize"),fromSymbol:c.getItemVisual(t,"symbol"),toSymbolKeepAspect:f.getItemVisual(t,"symbolKeepAspect"),toSymbolOffset:f.getItemVisual(t,"symbolOffset"),toSymbolRotate:f.getItemVisual(t,"symbolRotate"),toSymbolSize:f.getItemVisual(t,"symbolSize"),toSymbol:f.getItemVisual(t,"symbol"),style:e})}),s.updateData(d),l.line.eachItemGraphicEl(function(t,n){t.traverse(function(t){Gs(t).dataModel=e})}),this.markKeep(s),s.group.silent=e.get("silent")||t.get("silent")},e.type="markLine",e}(z$);function J$(t,e,n){var r;r=t?B(t&&t.dimensions,function(t){var n=e.getData().getDimensionInfo(e.getData().mapDimension(t))||{};return O({name:t},n)}):[{name:"value",type:"float"}];var o=new CM(r,n),i=new CM(r,n),a=new CM([],n),u=B(n.get("data"),j(X$,e,t,n));t&&(u=H(u,j(Z$,t)));var s=t?E$:function(t){return t.value};return o.initData(B(u,function(t){return t[0]}),null,s),i.initData(B(u,function(t){return t[1]}),null,s),a.initData(B(u,function(t){return t[2]})),a.hasItemOption=!0,{from:o,to:i,line:a}}var Q$=K$;function tK(t){t.registerComponentModel(G$),t.registerComponentView(Q$),t.registerPreprocessor(function(t){y$(t.series,"markLine")&&(t.markLine=t.markLine||{})})}var eK=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n}return i(e,t),e.prototype.createMarkerModelFromSeries=function(t,n,r){return new e(t,n,r)},e.type="markArea",e.defaultOption={zlevel:0,z:1,tooltip:{trigger:"item"},animation:!1,label:{show:!0,position:"top"},itemStyle:{borderWidth:0},emphasis:{label:{show:!0,position:"top"}}},e}(_$),nK=eK,rK=Di(),oK=function(t,e,n,r){var o=A$(t,r[0]),i=A$(t,r[1]),a=o.coord,u=i.coord;a[0]=it(a[0],-1/0),a[1]=it(a[1],-1/0),u[0]=it(u[0],1/0),u[1]=it(u[1],1/0);var s=A([{},o,i]);return s.coord=[o.coord,i.coord],s.x0=o.x,s.y0=o.y,s.x1=i.x,s.y1=i.y,s};function iK(t){return!isNaN(t)&&!isFinite(t)}function aK(t,e,n,r){var o=1-t;return iK(e[o])&&iK(n[o])}function uK(t,e){var n=e.coord[0],r=e.coord[1];return!!(yT(t,"cartesian2d")&&n&&r&&(aK(1,n,r,t)||aK(0,n,r,t)))||(L$(t,{coord:n,x:e.x0,y:e.y0})||L$(t,{coord:r,x:e.x1,y:e.y1}))}function sK(t,e,n,r,o){var i,a=r.coordinateSystem,u=t.getItemModel(e),s=Ro(u.get(n[0]),o.getWidth()),l=Ro(u.get(n[1]),o.getHeight());if(isNaN(s)||isNaN(l)){if(r.getMarkerPosition)i=r.getMarkerPosition(t.getValues(n,e));else{var c=t.get(n[0],e),f=t.get(n[1],e),d=[c,f];a.clampData&&a.clampData(d,d),i=a.dataToPoint(d,!0)}if(yT(a,"cartesian2d")){var h=a.getAxis("x"),p=a.getAxis("y");c=t.get(n[0],e),f=t.get(n[1],e);iK(c)?i[0]=h.toGlobalCoord(h.getExtent()["x0"===n[0]?0:1]):iK(f)&&(i[1]=p.toGlobalCoord(p.getExtent()["y0"===n[1]?0:1]))}isNaN(s)||(i[0]=s),isNaN(l)||(i[1]=l)}else i=[s,l];return i}var lK=[["x0","y0"],["x1","y0"],["x1","y1"],["x0","y1"]],cK=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n}return i(e,t),e.prototype.updateTransform=function(t,e,n){e.eachSeries(function(t){var e=_$.getMarkerModelFromSeries(t,"markArea");if(e){var r=e.getData();r.each(function(e){var o=B(lK,function(o){return sK(r,e,o,t,n)});r.setItemLayout(e,o);var i=r.getItemGraphicEl(e);i.setShape("points",o)})}},this)},e.prototype.renderSeries=function(t,e,n,r){var o=t.coordinateSystem,i=t.id,a=t.getData(),u=this.markerGroupMap,s=u.get(i)||u.set(i,{group:new _o});this.group.add(s.group),this.markKeep(s);var l=fK(o,t,e);e.setData(l),l.each(function(e){var n=B(lK,function(n){return sK(l,e,n,t,r)}),i=o.getAxis("x").scale,u=o.getAxis("y").scale,s=i.getExtent(),c=u.getExtent(),f=[i.parse(l.get("x0",e)),i.parse(l.get("x1",e))],d=[u.parse(l.get("y0",e)),u.parse(l.get("y1",e))];zo(f),zo(d);var h=!(s[0]>f[1]||s[1]<f[0]||c[0]>d[1]||c[1]<d[0]),p=!h;l.setItemLayout(e,{points:n,allClipped:p});var g=l.getItemModel(e).getModel("itemStyle").getItemStyle(),m=Ny(a,"color");g.fill||(g.fill=m,"string"===typeof g.fill&&(g.fill=_n(g.fill,.4))),g.stroke||(g.stroke=m),l.setItemVisual(e,"style",g)}),l.diff(rK(s).data).add(function(t){var e=l.getItemLayout(t);if(!e.allClipped){var n=new nf({shape:{points:e.points}});l.setItemGraphicEl(t,n),s.group.add(n)}}).update(function(t,n){var r=rK(s).data.getItemGraphicEl(n),o=l.getItemLayout(t);o.allClipped?r&&s.group.remove(r):(r?Qf(r,{shape:{points:o.points}},e,t):r=new nf({shape:{points:o.points}}),l.setItemGraphicEl(t,r),s.group.add(r))}).remove(function(t){var e=rK(s).data.getItemGraphicEl(t);s.group.remove(e)}).execute(),l.eachItemGraphicEl(function(t,n){var r=l.getItemModel(n),o=l.getItemVisual(n,"style");t.useStyle(l.getItemVisual(n,"style")),_d(t,Sd(r),{labelFetcher:e,labelDataIndex:n,defaultText:l.getName(n)||"",inheritColor:"string"===typeof o.fill?_n(o.fill,1):"#000"}),ql(t,r),Gl(t),Gs(t).dataModel=e}),rK(s).data=l,s.group.silent=e.get("silent")||t.get("silent")},e.type="markArea",e}(z$);function fK(t,e,n){var r,o,i=["x0","y0","x1","y1"];t?(r=B(t&&t.dimensions,function(t){var n=e.getData(),r=n.getDimensionInfo(n.mapDimension(t))||{};return O({name:t},r)}),o=new CM(B(i,function(t,e){return{name:t,type:r[e%2].type}}),n)):(r=[{name:"value",type:"float"}],o=new CM(r,n));var a=B(n.get("data"),j(oK,e,t,n));t&&(a=H(a,j(uK,t)));var u=t?function(t,e,n,r){return t.coord[Math.floor(r/2)][r%2]}:function(t){return t.value};return o.initData(a,null,u),o.hasItemOption=!0,o}var dK=cK;function hK(t){t.registerComponentModel(nK),t.registerComponentView(dK),t.registerPreprocessor(function(t){y$(t.series,"markArea")&&(t.markArea=t.markArea||{})})}var pK=function(t,e){return"all"===e?{type:"all",title:t.getLocale(["legend","selector","all"])}:"inverse"===e?{type:"inverse",title:t.getLocale(["legend","selector","inverse"])}:void 0},gK=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n.layoutMode={type:"box",ignoreSize:!0},n}return i(e,t),e.prototype.init=function(t,e,n){this.mergeDefaultAndTheme(t,n),t.selected=t.selected||{},this._updateSelector(t)},e.prototype.mergeOption=function(e,n){t.prototype.mergeOption.call(this,e,n),this._updateSelector(e)},e.prototype._updateSelector=function(t){var e=t.selector,n=this.ecModel;!0===e&&(e=t.selector=["all","inverse"]),X(e)&&z(e,function(t,r){q(t)&&(t={type:t}),e[r]=D(t,pK(n,t.type))})},e.prototype.optionUpdated=function(){this._updateData(this.ecModel);var t=this._data;if(t[0]&&"single"===this.get("selectedMode")){for(var e=!1,n=0;n<t.length;n++){var r=t[n].get("name");if(this.isSelected(r)){this.select(r),e=!0;break}}!e&&this.select(t[0].get("name"))}},e.prototype._updateData=function(t){var e=[],n=[];t.eachRawSeries(function(r){var o,i=r.name;if(n.push(i),r.legendVisualProvider){var a=r.legendVisualProvider,u=a.getAllNames();t.isSeriesFiltered(r)||(n=n.concat(u)),u.length?e=e.concat(u):o=!0}else o=!0;o&&wi(r)&&e.push(r.name)}),this._availableNames=n;var r=this.get("data")||e,o=B(r,function(t){return"string"!==typeof t&&"number"!==typeof t||(t={name:t}),new Yd(t,this,this.ecModel)},this);this._data=o},e.prototype.getData=function(){return this._data},e.prototype.select=function(t){var e=this.option.selected,n=this.get("selectedMode");if("single"===n){var r=this._data;z(r,function(t){e[t.get("name")]=!1})}e[t]=!0},e.prototype.unSelect=function(t){"single"!==this.get("selectedMode")&&(this.option.selected[t]=!1)},e.prototype.toggleSelected=function(t){var e=this.option.selected;e.hasOwnProperty(t)||(e[t]=!0),this[e[t]?"unSelect":"select"](t)},e.prototype.allSelect=function(){var t=this._data,e=this.option.selected;z(t,function(t){e[t.get("name",!0)]=!0})},e.prototype.inverseSelect=function(){var t=this._data,e=this.option.selected;z(t,function(t){var n=t.get("name",!0);e.hasOwnProperty(n)||(e[n]=!0),e[n]=!e[n]})},e.prototype.isSelected=function(t){var e=this.option.selected;return!(e.hasOwnProperty(t)&&!e[t])&&E(this._availableNames,t)>=0},e.prototype.getOrient=function(){return"vertical"===this.get("orient")?{index:1,name:"vertical"}:{index:0,name:"horizontal"}},e.type="legend.plain",e.dependencies=["series"],e.defaultOption={zlevel:0,z:4,show:!0,orient:"horizontal",left:"center",top:0,align:"auto",backgroundColor:"rgba(0,0,0,0)",borderColor:"#ccc",borderRadius:0,borderWidth:0,padding:5,itemGap:10,itemWidth:25,itemHeight:14,symbolRotate:"inherit",inactiveColor:"#ccc",inactiveBorderColor:"#ccc",inactiveBorderWidth:"auto",itemStyle:{color:"inherit",opacity:"inherit",decal:"inherit",shadowBlur:0,shadowColor:null,shadowOffsetX:0,shadowOffsetY:0,borderColor:"inherit",borderWidth:"auto",borderCap:"inherit",borderJoin:"inherit",borderDashOffset:"inherit",borderMiterLimit:"inherit"},lineStyle:{width:"auto",color:"inherit",inactiveColor:"#ccc",inactiveWidth:2,opacity:"inherit",type:"inherit",cap:"inherit",join:"inherit",dashOffset:"inherit",miterLimit:"inherit",shadowBlur:0,shadowColor:null,shadowOffsetX:0,shadowOffsetY:0},textStyle:{color:"#333"},selectedMode:!0,selector:!1,selectorLabel:{show:!0,borderRadius:10,padding:[3,5,3,5],fontSize:12,fontFamily:" sans-serif",color:"#666",borderWidth:1,borderColor:"#666"},emphasis:{selectorLabel:{show:!0,color:"#eee",backgroundColor:"#666"}},selectorPosition:"auto",selectorItemGap:7,selectorButtonGap:10,tooltip:{show:!1}},e}(bp),mK=gK,vK=j,yK=z,bK=_o,xK=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n.newlineDisabled=!1,n}return i(e,t),e.prototype.init=function(){this.group.add(this._contentGroup=new bK),this.group.add(this._selectorGroup=new bK),this._isFirstRender=!0},e.prototype.getContentGroup=function(){return this._contentGroup},e.prototype.getSelectorGroup=function(){return this._selectorGroup},e.prototype.render=function(t,e,n){var r=this._isFirstRender;if(this._isFirstRender=!1,this.resetInner(),t.get("show",!0)){var o=t.get("align"),i=t.get("orient");o&&"auto"!==o||(o="right"===t.get("left")&&"vertical"===i?"right":"left");var a=t.get("selector",!0),u=t.get("selectorPosition",!0);!a||u&&"auto"!==u||(u="horizontal"===i?"end":"start"),this.renderInner(o,t,e,n,a,i,u);var s=t.getBoxLayoutParams(),l={width:n.getWidth(),height:n.getHeight()},c=t.get("padding"),f=lp(s,l,c),d=this.layoutInner(t,o,f,r,a,u),h=lp(O({width:d.width,height:d.height},s),l,c);this.group.x=h.x-d.x,this.group.y=h.y-d.y,this.group.markRedraw(),this.group.add(this._backgroundEl=SY(d,t))}},e.prototype.resetInner=function(){this.getContentGroup().removeAll(),this._backgroundEl&&this.group.remove(this._backgroundEl),this.getSelectorGroup().removeAll()},e.prototype.renderInner=function(t,e,n,r,o,i,a){var u=this.getContentGroup(),s=mt(),l=e.get("selectedMode"),c=[];n.eachRawSeries(function(t){!t.get("legendHoverLink")&&c.push(t.id)}),yK(e.getData(),function(o,i){var a=o.get("name");if(!this.newlineDisabled&&(""===a||"\n"===a)){var f=new bK;return f.newline=!0,void u.add(f)}var d=n.getSeriesByName(a)[0];if(!s.get(a)){if(d){var h=d.getData(),p=h.getVisual("legendLineStyle")||{},g=h.getVisual("legendIcon"),m=h.getVisual("style"),v=this._createItem(d,a,i,o,e,t,p,m,g,l);v.on("click",vK(SK,a,null,r,c)).on("mouseover",vK(MK,d.name,null,r,c)).on("mouseout",vK(TK,d.name,null,r,c)),s.set(a,!0)}else n.eachRawSeries(function(n){if(!s.get(a)&&n.legendVisualProvider){var u=n.legendVisualProvider;if(!u.containName(a))return;var f=u.indexOfName(a),d=u.getItemVisual(f,"style"),h=u.getItemVisual(f,"legendIcon"),p=gn(d.fill);p&&0===p[3]&&(p[3]=.2,d.fill=Sn(p,"rgba"));var g=this._createItem(n,a,i,o,e,t,{},d,h,l);g.on("click",vK(SK,null,a,r,c)).on("mouseover",vK(MK,null,a,r,c)).on("mouseout",vK(TK,null,a,r,c)),s.set(a,!0)}},this);0}},this),o&&this._createSelector(o,e,r,i,a)},e.prototype._createSelector=function(t,e,n,r,o){var i=this.getSelectorGroup();yK(t,function(t){var r=t.type,o=new Us({style:{x:0,y:0,align:"center",verticalAlign:"middle"},onclick:function(){n.dispatchAction({type:"all"===r?"legendAllSelect":"legendInverseSelect"})}});i.add(o);var a=e.getModel("selectorLabel"),u=e.getModel(["emphasis","selectorLabel"]);_d(o,{normal:a,emphasis:u},{defaultText:t.title}),Gl(o)})},e.prototype._createItem=function(t,e,n,r,o,i,a,u,s,l){var c=t.visualDrawType,f=o.get("itemWidth"),d=o.get("itemHeight"),h=o.isSelected(e),p=r.get("symbolRotate"),g=r.get("icon");s=g||s||"roundRect";var m=o.getModel("lineStyle"),v=wK(s,r,m,a,u,c,h),y=new bK,b=r.getModel("textStyle");if("function"!==typeof t.getLegendIcon||g&&"inherit"!==g){var x="inherit"===g&&t.getData().getVisual("symbol")?"inherit"===p?t.getData().getVisual("symbolRotate"):p:0;y.add(_K({itemWidth:f,itemHeight:d,icon:s,iconRotate:x,itemStyle:v.itemStyle,lineStyle:v.lineStyle}))}else y.add(t.getLegendIcon({itemWidth:f,itemHeight:d,icon:s,iconRotate:p,itemStyle:v.itemStyle,lineStyle:v.lineStyle}));var w="left"===i?f+5:-5,_=i,S=o.get("formatter"),C=e;"string"===typeof S&&S?C=S.replace("{name}",null!=e?e:""):"function"===typeof S&&(C=S(e));var M=r.get("inactiveColor");y.add(new Us({style:Cd(b,{text:C,x:w,y:d/2,fill:h?b.getTextColor():M,align:_,verticalAlign:"middle"})}));var T=new As({shape:y.getBoundingRect(),invisible:!0}),k=r.getModel("tooltip");return k.get("show")&&yd({el:T,componentModel:o,itemName:e,itemTooltipOption:k.option}),y.add(T),y.eachChild(function(t){t.silent=!0}),T.silent=!l,this.getContentGroup().add(y),Gl(y),y.__legendDataIndex=n,y},e.prototype.layoutInner=function(t,e,n,r,o,i){var a=this.getContentGroup(),u=this.getSelectorGroup();up(t.get("orient"),a,t.get("itemGap"),n.width,n.height);var s=a.getBoundingRect(),l=[-s.x,-s.y];if(u.markRedraw(),a.markRedraw(),o){up("horizontal",u,t.get("selectorItemGap",!0));var c=u.getBoundingRect(),f=[-c.x,-c.y],d=t.get("selectorButtonGap",!0),h=t.getOrient().index,p=0===h?"width":"height",g=0===h?"height":"width",m=0===h?"y":"x";"end"===i?f[h]+=s[p]+d:l[h]+=c[p]+d,f[1-h]+=s[g]/2-c[g]/2,u.x=f[0],u.y=f[1],a.x=l[0],a.y=l[1];var v={x:0,y:0};return v[p]=s[p]+d+c[p],v[g]=Math.max(s[g],c[g]),v[m]=Math.min(0,c[m]+f[1-h]),v}return a.x=l[0],a.y=l[1],this.group.getBoundingRect()},e.prototype.remove=function(){this.getContentGroup().removeAll(),this._isFirstRender=!0},e.type="legend.plain",e}(Lv);function wK(t,e,n,r,o,i,a){for(var u=e.getModel("itemStyle"),s=Ud.concat([["decal"]]),l={},c=0;c<s.length;++c){var f=s[c][s[c].length-1],d=s[c][0],h=u.getShallow(f);if("inherit"===h)switch(d){case"fill":l.fill=o[i];break;case"stroke":l.stroke=o[0===t.lastIndexOf("empty",0)?"fill":"stroke"];break;case"opacity":l.opacity=("fill"===i?o:r).opacity;break;default:l[d]=o[d]}else"auto"===h&&"lineWidth"===d?l.lineWidth=o.lineWidth>0?2:0:l[d]=h}var p=e.getModel("lineStyle"),g=Hd.concat([["inactiveColor"],["inactiveWidth"]]),m={};for(c=0;c<g.length;++c){f=g[c][1],d=g[c][0],h=p.getShallow(f);"inherit"===h?m[d]=r[d]:"auto"===h&&"lineWidth"===d?m.lineWidth=r.lineWidth>0?2:0:m[d]=h}if("auto"===l.fill&&(l.fill=o.fill),"auto"===l.stroke&&(l.stroke=o.fill),"auto"===m.stroke&&(m.stroke=o.fill),!a){var v=e.get("inactiveBorderWidth"),y=l[t.indexOf("empty")>-1?"fill":"stroke"];l.lineWidth="auto"===v?o.lineWidth>0&&y?2:0:l.lineWidth,l.fill=e.get("inactiveColor"),l.stroke=e.get("inactiveBorderColor"),m.stroke=n.get("inactiveColor"),m.lineWidth=n.get("inactiveWidth")}return{itemStyle:l,lineStyle:m}}function _K(t){var e=t.icon||"roundRect",n=zb(e,0,0,t.itemWidth,t.itemHeight,t.itemStyle.fill);return n.setStyle(t.itemStyle),n.rotation=(t.iconRotate||0)*Math.PI/180,n.setOrigin([t.itemWidth/2,t.itemHeight/2]),e.indexOf("empty")>-1&&(n.style.stroke=n.style.fill,n.style.fill="#fff",n.style.lineWidth=2),n}function SK(t,e,n,r){TK(t,e,n,r),n.dispatchAction({type:"legendToggleSelect",name:null!=t?t:e}),MK(t,e,n,r)}function CK(t){var e,n=t.getZr().storage.getDisplayList(),r=0,o=n.length;while(r<o&&!(e=n[r].states.emphasis))r++;return e&&e.hoverLayer}function MK(t,e,n,r){CK(n)||n.dispatchAction({type:"highlight",seriesName:t,name:e,excludeSeriesId:r})}function TK(t,e,n,r){CK(n)||n.dispatchAction({type:"downplay",seriesName:t,name:e,excludeSeriesId:r})}var kK=xK;function DK(t){var e=t.findComponents({mainType:"legend"});e&&e.length&&t.filterSeries(function(t){for(var n=0;n<e.length;n++)if(!e[n].isSelected(t.name))return!1;return!0})}function AK(t,e,n){var r,o={},i="toggleSelected"===t;return n.eachComponent("legend",function(n){i&&null!=r?n[r?"select":"unSelect"](e.name):"allSelect"===t||"inverseSelect"===t?n[t]():(n[t](e.name),r=n.isSelected(e.name));var a=n.getData();z(a,function(t){var e=t.get("name");if("\n"!==e&&""!==e){var r=n.isSelected(e);o.hasOwnProperty(e)?o[e]=o[e]&&r:o[e]=r}})}),"allSelect"===t||"inverseSelect"===t?{selected:o}:{name:e.name,selected:o}}function IK(t){t.registerAction("legendToggleSelect","legendselectchanged",j(AK,"toggleSelected")),t.registerAction("legendAllSelect","legendselectall",j(AK,"allSelect")),t.registerAction("legendInverseSelect","legendinverseselect",j(AK,"inverseSelect")),t.registerAction("legendSelect","legendselected",j(AK,"select")),t.registerAction("legendUnSelect","legendunselected",j(AK,"unSelect"))}function OK(t){t.registerComponentModel(mK),t.registerComponentView(kK),t.registerProcessor(t.PRIORITY.PROCESSOR.SERIES_FILTER,DK),t.registerSubTypeDefaulter("legend",function(){return"plain"}),IK(t)}var LK=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n}return i(e,t),e.prototype.setScrollDataIndex=function(t){this.option.scrollDataIndex=t},e.prototype.init=function(e,n,r){var o=pp(e);t.prototype.init.call(this,e,n,r),EK(this,e,o)},e.prototype.mergeOption=function(e,n){t.prototype.mergeOption.call(this,e,n),EK(this,this.option,e)},e.type="legend.scroll",e.defaultOption=Jd(mK.defaultOption,{scrollDataIndex:0,pageButtonItemGap:5,pageButtonGap:null,pageButtonPosition:"end",pageFormatter:"{current}/{total}",pageIcons:{horizontal:["M0,0L12,-10L12,10z","M0,0L-12,-10L-12,10z"],vertical:["M0,0L20,0L10,-20z","M0,0L20,0L10,20z"]},pageIconColor:"#2f4554",pageIconInactiveColor:"#aaa",pageIconSize:15,pageTextStyle:{color:"#333"},animationDurationUpdate:800}),e}(mK);function EK(t,e,n){var r=t.getOrient(),o=[1,1];o[r.index]=0,hp(e,n,{type:"box",ignoreSize:!!o})}var NK=LK,RK=_o,PK=["width","height"],zK=["x","y"],BK=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n.newlineDisabled=!0,n._currentIndex=0,n}return i(e,t),e.prototype.init=function(){t.prototype.init.call(this),this.group.add(this._containerGroup=new RK),this._containerGroup.add(this.getContentGroup()),this.group.add(this._controllerGroup=new RK)},e.prototype.resetInner=function(){t.prototype.resetInner.call(this),this._controllerGroup.removeAll(),this._containerGroup.removeClipPath(),this._containerGroup.__rectSize=null},e.prototype.renderInner=function(e,n,r,o,i,a,u){var s=this;t.prototype.renderInner.call(this,e,n,r,o,i,a,u);var l=this._controllerGroup,c=n.get("pageIconSize",!0),f=X(c)?c:[c,c];h("pagePrev",0);var d=n.getModel("pageTextStyle");function h(t,e){var r=t+"DataIndex",i=hd(n.get("pageIcons",!0)[n.getOrient().name][e],{onclick:G(s._pageGo,s,r,n,o)},{x:-f[0]/2,y:-f[1]/2,width:f[0],height:f[1]});i.name=t,l.add(i)}l.add(new Us({name:"pageText",style:{text:"xx/xx",fill:d.getTextColor(),font:d.getFont(),verticalAlign:"middle",align:"center"},silent:!0})),h("pageNext",1)},e.prototype.layoutInner=function(t,e,n,r,o,i){var a=this.getSelectorGroup(),u=t.getOrient().index,s=PK[u],l=zK[u],c=PK[1-u],f=zK[1-u];o&&up("horizontal",a,t.get("selectorItemGap",!0));var d=t.get("selectorButtonGap",!0),h=a.getBoundingRect(),p=[-h.x,-h.y],g=k(n);o&&(g[s]=n[s]-h[s]-d);var m=this._layoutContentAndController(t,r,g,u,s,c,f,l);if(o){if("end"===i)p[u]+=m[s]+d;else{var v=h[s]+d;p[u]-=v,m[l]-=v}m[s]+=h[s]+d,p[1-u]+=m[f]+m[c]/2-h[c]/2,m[c]=Math.max(m[c],h[c]),m[f]=Math.min(m[f],h[f]+p[1-u]),a.x=p[0],a.y=p[1],a.markRedraw()}return m},e.prototype._layoutContentAndController=function(t,e,n,r,o,i,a,u){var s=this.getContentGroup(),l=this._containerGroup,c=this._controllerGroup;up(t.get("orient"),s,t.get("itemGap"),r?n.width:null,r?null:n.height),up("horizontal",c,t.get("pageButtonItemGap",!0));var f=s.getBoundingRect(),d=c.getBoundingRect(),h=this._showController=f[o]>n[o],p=[-f.x,-f.y];e||(p[r]=s[u]);var g=[0,0],m=[-d.x,-d.y],v=at(t.get("pageButtonGap",!0),t.get("itemGap",!0));if(h){var y=t.get("pageButtonPosition",!0);"end"===y?m[r]+=n[o]-d[o]:g[r]+=d[o]+v}m[1-r]+=f[i]/2-d[i]/2,s.setPosition(p),l.setPosition(g),c.setPosition(m);var b={x:0,y:0};if(b[o]=h?n[o]:f[o],b[i]=Math.max(f[i],d[i]),b[a]=Math.min(0,d[a]+m[1-r]),l.__rectSize=n[o],h){var x={x:0,y:0};x[o]=Math.max(n[o]-d[o]-v,0),x[i]=b[i],l.setClipPath(new As({shape:x})),l.__rectSize=x[o]}else c.eachChild(function(t){t.attr({invisible:!0,silent:!0})});var w=this._getPageInfo(t);return null!=w.pageIndex&&Qf(s,{x:w.contentPosition[0],y:w.contentPosition[1]},h?t:null),this._updatePageInfoView(t,w),b},e.prototype._pageGo=function(t,e,n){var r=this._getPageInfo(e)[t];null!=r&&n.dispatchAction({type:"legendScroll",scrollDataIndex:r,legendId:e.id})},e.prototype._updatePageInfoView=function(t,e){var n=this._controllerGroup;z(["pagePrev","pageNext"],function(r){var o=r+"DataIndex",i=null!=e[o],a=n.childOfName(r);a&&(a.setStyle("fill",i?t.get("pageIconColor",!0):t.get("pageIconInactiveColor",!0)),a.cursor=i?"pointer":"default")});var r=n.childOfName("pageText"),o=t.get("pageFormatter"),i=e.pageIndex,a=null!=i?i+1:0,u=e.pageCount;r&&o&&r.setStyle("text",q(o)?o.replace("{current}",null==a?"":a+"").replace("{total}",null==u?"":u+""):o({current:a,total:u}))},e.prototype._getPageInfo=function(t){var e=t.get("scrollDataIndex",!0),n=this.getContentGroup(),r=this._containerGroup.__rectSize,o=t.getOrient().index,i=PK[o],a=zK[o],u=this._findTargetItemIndex(e),s=n.children(),l=s[u],c=s.length,f=c?1:0,d={contentPosition:[n.x,n.y],pageCount:f,pageIndex:f-1,pagePrevDataIndex:null,pageNextDataIndex:null};if(!l)return d;var h=y(l);d.contentPosition[o]=-h.s;for(var p=u+1,g=h,m=h,v=null;p<=c;++p)v=y(s[p]),(!v&&m.e>g.s+r||v&&!b(v,g.s))&&(g=m.i>g.i?m:v,g&&(null==d.pageNextDataIndex&&(d.pageNextDataIndex=g.i),++d.pageCount)),m=v;for(p=u-1,g=h,m=h,v=null;p>=-1;--p)v=y(s[p]),v&&b(m,v.s)||!(g.i<m.i)||(m=g,null==d.pagePrevDataIndex&&(d.pagePrevDataIndex=g.i),++d.pageCount,++d.pageIndex),g=v;return d;function y(t){if(t){var e=t.getBoundingRect(),n=e[a]+t[a];return{s:n,e:n+e[i],i:t.__legendDataIndex}}}function b(t,e){return t.e>=e&&t.s<=e+r}},e.prototype._findTargetItemIndex=function(t){if(!this._showController)return 0;var e,n,r=this.getContentGroup();return r.eachChild(function(r,o){var i=r.__legendDataIndex;null==n&&null!=i&&(n=o),i===t&&(e=o)}),null!=e?e:n},e.type="legend.scroll",e}(kK),VK=BK;function HK(t){t.registerAction("legendScroll","legendscroll",function(t,e){var n=t.scrollDataIndex;null!=n&&e.eachComponent({mainType:"legend",subType:"scroll",query:t},function(t){t.setScrollDataIndex(n)})})}function FK(t){mS(OK),t.registerComponentModel(NK),t.registerComponentView(VK),HK(t)}function WK(t){mS(OK),mS(FK)}var UK=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n}return i(e,t),e.type="dataZoom.inside",e.defaultOption=Jd(JX.defaultOption,{disabled:!1,zoomLock:!1,zoomOnMouseWheel:!0,moveOnMouseMove:!0,moveOnMouseWheel:!1,preventDefaultMouseMove:!0}),e}(JX),GK=UK,jK=Di();function XK(t,e,n){jK(t).coordSysRecordMap.each(function(t){var r=t.dataZoomInfoMap.get(e.uid);r&&(r.getRange=n)})}function YK(t,e){for(var n=jK(t).coordSysRecordMap,r=n.keys(),o=0;o<r.length;o++){var i=r[o],a=n.get(i),u=a.dataZoomInfoMap;if(u){var s=e.uid,l=u.get(s);l&&(u.removeKey(s),u.keys().length||qK(n,a))}}}function qK(t,e){if(e){t.removeKey(e.model.uid);var n=e.controller;n&&n.dispose()}}function ZK(t,e){var n={model:e,containsPoint:j(KK,e),dispatchAction:j($K,t),dataZoomInfoMap:null,controller:null},r=n.controller=new kO(t.getZr());return z(["pan","zoom","scrollMove"],function(t){r.on(t,function(e){var r=[];n.dataZoomInfoMap.each(function(o){if(e.isAvailableBehavior(o.model.option)){var i=(o.getRange||{})[t],a=i&&i(o.dzReferCoordSysInfo,n.model.mainType,n.controller,e);!o.model.get("disabled",!0)&&a&&r.push({dataZoomId:o.model.id,start:a[0],end:a[1]})}}),r.length&&n.dispatchAction(r)})}),n}function $K(t,e){t.dispatchAction({type:"dataZoom",animation:{easing:"cubicOut",duration:100},batch:e})}function KK(t,e,n,r){return t.coordinateSystem.containPoint([n,r])}function JK(t){var e,n="type_",r={type_true:2,type_move:1,type_false:0,type_undefined:-1},o=!0;return t.each(function(t){var i=t.model,a=!i.get("disabled",!0)&&(!i.get("zoomLock",!0)||"move");r[n+a]>r[n+e]&&(e=a),o=o&&i.get("preventDefaultMouseMove",!0)}),{controlType:e,opt:{zoomOnMouseWheel:!0,moveOnMouseMove:!0,moveOnMouseWheel:!0,preventDefaultMouseMove:!!o}}}function QK(t){t.registerProcessor(t.PRIORITY.PROCESSOR.FILTER,function(t,e){var n=jK(e),r=n.coordSysRecordMap||(n.coordSysRecordMap=mt());r.each(function(t){t.dataZoomInfoMap=null}),t.eachComponent({mainType:"dataZoom",subType:"inside"},function(t){var n=qX(t);z(n.infoList,function(n){var o=n.model.uid,i=r.get(o)||r.set(o,ZK(e,n.model)),a=i.dataZoomInfoMap||(i.dataZoomInfoMap=mt());a.set(t.uid,{dzReferCoordSysInfo:n,model:t,getRange:null})})}),r.each(function(t){var e,n=t.controller,o=t.dataZoomInfoMap;if(o){var i=o.keys()[0];null!=i&&(e=o.get(i))}if(e){var a=JK(o);n.enable(a.controlType,a.opt),n.setPointerChecker(t.containsPoint),Yv(t,"dispatchAction",e.model.get("throttle",!0),"fixRate")}else qK(r,t)})})}var tJ=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type="dataZoom.inside",e}return i(e,t),e.prototype.render=function(e,n,r){t.prototype.render.apply(this,arguments),e.noTarget()?this._clear():(this.range=e.getPercentRange(),XK(r,e,{pan:G(eJ.pan,this),zoom:G(eJ.zoom,this),scrollMove:G(eJ.scrollMove,this)}))},e.prototype.dispose=function(){this._clear(),t.prototype.dispose.apply(this,arguments)},e.prototype._clear=function(){YK(this.api,this.dataZoomModel),this.range=null},e.type="dataZoom.inside",e}(nY),eJ={zoom:function(t,e,n,r){var o=this.range,i=o.slice(),a=t.axisModels[0];if(a){var u=rJ[e](null,[r.originX,r.originY],a,n,t),s=(u.signal>0?u.pixelStart+u.pixelLength-u.pixel:u.pixel-u.pixelStart)/u.pixelLength*(i[1]-i[0])+i[0],l=Math.max(1/r.scale,0);i[0]=(i[0]-s)*l+s,i[1]=(i[1]-s)*l+s;var c=this.dataZoomModel.findRepresentativeAxisProxy().getMinMaxSpan();return nz(0,i,[0,100],0,c.minSpan,c.maxSpan),this.range=i,o[0]!==i[0]||o[1]!==i[1]?i:void 0}},pan:nJ(function(t,e,n,r,o,i){var a=rJ[r]([i.oldX,i.oldY],[i.newX,i.newY],e,o,n);return a.signal*(t[1]-t[0])*a.pixel/a.pixelLength}),scrollMove:nJ(function(t,e,n,r,o,i){var a=rJ[r]([0,0],[i.scrollDelta,i.scrollDelta],e,o,n);return a.signal*(t[1]-t[0])*i.scrollDelta})};function nJ(t){return function(e,n,r,o){var i=this.range,a=i.slice(),u=e.axisModels[0];if(u){var s=t(a,u,e,n,r,o);return nz(s,a,[0,100],"all"),this.range=a,i[0]!==a[0]||i[1]!==a[1]?a:void 0}}}var rJ={grid:function(t,e,n,r,o){var i=n.axis,a={},u=o.model.coordinateSystem.getRect();return t=t||[0,0],"x"===i.dim?(a.pixel=e[0]-t[0],a.pixelLength=u.width,a.pixelStart=u.x,a.signal=i.inverse?1:-1):(a.pixel=e[1]-t[1],a.pixelLength=u.height,a.pixelStart=u.y,a.signal=i.inverse?-1:1),a},polar:function(t,e,n,r,o){var i=n.axis,a={},u=o.model.coordinateSystem,s=u.getRadiusAxis().getExtent(),l=u.getAngleAxis().getExtent();return t=t?u.pointToCoord(t):[0,0],e=u.pointToCoord(e),"radiusAxis"===n.mainType?(a.pixel=e[0]-t[0],a.pixelLength=s[1]-s[0],a.pixelStart=s[0],a.signal=i.inverse?1:-1):(a.pixel=e[1]-t[1],a.pixelLength=l[1]-l[0],a.pixelStart=l[0],a.signal=i.inverse?-1:1),a},singleAxis:function(t,e,n,r,o){var i=n.axis,a=o.model.coordinateSystem.getRect(),u={};return t=t||[0,0],"horizontal"===i.orient?(u.pixel=e[0]-t[0],u.pixelLength=a.width,u.pixelStart=a.x,u.signal=i.inverse?1:-1):(u.pixel=e[1]-t[1],u.pixelLength=a.height,u.pixelStart=a.y,u.signal=i.inverse?-1:1),u}},oJ=tJ;function iJ(t){pY(t),t.registerComponentModel(GK),t.registerComponentView(oJ),QK(t)}var aJ=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n}return i(e,t),e.type="dataZoom.slider",e.layoutMode="box",e.defaultOption=Jd(JX.defaultOption,{show:!0,right:"ph",top:"ph",width:"ph",height:"ph",left:null,bottom:null,borderColor:"#d2dbee",borderRadius:3,backgroundColor:"rgba(47,69,84,0)",dataBackground:{lineStyle:{color:"#d2dbee",width:.5},areaStyle:{color:"#d2dbee",opacity:.2}},selectedDataBackground:{lineStyle:{color:"#8fb0f7",width:.5},areaStyle:{color:"#8fb0f7",opacity:.2}},fillerColor:"rgba(135,175,274,0.2)",handleIcon:"path://M-9.35,34.56V42m0-40V9.5m-2,0h4a2,2,0,0,1,2,2v21a2,2,0,0,1-2,2h-4a2,2,0,0,1-2-2v-21A2,2,0,0,1-11.35,9.5Z",handleSize:"100%",handleStyle:{color:"#fff",borderColor:"#ACB8D1"},moveHandleSize:7,moveHandleIcon:"path://M-320.9-50L-320.9-50c18.1,0,27.1,9,27.1,27.1V85.7c0,18.1-9,27.1-27.1,27.1l0,0c-18.1,0-27.1-9-27.1-27.1V-22.9C-348-41-339-50-320.9-50z M-212.3-50L-212.3-50c18.1,0,27.1,9,27.1,27.1V85.7c0,18.1-9,27.1-27.1,27.1l0,0c-18.1,0-27.1-9-27.1-27.1V-22.9C-239.4-41-230.4-50-212.3-50z M-103.7-50L-103.7-50c18.1,0,27.1,9,27.1,27.1V85.7c0,18.1-9,27.1-27.1,27.1l0,0c-18.1,0-27.1-9-27.1-27.1V-22.9C-130.9-41-121.8-50-103.7-50z",moveHandleStyle:{color:"#D2DBEE",opacity:.7},showDetail:!0,showDataShadow:"auto",realtime:!0,zoomLock:!1,textStyle:{color:"#6E7079"},brushSelect:!0,brushStyle:{color:"rgba(135,175,274,0.15)"},emphasis:{handleStyle:{borderColor:"#8FB0F7"},moveHandleStyle:{color:"#8FB0F7"}}}),e}(JX),uJ=aJ,sJ=As,lJ=7,cJ=1,fJ=30,dJ=7,hJ="horizontal",pJ="vertical",gJ=5,mJ=["line","bar","candlestick","scatter"],vJ={easing:"cubicOut",duration:100},yJ=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n._displayables={},n}return i(e,t),e.prototype.init=function(t,e){this.api=e,this._onBrush=G(this._onBrush,this),this._onBrushEnd=G(this._onBrushEnd,this)},e.prototype.render=function(e,n,r,o){if(t.prototype.render.apply(this,arguments),Yv(this,"_dispatchZoomAction",e.get("throttle"),"fixRate"),this._orient=e.getOrient(),!1!==e.get("show")){if(e.noTarget())return this._clear(),void this.group.removeAll();o&&"dataZoom"===o.type&&o.from===this.uid||this._buildView(),this._updateView()}else this.group.removeAll()},e.prototype.dispose=function(){this._clear(),t.prototype.dispose.apply(this,arguments)},e.prototype._clear=function(){qv(this,"_dispatchZoomAction");var t=this.api.getZr();t.off("mousemove",this._onBrush),t.off("mouseup",this._onBrushEnd)},e.prototype._buildView=function(){var t=this.group;t.removeAll(),this._brushing=!1,this._displayables.brushRect=null,this._resetLocation(),this._resetInterval();var e=this._displayables.sliderGroup=new _o;this._renderBackground(),this._renderHandle(),this._renderDataShadow(),t.add(e),this._positionGroup()},e.prototype._resetLocation=function(){var t=this.dataZoomModel,e=this.api,n=t.get("brushSelect"),r=n?dJ:0,o=this._findCoordRect(),i={width:e.getWidth(),height:e.getHeight()},a=this._orient===hJ?{right:i.width-o.x-o.width,top:i.height-fJ-lJ-r,width:o.width,height:fJ}:{right:lJ,top:o.y,width:fJ,height:o.height},u=pp(t.option);z(["right","top","width","height"],function(t){"ph"===u[t]&&(u[t]=a[t])});var s=lp(u,i);this._location={x:s.x,y:s.y},this._size=[s.width,s.height],this._orient===pJ&&this._size.reverse()},e.prototype._positionGroup=function(){var t=this.group,e=this._location,n=this._orient,r=this.dataZoomModel.getFirstTargetAxisModel(),o=r&&r.get("inverse"),i=this._displayables.sliderGroup,a=(this._dataShadowInfo||{}).otherAxisInverse;i.attr(n!==hJ||o?n===hJ&&o?{scaleY:a?1:-1,scaleX:-1}:n!==pJ||o?{scaleY:a?-1:1,scaleX:-1,rotation:Math.PI/2}:{scaleY:a?-1:1,scaleX:1,rotation:Math.PI/2}:{scaleY:a?1:-1,scaleX:1});var u=t.getBoundingRect([i]);t.x=e.x-u.x,t.y=e.y-u.y,t.markRedraw()},e.prototype._getViewExtent=function(){return[0,this._size[0]]},e.prototype._renderBackground=function(){var t=this.dataZoomModel,e=this._size,n=this._displayables.sliderGroup,r=t.get("brushSelect");n.add(new sJ({silent:!0,shape:{x:0,y:0,width:e[0],height:e[1]},style:{fill:t.get("backgroundColor")},z2:-40}));var o=new sJ({shape:{x:0,y:0,width:e[0],height:e[1]},style:{fill:"transparent"},z2:0,onclick:G(this._onClickPanel,this)}),i=this.api.getZr();r?(o.on("mousedown",this._onBrushStart,this),o.cursor="crosshair",i.on("mousemove",this._onBrush),i.on("mouseup",this._onBrushEnd)):(i.off("mousemove",this._onBrush),i.off("mouseup",this._onBrushEnd)),n.add(o)},e.prototype._renderDataShadow=function(){var t=this._dataShadowInfo=this._prepareDataShadowInfo();if(this._displayables.dataShadowSegs=[],t){var e=this._size,n=t.series,r=n.getRawData(),o=n.getShadowDim?n.getShadowDim():t.otherDim;if(null!=o){var i=r.getDataExtent(o),a=.3*(i[1]-i[0]);i=[i[0]-a,i[1]+a];var u,s=[0,e[1]],l=[0,e[0]],c=[[e[0],0],[0,0]],f=[],d=l[1]/(r.count()-1),h=0,p=Math.round(r.count()/e[0]);r.each([o],function(t,e){if(p>0&&e%p)h+=d;else{var n=null==t||isNaN(t)||""===t,r=n?0:No(t,i,s,!0);n&&!u&&e?(c.push([c[c.length-1][0],0]),f.push([f[f.length-1][0],0])):!n&&u&&(c.push([h,0]),f.push([h,0])),c.push([h,r]),f.push([h,r]),h+=d,u=n}});for(var g=this.dataZoomModel,m=0;m<3;m++){var v=y(1===m);this._displayables.sliderGroup.add(v),this._displayables.dataShadowSegs.push(v)}}}function y(t){var e=g.getModel(t?"selectedDataBackground":"dataBackground"),n=new _o,r=new nf({shape:{points:c},segmentIgnoreThreshold:1,style:e.getModel("areaStyle").getAreaStyle(),silent:!0,z2:-20}),o=new af({shape:{points:f},segmentIgnoreThreshold:1,style:e.getModel("lineStyle").getLineStyle(),silent:!0,z2:-19});return n.add(r),n.add(o),n}},e.prototype._prepareDataShadowInfo=function(){var t=this.dataZoomModel,e=t.get("showDataShadow");if(!1!==e){var n,r=this.ecModel;return t.eachTargetAxis(function(o,i){var a=t.getAxisProxy(o,i).getTargetSeriesModels();z(a,function(t){if(!n&&!(!0!==e&&E(mJ,t.get("type"))<0)){var a,u=r.getComponent(XX(o),i).axis,s=bJ(o),l=t.coordinateSystem;null!=s&&l.getOtherAxis&&(a=l.getOtherAxis(u).inverse),s=t.getData().mapDimension(s),n={thisAxis:u,series:t,thisDim:o,otherDim:s,otherAxisInverse:a}}},this)},this),n}},e.prototype._renderHandle=function(){var t=this.group,e=this._displayables,n=e.handles=[null,null],r=e.handleLabels=[null,null],o=this._displayables.sliderGroup,i=this._size,a=this.dataZoomModel,u=this.api,s=a.get("borderRadius")||0,l=a.get("brushSelect"),c=e.filler=new sJ({silent:l,style:{fill:a.get("fillerColor")},textConfig:{position:"inside"}});o.add(c),o.add(new sJ({silent:!0,subPixelOptimize:!0,shape:{x:0,y:0,width:i[0],height:i[1],r:s},style:{stroke:a.get("dataBackgroundColor")||a.get("borderColor"),lineWidth:cJ,fill:"rgba(0,0,0,0)"}})),z([0,1],function(e){var i=a.get("handleIcon");!Nb[i]&&i.indexOf("path://")<0&&i.indexOf("image://")<0&&(i="path://"+i);var u=zb(i,-1,0,2,2,null,!0);u.attr({cursor:xJ(this._orient),draggable:!0,drift:G(this._onDragMove,this,e),ondragend:G(this._onDragEnd,this),onmouseover:G(this._showDataInfo,this,!0),onmouseout:G(this._showDataInfo,this,!1),z2:5});var s=u.getBoundingRect(),l=a.get("handleSize");this._handleHeight=Ro(l,this._size[1]),this._handleWidth=s.width/s.height*this._handleHeight,u.setStyle(a.getModel("handleStyle").getItemStyle()),u.style.strokeNoScale=!0,u.rectHover=!0,u.ensureState("emphasis").style=a.getModel(["emphasis","handleStyle"]).getItemStyle(),Gl(u);var c=a.get("handleColor");null!=c&&(u.style.fill=c),o.add(n[e]=u);var f=a.getModel("textStyle");t.add(r[e]=new Us({silent:!0,invisible:!0,style:Cd(f,{x:0,y:0,text:"",verticalAlign:"middle",align:"center",fill:f.getTextColor(),font:f.getFont()}),z2:10}))},this);var f=c;if(l){var d=Ro(a.get("moveHandleSize"),i[1]),h=e.moveHandle=new As({style:a.getModel("moveHandleStyle").getItemStyle(),silent:!0,shape:{r:[0,0,2,2],y:i[1]-.5,height:d}}),p=.8*d,g=e.moveHandleIcon=zb(a.get("moveHandleIcon"),-p/2,-p/2,p,p,"#fff",!0);g.silent=!0,g.y=i[1]+d/2-.5,h.ensureState("emphasis").style=a.getModel(["emphasis","moveHandleStyle"]).getItemStyle();var m=Math.min(i[1]/2,Math.max(d,10));f=e.moveZone=new As({invisible:!0,shape:{y:i[1]-m,height:d+m}}),f.on("mouseover",function(){u.enterEmphasis(h)}).on("mouseout",function(){u.leaveEmphasis(h)}),o.add(h),o.add(g),o.add(f)}f.attr({draggable:!0,cursor:xJ(this._orient),drift:G(this._onDragMove,this,"all"),ondragstart:G(this._showDataInfo,this,!0),ondragend:G(this._onDragEnd,this),onmouseover:G(this._showDataInfo,this,!0),onmouseout:G(this._showDataInfo,this,!1)})},e.prototype._resetInterval=function(){var t=this._range=this.dataZoomModel.getPercentRange(),e=this._getViewExtent();this._handleEnds=[No(t[0],[0,100],e,!0),No(t[1],[0,100],e,!0)]},e.prototype._updateInterval=function(t,e){var n=this.dataZoomModel,r=this._handleEnds,o=this._getViewExtent(),i=n.findRepresentativeAxisProxy().getMinMaxSpan(),a=[0,100];nz(e,r,o,n.get("zoomLock")?"all":t,null!=i.minSpan?No(i.minSpan,a,o,!0):null,null!=i.maxSpan?No(i.maxSpan,a,o,!0):null);var u=this._range,s=this._range=zo([No(r[0],o,a,!0),No(r[1],o,a,!0)]);return!u||u[0]!==s[0]||u[1]!==s[1]},e.prototype._updateView=function(t){var e=this._displayables,n=this._handleEnds,r=zo(n.slice()),o=this._size;z([0,1],function(t){var r=e.handles[t],i=this._handleHeight;r.attr({scaleX:i/2,scaleY:i/2,x:n[t]+(t?-1:1),y:o[1]/2-i/2})},this),e.filler.setShape({x:r[0],y:0,width:r[1]-r[0],height:o[1]});var i={x:r[0],width:r[1]-r[0]};e.moveHandle&&(e.moveHandle.setShape(i),e.moveZone.setShape(i),e.moveZone.getBoundingRect(),e.moveHandleIcon&&e.moveHandleIcon.attr("x",i.x+i.width/2));for(var a=e.dataShadowSegs,u=[0,r[0],r[1],o[0]],s=0;s<a.length;s++){var l=a[s],c=l.getClipPath();c||(c=new As,l.setClipPath(c)),c.setShape({x:u[s],y:0,width:u[s+1]-u[s],height:o[1]})}this._updateDataInfo(t)},e.prototype._updateDataInfo=function(t){var e=this.dataZoomModel,n=this._displayables,r=n.handleLabels,o=this._orient,i=["",""];if(e.get("showDetail")){var a=e.findRepresentativeAxisProxy();if(a){var u=a.getAxisModel().axis,s=this._range,l=t?a.calculateDataWindow({start:s[0],end:s[1]}).valueWindow:a.getDataValueWindow();i=[this._formatLabel(l[0],u),this._formatLabel(l[1],u)]}}var c=zo(this._handleEnds.slice());function f(t){var e=id(n.handles[t].parent,this.group),a=ud(0===t?"right":"left",e),u=this._handleWidth/2+gJ,s=ad([c[t]+(0===t?-u:u),this._size[1]/2],e);r[t].setStyle({x:s[0],y:s[1],verticalAlign:o===hJ?"middle":a,align:o===hJ?a:"center",text:i[t]})}f.call(this,0),f.call(this,1)},e.prototype._formatLabel=function(t,e){var n=this.dataZoomModel,r=n.get("labelFormatter"),o=n.get("labelPrecision");null!=o&&"auto"!==o||(o=e.getPixelPrecision());var i=null==t||isNaN(t)?"":"category"===e.type||"time"===e.type?e.scale.getLabel({value:Math.round(t)}):t.toFixed(Math.min(o,20));return Y(r)?r(t,i):q(r)?r.replace("{value}",i):i},e.prototype._showDataInfo=function(t){t=this._dragging||t;var e=this._displayables,n=e.handleLabels;n[0].attr("invisible",!t),n[1].attr("invisible",!t),e.moveHandle&&this.api[t?"enterEmphasis":"leaveEmphasis"](e.moveHandle,1)},e.prototype._onDragMove=function(t,e,n,r){this._dragging=!0,fe(r.event);var o=this._displayables.sliderGroup.getLocalTransform(),i=ad([e,n],o,!0),a=this._updateInterval(t,i[0]),u=this.dataZoomModel.get("realtime");this._updateView(!u),a&&u&&this._dispatchZoomAction(!0)},e.prototype._onDragEnd=function(){this._dragging=!1,this._showDataInfo(!1);var t=this.dataZoomModel.get("realtime");!t&&this._dispatchZoomAction(!1)},e.prototype._onClickPanel=function(t){var e=this._size,n=this._displayables.sliderGroup.transformCoordToLocal(t.offsetX,t.offsetY);if(!(n[0]<0||n[0]>e[0]||n[1]<0||n[1]>e[1])){var r=this._handleEnds,o=(r[0]+r[1])/2,i=this._updateInterval("all",n[0]-o);this._updateView(),i&&this._dispatchZoomAction(!1)}},e.prototype._onBrushStart=function(t){var e=t.offsetX,n=t.offsetY;this._brushStart=new Vr(e,n),this._brushing=!0,this._brushStartTime=+new Date},e.prototype._onBrushEnd=function(t){if(this._brushing){var e=this._displayables.brushRect;if(this._brushing=!1,e){e.attr("ignore",!0);var n=e.shape,r=+new Date;if(!(r-this._brushStartTime<200&&Math.abs(n.width)<5)){var o=this._getViewExtent(),i=[0,100];this._range=zo([No(n.x,o,i,!0),No(n.x+n.width,o,i,!0)]),this._handleEnds=[n.x,n.x+n.width],this._updateView(),this._dispatchZoomAction(!1)}}}},e.prototype._onBrush=function(t){this._brushing&&(fe(t.event),this._updateBrushRect(t.offsetX,t.offsetY))},e.prototype._updateBrushRect=function(t,e){var n=this._displayables,r=this.dataZoomModel,o=n.brushRect;o||(o=n.brushRect=new sJ({silent:!0,style:r.getModel("brushStyle").getItemStyle()}),n.sliderGroup.add(o)),o.attr("ignore",!1);var i=this._brushStart,a=this._displayables.sliderGroup,u=a.transformCoordToLocal(t,e),s=a.transformCoordToLocal(i.x,i.y),l=this._size;u[0]=Math.max(Math.min(l[0],u[0]),0),o.setShape({x:s[0],y:0,width:u[0]-s[0],height:l[1]})},e.prototype._dispatchZoomAction=function(t){var e=this._range;this.api.dispatchAction({type:"dataZoom",from:this.uid,dataZoomId:this.dataZoomModel.id,animation:t?vJ:null,start:e[0],end:e[1]})},e.prototype._findCoordRect=function(){var t,e=qX(this.dataZoomModel).infoList;if(!t&&e.length){var n=e[0].model.coordinateSystem;t=n.getRect&&n.getRect()}if(!t){var r=this.api.getWidth(),o=this.api.getHeight();t={x:.2*r,y:.2*o,width:.6*r,height:.6*o}}return t},e.type="dataZoom.slider",e}(nY);function bJ(t){var e={x:"y",y:"x",radius:"angle",angle:"radius"};return e[t]}function xJ(t){return"vertical"===t?"ns-resize":"ew-resize"}var wJ=yJ;function _J(t){t.registerComponentModel(uJ),t.registerComponentView(wJ),pY(t)}function SJ(t){mS(iJ),mS(_J)}var CJ={get:function(t,e,n){var r=k((MJ[t]||{})[e]);return n&&X(r)?r[r.length-1]:r}},MJ={color:{active:["#006edd","#e0ffff"],inactive:["rgba(0,0,0,0)"]},colorHue:{active:[0,360],inactive:[0,0]},colorSaturation:{active:[.3,1],inactive:[0,0]},colorLightness:{active:[.9,.5],inactive:[0,0]},colorAlpha:{active:[.3,1],inactive:[0,0]},opacity:{active:[.3,1],inactive:[0,0]},symbol:{active:["circle","roundRect","diamond"],inactive:["none"]},symbolSize:{active:[10,50],inactive:[0,0]}},TJ=CJ,kJ=cN.mapVisual,DJ=cN.eachVisual,AJ=X,IJ=z,OJ=zo,LJ=No,EJ=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n.stateList=["inRange","outOfRange"],n.replacableOptionKeys=["inRange","outOfRange","target","controller","color"],n.layoutMode={type:"box",ignoreSize:!0},n.dataBound=[-1/0,1/0],n.targetVisuals={},n.controllerVisuals={},n}return i(e,t),e.prototype.init=function(t,e,n){this.mergeDefaultAndTheme(t,n)},e.prototype.optionUpdated=function(t,e){var n=this.option;d.canvasSupported||(n.realtime=!1),!e&&yZ(n,t,this.replacableOptionKeys),this.textStyleModel=this.getModel("textStyle"),this.resetItemSize(),this.completeVisualOption()},e.prototype.resetVisual=function(t){var e=this.stateList;t=G(t,this),this.controllerVisuals=vZ(this.option.controller,e,t),this.targetVisuals=vZ(this.option.target,e,t)},e.prototype.getItemSymbol=function(){return null},e.prototype.getTargetSeriesIndices=function(){var t=this.option.seriesIndex,e=[];return null==t||"all"===t?this.ecModel.eachSeries(function(t,n){e.push(n)}):e=ai(t),e},e.prototype.eachTargetSeries=function(t,e){z(this.getTargetSeriesIndices(),function(n){var r=this.ecModel.getSeriesByIndex(n);r&&t.call(e,r)},this)},e.prototype.isTargetSeries=function(t){var e=!1;return this.eachTargetSeries(function(n){n===t&&(e=!0)}),e},e.prototype.formatValueText=function(t,e,n){var r,o=this.option,i=o.precision,a=this.dataBound,u=o.formatter;n=n||["<",">"],X(t)&&(t=t.slice(),r=!0);var s=e?t:r?[l(t[0]),l(t[1])]:l(t);return q(u)?u.replace("{value}",r?s[0]:s).replace("{value2}",r?s[1]:s):Y(u)?r?u(t[0],t[1]):u(t):r?t[0]===a[0]?n[0]+" "+s[1]:t[1]===a[1]?n[1]+" "+s[0]:s[0]+" - "+s[1]:s;function l(t){return t===a[0]?"min":t===a[1]?"max":(+t).toFixed(Math.min(i,20))}},e.prototype.resetExtent=function(){var t=this.option,e=OJ([t.min,t.max]);this._dataExtent=e},e.prototype.getDataDimension=function(t){var e=this.option.dimension,n=t.dimensions;if(null!=e||n.length){if(null!=e)return t.getDimension(e);for(var r=t.dimensions,o=r.length-1;o>=0;o--){var i=r[o],a=t.getDimensionInfo(i);if(!a.isCalculationCoord)return i}}},e.prototype.getExtent=function(){return this._dataExtent.slice()},e.prototype.completeVisualOption=function(){var t=this.ecModel,e=this.option,n={inRange:e.inRange,outOfRange:e.outOfRange},r=e.target||(e.target={}),o=e.controller||(e.controller={});D(r,n),D(o,n);var i=this.isCategory();function a(n){AJ(e.color)&&!n.inRange&&(n.inRange={color:e.color.slice().reverse()}),n.inRange=n.inRange||{color:t.get("gradientColor")}}function u(t,e,n){var r=t[e],o=t[n];r&&!o&&(o=t[n]={},IJ(r,function(t,e){if(cN.isValidType(e)){var n=TJ.get(e,"inactive",i);null!=n&&(o[e]=n,"color"!==e||o.hasOwnProperty("opacity")||o.hasOwnProperty("colorAlpha")||(o.opacity=[0,0]))}}))}function s(t){var e=(t.inRange||{}).symbol||(t.outOfRange||{}).symbol,n=(t.inRange||{}).symbolSize||(t.outOfRange||{}).symbolSize,r=this.get("inactiveColor"),o=this.getItemSymbol(),a=o||"roundRect";IJ(this.stateList,function(o){var u=this.itemSize,s=t[o];s||(s=t[o]={color:i?r:[r]}),null==s.symbol&&(s.symbol=e&&k(e)||(i?a:[a])),null==s.symbolSize&&(s.symbolSize=n&&k(n)||(i?u[0]:[u[0],u[0]])),s.symbol=kJ(s.symbol,function(t){return"none"===t?a:t});var l=s.symbolSize;if(null!=l){var c=-1/0;DJ(l,function(t){t>c&&(c=t)}),s.symbolSize=kJ(l,function(t){return LJ(t,[0,c],[0,u[0]],!0)})}},this)}a.call(this,r),a.call(this,o),u.call(this,r,"inRange","outOfRange"),s.call(this,o)},e.prototype.resetItemSize=function(){this.itemSize=[parseFloat(this.get("itemWidth")),parseFloat(this.get("itemHeight"))]},e.prototype.isCategory=function(){return!!this.option.categories},e.prototype.setSelected=function(t){},e.prototype.getSelected=function(){return null},e.prototype.getValueState=function(t){return null},e.prototype.getVisualMeta=function(t){return null},e.type="visualMap",e.dependencies=["series"],e.defaultOption={show:!0,zlevel:0,z:4,seriesIndex:"all",min:0,max:200,left:0,right:null,top:null,bottom:0,itemWidth:null,itemHeight:null,inverse:!1,orient:"vertical",backgroundColor:"rgba(0,0,0,0)",borderColor:"#ccc",contentColor:"#5793f3",inactiveColor:"#aaa",borderWidth:0,padding:5,textGap:10,precision:0,textStyle:{color:"#333"}},e}(bp),NJ=EJ,RJ=[20,140],PJ=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n}return i(e,t),e.prototype.optionUpdated=function(e,n){t.prototype.optionUpdated.apply(this,arguments),this.resetExtent(),this.resetVisual(function(t){t.mappingMethod="linear",t.dataExtent=this.getExtent()}),this._resetRange()},e.prototype.resetItemSize=function(){t.prototype.resetItemSize.apply(this,arguments);var e=this.itemSize;(null==e[0]||isNaN(e[0]))&&(e[0]=RJ[0]),(null==e[1]||isNaN(e[1]))&&(e[1]=RJ[1])},e.prototype._resetRange=function(){var t=this.getExtent(),e=this.option.range;!e||e.auto?(t.auto=1,this.option.range=t):X(e)&&(e[0]>e[1]&&e.reverse(),e[0]=Math.max(e[0],t[0]),e[1]=Math.min(e[1],t[1]))},e.prototype.completeVisualOption=function(){t.prototype.completeVisualOption.apply(this,arguments),z(this.stateList,function(t){var e=this.option.controller[t].symbolSize;e&&e[0]!==e[1]&&(e[0]=e[1]/3)},this)},e.prototype.setSelected=function(t){this.option.range=t.slice(),this._resetRange()},e.prototype.getSelected=function(){var t=this.getExtent(),e=zo((this.get("range")||[]).slice());return e[0]>t[1]&&(e[0]=t[1]),e[1]>t[1]&&(e[1]=t[1]),e[0]<t[0]&&(e[0]=t[0]),e[1]<t[0]&&(e[1]=t[0]),e},e.prototype.getValueState=function(t){var e=this.option.range,n=this.getExtent();return(e[0]<=n[0]||e[0]<=t)&&(e[1]>=n[1]||t<=e[1])?"inRange":"outOfRange"},e.prototype.findTargetDataIndices=function(t){var e=[];return this.eachTargetSeries(function(n){var r=[],o=n.getData();o.each(this.getDataDimension(o),function(e,n){t[0]<=e&&e<=t[1]&&r.push(n)},this),e.push({seriesId:n.id,dataIndex:r})},this),e},e.prototype.getVisualMeta=function(t){var e=zJ(this,"outOfRange",this.getExtent()),n=zJ(this,"inRange",this.option.range.slice()),r=[];function o(e,n){r.push({value:e,color:t(e,n)})}for(var i=0,a=0,u=n.length,s=e.length;a<s&&(!n.length||e[a]<=n[0]);a++)e[a]<n[i]&&o(e[a],"outOfRange");for(var l=1;i<u;i++,l=0)l&&r.length&&o(n[i],"outOfRange"),o(n[i],"inRange");for(l=1;a<s;a++)(!n.length||n[n.length-1]<e[a])&&(l&&(r.length&&o(r[r.length-1].value,"outOfRange"),l=0),o(e[a],"outOfRange"));var c=r.length;return{stops:r,outerColors:[c?r[0].color:"transparent",c?r[c-1].color:"transparent"]}},e.type="visualMap.continuous",e.defaultOption=Jd(NJ.defaultOption,{align:"auto",calculable:!1,hoverLink:!0,realtime:!0,handleIcon:"path://M-11.39,9.77h0a3.5,3.5,0,0,1-3.5,3.5h-22a3.5,3.5,0,0,1-3.5-3.5h0a3.5,3.5,0,0,1,3.5-3.5h22A3.5,3.5,0,0,1-11.39,9.77Z",handleSize:"120%",handleStyle:{borderColor:"#fff",borderWidth:1},indicatorIcon:"circle",indicatorSize:"50%",indicatorStyle:{borderColor:"#fff",borderWidth:2,shadowBlur:2,shadowOffsetX:1,shadowOffsetY:1,shadowColor:"rgba(0,0,0,0.2)"}}),e}(NJ);function zJ(t,e,n){if(n[0]===n[1])return n.slice();for(var r=200,o=(n[1]-n[0])/r,i=n[0],a=[],u=0;u<=r&&i<n[1];u++)a.push(i),i+=o;return a.push(n[1]),a}var BJ=PJ,VJ=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n.autoPositionValues={left:1,right:1,top:1,bottom:1},n}return i(e,t),e.prototype.init=function(t,e){this.ecModel=t,this.api=e},e.prototype.render=function(t,e,n,r){this.visualMapModel=t,!1!==t.get("show")?this.doRender(t,e,n,r):this.group.removeAll()},e.prototype.renderBackground=function(t){var e=this.visualMapModel,n=jh(e.get("padding")||0),r=t.getBoundingRect();t.add(new As({z2:-1,silent:!0,shape:{x:r.x-n[3],y:r.y-n[0],width:r.width+n[3]+n[1],height:r.height+n[0]+n[2]},style:{fill:e.get("backgroundColor"),stroke:e.get("borderColor"),lineWidth:e.get("borderWidth")}}))},e.prototype.getControllerVisual=function(t,e,n){n=n||{};var r=n.forceState,o=this.visualMapModel,i={};if("color"===e){var a=o.get("contentColor");i.color=a}function u(t){return i[t]}function s(t,e){i[t]=e}var l=o.controllerVisuals[r||o.getValueState(t)],c=cN.prepareVisualTypes(l);return z(c,function(r){var o=l[r];n.convertOpacityToAlpha&&"opacity"===r&&(r="colorAlpha",o=l.__alphaForOpacity),cN.dependsOn(r,e)&&o&&o.applyVisual(t,u,s)}),i[e]},e.prototype.positionGroup=function(t){var e=this.visualMapModel,n=this.api;cp(t,e.getBoxLayoutParams(),{width:n.getWidth(),height:n.getHeight()})},e.prototype.doRender=function(t,e,n,r){},e.type="visualMap",e}(Lv),HJ=VJ,FJ=[["left","right","width"],["top","bottom","height"]];function WJ(t,e,n){var r=t.option,o=r.align;if(null!=o&&"auto"!==o)return o;for(var i={width:e.getWidth(),height:e.getHeight()},a="horizontal"===r.orient?1:0,u=FJ[a],s=[0,null,10],l={},c=0;c<3;c++)l[FJ[1-a][c]]=s[c],l[u[c]]=2===c?n[0]:r[u[c]];var f=[["x","width",3],["y","height",0]][a],d=lp(l,i,r.padding);return u[(d.margin[f[2]]||0)+d[f[0]]+.5*d[f[1]]<.5*i[f[1]]?0:1]}function UJ(t,e){return z(t||[],function(t){null!=t.dataIndex&&(t.dataIndexInside=t.dataIndex,t.dataIndex=null),t.highlightKey="visualMap"+(e?e.componentIndex:"")}),t}var GJ=No,jJ=z,XJ=Math.min,YJ=Math.max,qJ=12,ZJ=6,$J=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n._shapes={},n._dataInterval=[],n._handleEnds=[],n._hoverLinkDataIndices=[],n}return i(e,t),e.prototype.doRender=function(t,e,n,r){this._api=n,r&&"selectDataRange"===r.type&&r.from===this.uid||this._buildView()},e.prototype._buildView=function(){this.group.removeAll();var t=this.visualMapModel,e=this.group;this._orient=t.get("orient"),this._useHandle=t.get("calculable"),this._resetInterval(),this._renderBar(e);var n=t.get("text");this._renderEndsText(e,n,0),this._renderEndsText(e,n,1),this._updateView(!0),this.renderBackground(e),this._updateView(),this._enableHoverLinkToSeries(),this._enableHoverLinkFromSeries(),this.positionGroup(e)},e.prototype._renderEndsText=function(t,e,n){if(e){var r=e[1-n];r=null!=r?r+"":"";var o=this.visualMapModel,i=o.get("textGap"),a=o.itemSize,u=this._shapes.mainGroup,s=this._applyTransform([a[0]/2,0===n?-i:a[1]+i],u),l=this._applyTransform(0===n?"bottom":"top",u),c=this._orient,f=this.visualMapModel.textStyleModel;this.group.add(new Us({style:{x:s[0],y:s[1],verticalAlign:"horizontal"===c?"middle":l,align:"horizontal"===c?l:"center",text:r,font:f.getFont(),fill:f.getTextColor()}}))}},e.prototype._renderBar=function(t){var e=this.visualMapModel,n=this._shapes,r=e.itemSize,o=this._orient,i=this._useHandle,a=WJ(e,this.api,r),u=n.mainGroup=this._createBarGroup(a),s=new _o;u.add(s),s.add(n.outOfRange=KJ()),s.add(n.inRange=KJ(null,i?tQ(this._orient):null,G(this._dragHandle,this,"all",!1),G(this._dragHandle,this,"all",!0))),s.setClipPath(new As({shape:{x:0,y:0,width:r[0],height:r[1],r:3}}));var l=e.textStyleModel.getTextRect("国"),c=YJ(l.width,l.height);i&&(n.handleThumbs=[],n.handleLabels=[],n.handleLabelPoints=[],this._createHandle(e,u,0,r,c,o),this._createHandle(e,u,1,r,c,o)),this._createIndicator(e,u,r,c,o),t.add(u)},e.prototype._createHandle=function(t,e,n,r,o,i){var a=G(this._dragHandle,this,n,!1),u=G(this._dragHandle,this,n,!0),s=ao(t.get("handleSize"),r[0]),l=zb(t.get("handleIcon"),-s/2,-s/2,s,s,null,!0),c=tQ(this._orient);l.attr({cursor:c,draggable:!0,drift:a,ondragend:u,onmousemove:function(t){fe(t.event)}}),l.x=r[0]/2,l.useStyle(t.getModel("handleStyle").getItemStyle()),l.setStyle({strokeNoScale:!0,strokeFirst:!0}),l.style.lineWidth*=2,l.ensureState("emphasis").style=t.getModel(["emphasis","handleStyle"]).getItemStyle(),Zl(l,!0),e.add(l);var f=this.visualMapModel.textStyleModel,d=new Us({cursor:c,draggable:!0,drift:a,onmousemove:function(t){fe(t.event)},ondragend:u,style:{x:0,y:0,text:"",font:f.getFont(),fill:f.getTextColor()}});d.ensureState("blur").style={opacity:.1},d.stateTransition={duration:200},this.group.add(d);var h=[s,0],p=this._shapes;p.handleThumbs[n]=l,p.handleLabelPoints[n]=h,p.handleLabels[n]=d},e.prototype._createIndicator=function(t,e,n,r,o){var i=ao(t.get("indicatorSize"),n[0]),a=zb(t.get("indicatorIcon"),-i/2,-i/2,i,i,null,!0);a.attr({cursor:"move",invisible:!0,silent:!0,x:n[0]/2});var u=t.getModel("indicatorStyle").getItemStyle();if(a instanceof xs){var s=a.style;a.useStyle(I({image:s.image,x:s.x,y:s.y,width:s.width,height:s.height},u))}else a.useStyle(u);e.add(a);var l=this.visualMapModel.textStyleModel,c=new Us({silent:!0,invisible:!0,style:{x:0,y:0,text:"",font:l.getFont(),fill:l.getTextColor()}});this.group.add(c);var f=[("horizontal"===o?r/2:ZJ)+n[0]/2,0],d=this._shapes;d.indicator=a,d.indicatorLabel=c,d.indicatorLabelPoint=f,this._firstShowIndicator=!0},e.prototype._dragHandle=function(t,e,n,r){if(this._useHandle){if(this._dragging=!e,!e){var o=this._applyTransform([n,r],this._shapes.mainGroup,!0);this._updateInterval(t,o[1]),this._hideIndicator(),this._updateView()}e===!this.visualMapModel.get("realtime")&&this.api.dispatchAction({type:"selectDataRange",from:this.uid,visualMapId:this.visualMapModel.id,selected:this._dataInterval.slice()}),e?!this._hovering&&this._clearHoverLinkToSeries():QJ(this.visualMapModel)&&this._doHoverLinkToSeries(this._handleEnds[t],!1)}},e.prototype._resetInterval=function(){var t=this.visualMapModel,e=this._dataInterval=t.getSelected(),n=t.getExtent(),r=[0,t.itemSize[1]];this._handleEnds=[GJ(e[0],n,r,!0),GJ(e[1],n,r,!0)]},e.prototype._updateInterval=function(t,e){e=e||0;var n=this.visualMapModel,r=this._handleEnds,o=[0,n.itemSize[1]];nz(e,r,o,t,0);var i=n.getExtent();this._dataInterval=[GJ(r[0],o,i,!0),GJ(r[1],o,i,!0)]},e.prototype._updateView=function(t){var e=this.visualMapModel,n=e.getExtent(),r=this._shapes,o=[0,e.itemSize[1]],i=t?o:this._handleEnds,a=this._createBarVisual(this._dataInterval,n,i,"inRange"),u=this._createBarVisual(n,n,o,"outOfRange");r.inRange.setStyle({fill:a.barColor}).setShape("points",a.barPoints),r.outOfRange.setStyle({fill:u.barColor}).setShape("points",u.barPoints),this._updateHandle(i,a)},e.prototype._createBarVisual=function(t,e,n,r){var o={forceState:r,convertOpacityToAlpha:!0},i=this._makeColorGradient(t,o),a=[this.getControllerVisual(t[0],"symbolSize",o),this.getControllerVisual(t[1],"symbolSize",o)],u=this._createBarPoints(n,a);return{barColor:new Cf(0,0,0,1,i),barPoints:u,handlesColor:[i[0].color,i[i.length-1].color]}},e.prototype._makeColorGradient=function(t,e){var n=100,r=[],o=(t[1]-t[0])/n;r.push({color:this.getControllerVisual(t[0],"color",e),offset:0});for(var i=1;i<n;i++){var a=t[0]+o*i;if(a>t[1])break;r.push({color:this.getControllerVisual(a,"color",e),offset:i/n})}return r.push({color:this.getControllerVisual(t[1],"color",e),offset:1}),r},e.prototype._createBarPoints=function(t,e){var n=this.visualMapModel.itemSize;return[[n[0]-e[0],t[0]],[n[0],t[0]],[n[0],t[1]],[n[0]-e[1],t[1]]]},e.prototype._createBarGroup=function(t){var e=this._orient,n=this.visualMapModel.get("inverse");return new _o("horizontal"!==e||n?"horizontal"===e&&n?{scaleX:"bottom"===t?-1:1,rotation:-Math.PI/2}:"vertical"!==e||n?{scaleX:"left"===t?1:-1}:{scaleX:"left"===t?1:-1,scaleY:-1}:{scaleX:"bottom"===t?1:-1,rotation:Math.PI/2})},e.prototype._updateHandle=function(t,e){if(this._useHandle){var n=this._shapes,r=this.visualMapModel,o=n.handleThumbs,i=n.handleLabels,a=r.itemSize,u=r.getExtent();jJ([0,1],function(s){var l=o[s];l.setStyle("fill",e.handlesColor[s]),l.y=t[s];var c=GJ(t[s],[0,a[1]],u,!0),f=this.getControllerVisual(c,"symbolSize");l.scaleX=l.scaleY=f/a[0],l.x=a[0]-f/2;var d=ad(n.handleLabelPoints[s],id(l,this.group));i[s].setStyle({x:d[0],y:d[1],text:r.formatValueText(this._dataInterval[s]),verticalAlign:"middle",align:"vertical"===this._orient?this._applyTransform("left",n.mainGroup):"center"})},this)}},e.prototype._showIndicator=function(t,e,n,r){var o=this.visualMapModel,i=o.getExtent(),a=o.itemSize,u=[0,a[1]],s=this._shapes,l=s.indicator;if(l){l.attr("invisible",!1);var c={convertOpacityToAlpha:!0},f=this.getControllerVisual(t,"color",c),d=this.getControllerVisual(t,"symbolSize"),h=GJ(t,i,u,!0),p=a[0]-d/2,g={x:l.x,y:l.y};l.y=h,l.x=p;var m=ad(s.indicatorLabelPoint,id(l,this.group)),v=s.indicatorLabel;v.attr("invisible",!1);var y=this._applyTransform("left",s.mainGroup),b=this._orient,x="horizontal"===b;v.setStyle({text:(n||"")+o.formatValueText(e),verticalAlign:x?y:"middle",align:x?"center":y});var w={x:p,y:h,style:{fill:f}},_={style:{x:m[0],y:m[1]}};if(o.ecModel.isAnimationEnabled()&&!this._firstShowIndicator){var S={duration:100,easing:"cubicInOut",additive:!0};l.x=g.x,l.y=g.y,l.animateTo(w,S),v.animateTo(_,S)}else l.attr(w),v.attr(_);this._firstShowIndicator=!1;var C=this._shapes.handleLabels;if(C)for(var M=0;M<C.length;M++)this._api.enterBlur(C[M])}},e.prototype._enableHoverLinkToSeries=function(){var t=this;this._shapes.mainGroup.on("mousemove",function(e){if(t._hovering=!0,!t._dragging){var n=t.visualMapModel.itemSize,r=t._applyTransform([e.offsetX,e.offsetY],t._shapes.mainGroup,!0,!0);r[1]=XJ(YJ(0,r[1]),n[1]),t._doHoverLinkToSeries(r[1],0<=r[0]&&r[0]<=n[0])}}).on("mouseout",function(){t._hovering=!1,!t._dragging&&t._clearHoverLinkToSeries()})},e.prototype._enableHoverLinkFromSeries=function(){var t=this.api.getZr();this.visualMapModel.option.hoverLink?(t.on("mouseover",this._hoverLinkFromSeriesMouseOver,this),t.on("mouseout",this._hideIndicator,this)):this._clearHoverLinkFromSeries()},e.prototype._doHoverLinkToSeries=function(t,e){var n=this.visualMapModel,r=n.itemSize;if(n.option.hoverLink){var o=[0,r[1]],i=n.getExtent();t=XJ(YJ(o[0],t),o[1]);var a=JJ(n,i,o),u=[t-a,t+a],s=GJ(t,o,i,!0),l=[GJ(u[0],o,i,!0),GJ(u[1],o,i,!0)];u[0]<o[0]&&(l[0]=-1/0),u[1]>o[1]&&(l[1]=1/0),e&&(l[0]===-1/0?this._showIndicator(s,l[1],"< ",a):l[1]===1/0?this._showIndicator(s,l[0],"> ",a):this._showIndicator(s,s,"≈ ",a));var c=this._hoverLinkDataIndices,f=[];(e||QJ(n))&&(f=this._hoverLinkDataIndices=n.findTargetDataIndices(l));var d=Ti(c,f);this._dispatchHighDown("downplay",UJ(d[0],n)),this._dispatchHighDown("highlight",UJ(d[1],n))}},e.prototype._hoverLinkFromSeriesMouseOver=function(t){var e=t.target,n=this.visualMapModel;if(e&&null!=Gs(e).dataIndex){var r=Gs(e),o=this.ecModel.getSeriesByIndex(r.seriesIndex);if(n.isTargetSeries(o)){var i=o.getData(r.dataType),a=i.get(n.getDataDimension(i),r.dataIndex);isNaN(a)||this._showIndicator(a,a)}}},e.prototype._hideIndicator=function(){var t=this._shapes;t.indicator&&t.indicator.attr("invisible",!0),t.indicatorLabel&&t.indicatorLabel.attr("invisible",!0);var e=this._shapes.handleLabels;if(e)for(var n=0;n<e.length;n++)this._api.leaveBlur(e[n])},e.prototype._clearHoverLinkToSeries=function(){this._hideIndicator();var t=this._hoverLinkDataIndices;this._dispatchHighDown("downplay",UJ(t,this.visualMapModel)),t.length=0},e.prototype._clearHoverLinkFromSeries=function(){this._hideIndicator();var t=this.api.getZr();t.off("mouseover",this._hoverLinkFromSeriesMouseOver),t.off("mouseout",this._hideIndicator)},e.prototype._applyTransform=function(t,e,n,r){var o=id(e,r?null:this.group);return X(t)?ad(t,o,n):ud(t,o,n)},e.prototype._dispatchHighDown=function(t,e){e&&e.length&&this.api.dispatchAction({type:t,batch:e})},e.prototype.dispose=function(){this._clearHoverLinkFromSeries(),this._clearHoverLinkToSeries()},e.prototype.remove=function(){this._clearHoverLinkFromSeries(),this._clearHoverLinkToSeries()},e.type="visualMap.continuous",e}(HJ);function KJ(t,e,n,r){return new nf({shape:{points:t},draggable:!!n,cursor:e,drift:n,onmousemove:function(t){fe(t.event)},ondragend:r})}function JJ(t,e,n){var r=qJ/2,o=t.get("hoverLinkDataSize");return o&&(r=GJ(o,e,n,!0)/2),r}function QJ(t){var e=t.get("hoverLinkOnHandle");return!!(null==e?t.get("realtime"):e)}function tQ(t){return"vertical"===t?"ns-resize":"ew-resize"}var eQ=$J,nQ={type:"selectDataRange",event:"dataRangeSelected",update:"update"},rQ=function(t,e){e.eachComponent({mainType:"visualMap",query:t},function(e){e.setSelected(t.selected)})},oQ=[{createOnAllSeries:!0,reset:function(t,e){var n=[];return e.eachComponent("visualMap",function(e){var r=t.pipelineContext;!e.isTargetSeries(t)||r&&r.large||n.push(xZ(e.stateList,e.targetVisuals,G(e.getValueState,e),e.getDataDimension(t.getData())))}),n}},{createOnAllSeries:!0,reset:function(t,e){var n=t.getData(),r=[];e.eachComponent("visualMap",function(e){if(e.isTargetSeries(t)){var o=e.getVisualMeta(G(iQ,null,t,e))||{stops:[],outerColors:[]},i=e.getDataDimension(n),a=n.getDimensionInfo(i);null!=a&&(o.dimension=a.index,r.push(o))}}),t.getData().setVisual("visualMeta",r)}}];function iQ(t,e,n,r){for(var o=e.targetVisuals[r],i=cN.prepareVisualTypes(o),a={color:Ny(t.getData(),"color")},u=0,s=i.length;u<s;u++){var l=i[u],c=o["opacity"===l?"__alphaForOpacity":l];c&&c.applyVisual(n,f,d)}return a.color;function f(t){return a[t]}function d(t,e){a[t]=e}}var aQ=z;function uQ(t){var e=t&&t.visualMap;X(e)||(e=e?[e]:[]),aQ(e,function(t){if(t){sQ(t,"splitList")&&!sQ(t,"pieces")&&(t.pieces=t.splitList,delete t.splitList);var e=t.pieces;e&&X(e)&&aQ(e,function(t){K(t)&&(sQ(t,"start")&&!sQ(t,"min")&&(t.min=t.start),sQ(t,"end")&&!sQ(t,"max")&&(t.max=t.end))})}})}function sQ(t,e){return t&&t.hasOwnProperty&&t.hasOwnProperty(e)}var lQ=!1;function cQ(t){lQ||(lQ=!0,t.registerSubTypeDefaulter("visualMap",function(t){return t.categories||(t.pieces?t.pieces.length>0:t.splitNumber>0)&&!t.calculable?"piecewise":"continuous"}),t.registerAction(nQ,rQ),z(oQ,function(e){t.registerVisual(t.PRIORITY.VISUAL.COMPONENT,e)}),t.registerPreprocessor(uQ))}function fQ(t){t.registerComponentModel(BJ),t.registerComponentView(eQ),cQ(t)}var dQ=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n._pieceList=[],n}return i(e,t),e.prototype.optionUpdated=function(e,n){t.prototype.optionUpdated.apply(this,arguments),this.resetExtent();var r=this._mode=this._determineMode();this._pieceList=[],hQ[this._mode].call(this,this._pieceList),this._resetSelected(e,n);var o=this.option.categories;this.resetVisual(function(t,e){"categories"===r?(t.mappingMethod="category",t.categories=k(o)):(t.dataExtent=this.getExtent(),t.mappingMethod="piecewise",t.pieceList=B(this._pieceList,function(t){return t=k(t),"inRange"!==e&&(t.visual=null),t}))})},e.prototype.completeVisualOption=function(){var e=this.option,n={},r=cN.listVisualTypes(),o=this.isCategory();function i(t,e,n){return t&&t[e]&&t[e].hasOwnProperty(n)}z(e.pieces,function(t){z(r,function(e){t.hasOwnProperty(e)&&(n[e]=1)})}),z(n,function(t,n){var r=!1;z(this.stateList,function(t){r=r||i(e,t,n)||i(e.target,t,n)},this),!r&&z(this.stateList,function(t){(e[t]||(e[t]={}))[n]=TJ.get(n,"inRange"===t?"active":"inactive",o)})},this),t.prototype.completeVisualOption.apply(this,arguments)},e.prototype._resetSelected=function(t,e){var n=this.option,r=this._pieceList,o=(e?n:t).selected||{};if(n.selected=o,z(r,function(t,e){var n=this.getSelectedMapKey(t);o.hasOwnProperty(n)||(o[n]=!0)},this),"single"===n.selectedMode){var i=!1;z(r,function(t,e){var n=this.getSelectedMapKey(t);o[n]&&(i?o[n]=!1:i=!0)},this)}},e.prototype.getItemSymbol=function(){return this.get("itemSymbol")},e.prototype.getSelectedMapKey=function(t){return"categories"===this._mode?t.value+"":t.index+""},e.prototype.getPieceList=function(){return this._pieceList},e.prototype._determineMode=function(){var t=this.option;return t.pieces&&t.pieces.length>0?"pieces":this.option.categories?"categories":"splitNumber"},e.prototype.setSelected=function(t){this.option.selected=k(t)},e.prototype.getValueState=function(t){var e=cN.findPieceIndex(t,this._pieceList);return null!=e&&this.option.selected[this.getSelectedMapKey(this._pieceList[e])]?"inRange":"outOfRange"},e.prototype.findTargetDataIndices=function(t){var e=[],n=this._pieceList;return this.eachTargetSeries(function(r){var o=[],i=r.getData();i.each(this.getDataDimension(i),function(e,r){var i=cN.findPieceIndex(e,n);i===t&&o.push(r)},this),e.push({seriesId:r.id,dataIndex:o})},this),e},e.prototype.getRepresentValue=function(t){var e;if(this.isCategory())e=t.value;else if(null!=t.value)e=t.value;else{var n=t.interval||[];e=n[0]===-1/0&&n[1]===1/0?0:(n[0]+n[1])/2}return e},e.prototype.getVisualMeta=function(t){if(!this.isCategory()){var e=[],n=["",""],r=this,o=this._pieceList.slice();if(o.length){var i=o[0].interval[0];i!==-1/0&&o.unshift({interval:[-1/0,i]}),i=o[o.length-1].interval[1],i!==1/0&&o.push({interval:[i,1/0]})}else o.push({interval:[-1/0,1/0]});var a=-1/0;return z(o,function(t){var e=t.interval;e&&(e[0]>a&&u([a,e[0]],"outOfRange"),u(e.slice()),a=e[1])},this),{stops:e,outerColors:n}}function u(o,i){var a=r.getRepresentValue({interval:o});i||(i=r.getValueState(a));var u=t(a,i);o[0]===-1/0?n[0]=u:o[1]===1/0?n[1]=u:e.push({value:o[0],color:u},{value:o[1],color:u})}},e.type="visualMap.piecewise",e.defaultOption=Jd(NJ.defaultOption,{selected:null,minOpen:!1,maxOpen:!1,align:"auto",itemWidth:20,itemHeight:14,itemSymbol:"roundRect",pieces:null,categories:null,splitNumber:5,selectedMode:"multiple",itemGap:10,hoverLink:!0}),e}(NJ),hQ={splitNumber:function(t){var e=this.option,n=Math.min(e.precision,20),r=this.getExtent(),o=e.splitNumber;o=Math.max(parseInt(o,10),1),e.splitNumber=o;var i=(r[1]-r[0])/o;while(+i.toFixed(n)!==i&&n<5)n++;e.precision=n,i=+i.toFixed(n),e.minOpen&&t.push({interval:[-1/0,r[0]],close:[0,0]});for(var a=0,u=r[0];a<o;u+=i,a++){var s=a===o-1?r[1]:u+i;t.push({interval:[u,s],close:[1,1]})}e.maxOpen&&t.push({interval:[r[1],1/0],close:[0,0]}),Jo(t),z(t,function(t,e){t.index=e,t.text=this.formatValueText(t.interval)},this)},categories:function(t){var e=this.option;z(e.categories,function(e){t.push({text:this.formatValueText(e,!0),value:e})},this),pQ(e,t)},pieces:function(t){var e=this.option;z(e.pieces,function(e,n){K(e)||(e={value:e});var r={text:"",index:n};if(null!=e.label&&(r.text=e.label),e.hasOwnProperty("value")){var o=r.value=e.value;r.interval=[o,o],r.close=[1,1]}else{for(var i=r.interval=[],a=r.close=[0,0],u=[1,0,1],s=[-1/0,1/0],l=[],c=0;c<2;c++){for(var f=[["gte","gt","min"],["lte","lt","max"]][c],d=0;d<3&&null==i[c];d++)i[c]=e[f[d]],a[c]=u[d],l[c]=2===d;null==i[c]&&(i[c]=s[c])}l[0]&&i[1]===1/0&&(a[0]=0),l[1]&&i[0]===-1/0&&(a[1]=0),i[0]===i[1]&&a[0]&&a[1]&&(r.value=i[0])}r.visual=cN.retrieveVisuals(e),t.push(r)},this),pQ(e,t),Jo(t),z(t,function(t){var e=t.close,n=[["<","≤"][e[1]],[">","≥"][e[0]]];t.text=t.text||this.formatValueText(null!=t.value?t.value:t.interval,!1,n)},this)}};function pQ(t,e){var n=t.inverse;("vertical"===t.orient?!n:n)&&e.reverse()}var gQ=dQ,mQ=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n}return i(e,t),e.prototype.doRender=function(){var t=this.group;t.removeAll();var e=this.visualMapModel,n=e.get("textGap"),r=e.textStyleModel,o=r.getFont(),i=r.getTextColor(),a=this._getItemAlign(),u=e.itemSize,s=this._getViewData(),l=s.endsText,c=it(e.get("showLabel",!0),!l);l&&this._renderEndsText(t,l[0],u,c,a),z(s.viewPieceList,function(r){var s=r.piece,l=new _o;l.onclick=G(this._onItemClick,this,s),this._enableHoverLink(l,r.indexInModelPieceList);var f=e.getRepresentValue(s);if(this._createItemSymbol(l,f,[0,0,u[0],u[1]]),c){var d=this.visualMapModel.getValueState(f);l.add(new Us({style:{x:"right"===a?-n:u[0]+n,y:u[1]/2,text:s.text,verticalAlign:"middle",align:a,font:o,fill:i,opacity:"outOfRange"===d?.5:1}}))}t.add(l)},this),l&&this._renderEndsText(t,l[1],u,c,a),up(e.get("orient"),t,e.get("itemGap")),this.renderBackground(t),this.positionGroup(t)},e.prototype._enableHoverLink=function(t,e){var n=this;t.on("mouseover",function(){return r("highlight")}).on("mouseout",function(){return r("downplay")});var r=function(t){var r=n.visualMapModel;r.option.hoverLink&&n.api.dispatchAction({type:t,batch:UJ(r.findTargetDataIndices(e),r)})}},e.prototype._getItemAlign=function(){var t=this.visualMapModel,e=t.option;if("vertical"===e.orient)return WJ(t,this.api,t.itemSize);var n=e.align;return n&&"auto"!==n||(n="left"),n},e.prototype._renderEndsText=function(t,e,n,r,o){if(e){var i=new _o,a=this.visualMapModel.textStyleModel;i.add(new Us({style:{x:r?"right"===o?n[0]:0:n[0]/2,y:n[1]/2,verticalAlign:"middle",align:r?o:"center",text:e,font:a.getFont(),fill:a.getTextColor()}})),t.add(i)}},e.prototype._getViewData=function(){var t=this.visualMapModel,e=B(t.getPieceList(),function(t,e){return{piece:t,indexInModelPieceList:e}}),n=t.get("text"),r=t.get("orient"),o=t.get("inverse");return("horizontal"===r?o:!o)?e.reverse():n&&(n=n.slice().reverse()),{viewPieceList:e,endsText:n}},e.prototype._createItemSymbol=function(t,e,n){t.add(zb(this.getControllerVisual(e,"symbol"),n[0],n[1],n[2],n[3],this.getControllerVisual(e,"color")))},e.prototype._onItemClick=function(t){var e=this.visualMapModel,n=e.option,r=k(n.selected),o=e.getSelectedMapKey(t);"single"===n.selectedMode?(r[o]=!0,z(r,function(t,e){r[e]=e===o})):r[o]=!r[o],this.api.dispatchAction({type:"selectDataRange",from:this.uid,visualMapId:this.visualMapModel.id,selected:r})},e.type="visualMap.piecewise",e}(HJ),vQ=mQ;function yQ(t){t.registerComponentModel(gQ),t.registerComponentView(vQ),cQ(t)}function bQ(t){mS(fQ),mS(yQ)}var xQ={label:{enabled:!0},decal:{show:!1}},wQ=Di(),_Q={};function SQ(t,e){var n=t.getModel("aria");if(n.get("enabled")){var r=k(xQ);D(r.label,t.getLocaleModel().get("aria"),!1),D(n.option,r,!1),o(),i()}function o(){var e=n.getModel("decal"),r=e.get("show");if(r){var o=mt();t.eachSeries(function(t){if(t.useColorPaletteOnData){var e=o.get(t.type);e||(e={},o.set(t.type,e)),wQ(t).scope=e}}),t.eachRawSeries(function(e){if(!t.isSeriesFiltered(e))if("function"!==typeof e.enableAriaDecal){var n=e.getData();if(e.useColorPaletteOnData){var r=e.getRawData(),o={},i=wQ(e).scope;n.each(function(t){var e=n.getRawIndex(t);o[e]=t});var a=r.count();r.each(function(t){var u=o[t],s=r.getName(t)||t+"",c=Yp(e.ecModel,s,i,a),f=n.getItemVisual(u,"decal");n.setItemVisual(u,"decal",l(f,c))})}else{var u=Yp(e.ecModel,e.name,_Q,t.getSeriesCount()),s=n.getVisual("decal");n.setVisual("decal",l(s,u))}}else e.enableAriaDecal();function l(t,e){var n=t?I(I({},e),t):e;return n.dirty=!0,n}})}}function i(){var r=t.getLocaleModel().get("aria"),o=n.getModel("label");if(o.option=O(o.option,r),o.get("enabled")){var i=e.getZr().dom;if(o.get("description"))i.setAttribute("aria-label",o.get("description"));else{var l,c=t.getSeriesCount(),f=o.get(["data","maxCount"])||10,d=o.get(["series","maxCount"])||10,h=Math.min(c,d);if(!(c<1)){var p=u();if(p){var g=o.get(["general","withTitle"]);l=a(g,{title:p})}else l=o.get(["general","withoutTitle"]);var m=[],v=c>1?o.get(["series","multiple","prefix"]):o.get(["series","single","prefix"]);l+=a(v,{seriesCount:c}),t.eachSeries(function(t,e){if(e<h){var n=void 0,r=t.get("name"),i=r?"withName":"withoutName";n=c>1?o.get(["series","multiple",i]):o.get(["series","single",i]),n=a(n,{seriesId:t.seriesIndex,seriesName:t.get("name"),seriesType:s(t.subType)});var u=t.getData();if(u.count()>f){var l=o.get(["data","partialData"]);n+=a(l,{displayCnt:f})}else n+=o.get(["data","allData"]);for(var d=[],p=0;p<u.count();p++)if(p<f){var g=u.getName(p),v=Sm(u,p),y=o.get(["data",g?"withName":"withoutName"]);d.push(a(y,{name:g,value:v}))}var b=o.get(["data","separator","middle"]),x=o.get(["data","separator","end"]);n+=d.join(b)+x,m.push(n)}});var y=o.getModel(["series","multiple","separator"]),b=y.get("middle"),x=y.get("end");l+=m.join(b)+x,i.setAttribute("aria-label",l)}}}}function a(t,e){if("string"!==typeof t)return t;var n=t;return z(e,function(t,e){n=n.replace(new RegExp("\\{\\s*"+e+"\\s*\\}","g"),t)}),n}function u(){var e=t.get("title");return e&&e.length&&(e=e[0]),e&&e.text}function s(e){return t.getLocaleModel().get(["series","typeNames"])[e]||"自定义图"}}function CQ(t){if(t&&t.aria){var e=t.aria;null!=e.show&&(e.enabled=e.show),e.label=e.label||{},z(["description","general","series","data"],function(t){null!=e[t]&&(e.label[t]=e[t])})}}function MQ(t){t.registerPreprocessor(CQ),t.registerVisual(t.PRIORITY.VISUAL.ARIA,SQ)}var TQ={value:"eq","<":"lt","<=":"lte",">":"gt",">=":"gte","=":"eq","!=":"ne","<>":"ne"},kQ=function(){function t(t){var e=this._condVal=q(t)?new RegExp(t):rt(t)?t:null;if(null==e){var n="";0,eg(n)}}return t.prototype.evaluate=function(t){var e=typeof t;return"string"===e?this._condVal.test(t):"number"===e&&this._condVal.test(t+"")},t}(),DQ=function(){function t(){}return t.prototype.evaluate=function(){return this.value},t}(),AQ=function(){function t(){}return t.prototype.evaluate=function(){for(var t=this.children,e=0;e<t.length;e++)if(!t[e].evaluate())return!1;return!0},t}(),IQ=function(){function t(){}return t.prototype.evaluate=function(){for(var t=this.children,e=0;e<t.length;e++)if(t[e].evaluate())return!0;return!1},t}(),OQ=function(){function t(){}return t.prototype.evaluate=function(){return!this.child.evaluate()},t}(),LQ=function(){function t(){}return t.prototype.evaluate=function(){for(var t=!!this.valueParser,e=this.getValue,n=e(this.valueGetterParam),r=t?this.valueParser(n):null,o=0;o<this.subCondList.length;o++)if(!this.subCondList[o].evaluate(t?r:n))return!1;return!0},t}();function EQ(t,e){if(!0===t||!1===t){var n=new DQ;return n.value=t,n}var r="";return zQ(t)||eg(r),t.and?NQ("and",t,e):t.or?NQ("or",t,e):t.not?RQ(t,e):PQ(t,e)}function NQ(t,e,n){var r=e[t],o="";X(r)||eg(o),r.length||eg(o);var i="and"===t?new AQ:new IQ;return i.children=B(r,function(t){return EQ(t,n)}),i.children.length||eg(o),i}function RQ(t,e){var n=t.not,r="";zQ(n)||eg(r);var o=new OQ;return o.child=EQ(n,e),o.child||eg(r),o}function PQ(t,e){for(var n="",r=e.prepareGetValue(t),o=[],i=W(t),a=t.parser,u=a?Lm(a):null,s=0;s<i.length;s++){var l=i[s];if("parser"!==l&&!e.valueGetterAttrMap.get(l)){var c=bt(TQ,l)?TQ[l]:l,f=t[l],d=u?u(f):f,h=zm(c,d)||"reg"===c&&new kQ(d);h||eg(n),o.push(h)}}o.length||eg(n);var p=new LQ;return p.valueGetterParam=r,p.valueParser=u,p.getValue=e.getValue,p.subCondList=o,p}function zQ(t){return K(t)&&!P(t)}var BQ=function(){function t(t,e){this._cond=EQ(t,e)}return t.prototype.evaluate=function(){return this._cond.evaluate()},t}();function VQ(t,e){return new BQ(t,e)}var HQ={type:"echarts:filter",transform:function(t){for(var e,n=t.upstream,r=VQ(t.config,{valueGetterAttrMap:mt({dimension:!0}),prepareGetValue:function(t){var e="",r=t.dimension;bt(t,"dimension")||eg(e);var o=n.getDimensionInfo(r);return o||eg(e),{dimIdx:o.index}},getValue:function(t){return n.retrieveValueFromItem(e,t.dimIdx)}}),o=[],i=0,a=n.count();i<a;i++)e=n.getRawDataItem(i),r.evaluate()&&o.push(e);return{data:o}}};var FQ={type:"echarts:sort",transform:function(t){var e=t.upstream,n=t.config,r="",o=ai(n);o.length||eg(r);var i=[];z(o,function(t){var n=t.dimension,o=t.order,a=t.parser,u=t.incomparable;if(null==n&&eg(r),"asc"!==o&&"desc"!==o&&eg(r),u&&"min"!==u&&"max"!==u){var s="";0,eg(s)}if("asc"!==o&&"desc"!==o){var l="";0,eg(l)}var c=e.getDimensionInfo(n);c||eg(r);var f=a?Lm(a):null;a&&!f&&eg(r),i.push({dimIdx:c.index,parser:f,comparator:new Rm(o,u)})});var a=e.sourceFormat;a!==Mp&&a!==Tp&&eg(r);for(var u=[],s=0,l=e.count();s<l;s++)u.push(e.getRawDataItem(s));return u.sort(function(t,n){for(var r=0;r<i.length;r++){var o=i[r],a=e.retrieveValueFromItem(t,o.dimIdx),u=e.retrieveValueFromItem(n,o.dimIdx);o.parser&&(a=o.parser(a),u=o.parser(u));var s=o.comparator.evaluate(a,u);if(0!==s)return s}return 0}),{data:u}}};function WQ(t){t.registerTransform(HQ),t.registerTransform(FQ)}var UQ=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type="dataset",e}return i(e,t),e.prototype.init=function(e,n,r){t.prototype.init.call(this,e,n,r),this._sourceManager=new Zm(this),$m(this)},e.prototype.mergeOption=function(e,n){t.prototype.mergeOption.call(this,e,n),$m(this)},e.prototype.optionUpdated=function(){this._sourceManager.dirty()},e.prototype.getSourceManager=function(){return this._sourceManager},e.type="dataset",e.defaultOption={seriesLayoutBy:Ip},e}(bp),GQ=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type="dataset",e}return i(e,t),e.type="dataset",e}(Lv);function jQ(t){t.registerComponentModel(UQ),t.registerComponentView(GQ)}n.d(e,"a",function(){return J_}),mS([IS]),mS([HC]),mS([HT,Ek,Qk,ZI,vO,vL,hE,WN,iP,mP,kP,LB,cV,AV,rH,hH,PH,YH,SF,EF,JF,nG]),mS(tj),mS(jj),mS(mL),mS(mX),mS(OB),mS(DX),mS(WX),mS(Tq),mS(fZ),mS(QG),mS(jZ),mS(qZ),mS(v$),mS(W$),mS(tK),mS(hK),mS(WK),mS(SJ),mS(iJ),mS(_J),mS(bQ),mS(fQ),mS(yQ),mS(MQ),mS(WQ),mS(jQ)},3699:function(t,e){(function(){"use strict";var t=tinymce.util.Tools.resolve("tinymce.PluginManager"),e=function(){return e=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n],e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},e.apply(this,arguments)},n=function(t){var e=typeof t;return null===t?"null":"object"===e&&(Array.prototype.isPrototypeOf(t)||t.constructor&&"Array"===t.constructor.name)?"array":"object"===e&&(String.prototype.isPrototypeOf(t)||t.constructor&&"String"===t.constructor.name)?"string":e},r=function(t){return function(e){return n(e)===t}},o=r("string"),i=r("object"),a=r("array"),u=function(t){return null===t||void 0===t},s=function(t){return!u(t)},l=function(){},c=function(t){return function(){return t}},f=c(!1),d=c(!0),h=function(){return p},p=function(){var t=function(t){return t.isNone()},e=function(t){return t()},n=function(t){return t},r={fold:function(t,e){return t()},is:f,isSome:f,isNone:d,getOr:n,getOrThunk:e,getOrDie:function(t){throw new Error(t||"error: getOrDie called on none.")},getOrNull:c(null),getOrUndefined:c(void 0),or:n,orThunk:e,map:h,each:l,bind:h,exists:f,forall:d,filter:h,equals:t,equals_:t,toArray:function(){return[]},toString:c("none()")};return r}(),g=function(t){var e=c(t),n=function(){return o},r=function(e){return e(t)},o={fold:function(e,n){return n(t)},is:function(e){return t===e},isSome:d,isNone:f,getOr:e,getOrThunk:e,getOrDie:e,getOrNull:e,getOrUndefined:e,or:n,orThunk:n,map:function(e){return g(e(t))},each:function(e){e(t)},bind:r,exists:r,forall:r,filter:function(e){return e(t)?o:p},toArray:function(){return[t]},toString:function(){return"some("+t+")"},equals:function(e){return e.is(t)},equals_:function(e,n){return e.fold(f,function(e){return n(t,e)})}};return o},m=function(t){return null===t||void 0===t?p:g(t)},v={some:g,none:h,from:m},y=Array.prototype.push,b=function(t,e){for(var n=0,r=t.length;n<r;n++){var o=t[n];e(o,n)}},x=function(t){for(var e=[],n=0,r=t.length;n<r;++n){if(!a(t[n]))throw new Error("Arr.flatten item "+n+" was not an array, input: "+t);y.apply(e,t[n])}return e},w=function(t){var e=t,n=function(){return e},r=function(t){e=t};return{get:n,set:r}},_=Object.keys,S=Object.hasOwnProperty,C=function(t,e){for(var n=_(t),r=0,o=n.length;r<o;r++){var i=n[r],a=t[i];e(a,i)}},M=function(t,e){return T(t,e)?v.from(t[e]):v.none()},T=function(t,e){return S.call(t,e)},k=function(t){return t.getParam("media_scripts")},D=function(t){return t.getParam("audio_template_callback")},A=function(t){return t.getParam("video_template_callback")},I=function(t){return t.getParam("media_live_embeds",!0)},O=function(t){return t.getParam("media_filter_html",!0)},L=function(t){return t.getParam("media_url_resolver")},E=function(t){return t.getParam("media_alt_source",!0)},N=function(t){return t.getParam("media_poster",!0)},R=function(t){return t.getParam("media_dimensions",!0)},P=tinymce.util.Tools.resolve("tinymce.util.Tools"),z=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),B=tinymce.util.Tools.resolve("tinymce.html.SaxParser"),V=function(t,e){if(t)for(var n=0;n<t.length;n++)if(-1!==e.indexOf(t[n].filter))return t[n]},H=z.DOM,F=function(t){return t.replace(/px$/,"")},W=function(t){var e=t.map.style,n=e?H.parseStyle(e):{};return{type:"ephox-embed-iri",source:t.map["data-ephox-embed-iri"],altsource:"",poster:"",width:M(n,"max-width").map(F).getOr(""),height:M(n,"max-height").map(F).getOr("")}},U=function(t,e){var n=w(!1),r={};return B({validate:!1,allow_conditional_comments:!0,start:function(e,o){if(n.get());else if(T(o.map,"data-ephox-embed-iri"))n.set(!0),r=W(o);else{if(r.source||"param"!==e||(r.source=o.map.movie),"iframe"!==e&&"object"!==e&&"embed"!==e&&"video"!==e&&"audio"!==e||(r.type||(r.type=e),r=P.extend(o.map,r)),"script"===e){var i=V(t,o.map.src);if(!i)return;r={type:"script",source:o.map.src,width:String(i.width),height:String(i.height)}}"source"===e&&(r.source?r.altsource||(r.altsource=o.map.src):r.source=o.map.src),"img"!==e||r.poster||(r.poster=o.map.src)}}}).parse(e),r.source=r.source||r.src||r.data,r.altsource=r.altsource||"",r.poster=r.poster||"",r},G=function(t){var e={mp3:"audio/mpeg",m4a:"audio/x-m4a",wav:"audio/wav",mp4:"video/mp4",webm:"video/webm",ogg:"video/ogg",swf:"application/x-shockwave-flash"},n=t.toLowerCase().split(".").pop(),r=e[n];return r||""},j=tinymce.util.Tools.resolve("tinymce.html.Schema"),X=tinymce.util.Tools.resolve("tinymce.html.Writer"),Y=z.DOM,q=function(t){return/^[0-9.]+$/.test(t)?t+"px":t},Z=function(t,e){C(e,function(e,n){var r=""+e;if(t.map[n]){var o=t.length;while(o--){var i=t[o];i.name===n&&(r?(t.map[n]=r,i.value=r):(delete t.map[n],t.splice(o,1)))}}else r&&(t.push({name:n,value:r}),t.map[n]=r)})},$=function(t,e){var n=e.map.style,r=n?Y.parseStyle(n):{};r["max-width"]=q(t.width),r["max-height"]=q(t.height),Z(e,{style:Y.serializeStyle(r)})},K=["source","altsource"],J=function(t,e,n){var r,o=X(),i=w(!1),a=0;return B({validate:!1,allow_conditional_comments:!0,comment:function(t){o.comment(t)},cdata:function(t){o.cdata(t)},text:function(t,e){o.text(t,e)},start:function(t,u,s){if(i.get());else if(T(u.map,"data-ephox-embed-iri"))i.set(!0),$(e,u);else{switch(t){case"video":case"object":case"embed":case"img":case"iframe":void 0!==e.height&&void 0!==e.width&&Z(u,{width:e.width,height:e.height});break}if(n)switch(t){case"video":Z(u,{poster:e.poster,src:""}),e.altsource&&Z(u,{src:""});break;case"iframe":Z(u,{src:e.source});break;case"source":if(a<2&&(Z(u,{src:e[K[a]],type:e[K[a]+"mime"]}),!e[K[a]]))return;a++;break;case"img":if(!e.poster)return;r=!0;break}}o.start(t,u,s)},end:function(t){if(!i.get()){if("video"===t&&n)for(var u=0;u<2;u++)if(e[K[u]]){var s=[];s.map={},a<=u&&(Z(s,{src:e[K[u]],type:e[K[u]+"mime"]}),o.start("source",s,!0))}if(e.poster&&"object"===t&&n&&!r){var l=[];l.map={},Z(l,{src:e.poster,width:e.width,height:e.height}),o.start("img",l,!0)}}o.end(t)}},j({})).parse(t),o.getContent()},Q=[{regex:/youtu\.be\/([\w\-_\?&=.]+)/i,type:"iframe",w:560,h:314,url:"www.youtube.com/embed/$1",allowFullscreen:!0},{regex:/youtube\.com(.+)v=([^&]+)(&([a-z0-9&=\-_]+))?/i,type:"iframe",w:560,h:314,url:"www.youtube.com/embed/$2?$4",allowFullscreen:!0},{regex:/youtube.com\/embed\/([a-z0-9\?&=\-_]+)/i,type:"iframe",w:560,h:314,url:"www.youtube.com/embed/$1",allowFullscreen:!0},{regex:/vimeo\.com\/([0-9]+)/,type:"iframe",w:425,h:350,url:"player.vimeo.com/video/$1?title=0&byline=0&portrait=0&color=8dc7dc",allowFullscreen:!0},{regex:/vimeo\.com\/(.*)\/([0-9]+)/,type:"iframe",w:425,h:350,url:"player.vimeo.com/video/$2?title=0&amp;byline=0",allowFullscreen:!0},{regex:/maps\.google\.([a-z]{2,3})\/maps\/(.+)msid=(.+)/,type:"iframe",w:425,h:350,url:'maps.google.com/maps/ms?msid=$2&output=embed"',allowFullscreen:!1},{regex:/dailymotion\.com\/video\/([^_]+)/,type:"iframe",w:480,h:270,url:"www.dailymotion.com/embed/video/$1",allowFullscreen:!0},{regex:/dai\.ly\/([^_]+)/,type:"iframe",w:480,h:270,url:"www.dailymotion.com/embed/video/$1",allowFullscreen:!0}],tt=function(t){var e=t.match(/^(https?:\/\/|www\.)(.+)$/i);return e&&e.length>1?"www."===e[1]?"https://":e[1]:"https://"},et=function(t,e){for(var n=tt(e),r=t.regex.exec(e),o=n+t.url,i=function(t){o=o.replace("$"+t,function(){return r[t]?r[t]:""})},a=0;a<r.length;a++)i(a);return o.replace(/\?$/,"")},nt=function(t){var e=Q.filter(function(e){return e.regex.test(t)});return e.length>0?P.extend({},e[0],{url:et(e[0],t)}):null},rt=function(t){var e=t.allowfullscreen?' allowFullscreen="1"':"";return'<iframe src="'+t.source+'" width="'+t.width+'" height="'+t.height+'"'+e+"></iframe>"},ot=function(t){var e='<object data="'+t.source+'" width="'+t.width+'" height="'+t.height+'" type="application/x-shockwave-flash">';return t.poster&&(e+='<img src="'+t.poster+'" width="'+t.width+'" height="'+t.height+'" />'),e+="</object>",e},it=function(t,e){return e?e(t):'<audio controls="controls" src="'+t.source+'">'+(t.altsource?'\n<source src="'+t.altsource+'"'+(t.altsourcemime?' type="'+t.altsourcemime+'"':"")+" />\n":"")+"</audio>"},at=function(t,e){return e?e(t):'<video width="'+t.width+'" height="'+t.height+'"'+(t.poster?' poster="'+t.poster+'"':"")+' controls="controls">\n<source src="'+t.source+'"'+(t.sourcemime?' type="'+t.sourcemime+'"':"")+" />\n"+(t.altsource?'<source src="'+t.altsource+'"'+(t.altsourcemime?' type="'+t.altsourcemime+'"':"")+" />\n":"")+"</video>"},ut=function(t){return'<script src="'+t.source+'"><\/script>'},st=function(t,e){var n=P.extend({},e);if(!n.source&&(P.extend(n,U(k(t),n.embed)),!n.source))return"";n.altsource||(n.altsource=""),n.poster||(n.poster=""),n.source=t.convertURL(n.source,"source"),n.altsource=t.convertURL(n.altsource,"source"),n.sourcemime=G(n.source),n.altsourcemime=G(n.altsource),n.poster=t.convertURL(n.poster,"poster");var r=nt(n.source);if(r&&(n.source=r.url,n.type=r.type,n.allowfullscreen=r.allowFullscreen,n.width=n.width||String(r.w),n.height=n.height||String(r.h)),n.embed)return J(n.embed,n,!0);var o=V(k(t),n.source);o&&(n.type="script",n.width=String(o.width),n.height=String(o.height));var i=D(t),a=A(t);return n.width=n.width||"300",n.height=n.height||"150",P.each(n,function(e,r){n[r]=t.dom.encode(""+e)}),"iframe"===n.type?rt(n):"application/x-shockwave-flash"===n.sourcemime?ot(n):-1!==n.sourcemime.indexOf("audio")?it(n,i):"script"===n.type?ut(n):at(n,a)},lt=tinymce.util.Tools.resolve("tinymce.util.Promise"),ct={},ft=function(t,e,n){return new lt(function(r,o){var i=function(n){return n.html&&(ct[t.source]=n),r({url:t.source,html:n.html?n.html:e(t)})};ct[t.source]?i(ct[t.source]):n({url:t.source},i,o)})},dt=function(t,e){return new lt(function(n){n({html:e(t),url:t.source})})},ht=function(t){return function(e){return st(t,e)}},pt=function(t,e){var n=L(t);return n?ft(e,ht(t),n):dt(e,ht(t))},gt=function(t){return ct.hasOwnProperty(t)},mt=function(t,e){return M(e,t).bind(function(t){return M(t,"meta")})},vt=function(t,e,n){return function(r){var o,a=function(){return M(t,r)},u=function(){return M(e,r)},s=function(t){return M(t,"value").bind(function(t){return t.length>0?v.some(t):v.none()})},l=function(){return a().bind(function(t){return i(t)?s(t).orThunk(u):u().orThunk(function(){return v.from(t)})})},c=function(){return u().orThunk(function(){return a().bind(function(t){return i(t)?s(t):v.from(t)})})};return o={},o[r]=(r===n?l():c()).getOr(""),o}},yt=function(t,e){var n={};return M(t,"dimensions").each(function(t){b(["width","height"],function(r){M(e,r).orThunk(function(){return M(t,r)}).each(function(t){return n[r]=t})})}),n},bt=function(t,n){var r=n?mt(n,t).getOr({}):{},o=vt(t,r,n);return e(e(e(e(e({},o("source")),o("altsource")),o("poster")),o("embed")),yt(t,r))},xt=function(t){var n=e(e({},t),{source:{value:M(t,"source").getOr("")},altsource:{value:M(t,"altsource").getOr("")},poster:{value:M(t,"poster").getOr("")}});return b(["width","height"],function(e){M(t,e).each(function(t){var r=n.dimensions||{};r[e]=t,n.dimensions=r})}),n},wt=function(t){return function(e){var n=e&&e.msg?"Media embed handler error: "+e.msg:"Media embed handler threw unknown error.";t.notificationManager.open({type:"error",text:n})}},_t=function(t,e){return U(k(t),e)},St=function(t){return t.getAttribute("data-mce-object")||t.getAttribute("data-ephox-embed-iri")},Ct=function(t){var n=t.selection.getNode(),r=St(n)?t.serializer.serialize(n,{selection:!0}):"";return e({embed:r},U(k(t),r))},Mt=function(t,n){return function(r){if(o(r.url)&&r.url.trim().length>0){var i=r.html,a=_t(n,i),u=e(e({},a),{source:r.url,embed:i});t.setData(xt(u))}}},Tt=function(t,e){for(var n=t.dom.select("*[data-mce-object]"),r=0;r<e.length;r++)for(var o=n.length-1;o>=0;o--)e[r]===n[o]&&n.splice(o,1);t.selection.select(n[0])},kt=function(t,e){var n=t.dom.select("*[data-mce-object]");t.insertContent(e),Tt(t,n),t.nodeChanged()},Dt=function(t,e,n){e.embed=J(e.embed,e),e.embed&&(t.source===e.source||gt(e.source))?kt(n,e.embed):pt(n,e).then(function(t){kt(n,t.html)}).catch(wt(n))},At=function(t){var n=Ct(t),r=w(n),o=xt(n),i=function(e,n){var r=bt(n.getData(),"source");e.source!==r.source&&(Mt(v,t)({url:r.source,html:""}),pt(t,r).then(Mt(v,t)).catch(wt(t)))},a=function(e){var n=bt(e.getData()),r=_t(t,n.embed);e.setData(xt(r))},u=function(n,r){var o=bt(n.getData(),r),i=st(t,o);n.setData(xt(e(e({},o),{embed:i})))},s=[{name:"source",type:"urlinput",filetype:"media",label:"Source"}],l=R(t)?[{type:"sizeinput",name:"dimensions",label:"Constrain proportions",constrain:!0}]:[],c={title:"General",name:"general",items:x([s,l])},f={type:"textarea",name:"embed",label:"Paste your embed code below:"},d={title:"Embed",items:[f]},h=[];E(t)&&h.push({name:"altsource",type:"urlinput",filetype:"media",label:"Alternative source URL"}),N(t)&&h.push({name:"poster",type:"urlinput",filetype:"image",label:"Media poster (Image URL)"});var p={title:"Advanced",name:"advanced",items:h},g=[c,d];h.length>0&&g.push(p);var m={type:"tabpanel",tabs:g},v=t.windowManager.open({title:"Insert/Edit Media",size:"normal",body:m,buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],onSubmit:function(e){var n=bt(e.getData());Dt(r.get(),n,t),e.close()},onChange:function(t,e){switch(e.name){case"source":i(r.get(),t);break;case"embed":a(t);break;case"dimensions":case"altsource":case"poster":u(t,e.name);break}r.set(bt(t.getData()))},initialData:o})},It=function(t){var e=function(){At(t)};return{showDialog:e}},Ot=function(t){var e=function(){At(t)};t.addCommand("mceMedia",e)},Lt=tinymce.util.Tools.resolve("tinymce.html.Node"),Et=tinymce.util.Tools.resolve("tinymce.Env"),Nt=tinymce.util.Tools.resolve("tinymce.html.DomParser"),Rt=function(t,e){if(!1===O(t))return e;var n,r=X();return B({validate:!1,allow_conditional_comments:!1,comment:function(t){n||r.comment(t)},cdata:function(t){n||r.cdata(t)},text:function(t,e){n||r.text(t,e)},start:function(e,o,i){if(n=!0,"script"!==e&&"noscript"!==e&&"svg"!==e){for(var a=o.length-1;a>=0;a--){var u=o[a].name;0===u.indexOf("on")&&(delete o.map[u],o.splice(a,1)),"style"===u&&(o[a].value=t.dom.serializeStyle(t.dom.parseStyle(o[a].value),e))}r.start(e,o,i),n=!1}},end:function(t){n||r.end(t)}},j({})).parse(e),r.getContent()},Pt=function(t){var e=t.name;return"iframe"===e||"video"===e||"audio"===e},zt=function(t,e,n,r){void 0===r&&(r=null);var o=t.attr(n);return s(o)?o:T(e,n)?null:r},Bt=function(t,e,n){var r="img"===e.name||"video"===t.name,o=r?"300":null,i="audio"===t.name?"30":"150",a=r?i:null;e.attr({width:zt(t,n,"width",o),height:zt(t,n,"height",a)})},Vt=function(t,e,n,r){var o=Nt({forced_root_block:!1,validate:!1},t.schema).parse(r,{context:e});while(o.firstChild)n.append(o.firstChild)},Ht=function(t,e){var n=e.name,r=new Lt("img",1);return r.shortEnded=!0,Wt(t,e,r),Bt(e,r,{}),r.attr({style:e.attr("style"),src:Et.transparentSrc,"data-mce-object":n,class:"mce-object mce-object-"+n}),r},Ft=function(t,e){var n=e.name,r=new Lt("span",1);r.attr({contentEditable:"false",style:e.attr("style"),"data-mce-object":n,class:"mce-preview-object mce-object-"+n}),Wt(t,e,r);var o=t.dom.parseStyle(e.attr("style")),i=new Lt(n,1);if(Bt(e,i,o),i.attr({src:e.attr("src"),style:e.attr("style"),class:e.attr("class")}),"iframe"===n)i.attr({allowfullscreen:e.attr("allowfullscreen"),frameborder:"0"});else{var a=["controls","crossorigin","currentTime","loop","muted","poster","preload"];b(a,function(t){i.attr(t,e.attr(t))});var u=r.attr("data-mce-html");s(u)&&Vt(t,n,i,u)}var l=new Lt("span",1);return l.attr("class","mce-shim"),r.append(i),r.append(l),r},Wt=function(t,e,n){var r=e.attributes,o=r.length;while(o--){var i=r[o].name,a=r[o].value;"width"!==i&&"height"!==i&&"style"!==i&&("data"!==i&&"src"!==i||(a=t.convertURL(a,i)),n.attr("data-mce-p-"+i,a))}var u=e.firstChild&&e.firstChild.value;u&&(n.attr("data-mce-html",escape(Rt(t,u))),n.firstChild=null)},Ut=function(t){var e=t.attr("class");return e&&/\btiny-pageembed\b/.test(e)},Gt=function(t){while(t=t.parent)if(t.attr("data-ephox-embed-iri")||Ut(t))return!0;return!1},jt=function(t){return function(e){var n,r,o=e.length;while(o--)n=e[o],n.parent&&(n.parent.attr("data-mce-object")||("script"!==n.name||(r=V(k(t),n.attr("src")),r))&&(r&&(r.width&&n.attr("width",r.width.toString()),r.height&&n.attr("height",r.height.toString())),Pt(n)&&I(t)&&Et.ceFalse?Gt(n)||n.replace(Ft(t,n)):Gt(n)||n.replace(Ht(t,n))))}},Xt=function(t){t.on("preInit",function(){var e=t.schema.getSpecialElements();P.each("video audio iframe object".split(" "),function(t){e[t]=new RegExp("</"+t+"[^>]*>","gi")});var n=t.schema.getBoolAttrs();P.each("webkitallowfullscreen mozallowfullscreen allowfullscreen".split(" "),function(t){n[t]={}}),t.parser.addNodeFilter("iframe,video,audio,object,embed,script",jt(t)),t.serializer.addAttributeFilter("data-mce-object",function(e,n){var r,o,i,a,u,s,l,c,f=e.length;while(f--)if(r=e[f],r.parent){l=r.attr(n),o=new Lt(l,1),"audio"!==l&&"script"!==l&&(c=r.attr("class"),c&&-1!==c.indexOf("mce-preview-object")?o.attr({width:r.firstChild.attr("width"),height:r.firstChild.attr("height")}):o.attr({width:r.attr("width"),height:r.attr("height")})),o.attr({style:r.attr("style")}),a=r.attributes,i=a.length;while(i--){var d=a[i].name;0===d.indexOf("data-mce-p-")&&o.attr(d.substr(11),a[i].value)}"script"===l&&o.attr("type","text/javascript"),u=r.attr("data-mce-html"),u&&(s=new Lt("#text",3),s.raw=!0,s.value=Rt(t,unescape(u)),o.append(s)),r.replace(o)}})}),t.on("SetContent",function(){t.$("span.mce-preview-object").each(function(e,n){var r=t.$(n);0===r.find("span.mce-shim").length&&r.append('<span class="mce-shim"></span>')})})},Yt=function(t){t.on("ResolveName",function(t){var e;1===t.target.nodeType&&(e=t.target.getAttribute("data-mce-object"))&&(t.name=e)})},qt=function(t){t.on("click keyup touchend",function(){var e=t.selection.getNode();e&&t.dom.hasClass(e,"mce-preview-object")&&t.dom.getAttrib(e,"data-mce-selected")&&e.setAttribute("data-mce-selected","2")}),t.on("ObjectSelected",function(t){var e=t.target.getAttribute("data-mce-object");"script"===e&&t.preventDefault()}),t.on("ObjectResized",function(t){var e,n=t.target;n.getAttribute("data-mce-object")&&(e=n.getAttribute("data-mce-html"),e&&(e=unescape(e),n.setAttribute("data-mce-html",escape(J(e,{width:String(t.width),height:String(t.height)})))))})},Zt=function(t,e){return function(n){return t.selection.selectorChangedWithUnbind(e.join(","),n.setActive).unbind}},$t=function(t){t.ui.registry.addToggleButton("media",{tooltip:"Insert/edit media",icon:"embed",onAction:function(){t.execCommand("mceMedia")},onSetup:Zt(t,["img[data-mce-object]","span[data-mce-object]","div[data-ephox-embed-iri]"])}),t.ui.registry.addMenuItem("media",{icon:"embed",text:"Media...",onAction:function(){t.execCommand("mceMedia")}})};function Kt(){t.add("media",function(t){return Ot(t),$t(t),Yt(t),Xt(t),qt(t),It(t)})}Kt()})()},"36bd":function(t,e,n){"use strict";var r=n("4bf8"),o=n("77f1"),i=n("9def");t.exports=function(t){var e=r(this),n=i(e.length),a=arguments.length,u=o(a>1?arguments[1]:void 0,n),s=a>2?arguments[2]:void 0,l=void 0===s?n:o(s,n);while(l>u)e[u++]=t;return e}},3702:function(t,e,n){var r=n("481b"),o=n("5168")("iterator"),i=Array.prototype;t.exports=function(t){return void 0!==t&&(r.Array===t||i[o]===t)}},"386d":function(t,e,n){"use strict";var r=n("cb7c"),o=n("83a1"),i=n("5f1b");n("214f")("search",1,function(t,e,n,a){return[function(n){var r=t(this),o=void 0==n?void 0:n[e];return void 0!==o?o.call(n,r):new RegExp(n)[e](String(r))},function(t){var e=a(n,t,this);if(e.done)return e.value;var u=r(t),s=String(this),l=u.lastIndex;o(l,0)||(u.lastIndex=0);var c=i(u,s);return o(u.lastIndex,l)||(u.lastIndex=l),null===c?-1:c.index}]})},"3aea":function(t,e,n){n("3699")},"40c3":function(t,e,n){var r=n("6b4c"),o=n("5168")("toStringTag"),i="Arguments"==r(function(){return arguments}()),a=function(t,e){try{return t[e]}catch(n){}};t.exports=function(t){var e,n,u;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(n=a(e=Object(t),o))?n:i?r(e):"Object"==(u=r(e))&&"function"==typeof e.callee?"Arguments":u}},"4ea8":function(t,e,n){n("cdd9")},"4ee1":function(t,e,n){var r=n("5168")("iterator"),o=!1;try{var i=[7][r]();i["return"]=function(){o=!0},Array.from(i,function(){throw 2})}catch(a){}t.exports=function(t,e){if(!e&&!o)return!1;var n=!1;try{var i=[7],u=i[r]();u.next=function(){return{done:n=!0}},i[r]=function(){return u},t(i)}catch(a){}return n}},"549b":function(t,e,n){"use strict";var r=n("d864"),o=n("63b6"),i=n("241e"),a=n("b0dc"),u=n("3702"),s=n("b447"),l=n("20fd"),c=n("7cd6");o(o.S+o.F*!n("4ee1")(function(t){Array.from(t)}),"Array",{from:function(t){var e,n,o,f,d=i(t),h="function"==typeof this?this:Array,p=arguments.length,g=p>1?arguments[1]:void 0,m=void 0!==g,v=0,y=c(d);if(m&&(g=r(g,p>2?arguments[2]:void 0,2)),void 0==y||h==Array&&u(y))for(e=s(d.length),n=new h(e);e>v;v++)l(n,v,m?g(d[v],v):d[v]);else for(f=y.call(d),n=new h;!(o=f.next()).done;v++)l(n,v,m?a(f,g,[o.value,v],!0):o.value);return n.length=v,n}})},"54a1":function(t,e,n){n("6c1c"),n("1654"),t.exports=n("95d5")},"5e4c":function(t,e){(function(){"use strict";var t=tinymce.util.Tools.resolve("tinymce.PluginManager");function e(){t.add("contextmenu",function(){console.warn("Context menu plugin is now built in to the core editor, please remove it from your editor configuration")})}e()})()},"6c7b":function(t,e,n){var r=n("5ca1");r(r.P,"Array",{fill:n("36bd")}),n("9c6c")("fill")},"75fc":function(t,e,n){"use strict";var r=n("a745"),o=n.n(r);function i(t){if(o()(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}var a=n("774e"),u=n.n(a),s=n("c8bb"),l=n.n(s);function c(t){if(l()(Object(t))||"[object Arguments]"===Object.prototype.toString.call(t))return u()(t)}function f(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function d(t){return i(t)||c(t)||f()}n.d(e,"a",function(){return d})},"774e":function(t,e,n){t.exports=n("d2d5")},"7cd6":function(t,e,n){var r=n("40c3"),o=n("5168")("iterator"),i=n("481b");t.exports=n("584a").getIteratorMethod=function(t){if(void 0!=t)return t[o]||t["@@iterator"]||i[r(t)]}},"7f7f":function(t,e,n){var r=n("86cc").f,o=Function.prototype,i=/^\s*function ([^ (]*)/,a="name";a in o||n("9e1e")&&r(o,a,{configurable:!0,get:function(){try{return(""+this).match(i)[1]}catch(t){return""}}})},"83a1":function(t,e){t.exports=Object.is||function(t,e){return t===e?0!==t||1/t===1/e:t!=t&&e!=e}},"84ec":function(t,e,n){n("2401")},9434:function(t,e,n){n("e8b0")},"94ce":function(t,e){(function(){"use strict";var t=function(t){var e=typeof t;return null===t?"null":"object"===e&&(Array.prototype.isPrototypeOf(t)||t.constructor&&"Array"===t.constructor.name)?"array":"object"===e&&(String.prototype.isPrototypeOf(t)||t.constructor&&"String"===t.constructor.name)?"string":e},e=function(e){return function(n){return t(n)===e}},n=function(t){return function(e){return typeof e===t}},r=function(t){return function(e){return t===e}},o=e("string"),i=e("object"),a=e("array"),u=n("boolean"),s=r(void 0),l=function(t){return null===t||void 0===t},c=function(t){return!l(t)},f=n("function"),d=n("number"),h=function(){},p=function(t,e){return function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return t(e.apply(null,n))}},g=function(t,e){return function(n){return t(e(n))}},m=function(t){return function(){return t}},v=function(t){return t};function y(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];return function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];var o=e.concat(n);return t.apply(null,o)}}var b=function(t){return function(e){return!t(e)}},x=function(t){return function(){throw new Error(t)}},w=m(!1),_=m(!0),S=function(){return C},C=function(){var t=function(t){return t.isNone()},e=function(t){return t()},n=function(t){return t},r={fold:function(t,e){return t()},is:w,isSome:w,isNone:_,getOr:n,getOrThunk:e,getOrDie:function(t){throw new Error(t||"error: getOrDie called on none.")},getOrNull:m(null),getOrUndefined:m(void 0),or:n,orThunk:e,map:S,each:h,bind:S,exists:w,forall:_,filter:S,equals:t,equals_:t,toArray:function(){return[]},toString:m("none()")};return r}(),M=function(t){var e=m(t),n=function(){return o},r=function(e){return e(t)},o={fold:function(e,n){return n(t)},is:function(e){return t===e},isSome:_,isNone:w,getOr:e,getOrThunk:e,getOrDie:e,getOrNull:e,getOrUndefined:e,or:n,orThunk:n,map:function(e){return M(e(t))},each:function(e){e(t)},bind:r,exists:r,forall:r,filter:function(e){return e(t)?o:C},toArray:function(){return[t]},toString:function(){return"some("+t+")"},equals:function(e){return e.is(t)},equals_:function(e,n){return e.fold(w,function(e){return n(t,e)})}};return o},T=function(t){return null===t||void 0===t?C:M(t)},k={some:M,none:S,from:T},D=Array.prototype.slice,A=Array.prototype.indexOf,I=Array.prototype.push,O=function(t,e){return A.call(t,e)},L=function(t,e){return O(t,e)>-1},E=function(t,e){for(var n=0,r=t.length;n<r;n++){var o=t[n];if(e(o,n))return!0}return!1},N=function(t,e){for(var n=[],r=0;r<t;r++)n.push(e(r));return n},R=function(t,e){for(var n=t.length,r=new Array(n),o=0;o<n;o++){var i=t[o];r[o]=e(i,o)}return r},P=function(t,e){for(var n=0,r=t.length;n<r;n++){var o=t[n];e(o,n)}},z=function(t,e){for(var n=t.length-1;n>=0;n--){var r=t[n];e(r,n)}},B=function(t,e){for(var n=[],r=[],o=0,i=t.length;o<i;o++){var a=t[o],u=e(a,o)?n:r;u.push(a)}return{pass:n,fail:r}},V=function(t,e){for(var n=[],r=0,o=t.length;r<o;r++){var i=t[r];e(i,r)&&n.push(i)}return n},H=function(t,e,n){return z(t,function(t){n=e(n,t)}),n},F=function(t,e,n){return P(t,function(t){n=e(n,t)}),n},W=function(t,e,n){for(var r=0,o=t.length;r<o;r++){var i=t[r];if(e(i,r))return k.some(i);if(n(i,r))break}return k.none()},U=function(t,e){return W(t,e,w)},G=function(t,e){for(var n=0,r=t.length;n<r;n++){var o=t[n];if(e(o,n))return k.some(n)}return k.none()},j=function(t){for(var e=[],n=0,r=t.length;n<r;++n){if(!a(t[n]))throw new Error("Arr.flatten item "+n+" was not an array, input: "+t);I.apply(e,t[n])}return e},X=function(t,e){return j(R(t,e))},Y=function(t,e){for(var n=0,r=t.length;n<r;++n){var o=t[n];if(!0!==e(o,n))return!1}return!0},q=function(t){var e=D.call(t,0);return e.reverse(),e},Z=function(t,e){for(var n={},r=0,o=t.length;r<o;r++){var i=t[r];n[String(i)]=e(i,r)}return n},$=function(t){return[t]},K=function(t,e){var n=D.call(t,0);return n.sort(e),n},J=function(t,e){return e>=0&&e<t.length?k.some(t[e]):k.none()},Q=function(t){return J(t,0)},tt=function(t){return J(t,t.length-1)},et=function(t,e){for(var n=0;n<t.length;n++){var r=e(t[n],n);if(r.isSome())return r}return k.none()},nt=function(){return nt=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n],e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},nt.apply(this,arguments)};function rt(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),o=0;for(e=0;e<n;e++)for(var i=arguments[e],a=0,u=i.length;a<u;a++,o++)r[o]=i[a];return r}var ot=function(t){var e,n=!1;return function(){for(var r=[],o=0;o<arguments.length;o++)r[o]=arguments[o];return n||(n=!0,e=t.apply(null,r)),e}},it=function(t,e,n,r){var o=t.isiOS()&&!0===/ipad/i.test(n),i=t.isiOS()&&!o,a=t.isiOS()||t.isAndroid(),u=a||r("(pointer:coarse)"),s=o||!i&&a&&r("(min-device-width:768px)"),l=i||a&&!s,c=e.isSafari()&&t.isiOS()&&!1===/safari/i.test(n),f=!l&&!s&&!c;return{isiPad:m(o),isiPhone:m(i),isTablet:m(s),isPhone:m(l),isTouch:m(u),isAndroid:t.isAndroid,isiOS:t.isiOS,isWebView:m(c),isDesktop:m(f)}},at=function(t,e){for(var n=0;n<t.length;n++){var r=t[n];if(r.test(e))return r}},ut=function(t,e){var n=at(t,e);if(!n)return{major:0,minor:0};var r=function(t){return Number(e.replace(n,"$"+t))};return ct(r(1),r(2))},st=function(t,e){var n=String(e).toLowerCase();return 0===t.length?lt():ut(t,n)},lt=function(){return ct(0,0)},ct=function(t,e){return{major:t,minor:e}},ft={nu:ct,detect:st,unknown:lt},dt=function(t,e){var n=String(e).toLowerCase();return U(t,function(t){return t.search(n)})},ht=function(t,e){return dt(t,e).map(function(t){var n=ft.detect(t.versionRegexes,e);return{current:t.name,version:n}})},pt=function(t,e){return dt(t,e).map(function(t){var n=ft.detect(t.versionRegexes,e);return{current:t.name,version:n}})},gt={detectBrowser:ht,detectOs:pt},mt=function(t,e,n){return""===e||t.length>=e.length&&t.substr(n,n+e.length)===e},vt=function(t,e){return-1!==t.indexOf(e)},yt=function(t,e){return mt(t,e,0)},bt=function(t,e){return mt(t,e,t.length-e.length)},xt=function(t){return function(e){return e.replace(t,"")}},wt=xt(/^\s+|\s+$/g),_t=function(t){return t.length>0},St=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,Ct=function(t){return function(e){return vt(e,t)}},Mt=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:function(t){return vt(t,"edge/")&&vt(t,"chrome")&&vt(t,"safari")&&vt(t,"applewebkit")}},{name:"Chrome",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,St],search:function(t){return vt(t,"chrome")&&!vt(t,"chromeframe")}},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:function(t){return vt(t,"msie")||vt(t,"trident")}},{name:"Opera",versionRegexes:[St,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:Ct("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:Ct("firefox")},{name:"Safari",versionRegexes:[St,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:function(t){return(vt(t,"safari")||vt(t,"mobile/"))&&vt(t,"applewebkit")}}],Tt=[{name:"Windows",search:Ct("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:function(t){return vt(t,"iphone")||vt(t,"ipad")},versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:Ct("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"OSX",search:Ct("mac os x"),versionRegexes:[/.*?mac\ os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:Ct("linux"),versionRegexes:[]},{name:"Solaris",search:Ct("sunos"),versionRegexes:[]},{name:"FreeBSD",search:Ct("freebsd"),versionRegexes:[]},{name:"ChromeOS",search:Ct("cros"),versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/]}],kt={browsers:m(Mt),oses:m(Tt)},Dt="Edge",At="Chrome",It="IE",Ot="Opera",Lt="Firefox",Et="Safari",Nt=function(){return Rt({current:void 0,version:ft.unknown()})},Rt=function(t){var e=t.current,n=t.version,r=function(t){return function(){return e===t}};return{current:e,version:n,isEdge:r(Dt),isChrome:r(At),isIE:r(It),isOpera:r(Ot),isFirefox:r(Lt),isSafari:r(Et)}},Pt={unknown:Nt,nu:Rt,edge:m(Dt),chrome:m(At),ie:m(It),opera:m(Ot),firefox:m(Lt),safari:m(Et)},zt="Windows",Bt="iOS",Vt="Android",Ht="Linux",Ft="OSX",Wt="Solaris",Ut="FreeBSD",Gt="ChromeOS",jt=function(){return Xt({current:void 0,version:ft.unknown()})},Xt=function(t){var e=t.current,n=t.version,r=function(t){return function(){return e===t}};return{current:e,version:n,isWindows:r(zt),isiOS:r(Bt),isAndroid:r(Vt),isOSX:r(Ft),isLinux:r(Ht),isSolaris:r(Wt),isFreeBSD:r(Ut),isChromeOS:r(Gt)}},Yt={unknown:jt,nu:Xt,windows:m(zt),ios:m(Bt),android:m(Vt),linux:m(Ht),osx:m(Ft),solaris:m(Wt),freebsd:m(Ut),chromeos:m(Gt)},qt=function(t,e){var n=kt.browsers(),r=kt.oses(),o=gt.detectBrowser(n,t).fold(Pt.unknown,Pt.nu),i=gt.detectOs(r,t).fold(Yt.unknown,Yt.nu),a=it(i,o,t,e);return{browser:o,os:i,deviceType:a}},Zt={detect:qt},$t=function(t){return window.matchMedia(t).matches},Kt=ot(function(){return Zt.detect(navigator.userAgent,$t)}),Jt=function(){return Kt()},Qt=function(t,e,n){return 0!==(t.compareDocumentPosition(e)&n)},te=function(t,e){return Qt(t,e,Node.DOCUMENT_POSITION_CONTAINED_BY)},ee=8,ne=9,re=11,oe=1,ie=3,ae=function(t,e){var n=e||document,r=n.createElement("div");if(r.innerHTML=t,!r.hasChildNodes()||r.childNodes.length>1)throw console.error("HTML does not have a single root node",t),new Error("HTML must have a single root node");return le(r.childNodes[0])},ue=function(t,e){var n=e||document,r=n.createElement(t);return le(r)},se=function(t,e){var n=e||document,r=n.createTextNode(t);return le(r)},le=function(t){if(null===t||void 0===t)throw new Error("Node cannot be null or undefined");return{dom:t}},ce=function(t,e,n){return k.from(t.dom.elementFromPoint(e,n)).map(le)},fe={fromHtml:ae,fromTag:ue,fromText:se,fromDom:le,fromPoint:ce},de=function(t,e){var n=t.dom;if(n.nodeType!==oe)return!1;var r=n;if(void 0!==r.matches)return r.matches(e);if(void 0!==r.msMatchesSelector)return r.msMatchesSelector(e);if(void 0!==r.webkitMatchesSelector)return r.webkitMatchesSelector(e);if(void 0!==r.mozMatchesSelector)return r.mozMatchesSelector(e);throw new Error("Browser lacks native selectors")},he=function(t){return t.nodeType!==oe&&t.nodeType!==ne&&t.nodeType!==re||0===t.childElementCount},pe=function(t,e){var n=void 0===e?document:e.dom;return he(n)?[]:R(n.querySelectorAll(t),fe.fromDom)},ge=function(t,e){var n=void 0===e?document:e.dom;return he(n)?k.none():k.from(n.querySelector(t)).map(fe.fromDom)},me=function(t,e){return t.dom===e.dom},ve=function(t,e){var n=t.dom,r=e.dom;return n!==r&&n.contains(r)},ye=function(t,e){return te(t.dom,e.dom)},be=function(t,e){return Jt().browser.isIE()?ye(t,e):ve(t,e)},xe=de,we=Object.keys,_e=Object.hasOwnProperty,Se=function(t,e){for(var n=we(t),r=0,o=n.length;r<o;r++){var i=n[r],a=t[i];e(a,i)}},Ce=function(t,e){return Me(t,function(t,n){return{k:n,v:e(t,n)}})},Me=function(t,e){var n={};return Se(t,function(t,r){var o=e(t,r);n[o.k]=o.v}),n},Te=function(t){return function(e,n){t[n]=e}},ke=function(t,e,n,r){var o={};return Se(t,function(t,o){(e(t,o)?n:r)(t,o)}),o},De=function(t,e){var n={};return ke(t,e,Te(n),h),n},Ae=function(t,e){var n=[];return Se(t,function(t,r){n.push(e(t,r))}),n},Ie=function(t){return Ae(t,function(t){return t})},Oe=function(t){return we(t).length},Le=function(t,e){return Ee(t,e)?k.from(t[e]):k.none()},Ee=function(t,e){return _e.call(t,e)},Ne=function(t,e){return Ee(t,e)&&void 0!==t[e]&&null!==t[e]},Re=function(t){for(var e in t)if(_e.call(t,e))return!1;return!0},Pe=["tfoot","thead","tbody","colgroup"],ze=function(t){return L(Pe,t)},Be=function(t,e){return{rows:t,columns:e}},Ve=function(t,e){return{row:t,column:e}},He=function(t,e,n){return{element:t,rowspan:e,colspan:n}},Fe=function(t,e,n,r){return{element:t,rowspan:e,colspan:n,isNew:r}},We=function(t,e,n,r,o,i){return{element:t,rowspan:e,colspan:n,row:r,column:o,isLocked:i}},Ue=function(t,e,n){return{element:t,cells:e,section:n}},Ge=function(t,e,n){return{element:t,isNew:e,isLocked:n}},je=function(t,e,n,r){return{element:t,cells:e,section:n,isNew:r}},Xe=function(t,e){return{cells:t,section:e}},Ye=function(t,e){return{details:t,section:e}},qe=function(t,e,n,r){return{startRow:t,startCol:e,finishRow:n,finishCol:r}},Ze=function(t,e,n){return{element:t,colspan:e,column:n}},$e=("undefined"!==typeof window?window:Function("return this;")(),function(t){var e=t.dom.nodeName;return e.toLowerCase()}),Ke=function(t){return t.dom.nodeType},Je=function(t){return function(e){return Ke(e)===t}},Qe=function(t){return Ke(t)===ee||"#comment"===$e(t)},tn=Je(oe),en=Je(ie),nn=Je(ne),rn=Je(re),on=function(t){return function(e){return tn(e)&&$e(e)===t}},an=function(t){return fe.fromDom(t.dom.ownerDocument)},un=function(t){return nn(t)?t:an(t)},sn=function(t){return fe.fromDom(un(t).dom.defaultView)},ln=function(t){return k.from(t.dom.parentNode).map(fe.fromDom)},cn=function(t,e){var n=f(e)?e:w,r=t.dom,o=[];while(null!==r.parentNode&&void 0!==r.parentNode){var i=r.parentNode,a=fe.fromDom(i);if(o.push(a),!0===n(a))break;r=i}return o},fn=function(t){return k.from(t.dom.offsetParent).map(fe.fromDom)},dn=function(t){return k.from(t.dom.previousSibling).map(fe.fromDom)},hn=function(t){return k.from(t.dom.nextSibling).map(fe.fromDom)},pn=function(t){return R(t.dom.childNodes,fe.fromDom)},gn=function(t,e){var n=t.dom.childNodes;return k.from(n[e]).map(fe.fromDom)},mn=function(t){return gn(t,0)},vn=function(t){return rn(t)&&c(t.dom.host)},yn=f(Element.prototype.attachShadow)&&f(Node.prototype.getRootNode),bn=m(yn),xn=yn?function(t){return fe.fromDom(t.dom.getRootNode())}:un,wn=function(t){var e=xn(t);return vn(e)?k.some(e):k.none()},_n=function(t){return fe.fromDom(t.dom.host)},Sn=function(t){if(bn()&&c(t.target)){var e=fe.fromDom(t.target);if(tn(e)&&Cn(e)&&t.composed&&t.composedPath){var n=t.composedPath();if(n)return Q(n)}}return k.from(t.target)},Cn=function(t){return c(t.dom.shadowRoot)},Mn=function(t){var e=en(t)?t.dom.parentNode:t.dom;if(void 0===e||null===e||null===e.ownerDocument)return!1;var n=e.ownerDocument;return wn(fe.fromDom(e)).fold(function(){return n.body.contains(e)},g(Mn,_n))},Tn=function(){return kn(fe.fromDom(document))},kn=function(t){var e=t.dom.body;if(null===e||void 0===e)throw new Error("Body is not available yet");return fe.fromDom(e)},Dn=function(t,e,n){return V(cn(t,n),e)},An=function(t,e){return V(pn(t),e)},In=function(t,e){var n=[];return P(pn(t),function(t){e(t)&&(n=n.concat([t])),n=n.concat(In(t,e))}),n},On=function(t,e,n){return Dn(t,function(t){return de(t,e)},n)},Ln=function(t,e){return An(t,function(t){return de(t,e)})},En=function(t,e){return pe(e,t)};function Nn(t,e,n,r,o){return t(n,r)?k.some(n):f(o)&&o(n)?k.none():e(n,r,o)}var Rn=function(t,e,n){var r=t.dom,o=f(n)?n:w;while(r.parentNode){r=r.parentNode;var i=fe.fromDom(r);if(e(i))return k.some(i);if(o(i))break}return k.none()},Pn=function(t,e,n){var r=function(t,e){return e(t)};return Nn(r,Rn,t,e,n)},zn=function(t,e){var n=function(t){return e(fe.fromDom(t))},r=U(t.dom.childNodes,n);return r.map(fe.fromDom)},Bn=function(t,e){var n=function(t){for(var r=0;r<t.childNodes.length;r++){var o=fe.fromDom(t.childNodes[r]);if(e(o))return k.some(o);var i=n(t.childNodes[r]);if(i.isSome())return i}return k.none()};return n(t.dom)},Vn=function(t,e,n){return Rn(t,function(t){return de(t,e)},n)},Hn=function(t,e){return zn(t,function(t){return de(t,e)})},Fn=function(t,e){return ge(e,t)},Wn=function(t,e,n){var r=function(t,e){return de(t,e)};return Nn(r,Vn,t,e,n)},Un=function(t,e,n){if(!(o(n)||u(n)||d(n)))throw console.error("Invalid call to Attribute.set. Key ",e,":: Value ",n,":: Element ",t),new Error("Attribute value was not simple");t.setAttribute(e,n+"")},Gn=function(t,e,n){Un(t.dom,e,n)},jn=function(t,e){var n=t.dom;Se(e,function(t,e){Un(n,e,t)})},Xn=function(t,e){var n=t.dom.getAttribute(e);return null===n?void 0:n},Yn=function(t,e){return k.from(Xn(t,e))},qn=function(t,e){t.dom.removeAttribute(e)},Zn=function(t){return F(t.dom.attributes,function(t,e){return t[e.name]=e.value,t},{})},$n=function(t){return void 0!==t.style&&f(t.style.getPropertyValue)},Kn=function(t,e,n){if(!o(n))throw console.error("Invalid call to CSS.set. Property ",e,":: Value ",n,":: Element ",t),new Error("CSS value must be a string: "+n);$n(t)&&t.style.setProperty(e,n)},Jn=function(t,e){$n(t)&&t.style.removeProperty(e)},Qn=function(t,e,n){var r=t.dom;Kn(r,e,n)},tr=function(t,e){var n=t.dom;Se(e,function(t,e){Kn(n,e,t)})},er=function(t,e){var n=t.dom,r=window.getComputedStyle(n),o=r.getPropertyValue(e);return""!==o||Mn(t)?o:nr(n,e)},nr=function(t,e){return $n(t)?t.style.getPropertyValue(e):""},rr=function(t,e){var n=t.dom,r=nr(n,e);return k.from(r).filter(function(t){return t.length>0})},or=function(t,e){var n=t.dom;Jn(n,e),Yn(t,"style").map(wt).is("")&&qn(t,"style")},ir=function(t,e){var n=t.dom,r=e.dom;$n(n)&&$n(r)&&(r.style.cssText=n.style.cssText)},ar=function(t,e,n){return void 0===n&&(n=0),Yn(t,e).map(function(t){return parseInt(t,10)}).getOr(n)},ur=function(t,e){return ar(t,e,1)},sr=function(t){return ur(t,"colspan")>1},lr=function(t){return ur(t,"rowspan")>1},cr=function(t,e){return parseInt(er(t,e),10)},fr=m(10),dr=m(10),hr=function(t,e){return pr(t,e,_)},pr=function(t,e,n){return X(pn(t),function(t){return de(t,e)?n(t)?[t]:[]:pr(t,e,n)})},gr=function(t,e,n){if(void 0===n&&(n=w),n(e))return k.none();if(L(t,$e(e)))return k.some(e);var r=function(t){return de(t,"table")||n(t)};return Vn(e,t.join(","),r)},mr=function(t,e){return gr(["td","th"],t,e)},vr=function(t){return hr(t,"th,td")},yr=function(t){return de(t,"colgroup")?Ln(t,"col"):X(wr(t),function(t){return Ln(t,"col")})},br=function(t,e){return Wn(t,"table",e)},xr=function(t){return hr(t,"tr")},wr=function(t){return br(t).fold(m([]),function(t){return Ln(t,"colgroup")})},_r=function(t,e){return R(t,function(t){if("colgroup"===$e(t)){var n=R(yr(t),function(t){var e=ar(t,"span",1);return He(t,1,e)});return Ue(t,n,"colgroup")}n=R(vr(t),function(t){var e=ar(t,"rowspan",1),n=ar(t,"colspan",1);return He(t,e,n)});return Ue(t,n,e(t))})},Sr=function(t){return ln(t).map(function(t){var e=$e(t);return ze(e)?e:"tbody"}).getOr("tbody")},Cr=function(t){var e=xr(t),n=wr(t),r=rt(n,e);return _r(r,Sr)},Mr=function(t,e){return _r(t,function(){return e})},Tr=function(t,e,n){var r=t.cells,o=r.slice(0,e),i=r.slice(e),a=o.concat(n).concat(i);return Ar(t,a)},kr=function(t,e,n){return Tr(t,e,[n])},Dr=function(t,e,n){var r=t.cells;r[e]=n},Ar=function(t,e){return Xe(e,t.section)},Ir=function(t,e){var n=t.cells,r=R(n,e);return Xe(r,t.section)},Or=function(t,e){return t.cells[e]},Lr=function(t,e){return Or(t,e).element},Er=function(t){return t.cells.length},Nr=function(t){var e=B(t,function(t){return"colgroup"===t.section});return{rows:e.fail,cols:e.pass}},Rr="data-snooker-locked-cols",Pr=function(t){return Yn(t,Rr).bind(function(t){return k.from(t.match(/\d+/g))}).map(function(t){return Z(t,_)})},zr=function(t){var e=F(Nr(t).rows,function(t,e){return P(e.cells,function(e,n){e.isLocked&&(t[n]=!0)}),t},{}),n=Ae(e,function(t,e){return parseInt(e,10)});return K(n)},Br=function(t,e){return t+","+e},Vr=function(t,e,n){var r=t.access[Br(e,n)];return void 0!==r?k.some(r):k.none()},Hr=function(t,e,n){var r=Fr(t,function(t){return n(e,t.element)});return r.length>0?k.some(r[0]):k.none()},Fr=function(t,e){var n=X(t.all,function(t){return t.cells});return V(n,e)},Wr=function(t){var e={},n=0;return P(t.cells,function(t){var r=t.colspan;N(r,function(o){var i=n+o;e[i]=Ze(t.element,r,i)}),n+=r}),e},Ur=function(t){var e={},n=[],r={},o=Q(t).map(function(t){return t.element}).bind(br),i=o.bind(Pr).getOr({}),a=0,u=0,s=0;P(t,function(t){if("colgroup"===t.section)r=Wr(t);else{var o=[];P(t.cells,function(t){var n=0;while(void 0!==e[Br(s,n)])n++;for(var r=Ne(i,n.toString()),a=We(t.element,t.rowspan,t.colspan,s,n,r),l=0;l<t.colspan;l++)for(var c=0;c<t.rowspan;c++){var f=s+c,d=n+l,h=Br(f,d);e[h]=a,u=Math.max(u,d+1)}o.push(a)}),a++,n.push(Ue(t.element,o,t.section)),s++}});var l=Be(a,u);return{grid:l,access:e,all:n,columns:r}},Gr=function(t){var e=Cr(t);return Ur(e)},jr=function(t){return X(t.all,function(t){return t.cells})},Xr=function(t){return Ie(t.columns)},Yr=function(t){return we(t.columns).length>0},qr=function(t,e){return k.from(t.columns[e])},Zr={fromTable:Gr,generate:Ur,getAt:Vr,findItem:Hr,filterItems:Fr,justCells:jr,justColumns:Xr,hasColumns:Yr,getColumnAt:qr},$r=function(t,e){var n=e.column,r=e.column+e.colspan-1,o=e.row,i=e.row+e.rowspan-1;return n<=t.finishCol&&r>=t.startCol&&o<=t.finishRow&&i>=t.startRow},Kr=function(t,e){return e.column>=t.startCol&&e.column+e.colspan-1<=t.finishCol&&e.row>=t.startRow&&e.row+e.rowspan-1<=t.finishRow},Jr=function(t,e){for(var n=!0,r=y(Kr,e),o=e.startRow;o<=e.finishRow;o++)for(var i=e.startCol;i<=e.finishCol;i++)n=n&&Zr.getAt(t,o,i).exists(r);return n?k.some(e):k.none()},Qr=function(t,e){return qe(Math.min(t.row,e.row),Math.min(t.column,e.column),Math.max(t.row+t.rowspan-1,e.row+e.rowspan-1),Math.max(t.column+t.colspan-1,e.column+e.colspan-1))},to=function(t,e,n){var r=Zr.findItem(t,e,me),o=Zr.findItem(t,n,me);return r.bind(function(t){return o.map(function(e){return Qr(t,e)})})},eo=function(t,e,n){return to(t,e,n).bind(function(e){return Jr(t,e)})},no=function(t,e,n,r){return Zr.findItem(t,e,me).bind(function(e){var o=n>0?e.row+e.rowspan-1:e.row,i=r>0?e.column+e.colspan-1:e.column,a=Zr.getAt(t,o+n,i+r);return a.map(function(t){return t.element})})},ro=function(t,e,n){return to(t,e,n).map(function(e){var n=Zr.filterItems(t,y($r,e));return R(n,function(t){return t.element})})},oo=function(t,e){var n=function(t,e){return be(e,t)};return Zr.findItem(t,e,n).map(function(t){return t.element})},io=function(t,e,n){return br(t).bind(function(r){var o=lo(r);return no(o,t,e,n)})},ao=function(t,e,n){var r=lo(t);return ro(r,e,n)},uo=function(t,e,n,r,o){var i=lo(t),a=me(t,n)?k.some(e):oo(i,e),u=me(t,o)?k.some(r):oo(i,r);return a.bind(function(t){return u.bind(function(e){return ro(i,t,e)})})},so=function(t,e,n){var r=lo(t);return eo(r,e,n)},lo=Zr.fromTable,co=function(t,e){var n=ln(t);n.each(function(n){n.dom.insertBefore(e.dom,t.dom)})},fo=function(t,e){var n=hn(t);n.fold(function(){var n=ln(t);n.each(function(t){po(t,e)})},function(t){co(t,e)})},ho=function(t,e){var n=mn(t);n.fold(function(){po(t,e)},function(n){t.dom.insertBefore(e.dom,n.dom)})},po=function(t,e){t.dom.appendChild(e.dom)},go=function(t,e){co(t,e),po(e,t)},mo=function(t,e){P(e,function(e){co(t,e)})},vo=function(t,e){P(e,function(n,r){var o=0===r?t:e[r-1];fo(o,n)})},yo=function(t,e){P(e,function(e){po(t,e)})},bo=function(t){t.dom.textContent="",P(pn(t),function(t){xo(t)})},xo=function(t){var e=t.dom;null!==e.parentNode&&e.parentNode.removeChild(e)},wo=function(t){var e=pn(t);e.length>0&&mo(t,e),xo(t)},_o=function(t,e){var n=function(n){if(!t(n))throw new Error("Can only get "+e+" value of a "+e+" node");return r(n).getOr("")},r=function(e){return t(e)?k.from(e.dom.nodeValue):k.none()},o=function(n,r){if(!t(n))throw new Error("Can only set raw "+e+" value of a "+e+" node");n.dom.nodeValue=r};return{get:n,getOption:r,set:o}},So=_o(en,"text"),Co=function(t){return So.get(t)},Mo=function(t){return So.getOption(t)},To=function(t,e){return So.set(t,e)},ko=["body","p","div","article","aside","figcaption","figure","footer","header","nav","section","ol","ul","li","table","thead","tbody","tfoot","caption","tr","td","th","h1","h2","h3","h4","h5","h6","blockquote","pre","address"];function Do(){var t=function(t){return fe.fromDom(t.dom.cloneNode(!1))},e=function(t){return un(t).dom},n=function(t){return!!tn(t)&&("body"===$e(t)||L(ko,$e(t)))},r=function(t){return!!tn(t)&&L(["br","img","hr","input"],$e(t))},o=function(t){return tn(t)&&"false"===Xn(t,"contenteditable")},i=function(t,e){return t.dom.compareDocumentPosition(e.dom)},a=function(t,e){var n=Zn(t);jn(e,n)},u=function(t){var e=$e(t);return L(["script","noscript","iframe","noframes","noembed","title","style","textarea","xmp"],e)};return{up:m({selector:Vn,closest:Wn,predicate:Rn,all:cn}),down:m({selector:En,predicate:In}),styles:m({get:er,getRaw:rr,set:Qn,remove:or}),attrs:m({get:Xn,set:Gn,remove:qn,copyTo:a}),insert:m({before:co,after:fo,afterAll:vo,append:po,appendAll:yo,prepend:ho,wrap:go}),remove:m({unwrap:wo,remove:xo}),create:m({nu:fe.fromTag,clone:t,text:fe.fromText}),query:m({comparePosition:i,prevSibling:dn,nextSibling:hn}),property:m({children:pn,name:$e,parent:ln,document:e,isText:en,isComment:Qe,isElement:tn,isSpecial:u,getText:Co,setText:To,isBoundary:n,isEmptyTag:r,isNonEditable:o}),eq:me,is:xe}}var Ao=function(t,e,n,r){var o=n[0],i=n.slice(1);return r(t,e,o,i)},Io=function(t,e,n){return n.length>0?Ao(t,e,n,Oo):k.none()},Oo=function(t,e,n,r){var o=e(t,n);return H(r,function(n,r){var o=e(t,r);return Lo(t,n,o)},o)},Lo=function(t,e,n){return e.bind(function(e){return n.filter(y(t.eq,e))})},Eo=function(t,e){return y(t.eq,e)},No=function(t,e,n,r){void 0===r&&(r=w);var o=[e].concat(t.up().all(e)),i=[n].concat(t.up().all(n)),a=function(t){var e=G(t,r);return e.fold(function(){return t},function(e){return t.slice(0,e+1)})},u=a(o),s=a(i),l=U(u,function(e){return E(s,Eo(t,e))});return{firstpath:u,secondpath:s,shared:l}},Ro=Io,Po=No,zo=Do(),Bo=function(t,e){return Ro(zo,function(e,n){return t(n)},e)},Vo=function(t,e,n){return Po(zo,t,e,n)},Ho=function(t){return Vn(t,"table")},Fo=function(t,e,n){var r=function(t){return function(e){return void 0!==n&&n(e)||me(e,t)}};return me(t,e)?k.some({boxes:k.some([t]),start:t,finish:e}):Ho(t).bind(function(o){return Ho(e).bind(function(i){if(me(o,i))return k.some({boxes:ao(o,t,e),start:t,finish:e});if(be(o,i)){var a=On(e,"td,th",r(o)),u=a.length>0?a[a.length-1]:e;return k.some({boxes:uo(o,t,o,e,i),start:t,finish:u})}if(be(i,o)){a=On(t,"td,th",r(i));var s=a.length>0?a[a.length-1]:t;return k.some({boxes:uo(i,t,o,e,i),start:t,finish:s})}return Vo(t,e).shared.bind(function(a){return Wn(a,"table",n).bind(function(n){var a=On(e,"td,th",r(n)),u=a.length>0?a[a.length-1]:e,s=On(t,"td,th",r(n)),l=s.length>0?s[s.length-1]:t;return k.some({boxes:uo(n,t,o,e,i),start:l,finish:u})})})})})},Wo=function(t,e){var n=En(t,e);return n.length>0?k.some(n):k.none()},Uo=function(t,e){return U(t,function(t){return de(t,e)})},Go=function(t,e,n){return Fn(t,e).bind(function(e){return Fn(t,n).bind(function(t){return Bo(Ho,[e,t]).map(function(n){return{first:e,last:t,table:n}})})})},jo=function(t,e){return Vn(t,"table").bind(function(n){return Fn(n,e).bind(function(e){return Fo(e,t).bind(function(t){return t.boxes.map(function(e){return{boxes:e,start:t.start,finish:t.finish}})})})})},Xo=function(t,e,n,r,o){return Uo(t,o).bind(function(t){return io(t,e,n).bind(function(t){return jo(t,r)})})},Yo=function(t,e){return Wo(t,e)},qo=function(t,e,n){return Go(t,e,n).bind(function(e){var n=function(e){return me(t,e)},r="thead,tfoot,tbody,table",o=Vn(e.first,r,n),i=Vn(e.last,r,n);return o.bind(function(t){return i.bind(function(n){return me(t,n)?so(e.table,e.first,e.last):k.none()})})})},Zo=function(t){if(!a(t))throw new Error("cases must be an array");if(0===t.length)throw new Error("there must be at least one case");var e=[],n={};return P(t,function(r,o){var i=we(r);if(1!==i.length)throw new Error("one and only one name per case");var u=i[0],s=r[u];if(void 0!==n[u])throw new Error("duplicate key detected:"+u);if("cata"===u)throw new Error("cannot have a case named cata (sorry)");if(!a(s))throw new Error("case arguments must be an array");e.push(u),n[u]=function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];var i=n.length;if(i!==s.length)throw new Error("Wrong number of arguments to case "+u+". Expected "+s.length+" ("+s+"), got "+i);var a=function(t){var r=we(t);if(e.length!==r.length)throw new Error("Wrong number of arguments to match. Expected: "+e.join(",")+"\nActual: "+r.join(","));var o=Y(e,function(t){return L(r,t)});if(!o)throw new Error("Not all branches were specified when using match. Specified: "+r.join(", ")+"\nRequired: "+e.join(", "));return t[u].apply(null,n)};return{fold:function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];if(e.length!==t.length)throw new Error("Wrong number of arguments to fold. Expected "+t.length+", got "+e.length);var i=e[o];return i.apply(null,n)},match:a,log:function(t){console.log(t,{constructors:e,constructor:u,params:n})}}}}),n},$o={generate:Zo},Ko=$o.generate([{none:[]},{multiple:["elements"]},{single:["element"]}]),Jo=function(t,e,n,r){return t.fold(e,n,r)},Qo=Ko.none,ti=Ko.multiple,ei=Ko.single,ni=function(t,e,n){var r=function(){return Yo(t(),n).fold(function(){return e().map(ei).getOrThunk(Qo)},function(t){return ti(t)})};return{get:r}},ri=tinymce.util.Tools.resolve("tinymce.PluginManager"),oi=function(t,e){return fe.fromDom(t.dom.cloneNode(e))},ii=function(t){return oi(t,!1)},ai=function(t){return oi(t,!0)},ui=function(t,e){var n=fe.fromTag(e),r=Zn(t);return jn(n,r),n},si=function(t,e){var n=ui(t,e),r=pn(ai(t));return yo(n,r),n},li=function(t){for(var e=[],n=function(t){e.push(t)},r=0;r<t.length;r++)t[r].each(n);return e},ci=function(t,e,n){return t.isSome()&&e.isSome()?k.some(n(t.getOrDie(),e.getOrDie())):k.none()},fi=function(t,e){return void 0!==t&&null!==t?e(t):k.none()},di=function(t,e){return t?k.some(e):k.none()},hi=function(t,e){var n=function(e,n){if(!d(n)&&!n.match(/^[0-9]+$/))throw new Error(t+".set accepts only positive integer values. Value was "+n);var r=e.dom;$n(r)&&(r.style[t]=n+"px")},r=function(n){var r=e(n);if(r<=0||null===r){var o=er(n,t);return parseFloat(o)||0}return r},o=r,i=function(t,e){return F(e,function(e,n){var r=er(t,n),o=void 0===r?0:parseInt(r,10);return isNaN(o)?e:e+o},0)},a=function(t,e,n){var r=i(t,n),o=e>r?e-r:0;return o};return{set:n,get:r,getOuter:o,aggregate:i,max:a}},pi=hi("width",function(t){return t.dom.offsetWidth}),gi=function(t){return pi.get(t)},mi=function(t){return pi.getOuter(t)},vi=function(t,e){void 0===e&&(e=_);var n=t.grid,r=N(n.columns,v),o=N(n.rows,v);return R(r,function(n){var r=function(){return X(o,function(e){return Zr.getAt(t,e,n).filter(function(t){return t.column===n}).toArray()})},i=function(t){return 1===t.colspan&&e(t.element)},a=function(){return Zr.getAt(t,0,n)};return yi(r,i,a)})},yi=function(t,e,n){var r=t(),o=U(r,e),i=o.orThunk(function(){return k.from(r[0]).orThunk(n)});return i.map(function(t){return t.element})},bi=function(t){var e=t.grid,n=N(e.rows,v),r=N(e.columns,v);return R(n,function(e){var n=function(){return X(r,function(n){return Zr.getAt(t,e,n).filter(function(t){return t.row===e}).fold(m([]),function(t){return[t]})})},o=function(t){return 1===t.rowspan},i=function(){return Zr.getAt(t,e,0)};return yi(n,o,i)})},xi=function(t,e){if(e<0||e>=t.length-1)return k.none();var n=t[e].fold(function(){var n=q(t.slice(0,e));return et(n,function(t,e){return t.map(function(t){return{value:t,delta:e+1}})})},function(t){return k.some({value:t,delta:0})}),r=t[e+1].fold(function(){var n=t.slice(e+1);return et(n,function(t,e){return t.map(function(t){return{value:t,delta:e+1}})})},function(t){return k.some({value:t,delta:1})});return n.bind(function(t){return r.map(function(e){var n=e.delta+t.delta;return Math.abs(e.value-t.value)/n})})},wi=function(t,e){return function(n){return"rtl"===_i(n)?e:t}},_i=function(t){return"rtl"===er(t,"direction")?"rtl":"ltr"},Si=hi("height",function(t){var e=t.dom;return Mn(t)?e.getBoundingClientRect().height:e.offsetHeight}),Ci=function(t){return Si.get(t)},Mi=function(t){return Si.getOuter(t)},Ti=function(t,e){var n=function(n,r){return Ti(t+n,e+r)};return{left:t,top:e,translate:n}},ki=Ti,Di=function(t){var e=t.getBoundingClientRect();return ki(e.left,e.top)},Ai=function(t,e){return void 0!==t?t:void 0!==e?e:0},Ii=function(t){var e=t.dom.ownerDocument,n=e.body,r=e.defaultView,o=e.documentElement;if(n===t.dom)return ki(n.offsetLeft,n.offsetTop);var i=Ai(null===r||void 0===r?void 0:r.pageYOffset,o.scrollTop),a=Ai(null===r||void 0===r?void 0:r.pageXOffset,o.scrollLeft),u=Ai(o.clientTop,n.clientTop),s=Ai(o.clientLeft,n.clientLeft);return Oi(t).translate(a-s,i-u)},Oi=function(t){var e=t.dom,n=e.ownerDocument,r=n.body;return r===e?ki(r.offsetLeft,r.offsetTop):Mn(t)?Di(e):ki(0,0)},Li=function(t,e){return{row:t,y:e}},Ei=function(t,e){return{col:t,x:e}},Ni=function(t){var e=Ii(t);return e.left+mi(t)},Ri=function(t){return Ii(t).left},Pi=function(t,e){return Ei(t,Ri(e))},zi=function(t,e){return Ei(t,Ni(e))},Bi=function(t){return Ii(t).top},Vi=function(t,e){return Li(t,Bi(e))},Hi=function(t,e){return Li(t,Bi(e)+Mi(e))},Fi=function(t,e,n){if(0===n.length)return[];var r=R(n.slice(1),function(e,n){return e.map(function(e){return t(n,e)})}),o=n[n.length-1].map(function(t){return e(n.length-1,t)});return r.concat([o])},Wi=function(t){return-t},Ui={delta:v,positions:function(t){return Fi(Vi,Hi,t)},edge:Bi},Gi={delta:v,edge:Ri,positions:function(t){return Fi(Pi,zi,t)}},ji={delta:Wi,edge:Ni,positions:function(t){return Fi(zi,Pi,t)}},Xi=wi(Gi,ji),Yi={delta:function(t,e){return Xi(e).delta(t,e)},positions:function(t,e){return Xi(e).positions(t,e)},edge:function(t){return Xi(t).edge(t)}},qi={unsupportedLength:["em","ex","cap","ch","ic","rem","lh","rlh","vw","vh","vi","vb","vmin","vmax","cm","mm","Q","in","pc","pt","px"],fixed:["px","pt"],relative:["%"],empty:[""]},Zi=function(){var t="[0-9]+",e="[+-]?"+t,n="[eE]"+e,r="\\.",o=function(t){return"(?:"+t+")?"},i=["Infinity",t+r+o(t)+o(n),r+t+o(n),t+o(n)].join("|"),a="[+-]?(?:"+i+")";return new RegExp("^("+a+")(.*)$")}(),$i=function(t,e){return E(e,function(e){return E(qi[e],function(e){return t===e})})},Ki=function(t,e){var n=k.from(Zi.exec(t));return n.bind(function(t){var n=Number(t[1]),r=t[2];return $i(r,e)?k.some({value:n,unit:r}):k.none()})},Ji=function(){var t=Jt().browser;return t.isIE()||t.isEdge()},Qi=function(t,e){var n=parseFloat(t);return isNaN(n)?e:n},ta=function(t,e,n){return Qi(er(t,e),n)},ea=function(t){var e=t.dom.getBoundingClientRect().height,n=er(t,"box-sizing");if("border-box"===n)return e;var r=ta(t,"padding-top",0),o=ta(t,"padding-bottom",0),i=ta(t,"border-top-width",0),a=ta(t,"border-bottom-width",0),u=i+a;return e-r-o-u},na=function(t){var e=t.dom.getBoundingClientRect().width,n=er(t,"box-sizing");if("border-box"===n)return e;var r=ta(t,"padding-left",0),o=ta(t,"padding-right",0),i=ta(t,"border-left-width",0),a=ta(t,"border-right-width",0),u=i+a;return e-r-o-u},ra=function(t){return Ji()?ea(t):ta(t,"height",Ci(t))},oa=function(t){return Ji()?na(t):ta(t,"width",gi(t))},ia=/(\d+(\.\d+)?)%/,aa=/(\d+(\.\d+)?)px|em/,ua=function(t,e){var n=fn(t).getOr(kn(an(t)));return e(t)/e(n)*100},sa=function(t,e){Qn(t,"width",e+"px")},la=function(t,e){Qn(t,"width",e+"%")},ca=function(t,e){Qn(t,"height",e+"px")},fa=function(t){return rr(t,"height").getOrThunk(function(){return ra(t)+"px"})},da=function(t,e,n,r){var o=br(t).map(function(t){var r=n(t);return Math.floor(e/100*r)}).getOr(e);return r(t,o),o},ha=function(t,e,n,r){var o=parseInt(t,10);return bt(t,"%")&&"table"!==$e(e)?da(e,o,n,r):o},pa=function(t){var e=fa(t);return e?ha(e,t,Ci,ca):Ci(t)},ga=function(t,e,n){var r=n(t),o=ur(t,e);return r/o},ma=function(t){var e=rr(t,"width");return e.fold(function(){return k.from(Xn(t,"width"))},function(t){return k.some(t)})},va=function(t,e){return t/e.pixelWidth()*100},ya=function(t,e,n){var r=ia.exec(e);if(null!==r)return parseFloat(r[1]);var o=oa(t);return va(o,n)},ba=function(t,e){var n=ma(t);return n.fold(function(){var n=gi(t);return va(n,e)},function(n){return ya(t,n,e)})},xa=function(t,e){return t/100*e.pixelWidth()},wa=function(t,e,n){var r=aa.exec(e);if(null!==r)return parseInt(r[1],10);var o=ia.exec(e);if(null!==o){var i=parseFloat(o[1]);return xa(i,n)}return oa(t)},_a=function(t,e){var n=ma(t);return n.fold(function(){return oa(t)},function(n){return wa(t,n,e)})},Sa=function(t){return ga(t,"rowspan",pa)},Ca=function(t){var e=ma(t);return e.bind(function(t){return Ki(t,["fixed","relative","empty"])})},Ma=function(t,e,n){Qn(t,"width",e+n)},Ta=function(t){return gi(t)+"px"},ka=function(t){return ua(t,gi)+"%"},Da=function(t){return ma(t).exists(function(t){return ia.test(t)})},Aa=function(t){return ma(t).exists(function(t){return aa.test(t)})},Ia=function(t){return ma(t).isNone()},Oa=m(ia),La=m(aa),Ea=on("col"),Na=function(t,e,n){return rr(t,e).fold(function(){return n(t)+"px"},function(t){return t})},Ra=function(t,e){var n=function(t){return Ea(t)?gi(t):_a(t,e)};return Na(t,"width",n)},Pa=function(t){return Na(t,"height",Sa)},za=function(t){return R(Zr.justColumns(t),function(t){return k.from(t.element)})},Ba=function(t,e){return rr(t,e).isSome()},Va=function(t){return!Ea(t)||Ba(t,"width")},Ha=function(t,e,n,r,o,i){return t.filter(r).fold(function(){return i(xi(n,e))},function(t){return o(t)})},Fa=function(t,e,n,r,o){var i=vi(t,function(t){return Ba(t,"width")}),a=Zr.hasColumns(t)?za(t):i,u=[k.some(Yi.edge(e))].concat(R(Yi.positions(i,e),function(t){return t.map(function(t){return t.x})})),s=b(sr);return R(a,function(t,e){return Ha(t,e,u,s,function(t){if(Va(t))return n(t,o);var a=fi(i[e],v);return Ha(a,e,u,s,function(t){return r(k.some(gi(t)))},r)},r)})},Wa=function(t){return t.map(function(t){return t+"px"}).getOr("")},Ua=function(t,e,n){return Fa(t,e,Ra,Wa,n)},Ga=function(t,e,n){return Fa(t,e,ba,function(t){return t.fold(function(){return n.minCellWidth()},function(t){return t/n.pixelWidth()*100})},n)},ja=function(t,e,n){return Fa(t,e,_a,function(t){return t.getOrThunk(n.minCellWidth)},n)},Xa=function(t,e,n,r,o){var i=bi(t),a=[k.some(n.edge(e))].concat(R(n.positions(i,e),function(t){return t.map(function(t){return t.y})}));return R(i,function(t,e){return Ha(t,e,a,b(lr),r,o)})},Ya=function(t,e,n){return Xa(t,e,n,Sa,function(t){return t.getOrThunk(dr)})},qa=function(t,e,n){return Xa(t,e,n,Pa,Wa)},Za=function(t){var e=t,n=function(){return e},r=function(t){e=t};return{get:n,set:r}},$a=function(t){var e=function(){return gi(t)},n=m(0),r=function(e,n){return ja(e,t,n)};return{width:e,pixelWidth:e,getWidths:r,getCellDelta:n,singleColumnWidth:m([0]),minCellWidth:n,setElementWidth:h,adjustTableWidth:h,isRelative:!0,label:"none"}},Ka=function(t,e){var n=Za(parseFloat(t)),r=Za(gi(e)),o=function(t){return t/r.get()*100},i=function(t,e){return[100-t]},a=function(){return fr()/r.get()*100},u=function(t){var o=n.get(),i=t/100*o,a=o+i;la(e,a),n.set(a),r.set(gi(e))},s=function(t,n){return Ga(t,e,n)};return{width:n.get,pixelWidth:r.get,getWidths:s,getCellDelta:o,singleColumnWidth:i,minCellWidth:a,setElementWidth:la,adjustTableWidth:u,isRelative:!0,label:"percent"}},Ja=function(t,e){var n=Za(t),r=n.get,o=v,i=function(t,e){var n=Math.max(fr(),t+e);return[n-t]},a=function(t){var o=r()+t;sa(e,o),n.set(o)},u=function(t,n){return ja(t,e,n)};return{width:r,pixelWidth:r,getWidths:u,getCellDelta:o,singleColumnWidth:i,minCellWidth:fr,setElementWidth:sa,adjustTableWidth:a,isRelative:!1,label:"pixel"}},Qa=function(t,e){var n=Oa().exec(e);if(null!==n)return Ka(n[1],t);var r=La().exec(e);if(null!==r){var o=parseInt(r[1],10);return Ja(o,t)}var i=gi(t);return Ja(i,t)},tu=function(t){var e=ma(t);return e.fold(function(){return $a(t)},function(e){return Qa(t,e)})},eu={getTableSize:tu,pixelSize:Ja,percentageSize:Ka,noneSize:$a},nu=function(t,e,n,r,o,i){return{minRow:t,minCol:e,maxRow:n,maxCol:r,allCells:o,selectedCells:i}},ru=function(t,e){var n=t.grid.columns,r=t.grid.rows,o=r,i=n,a=0,u=0,s=[],l=[];return Se(t.access,function(t){if(s.push(t),e(t)){l.push(t);var n=t.row,r=n+t.rowspan-1,c=t.column,f=c+t.colspan-1;n<o?o=n:r>a&&(a=r),c<i?i=c:f>u&&(u=f)}}),nu(o,i,a,u,s,l)},ou=function(t,e,n){var r=t[n].element,o=fe.fromTag("td");po(o,fe.fromTag("br"));var i=e?po:ho;i(r,o)},iu=function(t,e,n,r){for(var o=e.grid.columns,i=e.grid.rows,a=0;a<i;a++)for(var u=!1,s=0;s<o;s++)if(!(a<n.minRow||a>n.maxRow||s<n.minCol||s>n.maxCol)){var l=Zr.getAt(e,a,s).filter(r).isNone();l?ou(t,u,a):u=!0}},au=function(t,e,n,r){Se(n.columns,function(t){(t.column<e.minCol||t.column>e.maxCol)&&xo(t.element)});var o=V(hr(t,"tr"),function(t){return 0===t.dom.childElementCount});P(o,xo),e.minCol!==e.maxCol&&e.minRow!==e.maxRow||P(hr(t,"th,td"),function(t){qn(t,"rowspan"),qn(t,"colspan")}),qn(t,Rr),qn(t,"data-snooker-col-series");var i=eu.getTableSize(t);i.adjustTableWidth(r)},uu=function(t,e,n,r){if(0===r.minCol&&e.grid.columns===r.maxCol+1)return 0;var o=ja(e,t,n),i=F(o,function(t,e){return t+e},0),a=F(o.slice(r.minCol,r.maxCol+1),function(t,e){return t+e},0),u=a/i*n.pixelWidth(),s=u-n.pixelWidth();return n.getCellDelta(s)},su=function(t,e){var n=function(t){return de(t.element,e)},r=ai(t),o=Cr(r),i=eu.getTableSize(t),a=Zr.generate(o),u=ru(a,n),s="th:not("+e+"),td:not("+e+")",l=pr(r,"th,td",function(t){return de(t,s)});P(l,xo),iu(o,a,u,n);var c=Zr.fromTable(t),f=uu(t,c,i,u);return au(r,u,a,f),r},lu=" ",cu=function(t){return"img"===$e(t)?1:Mo(t).fold(function(){return pn(t).length},function(t){return t.length})},fu=function(t){return Mo(t).filter(function(t){return 0!==t.trim().length||t.indexOf(lu)>-1}).isSome()},du=["img","br"],hu=function(t){var e=fu(t);return e||L(du,$e(t))},pu=function(t){return Bn(t,hu)},gu=function(t){return mu(t,hu)},mu=function(t,e){var n=function(t){for(var r=pn(t),o=r.length-1;o>=0;o--){var i=r[o];if(e(i))return k.some(i);var a=n(i);if(a.isSome())return a}return k.none()};return n(t)},vu={scope:["row","col"]},yu=function(){var t=fe.fromTag("td");return po(t,fe.fromTag("br")),t},bu=function(){return fe.fromTag("col")},xu=function(){return fe.fromTag("colgroup")},wu=function(t,e,n){var r=si(t,e);return Se(n,function(t,e){null===t?qn(r,e):Gn(r,e,t)}),r},_u=function(t){return t},Su=function(t){return function(){return fe.fromTag("tr",t.dom)}},Cu=function(t,e,n){var r=pu(t);return r.map(function(r){var o=n.join(","),i=On(r,o,function(e){return me(e,t)});return H(i,function(t,e){var n=ii(e);return qn(n,"contenteditable"),po(t,n),n},e)}).getOr(e)},Mu=function(t,e){Se(vu,function(n,r){return Yn(t,r).filter(function(t){return L(n,t)}).each(function(t){return Gn(e,r,t)})})},Tu=function(t,e,n){var r=function(t,e){ir(t.element,e),or(e,"height"),1!==t.colspan&&or(e,"width")},o=function(e){var o=an(e.element),i=fe.fromTag($e(e.element),o.dom),a=n.getOr(["strong","em","b","i","span","font","h1","h2","h3","h4","h5","h6","p","div"]),u=a.length>0?Cu(e.element,i,a):i;return po(u,fe.fromTag("br")),r(e,i),Mu(e.element,i),t(e.element,i),i},i=function(e){var n=an(e.element),o=fe.fromTag($e(e.element),n.dom);return r(e,o),t(e.element,o),o};return{col:i,colgroup:xu,row:Su(e),cell:o,replace:wu,gap:yu}},ku=function(t){return{col:bu,colgroup:xu,row:Su(t),cell:yu,replace:_u,gap:yu}},Du=function(t,e){var n=e||document,r=n.createElement("div");return r.innerHTML=t,pn(fe.fromDom(r))},Au=function(t){return R(t,fe.fromDom)},Iu=function(t){return t.nodeName.toLowerCase()},Ou=function(t){return fe.fromDom(t.getBody())},Lu=function(t){return t.getBoundingClientRect().width},Eu=function(t){return t.getBoundingClientRect().height},Nu=function(t){return function(e){return me(e,Ou(t))}},Ru=function(t){return t?t.replace(/px$/,""):""},Pu=function(t){return/^\d+(\.\d+)?$/.test(t)?t+"px":t},zu=function(t){qn(t,"data-mce-style");var e=function(t){return qn(t,"data-mce-style")};P(vr(t),e),P(yr(t),e)},Bu=function(t,e){var n=t.dom.getStyle(e,"width")||t.dom.getAttrib(e,"width");return k.from(n).filter(_t)},Vu=function(t){return/^(\d+(\.\d+)?)%$/.test(t)},Hu=function(t){return/^(\d+(\.\d+)?)px$/.test(t)},Fu=function(t){return fe.fromDom(t.selection.getStart())},Wu=function(t){return Jo(t.get(),m([]),v,$)},Uu=function(t){var e=function(t,e){return Yn(t,e).exists(function(t){return parseInt(t,10)>1})},n=function(t){return e(t,"rowspan")||e(t,"colspan")},r=Wu(t);return r.length>0&&Y(r,n)?k.some(r):k.none()},Gu=function(t,e,n){return Jo(e.get(),k.none,function(e){return e.length<=1?k.none():qo(t,n.firstSelectedSelector,n.lastSelectedSelector).map(function(t){return{bounds:t,cells:e}})},k.none)},ju="data-mce-selected",Xu="td["+ju+"],th["+ju+"]",Yu="["+ju+"]",qu="data-mce-first-selected",Zu="td["+qu+"],th["+qu+"]",$u="data-mce-last-selected",Ku="td["+$u+"],th["+$u+"]",Ju=Yu,Qu={selected:ju,selectedSelector:Xu,firstSelected:qu,firstSelectedSelector:Zu,lastSelected:$u,lastSelectedSelector:Ku},ts=function(t){return{element:t,mergable:k.none(),unmergable:k.none(),selection:[t]}},es=function(t,e,n){return{element:n,mergable:Gu(e,t,Qu),unmergable:Uu(t),selection:Wu(t)}},ns=function(t,e,n){return{element:t,clipboard:e,generators:n}},rs=function(t,e,n,r){return{selection:Wu(t),clipboard:n,generators:r}},os=function(t){return br(t[0]).map(function(t){var e=su(t,Ju);return zu(e),[e]})},is=function(t,e){return R(e,function(e){return t.selection.serializer.serialize(e.dom,{})}).join("")},as=function(t){return R(t,function(t){return t.dom.innerText}).join("")},us=function(t,e,n,r){t.on("BeforeGetContent",function(n){var r=function(e){n.preventDefault(),os(e).each(function(e){n.content="text"===n.format?as(e):is(t,e)})};!0===n.selection&&Jo(e.get(),h,r,h)}),t.on("BeforeSetContent",function(e){if(!0===e.selection&&!0===e.paste){var o=k.from(t.dom.getParent(t.selection.getStart(),"th,td"));o.each(function(o){var i=fe.fromDom(o);br(i).each(function(o){var a=V(Du(e.content),function(t){return"meta"!==$e(t)}),u=function(t){return"table"===$e(t)};if(1===a.length&&u(a[0])){e.preventDefault();var s=fe.fromDom(t.getDoc()),l=ku(s),c=ns(i,a[0],l);n.pasteCells(o,c).each(function(e){t.selection.setRng(e.rng),t.focus(),r.clear(o)})}})})}})},ss=$o.generate([{none:[]},{only:["index"]},{left:["index","next"]},{middle:["prev","index","next"]},{right:["prev","index"]}]),ls=nt({},ss),cs=function(t,e){return 0===t.length?ls.none():1===t.length?ls.only(0):0===e?ls.left(0,1):e===t.length-1?ls.right(e-1,e):e>0&&e<t.length-1?ls.middle(e-1,e,e+1):ls.none()},fs=function(t,e,n,r,o){var i=t.slice(0),a=cs(t,e),u=m(R(i,m(0))),s=function(t){return r.singleColumnWidth(i[t],n)},l=function(t,e){return o.calcLeftEdgeDeltas(i,t,e,n,r.minCellWidth(),r.isRelative)},c=function(t,e,a){return o.calcMiddleDeltas(i,t,e,a,n,r.minCellWidth(),r.isRelative)},f=function(t,e){return o.calcRightEdgeDeltas(i,t,e,n,r.minCellWidth(),r.isRelative)};return a.fold(u,s,l,c,f)},ds=function(t,e,n){for(var r=0,o=t;o<e;o++)r+=void 0!==n[o]?n[o]:0;return r},hs=function(t,e){var n=Zr.justCells(t);return R(n,function(t){var n=ds(t.column,t.column+t.colspan,e);return{element:t.element,width:n,colspan:t.colspan}})},ps=function(t,e){var n=Zr.justColumns(t);return R(n,function(t,n){return{element:t.element,width:e[n],colspan:t.colspan}})},gs=function(t,e){var n=Zr.justCells(t);return R(n,function(t){var n=ds(t.row,t.row+t.rowspan,e);return{element:t.element,height:n,rowspan:t.rowspan}})},ms=function(t,e){return R(t.all,function(t,n){return{element:t.element,height:e[n]}})},vs=function(t){return H(t,function(t,e){return t+e},0)},ys=function(t,e){return Zr.hasColumns(t)?ps(t,e):hs(t,e)},bs=function(t,e,n){var r=ys(t,e);P(r,function(t){n.setElementWidth(t.element,t.width)})},xs=function(t,e,n,r,o){var i=Zr.fromTable(t),a=o.getCellDelta(e),u=o.getWidths(i,o),s=n===i.grid.columns-1,l=r.clampTableDelta(u,n,a,o.minCellWidth(),s),c=fs(u,n,l,o,r),f=R(c,function(t,e){return t+u[e]});bs(i,f,o),r.resizeTable(o.adjustTableWidth,l,s)},ws=function(t,e,n,r){var o=Zr.fromTable(t),i=Ya(o,t,r),a=R(i,function(t,r){return n===r?Math.max(e+t,dr()):t}),u=gs(o,a),s=ms(o,a);P(s,function(t){ca(t.element,t.height)}),P(u,function(t){ca(t.element,t.height)});var l=vs(a);ca(t,l)},_s=function(t,e,n,r,o){var i=Zr.generate(e),a=r.getWidths(i,r),u=r.pixelWidth(),s=o.calcRedestributedWidths(a,u,n.pixelDelta,r.isRelative),l=s.newSizes,c=s.delta;bs(i,l,r),r.adjustTableWidth(c)},Ss=function(t,e,n,r){var o=Zr.generate(e),i=r.getWidths(o,r);bs(o,i,r)},Cs=function(t){return R(t,m(0))},Ms=function(t,e,n,r,o){return o(t.slice(0,e)).concat(r).concat(o(t.slice(n)))},Ts=function(t){return function(e,n,r,o){if(t(r)){var i=Math.max(o,e[n]-Math.abs(r)),a=Math.abs(i-e[n]);return r>=0?a:-a}return r}},ks=Ts(function(t){return t<0}),Ds=Ts(_),As=function(){var t=function(t,e,n,r,o){var i=ks(t,e,r,o);return Ms(t,e,n+1,[i,0],Cs)},e=function(t,e,n,r){var o=(100+n)/100,i=Math.max(r,(t[e]+n)/o);return R(t,function(t,n){var r=n===e?i:t/o;return r-t})},n=function(n,r,o,i,a,u){return u?e(n,r,i,a):t(n,r,o,i,a)},r=function(t,e,r,o,i,a,u){return n(t,r,o,i,a,u)},o=function(t,e){return t(e)},i=function(t,n,r,o,i,a){if(a)return e(t,r,o,i);var u=ks(t,r,o,i);return Cs(t.slice(0,r)).concat([u])},a=function(t,e,n,r){if(r){var o=e+n,i=o/e,a=R(t,function(t){return t/i});return{delta:100*i-100,newSizes:a}}return{delta:n,newSizes:t}};return{resizeTable:o,clampTableDelta:ks,calcLeftEdgeDeltas:n,calcMiddleDeltas:r,calcRightEdgeDeltas:i,calcRedestributedWidths:a}},Is=function(){var t=function(t,e,n,r,o){var i=r>=0?n:e,a=Ds(t,i,r,o);return Ms(t,e,n+1,[a,-a],Cs)},e=function(e,n,r,o,i,a){return t(e,r,o,i,a)},n=function(t,e,n){n&&t(e)},r=function(t,e,n,r,o,i){if(i)return Cs(t);var a=r/t.length;return R(t,m(a))},o=function(t,e,n,r,o){if(o){if(n>=0)return n;var i=F(t,function(t,e){return t+e-r},0);return Math.max(-i,n)}return ks(t,e,n,r)},i=function(t,e,n,r){return{delta:0,newSizes:t}};return{resizeTable:n,clampTableDelta:o,calcLeftEdgeDeltas:t,calcMiddleDeltas:e,calcRightEdgeDeltas:r,calcRedestributedWidths:i}},Os=function(t,e){var n=k.from(t.dom.documentElement).map(fe.fromDom).getOr(t);return{parent:m(n),view:m(t),origin:m(ki(0,0)),isResizable:e}},Ls=function(t,e,n){var r=function(){return Ii(e)};return{parent:m(e),view:m(t),origin:r,isResizable:n}},Es=function(t,e,n){return{parent:m(e),view:m(t),origin:m(ki(0,0)),isResizable:n}},Ns={only:Os,detached:Ls,body:Es},Rs=$o.generate([{invalid:["raw"]},{pixels:["value"]},{percent:["value"]}]),Ps=function(t,e,n){var r=n.substring(0,n.length-t.length),o=parseFloat(r);return r===o.toString()?e(o):Rs.invalid(n)},zs=function(t){return bt(t,"%")?Ps("%",Rs.percent,t):bt(t,"px")?Ps("px",Rs.pixels,t):Rs.invalid(t)},Bs=nt(nt({},Rs),{from:zs}),Vs=function(t,e){return R(t,function(t){var n=Bs.from(t);return n.fold(function(){return t},function(t){var n=t/e*100;return n+"%"},function(t){return t+"%"})})},Hs=function(t,e,n){var r=n/e;return R(t,function(t){var e=Bs.from(t);return e.fold(function(){return t},function(t){return t*r+"px"},function(t){return t/100*n+"px"})})},Fs=function(t,e){var n=t.fold(function(){return m("")},function(t){var n=t/e;return m(n+"px")},function(){var t=100/e;return m(t+"%")});return N(e,n)},Ws=function(t,e,n){return t.fold(function(){return e},function(t){return Hs(e,n,t)},function(t){return Vs(e,n)})},Us=function(t,e,n){var r=Bs.from(n),o=Y(t,function(t){return"0px"===t})?Fs(r,t.length):Ws(r,t,e);return Ys(o)},Gs=function(t,e){return 0===t.length?e:H(t,function(t,e){return Bs.from(e).fold(m(0),v,v)+t},0)},js=function(t,e){var n=Math.floor(t);return{value:n+e,remainder:t-n}},Xs=function(t,e){return Bs.from(t).fold(m(t),function(t){return t+e+"px"},function(t){return t+e+"%"})},Ys=function(t){if(0===t.length)return t;var e=H(t,function(t,e){var n=Bs.from(e).fold(function(){return{value:e,remainder:0}},function(t){return js(t,"px")},function(t){return{value:t+"%",remainder:0}});return{output:[n.value].concat(t.output),remainder:t.remainder+n.remainder}},{output:[],remainder:0}),n=e.output;return n.slice(0,n.length-1).concat([Xs(n[n.length-1],Math.round(e.remainder))])},qs=Bs.from,Zs=function(t,e,n){P(e,function(e){var r=t.slice(e.column,e.colspan+e.column),o=Gs(r,fr());Qn(e.element,"width",o+n)})},$s=function(t,e,n){P(e,function(e,r){var o=Gs([t[r]],fr());Qn(e.element,"width",o+n)})},Ks=function(t,e,n,r){P(n,function(e){var n=t.slice(e.row,e.rowspan+e.row),o=Gs(n,dr());Qn(e.element,"height",o+r)}),P(e,function(e,n){Qn(e.element,"height",t[n])})},Js=function(t){return qs(t).fold(m("px"),m("px"),m("%"))},Qs=function(t,e,n,r){var o=Zr.fromTable(t),i=o.all,a=Zr.justCells(o),u=Zr.justColumns(o);e.each(function(e){var n=Js(e),i=gi(t),s=Ua(o,t,r),l=Us(s,i,e);Zr.hasColumns(o)?$s(l,u,n):Zs(l,a,n),Qn(t,"width",e)}),n.each(function(e){var n=Js(e),r=Ci(t),u=qa(o,t,Ui),s=Us(u,r,e);Ks(s,i,a,n),Qn(t,"height",e)})},tl=Da,el=Aa,nl=Ia,rl=ka,ol=function(t){var e=Zr.fromTable(t);return e.grid},il=function(t){var e=[],n=function(t){if(void 0===t)throw new Error("Event bind error: undefined handler");e.push(t)},r=function(t){e=V(e,function(e){return e!==t})},o=function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];var o={};P(t,function(t,e){o[t]=n[e]}),P(e,function(t){t(o)})};return{bind:n,unbind:r,trigger:o}},al=function(t){var e=Ce(t,function(t){return{bind:t.bind,unbind:t.unbind}}),n=Ce(t,function(t){return t.trigger});return{registry:e,trigger:n}},ul=function(t,e){var n=null,r=function(){null!==n&&(clearTimeout(n),n=null)},o=function(){for(var r=[],o=0;o<arguments.length;o++)r[o]=arguments[o];null!==n&&clearTimeout(n),n=setTimeout(function(){t.apply(null,r),n=null},e)};return{cancel:r,throttle:o}},sl=function(t){return t.slice(0).sort()},ll=function(t,e){throw new Error("All required keys ("+sl(t).join(", ")+") were not specified. Specified keys were: "+sl(e).join(", ")+".")},cl=function(t){throw new Error("Unsupported keys for object: "+sl(t).join(", "))},fl=function(t,e){if(!a(e))throw new Error("The "+t+" fields must be an array. Was: "+e+".");P(e,function(e){if(!o(e))throw new Error("The value "+e+" in the "+t+" fields was not a string.")})},dl=function(t,e){throw new Error("All values need to be of type: "+e+". Keys ("+sl(t).join(", ")+") were not.")},hl=function(t){var e=sl(t),n=U(e,function(t,n){return n<e.length-1&&t===e[n+1]});n.each(function(t){throw new Error("The field: "+t+" occurs more than once in the combined fields: ["+e.join(", ")+"].")})},pl=function(t,e){return gl(t,e,{validate:f,label:"function"})},gl=function(t,e,n){if(0===e.length)throw new Error("You must specify at least one required field.");return fl("required",e),hl(e),function(r){var o=we(r),i=Y(e,function(t){return L(o,t)});i||ll(e,o),t(e,o);var a=V(e,function(t){return!n.validate(r[t],t)});return a.length>0&&dl(a,n.label),r}},ml=function(t,e){var n=V(e,function(e){return!L(t,e)});n.length>0&&cl(n)},vl=function(t){return pl(ml,t)},yl=vl(["compare","extract","mutate","sink"]),bl=vl(["element","start","stop","destroy"]),xl=vl(["forceDrop","drop","move","delayDrop"]),wl=function(){var t=k.none(),e=function(){t=k.none()},n=function(e,n){var r=t.map(function(t){return e.compare(t,n)});return t=k.some(n),r},r=function(t,e){var r=e.extract(t);r.each(function(t){var r=n(e,t);r.each(function(t){o.trigger.move(t)})})},o=al({move:il(["info"])});return{onEvent:r,reset:e,events:o.registry}},_l=function(){var t=al({move:il(["info"])});return{onEvent:h,reset:h,events:t.registry}},Sl=function(){var t=_l(),e=wl(),n=t,r=function(){n.reset(),n=e},o=function(){n.reset(),n=t},i=function(t,e){n.onEvent(t,e)},a=function(){return n===e};return{on:r,off:o,isOn:a,onEvent:i,events:e.events}},Cl=function(t,e,n){var r=!1,o=al({start:il([]),stop:il([])}),i=Sl(),a=function(){h.stop(),i.isOn()&&(i.off(),o.trigger.stop())},u=ul(a,200),s=function(t){h.start(t),i.on(),o.trigger.start()},l=function(t){u.cancel(),i.onEvent(t,e)};i.events.move.bind(function(n){e.mutate(t,n.info)});var c=function(){r=!0},f=function(){r=!1},d=function(t){return function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];r&&t.apply(null,e)}},h=e.sink(xl({forceDrop:a,drop:d(a),move:d(l),delayDrop:d(u.throttle)}),n),p=function(){h.destroy()};return{element:h.element,go:s,on:c,off:f,destroy:p,events:o.registry}},Ml=function(t,e,n,r,o,i,a){return{target:t,x:e,y:n,stop:r,prevent:o,kill:i,raw:a}},Tl=function(t){var e=fe.fromDom(Sn(t).getOr(t.target)),n=function(){return t.stopPropagation()},r=function(){return t.preventDefault()},o=p(r,n);return Ml(e,t.clientX,t.clientY,n,r,o,t)},kl=function(t,e){return function(n){t(n)&&e(Tl(n))}},Dl=function(t,e,n,r,o){var i=kl(n,r);return t.dom.addEventListener(e,i,o),{unbind:y(Il,t,e,i,o)}},Al=function(t,e,n,r){return Dl(t,e,n,r,!1)},Il=function(t,e,n,r){t.dom.removeEventListener(e,n,r)},Ol=_,Ll=function(t,e,n){return Al(t,e,Ol,n)},El=Tl,Nl=function(t,e){var n=Xn(t,e);return void 0===n||""===n?[]:n.split(" ")},Rl=function(t,e,n){var r=Nl(t,e),o=r.concat([n]);return Gn(t,e,o.join(" ")),!0},Pl=function(t,e,n){var r=V(Nl(t,e),function(t){return t!==n});return r.length>0?Gn(t,e,r.join(" ")):qn(t,e),!1},zl=function(t){return void 0!==t.dom.classList},Bl=function(t){return Nl(t,"class")},Vl=function(t,e){return Rl(t,"class",e)},Hl=function(t,e){return Pl(t,"class",e)},Fl=function(t,e){zl(t)?t.dom.classList.add(e):Vl(t,e)},Wl=function(t){var e=zl(t)?t.dom.classList:Bl(t);0===e.length&&qn(t,"class")},Ul=function(t,e){if(zl(t)){var n=t.dom.classList;n.remove(e)}else Hl(t,e);Wl(t)},Gl=function(t,e){return zl(t)&&t.dom.classList.contains(e)},jl=function(t){var e=t.replace(/\./g,"-"),n=function(t){return e+"-"+t};return{resolve:n}},Xl=jl("ephox-dragster"),Yl=Xl.resolve,ql=function(t){var e=nt({layerClass:Yl("blocker")},t),n=fe.fromTag("div");Gn(n,"role","presentation"),tr(n,{position:"fixed",left:"0px",top:"0px",width:"100%",height:"100%"}),Fl(n,Yl("blocker")),Fl(n,e.layerClass);var r=function(){return n},o=function(){xo(n)};return{element:r,destroy:o}},Zl=function(t,e){return ki(e.left-t.left,e.top-t.top)},$l=function(t){return k.some(ki(t.x,t.y))},Kl=function(t,e){t.mutate(e.left,e.top)},Jl=function(t,e){var n=ql(e),r=Ll(n.element(),"mousedown",t.forceDrop),o=Ll(n.element(),"mouseup",t.drop),i=Ll(n.element(),"mousemove",t.move),a=Ll(n.element(),"mouseout",t.delayDrop),u=function(){n.destroy(),o.unbind(),i.unbind(),a.unbind(),r.unbind()},s=function(t){po(t,n.element())},l=function(){xo(n.element())};return bl({element:n.element,start:s,stop:l,destroy:u})},Ql=yl({compare:Zl,extract:$l,sink:Jl,mutate:Kl}),tc=function(t,e){void 0===e&&(e={});var n=void 0!==e.mode?e.mode:Ql;return Cl(t,n,e)},ec=function(t){return"true"===Xn(t,"contenteditable")},nc=function(t,e){return Wn(t,"[contenteditable]",e)},rc=jl("ephox-snooker"),oc=rc.resolve,ic=function(){var t=al({drag:il(["xDelta","yDelta"])}),e=function(e,n){t.trigger.drag(e,n)};return{mutate:e,events:t.registry}},ac=function(){var t=al({drag:il(["xDelta","yDelta","target"])}),e=k.none(),n=ic();n.events.drag.bind(function(n){e.each(function(e){t.trigger.drag(n.xDelta,n.yDelta,e)})});var r=function(t){e=k.some(t)},o=function(){return e};return{assign:r,get:o,mutate:n.mutate,events:t.registry}},uc=function(t,e,n,r,o){var i=fe.fromTag("div");return tr(i,{position:"absolute",left:e-r/2+"px",top:n+"px",height:o+"px",width:r+"px"}),jn(i,{"data-column":t,role:"presentation"}),i},sc=function(t,e,n,r,o){var i=fe.fromTag("div");return tr(i,{position:"absolute",left:e+"px",top:n-o/2+"px",height:o+"px",width:r+"px"}),jn(i,{"data-row":t,role:"presentation"}),i},lc=oc("resizer-bar"),cc=oc("resizer-rows"),fc=oc("resizer-cols"),dc=7,hc=function(t,e){return X(t.all,function(t,n){return e(t.element)?[n]:[]})},pc=function(t,e){var n=[];return N(t.grid.columns,function(r){var o=Zr.getColumnAt(t,r).map(function(t){return t.element});o.forall(e)&&n.push(r)}),V(n,function(n){var r=Zr.filterItems(t,function(t){return t.column===n});return Y(r,function(t){return e(t.element)})})},gc=function(t){var e=En(t.parent(),"."+lc);P(e,xo)},mc=function(t,e,n){var r=t.origin();P(e,function(e){e.each(function(e){var o=n(r,e);Fl(o,lc),po(t.parent(),o)})})},vc=function(t,e,n,r){mc(t,e,function(t,e){var o=uc(e.col,e.x-t.left,n.top-t.top,dc,r);return Fl(o,fc),o})},yc=function(t,e,n,r){mc(t,e,function(t,e){var o=sc(e.row,n.left-t.left,e.y-t.top,r,dc);return Fl(o,cc),o})},bc=function(t,e,n,r,o){var i=Ii(n),a=e.isResizable,u=r.length>0?Ui.positions(r,n):[],s=u.length>0?hc(t,a):[],l=V(u,function(t,e){return E(s,function(t){return e===t})});yc(e,l,i,mi(n));var c=o.length>0?Yi.positions(o,n):[],f=c.length>0?pc(t,a):[],d=V(c,function(t,e){return E(f,function(t){return e===t})});vc(e,d,i,Mi(n))},xc=function(t,e){if(gc(t),t.isResizable(e)){var n=Zr.fromTable(e),r=bi(n),o=vi(n);bc(n,t,e,r,o)}},wc=function(t,e){var n=En(t.parent(),"."+lc);P(n,e)},_c=function(t){wc(t,function(t){Qn(t,"display","none")})},Sc=function(t){wc(t,function(t){Qn(t,"display","block")})},Cc=function(t){return Gl(t,cc)},Mc=function(t){return Gl(t,fc)},Tc=oc("resizer-bar-dragging"),kc=function(t){var e=ac(),n=tc(e,{}),r=k.none(),o=function(t,e){return k.from(Xn(t,e))};e.events.drag.bind(function(t){o(t.target,"data-row").each(function(e){var n=cr(t.target,"top");Qn(t.target,"top",n+t.yDelta+"px")}),o(t.target,"data-column").each(function(e){var n=cr(t.target,"left");Qn(t.target,"left",n+t.xDelta+"px")})});var i=function(t,e){var n=cr(t,e),r=ar(t,"data-initial-"+e,0);return n-r};n.events.stop.bind(function(){e.get().each(function(e){r.each(function(n){o(e,"data-row").each(function(t){var r=i(e,"top");qn(e,"data-initial-top"),h.trigger.adjustHeight(n,r,parseInt(t,10))}),o(e,"data-column").each(function(t){var r=i(e,"left");qn(e,"data-initial-left"),h.trigger.adjustWidth(n,r,parseInt(t,10))}),xc(t,n)})})});var a=function(r,o){h.trigger.startAdjust(),e.assign(r),Gn(r,"data-initial-"+o,cr(r,o)),Fl(r,Tc),Qn(r,"opacity","0.2"),n.go(t.parent())},u=Ll(t.parent(),"mousedown",function(t){Cc(t.target)&&a(t.target,"top"),Mc(t.target)&&a(t.target,"left")}),s=function(e){return me(e,t.view())},l=function(t){return Wn(t,"table",s).filter(function(t){return nc(t,s).exists(ec)})},c=Ll(t.view(),"mouseover",function(e){l(e.target).fold(function(){Mn(e.target)&&gc(t)},function(e){r=k.some(e),xc(t,e)})}),f=function(){u.unbind(),c.unbind(),n.destroy(),gc(t)},d=function(e){xc(t,e)},h=al({adjustHeight:il(["table","delta","row"]),adjustWidth:il(["table","delta","column"]),startAdjust:il([])});return{destroy:f,refresh:d,on:n.on,off:n.off,hideBars:y(_c,t),showBars:y(Sc,t),events:h.registry}},Dc=function(t,e,n){var r=Ui,o=Yi,i=kc(t),a=al({beforeResize:il(["table","type"]),afterResize:il(["table","type"]),startDrag:il([])});return i.events.adjustHeight.bind(function(t){var e=t.table;a.trigger.beforeResize(e,"row");var n=r.delta(t.delta,e);ws(e,n,t.row,r),a.trigger.afterResize(e,"row")}),i.events.startAdjust.bind(function(t){a.trigger.startDrag()}),i.events.adjustWidth.bind(function(t){var r=t.table;a.trigger.beforeResize(r,"col");var i=o.delta(t.delta,r),u=n(r);xs(r,i,t.column,e,u),a.trigger.afterResize(r,"col")}),{on:i.on,off:i.off,hideBars:i.hideBars,showBars:i.showBars,destroy:i.destroy,events:a.registry}},Ac={create:Dc},Ic=function(t,e){return t.fire("newrow",{node:e})},Oc=function(t,e){return t.fire("newcell",{node:e})},Lc=function(t,e,n,r,o){t.fire("ObjectResizeStart",{target:e,width:n,height:r,origin:o})},Ec=function(t,e,n,r,o){t.fire("ObjectResized",{target:e,width:n,height:r,origin:o})},Nc=function(t,e,n,r,o){t.fire("TableSelectionChange",{cells:e,start:n,finish:r,otherCells:o})},Rc=function(t){t.fire("TableSelectionClear")},Pc=function(t,e,n){t.fire("TableModified",nt(nt({},n),{table:e}))},zc={structure:!1,style:!0},Bc={structure:!0,style:!1},Vc="tableprops tabledelete | tableinsertrowbefore tableinsertrowafter tabledeleterow | tableinsertcolbefore tableinsertcolafter tabledeletecol",Hc={"border-collapse":"collapse",width:"100%"},Fc=function(t){if(uf(t)){var e=t.getBody().offsetWidth;return nt(nt({},Hc),{width:e+"px"})}return sf(t)?De(Hc,function(t,e){return"width"!==e}):Hc},Wc={border:"1"},Uc="preservetable",Gc=function(t){return t.getParam("table_sizing_mode","auto")},jc=function(t){return t.getParam("table_responsive_width")},Xc=function(t){return t.getParam("table_default_attributes",Wc,"object")},Yc=function(t){return t.getParam("table_default_styles",Fc(t),"object")},qc=function(t){return t.getParam("table_resize_bars",!0,"boolean")},Zc=function(t){return t.getParam("table_tab_navigation",!0,"boolean")},$c=function(t){return t.getParam("table_cell_advtab",!0,"boolean")},Kc=function(t){return t.getParam("table_row_advtab",!0,"boolean")},Jc=function(t){return t.getParam("table_advtab",!0,"boolean")},Qc=function(t){return t.getParam("table_appearance_options",!0,"boolean")},tf=function(t){return t.getParam("table_grid",!0,"boolean")},ef=function(t){return t.getParam("table_style_by_css",!1,"boolean")},nf=function(t){return t.getParam("table_cell_class_list",[],"array")},rf=function(t){return t.getParam("table_row_class_list",[],"array")},of=function(t){return t.getParam("table_class_list",[],"array")},af=function(t){return"relative"===Gc(t)||!0===jc(t)},uf=function(t){return"fixed"===Gc(t)||!1===jc(t)},sf=function(t){return"responsive"===Gc(t)},lf=function(t){return t.getParam("table_toolbar",Vc)},cf=function(t){return t.getParam("table_use_colgroups",!1,"boolean")},ff=function(t){var e="section",n=t.getParam("table_header_type",e,"string"),r=["section","cells","sectionCells","auto"];return L(r,n)?n:e},df=function(t){var e=["preservetable","resizetable"],n=t.getParam("table_column_resizing",Uc,"string");return U(e,function(t){return t===n}).getOr(Uc)},hf=function(t){return"preservetable"===df(t)},pf=function(t){return"resizetable"===df(t)},gf=function(t){var e=t.getParam("table_clone_elements");return o(e)?k.some(e.split(/[ ,]/)):Array.isArray(e)?k.some(e):k.none()},mf=function(t){var e=t.getParam("object_resizing",!0);return o(e)?"table"===e:e},vf=function(t,e){if(af(t)){var n=Bu(t,e.dom).filter(Vu).getOrThunk(function(){return rl(e)});return eu.percentageSize(n,e)}return uf(t)?eu.pixelSize(gi(e),e):eu.getTableSize(e)},yf=function(t){qn(t,"width")},bf=function(t,e){var n=ka(t);Qs(t,k.some(n),k.none(),e),yf(t)},xf=function(t,e){var n=Ta(t);Qs(t,k.some(n),k.none(),e),yf(t)},wf=function(t){or(t,"width");var e=yr(t),n=e.length>0?e:vr(t);P(n,function(t){or(t,"width"),yf(t)}),yf(t)},_f=function(t,e){var n=vf(t,e);bf(e,n)},Sf=function(t,e){var n=vf(t,e);xf(e,n)},Cf=wf,Mf=function(t){var e=Zr.fromTable(t);Zr.hasColumns(e)||P(vr(t),function(t){var e=er(t,"width");Qn(t,"width",e),qn(t,"width")})},Tf=function(){var t=fe.fromTag("div");return tr(t,{position:"static",height:"0",width:"0",padding:"0",margin:"0",border:"0"}),po(Tn(),t),t},kf=function(t,e){return t.inline?Ns.body(Ou(t),Tf(),e):Ns.only(fe.fromDom(t.getDoc()),e)},Df=function(t,e){t.inline&&xo(e.parent())},Af="bar-",If=function(t){return"false"!==Xn(t,"data-mce-resize")},Of=function(t){var e,n,r=k.none(),o=k.none(),i=k.none(),a=function(t){return"TABLE"===t.nodeName},u=function(){return o},s=function(){return i.getOr(Ns.only(fe.fromDom(t.getBody()),If))},l=function(e){return vf(t,e)},c=function(){return hf(t)?Is():As()},f=function(t){return ol(t).columns},d=function(r,o,i){var a=bt(o,"e");if(""===n&&_f(t,r),i!==e&&""!==n){Qn(r,"width",n);var u=c(),s=l(r),d=hf(t)||a?f(r)-1:0;xs(r,i-e,d,u,s)}else if(Vu(n)){var h=parseFloat(n.replace("%","")),p=i*h/e;Qn(r,"width",p+"%")}Hu(n)&&Mf(r)},h=function(){o.each(function(t){t.destroy()}),i.each(function(e){Df(t,e)})};return t.on("init",function(){var e=kf(t,If);if(i=k.some(e),mf(t)&&qc(t)){var n=c(),a=Ac.create(e,n,l);a.on(),a.events.startDrag.bind(function(e){r=k.some(t.selection.getRng())}),a.events.beforeResize.bind(function(e){var n=e.table.dom;Lc(t,n,Lu(n),Eu(n),Af+e.type)}),a.events.afterResize.bind(function(e){var n=e.table,o=n.dom;zu(n),r.each(function(e){t.selection.setRng(e),t.focus()}),Ec(t,o,Lu(o),Eu(o),Af+e.type),t.undoManager.add()}),o=k.some(a)}}),t.on("ObjectResizeStart",function(r){var o=r.target;if(a(o)){var i=fe.fromDom(o);P(t.dom.select(".mce-clonedresizable"),function(e){t.dom.addClass(e,"mce-"+df(t)+"-columns")}),!el(i)&&uf(t)?Sf(t,i):!tl(i)&&af(t)&&_f(t,i),nl(i)&&yt(r.origin,Af)&&_f(t,i),e=r.width,n=sf(t)?"":Bu(t,o).getOr("")}}),t.on("ObjectResized",function(e){var n=e.target;if(a(n)){var r=fe.fromDom(n),o=e.origin;yt(o,"corner-")&&d(r,o,e.width),zu(r),Pc(t,r.dom,zc)}}),t.on("SwitchMode",function(){u().each(function(e){t.mode.isReadOnly()?e.hideBars():e.showBars()})}),{lazyResize:u,lazyWire:s,destroy:h}},Lf=function(t,e){return{element:t,offset:e}},Ef=function(t,e,n){return t.property().isText(e)&&0===t.property().getText(e).trim().length||t.property().isComment(e)?n(e).bind(function(e){return Ef(t,e,n).orThunk(function(){return k.some(e)})}):k.none()},Nf=function(t,e){if(t.property().isText(e))return t.property().getText(e).length;var n=t.property().children(e);return n.length},Rf=function(t,e){var n=Ef(t,e,t.query().prevSibling).getOr(e);if(t.property().isText(n))return Lf(n,Nf(t,n));var r=t.property().children(n);return r.length>0?Rf(t,r[r.length-1]):Lf(n,Nf(t,n))},Pf=Rf,zf=Do(),Bf=function(t){return Pf(zf,t)},Vf=function(t,e){var n=ur(t,"colspan");if(1===n){var r=Ca(t);r.each(function(n){var r=n.value/2;Ma(t,r,n.unit),Ma(e,r,n.unit)})}},Hf=function(t,e,n,r){n===r?qn(t,e):Gn(t,e,n)},Ff=function(t,e,n){tt(Ln(t,e)).fold(function(){return ho(t,n)},function(t){return fo(t,n)})},Wf=function(t,e){var n=Hn(t,e).getOrThunk(function(){var n=fe.fromTag(e,an(t).dom);return"thead"===e?Ff(t,"caption,colgroup",n):"colgroup"===e?Ff(t,"caption",n):po(t,n),n});return bo(n),n},Uf=function(t,e){var n=[],r=[],o=function(t){return R(t,function(t){t.isNew&&n.push(t.element);var e=t.element;return bo(e),P(t.cells,function(t){t.isNew&&r.push(t.element),Hf(t.element,"colspan",t.colspan,1),Hf(t.element,"rowspan",t.rowspan,1),po(e,t.element)}),e})},i=function(t){return X(t,function(t){return R(t.cells,function(t){return Hf(t.element,"span",t.colspan,1),t.element})})},a=function(e,n){var r=Wf(t,n),a="colgroup"===n?i:o,u=a(e);yo(r,u)},u=function(e){Hn(t,e).each(xo)},s=function(t,e){t.length>0?a(t,e):u(e)},l=[],c=[],f=[],d=[];return P(e,function(t){switch(t.section){case"thead":l.push(t);break;case"tbody":c.push(t);break;case"tfoot":f.push(t);break;case"colgroup":d.push(t);break}}),s(d,"colgroup"),s(l,"thead"),s(c,"tbody"),s(f,"tfoot"),{newRows:n,newCells:r}},Gf=function(t){return R(t,function(t){var e=ii(t.element);return P(t.cells,function(t){var n=ai(t.element);Hf(n,"colspan",t.colspan,1),Hf(n,"rowspan",t.rowspan,1),po(e,n)}),e})},jf=function(t,e){return R(t,function(t){return Or(t,e)})},Xf=function(t,e){return t[e]},Yf=function(t,e){if(0===t.length)return 0;var n=t[0],r=G(t,function(t){return!e(n.element,t.element)});return r.fold(function(){return t.length},function(t){return t})},qf=function(t,e,n,r){var o=Xf(t,e).cells.slice(n),i=Yf(o,r),a=jf(t,n).slice(e),u=Yf(a,r);return{colspan:i,rowspan:u}},Zf=function(t,e){var n=R(t,function(t){return R(t.cells,w)}),r=function(t,e,r,o){for(var i=t;i<t+r;i++)for(var a=e;a<e+o;a++)n[i][a]=!0};return R(t,function(o,i){var a=X(o.cells,function(o,a){if(!1===n[i][a]){var u=qf(t,i,a,e);return r(i,a,u.rowspan,u.colspan),[Fe(o.element,u.rowspan,u.colspan,o.isNew)]}return[]});return Ye(a,o.section)})},$f=function(t,e,n){var r=[];if(Zr.hasColumns(t)){var o=R(Zr.justColumns(t),function(t){return Ge(t.element,n,!1)});r.push(Xe(o,"colgroup"))}for(var i=0;i<t.grid.rows;i++){for(var a=[],u=0;u<t.grid.columns;u++){var s=Zr.getAt(t,i,u).map(function(t){return Ge(t.element,n,t.isLocked)}).getOrThunk(function(){return Ge(e.gap(),!0,!1)});a.push(s)}var l=Xe(a,t.all[i].section);r.push(l)}return r},Kf=function(t,e){return $f(t,e,!1)},Jf=function(t,e){var n=function(t){var n=et(t,function(t){return ln(t.element).map(function(t){var e=ln(t).isNone();return Ge(t,e,!1)})});return n.getOrThunk(function(){return Ge(e.row(),!0,!1)})};return R(t,function(t){var e=n(t.details);return je(e.element,t.details,t.section,e.isNew)})},Qf=function(t,e){var n=Zf(t,me);return Jf(n,e)},td=function(t,e){return et(t.all,function(t){return U(t.cells,function(t){return me(e,t.element)})})},ed=function(t,e,n){var r=R(e.selection,function(e){return mr(e).bind(function(e){return td(t,e)}).filter(n)}),o=li(r);return di(o.length>0,o)},nd=function(t,e,n,r,o){return function(i,a,u,s,l,c){var f=Zr.fromTable(a),d=e(f,u).map(function(e){var n=Kf(f,s),r=t(n,e,me,o(s)),i=zr(r.grid),a=Qf(r.grid,s);return{info:e,grid:a,cursor:r.cursor,lockedColumns:i}});return d.bind(function(t){var e=Uf(a,t.grid),o=k.from(l).getOrThunk(function(){return eu.getTableSize(a)}),u=k.from(c).getOrThunk(Is);return n(a,t.grid,t.info,o,u),r(a),xc(i,a),qn(a,Rr),t.lockedColumns.length>0&&Gn(a,Rr,t.lockedColumns.join(",")),k.some({cursor:t.cursor,newRows:e.newRows,newCells:e.newCells})})}},rd=function(t,e){return mr(e.element).bind(function(e){return td(t,e)})},od=function(t,e){return mr(e.element).bind(function(n){return td(t,n).map(function(t){var n=nt(nt({},t),{generators:e.generators,clipboard:e.clipboard});return n})})},id=function(t,e){return ed(t,e,_).map(function(t){return{cells:t,generators:e.generators,clipboard:e.clipboard}})},ad=function(t,e){return e.mergable},ud=function(t,e){return e.unmergable},sd=function(t,e){return ed(t,e,_)},ld=function(t,e){return rd(t,e).filter(function(t){return!t.isLocked})},cd=function(t,e){return ed(t,e,function(t){return!t.isLocked})},fd=function(t,e){return td(t,e).exists(function(t){return!t.isLocked})},dd=function(t,e){return Y(e,function(e){return fd(t,e)})},hd=function(t,e){return ad(t,e).filter(function(e){return dd(t,e.cells)})},pd=function(t,e){return ud(t,e).filter(function(e){return dd(t,e)})},gd=function(t,e,n,r){var o=Nr(t).rows;if(0===o.length)return t;for(var i=e.startRow;i<=e.finishRow;i++)for(var a=e.startCol;a<=e.finishCol;a++){var u=o[i],s=Or(u,a).isLocked;Dr(u,a,Ge(r(),!1,s))}return t},md=function(t,e,n,r){for(var o=Nr(t).rows,i=!0,a=0;a<o.length;a++)for(var u=0;u<Er(o[0]);u++){var s=o[a],l=Or(s,u),c=l.element,f=n(c,e);!0===f&&!1===i?Dr(s,u,Ge(r(),!0,l.isLocked)):!0===f&&(i=!1)}return t},vd=function(t,e){return F(t,function(t,n){return E(t,function(t){return e(t.element,n.element)})?t:t.concat([n])},[])},yd=function(t,e,n,r){return e>0&&e<t[0].cells.length&&P(t,function(t){var o=t.cells[e-1],i=t.cells[e],a=n(i.element,o.element);a&&Dr(t,e,Ge(r(),!0,i.isLocked))}),t},bd=function(t,e,n,r){var o=Nr(t).rows;if(e>0&&e<o.length){var i=o[e-1].cells,a=vd(i,n);P(a,function(t){for(var i=k.none(),a=e;a<o.length;a++)for(var u=function(e){var u=o[a],s=Or(u,e),l=n(s.element,t.element);l&&(i.isNone()&&(i=k.some(r())),i.each(function(t){Dr(u,e,Ge(t,!0,s.isLocked))}))},s=0;s<Er(o[0]);s++)u(s)})}return t},xd=function(t){var e=function(e){return t===e},n=function(e){return xd(t)},r=function(e){return xd(t)},o=function(e){return xd(e(t))},i=function(e){return xd(t)},a=function(e){e(t)},u=function(e){return e(t)},s=function(e,n){return n(t)},l=function(e){return e(t)},c=function(e){return e(t)},f=function(){return k.some(t)};return{is:e,isValue:_,isError:w,getOr:m(t),getOrThunk:m(t),getOrDie:m(t),or:n,orThunk:r,fold:s,map:o,mapError:i,each:a,bind:u,exists:l,forall:c,toOptional:f}},wd=function(t){var e=function(t){return t()},n=function(){return x(String(t))()},r=function(t){return t},o=function(t){return t()},i=function(e){return wd(t)},a=function(e){return wd(e(t))},u=function(e){return wd(t)},s=function(e,n){return e(t)};return{is:w,isValue:w,isError:_,getOr:v,getOrThunk:e,getOrDie:n,or:r,orThunk:o,fold:s,map:i,mapError:a,each:h,bind:u,exists:w,forall:_,toOptional:k.none}},_d=function(t,e){return t.fold(function(){return wd(e)},xd)},Sd={value:xd,error:wd,fromOption:_d},Cd=function(t,e,n){if(t.row>=e.length||t.column>Er(e[0]))return Sd.error("invalid start address out of table bounds, row: "+t.row+", column: "+t.column);var r=e.slice(t.row),o=r[0].cells.slice(t.column),i=Er(n[0]),a=n.length;return Sd.value({rowDelta:r.length-a,colDelta:o.length-i})},Md=function(t,e){var n=Er(t[0]),r=Er(e[0]);return{rowDelta:0,colDelta:n-r}},Td=function(t,e){var n=t.length,r=e.length;return{rowDelta:n-r,colDelta:0}},kd=function(t,e,n,r){var o="colgroup"===e.section?n.col:n.cell;return N(t,function(t){return Ge(o(),!0,r(t))})},Dd=function(t,e,n,r){return t.concat(N(e,function(){var e=t[t.length-1],o=kd(e.cells.length,e,n,function(t){return Ee(r,t.toString())});return Ar(e,o)}))},Ad=function(t,e,n,r){return R(t,function(t){var o=kd(e,t,n,w);return Tr(t,r,o)})},Id=function(t,e,n){return R(t,function(t){return F(n,function(n,r){var o=kd(1,t,e,_)[0];return kr(n,r,o)},t)})},Od=function(t,e,n){var r=e.colDelta<0?Ad:v,o=e.rowDelta<0?Dd:v,i=zr(t),a=Er(t[0]),u=E(i,function(t){return t===a-1}),s=r(t,Math.abs(e.colDelta),n,u?a-1:a),l=zr(s);return o(s,Math.abs(e.rowDelta),n,Z(l,_))},Ld=function(t,e,n,r){var o=Or(t[e],n),i=y(r,o.element),a=t[e];return t.length>1&&Er(a)>1&&(n>0&&i(Lr(a,n-1))||n<a.cells.length-1&&i(Lr(a,n+1))||e>0&&i(Lr(t[e-1],n))||e<t.length-1&&i(Lr(t[e+1],n)))},Ed=function(t,e,n,r,o,i){for(var a=t.row,u=t.column,s=n.length,l=Er(n[0]),c=a+s,f=u+l+i.length,d=Z(i,_),h=a;h<c;h++)for(var p=0,g=u;g<f;g++)if(d[g])p++;else{Ld(e,h,g,o)&&md(e,Lr(e[h],g),o,r.cell);var m=g-u-p,v=Or(n[h-a],m),y=v.element,b=r.replace(y);Dr(e[h],g,Ge(b,!0,v.isLocked))}return e},Nd=function(t,e,n){var r=Er(e[0]),o=Nr(e).cols.length+t.row,i=N(r-t.column,function(e){return e+t.column}),a=U(i,function(t){return Y(n,function(e){return e!==t})}).getOr(r-1);return{row:o,column:a}},Rd=function(t,e,n){return V(n,function(n){return n>=t.column&&n<=Er(e[0])+t.column})},Pd=function(t,e,n,r,o){var i=zr(e),a=Nd(t,e,i),u=Nr(n).rows,s=Rd(a,u,i),l=Cd(a,e,u);return l.map(function(t){var n=nt(nt({},t),{colDelta:t.colDelta-s.length}),i=Od(e,n,r),l=zr(i),c=Rd(a,u,l);return Ed(a,i,u,r,o,c)})},zd=function(t,e,n,r,o){yd(e,t,o,r.cell);var i=Td(n,e),a=Od(n,i,r),u=Td(e,a),s=Od(e,u,r);return R(s,function(e,n){return Tr(e,t,a[n].cells)})},Bd=function(t,e,n,r,o){bd(e,t,o,r.cell);var i=zr(e),a=Md(e,n),u=nt(nt({},a),{colDelta:a.colDelta-i.length}),s=Od(e,u,r),l=Nr(s),c=l.cols,f=l.rows,d=zr(s),h=Md(n,e),p=nt(nt({},h),{colDelta:h.colDelta+d.length}),g=Id(n,r,d),m=Od(g,p,r);return c.concat(f.slice(0,t)).concat(m).concat(f.slice(t,f.length))},Vd=function(t,e,n,r,o){var i=Nr(t),a=i.rows,u=i.cols,s=a.slice(0,e),l=a.slice(e),c=Ir(a[n],function(t,n){var i=e>0&&e<a.length&&r(Lr(a[e-1],n),Lr(a[e],n)),u=i?Or(a[e],n):Ge(o(t.element,r),!0,t.isLocked);return u});return u.concat(s).concat([c]).concat(l)},Hd=function(t,e,n,r,o,i,a){if("colgroup"!==n&&r)return Or(t,e);var u=Or(t,o);return Ge(a(u.element,i),!0,!1)},Fd=function(t,e,n,r,o){return R(t,function(t){var i=e>0&&e<Er(t)&&r(Lr(t,e-1),Lr(t,e)),a=Hd(t,e,t.section,i,n,r,o);return kr(t,e,a)})},Wd=function(t,e){return X(t,function(t){var n=t.cells,r=H(e,function(t,e){return e>=0&&e<t.length?t.slice(0,e).concat(t.slice(e+1)):t},n);return r.length>0?[Xe(r,t.section)]:[]})},Ud=function(t,e,n){var r=Nr(t),o=r.rows,i=r.cols;return i.concat(o.slice(0,e)).concat(o.slice(n+1))},Gd=function(t,e,n,r){var o=function(t){return E(e,function(e){return n(t.element,e.element)})};return R(t,function(t){return Ir(t,function(t){return o(t)?Ge(r(t.element,n),!0,t.isLocked):t})})},jd=function(t,e,n,r){return void 0!==Lr(t[e],n)&&e>0&&r(Lr(t[e-1],n),Lr(t[e],n))},Xd=function(t,e,n){return e>0&&n(Lr(t,e-1),Lr(t,e))},Yd=function(t,e,n,r){var o=Nr(t).rows,i=X(o,function(r,o){var i=jd(t,o,e,n)||Xd(r,e,n);return i?[]:[Or(r,e)]});return Gd(t,i,n,r)},qd=function(t,e,n,r){var o=Nr(t).rows,i=o[e],a=X(i.cells,function(t,r){var a=jd(o,e,r,n)||Xd(i,r,n);return a?[]:[t]});return Gd(t,a,n,r)},Zd=function(t){var e=function(t,e){var n=E(t,function(t){return t.column===e.column});return n?t:t.concat([e])};return F(t,e,[]).sort(function(t,e){return t.column-e.column})},$d=function(t){var e=ar(t,"colspan",1),n=ar(t,"rowspan",1);return{element:t,colspan:e,rowspan:n}},Kd=function(t,e){void 0===e&&(e=$d);var n=Za(k.none()),r=function(e){switch($e(e.element)){case"col":return t.col(e);default:return t.cell(e)}},o=function(t){var n=e(t);return r(n)},i=function(t){var e=o(t);return n.get().isNone()&&n.set(k.some(e)),a=k.some({item:t,replacement:e}),e},a=k.none(),u=function(t,e){return a.fold(function(){return i(t)},function(n){return e(t,n.item)?n.replacement:i(t)})};return{getOrInit:u,cursor:n.get}},Jd=function(t,e){return function(n){var r=Za(k.none()),o=[],i=function(t,e){return U(o,function(n){return e(n.item,t)})},a=function(i){var a={scope:t},u=n.replace(i,e,a);return o.push({item:i,sub:u}),r.get().isNone()&&r.set(k.some(u)),u},u=function(t,e){return"col"===$e(t)?t:i(t,e).fold(function(){return a(t)},function(n){return e(t,n.item)?n.sub:a(t)})};return{replaceOrInit:u,cursor:r.get}}},Qd=function(t){return Yn(t,"scope").map(function(t){return t.substr(0,3)})},th=function(t){var e=Za(k.none()),n=function(n){e.get().isNone()&&e.set(k.some(n));var r=Qd(n);return r.each(function(t){return Gn(n,"scope",t)}),function(){var e=t.cell({element:n,colspan:1,rowspan:1});return or(e,"width"),or(n,"width"),r.each(function(t){return Gn(e,"scope",t)}),e}},r=function(t){var e=function(){var e=li(R(t,Qd));if(0===e.length)return k.none();var n=e[0],r=["row","col"],o=E(e,function(t){return t!==n&&L(r,t)});return o?k.none():k.from(n)};return or(t[0],"width"),e().fold(function(){return qn(t[0],"scope")},function(e){return Gn(t[0],"scope",e+"group")}),m(t[0])};return{unmerge:n,merge:r,cursor:e.get}},eh={modification:Kd,transform:Jd,merging:th},nh=["body","p","div","article","aside","figcaption","figure","footer","header","nav","section","ol","ul","table","thead","tfoot","tbody","caption","tr","td","th","h1","h2","h3","h4","h5","h6","blockquote","pre","address"],rh=function(t,e){var n=t.property().name(e);return L(["ol","ul"],n)},oh=function(t,e){var n=t.property().name(e);return L(nh,n)},ih=function(t,e){return L(["br","img","hr","input"],t.property().name(e))},ah=Do(),uh=function(t){return oh(ah,t)},sh=function(t){return rh(ah,t)},lh=function(t){return ih(ah,t)},ch=function(t){var e=function(t){return"br"===$e(t)},n=function(t){return Y(t,function(t){return e(t)||en(t)&&0===Co(t).trim().length})},r=function(t){return"li"===$e(t)||Rn(t,sh).isSome()},o=function(t){return hn(t).map(function(t){return!!uh(t)||!!lh(t)&&"img"!==$e(t)}).getOr(!1)},i=function(t){return gu(t).bind(function(n){var i=o(n);return ln(n).map(function(o){return!0===i||r(o)||e(n)||uh(o)&&!me(t,o)?[]:[fe.fromTag("br")]})}).getOr([])},a=function(){var e=X(t,function(t){var e=pn(t);return n(e)?[]:e.concat(i(t))});return 0===e.length?[fe.fromTag("br")]:e},u=a();bo(t[0]),yo(t[0],u)},fh=function(t){var e=vr(t);0===e.length&&xo(t)},dh=function(t,e){return{grid:t,cursor:e}},hh=function(t,e,n){var r=Nr(t).rows;return ph(r,e,n).orThunk(function(){return ph(r,0,0)})},ph=function(t,e,n){return k.from(t[e]).bind(function(t){return k.from(t.cells[n]).bind(function(t){return k.from(t.element)})})},gh=function(t,e,n){var r=Nr(t).rows;return dh(t,ph(r,e,n))},mh=function(t){var e=function(t,e){var n=E(t,function(t){return t.row===e.row});return n?t:t.concat([e])};return F(t,e,[]).sort(function(t,e){return t.row-e.row})},vh=function(t,e,n,r){var o=e[0].row,i=mh(e),a=H(i,function(t,e){var i=Vd(t.grid,o,e.row+t.delta,n,r.getOrInit);return{grid:i,delta:t.delta+1}},{grid:t,delta:0}).grid;return gh(a,o,e[0].column)},yh=function(t,e,n,r){var o=mh(e),i=o[o.length-1],a=i.row+i.rowspan,u=H(o,function(t,e){return Vd(t,a,e.row,n,r.getOrInit)},t);return gh(u,a,e[0].column)},bh=function(t,e,n,r){var o=e.details,i=Zd(o),a=i[0].column,u=H(i,function(t,e){var o=Fd(t.grid,a,e.column+t.delta,n,r.getOrInit);return{grid:o,delta:t.delta+1}},{grid:t,delta:0}).grid;return gh(u,o[0].row,a)},xh=function(t,e,n,r){var o=e.details,i=o[o.length-1],a=i.column+i.colspan,u=Zd(o),s=H(u,function(t,e){return Fd(t,a,e.column,n,r.getOrInit)},t);return gh(s,o[0].row,a)},wh=function(t,e,n,r){var o=qd(t,e.row,n,r.replaceOrInit);return gh(o,e.row,e.column)},_h=function(t,e,n,r){var o=mh(e),i=function(t,e){return qd(t,e.row,n,r.replaceOrInit)},a=F(o,i,t);return gh(a,e[0].row,e[0].column)},Sh=function(t,e,n,r){var o=Yd(t,e.column,n,r.replaceOrInit);return gh(o,e.row,e.column)},Ch=function(t,e,n,r){var o=Zd(e),i=function(t,e){return Yd(t,e.column,n,r.replaceOrInit)},a=F(o,i,t);return gh(a,e[0].row,e[0].column)},Mh=function(t,e,n,r){var o=qd(t,e.row,n,r.replaceOrInit);return gh(o,e.row,e.column)},Th=function(t,e,n,r){var o=mh(e),i=function(t,e){return qd(t,e.row,n,r.replaceOrInit)},a=F(o,i,t);return gh(a,e[0].row,e[0].column)},kh=function(t,e,n,r){var o=Yd(t,e.column,n,r.replaceOrInit);return gh(o,e.row,e.column)},Dh=function(t,e,n,r){var o=Zd(e),i=function(t,e){return Yd(t,e.column,n,r.replaceOrInit)},a=F(o,i,t);return gh(a,e[0].row,e[0].column)},Ah=function(t,e,n,r){var o=Zd(e.details),i=Wd(t,R(o,function(t){return t.column})),a=hh(i,o[0].row,o[0].column);return dh(i,a)},Ih=function(t,e,n,r){var o=mh(e),i=Ud(t,o[0].row,o[o.length-1].row),a=hh(i,e[0].row,e[0].column);return dh(i,a)},Oh=function(t,e,n,r){var o=e.cells;ch(o);var i=gd(t,e.bounds,n,r.merge(o));return dh(i,k.from(o[0]))},Lh=function(t,e,n,r){var o=function(t,e){return md(t,e,n,r.unmerge(e))},i=H(e,o,t);return dh(i,k.from(e[0]))},Eh=function(t,e,n,r){var o=function(t,e){var n=Zr.fromTable(t);return $f(n,e,!0)},i=o(e.clipboard,e.generators),a=Ve(e.row,e.column),u=Pd(a,t,i,e.generators,n);return u.fold(function(){return dh(t,k.some(e.element))},function(t){var n=hh(t,e.row,e.column);return dh(t,n)})},Nh=function(t,e,n){var r=Mr(t,n.section),o=Zr.generate(r);return $f(o,e,!0)},Rh=function(t,e,n,r){var o=Nr(t).rows,i=e.cells[0].column,a=o[e.cells[0].row],u=Nh(e.clipboard,e.generators,a),s=zd(i,t,u,e.generators,n),l=hh(s,e.cells[0].row,e.cells[0].column);return dh(s,l)},Ph=function(t,e,n,r){var o=Nr(t).rows,i=e.cells[e.cells.length-1].column+e.cells[e.cells.length-1].colspan,a=o[e.cells[0].row],u=Nh(e.clipboard,e.generators,a),s=zd(i,t,u,e.generators,n),l=hh(s,e.cells[0].row,e.cells[0].column);return dh(s,l)},zh=function(t,e,n,r){var o=Nr(t).rows,i=e.cells[0].row,a=o[i],u=Nh(e.clipboard,e.generators,a),s=Bd(i,t,u,e.generators,n),l=hh(s,e.cells[0].row,e.cells[0].column);return dh(s,l)},Bh=function(t,e,n,r){var o=Nr(t).rows,i=e.cells[e.cells.length-1].row+e.cells[e.cells.length-1].rowspan,a=o[e.cells[0].row],u=Nh(e.clipboard,e.generators,a),s=Bd(i,t,u,e.generators,n),l=hh(s,e.cells[0].row,e.cells[0].column);return dh(s,l)},Vh=function(t,e){var n=Zr.fromTable(t),r=sd(n,e);return r.bind(function(t){var e=t[t.length-1],r=t[0].column,o=e.column+e.colspan,i=j(R(n.all,function(t){return V(t.cells,function(t){return t.column>=r&&t.column<o})}));return Hh(i,function(t){return"th"===$e(t.element)})}).getOr("")},Hh=function(t,e){var n=V(t,e);return 0===n.length?k.some("td"):n.length===t.length?k.some("th"):k.none()},Fh=Ss,Wh=_s,Uh=function(t,e){return E(e,function(t){return 0===t.column&&t.isLocked})},Gh=function(t,e){return E(e,function(e){return e.column+e.colspan>=t.grid.columns&&e.isLocked})},jh=function(t,e){var n=vi(t),r=Zd(e);return F(r,function(t,e){var r=n[e.column],o=r.map(mi).getOr(0);return t+o},0)},Xh=function(t){return function(e,n){return sd(e,n).filter(function(n){var r=t?Uh:Gh;return!r(e,n)}).map(function(t){return{details:t,pixelDelta:jh(e,t)}})}},Yh=function(t,e){return cd(t,e).map(function(e){return{details:e,pixelDelta:-jh(t,e)}})},qh=function(t){return function(e,n){return id(e,n).filter(function(n){var r=t?Uh:Gh;return!r(e,n.cells)})}},Zh=nd(vh,sd,h,h,eh.modification),$h=nd(yh,sd,h,h,eh.modification),Kh=nd(bh,Xh(!0),Wh,h,eh.modification),Jh=nd(xh,Xh(!1),Wh,h,eh.modification),Qh=nd(Ah,Yh,Wh,fh,eh.modification),tp=nd(Ih,sd,h,fh,eh.modification),ep=(nd(Sh,ld,h,h,eh.transform("row","th")),nd(Ch,cd,h,h,eh.transform("row","th"))),np=(nd(kh,ld,h,h,eh.transform(null,"td")),nd(Dh,cd,h,h,eh.transform(null,"td"))),rp=(nd(wh,rd,h,h,eh.transform("col","th")),nd(_h,sd,h,h,eh.transform("col","th")),nd(Mh,rd,h,h,eh.transform(null,"td")),nd(Th,sd,h,h,eh.transform(null,"td")),nd(Oh,hd,Fh,h,eh.merging)),op=nd(Lh,pd,Fh,h,eh.merging),ip=nd(Eh,od,Fh,h,eh.modification),ap=nd(Rh,qh(!0),h,h,eh.modification),up=nd(Ph,qh(!1),h,h,eh.modification),sp=nd(zh,id,h,h,eh.modification),lp=nd(Bh,id,h,h,eh.modification),cp=Vh,fp=function(t){return Iu(t.parentNode)},dp=function(t){return"thead"===t?"header":"tfoot"===t?"footer":"body"},hp=function(t,e){var n="thead"===fp(e),r=!E(e.cells,function(t){return"th"!==Iu(t)});return n||r?k.some({thead:n,ths:r}):k.none()},pp=function(t,e){return dp(hp(t,e).fold(function(){return fp(e)},function(t){return"thead"}))},gp=function(t,e,n){var r=t.getParent(e,"table"),o=e.parentNode,i=Iu(o);if(n!==i){var a=t.select(n,r)[0];if(!a){a=t.create(n);var u=r.firstChild;"thead"===n?tt(Ln(fe.fromDom(r),"caption,colgroup")).fold(function(){return r.insertBefore(a,u)},function(e){return t.insertAfter(a,e.dom)}):r.appendChild(a)}"tbody"===n&&"thead"===i&&a.firstChild?a.insertBefore(e,a.firstChild):a.appendChild(e),o.hasChildNodes()||t.remove(o)}},mp=function(t,e,n){if(c(n)&&Iu(e)!==n){var r=t.dom.rename(e,n);return Oc(t,r),r}return e},vp=function(t,e,n,r){var o=t.dom,i=mp(t,e,n);return s(r)||o.setAttrib(i,"scope",r),i},yp=function(t,e,n,r){return P(e,function(e){return vp(t,e,n,r)})},bp=function(t,e,n){var r=function(){var n=br(fe.fromDom(e.cells[0])).map(function(t){return xr(t)}).getOr([]);return et(n,function(e){return hp(t,e.dom)}).map(function(t){return t.thead&&t.ths?"sectionCells":t.thead?"section":"cells"}).getOr("section")},o=t.dom;if("header"===n){var i=ff(t),a="auto"===i?r():i;yp(t,e.cells,"section"===a?"td":"th","col"),gp(o,e,"cells"===a?"tbody":"thead")}else yp(t,e.cells,"td",null),gp(o,e,"footer"===n?"tfoot":"tbody")},xp=function(t){return br(t).bind(function(t){return Yo(t,Qu.firstSelectedSelector)}).fold(function(){return t},function(t){return t[0]})},wp=function(t){return function(e,n){var r=$e(e),o="col"===r||"colgroup"===r?xp(e):e;return Wn(o,t,n)}},_p=wp("th,td"),Sp=wp("th,td,caption"),Cp=function(t,e,n){return _p(t,n).map(function(t){return Wu(e)}).getOr([])},Mp=function(t,e){var n=_p(t),r=n.bind(function(t){return br(t)}).map(function(t){return xr(t)});return ci(n,r,function(t,n){return V(n,function(n){return E(Au(n.dom.cells),function(n){return"1"===Xn(n,e)||me(n,t)})})}).getOr([])},Tp=function(t,e,n){var r=function(t){return"table"===$e(Ou(t))},o=function(e){return!1===r(t)||ol(e).rows>1},i=function(e){return!1===r(t)||ol(e).columns>1},a=gf(t),u=pf(t)?h:Vf,s=function(e,n,r,o,i){return function(u,s){zu(u);var l=o(),c=fe.fromDom(t.getDoc()),f=Tu(r,c,a),d=vf(t,u),h=pf(t)?As():Is();return n(u)?e(l,u,s,f,d,h).bind(function(e){return P(e.newRows,function(e){Ic(t,e.dom)}),P(e.newCells,function(e){Oc(t,e.dom)}),e.cursor.map(function(e){var n=Bf(e),r=t.dom.createRng();return r.setStart(n.element.dom,n.offset),r.setEnd(n.element.dom,n.offset),{rng:r,effect:i}})}):k.none()}},l=s(tp,o,h,e,Bc),c=s(Qh,i,h,e,Bc),f=s(Zh,_,h,e,Bc),d=s($h,_,h,e,Bc),p=s(Kh,_,u,e,Bc),g=s(Jh,_,u,e,Bc),m=s(rp,_,h,e,Bc),v=s(op,_,h,e,Bc),y=s(ap,_,h,e,Bc),b=s(up,_,h,e,Bc),x=s(sp,_,h,e,Bc),w=s(lp,_,h,e,Bc),S=s(ip,_,h,e,Bc),C=function(t,e){return Le(t,"type").filter(function(t){return L(e,t)})},M=function(t,e){return C(e,["td","th"]).each(function(e){var r=R(Cp(Fu(t),n),function(t){return t.dom});yp(t,r,e,null)})},T=function(t,e){return C(e,["header","body","footer"]).each(function(e){R(Mp(Fu(t),Qu.selected),function(n){return bp(t,n.dom,e)})})},D=s(ep,_,h,e,Bc),A=s(np,_,h,e,Bc),I=function(t){var e=Mp(Fu(t),Qu.selected);if(e.length>0){var n=R(e,function(e){return pp(t,e.dom)}),r=L(n,"header"),o=L(n,"footer");if(r||o){var i=L(n,"body");return!r||i||o?r||i||!o?"":"footer":"header"}return"body"}},O=function(t){return Hh(Cp(Fu(t),n),function(t){return"th"===$e(t)}).getOr("")},E=cp;return{deleteRow:l,deleteColumn:c,insertRowsBefore:f,insertRowsAfter:d,insertColumnsBefore:p,insertColumnsAfter:g,mergeCells:m,unmergeCells:v,pasteColsBefore:y,pasteColsAfter:b,pasteRowsBefore:x,pasteRowsAfter:w,pasteCells:S,setTableCellType:M,setTableRowType:T,makeColumnsHeader:D,unmakeColumnsHeader:A,getTableRowType:I,getTableCellType:O,getTableColType:E}},kp={styles:{"border-collapse":"collapse",width:"100%"},attributes:{border:"1"},colGroups:!1},Dp=function(){return fe.fromTag("th")},Ap=function(){return fe.fromTag("td")},Ip=function(){return fe.fromTag("col")},Op=function(t,e,n,r){for(var o=fe.fromTag("tr"),i=0;i<t;i++){var a=r<e||i<n?Dp():Ap();i<n&&Gn(a,"scope","row"),r<e&&Gn(a,"scope","col"),po(a,fe.fromTag("br")),po(o,a)}return o},Lp=function(t){var e=fe.fromTag("colgroup");return N(t,function(){return po(e,Ip())}),e},Ep=function(t,e,n,r){return N(t,function(t){return Op(e,n,r,t)})},Np=function(t,e,n,r,o,i){void 0===i&&(i=kp);var a=fe.fromTag("table"),u="cells"!==o;tr(a,i.styles),jn(a,i.attributes),i.colGroups&&po(a,Lp(e));var s=Math.min(t,n);if(u&&n>0){var l=fe.fromTag("thead");po(a,l);var c="sectionCells"===o?s:0,f=Ep(n,e,c,r);yo(l,f)}var d=fe.fromTag("tbody");po(a,d);var h=u?t-s:t,p=u?0:n,g=Ep(h,e,p,r);return yo(d,g),a},Rp=function(t){return t.dom.innerHTML},Pp=function(t){var e=fe.fromTag("div"),n=fe.fromDom(t.dom.cloneNode(!0));return po(e,n),Rp(e)},zp=function(t,e){t.selection.select(e.dom,!0),t.selection.collapse(!0)},Bp=function(t,e){Fn(e,"td,th").each(y(zp,t))},Vp=function(t,e){P(En(e,"tr"),function(e){Ic(t,e.dom),P(En(e,"th,td"),function(e){Oc(t,e.dom)})})},Hp=function(t){return o(t)&&-1!==t.indexOf("%")},Fp=function(t,e,n,r,o){var i=Yc(t),a={styles:i,attributes:Xc(t),colGroups:cf(t)};return t.undoManager.ignore(function(){var i=Np(n,e,o,r,ff(t),a);Gn(i,"data-mce-id","__mce");var u=Pp(i);t.insertContent(u),t.addVisual()}),Fn(Ou(t),'table[data-mce-id="__mce"]').map(function(e){return uf(t)?Sf(t,e):sf(t)?Cf(e):(af(t)||Hp(i.width))&&_f(t,e),zu(e),qn(e,"data-mce-id"),Vp(t,e),Bp(t,e),e.dom}).getOr(null)},Wp=function(t,e,n,r,o){void 0===r&&(r={});var i=function(t){return d(t)&&t>0};if(i(e)&&i(n)){var a=r.headerRows||0,u=r.headerColumns||0;return Fp(t,n,e,u,a)}return console.error(o),null},Up=function(t){return function(){return t().fold(function(){return[]},function(t){return R(t,function(t){return t.dom})})}},Gp=function(t){return function(e){var n=e.length>0?k.some(Au(e)):k.none();t(n)}},jp=function(t){return function(e,n,r){void 0===r&&(r={});var o=Wp(t,n,e,r,"Invalid values for insertTable - rows and columns values are required to insert a table.");return t.undoManager.add(),o}},Xp=function(t,e,n,r){return{insertTable:jp(t),setClipboardRows:Gp(e.setRows),getClipboardRows:Up(e.getRows),setClipboardCols:Gp(e.setColumns),getClipboardCols:Up(e.getColumns),resizeHandler:n,selectionTargets:r}},Yp=function(t,e,n){var r=ar(t,e,1);1===n||r<=1?qn(t,e):Gn(t,e,Math.min(n,r))},qp=function(t,e,n){if(Zr.hasColumns(t)){var r=V(Zr.justColumns(t),function(t){return t.column>=e&&t.column<n}),o=R(r,function(t){var r=ai(t.element);return Yp(r,"span",n-e),r}),i=fe.fromTag("colgroup");return yo(i,o),[i]}return[]},Zp=function(t,e,n){return R(t.all,function(t){var r=V(t.cells,function(t){return t.column>=e&&t.column<n}),o=R(r,function(t){var r=ai(t.element);return Yp(r,"colspan",n-e),r}),i=fe.fromTag("tr");return yo(i,o),i})},$p=function(t,e){var n=Zr.fromTable(t),r=cd(n,e);return r.map(function(t){var e=t[t.length-1],r=t[0].column,o=e.column+e.colspan,i=qp(n,r,o),a=Zp(n,r,o);return rt(i,a)})},Kp=function(t,e,n){var r=Zr.fromTable(t),o=sd(r,e);return o.bind(function(t){var e=$f(r,n,!1),o=Nr(e).rows,i=o.slice(t[0].row,t[t.length-1].row+t[t.length-1].rowspan),a=X(i,function(t){var e=V(t.cells,function(t){return!t.isLocked});return e.length>0?[nt(nt({},t),{cells:e})]:[]}),u=Qf(a,n);return di(u.length>0,u)}).map(function(t){return Gf(t)})},Jp=tinymce.util.Tools.resolve("tinymce.util.Tools"),Qp=function(t,e,n){var r,o=t.select("td,th",e),i=function(e,r){for(var o=0;o<r.length;o++){var i=t.getStyle(r[o],n);if("undefined"===typeof e&&(e=i),e!==i)return""}return e};return i(r,o)},tg=function(t,e,n){n&&t.formatter.apply("align"+n,{},e)},eg=function(t,e,n){n&&t.formatter.apply("valign"+n,{},e)},ng=function(t,e){Jp.each("left center right".split(" "),function(n){t.formatter.remove("align"+n,{},e)})},rg=function(t,e){Jp.each("top middle bottom".split(" "),function(n){t.formatter.remove("valign"+n,{},e)})},og=function(t){return Ne(t,"menu")},ig=function(t,e){var n=function(t,e){return e.concat(R(t,function(t){var e=t.text||t.title;return og(t)?{text:e,items:ig(t.menu)}:{text:e,value:t.value}}))};return n(t,e||[])},ag=function(t){return function(e){return yt(e,"rgb")?t.toHex(e):e}},ug=function(t,e){var n=fe.fromDom(e);return{borderwidth:rr(n,"border-width").getOr(""),borderstyle:rr(n,"border-style").getOr(""),bordercolor:rr(n,"border-color").map(ag(t)).getOr(""),backgroundcolor:rr(n,"background-color").map(ag(t)).getOr("")}},sg=function(t){var e=t[0],n=t.slice(1);return P(n,function(t){P(we(e),function(n){Se(t,function(t,r){var o=e[n];""!==o&&n===r&&o!==t&&(e[n]="")})})}),e},lg=function(t){var e=[{name:"borderstyle",type:"listbox",label:"Border style",items:[{text:"Select...",value:""},{text:"Solid",value:"solid"},{text:"Dotted",value:"dotted"},{text:"Dashed",value:"dashed"},{text:"Double",value:"double"},{text:"Groove",value:"groove"},{text:"Ridge",value:"ridge"},{text:"Inset",value:"inset"},{text:"Outset",value:"outset"},{text:"None",value:"none"},{text:"Hidden",value:"hidden"}]},{name:"bordercolor",type:"colorinput",label:"Border color"},{name:"backgroundcolor",type:"colorinput",label:"Background color"}],n={name:"borderwidth",type:"input",label:"Border width"},r="cell"===t?[n].concat(e):e;return{title:"Advanced",name:"advanced",items:r}},cg=function(t,e,n,r){return U(t,function(t){return n.formatter.matchNode(r,e+t)}).getOr("")},fg=y(cg,["left","center","right"],"align"),dg=y(cg,["top","middle","bottom"],"valign"),hg=function(t,e){var n=Yc(t),r=Xc(t),o=function(t){return{borderstyle:Le(n,"border-style").getOr(""),bordercolor:ag(t)(Le(n,"border-color").getOr("")),backgroundcolor:ag(t)(Le(n,"background-color").getOr(""))}},i={height:"",width:"100%",cellspacing:"",cellpadding:"",caption:!1,class:"",align:"",border:""},a=function(){var e=n["border-width"];return ef(t)&&e?{border:e}:Le(r,"border").fold(function(){return{}},function(t){return{border:t}})},u=e?o(t.dom):{},s=function(){var t=Le(n,"border-spacing").or(Le(r,"cellspacing")).fold(function(){return{}},function(t){return{cellspacing:t}}),e=Le(n,"border-padding").or(Le(r,"cellpadding")).fold(function(){return{}},function(t){return{cellpadding:t}});return nt(nt({},t),e)},l=nt(nt(nt(nt(nt(nt({},i),n),r),u),a()),s());return l},pg=function(t,e,n){var r=function(e,n){var r=rr(fe.fromDom(n),"border-width");return ef(t)&&r.isSome()?r.getOr(""):e.getAttrib(n,"border")||Qp(t.dom,n,"border-width")||Qp(t.dom,n,"border")},o=t.dom;return nt({width:o.getStyle(e,"width")||o.getAttrib(e,"width"),height:o.getStyle(e,"height")||o.getAttrib(e,"height"),cellspacing:o.getStyle(e,"border-spacing")||o.getAttrib(e,"cellspacing"),cellpadding:o.getAttrib(e,"cellpadding")||Qp(t.dom,e,"padding"),border:r(o,e),caption:!!o.select("caption",e)[0],class:o.getAttrib(e,"class",""),align:fg(t,e)},n?ug(o,e):{})},gg=function(t,e,n){var r=t.dom;return nt({height:r.getStyle(e,"height")||r.getAttrib(e,"height"),class:r.getAttrib(e,"class",""),type:pp(t,e),align:fg(t,e)},n?ug(r,e):{})},mg=function(t,e,n,r){var o=t.dom,i=r.getOr(e),a=function(t,e){return o.getStyle(t,e)||o.getAttrib(t,e)};return nt({width:a(i,"width"),height:a(e,"height"),scope:o.getAttrib(e,"scope"),celltype:Iu(e),class:o.getAttrib(e,"class",""),halign:fg(t,e),valign:dg(t,e)},n?ug(o,e):{})},vg=function(t){var e=ig(nf(t));return e.length>0?k.some({name:"class",type:"listbox",label:"Class",items:e}):k.none()},yg=[{name:"width",type:"input",label:"Width"},{name:"height",type:"input",label:"Height"},{name:"celltype",type:"listbox",label:"Cell type",items:[{text:"Cell",value:"td"},{text:"Header cell",value:"th"}]},{name:"scope",type:"listbox",label:"Scope",items:[{text:"None",value:""},{text:"Row",value:"row"},{text:"Column",value:"col"},{text:"Row group",value:"rowgroup"},{text:"Column group",value:"colgroup"}]},{name:"halign",type:"listbox",label:"Horizontal align",items:[{text:"None",value:""},{text:"Left",value:"left"},{text:"Center",value:"center"},{text:"Right",value:"right"}]},{name:"valign",type:"listbox",label:"Vertical align",items:[{text:"None",value:""},{text:"Top",value:"top"},{text:"Middle",value:"middle"},{text:"Bottom",value:"bottom"}]}],bg=function(t){return yg.concat(vg(t).toArray())},xg=function(t){return function(e,n){var r=e.dom,o=function(e,o){t&&!o||r.setAttrib(n,e,o)},i=function(e,o){t&&!o||r.setStyle(n,e,o)},a=function(r,o){t&&!o||(""===o?e.formatter.remove(r,{value:null},n,!0):e.formatter.apply(r,{value:o},n))};return{setAttrib:o,setStyle:i,setFormat:a}}},wg={normal:xg(!1),ifTruthy:xg(!0)},_g=function(t){return br(t[0]).map(function(e){var n=Zr.fromTable(e),r=Zr.justCells(n),o=V(r,function(e){return E(t,function(t){return me(e.element,t)})});return R(o,function(t){return{element:t.element.dom,column:Zr.getColumnAt(n,t.column).map(function(t){return t.element.dom})}})})},Sg=function(t,e,n){t.setAttrib("scope",n.scope),t.setAttrib("class",n.class),t.setStyle("height",Pu(n.height)),e.setStyle("width",Pu(n.width))},Cg=function(t,e){t.setFormat("tablecellbackgroundcolor",e.backgroundcolor),t.setFormat("tablecellbordercolor",e.bordercolor),t.setFormat("tablecellborderstyle",e.borderstyle),t.setFormat("tablecellborderwidth",Pu(e.borderwidth))},Mg=function(t,e,n,r){var o=1===e.length,i=De(r,function(t,e){return n[e]!==t});if(Oe(i)>0&&e.length>=1){var a=br(e[0]);_g(e).each(function(e){P(e,function(e){var n=vp(t,e.element,r.celltype),i=o?wg.normal(t,n):wg.ifTruthy(t,n),a=e.column.map(function(e){return o?wg.normal(t,e):wg.ifTruthy(t,e)}).getOr(i);Sg(i,a,r),$c(t)&&Cg(i,r),o&&(ng(t,n),rg(t,n)),r.halign&&tg(t,n,r.halign),r.valign&&eg(t,n,r.valign)})});var u=Oe(De(i,function(t,e){return"scope"!==e&&"celltype"!==e}))>0;a.each(function(e){return Pc(t,e.dom,{structure:Ee(i,"celltype"),style:u})})}},Tg=function(t,e,n,r){var o=r.getData();r.close(),t.undoManager.transact(function(){Mg(t,e,n,o),t.focus()})},kg=function(t,e){var n=_g(e).map(function(e){return R(e,function(e){return mg(t,e.element,$c(t),e.column)})});return sg(n.getOrDie())},Dg=function(t,e){var n=Cp(Fu(t),e);if(0!==n.length){var r=kg(t,n),o={type:"tabpanel",tabs:[{title:"General",name:"general",items:bg(t)},lg("cell")]},i={type:"panel",items:[{type:"grid",columns:2,items:bg(t)}]};t.windowManager.open({title:"Cell Properties",size:"normal",body:$c(t)?o:i,buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:r,onSubmit:y(Tg,t,n,r)})}},Ag=function(t){var e=ig(rf(t));return e.length>0?k.some({name:"class",type:"listbox",label:"Class",items:e}):k.none()},Ig=[{type:"listbox",name:"type",label:"Row type",items:[{text:"Header",value:"header"},{text:"Body",value:"body"},{text:"Footer",value:"footer"}]},{type:"listbox",name:"align",label:"Alignment",items:[{text:"None",value:""},{text:"Left",value:"left"},{text:"Center",value:"center"},{text:"Right",value:"right"}]},{label:"Height",name:"height",type:"input"}],Og=function(t){return Ig.concat(Ag(t).toArray())},Lg=function(t,e){t.setAttrib("class",e.class),t.setStyle("height",Pu(e.height))},Eg=function(t,e){t.setStyle("background-color",e.backgroundcolor),t.setStyle("border-color",e.bordercolor),t.setStyle("border-style",e.borderstyle)},Ng=function(t,e,n,r){var o=1===e.length,i=De(r,function(t,e){return n[e]!==t});if(Oe(i)>0){P(e,function(e){r.type!==Iu(e.parentNode)&&bp(t,e,r.type);var i=o?wg.normal(t,e):wg.ifTruthy(t,e);Lg(i,r),Kc(t)&&Eg(i,r),r.align!==n.align&&(ng(t,e),tg(t,e,r.align))});var a=Ee(i,"type"),u=!a||Oe(i)>1;br(fe.fromDom(e[0])).each(function(e){return Pc(t,e.dom,{structure:a,style:u})})}},Rg=function(t,e,n,r){var o=r.getData();r.close(),t.undoManager.transact(function(){Ng(t,e,n,o),t.focus()})},Pg=function(t){var e=Mp(Fu(t),Qu.selected);if(0!==e.length){var n=R(e,function(e){return gg(t,e.dom,Kc(t))}),r=sg(n),o={type:"tabpanel",tabs:[{title:"General",name:"general",items:Og(t)},lg("row")]},i={type:"panel",items:[{type:"grid",columns:2,items:Og(t)}]};t.windowManager.open({title:"Row Properties",size:"normal",body:Kc(t)?o:i,buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:r,onSubmit:y(Rg,t,R(e,function(t){return t.dom}),r)})}},zg=tinymce.util.Tools.resolve("tinymce.Env"),Bg=function(t,e,n){var r=n?[{type:"input",name:"cols",label:"Cols",inputMode:"numeric"},{type:"input",name:"rows",label:"Rows",inputMode:"numeric"}]:[],o=[{type:"input",name:"width",label:"Width"},{type:"input",name:"height",label:"Height"}],i=Qc(t)?[{type:"input",name:"cellspacing",label:"Cell spacing",inputMode:"numeric"},{type:"input",name:"cellpadding",label:"Cell padding",inputMode:"numeric"},{type:"input",name:"border",label:"Border width"},{type:"label",label:"Caption",items:[{type:"checkbox",name:"caption",label:"Show caption"}]}]:[],a=[{type:"listbox",name:"align",label:"Alignment",items:[{text:"None",value:""},{text:"Left",value:"left"},{text:"Center",value:"center"},{text:"Right",value:"right"}]}],u=e.length>0?[{type:"listbox",name:"class",label:"Class",items:e}]:[];return r.concat(o).concat(i).concat(a).concat(u)},Vg=function(t,e,n,r){if("TD"===e.tagName||"TH"===e.tagName)o(n)?t.setStyle(e,n,r):t.setStyle(e,n);else if(e.children)for(var i=0;i<e.children.length;i++)Vg(t,e.children[i],n,r)},Hg=function(t,e,n){var r=t.dom,o={},i={};if(o.class=n.class,i.height=Pu(n.height),r.getAttrib(e,"width")&&!ef(t)?o.width=Ru(n.width):i.width=Pu(n.width),ef(t)?(i["border-width"]=Pu(n.border),i["border-spacing"]=Pu(n.cellspacing)):(o.border=n.border,o.cellpadding=n.cellpadding,o.cellspacing=n.cellspacing),ef(t)&&e.children)for(var a=0;a<e.children.length;a++)Vg(r,e.children[a],{"border-width":Pu(n.border),padding:Pu(n.cellpadding)}),Jc(t)&&Vg(r,e.children[a],{"border-color":n.bordercolor});Jc(t)&&(i["background-color"]=n.backgroundcolor,i["border-color"]=n.bordercolor,i["border-style"]=n.borderstyle),o.style=r.serializeStyle(nt(nt({},Yc(t)),i)),r.setAttribs(e,nt(nt({},Xc(t)),o))},Fg=function(t,e,n,r){var o,i=t.dom,a=r.getData(),u=De(a,function(t,e){return n[e]!==t});r.close(),""===a.class&&delete a.class,t.undoManager.transact(function(){if(!e){var n=parseInt(a.cols,10)||1,r=parseInt(a.rows,10)||1;e=Fp(t,n,r,0,0)}if(Oe(u)>0&&(Hg(t,e,a),o=i.select("caption",e)[0],o&&!a.caption&&i.remove(o),!o&&a.caption&&(o=i.create("caption"),o.innerHTML=zg.ie?lu:'<br data-mce-bogus="1"/>',e.insertBefore(o,e.firstChild)),""===a.align?ng(t,e):tg(t,e,a.align)),t.focus(),t.addVisual(),Oe(u)>0){var s=Ee(u,"caption"),l=!s||Oe(u)>1;Pc(t,e,{structure:s,style:l})}})},Wg=function(t,e){var n,r=t.dom,o=hg(t,Jc(t));!1===e?(n=r.getParent(t.selection.getStart(),"table",t.getBody()),n?o=pg(t,n,Jc(t)):Jc(t)&&(o.borderstyle="",o.bordercolor="",o.backgroundcolor="")):(o.cols="1",o.rows="1",Jc(t)&&(o.borderstyle="",o.bordercolor="",o.backgroundcolor=""));var i=ig(of(t));i.length>0&&o.class&&(o.class=o.class.replace(/\s*mce\-item\-table\s*/g,""));var a={type:"grid",columns:2,items:Bg(t,i,e)},u=function(){return{type:"panel",items:[a]}},s=function(){return{type:"tabpanel",tabs:[{title:"General",name:"general",items:[a]},lg("table")]}},l=Jc(t)?s():u();t.windowManager.open({title:"Table Properties",size:"normal",body:l,onSubmit:y(Fg,t,n,o),buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:o})},Ug=function(t){return Sp(Fu(t),Nu(t))},Gg=function(t){return _p(Fu(t),Nu(t))},jg=function(t,e,n,r,a){var u=Nu(t),s=function(){return Ug(t).each(function(e){br(e,u).filter(b(u)).each(function(e){var n=fe.fromText("");if(fo(e,n),xo(e),t.dom.isEmpty(t.getBody()))t.setContent(""),t.selection.setCursorLocation();else{var r=t.dom.createRng();r.setStart(n.dom,0),r.setEnd(n.dom,0),t.selection.setRng(r),t.nodeChanged()}})})},l=function(e){return Ug(t).each(function(n){var r=sf(t)||uf(t)||af(t);r||br(n,u).each(function(n){"relative"!==e||tl(n)?"fixed"!==e||el(n)?"responsive"!==e||nl(n)||Cf(n):Sf(t,n):_f(t,n),zu(n),Pc(t,n.dom,Bc)})})},c=function(t){return br(t,u)},f=function(e){return function(r){t.selection.setRng(r.rng),t.focus(),n.clear(e),zu(e),Pc(t,e.dom,r.effect)}},d=function(e){return Gg(t).each(function(t){c(t).each(function(n){var o=es(r,n,t);e(n,o).each(f(n))})})},p=function(){return Gg(t).map(function(e){return c(e).bind(function(n){var o=es(r,n,e),i=Tu(h,fe.fromDom(t.getDoc()),k.none());return Kp(n,o,i)})})},g=function(){return Gg(t).map(function(t){return c(t).bind(function(e){var n=es(r,e,t);return $p(e,n)})})},m=function(e,n){return n().each(function(n){var o=R(n,function(t){return ai(t)});Gg(t).each(function(n){return c(n).each(function(i){var a=ku(fe.fromDom(t.getDoc())),u=rs(r,n,o,a);e(i,u).each(f(i))})})})};Se({mceTableSplitCells:function(){return d(e.unmergeCells)},mceTableMergeCells:function(){return d(e.mergeCells)},mceTableInsertRowBefore:function(){return d(e.insertRowsBefore)},mceTableInsertRowAfter:function(){return d(e.insertRowsAfter)},mceTableInsertColBefore:function(){return d(e.insertColumnsBefore)},mceTableInsertColAfter:function(){return d(e.insertColumnsAfter)},mceTableDeleteCol:function(){return d(e.deleteColumn)},mceTableDeleteRow:function(){return d(e.deleteRow)},mceTableCutCol:function(t){return g().each(function(t){a.setColumns(t),d(e.deleteColumn)})},mceTableCutRow:function(t){return p().each(function(t){a.setRows(t),d(e.deleteRow)})},mceTableCopyCol:function(t){return g().each(function(t){return a.setColumns(t)})},mceTableCopyRow:function(t){return p().each(function(t){return a.setRows(t)})},mceTablePasteColBefore:function(t){return m(e.pasteColsBefore,a.getColumns)},mceTablePasteColAfter:function(t){return m(e.pasteColsAfter,a.getColumns)},mceTablePasteRowBefore:function(t){return m(e.pasteRowsBefore,a.getRows)},mceTablePasteRowAfter:function(t){return m(e.pasteRowsAfter,a.getRows)},mceTableDelete:s,mceTableSizingMode:function(t,e){return l(e)}},function(e,n){return t.addCommand(n,e)});var v=function(t,e){e.each(function(e){Pc(t,e.dom,Bc)})};Se({mceTableCellType:function(n,r){var o=br(Fu(t),u);e.setTableCellType(t,r),v(t,o)},mceTableRowType:function(n,r){var o=br(Fu(t),u);e.setTableRowType(t,r),v(t,o)}},function(e,n){return t.addCommand(n,e)}),t.addCommand("mceTableColType",function(t,n){return Le(n,"type").each(function(t){return d("th"===t?e.makeColumnsHeader:e.unmakeColumnsHeader)})}),Se({mceTableProps:y(Wg,t,!1),mceTableRowProps:y(Pg,t),mceTableCellProps:y(Dg,t,r)},function(e,n){return t.addCommand(n,function(){return e()})}),t.addCommand("mceInsertTable",function(e,n){i(n)&&we(n).length>0?Wp(t,n.rows,n.columns,n.options,"Invalid values for mceInsertTable - rows and columns values are required to insert a table."):Wg(t,!0)}),t.addCommand("mceTableApplyCellStyle",function(e,n){var a=function(t){return"tablecell"+t.toLowerCase().replace("-","")};if(i(n)){var s=Cp(Fu(t),r,u);if(0!==s.length){var l=De(n,function(e,n){return t.formatter.has(a(n))&&o(e)});Re(l)||(Se(l,function(e,n){P(s,function(r){wg.normal(t,r.dom).setFormat(a(n),e)})}),c(s[0]).each(function(e){return Pc(t,e.dom,zc)}))}}})},Xg=function(t,e,n){var r=Nu(t),o=function(t){return br(t,r)};Se({mceTableRowType:function(){return e.getTableRowType(t)},mceTableCellType:function(){return e.getTableCellType(t)},mceTableColType:function(){return _p(Fu(t)).bind(function(t){return o(t).map(function(r){var o=es(n,r,t);return e.getTableColType(r,o)})}).getOr("")}},function(e,n){return t.addQueryValueHandler(n,e)})},Yg=function(){var t=Za(k.none()),e=Za(k.none()),n=function(t){t.set(k.none())};return{getRows:t.get,setRows:function(r){t.set(r),n(e)},clearRows:function(){return n(t)},getColumns:e.get,setColumns:function(r){e.set(r),n(t)},clearColumns:function(){return n(e)}}},qg={tablecellbackgroundcolor:{selector:"td,th",styles:{backgroundColor:"%value"},remove_similar:!0},tablecellbordercolor:{selector:"td,th",styles:{borderColor:"%value"},remove_similar:!0},tablecellborderstyle:{selector:"td,th",styles:{borderStyle:"%value"},remove_similar:!0},tablecellborderwidth:{selector:"td,th",styles:{borderWidth:"%value"},remove_similar:!0}},Zg=function(t){t.formatter.register(qg)},$g=$o.generate([{none:["current"]},{first:["current"]},{middle:["current","target"]},{last:["current"]}]),Kg=function(t){return void 0===t&&(t=void 0),$g.none(t)},Jg=nt(nt({},$g),{none:Kg}),Qg=function(t,e){return br(t,e).bind(function(e){var n=vr(e),r=G(n,function(e){return me(t,e)});return r.map(function(t){return{index:t,all:n}})})},tm=function(t,e){var n=Qg(t,e);return n.fold(function(){return Jg.none(t)},function(e){return e.index+1<e.all.length?Jg.middle(t,e.all[e.index+1]):Jg.last(t)})},em=function(t,e){var n=Qg(t,e);return n.fold(function(){return Jg.none()},function(e){return e.index-1>=0?Jg.middle(t,e.all[e.index-1]):Jg.first(t)})},nm=function(t,e,n,r){return{start:t,soffset:e,finish:n,foffset:r}},rm={create:nm},om=$o.generate([{before:["element"]},{on:["element","offset"]},{after:["element"]}]),im=function(t,e,n,r){return t.fold(e,n,r)},am=function(t){return t.fold(v,v,v)},um=om.before,sm=om.on,lm=om.after,cm={before:um,on:sm,after:lm,cata:im,getStart:am},fm=$o.generate([{domRange:["rng"]},{relative:["startSitu","finishSitu"]},{exact:["start","soffset","finish","foffset"]}]),dm=function(t){return fm.exact(t.start,t.soffset,t.finish,t.foffset)},hm=function(t){return t.match({domRange:function(t){return fe.fromDom(t.startContainer)},relative:function(t,e){return cm.getStart(t)},exact:function(t,e,n,r){return t}})},pm=fm.domRange,gm=fm.relative,mm=fm.exact,vm=function(t){var e=hm(t);return sn(e)},ym=rm.create,bm={domRange:pm,relative:gm,exact:mm,exactFromRange:dm,getWin:vm,range:ym},xm=function(t,e){var n=t.document.createRange();return wm(n,e),n},wm=function(t,e){return t.selectNodeContents(e.dom)},_m=function(t,e){e.fold(function(e){t.setStartBefore(e.dom)},function(e,n){t.setStart(e.dom,n)},function(e){t.setStartAfter(e.dom)})},Sm=function(t,e){e.fold(function(e){t.setEndBefore(e.dom)},function(e,n){t.setEnd(e.dom,n)},function(e){t.setEndAfter(e.dom)})},Cm=function(t,e,n){var r=t.document.createRange();return _m(r,e),Sm(r,n),r},Mm=function(t,e,n,r,o){var i=t.document.createRange();return i.setStart(e.dom,n),i.setEnd(r.dom,o),i},Tm=function(t){return{left:t.left,top:t.top,right:t.right,bottom:t.bottom,width:t.width,height:t.height}},km=function(t){var e=t.getClientRects(),n=e.length>0?e[0]:t.getBoundingClientRect();return n.width>0||n.height>0?k.some(n).map(Tm):k.none()},Dm=$o.generate([{ltr:["start","soffset","finish","foffset"]},{rtl:["start","soffset","finish","foffset"]}]),Am=function(t,e,n){return e(fe.fromDom(n.startContainer),n.startOffset,fe.fromDom(n.endContainer),n.endOffset)},Im=function(t,e){return e.match({domRange:function(t){return{ltr:m(t),rtl:k.none}},relative:function(e,n){return{ltr:ot(function(){return Cm(t,e,n)}),rtl:ot(function(){return k.some(Cm(t,n,e))})}},exact:function(e,n,r,o){return{ltr:ot(function(){return Mm(t,e,n,r,o)}),rtl:ot(function(){return k.some(Mm(t,r,o,e,n))})}}})},Om=function(t,e){var n=e.ltr();if(n.collapsed){var r=e.rtl().filter(function(t){return!1===t.collapsed});return r.map(function(t){return Dm.rtl(fe.fromDom(t.endContainer),t.endOffset,fe.fromDom(t.startContainer),t.startOffset)}).getOrThunk(function(){return Am(t,Dm.ltr,n)})}return Am(t,Dm.ltr,n)},Lm=function(t,e){var n=Im(t,e);return Om(t,n)},Em=function(t,e){var n=Lm(t,e);return n.match({ltr:function(e,n,r,o){var i=t.document.createRange();return i.setStart(e.dom,n),i.setEnd(r.dom,o),i},rtl:function(e,n,r,o){var i=t.document.createRange();return i.setStart(r.dom,o),i.setEnd(e.dom,n),i}})},Nm=(Dm.ltr,Dm.rtl,function(t,e,n,r,o){if(0===o)return 0;if(e===r)return o-1;for(var i=r,a=1;a<o;a++){var u=t(a),s=Math.abs(e-u.left);if(n<=u.bottom){if(n<u.top||s>i)return a-1;i=s}}return 0}),Rm=function(t,e,n){return e>=t.left&&e<=t.right&&n>=t.top&&n<=t.bottom},Pm=function(t,e,n,r,o){var i=function(n){var r=t.dom.createRange();return r.setStart(e.dom,n),r.collapse(!0),r},a=function(t){var e=i(t);return e.getBoundingClientRect()},u=Co(e).length,s=Nm(a,n,r,o.right,u);return i(s)},zm=function(t,e,n,r){var o=t.dom.createRange();o.selectNode(e.dom);var i=o.getClientRects(),a=et(i,function(t){return Rm(t,n,r)?k.some(t):k.none()});return a.map(function(o){return Pm(t,e,n,r,o)})},Bm=function(t,e,n,r){var o=t.dom.createRange(),i=pn(e);return et(i,function(e){return o.selectNode(e.dom),Rm(o.getBoundingClientRect(),n,r)?Vm(t,e,n,r):k.none()})},Vm=function(t,e,n,r){return en(e)?zm(t,e,n,r):Bm(t,e,n,r)},Hm=function(t,e,n,r){var o=t.dom.createRange();o.selectNode(e.dom);var i=o.getBoundingClientRect(),a=Math.max(i.left,Math.min(i.right,n)),u=Math.max(i.top,Math.min(i.bottom,r));return Vm(t,e,a,u)},Fm=!0,Wm=!1,Um=function(t,e){return e-t.left<t.right-e?Fm:Wm},Gm=function(t,e,n){var r=t.dom.createRange();return r.selectNode(e.dom),r.collapse(n),r},jm=function(t,e,n){var r=t.dom.createRange();r.selectNode(e.dom);var o=r.getBoundingClientRect(),i=Um(o,n),a=i===Fm?pu:gu;return a(e).map(function(e){return Gm(t,e,i)})},Xm=function(t,e,n){var r=e.dom.getBoundingClientRect(),o=Um(r,n);return k.some(Gm(t,e,o))},Ym=function(t,e,n){var r=0===pn(e).length?Xm:jm;return r(t,e,n)},qm=function(t,e,n){return k.from(t.dom.caretPositionFromPoint(e,n)).bind(function(e){if(null===e.offsetNode)return k.none();var n=t.dom.createRange();return n.setStart(e.offsetNode,e.offset),n.collapse(),k.some(n)})},Zm=function(t,e,n){return k.from(t.dom.caretRangeFromPoint(e,n))},$m=function(t,e,n,r){var o=t.dom.createRange();o.selectNode(e.dom);var i=o.getBoundingClientRect(),a=Math.max(i.left,Math.min(i.right,n)),u=Math.max(i.top,Math.min(i.bottom,r));return Hm(t,e,a,u)},Km=function(t,e,n){return fe.fromPoint(t,e,n).bind(function(r){var o=function(){return Ym(t,r,e)};return 0===pn(r).length?o():$m(t,r,e,n).orThunk(o)})},Jm=function(){return document.caretPositionFromPoint?qm:document.caretRangeFromPoint?Zm:Km}(),Qm=function(t,e,n){var r=fe.fromDom(t.document);return Jm(r,e,n).map(function(t){return rm.create(fe.fromDom(t.startContainer),t.startOffset,fe.fromDom(t.endContainer),t.endOffset)})},tv=function(t,e){var n=$e(t);return"input"===n?cm.after(t):L(["br","img"],n)?0===e?cm.before(t):cm.after(t):cm.on(t,e)},ev=function(t,e){var n=t.fold(cm.before,tv,cm.after),r=e.fold(cm.before,tv,cm.after);return bm.relative(n,r)},nv=function(t,e,n,r){var o=tv(t,e),i=tv(n,r);return bm.relative(o,i)},rv=function(t){return t.match({domRange:function(t){var e=fe.fromDom(t.startContainer),n=fe.fromDom(t.endContainer);return nv(e,t.startOffset,n,t.endOffset)},relative:ev,exact:nv})},ov=function(t,e,n,r){var o=an(t),i=o.dom.createRange();return i.setStart(t.dom,e),i.setEnd(n.dom,r),i},iv=function(t,e,n,r){var o=ov(t,e,n,r),i=me(t,n)&&e===r;return o.collapsed&&!i},av=function(t){return k.from(t.getSelection())},uv=function(t,e){av(t).each(function(t){t.removeAllRanges(),t.addRange(e)})},sv=function(t,e,n,r,o){var i=Mm(t,e,n,r,o);uv(t,i)},lv=function(t,e,n,r,o,i){e.collapse(n.dom,r),e.extend(o.dom,i)},cv=function(t,e){return Lm(t,e).match({ltr:function(e,n,r,o){sv(t,e,n,r,o)},rtl:function(e,n,r,o){av(t).each(function(i){if(i.setBaseAndExtent)i.setBaseAndExtent(e.dom,n,r.dom,o);else if(i.extend)try{lv(t,i,e,n,r,o)}catch(a){sv(t,r,o,e,n)}else sv(t,r,o,e,n)})}})},fv=function(t,e,n,r,o){var i=nv(e,n,r,o);cv(t,i)},dv=function(t,e,n){var r=ev(e,n);cv(t,r)},hv=function(t){var e=bm.getWin(t).dom,n=function(t,n,r,o){return Mm(e,t,n,r,o)},r=rv(t);return Lm(e,r).match({ltr:n,rtl:n})},pv=function(t){if(t.rangeCount>0){var e=t.getRangeAt(0),n=t.getRangeAt(t.rangeCount-1);return k.some(rm.create(fe.fromDom(e.startContainer),e.startOffset,fe.fromDom(n.endContainer),n.endOffset))}return k.none()},gv=function(t){if(null===t.anchorNode||null===t.focusNode)return pv(t);var e=fe.fromDom(t.anchorNode),n=fe.fromDom(t.focusNode);return iv(e,t.anchorOffset,n,t.focusOffset)?k.some(rm.create(e,t.anchorOffset,n,t.focusOffset)):pv(t)},mv=function(t,e){var n=xm(t,e);uv(t,n)},vv=function(t){return av(t).filter(function(t){return t.rangeCount>0}).bind(gv)},yv=function(t){return vv(t).map(function(t){return bm.exact(t.start,t.soffset,t.finish,t.foffset)})},bv=function(t,e){var n=Em(t,e);return km(n)},xv=function(t,e,n){return Qm(t,e,n)},wv=function(t){av(t).each(function(t){return t.removeAllRanges()})},_v=tinymce.util.Tools.resolve("tinymce.util.VK"),Sv=function(t,e,n){return kv(t,e,tm(n))},Cv=function(t,e,n){return kv(t,e,em(n))},Mv=function(t,e){var n=bm.exact(e,0,e,0);return hv(n)},Tv=function(t,e){var n=En(e,"tr");return tt(n).bind(function(e){return Fn(e,"td,th").map(function(e){return Mv(t,e)})})},kv=function(t,e,n){return n.fold(k.none,k.none,function(e,n){return pu(n).map(function(e){return Mv(t,e)})},function(n){return br(n,e).bind(function(e){return t.execCommand("mceTableInsertRowAfter"),Tv(t,e)})})},Dv=["table","li","dl"],Av=function(t,e,n){if(t.keyCode===_v.TAB){var r=Ou(e),o=function(t){var e=$e(t);return me(t,r)||L(Dv,e)},i=e.selection.getRng(),a=fe.fromDom(t.shiftKey?i.startContainer:i.endContainer);mr(a,o).each(function(r){t.preventDefault(),br(r,o).each(n.clear),e.selection.collapse(t.shiftKey);var i=t.shiftKey?Cv:Sv,a=i(e,o,r);a.each(function(t){e.selection.setRng(t)})})}},Iv=function(t,e){return{selection:t,kill:e}},Ov={create:Iv},Lv=function(t,e,n,r){return{start:cm.on(t,e),finish:cm.on(n,r)}},Ev={create:Lv},Nv=function(t,e){var n=Em(t,e);return rm.create(fe.fromDom(n.startContainer),n.startOffset,fe.fromDom(n.endContainer),n.endOffset)},Rv=Ev.create,Pv=function(t,e,n,r,o,i,a){return me(n,o)&&r===i?k.none():Wn(n,"td,th",e).bind(function(n){return Wn(o,"td,th",e).bind(function(r){return zv(t,e,n,r,a)})})},zv=function(t,e,n,r,o){return me(n,r)?k.none():Fo(n,r,e).bind(function(e){var r=e.boxes.getOr([]);return r.length>0?(o(t,r,e.start,e.finish),k.some(Ov.create(k.some(Rv(n,0,n,cu(n))),!0))):k.none()})},Bv=function(t,e,n,r,o){var i=function(t){return o.clearBeforeUpdate(n),o.selectRange(n,t.boxes,t.start,t.finish),t.boxes};return Xo(r,t,e,o.firstSelectedSelector,o.lastSelectedSelector).map(i)},Vv=function(t,e){return{item:t,mode:e}},Hv=function(t,e,n,r){return void 0===r&&(r=Fv),t.property().parent(e).map(function(t){return Vv(t,r)})},Fv=function(t,e,n,r){return void 0===r&&(r=Wv),n.sibling(t,e).map(function(t){return Vv(t,r)})},Wv=function(t,e,n,r){void 0===r&&(r=Wv);var o=t.property().children(e),i=n.first(o);return i.map(function(t){return Vv(t,r)})},Uv=[{current:Hv,next:Fv,fallback:k.none()},{current:Fv,next:Wv,fallback:k.some(Hv)},{current:Wv,next:Wv,fallback:k.some(Fv)}],Gv=function(t,e,n,r,o){void 0===o&&(o=Uv);var i=U(o,function(t){return t.current===n});return i.bind(function(n){return n.current(t,e,r,n.next).orThunk(function(){return n.fallback.bind(function(n){return Gv(t,e,n,r)})})})},jv=function(){var t=function(t,e){return t.query().prevSibling(e)},e=function(t){return t.length>0?k.some(t[t.length-1]):k.none()};return{sibling:t,first:e}},Xv=function(){var t=function(t,e){return t.query().nextSibling(e)},e=function(t){return t.length>0?k.some(t[0]):k.none()};return{sibling:t,first:e}},Yv={left:jv,right:Xv},qv=function(t,e,n,r,o,i){var a=Gv(t,e,r,o);return a.bind(function(e){return i(e.item)?k.none():n(e.item)?k.some(e.item):qv(t,e.item,n,e.mode,o,i)})},Zv=function(t,e,n,r){return qv(t,e,n,Fv,Yv.left(),r)},$v=function(t,e,n,r){return qv(t,e,n,Fv,Yv.right(),r)},Kv=function(t){return function(e){return 0===t.property().children(e).length}},Jv=function(t,e,n){return ty(t,e,Kv(t),n)},Qv=function(t,e,n){return ey(t,e,Kv(t),n)},ty=Zv,ey=$v,ny=Do(),ry=function(t,e){return Jv(ny,t,e)},oy=function(t,e){return Qv(ny,t,e)},iy=function(t,e,n){return ty(ny,t,e,n)},ay=function(t,e,n){return ey(ny,t,e,n)},uy=function(t,e,n){return Rn(t,e,n).isSome()},sy=$o.generate([{none:["message"]},{success:[]},{failedUp:["cell"]},{failedDown:["cell"]}]),ly=function(t,e,n){var r=t.getRect(e),o=t.getRect(n);return o.right>r.left&&o.left<r.right},cy=function(t){return Wn(t,"tr")},fy=function(t,e,n,r,o,i,a){return Wn(r,"td,th",a).bind(function(n){return Wn(e,"td,th",a).map(function(e){return me(n,e)?me(r,n)&&cu(n)===o?i(e):sy.none("in same cell"):Bo(cy,[n,e]).fold(function(){return ly(t,e,n)?sy.success():i(e)},function(t){return i(e)})})}).getOr(sy.none("default"))},dy=function(t,e,n,r,o){return t.fold(e,n,r,o)},hy=nt(nt({},sy),{verify:fy,cata:dy}),py=function(t,e,n,r){return{parent:t,children:e,element:n,index:r}},gy=function(t){return ln(t).bind(function(e){var n=pn(e);return my(n,t).map(function(r){return py(e,n,t,r)})})},my=function(t,e){return G(t,y(me,e))},vy=function(t){return"br"===$e(t)},yy=function(t,e,n){return e(t,n).bind(function(t){return en(t)&&0===Co(t).trim().length?yy(t,e,n):k.some(t)})},by=function(t,e,n){return n.traverse(e).orThunk(function(){return yy(e,n.gather,t)}).map(n.relative)},xy=function(t,e){return gn(t,e).filter(vy).orThunk(function(){return gn(t,e-1).filter(vy)})},wy=function(t,e,n,r){return xy(e,n).bind(function(e){return r.traverse(e).fold(function(){return yy(e,r.gather,t).map(r.relative)},function(t){return gy(t).map(function(t){return cm.on(t.parent,t.index)})})})},_y=function(t,e,n,r){var o=vy(e)?by(t,e,r):wy(t,e,n,r);return o.map(function(t){return{start:t,finish:t}})},Sy=function(t){return hy.cata(t,function(t){return k.none()},function(){return k.none()},function(t){return k.some(Lf(t,0))},function(t){return k.some(Lf(t,cu(t)))})},Cy=function(t,e){return{left:t.left,top:t.top+e,right:t.right,bottom:t.bottom+e}},My=function(t,e){return{left:t.left,top:t.top-e,right:t.right,bottom:t.bottom-e}},Ty=function(t,e,n){return{left:t.left+e,top:t.top+n,right:t.right+e,bottom:t.bottom+n}},ky=function(t){return t.top},Dy=function(t){return t.bottom},Ay=function(t,e,n){return n>=0&&n<cu(e)?t.getRangedRect(e,n,e,n+1):n>0?t.getRangedRect(e,n-1,e,n):k.none()},Iy=function(t){return{left:t.left,top:t.top,right:t.right,bottom:t.bottom}},Oy=function(t,e){return k.some(t.getRect(e))},Ly=function(t,e,n){return tn(e)?Oy(t,e).map(Iy):en(e)?Ay(t,e,n).map(Iy):k.none()},Ey=function(t,e){return tn(e)?Oy(t,e).map(Iy):en(e)?t.getRangedRect(e,0,e,cu(e)).map(Iy):k.none()},Ny=5,Ry=100,Py=$o.generate([{none:[]},{retry:["caret"]}]),zy=function(t,e){return t.left<e.left||Math.abs(e.right-t.left)<1||t.left>e.right},By=function(t,e,n){return Pn(e,uh).fold(w,function(e){return Ey(t,e).exists(function(t){return zy(n,t)})})},Vy=function(t,e,n,r,o){var i=Cy(o,Ny);return Math.abs(n.bottom-r.bottom)<1?Py.retry(i):n.top>o.bottom?Py.retry(i):n.top===o.bottom?Py.retry(Cy(o,1)):By(t,e,o)?Py.retry(Ty(i,Ny,0)):Py.none()},Hy=function(t,e,n,r,o){var i=My(o,Ny);return Math.abs(n.top-r.top)<1?Py.retry(i):n.bottom<o.top?Py.retry(i):n.bottom===o.top?Py.retry(My(o,1)):By(t,e,o)?Py.retry(Ty(i,Ny,0)):Py.none()},Fy={point:ky,adjuster:Hy,move:My,gather:ry},Wy={point:Dy,adjuster:Vy,move:Cy,gather:oy},Uy=function(t,e,n){return t.elementFromPoint(e,n).filter(function(t){return"table"===$e(t)}).isSome()},Gy=function(t,e,n,r,o){return jy(t,e,n,e.move(r,Ny),o)},jy=function(t,e,n,r,o){return 0===o?k.some(r):Uy(t,r.left,e.point(r))?Gy(t,e,n,r,o-1):t.situsFromPoint(r.left,e.point(r)).bind(function(i){return i.start.fold(k.none,function(i){return Ey(t,i).bind(function(a){return e.adjuster(t,i,a,n,r).fold(k.none,function(r){return jy(t,e,n,r,o-1)})}).orThunk(function(){return k.some(r)})},k.none)})},Xy=function(t,e){return t.situsFromPoint(e.left,e.bottom+Ny)},Yy=function(t,e){return t.situsFromPoint(e.left,e.top-Ny)},qy=function(t,e,n){return t.point(e)>n.getInnerHeight()?k.some(t.point(e)-n.getInnerHeight()):t.point(e)<0?k.some(-t.point(e)):k.none()},Zy=function(t,e,n){var r=t.move(n,Ny),o=jy(e,t,n,r,Ry).getOr(r);return qy(t,o,e).fold(function(){return e.situsFromPoint(o.left,t.point(o))},function(n){return e.scrollBy(0,n),e.situsFromPoint(o.left,t.point(o)-n)})},$y={tryUp:y(Zy,Fy),tryDown:y(Zy,Wy),ieTryUp:Yy,ieTryDown:Xy,getJumpSize:m(Ny)},Ky=20,Jy=function(t,e,n){return t.getSelection().bind(function(r){return _y(e,r.finish,r.foffset,n).fold(function(){return k.some(Lf(r.finish,r.foffset))},function(o){var i=t.fromSitus(o),a=hy.verify(t,r.finish,r.foffset,i.finish,i.foffset,n.failure,e);return Sy(a)})})},Qy=function(t,e,n,r,o,i){return 0===i?k.none():nb(t,e,n,r,o).bind(function(a){var u=t.fromSitus(a),s=hy.verify(t,n,r,u.finish,u.foffset,o.failure,e);return hy.cata(s,function(){return k.none()},function(){return k.some(a)},function(a){return me(n,a)&&0===r?tb(t,n,r,My,o):Qy(t,e,a,0,o,i-1)},function(a){return me(n,a)&&r===cu(a)?tb(t,n,r,Cy,o):Qy(t,e,a,cu(a),o,i-1)})})},tb=function(t,e,n,r,o){return Ly(t,e,n).bind(function(e){return eb(t,o,r(e,$y.getJumpSize()))})},eb=function(t,e,n){var r=Jt().browser;return r.isChrome()||r.isSafari()||r.isFirefox()||r.isEdge()?e.otherRetry(t,n):r.isIE()?e.ieRetry(t,n):k.none()},nb=function(t,e,n,r,o){return Ly(t,n,r).bind(function(e){return eb(t,o,e)})},rb=function(t,e,n){return Jy(t,e,n).bind(function(r){return Qy(t,e,r.element,r.offset,n,Ky).map(t.fromSitus)})},ob=function(t,e){return uy(t,function(t){return ln(t).exists(function(t){return me(t,e)})})},ib=function(t,e,n,r,o){return Wn(r,"td,th",e).bind(function(r){return Wn(r,"table",e).bind(function(i){return ob(o,i)?rb(t,e,n).bind(function(t){return Wn(t.finish,"td,th",e).map(function(e){return{start:r,finish:e,range:t}})}):k.none()})})},ab=function(t,e,n,r,o,i){return Jt().browser.isIE()?k.none():i(r,e).orThunk(function(){return ib(t,e,n,r,o).map(function(t){var e=t.range;return Ov.create(k.some(Rv(e.start,e.soffset,e.finish,e.foffset)),!0)})})},ub=function(t,e){return Wn(t,"tr",e).bind(function(t){return Wn(t,"table",e).bind(function(n){var r=En(n,"tr");return me(t,r[0])?iy(n,function(t){return gu(t).isSome()},e).map(function(t){var e=cu(t);return Ov.create(k.some(Rv(t,e,t,e)),!0)}):k.none()})})},sb=function(t,e){return Wn(t,"tr",e).bind(function(t){return Wn(t,"table",e).bind(function(n){var r=En(n,"tr");return me(t,r[r.length-1])?ay(n,function(t){return pu(t).isSome()},e).map(function(t){return Ov.create(k.some(Rv(t,0,t,0)),!0)}):k.none()})})},lb=function(t,e,n,r,o,i,a){return ib(t,n,r,o,i).bind(function(t){return zv(e,n,t.start,t.finish,a)})},cb=function(){var t=Za(k.none()),e=function(){return t.set(k.none())},n=function(e){return t.set(k.some(e))},r=function(){return t.get().isSome()},o=function(e){return t.get().each(e)};return{clear:e,set:n,isSet:r,on:o}},fb=function(t,e){return Wn(t,"td,th",e)},db=function(t,e,n,r){var o=cb(),i=o.clear,a=function(i){o.on(function(o){r.clearBeforeUpdate(e),fb(i.target,n).each(function(i){Fo(o,i,n).each(function(n){var a=n.boxes.getOr([]);(a.length>1||1===a.length&&!me(o,i))&&(r.selectRange(e,a,n.start,n.finish),t.selectContents(i))})})})},u=function(t){r.clear(e),fb(t.target,n).each(o.set)},s=function(t){a(t)},l=function(t){a(t),i()};return{clearstate:i,mousedown:u,mouseover:s,mouseup:l}},hb={traverse:hn,gather:oy,relative:cm.before,otherRetry:$y.tryDown,ieRetry:$y.ieTryDown,failure:hy.failedDown},pb={traverse:dn,gather:ry,relative:cm.before,otherRetry:$y.tryUp,ieRetry:$y.ieTryUp,failure:hy.failedUp},gb=function(t){return function(e){return e===t}},mb=gb(38),vb=gb(40),yb=function(t){return t>=37&&t<=40},bb={isBackward:gb(37),isForward:gb(39)},xb={isBackward:gb(39),isForward:gb(37)},wb=function(t){var e=void 0!==t?t.dom:document,n=e.body.scrollLeft||e.documentElement.scrollLeft,r=e.body.scrollTop||e.documentElement.scrollTop;return ki(n,r)},_b=function(t,e,n){var r=void 0!==n?n.dom:document,o=r.defaultView;o&&o.scrollBy(t,e)},Sb=function(t){var e=function(e,n){return fe.fromPoint(fe.fromDom(t.document),e,n)},n=function(t){return t.dom.getBoundingClientRect()},r=function(e,n,r,o){var i=bm.exact(e,n,r,o);return bv(t,i)},o=function(){return yv(t).map(function(e){return Nv(t,e)})},i=function(e){var n=bm.relative(e.start,e.finish);return Nv(t,n)},a=function(e,n){return xv(t,e,n).map(function(t){return Ev.create(t.start,t.soffset,t.finish,t.foffset)})},u=function(){wv(t)},s=function(e){void 0===e&&(e=!1),yv(t).each(function(n){return n.fold(function(t){return t.collapse(e)},function(n,r){var o=e?n:r;dv(t,o,o)},function(n,r,o,i){var a=e?n:o,u=e?r:i;fv(t,a,u,a,u)})})},l=function(e){mv(t,e)},c=function(e){fv(t,e.start,e.soffset,e.finish,e.foffset)},f=function(e,n){dv(t,e,n)},d=function(){return t.innerHeight},h=function(){var e=wb(fe.fromDom(t.document));return e.top},p=function(e,n){_b(e,n,fe.fromDom(t.document))};return{elementFromPoint:e,getRect:n,getRangedRect:r,getSelection:o,fromSitus:i,situsFromPoint:a,clearSelection:u,collapseSelection:s,setSelection:c,setRelativeSelection:f,selectContents:l,getInnerHeight:d,getScrollY:h,scrollBy:p}},Cb=function(t,e){return{rows:t,cols:e}},Mb=function(t,e,n,r){var o=Sb(t),i=db(o,e,n,r);return{clearstate:i.clearstate,mousedown:i.mousedown,mouseover:i.mouseover,mouseup:i.mouseup}},Tb=function(t,e,n,r){var o=Sb(t),i=function(){return r.clear(e),k.none()},a=function(t,a,u,s,l,c){var f=t.raw,d=f.which,h=!0===f.shiftKey,p=Wo(e,r.selectedSelector).fold(function(){return vb(d)&&h?y(lb,o,e,n,hb,s,a,r.selectRange):mb(d)&&h?y(lb,o,e,n,pb,s,a,r.selectRange):vb(d)?y(ab,o,n,hb,s,a,sb):mb(d)?y(ab,o,n,pb,s,a,ub):k.none},function(t){var n=function(n){return function(){var i=et(n,function(n){return Bv(n.rows,n.cols,e,t,r)});return i.fold(function(){return Go(e,r.firstSelectedSelector,r.lastSelectedSelector).map(function(t){var n=vb(d)||c.isForward(d)?cm.after:cm.before;return o.setRelativeSelection(cm.on(t.first,0),n(t.table)),r.clear(e),Ov.create(k.none(),!0)})},function(t){return k.some(Ov.create(k.none(),!0))})}};return vb(d)&&h?n([Cb(1,0)]):mb(d)&&h?n([Cb(-1,0)]):c.isBackward(d)&&h?n([Cb(0,-1),Cb(-1,0)]):c.isForward(d)&&h?n([Cb(0,1),Cb(1,0)]):yb(d)&&!1===h?i:k.none});return p()},u=function(t,o,i,a,u){return Wo(e,r.selectedSelector).fold(function(){var s=t.raw,l=s.which,c=!0===s.shiftKey;return!1===c?k.none():yb(l)?Pv(e,n,o,i,a,u,r.selectRange):k.none()},k.none)};return{keydown:a,keyup:u}},kb=function(t,e,n,r){var o=Sb(t);return function(t,i){r.clearBeforeUpdate(e),Fo(t,i,n).each(function(t){var n=t.boxes.getOr([]);r.selectRange(e,n,t.start,t.finish),o.selectContents(i),o.collapseSelection()})}},Db=function(t,e){P(e,function(e){Ul(t,e)})},Ab=function(t){return function(e){Fl(e,t)}},Ib=function(t){return function(e){Db(e,t)}},Ob=function(t){var e=Ab(t.selected),n=Ib([t.selected,t.lastSelected,t.firstSelected]),r=function(e){var r=En(e,t.selectedSelector);P(r,n)},o=function(n,o,i,a){r(n),P(o,e),Fl(i,t.firstSelected),Fl(a,t.lastSelected)};return{clearBeforeUpdate:r,clear:r,selectRange:o,selectedSelector:t.selectedSelector,firstSelectedSelector:t.firstSelectedSelector,lastSelectedSelector:t.lastSelectedSelector}},Lb=function(t,e,n){var r=function(e){qn(e,t.selected),qn(e,t.firstSelected),qn(e,t.lastSelected)},o=function(e){Gn(e,t.selected,"1")},i=function(t){a(t),n()},a=function(e){var n=En(e,t.selectedSelector);P(n,r)},u=function(n,r,a,u){i(n),P(r,o),Gn(a,t.firstSelected,"1"),Gn(u,t.lastSelected,"1"),e(r,a,u)};return{clearBeforeUpdate:a,clear:i,selectRange:u,selectedSelector:t.selectedSelector,firstSelectedSelector:t.firstSelectedSelector,lastSelectedSelector:t.lastSelectedSelector}},Eb={byClass:Ob,byAttr:Lb},Nb=function(t,e,n){var r=t.slice(0,e[e.length-1].row+1),o=Qf(r,n);return X(o,function(t){var n=t.cells.slice(0,e[e.length-1].column+1);return R(n,function(t){return t.element})})},Rb=function(t,e,n){var r=t.slice(e[0].row+e[0].rowspan-1,t.length),o=Qf(r,n);return X(o,function(t){var n=t.cells.slice(e[0].column+e[0].colspan-1,t.cells.length);return R(n,function(t){return t.element})})},Pb=function(t,e,n){var r=Zr.fromTable(t),o=sd(r,e);return o.map(function(t){var e=$f(r,n,!1),o=Nb(e,t,n),i=Rb(e,t,n);return{upOrLeftCells:o,downOrRightCells:i}})},zb=function(t){return!1===Gl(fe.fromDom(t.target),"ephox-snooker-resizer-bar")};function Bb(t,e,n){var r=function(e,r,o){n.targets().each(function(n){var i=br(r);i.each(function(i){var a=gf(t),u=Tu(h,fe.fromDom(t.getDoc()),a),s=Pb(i,n,u);Nc(t,e,r,o,s)})})},o=function(){return Rc(t)},i=Eb.byAttr(Qu,r,o);return t.on("init",function(n){var r=t.getWin(),o=Ou(t),a=Nu(t),u=function(){var e=t.selection,n=fe.fromDom(e.getStart()),r=fe.fromDom(e.getEnd()),a=Bo(br,[n,r]);a.fold(function(){return i.clear(o)},h)},s=Mb(r,o,a,i),l=Tb(r,o,a,i),c=kb(r,o,a,i),f=function(t){return!0===t.raw.shiftKey};t.on("TableSelectorChange",function(t){return c(t.start,t.finish)});var d=function(e,n){f(e)&&(n.kill&&e.kill(),n.selection.each(function(e){var n=bm.relative(e.start,e.finish),o=Em(r,n);t.selection.setRng(o)}))},p=function(e){var n=El(e);if(n.raw.shiftKey&&yb(n.raw.which)){var r=t.selection.getRng(),o=fe.fromDom(r.startContainer),i=fe.fromDom(r.endContainer);l.keyup(n,o,r.startOffset,i,r.endOffset).each(function(t){d(n,t)})}},g=function(n){var r=El(n);e().each(function(t){return t.hideBars()});var o=t.selection.getRng(),i=fe.fromDom(o.startContainer),a=fe.fromDom(o.endContainer),u=wi(bb,xb)(fe.fromDom(t.selection.getStart()));l.keydown(r,i,o.startOffset,a,o.endOffset,u).each(function(t){d(r,t)}),e().each(function(t){return t.showBars()})},m=function(t){return 0===t.button},v=function(t){return void 0===t.buttons||(!(!zg.browser.isEdge()||0!==t.buttons)||0!==(1&t.buttons))},y=function(t){s.clearstate()},b=function(t){m(t)&&zb(t)&&s.mousedown(El(t))},x=function(t){v(t)&&zb(t)&&s.mouseover(El(t))},w=function(t){m(t)&&zb(t)&&s.mouseup(El(t))},_=function(){var t=Za(fe.fromDom(o)),e=Za(0),n=function(n){var r=fe.fromDom(n.target);if("td"===$e(r)||"th"===$e(r)){var o=t.get(),i=e.get();me(o,r)&&n.timeStamp-i<300&&(n.preventDefault(),c(r,r))}t.set(r),e.set(n.timeStamp)};return{touchEnd:n}},S=_();t.on("dragstart",y),t.on("mousedown",b),t.on("mouseover",x),t.on("mouseup",w),t.on("touchend",S.touchEnd),t.on("keyup",p),t.on("keydown",g),t.on("NodeChange",u)}),{clear:i.clear}}var Vb=function(t,e){var n=Za(k.none()),r=Za([]),o=k.none(),i=on("caption"),a=function(t){return o.forall(function(e){return!e[t]})},u=function(){return Sp(Fu(t),Nu(t)).bind(function(t){var n=br(t);return n.map(function(n){return i(t)?ts(t):es(e,n,t)})})},s=function(t){var e=br(t.element);return e.map(function(e){var n=Zr.fromTable(e),r=sd(n,t).getOr([]),o=F(r,function(t,e){return e.isLocked&&(t.onAny=!0,0===e.column?t.onFirst=!0:e.column+e.colspan>=n.grid.columns&&(t.onLast=!0)),t},{onAny:!1,onFirst:!1,onLast:!1});return{mergeable:hd(n,t).isSome(),unmergeable:pd(n,t).isSome(),locked:o}})},l=function(){n.set(ot(u)()),o=n.get().bind(s),P(r.get(),function(t){return t()})},c=function(t,e){var o=function(){return n.get().fold(function(){t.setDisabled(!0)},function(n){t.setDisabled(e(n))})};return o(),r.set(r.get().concat([o])),function(){r.set(V(r.get(),function(t){return t!==o}))}},f=function(t){return o.exists(function(e){return e.locked[t]})},d=function(t){return c(t,function(t){return!1})},h=function(t){return c(t,function(t){return i(t.element)})},p=function(t){return function(e){return c(e,function(e){return i(e.element)||f(t)})}},g=function(t){return function(e){return c(e,function(e){return i(e.element)||t().isNone()})}},m=function(t,e){return function(n){return c(n,function(n){return i(n.element)||t().isNone()||f(e)})}},v=function(t){return c(t,function(t){return a("mergeable")})},y=function(t){return c(t,function(t){return a("unmergeable")})};return t.on("NodeChange ExecCommand TableSelectorChange",l),{onSetupTable:d,onSetupCellOrRow:h,onSetupColumn:p,onSetupPasteable:g,onSetupPasteableColumn:m,onSetupMergeable:v,onSetupUnmergeable:y,resetTargets:l,targets:function(){return n.get()}}},Hb=function(t,e,n){t.ui.registry.addMenuButton("table",{tooltip:"Table",icon:"table",fetch:function(t){return t("inserttable | cell row column | advtablesort | tableprops deletetable")}});var r=function(e){return function(){return t.execCommand(e)}};t.ui.registry.addButton("tableprops",{tooltip:"Table properties",onAction:r("mceTableProps"),icon:"table",onSetup:e.onSetupTable}),t.ui.registry.addButton("tabledelete",{tooltip:"Delete table",onAction:r("mceTableDelete"),icon:"table-delete-table",onSetup:e.onSetupTable}),t.ui.registry.addButton("tablecellprops",{tooltip:"Cell properties",onAction:r("mceTableCellProps"),icon:"table-cell-properties",onSetup:e.onSetupCellOrRow}),t.ui.registry.addButton("tablemergecells",{tooltip:"Merge cells",onAction:r("mceTableMergeCells"),icon:"table-merge-cells",onSetup:e.onSetupMergeable}),t.ui.registry.addButton("tablesplitcells",{tooltip:"Split cell",onAction:r("mceTableSplitCells"),icon:"table-split-cells",onSetup:e.onSetupUnmergeable}),t.ui.registry.addButton("tableinsertrowbefore",{tooltip:"Insert row before",onAction:r("mceTableInsertRowBefore"),icon:"table-insert-row-above",onSetup:e.onSetupCellOrRow}),t.ui.registry.addButton("tableinsertrowafter",{tooltip:"Insert row after",onAction:r("mceTableInsertRowAfter"),icon:"table-insert-row-after",onSetup:e.onSetupCellOrRow}),t.ui.registry.addButton("tabledeleterow",{tooltip:"Delete row",onAction:r("mceTableDeleteRow"),icon:"table-delete-row",onSetup:e.onSetupCellOrRow}),t.ui.registry.addButton("tablerowprops",{tooltip:"Row properties",onAction:r("mceTableRowProps"),icon:"table-row-properties",onSetup:e.onSetupCellOrRow}),t.ui.registry.addButton("tableinsertcolbefore",{tooltip:"Insert column before",onAction:r("mceTableInsertColBefore"),icon:"table-insert-column-before",onSetup:e.onSetupColumn("onFirst")}),t.ui.registry.addButton("tableinsertcolafter",{tooltip:"Insert column after",onAction:r("mceTableInsertColAfter"),icon:"table-insert-column-after",onSetup:e.onSetupColumn("onLast")}),t.ui.registry.addButton("tabledeletecol",{tooltip:"Delete column",onAction:r("mceTableDeleteCol"),icon:"table-delete-column",onSetup:e.onSetupColumn("onAny")}),t.ui.registry.addButton("tablecutrow",{tooltip:"Cut row",icon:"cut-row",onAction:r("mceTableCutRow"),onSetup:e.onSetupCellOrRow}),t.ui.registry.addButton("tablecopyrow",{tooltip:"Copy row",icon:"duplicate-row",onAction:r("mceTableCopyRow"),onSetup:e.onSetupCellOrRow}),t.ui.registry.addButton("tablepasterowbefore",{tooltip:"Paste row before",icon:"paste-row-before",onAction:r("mceTablePasteRowBefore"),onSetup:e.onSetupPasteable(n.getRows)}),t.ui.registry.addButton("tablepasterowafter",{tooltip:"Paste row after",icon:"paste-row-after",onAction:r("mceTablePasteRowAfter"),onSetup:e.onSetupPasteable(n.getRows)}),t.ui.registry.addButton("tablecutcol",{tooltip:"Cut column",icon:"cut-column",onAction:r("mceTableCutCol"),onSetup:e.onSetupColumn("onAny")}),t.ui.registry.addButton("tablecopycol",{tooltip:"Copy column",icon:"duplicate-column",onAction:r("mceTableCopyCol"),onSetup:e.onSetupColumn("onAny")}),t.ui.registry.addButton("tablepastecolbefore",{tooltip:"Paste column before",icon:"paste-column-before",onAction:r("mceTablePasteColBefore"),onSetup:e.onSetupPasteableColumn(n.getColumns,"onFirst")}),t.ui.registry.addButton("tablepastecolafter",{tooltip:"Paste column after",icon:"paste-column-after",onAction:r("mceTablePasteColAfter"),onSetup:e.onSetupPasteableColumn(n.getColumns,"onLast")}),t.ui.registry.addButton("tableinsertdialog",{tooltip:"Insert table",onAction:r("mceInsertTable"),icon:"table"})},Fb=function(t){var e=function(e){return t.dom.is(e,"table")&&t.getBody().contains(e)},n=lf(t);n.length>0&&t.ui.registry.addContextToolbar("table",{predicate:e,items:n,scope:"node",position:"node"})},Wb=function(t,e,n){var r=function(e){return function(){return t.execCommand(e)}},o=function(e){t.execCommand("mceInsertTable",!1,{rows:e.numRows,columns:e.numColumns})},i={text:"Table properties",onSetup:e.onSetupTable,onAction:r("mceTableProps")},a={text:"Delete table",icon:"table-delete-table",onSetup:e.onSetupTable,onAction:r("mceTableDelete")};t.ui.registry.addMenuItem("tableinsertrowbefore",{text:"Insert row before",icon:"table-insert-row-above",onAction:r("mceTableInsertRowBefore"),onSetup:e.onSetupCellOrRow}),t.ui.registry.addMenuItem("tableinsertrowafter",{text:"Insert row after",icon:"table-insert-row-after",onAction:r("mceTableInsertRowAfter"),onSetup:e.onSetupCellOrRow}),t.ui.registry.addMenuItem("tabledeleterow",{text:"Delete row",icon:"table-delete-row",onAction:r("mceTableDeleteRow"),onSetup:e.onSetupCellOrRow}),t.ui.registry.addMenuItem("tablerowprops",{text:"Row properties",icon:"table-row-properties",onAction:r("mceTableRowProps"),onSetup:e.onSetupCellOrRow}),t.ui.registry.addMenuItem("tablecutrow",{text:"Cut row",icon:"cut-row",onAction:r("mceTableCutRow"),onSetup:e.onSetupCellOrRow}),t.ui.registry.addMenuItem("tablecopyrow",{text:"Copy row",icon:"duplicate-row",onAction:r("mceTableCopyRow"),onSetup:e.onSetupCellOrRow}),t.ui.registry.addMenuItem("tablepasterowbefore",{text:"Paste row before",icon:"paste-row-before",onAction:r("mceTablePasteRowBefore"),onSetup:e.onSetupPasteable(n.getRows)}),t.ui.registry.addMenuItem("tablepasterowafter",{text:"Paste row after",icon:"paste-row-after",onAction:r("mceTablePasteRowAfter"),onSetup:e.onSetupPasteable(n.getRows)});var u={type:"nestedmenuitem",text:"Row",getSubmenuItems:function(){return"tableinsertrowbefore tableinsertrowafter tabledeleterow tablerowprops | tablecutrow tablecopyrow tablepasterowbefore tablepasterowafter"}};t.ui.registry.addMenuItem("tableinsertcolumnbefore",{text:"Insert column before",icon:"table-insert-column-before",onAction:r("mceTableInsertColBefore"),onSetup:e.onSetupColumn("onFirst")}),t.ui.registry.addMenuItem("tableinsertcolumnafter",{text:"Insert column after",icon:"table-insert-column-after",onAction:r("mceTableInsertColAfter"),onSetup:e.onSetupColumn("onLast")}),t.ui.registry.addMenuItem("tabledeletecolumn",{text:"Delete column",icon:"table-delete-column",onAction:r("mceTableDeleteCol"),onSetup:e.onSetupColumn("onAny")}),t.ui.registry.addMenuItem("tablecutcolumn",{text:"Cut column",icon:"cut-column",onAction:r("mceTableCutCol"),onSetup:e.onSetupColumn("onAny")}),t.ui.registry.addMenuItem("tablecopycolumn",{text:"Copy column",icon:"duplicate-column",onAction:r("mceTableCopyCol"),onSetup:e.onSetupColumn("onAny")}),t.ui.registry.addMenuItem("tablepastecolumnbefore",{text:"Paste column before",icon:"paste-column-before",onAction:r("mceTablePasteColBefore"),onSetup:e.onSetupPasteableColumn(n.getColumns,"onFirst")}),t.ui.registry.addMenuItem("tablepastecolumnafter",{text:"Paste column after",icon:"paste-column-after",onAction:r("mceTablePasteColAfter"),onSetup:e.onSetupPasteableColumn(n.getColumns,"onLast")});var s={type:"nestedmenuitem",text:"Column",getSubmenuItems:function(){return"tableinsertcolumnbefore tableinsertcolumnafter tabledeletecolumn | tablecutcolumn tablecopycolumn tablepastecolumnbefore tablepastecolumnafter"}};t.ui.registry.addMenuItem("tablecellprops",{text:"Cell properties",icon:"table-cell-properties",onAction:r("mceTableCellProps"),onSetup:e.onSetupCellOrRow}),t.ui.registry.addMenuItem("tablemergecells",{text:"Merge cells",icon:"table-merge-cells",onAction:r("mceTableMergeCells"),onSetup:e.onSetupMergeable}),t.ui.registry.addMenuItem("tablesplitcells",{text:"Split cell",icon:"table-split-cells",onAction:r("mceTableSplitCells"),onSetup:e.onSetupUnmergeable});var l={type:"nestedmenuitem",text:"Cell",getSubmenuItems:function(){return"tablecellprops tablemergecells tablesplitcells"}};!1===tf(t)?t.ui.registry.addMenuItem("inserttable",{text:"Table",icon:"table",onAction:r("mceInsertTable")}):t.ui.registry.addNestedMenuItem("inserttable",{text:"Table",icon:"table",getSubmenuItems:function(){return[{type:"fancymenuitem",fancytype:"inserttable",onAction:o}]}}),t.ui.registry.addMenuItem("inserttabledialog",{text:"Insert table",icon:"table",onAction:r("mceInsertTable")}),t.ui.registry.addMenuItem("tableprops",i),t.ui.registry.addMenuItem("deletetable",a),t.ui.registry.addNestedMenuItem("row",u),t.ui.registry.addNestedMenuItem("column",s),t.ui.registry.addNestedMenuItem("cell",l),t.ui.registry.addContextMenu("table",{update:function(){return e.resetTargets(),e.targets().fold(function(){return""},function(t){return"caption"===$e(t.element)?"tableprops deletetable":"cell row column | advtablesort | tableprops deletetable"})}})},Ub=function(t){var e=ni(function(){return Ou(t)},function(){return Sp(Fu(t))},Qu.selectedSelector),n=Vb(t,e),r=Of(t),o=Bb(t,r.lazyResize,n),i=Tp(t,r.lazyWire,e),a=Yg();return jg(t,i,o,e,a),Xg(t,i,e),us(t,e,i,o),Wb(t,n,a),Hb(t,n,a),Fb(t),t.on("PreInit",function(){t.serializer.addTempAttr(Qu.firstSelected),t.serializer.addTempAttr(Qu.lastSelected),Zg(t)}),Zc(t)&&t.on("keydown",function(e){Av(e,t,o)}),t.on("remove",function(){r.destroy()}),Xp(t,a,r,n)};function Gb(){ri.add("table",Ub)}Gb()})()},"95d5":function(t,e,n){var r=n("40c3"),o=n("5168")("iterator"),i=n("481b");t.exports=n("584a").isIterable=function(t){var e=Object(t);return void 0!==e[o]||"@@iterator"in e||i.hasOwnProperty(r(e))}},a745:function(t,e,n){t.exports=n("f410")},aa77:function(t,e,n){var r=n("5ca1"),o=n("be13"),i=n("79e5"),a=n("fdef"),u="["+a+"]",s="​",l=RegExp("^"+u+u+"*"),c=RegExp(u+u+"*$"),f=function(t,e,n){var o={},u=i(function(){return!!a[t]()||s[t]()!=s}),l=o[t]=u?e(d):a[t];n&&(o[n]=l),r(r.P+r.F*u,"String",o)},d=f.trim=function(t,e){return t=String(o(t)),1&e&&(t=t.replace(l,"")),2&e&&(t=t.replace(c,"")),t};t.exports=f},b0dc:function(t,e,n){var r=n("e4ae");t.exports=function(t,e,n,o){try{return o?e(r(n)[0],n[1]):e(n)}catch(a){var i=t["return"];throw void 0!==i&&r(i.call(t)),a}}},c4a9:function(t,e,n){"use strict";(function(t){n.d(e,"a",function(){return o});var r=function(){return"undefined"!==typeof window?window:t},o=function(){var t=r();return t&&t.tinymce?t.tinymce:null}}).call(this,n("c8ba"))},c5f6:function(t,e,n){"use strict";var r=n("7726"),o=n("69a8"),i=n("2d95"),a=n("5dbc"),u=n("6a99"),s=n("79e5"),l=n("9093").f,c=n("11e9").f,f=n("86cc").f,d=n("aa77").trim,h="Number",p=r[h],g=p,m=p.prototype,v=i(n("2aeb")(m))==h,y="trim"in String.prototype,b=function(t){var e=u(t,!1);if("string"==typeof e&&e.length>2){e=y?e.trim():d(e,3);var n,r,o,i=e.charCodeAt(0);if(43===i||45===i){if(n=e.charCodeAt(2),88===n||120===n)return NaN}else if(48===i){switch(e.charCodeAt(1)){case 66:case 98:r=2,o=49;break;case 79:case 111:r=8,o=55;break;default:return+e}for(var a,s=e.slice(2),l=0,c=s.length;l<c;l++)if(a=s.charCodeAt(l),a<48||a>o)return NaN;return parseInt(s,r)}}return+e};if(!p(" 0o1")||!p("0b1")||p("+0x1")){p=function(t){var e=arguments.length<1?0:t,n=this;return n instanceof p&&(v?s(function(){m.valueOf.call(n)}):i(n)!=h)?a(new g(b(e)),n,p):b(e)};for(var x,w=n("9e1e")?l(g):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),_=0;w.length>_;_++)o(g,x=w[_])&&!o(p,x)&&f(p,x,c(g,x));p.prototype=m,m.constructor=p,n("2aba")(r,h,p)}},c8bb:function(t,e,n){t.exports=n("54a1")},ca72:function(t,e,n){"use strict";var r=["onActivate","onAddUndo","onBeforeAddUndo","onBeforeExecCommand","onBeforeGetContent","onBeforeRenderUI","onBeforeSetContent","onBeforePaste","onBlur","onChange","onClearUndos","onClick","onContextMenu","onCopy","onCut","onDblclick","onDeactivate","onDirty","onDrag","onDragDrop","onDragEnd","onDragGesture","onDragOver","onDrop","onExecCommand","onFocus","onFocusIn","onFocusOut","onGetContent","onHide","onInit","onKeyDown","onKeyPress","onKeyUp","onLoadContent","onMouseDown","onMouseEnter","onMouseLeave","onMouseMove","onMouseOut","onMouseOver","onMouseUp","onNodeChange","onObjectResizeStart","onObjectResized","onObjectSelected","onPaste","onPostProcess","onPostRender","onPreProcess","onProgressState","onRedo","onRemove","onReset","onSaveContent","onSelectionChange","onSetAttrib","onSetContent","onShow","onSubmit","onUndo","onVisualAid"],o=function(t){return-1!==r.map(function(t){return t.toLowerCase()}).indexOf(t.toLowerCase())},i=function(t,e,n){Object.keys(e).filter(o).forEach(function(r){var o=e[r];"function"===typeof o&&("onInit"===r?o(t,n):n.on(r.substring(2),function(t){return o(t,n)}))})},a=function(t,e){var n=t.$props.modelEvents?t.$props.modelEvents:null,r=Array.isArray(n)?n.join(" "):n;e.on(r||"change input undo redo",function(){t.$emit("input",e.getContent({format:t.$props.outputFormat}))})},u=function(t,e,n){var r=e.$props.value?e.$props.value:"",o=e.$props.initialValue?e.$props.initialValue:"";n.setContent(r||(e.initialized?e.cache:o)),e.$watch("value",function(t,r){n&&"string"===typeof t&&t!==r&&t!==n.getContent({format:e.$props.outputFormat})&&n.setContent(t)}),e.$listeners.input&&a(e,n),i(t,e.$listeners,n),e.initialized=!0},s=0,l=function(t){var e=Date.now(),n=Math.floor(1e9*Math.random());return s++,t+"_"+n+s+String(e)},c=function(t){return null!==t&&"textarea"===t.tagName.toLowerCase()},f=function(t){return"undefined"===typeof t||""===t?[]:Array.isArray(t)?t:t.split(" ")},d=function(t,e){return f(t).concat(f(e))},h=function(t){return null===t||void 0===t},p=function(){return{listeners:[],scriptId:l("tiny-script"),scriptLoaded:!1}},g=function(){var t=p(),e=function(t,e,n,r){var o=e.createElement("script");o.referrerPolicy="origin",o.type="application/javascript",o.id=t,o.src=n;var i=function(){o.removeEventListener("load",i),r()};o.addEventListener("load",i),e.head&&e.head.appendChild(o)},n=function(n,r,o){t.scriptLoaded?o():(t.listeners.push(o),n.getElementById(t.scriptId)||e(t.scriptId,n,r,function(){t.listeners.forEach(function(t){return t()}),t.scriptLoaded=!0}))},r=function(){t=p()};return{load:n,reinitialize:r}},m=g(),v=n("c4a9"),y={apiKey:String,cloudChannel:String,id:String,init:Object,initialValue:String,inline:Boolean,modelEvents:[String,Array],plugins:[String,Array],tagName:String,toolbar:[String,Array],value:String,disabled:Boolean,tinymceScriptSrc:String,outputFormat:{type:String,validator:function(t){return"html"===t||"text"===t}}},b=function(){return b=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n],e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},b.apply(this,arguments)},x=function(t,e,n){return t(n||"div",{attrs:{id:e}})},w=function(t,e){return t("textarea",{attrs:{id:e},style:{visibility:"hidden"}})},_=function(t){return function(){var e=b(b({},t.$props.init),{readonly:t.$props.disabled,selector:"#"+t.elementId,plugins:d(t.$props.init&&t.$props.init.plugins,t.$props.plugins),toolbar:t.$props.toolbar||t.$props.init&&t.$props.init.toolbar,inline:t.inlineEditor,setup:function(e){t.editor=e,e.on("init",function(n){return u(n,t,e)}),t.$props.init&&"function"===typeof t.$props.init.setup&&t.$props.init.setup(e)}});c(t.element)&&(t.element.style.visibility="",t.element.style.display=""),Object(v["a"])().init(e)}},S={props:y,created:function(){this.elementId=this.$props.id||l("tiny-vue"),this.inlineEditor=this.$props.init&&this.$props.init.inline||this.$props.inline,this.initialized=!1},watch:{disabled:function(){this.editor.setMode(this.disabled?"readonly":"design")}},mounted:function(){if(this.element=this.$el,null!==Object(v["a"])())_(this)();else if(this.element&&this.element.ownerDocument){var t=this.$props.cloudChannel?this.$props.cloudChannel:"5",e=this.$props.apiKey?this.$props.apiKey:"no-api-key",n=h(this.$props.tinymceScriptSrc)?"https://cdn.tiny.cloud/1/"+e+"/tinymce/"+t+"/tinymce.min.js":this.$props.tinymceScriptSrc;m.load(this.element.ownerDocument,n,_(this))}},beforeDestroy:function(){null!==Object(v["a"])()&&Object(v["a"])().remove(this.editor)},deactivated:function(){var t;this.inlineEditor||(this.cache=this.editor.getContent(),null===(t=Object(v["a"])())||void 0===t||t.remove(this.editor))},activated:function(){!this.inlineEditor&&this.initialized&&_(this)()},render:function(t){return this.inlineEditor?x(t,this.elementId,this.$props.tagName):w(t,this.elementId)}};e["a"]=S},cdd9:function(t,e){(function(){"use strict";var t=tinymce.util.Tools.resolve("tinymce.PluginManager"),e=function(){return e=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n],e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},e.apply(this,arguments)},n=function(t){var e=typeof t;return null===t?"null":"object"===e&&(Array.prototype.isPrototypeOf(t)||t.constructor&&"Array"===t.constructor.name)?"array":"object"===e&&(String.prototype.isPrototypeOf(t)||t.constructor&&"String"===t.constructor.name)?"string":e},r=function(t){return function(e){return n(e)===t}},o=function(t){return function(e){return typeof e===t}},i=function(t){return function(e){return t===e}},a=r("string"),u=r("object"),s=r("array"),l=i(null),c=o("boolean"),f=function(t){return null===t||void 0===t},d=function(t){return!f(t)},h=o("number"),p=function(){},g=function(t){return function(){return t}},m=g(!1),v=g(!0),y=function(){return b},b=function(){var t=function(t){return t.isNone()},e=function(t){return t()},n=function(t){return t},r={fold:function(t,e){return t()},is:m,isSome:m,isNone:v,getOr:n,getOrThunk:e,getOrDie:function(t){throw new Error(t||"error: getOrDie called on none.")},getOrNull:g(null),getOrUndefined:g(void 0),or:n,orThunk:e,map:y,each:p,bind:y,exists:m,forall:v,filter:y,equals:t,equals_:t,toArray:function(){return[]},toString:g("none()")};return r}(),x=function(t){var e=g(t),n=function(){return o},r=function(e){return e(t)},o={fold:function(e,n){return n(t)},is:function(e){return t===e},isSome:v,isNone:m,getOr:e,getOrThunk:e,getOrDie:e,getOrNull:e,getOrUndefined:e,or:n,orThunk:n,map:function(e){return x(e(t))},each:function(e){e(t)},bind:r,exists:r,forall:r,filter:function(e){return e(t)?o:b},toArray:function(){return[t]},toString:function(){return"some("+t+")"},equals:function(e){return e.is(t)},equals_:function(e,n){return e.fold(m,function(e){return n(t,e)})}};return o},w=function(t){return null===t||void 0===t?b:x(t)},_={some:x,none:y,from:w},S=Object.keys,C=Object.hasOwnProperty,M=function(t,e){for(var n=S(t),r=0,o=n.length;r<o;r++){var i=n[r],a=t[i];e(a,i)}},T=function(t){return function(e,n){t[n]=e}},k=function(t,e,n,r){var o={};return M(t,function(t,o){(e(t,o)?n:r)(t,o)}),o},D=function(t,e){var n={};return k(t,e,T(n),p),n},A=function(t,e){return C.call(t,e)},I=function(t,e){return A(t,e)&&void 0!==t[e]&&null!==t[e]},O=Array.prototype.push,L=function(t){for(var e=[],n=0,r=t.length;n<r;++n){if(!s(t[n]))throw new Error("Arr.flatten item "+n+" was not an array, input: "+t);O.apply(e,t[n])}return e},E=function(t,e){return e>=0&&e<t.length?_.some(t[e]):_.none()},N=function(t){return E(t,0)},R=function(t,e){for(var n=0;n<t.length;n++){var r=e(t[n],n);if(r.isSome())return r}return _.none()},P=("undefined"!==typeof window?window:Function("return this;")(),function(t,e,n){if(!(a(n)||c(n)||h(n)))throw console.error("Invalid call to Attribute.set. Key ",e,":: Value ",n,":: Element ",t),new Error("Attribute value was not simple");t.setAttribute(e,n+"")}),z=function(t,e,n){P(t.dom,e,n)},B=function(t,e){t.dom.removeAttribute(e)},V=function(t,e){var n=e||document,r=n.createElement("div");if(r.innerHTML=t,!r.hasChildNodes()||r.childNodes.length>1)throw console.error("HTML does not have a single root node",t),new Error("HTML must have a single root node");return W(r.childNodes[0])},H=function(t,e){var n=e||document,r=n.createElement(t);return W(r)},F=function(t,e){var n=e||document,r=n.createTextNode(t);return W(r)},W=function(t){if(null===t||void 0===t)throw new Error("Node cannot be null or undefined");return{dom:t}},U=function(t,e,n){return _.from(t.dom.elementFromPoint(e,n)).map(W)},G={fromHtml:V,fromTag:H,fromText:F,fromDom:W,fromPoint:U},j=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),X=tinymce.util.Tools.resolve("tinymce.util.Promise"),Y=tinymce.util.Tools.resolve("tinymce.util.XHR"),q=function(t){return t.getParam("image_dimensions",!0,"boolean")},Z=function(t){return t.getParam("image_advtab",!1,"boolean")},$=function(t){return t.getParam("image_uploadtab",!0,"boolean")},K=function(t){return t.getParam("image_prepend_url","","string")},J=function(t){return t.getParam("image_class_list")},Q=function(t){return t.getParam("image_description",!0,"boolean")},tt=function(t){return t.getParam("image_title",!1,"boolean")},et=function(t){return t.getParam("image_caption",!1,"boolean")},nt=function(t){return t.getParam("image_list",!1)},rt=function(t){return d(t.getParam("images_upload_url"))},ot=function(t){return d(t.getParam("images_upload_handler"))},it=function(t){return t.getParam("a11y_advanced_options",!1,"boolean")},at=function(t){return t.getParam("automatic_uploads",!0,"boolean")},ut=function(t,e){return Math.max(parseInt(t,10),parseInt(e,10))},st=function(t){return new X(function(e){var n=document.createElement("img"),r=function(t){n.parentNode&&n.parentNode.removeChild(n),e(t)};n.onload=function(){var t=ut(n.width,n.clientWidth),e=ut(n.height,n.clientHeight),o={width:t,height:e};r(X.resolve(o))},n.onerror=function(){r(X.reject("Failed to get image dimensions for: "+t))};var o=n.style;o.visibility="hidden",o.position="fixed",o.bottom=o.left="0px",o.width=o.height="auto",document.body.appendChild(n),n.src=t})},lt=function(t){return t&&(t=t.replace(/px$/,"")),t},ct=function(t){return t.length>0&&/^[0-9]+$/.test(t)&&(t+="px"),t},ft=function(t){if(t.margin){var e=String(t.margin).split(" ");switch(e.length){case 1:t["margin-top"]=t["margin-top"]||e[0],t["margin-right"]=t["margin-right"]||e[0],t["margin-bottom"]=t["margin-bottom"]||e[0],t["margin-left"]=t["margin-left"]||e[0];break;case 2:t["margin-top"]=t["margin-top"]||e[0],t["margin-right"]=t["margin-right"]||e[1],t["margin-bottom"]=t["margin-bottom"]||e[0],t["margin-left"]=t["margin-left"]||e[1];break;case 3:t["margin-top"]=t["margin-top"]||e[0],t["margin-right"]=t["margin-right"]||e[1],t["margin-bottom"]=t["margin-bottom"]||e[2],t["margin-left"]=t["margin-left"]||e[1];break;case 4:t["margin-top"]=t["margin-top"]||e[0],t["margin-right"]=t["margin-right"]||e[1],t["margin-bottom"]=t["margin-bottom"]||e[2],t["margin-left"]=t["margin-left"]||e[3]}delete t.margin}return t},dt=function(t,e){var n=nt(t);"string"===typeof n?Y.send({url:n,success:function(t){e(JSON.parse(t))}}):"function"===typeof n?n(e):e(n)},ht=function(t,e,n){var r=function(){n.onload=n.onerror=null,t.selection&&(t.selection.select(n),t.nodeChanged())};n.onload=function(){e.width||e.height||!q(t)||t.dom.setAttribs(n,{width:String(n.clientWidth),height:String(n.clientHeight)}),r()},n.onerror=r},pt=function(t){return new X(function(e,n){var r=new FileReader;r.onload=function(){e(r.result)},r.onerror=function(){n(r.error.message)},r.readAsDataURL(t)})},gt=function(t){return"IMG"===t.nodeName&&(t.hasAttribute("data-mce-object")||t.hasAttribute("data-mce-placeholder"))},mt=j.DOM,vt=function(t){return t.style.marginLeft&&t.style.marginRight&&t.style.marginLeft===t.style.marginRight?lt(t.style.marginLeft):""},yt=function(t){return t.style.marginTop&&t.style.marginBottom&&t.style.marginTop===t.style.marginBottom?lt(t.style.marginTop):""},bt=function(t){return t.style.borderWidth?lt(t.style.borderWidth):""},xt=function(t,e){return t.hasAttribute(e)?t.getAttribute(e):""},wt=function(t,e){return t.style[e]?t.style[e]:""},_t=function(t){return null!==t.parentNode&&"FIGURE"===t.parentNode.nodeName},St=function(t,e,n){""===n?t.removeAttribute(e):t.setAttribute(e,n)},Ct=function(t){var e=mt.create("figure",{class:"image"});mt.insertAfter(e,t),e.appendChild(t),e.appendChild(mt.create("figcaption",{contentEditable:"true"},"Caption")),e.contentEditable="false"},Mt=function(t){var e=t.parentNode;mt.insertAfter(t,e),mt.remove(e)},Tt=function(t){_t(t)?Mt(t):Ct(t)},kt=function(t,e){var n=t.getAttribute("style"),r=e(null!==n?n:"");r.length>0?(t.setAttribute("style",r),t.setAttribute("data-mce-style",r)):t.removeAttribute("style")},Dt=function(t,e){return function(t,n,r){t.style[n]?(t.style[n]=ct(r),kt(t,e)):St(t,n,r)}},At=function(t,e){return t.style[e]?lt(t.style[e]):xt(t,e)},It=function(t,e){var n=ct(e);t.style.marginLeft=n,t.style.marginRight=n},Ot=function(t,e){var n=ct(e);t.style.marginTop=n,t.style.marginBottom=n},Lt=function(t,e){var n=ct(e);t.style.borderWidth=n},Et=function(t,e){t.style.borderStyle=e},Nt=function(t){return wt(t,"borderStyle")},Rt=function(t){return"FIGURE"===t.nodeName},Pt=function(t){return"IMG"===t.nodeName},zt=function(t){return 0===mt.getAttrib(t,"alt").length&&"presentation"===mt.getAttrib(t,"role")},Bt=function(t){return zt(t)?"":xt(t,"alt")},Vt=function(){return{src:"",alt:"",title:"",width:"",height:"",class:"",style:"",caption:!1,hspace:"",vspace:"",border:"",borderStyle:"",isDecorative:!1}},Ht=function(t,e){var n=document.createElement("img");return St(n,"style",e.style),(vt(n)||""!==e.hspace)&&It(n,e.hspace),(yt(n)||""!==e.vspace)&&Ot(n,e.vspace),(bt(n)||""!==e.border)&&Lt(n,e.border),(Nt(n)||""!==e.borderStyle)&&Et(n,e.borderStyle),t(n.getAttribute("style"))},Ft=function(t,n){var r=document.createElement("img");if(Yt(t,e(e({},n),{caption:!1}),r),Gt(r,n.alt,n.isDecorative),n.caption){var o=mt.create("figure",{class:"image"});return o.appendChild(r),o.appendChild(mt.create("figcaption",{contentEditable:"true"},"Caption")),o.contentEditable="false",o}return r},Wt=function(t,e){return{src:xt(e,"src"),alt:Bt(e),title:xt(e,"title"),width:At(e,"width"),height:At(e,"height"),class:xt(e,"class"),style:t(xt(e,"style")),caption:_t(e),hspace:vt(e),vspace:yt(e),border:bt(e),borderStyle:wt(e,"borderStyle"),isDecorative:zt(e)}},Ut=function(t,e,n,r,o){n[r]!==e[r]&&o(t,r,n[r])},Gt=function(t,e,n){if(n){mt.setAttrib(t,"role","presentation");var r=G.fromDom(t);z(r,"alt","")}else{if(l(e)){r=G.fromDom(t);B(r,"alt")}else{r=G.fromDom(t);z(r,"alt",e)}"presentation"===mt.getAttrib(t,"role")&&mt.setAttrib(t,"role","")}},jt=function(t,e,n){n.alt===e.alt&&n.isDecorative===e.isDecorative||Gt(t,n.alt,n.isDecorative)},Xt=function(t,e){return function(n,r,o){t(n,o),kt(n,e)}},Yt=function(t,e,n){var r=Wt(t,n);Ut(n,r,e,"caption",function(t,e,n){return Tt(t)}),Ut(n,r,e,"src",St),Ut(n,r,e,"title",St),Ut(n,r,e,"width",Dt("width",t)),Ut(n,r,e,"height",Dt("height",t)),Ut(n,r,e,"class",St),Ut(n,r,e,"style",Xt(function(t,e){return St(t,"style",e)},t)),Ut(n,r,e,"hspace",Xt(It,t)),Ut(n,r,e,"vspace",Xt(Ot,t)),Ut(n,r,e,"border",Xt(Lt,t)),Ut(n,r,e,"borderStyle",Xt(Et,t)),jt(n,r,e)},qt=function(t,e){var n=t.dom.styles.parse(e),r=ft(n),o=t.dom.styles.parse(t.dom.styles.serialize(r));return t.dom.styles.serialize(o)},Zt=function(t){var e=t.selection.getNode(),n=t.dom.getParent(e,"figure.image");return n?t.dom.select("img",n)[0]:e&&("IMG"!==e.nodeName||gt(e))?null:e},$t=function(t,e){var n=t.dom,r=D(t.schema.getTextBlockElements(),function(e,n){return!t.schema.isValidChild(n,"figure")}),o=n.getParent(e.parentNode,function(t){return I(r,t.nodeName)},t.getBody());return o?n.split(o,e):e},Kt=function(t){var e=Zt(t);return e?Wt(function(e){return qt(t,e)},e):Vt()},Jt=function(t,e){var n=Ft(function(e){return qt(t,e)},e);t.dom.setAttrib(n,"data-mce-id","__mcenew"),t.focus(),t.selection.setContent(n.outerHTML);var r=t.dom.select('*[data-mce-id="__mcenew"]')[0];if(t.dom.setAttrib(r,"data-mce-id",null),Rt(r)){var o=$t(t,r);t.selection.select(o)}else t.selection.select(r)},Qt=function(t,e){t.dom.setAttrib(e,"src",e.getAttribute("src"))},te=function(t,e){if(e){var n=t.dom.is(e.parentNode,"figure.image")?e.parentNode:e;t.dom.remove(n),t.focus(),t.nodeChanged(),t.dom.isEmpty(t.getBody())&&(t.setContent(""),t.selection.setCursorLocation())}},ee=function(t,e){var n=Zt(t);if(Yt(function(e){return qt(t,e)},e,n),Qt(t,n),Rt(n.parentNode)){var r=n.parentNode;$t(t,r),t.selection.select(n.parentNode)}else t.selection.select(n),ht(t,e,n)},ne=function(t,n){var r=Zt(t);if(r){var o=Wt(function(e){return qt(t,e)},r),i=e(e({},o),n);i.src?ee(t,i):te(t,r)}else n.src&&Jt(t,e(e({},Vt()),n))},re=Object.prototype.hasOwnProperty,oe=function(t,e){var n=u(t)&&u(e);return n?ae(t,e):e},ie=function(t){return function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];if(0===e.length)throw new Error("Can't merge zero objects");for(var r={},o=0;o<e.length;o++){var i=e[o];for(var a in i)re.call(i,a)&&(r[a]=t(r[a],i[a]))}return r}},ae=ie(oe),ue=function(t){return t.length>0},se=tinymce.util.Tools.resolve("tinymce.util.ImageUploader"),le=tinymce.util.Tools.resolve("tinymce.util.Tools"),ce=function(t){return a(t.value)?t.value:""},fe=function(t){return a(t.text)?t.text:a(t.title)?t.title:""},de=function(t,e){var n=[];return le.each(t,function(t){var r=fe(t);if(void 0!==t.menu){var o=de(t.menu,e);n.push({text:r,items:o})}else{var i=e(t);n.push({text:r,value:i})}}),n},he=function(t){return void 0===t&&(t=ce),function(e){return e?_.from(e).map(function(e){return de(e,t)}):_.none()}},pe=function(t){return he(ce)(t)},ge=function(t){return Object.prototype.hasOwnProperty.call(t,"items")},me=function(t,e){return R(t,function(t){return ge(t)?me(t.items,e):t.value===e?_.some(t):_.none()})},ve=function(t,e){return t.bind(function(t){return me(t,e)})},ye={sanitizer:he,sanitize:pe,findEntry:ve},be=function(t){return{title:"Advanced",name:"advanced",items:[{type:"input",label:"Style",name:"style"},{type:"grid",columns:2,items:[{type:"input",label:"Vertical space",name:"vspace",inputMode:"numeric"},{type:"input",label:"Horizontal space",name:"hspace",inputMode:"numeric"},{type:"input",label:"Border width",name:"border",inputMode:"numeric"},{type:"listbox",name:"borderstyle",label:"Border style",items:[{text:"Select...",value:""},{text:"Solid",value:"solid"},{text:"Dotted",value:"dotted"},{text:"Dashed",value:"dashed"},{text:"Double",value:"double"},{text:"Groove",value:"groove"},{text:"Ridge",value:"ridge"},{text:"Inset",value:"inset"},{text:"Outset",value:"outset"},{text:"None",value:"none"},{text:"Hidden",value:"hidden"}]}]}]}},xe={makeTab:be},we=function(t){var e=ye.sanitizer(function(e){return t.convertURL(e.value||e.url,"src")}),n=new X(function(n){dt(t,function(t){n(e(t).map(function(t){return L([[{text:"None",value:""}],t])}))})}),r=ye.sanitize(J(t)),o=Z(t),i=$(t),u=rt(t),s=ot(t),l=Kt(t),c=Q(t),f=tt(t),d=q(t),h=et(t),p=it(t),g=at(t),m=_.some(K(t)).filter(function(t){return a(t)&&t.length>0});return n.then(function(t){return{image:l,imageList:t,classList:r,hasAdvTab:o,hasUploadTab:i,hasUploadUrl:u,hasUploadHandler:s,hasDescription:c,hasImageTitle:f,hasDimensions:d,hasImageCaption:h,prependURL:m,hasAccessibilityOptions:p,automaticUploads:g}})},_e=function(t){var n={name:"src",type:"urlinput",filetype:"image",label:"Source"},r=t.imageList.map(function(t){return{name:"images",type:"listbox",label:"Image list",items:t}}),o={name:"alt",type:"input",label:"Alternative description",disabled:t.hasAccessibilityOptions&&t.image.isDecorative},i={name:"title",type:"input",label:"Image title"},a={name:"dimensions",type:"sizeinput"},u={type:"label",label:"Accessibility",items:[{name:"isDecorative",type:"checkbox",label:"Image is decorative"}]},s=t.classList.map(function(t){return{name:"classes",type:"listbox",label:"Class",items:t}}),l={type:"label",label:"Caption",items:[{type:"checkbox",name:"caption",label:"Show caption"}]},c=function(t){return t?{type:"grid",columns:2}:{type:"panel"}};return L([[n],r.toArray(),t.hasAccessibilityOptions&&t.hasDescription?[u]:[],t.hasDescription?[o]:[],t.hasImageTitle?[i]:[],t.hasDimensions?[a]:[],[e(e({},c(t.classList.isSome()&&t.hasImageCaption)),{items:L([s.toArray(),t.hasImageCaption?[l]:[]])})]])},Se=function(t){return{title:"General",name:"general",items:_e(t)}},Ce={makeTab:Se,makeItems:_e},Me=function(t){var e=[{type:"dropzone",name:"fileinput"}];return{title:"Upload",name:"upload",items:e}},Te={makeTab:Me},ke=function(t){return{prevImage:ye.findEntry(t.imageList,t.image.src),prevAlt:t.image.alt,open:!0}},De=function(t){return{src:{value:t.src,meta:{}},images:t.src,alt:t.alt,title:t.title,dimensions:{width:t.width,height:t.height},classes:t.class,caption:t.caption,style:t.style,vspace:t.vspace,border:t.border,hspace:t.hspace,borderstyle:t.borderStyle,fileinput:[],isDecorative:t.isDecorative}},Ae=function(t,e){return{src:t.src.value,alt:0===t.alt.length&&e?null:t.alt,title:t.title,width:t.dimensions.width,height:t.dimensions.height,class:t.classes,style:t.style,caption:t.caption,hspace:t.hspace,vspace:t.vspace,border:t.border,borderStyle:t.borderstyle,isDecorative:t.isDecorative}},Ie=function(t,e){return/^(?:[a-zA-Z]+:)?\/\//.test(e)?_.none():t.prependURL.bind(function(t){return e.substring(0,t.length)!==t?_.some(t+e):_.none()})},Oe=function(t,e){var n=e.getData();Ie(t,n.src.value).each(function(t){e.setData({src:{value:t,meta:n.src.meta}})})},Le=function(t,e,n){t.hasDescription&&a(n.alt)&&(e.alt=n.alt),t.hasAccessibilityOptions&&(e.isDecorative=n.isDecorative||e.isDecorative||!1),t.hasImageTitle&&a(n.title)&&(e.title=n.title),t.hasDimensions&&(a(n.width)&&(e.dimensions.width=n.width),a(n.height)&&(e.dimensions.height=n.height)),a(n.class)&&ye.findEntry(t.classList,n.class).each(function(t){e.classes=t.value}),t.hasImageCaption&&c(n.caption)&&(e.caption=n.caption),t.hasAdvTab&&(a(n.style)&&(e.style=n.style),a(n.vspace)&&(e.vspace=n.vspace),a(n.border)&&(e.border=n.border),a(n.hspace)&&(e.hspace=n.hspace),a(n.borderstyle)&&(e.borderstyle=n.borderstyle))},Ee=function(t,e){var n=e.getData(),r=n.src.meta;if(void 0!==r){var o=ae({},n);Le(t,o,r),e.setData(o)}},Ne=function(t,e,n,r){var o=r.getData(),i=o.src.value,a=o.src.meta||{};a.width||a.height||!e.hasDimensions||(ue(i)?t.imageSize(i).then(function(t){n.open&&r.setData({dimensions:t})}).catch(function(t){return console.error(t)}):r.setData({dimensions:{width:"",height:""}}))},Re=function(t,e,n){var r=n.getData(),o=ye.findEntry(t.imageList,r.src.value);e.prevImage=o,n.setData({images:o.map(function(t){return t.value}).getOr("")})},Pe=function(t,e,n,r){Oe(e,r),Ee(e,r),Ne(t,e,n,r),Re(e,n,r)},ze=function(t,e,n,r){var o=r.getData(),i=ye.findEntry(e.imageList,o.images);i.each(function(t){var e=""===o.alt||n.prevImage.map(function(t){return t.text===o.alt}).getOr(!1);e?""===t.value?r.setData({src:t,alt:n.prevAlt}):r.setData({src:t,alt:t.text}):r.setData({src:t})}),n.prevImage=i,Pe(t,e,n,r)},Be=function(t){var e=t["margin-top"]&&t["margin-bottom"]&&t["margin-top"]===t["margin-bottom"];return e?lt(String(t["margin-top"])):""},Ve=function(t){var e=t["margin-right"]&&t["margin-left"]&&t["margin-right"]===t["margin-left"];return e?lt(String(t["margin-right"])):""},He=function(t){return t["border-width"]?lt(String(t["border-width"])):""},Fe=function(t){return t["border-style"]?String(t["border-style"]):""},We=function(t,e,n){return e(t(e(n)))},Ue=function(t,e,n){var r=ft(t(n.style)),o=ae({},n);return o.vspace=Be(r),o.hspace=Ve(r),o.border=He(r),o.borderstyle=Fe(r),o.style=We(t,e,r),o},Ge=function(t,e){var n=e.getData(),r=Ue(t.parseStyle,t.serializeStyle,n);e.setData(r)},je=function(t,e,n){var r=ae(De(e.image),n.getData()),o=Ht(t.normalizeCss,Ae(r,!1));n.setData({style:o})},Xe=function(t,e,n,r){var o=r.getData();r.block("Uploading image"),N(o.fileinput).fold(function(){r.unblock()},function(o){var i=URL.createObjectURL(o),a=function(){r.unblock(),URL.revokeObjectURL(i)},u=function(o){r.setData({src:{value:o,meta:{}}}),r.showTab("general"),Pe(t,e,n,r)};pt(o).then(function(n){var s=t.createBlobCache(o,i,n);e.automaticUploads?t.uploadImage(s).then(function(t){u(t.url),a()}).catch(function(e){a(),t.alertErr(e)}):(t.addToBlobCache(s),u(s.blobUri()),r.unblock())})})},Ye=function(t,e,n){return function(r,o){"src"===o.name?Pe(t,e,n,r):"images"===o.name?ze(t,e,n,r):"alt"===o.name?n.prevAlt=r.getData().alt:"style"===o.name?Ge(t,r):"vspace"===o.name||"hspace"===o.name||"border"===o.name||"borderstyle"===o.name?je(t,e,r):"fileinput"===o.name?Xe(t,e,n,r):"isDecorative"===o.name&&(r.getData().isDecorative?r.disable("alt"):r.enable("alt"))}},qe=function(t){return function(){t.open=!1}},Ze=function(t){if(t.hasAdvTab||t.hasUploadUrl||t.hasUploadHandler){var e={type:"tabpanel",tabs:L([[Ce.makeTab(t)],t.hasAdvTab?[xe.makeTab(t)]:[],t.hasUploadTab&&(t.hasUploadUrl||t.hasUploadHandler)?[Te.makeTab(t)]:[]])};return e}var n={type:"panel",items:Ce.makeItems(t)};return n},$e=function(t){return function(e){var n=ke(e);return{title:"Insert/Edit Image",size:"normal",body:Ze(e),buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:De(e.image),onSubmit:t.onSubmit(e),onChange:Ye(t,e,n),onClose:qe(n)}}},Ke=function(t){return function(e){return function(n){var r=ae(De(e.image),n.getData());t.execCommand("mceUpdateImage",!1,Ae(r,e.hasAccessibilityOptions)),t.editorUpload.uploadImagesAuto(),n.close()}}},Je=function(t){return function(e){return st(t.documentBaseURI.toAbsolute(e)).then(function(t){return{width:String(t.width),height:String(t.height)}})}},Qe=function(t){return function(e,n,r){return t.editorUpload.blobCache.create({blob:e,blobUri:n,name:e.name?e.name.replace(/\.[^\.]+$/,""):null,filename:e.name,base64:r.split(",")[1]})}},tn=function(t){return function(e){t.editorUpload.blobCache.add(e)}},en=function(t){return function(e){t.windowManager.alert(e)}},nn=function(t){return function(e){return qt(t,e)}},rn=function(t){return function(e){return t.dom.parseStyle(e)}},on=function(t){return function(e,n){return t.dom.serializeStyle(e,n)}},an=function(t){return function(e){return se(t).upload([e],!1).then(function(t){return 0===t.length?X.reject("Failed to upload image"):!1===t[0].status?X.reject(t[0].error.message):t[0]})}},un=function(t){var e={onSubmit:Ke(t),imageSize:Je(t),addToBlobCache:tn(t),createBlobCache:Qe(t),alertErr:en(t),normalizeCss:nn(t),parseStyle:rn(t),serializeStyle:on(t),uploadImage:an(t)},n=function(){we(t).then($e(e)).then(t.windowManager.open)};return{open:n}},sn=function(t){t.addCommand("mceImage",un(t).open),t.addCommand("mceUpdateImage",function(e,n){t.undoManager.transact(function(){return ne(t,n)})})},ln=function(t){var e=t.attr("class");return e&&/\bimage\b/.test(e)},cn=function(t){return function(e){var n=e.length,r=function(e){e.attr("contenteditable",t?"true":null)};while(n--){var o=e[n];ln(o)&&(o.attr("contenteditable",t?"false":null),le.each(o.getAll("figcaption"),r))}}},fn=function(t){t.on("PreInit",function(){t.parser.addNodeFilter("figure",cn(!0)),t.serializer.addNodeFilter("figure",cn(!1))})},dn=function(t){t.ui.registry.addToggleButton("image",{icon:"image",tooltip:"Insert/edit image",onAction:un(t).open,onSetup:function(e){return t.selection.selectorChangedWithUnbind("img:not([data-mce-object],[data-mce-placeholder]),figure.image",e.setActive).unbind}}),t.ui.registry.addMenuItem("image",{icon:"image",text:"Image...",onAction:un(t).open}),t.ui.registry.addContextMenu("image",{update:function(t){return Rt(t)||Pt(t)&&!gt(t)?["image"]:[]}})};function hn(){t.add("image",function(t){fn(t),dn(t),sn(t)})}hn()})()},d2d5:function(t,e,n){n("1654"),n("549b"),t.exports=n("584a").Array.from},e562:function(t,e,n){(function(e){(function(){"use strict";var n=function(t){if(null===t)return"null";if(void 0===t)return"undefined";var e=typeof t;return"object"===e&&(Array.prototype.isPrototypeOf(t)||t.constructor&&"Array"===t.constructor.name)?"array":"object"===e&&(String.prototype.isPrototypeOf(t)||t.constructor&&"String"===t.constructor.name)?"string":e},r=function(t){return-1!==["undefined","boolean","number","string","function","xml","null"].indexOf(t)},o=function(t,e){var n=Array.prototype.slice.call(t);return n.sort(e)},i=function(t,e){return a(function(n,r){return t.eq(e(n),e(r))})},a=function(t){return{eq:t}},u=a(function(t,e){return t===e}),s=u,l=function(t){return a(function(e,n){if(e.length!==n.length)return!1;for(var r=e.length,o=0;o<r;o++)if(!t.eq(e[o],n[o]))return!1;return!0})},c=function(t,e){return i(l(t),function(t){return o(t,e)})},f=function(t){return a(function(e,n){var r=Object.keys(e),o=Object.keys(n);if(!c(s).eq(r,o))return!1;for(var i=r.length,a=0;a<i;a++){var u=r[a];if(!t.eq(e[u],n[u]))return!1}return!0})},d=a(function(t,e){if(t===e)return!0;var o=n(t),i=n(e);return o===i&&(r(o)?t===e:"array"===o?l(d).eq(t,e):"object"===o&&f(d).eq(t,e))}),h=function(t){var e=typeof t;return null===t?"null":"object"===e&&(Array.prototype.isPrototypeOf(t)||t.constructor&&"Array"===t.constructor.name)?"array":"object"===e&&(String.prototype.isPrototypeOf(t)||t.constructor&&"String"===t.constructor.name)?"string":e},p=function(t){return function(e){return h(e)===t}},g=function(t){return function(e){return typeof e===t}},m=function(t){return function(e){return t===e}},v=p("string"),y=p("object"),b=p("array"),x=m(null),w=g("boolean"),_=m(void 0),S=function(t){return null===t||void 0===t},C=function(t){return!S(t)},M=g("function"),T=g("number"),k=function(){},D=function(t,e){return function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return t(e.apply(null,n))}},A=function(t,e){return function(n){return t(e(n))}},I=function(t){return function(){return t}},O=function(t){return t};function L(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];return function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];var o=e.concat(n);return t.apply(null,o)}}var E=function(t){return function(e){return!t(e)}},N=function(t){return function(){throw new Error(t)}},R=function(t){return t()},P=function(t){t()},z=I(!1),B=I(!0),V=function(){return H},H=function(){var t=function(t){return t.isNone()},e=function(t){return t()},n=function(t){return t},r={fold:function(t,e){return t()},is:z,isSome:z,isNone:B,getOr:n,getOrThunk:e,getOrDie:function(t){throw new Error(t||"error: getOrDie called on none.")},getOrNull:I(null),getOrUndefined:I(void 0),or:n,orThunk:e,map:V,each:k,bind:V,exists:z,forall:B,filter:V,equals:t,equals_:t,toArray:function(){return[]},toString:I("none()")};return r}(),F=function(t){var e=I(t),n=function(){return o},r=function(e){return e(t)},o={fold:function(e,n){return n(t)},is:function(e){return t===e},isSome:B,isNone:z,getOr:e,getOrThunk:e,getOrDie:e,getOrNull:e,getOrUndefined:e,or:n,orThunk:n,map:function(e){return F(e(t))},each:function(e){e(t)},bind:r,exists:r,forall:r,filter:function(e){return e(t)?o:H},toArray:function(){return[t]},toString:function(){return"some("+t+")"},equals:function(e){return e.is(t)},equals_:function(e,n){return e.fold(z,function(e){return n(t,e)})}};return o},W=function(t){return null===t||void 0===t?H:F(t)},U={some:F,none:V,from:W},G=Array.prototype.slice,j=Array.prototype.indexOf,X=Array.prototype.push,Y=function(t,e){return j.call(t,e)},q=function(t,e){var n=Y(t,e);return-1===n?U.none():U.some(n)},Z=function(t,e){return Y(t,e)>-1},$=function(t,e){for(var n=0,r=t.length;n<r;n++){var o=t[n];if(e(o,n))return!0}return!1},K=function(t,e){for(var n=t.length,r=new Array(n),o=0;o<n;o++){var i=t[o];r[o]=e(i,o)}return r},J=function(t,e){for(var n=0,r=t.length;n<r;n++){var o=t[n];e(o,n)}},Q=function(t,e){for(var n=t.length-1;n>=0;n--){var r=t[n];e(r,n)}},tt=function(t,e){for(var n=[],r=[],o=0,i=t.length;o<i;o++){var a=t[o],u=e(a,o)?n:r;u.push(a)}return{pass:n,fail:r}},et=function(t,e){for(var n=[],r=0,o=t.length;r<o;r++){var i=t[r];e(i,r)&&n.push(i)}return n},nt=function(t,e,n){return Q(t,function(t){n=e(n,t)}),n},rt=function(t,e,n){return J(t,function(t){n=e(n,t)}),n},ot=function(t,e,n){for(var r=0,o=t.length;r<o;r++){var i=t[r];if(e(i,r))return U.some(i);if(n(i,r))break}return U.none()},it=function(t,e){return ot(t,e,z)},at=function(t,e){for(var n=0,r=t.length;n<r;n++){var o=t[n];if(e(o,n))return U.some(n)}return U.none()},ut=function(t){for(var e=[],n=0,r=t.length;n<r;++n){if(!b(t[n]))throw new Error("Arr.flatten item "+n+" was not an array, input: "+t);X.apply(e,t[n])}return e},st=function(t,e){return ut(K(t,e))},lt=function(t,e){for(var n=0,r=t.length;n<r;++n){var o=t[n];if(!0!==e(o,n))return!1}return!0},ct=function(t){var e=G.call(t,0);return e.reverse(),e},ft=function(t,e){return et(t,function(t){return!Z(e,t)})},dt=function(t,e){for(var n={},r=0,o=t.length;r<o;r++){var i=t[r];n[String(i)]=e(i,r)}return n},ht=function(t,e){var n=G.call(t,0);return n.sort(e),n},pt=function(t,e){return e>=0&&e<t.length?U.some(t[e]):U.none()},gt=function(t){return pt(t,0)},mt=function(t){return pt(t,t.length-1)},vt=M(Array.from)?Array.from:function(t){return G.call(t)},yt=function(t,e){for(var n=0;n<t.length;n++){var r=e(t[n],n);if(r.isSome())return r}return U.none()},bt=Object.keys,xt=Object.hasOwnProperty,wt=function(t,e){for(var n=bt(t),r=0,o=n.length;r<o;r++){var i=n[r],a=t[i];e(a,i)}},_t=function(t,e){return St(t,function(t,n){return{k:n,v:e(t,n)}})},St=function(t,e){var n={};return wt(t,function(t,r){var o=e(t,r);n[o.k]=o.v}),n},Ct=function(t){return function(e,n){t[n]=e}},Mt=function(t,e,n,r){var o={};return wt(t,function(t,o){(e(t,o)?n:r)(t,o)}),o},Tt=function(t,e){var n={},r={};return Mt(t,e,Ct(n),Ct(r)),{t:n,f:r}},kt=function(t,e){var n={};return Mt(t,e,Ct(n),k),n},Dt=function(t,e){var n=[];return wt(t,function(t,r){n.push(e(t,r))}),n},At=function(t){return Dt(t,function(t){return t})},It=function(t,e){return Ot(t,e)?U.from(t[e]):U.none()},Ot=function(t,e){return xt.call(t,e)},Lt=function(t,e){return Ot(t,e)&&void 0!==t[e]&&null!==t[e]},Et=function(t,e,n){return void 0===n&&(n=d),f(n).eq(t,e)},Nt=Array.isArray,Rt=function(t){if(Nt(t))return t;for(var e=[],n=0,r=t.length;n<r;n++)e[n]=t[n];return e},Pt=function(t,e,n){var r,o;if(!t)return!1;if(n=n||t,void 0!==t.length){for(r=0,o=t.length;r<o;r++)if(!1===e.call(n,t[r],r,t))return!1}else for(r in t)if(t.hasOwnProperty(r)&&!1===e.call(n,t[r],r,t))return!1;return!0},zt=function(t,e){var n=[];return Pt(t,function(r,o){n.push(e(r,o,t))}),n},Bt=function(t,e){var n=[];return Pt(t,function(r,o){e&&!e(r,o,t)||n.push(r)}),n},Vt=function(t,e){if(t)for(var n=0,r=t.length;n<r;n++)if(t[n]===e)return n;return-1},Ht=function(t,e,n,r){for(var o=_(n)?t[0]:n,i=0;i<t.length;i++)o=e.call(r,o,t[i],i);return o},Ft=function(t,e,n){var r,o;for(r=0,o=t.length;r<o;r++)if(e.call(n,t[r],r,t))return r;return-1},Wt=function(t){return t[t.length-1]},Ut=function(){return Ut=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n],e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},Ut.apply(this,arguments)};function Gt(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"===typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(t);o<r.length;o++)e.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(t,r[o])&&(n[r[o]]=t[r[o]])}return n}function jt(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),o=0;for(e=0;e<n;e++)for(var i=arguments[e],a=0,u=i.length;a<u;a++,o++)r[o]=i[a];return r}var Xt=function(t){var e,n=!1;return function(){for(var r=[],o=0;o<arguments.length;o++)r[o]=arguments[o];return n||(n=!0,e=t.apply(null,r)),e}},Yt=function(t,e,n,r){var o=t.isiOS()&&!0===/ipad/i.test(n),i=t.isiOS()&&!o,a=t.isiOS()||t.isAndroid(),u=a||r("(pointer:coarse)"),s=o||!i&&a&&r("(min-device-width:768px)"),l=i||a&&!s,c=e.isSafari()&&t.isiOS()&&!1===/safari/i.test(n),f=!l&&!s&&!c;return{isiPad:I(o),isiPhone:I(i),isTablet:I(s),isPhone:I(l),isTouch:I(u),isAndroid:t.isAndroid,isiOS:t.isiOS,isWebView:I(c),isDesktop:I(f)}},qt=function(t,e){for(var n=0;n<t.length;n++){var r=t[n];if(r.test(e))return r}},Zt=function(t,e){var n=qt(t,e);if(!n)return{major:0,minor:0};var r=function(t){return Number(e.replace(n,"$"+t))};return Jt(r(1),r(2))},$t=function(t,e){var n=String(e).toLowerCase();return 0===t.length?Kt():Zt(t,n)},Kt=function(){return Jt(0,0)},Jt=function(t,e){return{major:t,minor:e}},Qt={nu:Jt,detect:$t,unknown:Kt},te=function(t,e){var n=String(e).toLowerCase();return it(t,function(t){return t.search(n)})},ee=function(t,e){return te(t,e).map(function(t){var n=Qt.detect(t.versionRegexes,e);return{current:t.name,version:n}})},ne=function(t,e){return te(t,e).map(function(t){var n=Qt.detect(t.versionRegexes,e);return{current:t.name,version:n}})},re={detectBrowser:ee,detectOs:ne},oe=function(t,e){return t.substring(e)},ie=function(t,e,n){return""===e||t.length>=e.length&&t.substr(n,n+e.length)===e},ae=function(t,e){return se(t,e)?oe(t,e.length):t},ue=function(t,e){return-1!==t.indexOf(e)},se=function(t,e){return ie(t,e,0)},le=function(t){return function(e){return e.replace(t,"")}},ce=le(/^\s+|\s+$/g),fe=le(/^\s+/g),de=le(/\s+$/g),he=function(t){return t.length>0},pe=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,ge=function(t){return function(e){return ue(e,t)}},me=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:function(t){return ue(t,"edge/")&&ue(t,"chrome")&&ue(t,"safari")&&ue(t,"applewebkit")}},{name:"Chrome",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,pe],search:function(t){return ue(t,"chrome")&&!ue(t,"chromeframe")}},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:function(t){return ue(t,"msie")||ue(t,"trident")}},{name:"Opera",versionRegexes:[pe,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:ge("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:ge("firefox")},{name:"Safari",versionRegexes:[pe,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:function(t){return(ue(t,"safari")||ue(t,"mobile/"))&&ue(t,"applewebkit")}}],ve=[{name:"Windows",search:ge("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:function(t){return ue(t,"iphone")||ue(t,"ipad")},versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:ge("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"OSX",search:ge("mac os x"),versionRegexes:[/.*?mac\ os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:ge("linux"),versionRegexes:[]},{name:"Solaris",search:ge("sunos"),versionRegexes:[]},{name:"FreeBSD",search:ge("freebsd"),versionRegexes:[]},{name:"ChromeOS",search:ge("cros"),versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/]}],ye={browsers:I(me),oses:I(ve)},be="Edge",xe="Chrome",we="IE",_e="Opera",Se="Firefox",Ce="Safari",Me=function(){return Te({current:void 0,version:Qt.unknown()})},Te=function(t){var e=t.current,n=t.version,r=function(t){return function(){return e===t}};return{current:e,version:n,isEdge:r(be),isChrome:r(xe),isIE:r(we),isOpera:r(_e),isFirefox:r(Se),isSafari:r(Ce)}},ke={unknown:Me,nu:Te,edge:I(be),chrome:I(xe),ie:I(we),opera:I(_e),firefox:I(Se),safari:I(Ce)},De="Windows",Ae="iOS",Ie="Android",Oe="Linux",Le="OSX",Ee="Solaris",Ne="FreeBSD",Re="ChromeOS",Pe=function(){return ze({current:void 0,version:Qt.unknown()})},ze=function(t){var e=t.current,n=t.version,r=function(t){return function(){return e===t}};return{current:e,version:n,isWindows:r(De),isiOS:r(Ae),isAndroid:r(Ie),isOSX:r(Le),isLinux:r(Oe),isSolaris:r(Ee),isFreeBSD:r(Ne),isChromeOS:r(Re)}},Be={unknown:Pe,nu:ze,windows:I(De),ios:I(Ae),android:I(Ie),linux:I(Oe),osx:I(Le),solaris:I(Ee),freebsd:I(Ne),chromeos:I(Re)},Ve=function(t,e){var n=ye.browsers(),r=ye.oses(),o=re.detectBrowser(n,t).fold(ke.unknown,ke.nu),i=re.detectOs(r,t).fold(Be.unknown,Be.nu),a=Yt(i,o,t,e);return{browser:o,os:i,deviceType:a}},He={detect:Ve},Fe=function(t){return window.matchMedia(t).matches},We=Xt(function(){return He.detect(navigator.userAgent,Fe)}),Ue=function(){return We()},Ge=navigator.userAgent,je=Ue(),Xe=je.browser,Ye=je.os,qe=je.deviceType,Ze=/WebKit/.test(Ge)&&!Xe.isEdge(),$e="FormData"in window&&"FileReader"in window&&"URL"in window&&!!URL.createObjectURL,Ke=-1!==Ge.indexOf("Windows Phone"),Je={opera:Xe.isOpera(),webkit:Ze,ie:!(!Xe.isIE()&&!Xe.isEdge())&&Xe.version.major,gecko:Xe.isFirefox(),mac:Ye.isOSX()||Ye.isiOS(),iOS:qe.isiPad()||qe.isiPhone(),android:Ye.isAndroid(),contentEditable:!0,transparentSrc:"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",caretAfter:!0,range:window.getSelection&&"Range"in window,documentMode:Xe.isIE()?document.documentMode||7:10,fileApi:$e,ceFalse:!0,cacheSuffix:null,container:null,experimentalShadowDom:!1,canHaveCSP:!Xe.isIE(),desktop:qe.isDesktop(),windowsPhone:Ke,browser:{current:Xe.current,version:Xe.version,isChrome:Xe.isChrome,isEdge:Xe.isEdge,isFirefox:Xe.isFirefox,isIE:Xe.isIE,isOpera:Xe.isOpera,isSafari:Xe.isSafari},os:{current:Ye.current,version:Ye.version,isAndroid:Ye.isAndroid,isChromeOS:Ye.isChromeOS,isFreeBSD:Ye.isFreeBSD,isiOS:Ye.isiOS,isLinux:Ye.isLinux,isOSX:Ye.isOSX,isSolaris:Ye.isSolaris,isWindows:Ye.isWindows},deviceType:{isDesktop:qe.isDesktop,isiPad:qe.isiPad,isiPhone:qe.isiPhone,isPhone:qe.isPhone,isTablet:qe.isTablet,isTouch:qe.isTouch,isWebView:qe.isWebView}},Qe=/^\s*|\s*$/g,tn=function(t){return null===t||void 0===t?"":(""+t).replace(Qe,"")},en=function(t,e){return e?!("array"!==e||!Nt(t))||typeof t===e:void 0!==t},nn=function(t,e,n){var r;t=t||[],e=e||",","string"===typeof t&&(t=t.split(e)),n=n||{},r=t.length;while(r--)n[t[r]]={};return n},rn=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},on=function(t,e,n){var r,o,i,a=this,u=0;t=/^((static) )?([\w.]+)(:([\w.]+))?/.exec(t);var s=t[3].match(/(^|\.)(\w+)$/i)[2],l=a.createNS(t[3].replace(/\.\w+$/,""),n);if(!l[s]){if("static"===t[2])return l[s]=e,void(this.onCreate&&this.onCreate(t[2],t[3],l[s]));e[s]||(e[s]=function(){},u=1),l[s]=e[s],a.extend(l[s].prototype,e),t[5]&&(r=a.resolve(t[5]).prototype,o=t[5].match(/\.(\w+)$/i)[1],i=l[s],l[s]=u?function(){return r[o].apply(this,arguments)}:function(){return this.parent=r[o],i.apply(this,arguments)},l[s].prototype[s]=l[s],a.each(r,function(t,e){l[s].prototype[e]=r[e]}),a.each(e,function(t,e){r[e]?l[s].prototype[e]=function(){return this.parent=r[e],t.apply(this,arguments)}:e!==s&&(l[s].prototype[e]=t)})),a.each(e.static,function(t,e){l[s][e]=t})}},an=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];for(var r=0;r<e.length;r++){var o=e[r];for(var i in o)if(o.hasOwnProperty(i)){var a=o[i];void 0!==a&&(t[i]=a)}}return t},un=function(t,e,n,r){r=r||this,t&&(n&&(t=t[n]),Pt(t,function(t,o){if(!1===e.call(r,t,o,n))return!1;un(t,e,n,r)}))},sn=function(t,e){var n,r;for(e=e||window,t=t.split("."),n=0;n<t.length;n++)r=t[n],e[r]||(e[r]={}),e=e[r];return e},ln=function(t,e){var n,r;for(e=e||window,t=t.split("."),n=0,r=t.length;n<r;n++)if(e=e[t[n]],!e)break;return e},cn=function(t,e){return!t||en(t,"array")?t:zt(t.split(e||","),tn)},fn=function(t){var e=Je.cacheSuffix;return e&&(t+=(-1===t.indexOf("?")?"?":"&")+e),t},dn={trim:tn,isArray:Nt,is:en,toArray:Rt,makeMap:nn,each:Pt,map:zt,grep:Bt,inArray:Vt,hasOwn:rn,extend:an,create:on,walk:un,createNS:sn,resolve:ln,explode:cn,_addCacheSuffix:fn},hn=function(t,e){var n=e||document,r=n.createElement("div");if(r.innerHTML=t,!r.hasChildNodes()||r.childNodes.length>1)throw console.error("HTML does not have a single root node",t),new Error("HTML must have a single root node");return mn(r.childNodes[0])},pn=function(t,e){var n=e||document,r=n.createElement(t);return mn(r)},gn=function(t,e){var n=e||document,r=n.createTextNode(t);return mn(r)},mn=function(t){if(null===t||void 0===t)throw new Error("Node cannot be null or undefined");return{dom:t}},vn=function(t,e,n){return U.from(t.dom.elementFromPoint(e,n)).map(mn)},yn={fromHtml:hn,fromTag:pn,fromText:gn,fromDom:mn,fromPoint:vn},bn=function(t,e){var n=[],r=function(t){return n.push(t),e(t)},o=e(t);do{o=o.bind(r)}while(o.isSome());return n},xn=function(t,e,n){return 0!==(t.compareDocumentPosition(e)&n)},wn=function(t,e){return xn(t,e,Node.DOCUMENT_POSITION_CONTAINED_BY)},_n=8,Sn=9,Cn=11,Mn=1,Tn=3,kn=function(t,e){var n=t.dom;if(n.nodeType!==Mn)return!1;var r=n;if(void 0!==r.matches)return r.matches(e);if(void 0!==r.msMatchesSelector)return r.msMatchesSelector(e);if(void 0!==r.webkitMatchesSelector)return r.webkitMatchesSelector(e);if(void 0!==r.mozMatchesSelector)return r.mozMatchesSelector(e);throw new Error("Browser lacks native selectors")},Dn=function(t){return t.nodeType!==Mn&&t.nodeType!==Sn&&t.nodeType!==Cn||0===t.childElementCount},An=function(t,e){var n=void 0===e?document:e.dom;return Dn(n)?[]:K(n.querySelectorAll(t),yn.fromDom)},In=function(t,e){var n=void 0===e?document:e.dom;return Dn(n)?U.none():U.from(n.querySelector(t)).map(yn.fromDom)},On=function(t,e){return t.dom===e.dom},Ln=function(t,e){var n=t.dom,r=e.dom;return n!==r&&n.contains(r)},En=function(t,e){return wn(t.dom,e.dom)},Nn=function(t,e){return Ue().browser.isIE()?En(t,e):Ln(t,e)},Rn=("undefined"!==typeof window?window:Function("return this;")(),function(t){var e=t.dom.nodeName;return e.toLowerCase()}),Pn=function(t){return t.dom.nodeType},zn=function(t){return function(e){return Pn(e)===t}},Bn=function(t){return Pn(t)===_n||"#comment"===Rn(t)},Vn=zn(Mn),Hn=zn(Tn),Fn=zn(Sn),Wn=zn(Cn),Un=function(t){return yn.fromDom(t.dom.ownerDocument)},Gn=function(t){return Fn(t)?t:Un(t)},jn=function(t){return yn.fromDom(Gn(t).dom.documentElement)},Xn=function(t){return yn.fromDom(Gn(t).dom.defaultView)},Yn=function(t){return U.from(t.dom.parentNode).map(yn.fromDom)},qn=function(t,e){var n=M(e)?e:z,r=t.dom,o=[];while(null!==r.parentNode&&void 0!==r.parentNode){var i=r.parentNode,a=yn.fromDom(i);if(o.push(a),!0===n(a))break;r=i}return o},Zn=function(t){var e=function(e){return et(e,function(e){return!On(t,e)})};return Yn(t).map(tr).map(e).getOr([])},$n=function(t){return U.from(t.dom.previousSibling).map(yn.fromDom)},Kn=function(t){return U.from(t.dom.nextSibling).map(yn.fromDom)},Jn=function(t){return ct(bn(t,$n))},Qn=function(t){return bn(t,Kn)},tr=function(t){return K(t.dom.childNodes,yn.fromDom)},er=function(t,e){var n=t.dom.childNodes;return U.from(n[e]).map(yn.fromDom)},nr=function(t){return er(t,0)},rr=function(t){return er(t,t.dom.childNodes.length-1)},or=function(t){return t.dom.childNodes.length},ir=function(t){var e=t.dom.head;if(null===e||void 0===e)throw new Error("Head is not available yet");return yn.fromDom(e)},ar=function(t){return Wn(t)&&C(t.dom.host)},ur=M(Element.prototype.attachShadow)&&M(Node.prototype.getRootNode),sr=I(ur),lr=ur?function(t){return yn.fromDom(t.dom.getRootNode())}:Gn,cr=function(t){return ar(t)?t:ir(Gn(t))},fr=function(t){var e=lr(t);return ar(e)?U.some(e):U.none()},dr=function(t){return yn.fromDom(t.dom.host)},hr=function(t){if(sr()&&C(t.target)){var e=yn.fromDom(t.target);if(Vn(e)&&pr(e)&&t.composed&&t.composedPath){var n=t.composedPath();if(n)return gt(n)}}return U.from(t.target)},pr=function(t){return C(t.dom.shadowRoot)},gr=function(t,e){var n=Yn(t);n.each(function(n){n.dom.insertBefore(e.dom,t.dom)})},mr=function(t,e){var n=Kn(t);n.fold(function(){var n=Yn(t);n.each(function(t){yr(t,e)})},function(t){gr(t,e)})},vr=function(t,e){var n=nr(t);n.fold(function(){yr(t,e)},function(n){t.dom.insertBefore(e.dom,n.dom)})},yr=function(t,e){t.dom.appendChild(e.dom)},br=function(t,e){gr(t,e),yr(e,t)},xr=function(t,e){J(e,function(e){gr(t,e)})},wr=function(t,e){J(e,function(e){yr(t,e)})},_r=function(t){t.dom.textContent="",J(tr(t),function(t){Sr(t)})},Sr=function(t){var e=t.dom;null!==e.parentNode&&e.parentNode.removeChild(e)},Cr=function(t){var e=tr(t);e.length>0&&xr(t,e),Sr(t)},Mr=function(t){var e=Hn(t)?t.dom.parentNode:t.dom;if(void 0===e||null===e||null===e.ownerDocument)return!1;var n=e.ownerDocument;return fr(yn.fromDom(e)).fold(function(){return n.body.contains(e)},A(Mr,dr))},Tr=function(t,e){var n=function(n,r){return Tr(t+n,e+r)};return{left:t,top:e,translate:n}},kr=Tr,Dr=function(t){var e=t.getBoundingClientRect();return kr(e.left,e.top)},Ar=function(t,e){return void 0!==t?t:void 0!==e?e:0},Ir=function(t){var e=t.dom.ownerDocument,n=e.body,r=e.defaultView,o=e.documentElement;if(n===t.dom)return kr(n.offsetLeft,n.offsetTop);var i=Ar(null===r||void 0===r?void 0:r.pageYOffset,o.scrollTop),a=Ar(null===r||void 0===r?void 0:r.pageXOffset,o.scrollLeft),u=Ar(o.clientTop,n.clientTop),s=Ar(o.clientLeft,n.clientLeft);return Or(t).translate(a-s,i-u)},Or=function(t){var e=t.dom,n=e.ownerDocument,r=n.body;return r===e?kr(r.offsetLeft,r.offsetTop):Mr(t)?Dr(e):kr(0,0)},Lr=function(t){var e=void 0!==t?t.dom:document,n=e.body.scrollLeft||e.documentElement.scrollLeft,r=e.body.scrollTop||e.documentElement.scrollTop;return kr(n,r)},Er=function(t,e,n){var r=void 0!==n?n.dom:document,o=r.defaultView;o&&o.scrollTo(t,e)},Nr=function(t,e){var n=Ue().browser.isSafari();n&&M(t.dom.scrollIntoViewIfNeeded)?t.dom.scrollIntoViewIfNeeded(!1):t.dom.scrollIntoView(e)},Rr=function(t){var e=void 0===t?window:t;return U.from(e["visualViewport"])},Pr=function(t,e,n,r){return{x:t,y:e,width:n,height:r,right:t+n,bottom:e+r}},zr=function(t){var e=void 0===t?window:t,n=e.document,r=Lr(yn.fromDom(n));return Rr(e).fold(function(){var t=e.document.documentElement,n=t.clientWidth,o=t.clientHeight;return Pr(r.left,r.top,n,o)},function(t){return Pr(Math.max(t.pageLeft,r.left),Math.max(t.pageTop,r.top),t.width,t.height)})},Br=function(t){return function(e){return!!e&&e.nodeType===t}},Vr=function(t){return!!t&&!Object.getPrototypeOf(t)},Hr=Br(1),Fr=function(t){var e=t.map(function(t){return t.toLowerCase()});return function(t){if(t&&t.nodeName){var n=t.nodeName.toLowerCase();return Z(e,n)}return!1}},Wr=function(t,e){var n=e.toLowerCase().split(" ");return function(e){var r,o;if(Hr(e))for(r=0;r<n.length;r++){var i=e.ownerDocument.defaultView.getComputedStyle(e,null);if(o=i?i.getPropertyValue(t):null,o===n[r])return!0}return!1}},Ur=function(t){return function(e){return Hr(e)&&e.hasAttribute(t)}},Gr=function(t,e){return function(n){return Hr(n)&&n.getAttribute(t)===e}},jr=function(t){return Hr(t)&&t.hasAttribute("data-mce-bogus")},Xr=function(t){return Hr(t)&&"all"===t.getAttribute("data-mce-bogus")},Yr=function(t){return Hr(t)&&"TABLE"===t.tagName},qr=function(t){return function(e){if(Hr(e)){if(e.contentEditable===t)return!0;if(e.getAttribute("data-mce-contenteditable")===t)return!0}return!1}},Zr=Fr(["textarea","input"]),$r=Br(3),Kr=Br(8),Jr=Br(9),Qr=Br(11),to=Fr(["br"]),eo=Fr(["img"]),no=qr("true"),ro=qr("false"),oo=Fr(["td","th"]),io=Fr(["video","audio","object","embed"]),ao=function(t){return void 0!==t.style&&M(t.style.getPropertyValue)},uo=function(t,e,n){if(!(v(n)||w(n)||T(n)))throw console.error("Invalid call to Attribute.set. Key ",e,":: Value ",n,":: Element ",t),new Error("Attribute value was not simple");t.setAttribute(e,n+"")},so=function(t,e,n){uo(t.dom,e,n)},lo=function(t,e){var n=t.dom;wt(e,function(t,e){uo(n,e,t)})},co=function(t,e){var n=t.dom.getAttribute(e);return null===n?void 0:n},fo=function(t,e){return U.from(co(t,e))},ho=function(t,e){var n=t.dom;return!(!n||!n.hasAttribute)&&n.hasAttribute(e)},po=function(t,e){t.dom.removeAttribute(e)},go=function(t){return rt(t.dom.attributes,function(t,e){return t[e.name]=e.value,t},{})},mo=function(t,e,n){if(!v(n))throw console.error("Invalid call to CSS.set. Property ",e,":: Value ",n,":: Element ",t),new Error("CSS value must be a string: "+n);ao(t)&&t.style.setProperty(e,n)},vo=function(t,e){var n=t.dom;wt(e,function(t,e){mo(n,e,t)})},yo=function(t,e){var n=t.dom,r=window.getComputedStyle(n),o=r.getPropertyValue(e);return""!==o||Mr(t)?o:bo(n,e)},bo=function(t,e){return ao(t)?t.style.getPropertyValue(e):""},xo=function(t,e){var n=t.dom,r=bo(n,e);return U.from(r).filter(function(t){return t.length>0})},wo=function(t){var e={},n=t.dom;if(ao(n))for(var r=0;r<n.style.length;r++){var o=n.style.item(r);e[o]=n.style[o]}return e},_o=function(t){return t.dom.offsetWidth},So=Ue().browser,Co=function(t){return it(t,Vn)},Mo=function(t){return So.isFirefox()&&"table"===Rn(t)?Co(tr(t)).filter(function(t){return"caption"===Rn(t)}).bind(function(t){return Co(Qn(t)).map(function(e){var n=e.dom.offsetTop,r=t.dom.offsetTop,o=t.dom.offsetHeight;return n<=r?-o:0})}).getOr(0):0},To=function(t,e){return t.children&&Z(t.children,e)},ko=function(t,e,n){var r,o,i=0,a=0,u=t.ownerDocument;if(n=n||t,e){if(n===t&&e.getBoundingClientRect&&"static"===yo(yn.fromDom(t),"position"))return o=e.getBoundingClientRect(),i=o.left+(u.documentElement.scrollLeft||t.scrollLeft)-u.documentElement.clientLeft,a=o.top+(u.documentElement.scrollTop||t.scrollTop)-u.documentElement.clientTop,{x:i,y:a};r=e;while(r&&r!==n&&r.nodeType&&!To(r,n))i+=r.offsetLeft||0,a+=r.offsetTop||0,r=r.offsetParent;r=e.parentNode;while(r&&r!==n&&r.nodeType&&!To(r,n))i-=r.scrollLeft||0,a-=r.scrollTop||0,r=r.parentNode;a+=Mo(yn.fromDom(e))}return{x:i,y:a}},Do={},Ao={exports:Do};(function(t,n,r,o){(function(o){if("object"===typeof n&&"undefined"!==typeof r)r.exports=o();else if("function"===typeof t&&t.amd)t([],o);else{var i;i="undefined"!==typeof window?window:"undefined"!==typeof e?e:"undefined"!==typeof self?self:this,i.EphoxContactWrapper=o()}})(function(){return function(){function t(e,n,r){function i(u,s){if(!n[u]){if(!e[u]){var l="function"==typeof o&&o;if(!s&&l)return l(u,!0);if(a)return a(u,!0);var c=new Error("Cannot find module '"+u+"'");throw c.code="MODULE_NOT_FOUND",c}var f=n[u]={exports:{}};e[u][0].call(f.exports,function(t){var n=e[u][1][t];return i(n||t)},f,f.exports,t,e,n,r)}return n[u].exports}for(var a="function"==typeof o&&o,u=0;u<r.length;u++)i(r[u]);return i}return t}()({1:[function(t,e,n){var r,o,i=e.exports={};function a(){throw new Error("setTimeout has not been defined")}function u(){throw new Error("clearTimeout has not been defined")}function s(t){if(r===setTimeout)return setTimeout(t,0);if((r===a||!r)&&setTimeout)return r=setTimeout,setTimeout(t,0);try{return r(t,0)}catch(e){try{return r.call(null,t,0)}catch(e){return r.call(this,t,0)}}}function l(t){if(o===clearTimeout)return clearTimeout(t);if((o===u||!o)&&clearTimeout)return o=clearTimeout,clearTimeout(t);try{return o(t)}catch(e){try{return o.call(null,t)}catch(e){return o.call(this,t)}}}(function(){try{r="function"===typeof setTimeout?setTimeout:a}catch(t){r=a}try{o="function"===typeof clearTimeout?clearTimeout:u}catch(t){o=u}})();var c,f=[],d=!1,h=-1;function p(){d&&c&&(d=!1,c.length?f=c.concat(f):h=-1,f.length&&g())}function g(){if(!d){var t=s(p);d=!0;var e=f.length;while(e){c=f,f=[];while(++h<e)c&&c[h].run();h=-1,e=f.length}c=null,d=!1,l(t)}}function m(t,e){this.fun=t,this.array=e}function v(){}i.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];f.push(new m(t,e)),1!==f.length||d||s(g)},m.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=v,i.addListener=v,i.once=v,i.off=v,i.removeListener=v,i.removeAllListeners=v,i.emit=v,i.prependListener=v,i.prependOnceListener=v,i.listeners=function(t){return[]},i.binding=function(t){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(t){throw new Error("process.chdir is not supported")},i.umask=function(){return 0}},{}],2:[function(t,e,n){(function(t){(function(n){var r=setTimeout;function o(){}function i(t,e){return function(){t.apply(e,arguments)}}function a(t){if("object"!==typeof this)throw new TypeError("Promises must be constructed via new");if("function"!==typeof t)throw new TypeError("not a function");this._state=0,this._handled=!1,this._value=void 0,this._deferreds=[],d(t,this)}function u(t,e){while(3===t._state)t=t._value;0!==t._state?(t._handled=!0,a._immediateFn(function(){var n=1===t._state?e.onFulfilled:e.onRejected;if(null!==n){var r;try{r=n(t._value)}catch(o){return void l(e.promise,o)}s(e.promise,r)}else(1===t._state?s:l)(e.promise,t._value)})):t._deferreds.push(e)}function s(t,e){try{if(e===t)throw new TypeError("A promise cannot be resolved with itself.");if(e&&("object"===typeof e||"function"===typeof e)){var n=e.then;if(e instanceof a)return t._state=3,t._value=e,void c(t);if("function"===typeof n)return void d(i(n,e),t)}t._state=1,t._value=e,c(t)}catch(r){l(t,r)}}function l(t,e){t._state=2,t._value=e,c(t)}function c(t){2===t._state&&0===t._deferreds.length&&a._immediateFn(function(){t._handled||a._unhandledRejectionFn(t._value)});for(var e=0,n=t._deferreds.length;e<n;e++)u(t,t._deferreds[e]);t._deferreds=null}function f(t,e,n){this.onFulfilled="function"===typeof t?t:null,this.onRejected="function"===typeof e?e:null,this.promise=n}function d(t,e){var n=!1;try{t(function(t){n||(n=!0,s(e,t))},function(t){n||(n=!0,l(e,t))})}catch(r){if(n)return;n=!0,l(e,r)}}a.prototype["catch"]=function(t){return this.then(null,t)},a.prototype.then=function(t,e){var n=new this.constructor(o);return u(this,new f(t,e,n)),n},a.all=function(t){var e=Array.prototype.slice.call(t);return new a(function(t,n){if(0===e.length)return t([]);var r=e.length;function o(i,a){try{if(a&&("object"===typeof a||"function"===typeof a)){var u=a.then;if("function"===typeof u)return void u.call(a,function(t){o(i,t)},n)}e[i]=a,0===--r&&t(e)}catch(s){n(s)}}for(var i=0;i<e.length;i++)o(i,e[i])})},a.resolve=function(t){return t&&"object"===typeof t&&t.constructor===a?t:new a(function(e){e(t)})},a.reject=function(t){return new a(function(e,n){n(t)})},a.race=function(t){return new a(function(e,n){for(var r=0,o=t.length;r<o;r++)t[r].then(e,n)})},a._immediateFn="function"===typeof t?function(e){t(e)}:function(t){r(t,0)},a._unhandledRejectionFn=function(t){"undefined"!==typeof console&&console&&console.warn("Possible Unhandled Promise Rejection:",t)},a._setImmediateFn=function(t){a._immediateFn=t},a._setUnhandledRejectionFn=function(t){a._unhandledRejectionFn=t},"undefined"!==typeof e&&e.exports?e.exports=a:n.Promise||(n.Promise=a)})(this)}).call(this,t("timers").setImmediate)},{timers:3}],3:[function(t,e,n){(function(e,r){var o=t("process/browser.js").nextTick,i=Function.prototype.apply,a=Array.prototype.slice,u={},s=0;function l(t,e){this._id=t,this._clearFn=e}n.setTimeout=function(){return new l(i.call(setTimeout,window,arguments),clearTimeout)},n.setInterval=function(){return new l(i.call(setInterval,window,arguments),clearInterval)},n.clearTimeout=n.clearInterval=function(t){t.close()},l.prototype.unref=l.prototype.ref=function(){},l.prototype.close=function(){this._clearFn.call(window,this._id)},n.enroll=function(t,e){clearTimeout(t._idleTimeoutId),t._idleTimeout=e},n.unenroll=function(t){clearTimeout(t._idleTimeoutId),t._idleTimeout=-1},n._unrefActive=n.active=function(t){clearTimeout(t._idleTimeoutId);var e=t._idleTimeout;e>=0&&(t._idleTimeoutId=setTimeout(function(){t._onTimeout&&t._onTimeout()},e))},n.setImmediate="function"===typeof e?e:function(t){var e=s++,r=!(arguments.length<2)&&a.call(arguments,1);return u[e]=!0,o(function(){u[e]&&(r?t.apply(null,r):t.call(null),n.clearImmediate(e))}),e},n.clearImmediate="function"===typeof r?r:function(t){delete u[t]}}).call(this,t("timers").setImmediate,t("timers").clearImmediate)},{"process/browser.js":1,timers:3}],4:[function(t,e,n){var r=t("promise-polyfill"),o=function(){return"undefined"!==typeof window?window:Function("return this;")()}();e.exports={boltExport:o.Promise||r}},{"promise-polyfill":2}]},{},[4])(4)})})(void 0,Do,Ao,void 0);var Io=Ao.exports.boltExport,Oo=function(t){var e=U.none(),n=[],r=function(t){return Oo(function(e){o(function(n){e(t(n))})})},o=function(t){a()?s(t):n.push(t)},i=function(t){a()||(e=U.some(t),u(n),n=[])},a=function(){return e.isSome()},u=function(t){J(t,s)},s=function(t){e.each(function(e){setTimeout(function(){t(e)},0)})};return t(i),{get:o,map:r,isReady:a}},Lo=function(t){return Oo(function(e){e(t)})},Eo={nu:Oo,pure:Lo},No=function(t){setTimeout(function(){throw t},0)},Ro=function(t){var e=function(e){t().then(e,No)},n=function(e){return Ro(function(){return t().then(e)})},r=function(e){return Ro(function(){return t().then(function(t){return e(t).toPromise()})})},o=function(e){return Ro(function(){return t().then(function(){return e.toPromise()})})},i=function(){return Eo.nu(e)},a=function(){var e=null;return Ro(function(){return null===e&&(e=t()),e})},u=t;return{map:n,bind:r,anonBind:o,toLazy:i,toCached:a,toPromise:u,get:e}},Po=function(t){return Ro(function(){return new Io(t)})},zo=function(t){return Ro(function(){return Io.resolve(t)})},Bo={nu:Po,pure:zo},Vo=function(t,e){return e(function(e){var n=[],r=0,o=function(o){return function(i){n[o]=i,r++,r>=t.length&&e(n)}};0===t.length?e([]):J(t,function(t,e){t.get(o(e))})})},Ho=function(t){return Vo(t,Bo.nu)},Fo=function(t){var e=function(e){return t===e},n=function(e){return Fo(t)},r=function(e){return Fo(t)},o=function(e){return Fo(e(t))},i=function(e){return Fo(t)},a=function(e){e(t)},u=function(e){return e(t)},s=function(e,n){return n(t)},l=function(e){return e(t)},c=function(e){return e(t)},f=function(){return U.some(t)};return{is:e,isValue:B,isError:z,getOr:I(t),getOrThunk:I(t),getOrDie:I(t),or:n,orThunk:r,fold:s,map:o,mapError:i,each:a,bind:u,exists:l,forall:c,toOptional:f}},Wo=function(t){var e=function(t){return t()},n=function(){return N(String(t))()},r=function(t){return t},o=function(t){return t()},i=function(e){return Wo(t)},a=function(e){return Wo(e(t))},u=function(e){return Wo(t)},s=function(e,n){return e(t)};return{is:z,isValue:z,isError:B,getOr:O,getOrThunk:e,getOrDie:n,or:r,orThunk:o,fold:s,map:i,mapError:a,each:k,bind:u,exists:z,forall:B,toOptional:U.none}},Uo=function(t,e){return t.fold(function(){return Wo(e)},Fo)},Go={value:Fo,error:Wo,fromOption:Uo},jo=function(t){if(!b(t))throw new Error("cases must be an array");if(0===t.length)throw new Error("there must be at least one case");var e=[],n={};return J(t,function(r,o){var i=bt(r);if(1!==i.length)throw new Error("one and only one name per case");var a=i[0],u=r[a];if(void 0!==n[a])throw new Error("duplicate key detected:"+a);if("cata"===a)throw new Error("cannot have a case named cata (sorry)");if(!b(u))throw new Error("case arguments must be an array");e.push(a),n[a]=function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];var i=n.length;if(i!==u.length)throw new Error("Wrong number of arguments to case "+a+". Expected "+u.length+" ("+u+"), got "+i);var s=function(t){var r=bt(t);if(e.length!==r.length)throw new Error("Wrong number of arguments to match. Expected: "+e.join(",")+"\nActual: "+r.join(","));var o=lt(e,function(t){return Z(r,t)});if(!o)throw new Error("Not all branches were specified when using match. Specified: "+r.join(", ")+"\nRequired: "+e.join(", "));return t[a].apply(null,n)};return{fold:function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];if(e.length!==t.length)throw new Error("Wrong number of arguments to fold. Expected "+t.length+", got "+e.length);var i=e[o];return i.apply(null,n)},match:s,log:function(t){console.log(t,{constructors:e,constructor:a,params:n})}}}}),n},Xo={generate:jo},Yo=(Xo.generate([{bothErrors:["error1","error2"]},{firstError:["error1","value2"]},{secondError:["value1","error2"]},{bothValues:["value1","value2"]}]),function(t){return t.fold(O,O)});function qo(t,e,n,r,o){return t(n,r)?U.some(n):M(o)&&o(n)?U.none():e(n,r,o)}var Zo,$o,Ko,Jo,Qo,ti,ei,ni,ri,oi,ii,ai,ui,si,li,ci,fi,di,hi,pi=function(t,e,n){var r=t.dom,o=M(n)?n:z;while(r.parentNode){r=r.parentNode;var i=yn.fromDom(r);if(e(i))return U.some(i);if(o(i))break}return U.none()},gi=function(t,e,n){var r=function(t,e){return e(t)};return qo(r,pi,t,e,n)},mi=function(t,e){var n=t.dom;return n.parentNode?vi(yn.fromDom(n.parentNode),function(n){return!On(t,n)&&e(n)}):U.none()},vi=function(t,e){var n=function(t){return e(yn.fromDom(t))},r=it(t.dom.childNodes,n);return r.map(yn.fromDom)},yi=function(t,e,n){return pi(t,function(t){return kn(t,e)},n)},bi=function(t,e){return In(e,t)},xi=function(t,e,n){var r=function(t,e){return kn(t,e)};return qo(r,yi,t,e,n)},wi=function(){var t=function(t,e){return function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];t.apply(e,n)}},e=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)},n=function(e){if("object"!==typeof this)throw new TypeError("Promises must be constructed via new");if("function"!==typeof e)throw new TypeError("not a function");this._state=null,this._value=null,this._deferreds=[],l(e,t(i,this),t(a,this))},r=n.immediateFn||"function"===typeof setImmediate&&setImmediate||function(t){return setTimeout(t,1)};function o(t){var e=this;null!==this._state?r(function(){var n=e._state?t.onFulfilled:t.onRejected;if(null!==n){var r;try{r=n(e._value)}catch(o){return void t.reject(o)}t.resolve(r)}else(e._state?t.resolve:t.reject)(e._value)}):this._deferreds.push(t)}function i(e){try{if(e===this)throw new TypeError("A promise cannot be resolved with itself.");if(e&&("object"===typeof e||"function"===typeof e)){var n=e.then;if("function"===typeof n)return void l(t(n,e),t(i,this),t(a,this))}this._state=!0,this._value=e,u.call(this)}catch(r){a.call(this,r)}}function a(t){this._state=!1,this._value=t,u.call(this)}function u(){for(var t=0,e=this._deferreds.length;t<e;t++)o.call(this,this._deferreds[t]);this._deferreds=null}function s(t,e,n,r){this.onFulfilled="function"===typeof t?t:null,this.onRejected="function"===typeof e?e:null,this.resolve=n,this.reject=r}var l=function(t,e,n){var r=!1;try{t(function(t){r||(r=!0,e(t))},function(t){r||(r=!0,n(t))})}catch(o){if(r)return;r=!0,n(o)}};return n.prototype.catch=function(t){return this.then(null,t)},n.prototype.then=function(t,e){var r=this;return new n(function(n,i){o.call(r,new s(t,e,n,i))})},n.all=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];var o=Array.prototype.slice.call(1===t.length&&e(t[0])?t[0]:t);return new n(function(t,e){if(0===o.length)return t([]);for(var n=o.length,r=function(i,a){try{if(a&&("object"===typeof a||"function"===typeof a)){var u=a.then;if("function"===typeof u)return void u.call(a,function(t){r(i,t)},e)}o[i]=a,0===--n&&t(o)}catch(s){e(s)}},i=0;i<o.length;i++)r(i,o[i])})},n.resolve=function(t){return t&&"object"===typeof t&&t.constructor===n?t:new n(function(e){e(t)})},n.reject=function(t){return new n(function(e,n){n(t)})},n.race=function(t){return new n(function(e,n){for(var r=0,o=t.length;r<o;r++)t[r].then(e,n)})},n},_i=window.Promise?window.Promise:wi(),Si=function(t,e){for(var n=window.requestAnimationFrame,r=["ms","moz","webkit"],o=function(t){window.setTimeout(t,0)},i=0;i<r.length&&!n;i++)n=window[r[i]+"RequestAnimationFrame"];n||(n=o),n(t,e)},Ci=function(t,e){return"number"!==typeof e&&(e=0),setTimeout(t,e)},Mi=function(t,e){return"number"!==typeof e&&(e=1),setInterval(t,e)},Ti=function(t){return clearTimeout(t)},ki=function(t){return clearInterval(t)},Di=function(t,e){var n,r=function(){for(var r=[],o=0;o<arguments.length;o++)r[o]=arguments[o];clearTimeout(n),n=Ci(function(){t.apply(this,r)},e)};return r.stop=function(){clearTimeout(n)},r},Ai={requestAnimationFrame:function(t,e){Zo?Zo.then(t):Zo=new _i(function(t){e||(e=document.body),Si(t,e)}).then(t)},setTimeout:Ci,setInterval:Mi,setEditorTimeout:function(t,e,n){return Ci(function(){t.removed||e()},n)},setEditorInterval:function(t,e,n){var r=Mi(function(){t.removed?clearInterval(r):e()},n);return r},debounce:Di,throttle:Di,clearInterval:ki,clearTimeout:Ti},Ii=function(t,e){void 0===e&&(e={});var n=0,r={},o=yn.fromDom(t),i=Gn(o),a=e.maxLoadTime||5e3,u=function(t){e.referrerPolicy=t},s=function(t){yr(cr(o),t)},l=function(t){var e=cr(o);bi(e,"#"+t).each(Sr)},c=function(t){return It(r,t).getOrThunk(function(){return{id:"mce-u"+n++,passed:[],failed:[],count:0}})},f=function(n,o,u){var l,f=dn._addCacheSuffix(n),d=c(f);r[f]=d,d.count++;var h=function(t,e){var n=t.length;while(n--)t[n]();d.status=e,d.passed=[],d.failed=[],l&&(l.onload=null,l.onerror=null,l=null)},p=function(){return h(d.passed,2)},g=function(){return h(d.failed,3)},m=function(t,e){t()||(Date.now()-b<a?Ai.setTimeout(e):g())},v=function(){m(function(){var e=t.styleSheets,n=e.length;while(n--){var r=e[n],o=r.ownerNode;if(o&&o.id===l.id)return p(),!0}return!1},v)};if(o&&d.passed.push(o),u&&d.failed.push(u),1!==d.status)if(2!==d.status)if(3!==d.status){d.status=1;var y=yn.fromTag("link",i.dom);lo(y,{rel:"stylesheet",type:"text/css",id:d.id});var b=Date.now();e.contentCssCors&&so(y,"crossOrigin","anonymous"),e.referrerPolicy&&so(y,"referrerpolicy",e.referrerPolicy),l=y.dom,l.onload=v,l.onerror=g,s(y),so(y,"href",f)}else g();else p()},d=function(t){return Bo.nu(function(e){f(t,D(e,I(Go.value(t))),D(e,I(Go.error(t))))})},h=function(t,e,n){Ho(K(t,d)).get(function(t){var r=tt(t,function(t){return t.isValue()});r.fail.length>0?n(r.fail.map(Yo)):e(r.pass.map(Yo))})},p=function(t){var e=dn._addCacheSuffix(t);It(r,e).each(function(t){var n=--t.count;0===n&&(delete r[e],l(t.id))})},g=function(t){J(t,function(t){p(t)})};return{load:f,loadAll:h,unload:p,unloadAll:g,_setReferrerPolicy:u}},Oi=function(){var t=new WeakMap,e=function(e,n){var r=lr(e),o=r.dom;return U.from(t.get(o)).getOrThunk(function(){var e=Ii(o,n);return t.set(o,e),e})};return{forElement:e}},Li=Oi(),Ei=function(){function t(t,e){this.node=t,this.rootNode=e,this.current=this.current.bind(this),this.next=this.next.bind(this),this.prev=this.prev.bind(this),this.prev2=this.prev2.bind(this)}return t.prototype.current=function(){return this.node},t.prototype.next=function(t){return this.node=this.findSibling(this.node,"firstChild","nextSibling",t),this.node},t.prototype.prev=function(t){return this.node=this.findSibling(this.node,"lastChild","previousSibling",t),this.node},t.prototype.prev2=function(t){return this.node=this.findPreviousNode(this.node,"lastChild","previousSibling",t),this.node},t.prototype.findSibling=function(t,e,n,r){var o,i;if(t){if(!r&&t[e])return t[e];if(t!==this.rootNode){if(o=t[n],o)return o;for(i=t.parentNode;i&&i!==this.rootNode;i=i.parentNode)if(o=i[n],o)return o}}},t.prototype.findPreviousNode=function(t,e,n,r){var o,i,a;if(t){if(o=t[n],this.rootNode&&o===this.rootNode)return;if(o){if(!r)for(a=o[e];a;a=a[e])if(!a[e])return a;return o}if(i=t.parentNode,i&&i!==this.rootNode)return i}},t}(),Ni=["article","aside","details","div","dt","figcaption","footer","form","fieldset","header","hgroup","html","main","nav","section","summary","body","p","dl","multicol","dd","figure","address","center","blockquote","h1","h2","h3","h4","h5","h6","listing","xmp","pre","plaintext","menu","dir","ul","ol","li","hr","table","tbody","thead","tfoot","th","tr","td","caption"],Ri=["td","th"],Pi=["thead","tbody","tfoot"],zi=["h1","h2","h3","h4","h5","h6","p","div","address","pre","form","blockquote","center","dir","fieldset","header","footer","article","section","hgroup","aside","nav","figure"],Bi=["h1","h2","h3","h4","h5","h6"],Vi=["li","dd","dt"],Hi=["ul","ol","dl"],Fi=["pre","script","textarea","style"],Wi=function(t){var e;return function(n){return e=e||dt(t,B),e.hasOwnProperty(Rn(n))}},Ui=Wi(Bi),Gi=Wi(Ni),ji=function(t){return"table"===Rn(t)},Xi=function(t){return Vn(t)&&!Gi(t)},Yi=function(t){return Vn(t)&&"br"===Rn(t)},qi=Wi(zi),Zi=Wi(Hi),$i=Wi(Vi),Ki=Wi(Pi),Ji=Wi(Ri),Qi=Wi(Fi),ta=function(t,e,n){return yi(t,e,n).isSome()},ea="\ufeff",na=" ",ra=function(t){return t===ea},oa=function(t){return t.replace(/\uFEFF/g,"")},ia=ea,aa=ra,ua=oa,sa=Hr,la=$r,ca=function(t){return la(t)&&(t=t.parentNode),sa(t)&&t.hasAttribute("data-mce-caret")},fa=function(t){return la(t)&&aa(t.data)},da=function(t){return ca(t)||fa(t)},ha=function(t){return t.firstChild!==t.lastChild||!to(t.firstChild)},pa=function(t,e){var n,r=t.ownerDocument,o=r.createTextNode(ia),i=t.parentNode;if(e){if(n=t.previousSibling,la(n)){if(da(n))return n;if(xa(n))return n.splitText(n.data.length-1)}i.insertBefore(o,t)}else{if(n=t.nextSibling,la(n)){if(da(n))return n;if(ba(n))return n.splitText(1),n}t.nextSibling?i.insertBefore(o,t.nextSibling):i.appendChild(o)}return o},ga=function(t){var e=t.container();return!!$r(e)&&(e.data.charAt(t.offset())===ia||t.isAtStart()&&fa(e.previousSibling))},ma=function(t){var e=t.container();return!!$r(e)&&(e.data.charAt(t.offset()-1)===ia||t.isAtEnd()&&fa(e.nextSibling))},va=function(){var t=document.createElement("br");return t.setAttribute("data-mce-bogus","1"),t},ya=function(t,e,n){var r=e.ownerDocument,o=r.createElement(t);o.setAttribute("data-mce-caret",n?"before":"after"),o.setAttribute("data-mce-bogus","all"),o.appendChild(va());var i=e.parentNode;return n?i.insertBefore(o,e):e.nextSibling?i.insertBefore(o,e.nextSibling):i.appendChild(o),o},ba=function(t){return la(t)&&t.data[0]===ia},xa=function(t){return la(t)&&t.data[t.data.length-1]===ia},wa=function(t){var e=t.getElementsByTagName("br"),n=e[e.length-1];jr(n)&&n.parentNode.removeChild(n)},_a=function(t){return t&&t.hasAttribute("data-mce-caret")?(wa(t),t.removeAttribute("data-mce-caret"),t.removeAttribute("data-mce-bogus"),t.removeAttribute("style"),t.removeAttribute("_moz_abspos"),t):null},Sa=function(t){return ca(t.startContainer)},Ca=no,Ma=ro,Ta=to,ka=$r,Da=Fr(["script","style","textarea"]),Aa=Fr(["img","input","textarea","hr","iframe","video","audio","object","embed"]),Ia=Fr(["table"]),Oa=da,La=function(t){return!Oa(t)&&(ka(t)?!Da(t.parentNode):Aa(t)||Ta(t)||Ia(t)||Na(t))},Ea=function(t){return Hr(t)&&"true"===t.getAttribute("unselectable")},Na=function(t){return!1===Ea(t)&&Ma(t)},Ra=function(t,e){for(t=t.parentNode;t&&t!==e;t=t.parentNode){if(Na(t))return!1;if(Ca(t))return!0}return!0},Pa=function(t){return!!Na(t)&&!0!==rt(vt(t.getElementsByTagName("*")),function(t,e){return t||Ca(e)},!1)},za=function(t){return Aa(t)||Pa(t)},Ba=function(t,e){return La(t)&&Ra(t,e)},Va=/^[ \t\r\n]*$/,Ha=function(t){return Va.test(t)},Fa=function(t,e){var n=yn.fromDom(e),r=yn.fromDom(t);return ta(r,"pre,code",L(On,n))},Wa=function(t,e){return $r(t)&&Ha(t.data)&&!1===Fa(t,e)},Ua=function(t){return Hr(t)&&"A"===t.nodeName&&!t.hasAttribute("href")&&(t.hasAttribute("name")||t.hasAttribute("id"))},Ga=function(t,e){return La(t)&&!1===Wa(t,e)||Ua(t)||ja(t)},ja=Ur("data-mce-bookmark"),Xa=Ur("data-mce-bogus"),Ya=Gr("data-mce-bogus","all"),qa=function(t,e){var n,r=0;if(Ga(t,t))return!1;if(n=t.firstChild,!n)return!0;var o=new Ei(n,t);do{if(e){if(Ya(n)){n=o.next(!0);continue}if(Xa(n)){n=o.next();continue}}if(to(n))r++,n=o.next();else{if(Ga(n,t))return!1;n=o.next()}}while(n);return r<=1},Za=function(t,e){return void 0===e&&(e=!0),qa(t.dom,e)},$a=function(t){return"span"===t.nodeName.toLowerCase()},Ka=function(t,e){return C(t)&&(Ga(t,e)||Xi(yn.fromDom(t)))},Ja=function(t,e){var n=new Ei(t,e).prev(!1),r=new Ei(t,e).next(!1),o=_(n)||Ka(n,e),i=_(r)||Ka(r,e);return o&&i},Qa=function(t){return $a(t)&&"bookmark"===t.getAttribute("data-mce-type")},tu=function(t,e){return $r(t)&&t.data.length>0&&Ja(t,e)},eu=function(t){return!!Hr(t)&&t.childNodes.length>0},nu=function(t){return Qr(t)||Jr(t)},ru=function(t,e,n){var r=n||e;if(Hr(e)&&Qa(e))return e;for(var o=e.childNodes,i=o.length-1;i>=0;i--)ru(t,o[i],r);if(Hr(e)){var a=e.childNodes;1===a.length&&Qa(a[0])&&e.parentNode.insertBefore(a[0],e)}return nu(e)||Ga(e,r)||eu(e)||tu(e,r)||t.remove(e),e},ou=dn.makeMap,iu=/[&<>\"\u0060\u007E-\uD7FF\uE000-\uFFEF]|[\uD800-\uDBFF][\uDC00-\uDFFF]/g,au=/[<>&\u007E-\uD7FF\uE000-\uFFEF]|[\uD800-\uDBFF][\uDC00-\uDFFF]/g,uu=/[<>&\"\']/g,su=/&#([a-z0-9]+);?|&([a-z0-9]+);/gi,lu={128:"€",130:"‚",131:"ƒ",132:"„",133:"…",134:"†",135:"‡",136:"ˆ",137:"‰",138:"Š",139:"‹",140:"Œ",142:"Ž",145:"‘",146:"’",147:"“",148:"”",149:"•",150:"–",151:"—",152:"˜",153:"™",154:"š",155:"›",156:"œ",158:"ž",159:"Ÿ"},cu={'"':"&quot;","'":"&#39;","<":"&lt;",">":"&gt;","&":"&amp;","`":"&#96;"},fu={"&lt;":"<","&gt;":">","&amp;":"&","&quot;":'"',"&apos;":"'"},du=function(t){var e=yn.fromTag("div").dom;return e.innerHTML=t,e.textContent||e.innerText||t},hu=function(t,e){var n,r,o,i={};if(t){for(t=t.split(","),e=e||10,n=0;n<t.length;n+=2)r=String.fromCharCode(parseInt(t[n],e)),cu[r]||(o="&"+t[n+1]+";",i[r]=o,i[o]=r);return i}},pu=hu("50,nbsp,51,iexcl,52,cent,53,pound,54,curren,55,yen,56,brvbar,57,sect,58,uml,59,copy,5a,ordf,5b,laquo,5c,not,5d,shy,5e,reg,5f,macr,5g,deg,5h,plusmn,5i,sup2,5j,sup3,5k,acute,5l,micro,5m,para,5n,middot,5o,cedil,5p,sup1,5q,ordm,5r,raquo,5s,frac14,5t,frac12,5u,frac34,5v,iquest,60,Agrave,61,Aacute,62,Acirc,63,Atilde,64,Auml,65,Aring,66,AElig,67,Ccedil,68,Egrave,69,Eacute,6a,Ecirc,6b,Euml,6c,Igrave,6d,Iacute,6e,Icirc,6f,Iuml,6g,ETH,6h,Ntilde,6i,Ograve,6j,Oacute,6k,Ocirc,6l,Otilde,6m,Ouml,6n,times,6o,Oslash,6p,Ugrave,6q,Uacute,6r,Ucirc,6s,Uuml,6t,Yacute,6u,THORN,6v,szlig,70,agrave,71,aacute,72,acirc,73,atilde,74,auml,75,aring,76,aelig,77,ccedil,78,egrave,79,eacute,7a,ecirc,7b,euml,7c,igrave,7d,iacute,7e,icirc,7f,iuml,7g,eth,7h,ntilde,7i,ograve,7j,oacute,7k,ocirc,7l,otilde,7m,ouml,7n,divide,7o,oslash,7p,ugrave,7q,uacute,7r,ucirc,7s,uuml,7t,yacute,7u,thorn,7v,yuml,ci,fnof,sh,Alpha,si,Beta,sj,Gamma,sk,Delta,sl,Epsilon,sm,Zeta,sn,Eta,so,Theta,sp,Iota,sq,Kappa,sr,Lambda,ss,Mu,st,Nu,su,Xi,sv,Omicron,t0,Pi,t1,Rho,t3,Sigma,t4,Tau,t5,Upsilon,t6,Phi,t7,Chi,t8,Psi,t9,Omega,th,alpha,ti,beta,tj,gamma,tk,delta,tl,epsilon,tm,zeta,tn,eta,to,theta,tp,iota,tq,kappa,tr,lambda,ts,mu,tt,nu,tu,xi,tv,omicron,u0,pi,u1,rho,u2,sigmaf,u3,sigma,u4,tau,u5,upsilon,u6,phi,u7,chi,u8,psi,u9,omega,uh,thetasym,ui,upsih,um,piv,812,bull,816,hellip,81i,prime,81j,Prime,81u,oline,824,frasl,88o,weierp,88h,image,88s,real,892,trade,89l,alefsym,8cg,larr,8ch,uarr,8ci,rarr,8cj,darr,8ck,harr,8dl,crarr,8eg,lArr,8eh,uArr,8ei,rArr,8ej,dArr,8ek,hArr,8g0,forall,8g2,part,8g3,exist,8g5,empty,8g7,nabla,8g8,isin,8g9,notin,8gb,ni,8gf,prod,8gh,sum,8gi,minus,8gn,lowast,8gq,radic,8gt,prop,8gu,infin,8h0,ang,8h7,and,8h8,or,8h9,cap,8ha,cup,8hb,int,8hk,there4,8hs,sim,8i5,cong,8i8,asymp,8j0,ne,8j1,equiv,8j4,le,8j5,ge,8k2,sub,8k3,sup,8k4,nsub,8k6,sube,8k7,supe,8kl,oplus,8kn,otimes,8l5,perp,8m5,sdot,8o8,lceil,8o9,rceil,8oa,lfloor,8ob,rfloor,8p9,lang,8pa,rang,9ea,loz,9j0,spades,9j3,clubs,9j5,hearts,9j6,diams,ai,OElig,aj,oelig,b0,Scaron,b1,scaron,bo,Yuml,m6,circ,ms,tilde,802,ensp,803,emsp,809,thinsp,80c,zwnj,80d,zwj,80e,lrm,80f,rlm,80j,ndash,80k,mdash,80o,lsquo,80p,rsquo,80q,sbquo,80s,ldquo,80t,rdquo,80u,bdquo,810,dagger,811,Dagger,81g,permil,81p,lsaquo,81q,rsaquo,85c,euro",32),gu=function(t,e){return t.replace(e?iu:au,function(t){return cu[t]||t})},mu=function(t){return(""+t).replace(uu,function(t){return cu[t]||t})},vu=function(t,e){return t.replace(e?iu:au,function(t){return t.length>1?"&#"+(1024*(t.charCodeAt(0)-55296)+(t.charCodeAt(1)-56320)+65536)+";":cu[t]||"&#"+t.charCodeAt(0)+";"})},yu=function(t,e,n){return n=n||pu,t.replace(e?iu:au,function(t){return cu[t]||n[t]||t})},bu=function(t,e){var n=hu(e)||pu,r=function(t,e){return t.replace(e?iu:au,function(t){return void 0!==cu[t]?cu[t]:void 0!==n[t]?n[t]:t.length>1?"&#"+(1024*(t.charCodeAt(0)-55296)+(t.charCodeAt(1)-56320)+65536)+";":"&#"+t.charCodeAt(0)+";"})},o=function(t,e){return yu(t,e,n)},i=ou(t.replace(/\+/g,","));return i.named&&i.numeric?r:i.named?e?o:yu:i.numeric?vu:gu},xu=function(t){return t.replace(su,function(t,e){return e?(e="x"===e.charAt(0).toLowerCase()?parseInt(e.substr(1),16):parseInt(e,10),e>65535?(e-=65536,String.fromCharCode(55296+(e>>10),56320+(1023&e))):lu[e]||String.fromCharCode(e)):fu[t]||pu[t]||du(t)})},wu={encodeRaw:gu,encodeAllRaw:mu,encodeNumeric:vu,encodeNamed:yu,getEncodeFunc:bu,decode:xu},_u={},Su={},Cu=dn.makeMap,Mu=dn.each,Tu=dn.extend,ku=dn.explode,Du=dn.inArray,Au=function(t,e){return t=dn.trim(t),t?t.split(e||" "):[]},Iu=function(t){var e,n,r,o,i,a,u={},s=function(t,n,r){var o,i,a,s=function(t,e){var n,r,o={};for(n=0,r=t.length;n<r;n++)o[t[n]]=e||{};return o};r=r||[],n=n||"","string"===typeof r&&(r=Au(r));var l=Au(t);o=l.length;while(o--)i=Au([e,n].join(" ")),a={attributes:s(i),attributesOrder:i,children:s(r,Su)},u[l[o]]=a},l=function(t,e){var n,r,o,i,a=Au(t);n=a.length;var s=Au(e);while(n--)for(r=u[a[n]],o=0,i=s.length;o<i;o++)r.attributes[s[o]]={},r.attributesOrder.push(s[o])};return _u[t]?_u[t]:(e="id accesskey class dir lang style tabindex title role",n="address blockquote div dl fieldset form h1 h2 h3 h4 h5 h6 hr menu ol p pre table ul",r="a abbr b bdo br button cite code del dfn em embed i iframe img input ins kbd label map noscript object q s samp script select small span strong sub sup textarea u var #text #comment","html4"!==t&&(e+=" contenteditable contextmenu draggable dropzone hidden spellcheck translate",n+=" article aside details dialog figure main header footer hgroup section nav",r+=" audio canvas command datalist mark meter output picture progress time wbr video ruby bdi keygen"),"html5-strict"!==t&&(e+=" xml:lang",a="acronym applet basefont big font strike tt",r=[r,a].join(" "),Mu(Au(a),function(t){s(t,"",r)}),i="center dir isindex noframes",n=[n,i].join(" "),o=[n,r].join(" "),Mu(Au(i),function(t){s(t,"",o)})),o=o||[n,r].join(" "),s("html","manifest","head body"),s("head","","base command link meta noscript script style title"),s("title hr noscript br"),s("base","href target"),s("link","href rel media hreflang type sizes hreflang"),s("meta","name http-equiv content charset"),s("style","media type scoped"),s("script","src async defer type charset"),s("body","onafterprint onbeforeprint onbeforeunload onblur onerror onfocus onhashchange onload onmessage onoffline ononline onpagehide onpageshow onpopstate onresize onscroll onstorage onunload",o),s("address dt dd div caption","",o),s("h1 h2 h3 h4 h5 h6 pre p abbr code var samp kbd sub sup i b u bdo span legend em strong small s cite dfn","",r),s("blockquote","cite",o),s("ol","reversed start type","li"),s("ul","","li"),s("li","value",o),s("dl","","dt dd"),s("a","href target rel media hreflang type",r),s("q","cite",r),s("ins del","cite datetime",o),s("img","src sizes srcset alt usemap ismap width height"),s("iframe","src name width height",o),s("embed","src type width height"),s("object","data type typemustmatch name usemap form width height",[o,"param"].join(" ")),s("param","name value"),s("map","name",[o,"area"].join(" ")),s("area","alt coords shape href target rel media hreflang type"),s("table","border","caption colgroup thead tfoot tbody tr"+("html4"===t?" col":"")),s("colgroup","span","col"),s("col","span"),s("tbody thead tfoot","","tr"),s("tr","","td th"),s("td","colspan rowspan headers",o),s("th","colspan rowspan headers scope abbr",o),s("form","accept-charset action autocomplete enctype method name novalidate target",o),s("fieldset","disabled form name",[o,"legend"].join(" ")),s("label","form for",r),s("input","accept alt autocomplete checked dirname disabled form formaction formenctype formmethod formnovalidate formtarget height list max maxlength min multiple name pattern readonly required size src step type value width"),s("button","disabled form formaction formenctype formmethod formnovalidate formtarget name type value","html4"===t?o:r),s("select","disabled form multiple name required size","option optgroup"),s("optgroup","disabled label","option"),s("option","disabled label selected value"),s("textarea","cols dirname disabled form maxlength name readonly required rows wrap"),s("menu","type label",[o,"li"].join(" ")),s("noscript","",o),"html4"!==t&&(s("wbr"),s("ruby","",[r,"rt rp"].join(" ")),s("figcaption","",o),s("mark rt rp summary bdi","",r),s("canvas","width height",o),s("video","src crossorigin poster preload autoplay mediagroup loop muted controls width height buffered",[o,"track source"].join(" ")),s("audio","src crossorigin preload autoplay mediagroup loop muted controls buffered volume",[o,"track source"].join(" ")),s("picture","","img source"),s("source","src srcset type media sizes"),s("track","kind src srclang label default"),s("datalist","",[r,"option"].join(" ")),s("article section nav aside main header footer","",o),s("hgroup","","h1 h2 h3 h4 h5 h6"),s("figure","",[o,"figcaption"].join(" ")),s("time","datetime",r),s("dialog","open",o),s("command","type label icon disabled checked radiogroup command"),s("output","for form name",r),s("progress","value max",r),s("meter","value min max low high optimum",r),s("details","open",[o,"summary"].join(" ")),s("keygen","autofocus challenge disabled form keytype name")),"html5-strict"!==t&&(l("script","language xml:space"),l("style","xml:space"),l("object","declare classid code codebase codetype archive standby align border hspace vspace"),l("embed","align name hspace vspace"),l("param","valuetype type"),l("a","charset name rev shape coords"),l("br","clear"),l("applet","codebase archive code object alt name width height align hspace vspace"),l("img","name longdesc align border hspace vspace"),l("iframe","longdesc frameborder marginwidth marginheight scrolling align"),l("font basefont","size color face"),l("input","usemap align"),l("select"),l("textarea"),l("h1 h2 h3 h4 h5 h6 div p legend caption","align"),l("ul","type compact"),l("li","type"),l("ol dl menu dir","compact"),l("pre","width xml:space"),l("hr","align noshade size width"),l("isindex","prompt"),l("table","summary width frame rules cellspacing cellpadding align bgcolor"),l("col","width align char charoff valign"),l("colgroup","width align char charoff valign"),l("thead","align char charoff valign"),l("tr","align char charoff valign bgcolor"),l("th","axis align char charoff valign nowrap bgcolor width height"),l("form","accept"),l("td","abbr axis scope align char charoff valign nowrap bgcolor width height"),l("tfoot","align char charoff valign"),l("tbody","align char charoff valign"),l("area","nohref"),l("body","background bgcolor text link vlink alink")),"html4"!==t&&(l("input button select textarea","autofocus"),l("input textarea","placeholder"),l("a","download"),l("link script img","crossorigin"),l("img","loading"),l("iframe","sandbox seamless allowfullscreen loading")),Mu(Au("a form meter progress dfn"),function(t){u[t]&&delete u[t].children[t]}),delete u.caption.children.table,delete u.script,_u[t]=u,u)},Ou=function(t,e){var n;return t&&(n={},"string"===typeof t&&(t={"*":t}),Mu(t,function(t,r){n[r]=n[r.toUpperCase()]="map"===e?Cu(t,/[, ]/):ku(t,/[, ]/)})),n},Lu=function(t){var e={},n={},r=[],o={},i={},a=function(e,n,r){var o=t[e];return o?o=Cu(o,/[, ]/,Cu(o.toUpperCase(),/[, ]/)):(o=_u[e],o||(o=Cu(n," ",Cu(n.toUpperCase()," ")),o=Tu(o,r),_u[e]=o)),o};t=t||{};var u=Iu(t.schema);!1===t.verify_html&&(t.valid_elements="*[*]");var s=Ou(t.valid_styles),l=Ou(t.invalid_styles,"map"),c=Ou(t.valid_classes,"map"),f=a("whitespace_elements","pre script noscript style textarea video audio iframe object code"),d=a("self_closing_elements","colgroup dd dt li option p td tfoot th thead tr"),h=a("short_ended_elements","area base basefont br col frame hr img input isindex link meta param embed source wbr track"),p=a("boolean_attributes","checked compact declare defer disabled ismap multiple nohref noresize noshade nowrap readonly selected autoplay loop controls"),g="td th iframe video audio object script code",m=a("non_empty_elements",g+" pre",h),v=a("move_caret_before_on_enter_elements",g+" table",h),y=a("text_block_elements","h1 h2 h3 h4 h5 h6 p div address pre form blockquote center dir fieldset header footer article section hgroup aside main nav figure"),b=a("block_elements","hr table tbody thead tfoot th tr td li ol ul caption dl dt dd noscript menu isindex option datalist select optgroup figcaption details summary",y),x=a("text_inline_elements","span strong b em i font strike u var cite dfn code mark q sup sub samp");Mu((t.special||"script noscript iframe noframes noembed title style textarea xmp").split(" "),function(t){i[t]=new RegExp("</"+t+"[^>]*>","gi")});var w=function(t){return new RegExp("^"+t.replace(/([?+*])/g,".$1")+"$")},_=function(t){var n,o,i,a,u,s,l,c,f,d,h,p,g,m,v,y,b,x,_=/^([#+\-])?([^\[!\/]+)(?:\/([^\[!]+))?(?:(!?)\[([^\]]+)])?$/,S=/^([!\-])?(\w+[\\:]:\w+|[^=:<]+)?(?:([=:<])(.*))?$/,C=/[*?+]/;if(t){var M=Au(t,",");for(e["@"]&&(y=e["@"].attributes,b=e["@"].attributesOrder),n=0,o=M.length;n<o;n++)if(u=_.exec(M[n]),u){if(m=u[1],f=u[2],v=u[3],c=u[5],p={},g=[],s={attributes:p,attributesOrder:g},"#"===m&&(s.paddEmpty=!0),"-"===m&&(s.removeEmpty=!0),"!"===u[4]&&(s.removeEmptyAttrs=!0),y&&(wt(y,function(t,e){p[e]=t}),g.push.apply(g,b)),c)for(c=Au(c,"|"),i=0,a=c.length;i<a;i++)if(u=S.exec(c[i]),u){if(l={},h=u[1],d=u[2].replace(/[\\:]:/g,":"),m=u[3],x=u[4],"!"===h&&(s.attributesRequired=s.attributesRequired||[],s.attributesRequired.push(d),l.required=!0),"-"===h){delete p[d],g.splice(Du(g,d),1);continue}m&&("="===m&&(s.attributesDefault=s.attributesDefault||[],s.attributesDefault.push({name:d,value:x}),l.defaultValue=x),":"===m&&(s.attributesForced=s.attributesForced||[],s.attributesForced.push({name:d,value:x}),l.forcedValue=x),"<"===m&&(l.validValues=Cu(x,"?"))),C.test(d)?(s.attributePatterns=s.attributePatterns||[],l.pattern=w(d),s.attributePatterns.push(l)):(p[d]||g.push(d),p[d]=l)}y||"@"!==f||(y=p,b=g),v&&(s.outputName=f,e[v]=s),C.test(f)?(s.pattern=w(f),r.push(s)):e[f]=s}}},S=function(t){e={},r=[],_(t),Mu(u,function(t,e){n[e]=t.children})},C=function(t){var r=/^(~)?(.+)$/;t&&(_u.text_block_elements=_u.block_elements=null,Mu(Au(t,","),function(t){var i=r.exec(t),a="~"===i[1],u=a?"span":"div",s=i[2];if(n[s]=n[u],o[s]=u,a||(b[s.toUpperCase()]={},b[s]={}),!e[s]){var l=e[u];l=Tu({},l),delete l.removeEmptyAttrs,delete l.removeEmpty,e[s]=l}Mu(n,function(t,e){t[u]&&(n[e]=t=Tu({},n[e]),t[s]=t[u])})}))},M=function(e){var r=/^([+\-]?)([A-Za-z0-9_\-.\u00b7\u00c0-\u00d6\u00d8-\u00f6\u00f8-\u037d\u037f-\u1fff\u200c-\u200d\u203f-\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]+)\[([^\]]+)]$/;_u[t.schema]=null,e&&Mu(Au(e,","),function(t){var e,o,i=r.exec(t);i&&(o=i[1],e=o?n[i[2]]:n[i[2]]={"#comment":{}},e=n[i[2]],Mu(Au(i[3],"|"),function(t){"-"===o?delete e[t]:e[t]={}}))})},T=function(t){var n,o=e[t];if(o)return o;n=r.length;while(n--)if(o=r[n],o.pattern.test(t))return o};t.valid_elements?S(t.valid_elements):(Mu(u,function(t,r){e[r]={attributes:t.attributes,attributesOrder:t.attributesOrder},n[r]=t.children}),"html5"!==t.schema&&Mu(Au("strong/b em/i"),function(t){var n=Au(t,"/");e[n[1]].outputName=n[0]}),Mu(Au("ol ul sub sup blockquote span font a table tbody strong em b i"),function(t){e[t]&&(e[t].removeEmpty=!0)}),Mu(Au("p h1 h2 h3 h4 h5 h6 th td pre div address caption li"),function(t){e[t].paddEmpty=!0}),Mu(Au("span"),function(t){e[t].removeEmptyAttrs=!0})),C(t.custom_elements),M(t.valid_children),_(t.extended_valid_elements),M("+ol[ul|ol],+ul[ul|ol]"),Mu({dd:"dl",dt:"dl",li:"ul ol",td:"tr",th:"tr",tr:"tbody thead tfoot",tbody:"table",thead:"table",tfoot:"table",legend:"fieldset",area:"map",param:"video audio object"},function(t,n){e[n]&&(e[n].parentsRequired=Au(t))}),t.invalid_elements&&Mu(ku(t.invalid_elements),function(t){e[t]&&delete e[t]}),T("span")||_("span[!data-mce-type|*]");var k=function(){return s},D=function(){return l},A=function(){return c},I=function(){return p},O=function(){return b},L=function(){return y},E=function(){return x},N=function(){return h},R=function(){return d},P=function(){return m},z=function(){return v},B=function(){return f},V=function(){return i},H=function(t,e){var r=n[t.toLowerCase()];return!(!r||!r[e.toLowerCase()])},F=function(t,e){var n,r,o=T(t);if(o){if(!e)return!0;if(o.attributes[e])return!0;if(n=o.attributePatterns,n){r=n.length;while(r--)if(n[r].pattern.test(t))return!0}}return!1},W=function(){return o};return{children:n,elements:e,getValidStyles:k,getValidClasses:A,getBlockElements:O,getInvalidStyles:D,getShortEndedElements:N,getTextBlockElements:L,getTextInlineElements:E,getBoolAttrs:I,getElementRule:T,getSelfClosingElements:R,getNonEmptyElements:P,getMoveCaretBeforeOnEnterElements:z,getWhiteSpaceElements:B,getSpecialElements:V,isValidChild:H,isValid:F,getCustomElements:W,addValidElements:_,setValidElements:S,addCustomElements:C,addValidChildren:M}},Eu=function(t,e,n,r){var o=function(t){return t=parseInt(t,10).toString(16),t.length>1?t:"0"+t};return"#"+o(e)+o(n)+o(r)},Nu=function(t,e){var n,r,o,i=this,a=/rgb\s*\(\s*([0-9]+)\s*,\s*([0-9]+)\s*,\s*([0-9]+)\s*\)/gi,u=/(?:url(?:(?:\(\s*\"([^\"]+)\"\s*\))|(?:\(\s*\'([^\']+)\'\s*\))|(?:\(\s*([^)\s]+)\s*\))))|(?:\'([^\']+)\')|(?:\"([^\"]+)\")/gi,s=/\s*([^:]+):\s*([^;]+);?/g,l=/\s+$/,c={},f=ea;t=t||{},e&&(r=e.getValidStyles(),o=e.getInvalidStyles());var d=("\\\" \\' \\; \\: ; : "+f).split(" ");for(n=0;n<d.length;n++)c[d[n]]=f+n,c[f+n]=d[n];return{toHex:function(t){return t.replace(a,Eu)},parse:function(e){var r,o,d,h,p={},g=t.url_converter,m=t.url_converter_scope||i,v=function(t,e,r){var o=p[t+"-top"+e];if(o){var i=p[t+"-right"+e];if(i){var a=p[t+"-bottom"+e];if(a){var u=p[t+"-left"+e];if(u){var s=[o,i,a,u];n=s.length-1;while(n--)if(s[n]!==s[n+1])break;n>-1&&r||(p[t+e]=-1===n?s[0]:s.join(" "),delete p[t+"-top"+e],delete p[t+"-right"+e],delete p[t+"-bottom"+e],delete p[t+"-left"+e])}}}}},y=function(t){var e,n=p[t];if(n){n=n.split(" "),e=n.length;while(e--)if(n[e]!==n[0])return!1;return p[t]=n[0],!0}},b=function(t,e,n,r){y(e)&&y(n)&&y(r)&&(p[t]=p[e]+" "+p[n]+" "+p[r],delete p[e],delete p[n],delete p[r])},x=function(t){return h=!0,c[t]},w=function(t,e){return h&&(t=t.replace(/\uFEFF[0-9]/g,function(t){return c[t]})),e||(t=t.replace(/\\([\'\";:])/g,"$1")),t},_=function(t){return String.fromCharCode(parseInt(t.slice(1),16))},S=function(t){return t.replace(/\\[0-9a-f]+/gi,_)},C=function(e,n,r,o,i,a){if(i=i||a,i)return i=w(i),"'"+i.replace(/\'/g,"\\'")+"'";if(n=w(n||r||o),!t.allow_script_urls){var u=n.replace(/[\s\r\n]+/g,"");if(/(java|vb)script:/i.test(u))return"";if(!t.allow_svg_data_urls&&/^data:image\/svg/i.test(u))return""}return g&&(n=g.call(m,n,"style")),"url('"+n.replace(/\'/g,"\\'")+"')"};if(e){e=e.replace(/[\u0000-\u001F]/g,""),e=e.replace(/\\[\"\';:\uFEFF]/g,x).replace(/\"[^\"]+\"|\'[^\']+\'/g,function(t){return t.replace(/[;:]/g,x)});while(r=s.exec(e))if(s.lastIndex=r.index+r[0].length,o=r[1].replace(l,"").toLowerCase(),d=r[2].replace(l,""),o&&d){if(o=S(o),d=S(d),-1!==o.indexOf(f)||-1!==o.indexOf('"'))continue;if(!t.allow_script_urls&&("behavior"===o||/expression\s*\(|\/\*|\*\//.test(d)))continue;"font-weight"===o&&"700"===d?d="bold":"color"!==o&&"background-color"!==o||(d=d.toLowerCase()),d=d.replace(a,Eu),d=d.replace(u,C),p[o]=h?w(d,!0):d}v("border","",!0),v("border","-width"),v("border","-color"),v("border","-style"),v("padding",""),v("margin",""),b("border","border-width","border-style","border-color"),"medium none"===p.border&&delete p.border,"none"===p["border-image"]&&delete p["border-image"]}return p},serialize:function(t,e){var n="",i=function(e){var o,i=r[e];if(i)for(var a=0,u=i.length;a<u;a++)e=i[a],o=t[e],o&&(n+=(n.length>0?" ":"")+e+": "+o+";")},a=function(t,e){var n=o["*"];return(!n||!n[t])&&(n=o[e],!(n&&n[t]))};return e&&r?(i("*"),i(e)):wt(t,function(t,r){!t||o&&!a(r,e)||(n+=(n.length>0?" ":"")+r+": "+t+";")}),n}}},Ru="mce-data-",Pu=/^(?:mouse|contextmenu)|click/,zu={keyLocation:1,layerX:1,layerY:1,returnValue:1,webkitMovementX:1,webkitMovementY:1,keyIdentifier:1,mozPressure:1},Bu=function(t){return t.isDefaultPrevented===Hu||t.isDefaultPrevented===Vu},Vu=z,Hu=B,Fu=function(t,e,n,r){t.addEventListener?t.addEventListener(e,n,r||!1):t.attachEvent&&t.attachEvent("on"+e,n)},Wu=function(t,e,n,r){t.removeEventListener?t.removeEventListener(e,n,r||!1):t.detachEvent&&t.detachEvent("on"+e,n)},Uu=function(t){return Pu.test(t.type)},Gu=function(t,e){var n,r=e||{};for(n in t)zu[n]||(r[n]=t[n]);if(r.target||(r.target=r.srcElement||document),r.composedPath&&(r.composedPath=function(){return t.composedPath()}),t&&Uu(t)&&void 0===t.pageX&&void 0!==t.clientX){var o=r.target.ownerDocument||document,i=o.documentElement,a=o.body;r.pageX=t.clientX+(i&&i.scrollLeft||a&&a.scrollLeft||0)-(i&&i.clientLeft||a&&a.clientLeft||0),r.pageY=t.clientY+(i&&i.scrollTop||a&&a.scrollTop||0)-(i&&i.clientTop||a&&a.clientTop||0)}return r.preventDefault=function(){r.defaultPrevented=!0,r.isDefaultPrevented=Hu,t&&(t.preventDefault?t.preventDefault():t.returnValue=!1)},r.stopPropagation=function(){r.cancelBubble=!0,r.isPropagationStopped=Hu,t&&(t.stopPropagation?t.stopPropagation():t.cancelBubble=!0)},r.stopImmediatePropagation=function(){r.isImmediatePropagationStopped=Hu,r.stopPropagation()},!1===Bu(r)&&(r.isDefaultPrevented=!0===r.defaultPrevented?Hu:Vu,r.isPropagationStopped=!0===r.cancelBubble?Hu:Vu,r.isImmediatePropagationStopped=Vu),"undefined"===typeof r.metaKey&&(r.metaKey=!1),r},ju=function(t,e,n){var r=t.document,o={type:"ready"};if(n.domLoaded)e(o);else{var i=function(){return"complete"===r.readyState||"interactive"===r.readyState&&r.body},a=function(){Wu(t,"DOMContentLoaded",a),Wu(t,"load",a),n.domLoaded||(n.domLoaded=!0,e(o)),t=null};i()?a():Fu(t,"DOMContentLoaded",a),n.domLoaded||Fu(t,"load",a)}},Xu=function(){function t(){this.domLoaded=!1,this.events={},this.count=1,this.expando=Ru+(+new Date).toString(32),this.hasMouseEnterLeave="onmouseenter"in document.documentElement,this.hasFocusIn="onfocusin"in document.documentElement,this.count=1}return t.prototype.bind=function(t,e,n,r){var o,i,a,u,s,l,c,f=this,d=window,h=function(t){f.executeHandlers(Gu(t||d.event),o)};if(t&&3!==t.nodeType&&8!==t.nodeType){t[f.expando]?o=t[f.expando]:(o=f.count++,t[f.expando]=o,f.events[o]={}),r=r||t;var p=e.split(" ");a=p.length;while(a--)u=p[a],l=h,s=c=!1,"DOMContentLoaded"===u&&(u="ready"),f.domLoaded&&"ready"===u&&"complete"===t.readyState?n.call(r,Gu({type:u})):(f.hasMouseEnterLeave||(s=f.mouseEnterLeave[u],s&&(l=function(t){var e=t.currentTarget,n=t.relatedTarget;if(n&&e.contains)n=e.contains(n);else while(n&&n!==e)n=n.parentNode;n||(t=Gu(t||d.event),t.type="mouseout"===t.type?"mouseleave":"mouseenter",t.target=e,f.executeHandlers(t,o))})),f.hasFocusIn||"focusin"!==u&&"focusout"!==u||(c=!0,s="focusin"===u?"focus":"blur",l=function(t){t=Gu(t||d.event),t.type="focus"===t.type?"focusin":"focusout",f.executeHandlers(t,o)}),i=f.events[o][u],i?"ready"===u&&f.domLoaded?n(Gu({type:u})):i.push({func:n,scope:r}):(f.events[o][u]=i=[{func:n,scope:r}],i.fakeName=s,i.capture=c,i.nativeHandler=l,"ready"===u?ju(t,l,f):Fu(t,s||u,l,c)));return t=i=null,n}},t.prototype.unbind=function(t,e,n){var r,o,i,a,u;if(!t||3===t.nodeType||8===t.nodeType)return this;var s=t[this.expando];if(s){if(u=this.events[s],e){var l=e.split(" ");o=l.length;while(o--)if(a=l[o],r=u[a],r){if(n){i=r.length;while(i--)if(r[i].func===n){var c=r.nativeHandler,f=r.fakeName,d=r.capture;r=r.slice(0,i).concat(r.slice(i+1)),r.nativeHandler=c,r.fakeName=f,r.capture=d,u[a]=r}}n&&0!==r.length||(delete u[a],Wu(t,r.fakeName||a,r.nativeHandler,r.capture))}}else wt(u,function(e,n){Wu(t,e.fakeName||n,e.nativeHandler,e.capture)}),u={};for(a in u)if(Ot(u,a))return this;delete this.events[s];try{delete t[this.expando]}catch(h){t[this.expando]=null}}return this},t.prototype.fire=function(t,e,n){var r;if(!t||3===t.nodeType||8===t.nodeType)return this;var o=Gu(null,n);o.type=e,o.target=t;do{r=t[this.expando],r&&this.executeHandlers(o,r),t=t.parentNode||t.ownerDocument||t.defaultView||t.parentWindow}while(t&&!o.isPropagationStopped());return this},t.prototype.clean=function(t){var e,n;if(!t||3===t.nodeType||8===t.nodeType)return this;if(t[this.expando]&&this.unbind(t),t.getElementsByTagName||(t=t.document),t&&t.getElementsByTagName){this.unbind(t),n=t.getElementsByTagName("*"),e=n.length;while(e--)t=n[e],t[this.expando]&&this.unbind(t)}return this},t.prototype.destroy=function(){this.events={}},t.prototype.cancel=function(t){return t&&(t.preventDefault(),t.stopImmediatePropagation()),!1},t.prototype.executeHandlers=function(t,e){var n=this.events[e],r=n&&n[t.type];if(r)for(var o=0,i=r.length;o<i;o++){var a=r[o];if(a&&!1===a.func.call(a.scope,t)&&t.preventDefault(),t.isImmediatePropagationStopped())return}},t.Event=new t,t}(),Yu="sizzle"+-new Date,qu=window.document,Zu=0,$u=0,Ku=Os(),Ju=Os(),Qu=Os(),ts=function(t,e){return t===e&&(ii=!0),0},es="undefined",ns=1<<31,rs={}.hasOwnProperty,os=[],is=os.pop,as=os.push,us=os.push,ss=os.slice,ls=os.indexOf||function(t){for(var e=0,n=this.length;e<n;e++)if(this[e]===t)return e;return-1},cs="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",fs="[\\x20\\t\\r\\n\\f]",ds="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",hs="\\["+fs+"*("+ds+")(?:"+fs+"*([*^$|!~]?=)"+fs+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+ds+"))|)"+fs+"*\\]",ps=":("+ds+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+hs+")*)|.*)\\)|)",gs=new RegExp("^"+fs+"+|((?:^|[^\\\\])(?:\\\\.)*)"+fs+"+$","g"),ms=new RegExp("^"+fs+"*,"+fs+"*"),vs=new RegExp("^"+fs+"*([>+~]|"+fs+")"+fs+"*"),ys=new RegExp("="+fs+"*([^\\]'\"]*?)"+fs+"*\\]","g"),bs=new RegExp(ps),xs=new RegExp("^"+ds+"$"),ws={ID:new RegExp("^#("+ds+")"),CLASS:new RegExp("^\\.("+ds+")"),TAG:new RegExp("^("+ds+"|[*])"),ATTR:new RegExp("^"+hs),PSEUDO:new RegExp("^"+ps),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+fs+"*(even|odd|(([+-]|)(\\d*)n|)"+fs+"*(?:([+-]|)"+fs+"*(\\d+)|))"+fs+"*\\)|)","i"),bool:new RegExp("^(?:"+cs+")$","i"),needsContext:new RegExp("^"+fs+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+fs+"*((?:-\\d)?\\d*)"+fs+"*\\)|)(?=[^-]|$)","i")},_s=/^(?:input|select|textarea|button)$/i,Ss=/^h\d$/i,Cs=/^[^{]+\{\s*\[native \w/,Ms=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,Ts=/[+~]/,ks=/'|\\/g,Ds=new RegExp("\\\\([\\da-f]{1,6}"+fs+"?|("+fs+")|.)","ig"),As=function(t,e,n){var r="0x"+e-65536;return r!==r||n?e:r<0?String.fromCharCode(r+65536):String.fromCharCode(r>>10|55296,1023&r|56320)};try{us.apply(os=ss.call(qu.childNodes),qu.childNodes),os[qu.childNodes.length].nodeType}catch(EH){us={apply:os.length?function(t,e){as.apply(t,ss.call(e))}:function(t,e){var n=t.length,r=0;while(t[n++]=e[r++]);t.length=n-1}}}var Is=function(t,e,n,r){var o,i,a,u,s,l,c,f,d,h;if((e?e.ownerDocument||e:qu)!==ui&&ai(e),e=e||ui,n=n||[],!t||"string"!==typeof t)return n;if(1!==(u=e.nodeType)&&9!==u)return[];if(li&&!r){if(o=Ms.exec(t))if(a=o[1]){if(9===u){if(i=e.getElementById(a),!i||!i.parentNode)return n;if(i.id===a)return n.push(i),n}else if(e.ownerDocument&&(i=e.ownerDocument.getElementById(a))&&hi(e,i)&&i.id===a)return n.push(i),n}else{if(o[2])return us.apply(n,e.getElementsByTagName(t)),n;if((a=o[3])&&$o.getElementsByClassName)return us.apply(n,e.getElementsByClassName(a)),n}if($o.qsa&&(!ci||!ci.test(t))){if(f=c=Yu,d=e,h=9===u&&t,1===u&&"object"!==e.nodeName.toLowerCase()){l=ti(t),(c=e.getAttribute("id"))?f=c.replace(ks,"\\$&"):e.setAttribute("id",f),f="[id='"+f+"'] ",s=l.length;while(s--)l[s]=f+Vs(l[s]);d=Ts.test(t)&&zs(e.parentNode)||e,h=l.join(",")}if(h)try{return us.apply(n,d.querySelectorAll(h)),n}catch(p){}finally{c||e.removeAttribute("id")}}}return ni(t.replace(gs,"$1"),e,n,r)};function Os(){var t=[];function e(n,r){return t.push(n+" ")>Ko.cacheLength&&delete e[t.shift()],e[n+" "]=r}return e}function Ls(t){return t[Yu]=!0,t}function Es(t,e){var n=e&&t,r=n&&1===t.nodeType&&1===e.nodeType&&(~e.sourceIndex||ns)-(~t.sourceIndex||ns);if(r)return r;if(n)while(n=n.nextSibling)if(n===e)return-1;return t?1:-1}function Ns(t){return function(e){var n=e.nodeName.toLowerCase();return"input"===n&&e.type===t}}function Rs(t){return function(e){var n=e.nodeName.toLowerCase();return("input"===n||"button"===n)&&e.type===t}}function Ps(t){return Ls(function(e){return e=+e,Ls(function(n,r){var o,i=t([],n.length,e),a=i.length;while(a--)n[o=i[a]]&&(n[o]=!(r[o]=n[o]))})})}function zs(t){return t&&typeof t.getElementsByTagName!==es&&t}function Bs(){}function Vs(t){for(var e=0,n=t.length,r="";e<n;e++)r+=t[e].value;return r}function Hs(t,e,n){var r=e.dir,o=n&&"parentNode"===r,i=$u++;return e.first?function(e,n,i){while(e=e[r])if(1===e.nodeType||o)return t(e,n,i)}:function(e,n,a){var u,s,l=[Zu,i];if(a){while(e=e[r])if((1===e.nodeType||o)&&t(e,n,a))return!0}else while(e=e[r])if(1===e.nodeType||o){if(s=e[Yu]||(e[Yu]={}),(u=s[r])&&u[0]===Zu&&u[1]===i)return l[2]=u[2];if(s[r]=l,l[2]=t(e,n,a))return!0}}}function Fs(t){return t.length>1?function(e,n,r){var o=t.length;while(o--)if(!t[o](e,n,r))return!1;return!0}:t[0]}function Ws(t,e,n){for(var r=0,o=e.length;r<o;r++)Is(t,e[r],n);return n}function Us(t,e,n,r,o){for(var i,a=[],u=0,s=t.length,l=null!=e;u<s;u++)(i=t[u])&&(n&&!n(i,r,o)||(a.push(i),l&&e.push(u)));return a}function Gs(t,e,n,r,o,i){return r&&!r[Yu]&&(r=Gs(r)),o&&!o[Yu]&&(o=Gs(o,i)),Ls(function(i,a,u,s){var l,c,f,d=[],h=[],p=a.length,g=i||Ws(e||"*",u.nodeType?[u]:u,[]),m=!t||!i&&e?g:Us(g,d,t,u,s),v=n?o||(i?t:p||r)?[]:a:m;if(n&&n(m,v,u,s),r){l=Us(v,h),r(l,[],u,s),c=l.length;while(c--)(f=l[c])&&(v[h[c]]=!(m[h[c]]=f))}if(i){if(o||t){if(o){l=[],c=v.length;while(c--)(f=v[c])&&l.push(m[c]=f);o(null,v=[],l,s)}c=v.length;while(c--)(f=v[c])&&(l=o?ls.call(i,f):d[c])>-1&&(i[l]=!(a[l]=f))}}else v=Us(v===a?v.splice(p,v.length):v),o?o(null,a,v,s):us.apply(a,v)})}function js(t){for(var e,n,r,o=t.length,i=Ko.relative[t[0].type],a=i||Ko.relative[" "],u=i?1:0,s=Hs(function(t){return t===e},a,!0),l=Hs(function(t){return ls.call(e,t)>-1},a,!0),c=[function(t,n,r){var o=!i&&(r||n!==ri)||((e=n).nodeType?s(t,n,r):l(t,n,r));return e=null,o}];u<o;u++)if(n=Ko.relative[t[u].type])c=[Hs(Fs(c),n)];else{if(n=Ko.filter[t[u].type].apply(null,t[u].matches),n[Yu]){for(r=++u;r<o;r++)if(Ko.relative[t[r].type])break;return Gs(u>1&&Fs(c),u>1&&Vs(t.slice(0,u-1).concat({value:" "===t[u-2].type?"*":""})).replace(gs,"$1"),n,u<r&&js(t.slice(u,r)),r<o&&js(t=t.slice(r)),r<o&&Vs(t))}c.push(n)}return Fs(c)}function Xs(t,e){var n=e.length>0,r=t.length>0,o=function(o,i,a,u,s){var l,c,f,d=0,h="0",p=o&&[],g=[],m=ri,v=o||r&&Ko.find.TAG("*",s),y=Zu+=null==m?1:Math.random()||.1,b=v.length;for(s&&(ri=i!==ui&&i);h!==b&&null!=(l=v[h]);h++){if(r&&l){c=0;while(f=t[c++])if(f(l,i,a)){u.push(l);break}s&&(Zu=y)}n&&((l=!f&&l)&&d--,o&&p.push(l))}if(d+=h,n&&h!==d){c=0;while(f=e[c++])f(p,g,i,a);if(o){if(d>0)while(h--)p[h]||g[h]||(g[h]=is.call(u));g=Us(g)}us.apply(u,g),s&&!o&&g.length>0&&d+e.length>1&&Is.uniqueSort(u)}return s&&(Zu=y,ri=m),p};return n?Ls(o):o}$o=Is.support={},Qo=Is.isXML=function(t){var e=t&&(t.ownerDocument||t).documentElement;return!!e&&"HTML"!==e.nodeName},ai=Is.setDocument=function(t){var e,n=t?t.ownerDocument||t:qu,r=n.defaultView;function o(t){try{return t.top}catch(e){}return null}return n!==ui&&9===n.nodeType&&n.documentElement?(ui=n,si=n.documentElement,li=!Qo(n),r&&r!==o(r)&&(r.addEventListener?r.addEventListener("unload",function(){ai()},!1):r.attachEvent&&r.attachEvent("onunload",function(){ai()})),$o.attributes=!0,$o.getElementsByTagName=!0,$o.getElementsByClassName=Cs.test(n.getElementsByClassName),$o.getById=!0,Ko.find.ID=function(t,e){if(typeof e.getElementById!==es&&li){var n=e.getElementById(t);return n&&n.parentNode?[n]:[]}},Ko.filter.ID=function(t){var e=t.replace(Ds,As);return function(t){return t.getAttribute("id")===e}},Ko.find.TAG=$o.getElementsByTagName?function(t,e){if(typeof e.getElementsByTagName!==es)return e.getElementsByTagName(t)}:function(t,e){var n,r=[],o=0,i=e.getElementsByTagName(t);if("*"===t){while(n=i[o++])1===n.nodeType&&r.push(n);return r}return i},Ko.find.CLASS=$o.getElementsByClassName&&function(t,e){if(li)return e.getElementsByClassName(t)},fi=[],ci=[],$o.disconnectedMatch=!0,ci=ci.length&&new RegExp(ci.join("|")),fi=fi.length&&new RegExp(fi.join("|")),e=Cs.test(si.compareDocumentPosition),hi=e||Cs.test(si.contains)?function(t,e){var n=9===t.nodeType?t.documentElement:t,r=e&&e.parentNode;return t===r||!(!r||1!==r.nodeType||!(n.contains?n.contains(r):t.compareDocumentPosition&&16&t.compareDocumentPosition(r)))}:function(t,e){if(e)while(e=e.parentNode)if(e===t)return!0;return!1},ts=e?function(t,e){if(t===e)return ii=!0,0;var r=!t.compareDocumentPosition-!e.compareDocumentPosition;return r||(r=(t.ownerDocument||t)===(e.ownerDocument||e)?t.compareDocumentPosition(e):1,1&r||!$o.sortDetached&&e.compareDocumentPosition(t)===r?t===n||t.ownerDocument===qu&&hi(qu,t)?-1:e===n||e.ownerDocument===qu&&hi(qu,e)?1:oi?ls.call(oi,t)-ls.call(oi,e):0:4&r?-1:1)}:function(t,e){if(t===e)return ii=!0,0;var r,o=0,i=t.parentNode,a=e.parentNode,u=[t],s=[e];if(!i||!a)return t===n?-1:e===n?1:i?-1:a?1:oi?ls.call(oi,t)-ls.call(oi,e):0;if(i===a)return Es(t,e);r=t;while(r=r.parentNode)u.unshift(r);r=e;while(r=r.parentNode)s.unshift(r);while(u[o]===s[o])o++;return o?Es(u[o],s[o]):u[o]===qu?-1:s[o]===qu?1:0},n):ui},Is.matches=function(t,e){return Is(t,null,null,e)},Is.matchesSelector=function(t,e){if((t.ownerDocument||t)!==ui&&ai(t),e=e.replace(ys,"='$1']"),$o.matchesSelector&&li&&(!fi||!fi.test(e))&&(!ci||!ci.test(e)))try{var n=di.call(t,e);if(n||$o.disconnectedMatch||t.document&&11!==t.document.nodeType)return n}catch(EH){}return Is(e,ui,null,[t]).length>0},Is.contains=function(t,e){return(t.ownerDocument||t)!==ui&&ai(t),hi(t,e)},Is.attr=function(t,e){(t.ownerDocument||t)!==ui&&ai(t);var n=Ko.attrHandle[e.toLowerCase()],r=n&&rs.call(Ko.attrHandle,e.toLowerCase())?n(t,e,!li):void 0;return void 0!==r?r:$o.attributes||!li?t.getAttribute(e):(r=t.getAttributeNode(e))&&r.specified?r.value:null},Is.error=function(t){throw new Error("Syntax error, unrecognized expression: "+t)},Is.uniqueSort=function(t){var e,n=[],r=0,o=0;if(ii=!$o.detectDuplicates,oi=!$o.sortStable&&t.slice(0),t.sort(ts),ii){while(e=t[o++])e===t[o]&&(r=n.push(o));while(r--)t.splice(n[r],1)}return oi=null,t},Jo=Is.getText=function(t){var e,n="",r=0,o=t.nodeType;if(o){if(1===o||9===o||11===o){if("string"===typeof t.textContent)return t.textContent;for(t=t.firstChild;t;t=t.nextSibling)n+=Jo(t)}else if(3===o||4===o)return t.nodeValue}else while(e=t[r++])n+=Jo(e);return n},Ko=Is.selectors={cacheLength:50,createPseudo:Ls,match:ws,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(t){return t[1]=t[1].replace(Ds,As),t[3]=(t[3]||t[4]||t[5]||"").replace(Ds,As),"~="===t[2]&&(t[3]=" "+t[3]+" "),t.slice(0,4)},CHILD:function(t){return t[1]=t[1].toLowerCase(),"nth"===t[1].slice(0,3)?(t[3]||Is.error(t[0]),t[4]=+(t[4]?t[5]+(t[6]||1):2*("even"===t[3]||"odd"===t[3])),t[5]=+(t[7]+t[8]||"odd"===t[3])):t[3]&&Is.error(t[0]),t},PSEUDO:function(t){var e,n=!t[6]&&t[2];return ws.CHILD.test(t[0])?null:(t[3]?t[2]=t[4]||t[5]||"":n&&bs.test(n)&&(e=ti(n,!0))&&(e=n.indexOf(")",n.length-e)-n.length)&&(t[0]=t[0].slice(0,e),t[2]=n.slice(0,e)),t.slice(0,3))}},filter:{TAG:function(t){var e=t.replace(Ds,As).toLowerCase();return"*"===t?function(){return!0}:function(t){return t.nodeName&&t.nodeName.toLowerCase()===e}},CLASS:function(t){var e=Ku[t+" "];return e||(e=new RegExp("(^|"+fs+")"+t+"("+fs+"|$)"))&&Ku(t,function(t){return e.test("string"===typeof t.className&&t.className||typeof t.getAttribute!==es&&t.getAttribute("class")||"")})},ATTR:function(t,e,n){return function(r){var o=Is.attr(r,t);return null==o?"!="===e:!e||(o+="","="===e?o===n:"!="===e?o!==n:"^="===e?n&&0===o.indexOf(n):"*="===e?n&&o.indexOf(n)>-1:"$="===e?n&&o.slice(-n.length)===n:"~="===e?(" "+o+" ").indexOf(n)>-1:"|="===e&&(o===n||o.slice(0,n.length+1)===n+"-"))}},CHILD:function(t,e,n,r,o){var i="nth"!==t.slice(0,3),a="last"!==t.slice(-4),u="of-type"===e;return 1===r&&0===o?function(t){return!!t.parentNode}:function(e,n,s){var l,c,f,d,h,p,g=i!==a?"nextSibling":"previousSibling",m=e.parentNode,v=u&&e.nodeName.toLowerCase(),y=!s&&!u;if(m){if(i){while(g){f=e;while(f=f[g])if(u?f.nodeName.toLowerCase()===v:1===f.nodeType)return!1;p=g="only"===t&&!p&&"nextSibling"}return!0}if(p=[a?m.firstChild:m.lastChild],a&&y){c=m[Yu]||(m[Yu]={}),l=c[t]||[],h=l[0]===Zu&&l[1],d=l[0]===Zu&&l[2],f=h&&m.childNodes[h];while(f=++h&&f&&f[g]||(d=h=0)||p.pop())if(1===f.nodeType&&++d&&f===e){c[t]=[Zu,h,d];break}}else if(y&&(l=(e[Yu]||(e[Yu]={}))[t])&&l[0]===Zu)d=l[1];else while(f=++h&&f&&f[g]||(d=h=0)||p.pop())if((u?f.nodeName.toLowerCase()===v:1===f.nodeType)&&++d&&(y&&((f[Yu]||(f[Yu]={}))[t]=[Zu,d]),f===e))break;return d-=o,d===r||d%r===0&&d/r>=0}}},PSEUDO:function(t,e){var n,r=Ko.pseudos[t]||Ko.setFilters[t.toLowerCase()]||Is.error("unsupported pseudo: "+t);return r[Yu]?r(e):r.length>1?(n=[t,t,"",e],Ko.setFilters.hasOwnProperty(t.toLowerCase())?Ls(function(t,n){var o,i=r(t,e),a=i.length;while(a--)o=ls.call(t,i[a]),t[o]=!(n[o]=i[a])}):function(t){return r(t,0,n)}):r}},pseudos:{not:Ls(function(t){var e=[],n=[],r=ei(t.replace(gs,"$1"));return r[Yu]?Ls(function(t,e,n,o){var i,a=r(t,null,o,[]),u=t.length;while(u--)(i=a[u])&&(t[u]=!(e[u]=i))}):function(t,o,i){return e[0]=t,r(e,null,i,n),e[0]=null,!n.pop()}}),has:Ls(function(t){return function(e){return Is(t,e).length>0}}),contains:Ls(function(t){return t=t.replace(Ds,As),function(e){return(e.textContent||e.innerText||Jo(e)).indexOf(t)>-1}}),lang:Ls(function(t){return xs.test(t||"")||Is.error("unsupported lang: "+t),t=t.replace(Ds,As).toLowerCase(),function(e){var n;do{if(n=li?e.lang:e.getAttribute("xml:lang")||e.getAttribute("lang"))return n=n.toLowerCase(),n===t||0===n.indexOf(t+"-")}while((e=e.parentNode)&&1===e.nodeType);return!1}}),target:function(t){var e=window.location&&window.location.hash;return e&&e.slice(1)===t.id},root:function(t){return t===si},focus:function(t){return t===ui.activeElement&&(!ui.hasFocus||ui.hasFocus())&&!!(t.type||t.href||~t.tabIndex)},enabled:function(t){return!1===t.disabled},disabled:function(t){return!0===t.disabled},checked:function(t){var e=t.nodeName.toLowerCase();return"input"===e&&!!t.checked||"option"===e&&!!t.selected},selected:function(t){return t.parentNode&&t.parentNode.selectedIndex,!0===t.selected},empty:function(t){for(t=t.firstChild;t;t=t.nextSibling)if(t.nodeType<6)return!1;return!0},parent:function(t){return!Ko.pseudos.empty(t)},header:function(t){return Ss.test(t.nodeName)},input:function(t){return _s.test(t.nodeName)},button:function(t){var e=t.nodeName.toLowerCase();return"input"===e&&"button"===t.type||"button"===e},text:function(t){var e;return"input"===t.nodeName.toLowerCase()&&"text"===t.type&&(null==(e=t.getAttribute("type"))||"text"===e.toLowerCase())},first:Ps(function(){return[0]}),last:Ps(function(t,e){return[e-1]}),eq:Ps(function(t,e,n){return[n<0?n+e:n]}),even:Ps(function(t,e){for(var n=0;n<e;n+=2)t.push(n);return t}),odd:Ps(function(t,e){for(var n=1;n<e;n+=2)t.push(n);return t}),lt:Ps(function(t,e,n){for(var r=n<0?n+e:n;--r>=0;)t.push(r);return t}),gt:Ps(function(t,e,n){for(var r=n<0?n+e:n;++r<e;)t.push(r);return t})}},Ko.pseudos.nth=Ko.pseudos.eq,J(["radio","checkbox","file","password","image"],function(t){Ko.pseudos[t]=Ns(t)}),J(["submit","reset"],function(t){Ko.pseudos[t]=Rs(t)}),Bs.prototype=Ko.filters=Ko.pseudos,Ko.setFilters=new Bs,ti=Is.tokenize=function(t,e){var n,r,o,i,a,u,s,l=Ju[t+" "];if(l)return e?0:l.slice(0);a=t,u=[],s=Ko.preFilter;while(a){for(i in n&&!(r=ms.exec(a))||(r&&(a=a.slice(r[0].length)||a),u.push(o=[])),n=!1,(r=vs.exec(a))&&(n=r.shift(),o.push({value:n,type:r[0].replace(gs," ")}),a=a.slice(n.length)),Ko.filter)Ko.filter.hasOwnProperty(i)&&(!(r=ws[i].exec(a))||s[i]&&!(r=s[i](r))||(n=r.shift(),o.push({value:n,type:i,matches:r}),a=a.slice(n.length)));if(!n)break}return e?a.length:a?Is.error(t):Ju(t,u).slice(0)},ei=Is.compile=function(t,e){var n,r=[],o=[],i=Qu[t+" "];if(!i){e||(e=ti(t)),n=e.length;while(n--)i=js(e[n]),i[Yu]?r.push(i):o.push(i);i=Qu(t,Xs(o,r)),i.selector=t}return i},ni=Is.select=function(t,e,n,r){var o,i,a,u,s,l="function"===typeof t&&t,c=!r&&ti(t=l.selector||t);if(n=n||[],1===c.length){if(i=c[0]=c[0].slice(0),i.length>2&&"ID"===(a=i[0]).type&&$o.getById&&9===e.nodeType&&li&&Ko.relative[i[1].type]){if(e=(Ko.find.ID(a.matches[0].replace(Ds,As),e)||[])[0],!e)return n;l&&(e=e.parentNode),t=t.slice(i.shift().value.length)}o=ws.needsContext.test(t)?0:i.length;while(o--){if(a=i[o],Ko.relative[u=a.type])break;if((s=Ko.find[u])&&(r=s(a.matches[0].replace(Ds,As),Ts.test(i[0].type)&&zs(e.parentNode)||e))){if(i.splice(o,1),t=r.length&&Vs(i),!t)return us.apply(n,r),n;break}}}return(l||ei(t,c))(r,e,!li,n,Ts.test(t)&&zs(e.parentNode)||e),n},$o.sortStable=Yu.split("").sort(ts).join("")===Yu,$o.detectDuplicates=!!ii,ai(),$o.sortDetached=!0;var Ys=document,qs=Array.prototype.push,Zs=Array.prototype.slice,$s=/^(?:[^#<]*(<[\w\W]+>)[^>]*$|#([\w\-]*)$)/,Ks=Xu.Event,Js=dn.makeMap("children,contents,next,prev"),Qs=function(t){return"undefined"!==typeof t},tl=function(t){return"string"===typeof t},el=function(t){return t&&t===t.window},nl=function(t,e){e=e||Ys;var n,r=e.createElement("div"),o=e.createDocumentFragment();r.innerHTML=t;while(n=r.firstChild)o.appendChild(n);return o},rl=function(t,e,n,r){var o;if(tl(e))e=nl(e,yl(t[0]));else if(e.length&&!e.nodeType){if(e=_l.makeArray(e),r)for(o=e.length-1;o>=0;o--)rl(t,e[o],n,r);else for(o=0;o<e.length;o++)rl(t,e[o],n,r);return t}if(e.nodeType){o=t.length;while(o--)n.call(t[o],e)}return t},ol=function(t,e){return t&&e&&-1!==(" "+t.className+" ").indexOf(" "+e+" ")},il=function(t,e,n){var r,o;return e=_l(e)[0],t.each(function(){var t=this;n&&r===t.parentNode?o.appendChild(t):(r=t.parentNode,o=e.cloneNode(!1),t.parentNode.insertBefore(o,t),o.appendChild(t))}),t},al=dn.makeMap("fillOpacity fontWeight lineHeight opacity orphans widows zIndex zoom"," "),ul=dn.makeMap("checked compact declare defer disabled ismap multiple nohref noshade nowrap readonly selected"," "),sl={for:"htmlFor",class:"className",readonly:"readOnly"},ll={float:"cssFloat"},cl={},fl={},dl=function(t,e){return new _l.fn.init(t,e)},hl=function(t,e){var n;if(e.indexOf)return e.indexOf(t);n=e.length;while(n--)if(e[n]===t)return n;return-1},pl=/^\s*|\s*$/g,gl=function(t){return null===t||void 0===t?"":(""+t).replace(pl,"")},ml=function(t,e){var n,r,o,i;if(t)if(n=t.length,void 0===n){for(r in t)if(t.hasOwnProperty(r)&&(i=t[r],!1===e.call(i,r,i)))break}else for(o=0;o<n;o++)if(i=t[o],!1===e.call(i,o,i))break;return t},vl=function(t,e){var n=[];return ml(t,function(t,r){e(r,t)&&n.push(r)}),n},yl=function(t){return t?9===t.nodeType?t:t.ownerDocument:Ys};dl.fn=dl.prototype={constructor:dl,selector:"",context:null,length:0,init:function(t,e){var n,r,o=this;if(!t)return o;if(t.nodeType)return o.context=o[0]=t,o.length=1,o;if(e&&e.nodeType)o.context=e;else{if(e)return _l(t).attr(e);o.context=e=document}if(tl(t)){if(o.selector=t,n="<"===t.charAt(0)&&">"===t.charAt(t.length-1)&&t.length>=3?[null,t,null]:$s.exec(t),!n)return _l(e).find(t);if(n[1]){r=nl(t,yl(e)).firstChild;while(r)qs.call(o,r),r=r.nextSibling}else{if(r=yl(e).getElementById(n[2]),!r)return o;if(r.id!==n[2])return o.find(t);o.length=1,o[0]=r}}else this.add(t,!1);return o},toArray:function(){return dn.toArray(this)},add:function(t,e){var n,r,o=this;if(tl(t))return o.add(_l(t));if(!1!==e)for(n=_l.unique(o.toArray().concat(_l.makeArray(t))),o.length=n.length,r=0;r<n.length;r++)o[r]=n[r];else qs.apply(o,_l.makeArray(t));return o},attr:function(t,e){var n,r=this;if("object"===typeof t)ml(t,function(t,e){r.attr(t,e)});else{if(!Qs(e)){if(r[0]&&1===r[0].nodeType){if(n=cl[t],n&&n.get)return n.get(r[0],t);if(ul[t])return r.prop(t)?t:void 0;e=r[0].getAttribute(t,2),null===e&&(e=void 0)}return e}this.each(function(){var n;if(1===this.nodeType){if(n=cl[t],n&&n.set)return void n.set(this,e);null===e?this.removeAttribute(t,2):this.setAttribute(t,e,2)}})}return r},removeAttr:function(t){return this.attr(t,null)},prop:function(t,e){var n=this;if(t=sl[t]||t,"object"===typeof t)ml(t,function(t,e){n.prop(t,e)});else{if(!Qs(e))return n[0]&&n[0].nodeType&&t in n[0]?n[0][t]:e;this.each(function(){1===this.nodeType&&(this[t]=e)})}return n},css:function(t,e){var n,r,o=this,i=function(t){return t.replace(/-(\D)/g,function(t,e){return e.toUpperCase()})},a=function(t){return t.replace(/[A-Z]/g,function(t){return"-"+t})};if("object"===typeof t)ml(t,function(t,e){o.css(t,e)});else if(Qs(e))t=i(t),"number"!==typeof e||al[t]||(e=e.toString()+"px"),o.each(function(){var n=this.style;if(r=fl[t],r&&r.set)r.set(this,e);else{try{this.style[ll[t]||t]=e}catch(o){}null!==e&&""!==e||(n.removeProperty?n.removeProperty(a(t)):n.removeAttribute(t))}});else{if(n=o[0],r=fl[t],r&&r.get)return r.get(n);if(!n.ownerDocument.defaultView)return n.currentStyle?n.currentStyle[i(t)]:"";try{return n.ownerDocument.defaultView.getComputedStyle(n,null).getPropertyValue(a(t))}catch(u){return}}return o},remove:function(){var t,e=this,n=this.length;while(n--)t=e[n],Ks.clean(t),t.parentNode&&t.parentNode.removeChild(t);return this},empty:function(){var t,e=this,n=this.length;while(n--){t=e[n];while(t.firstChild)t.removeChild(t.firstChild)}return this},html:function(t){var e,n=this;if(Qs(t)){e=n.length;try{while(e--)n[e].innerHTML=t}catch(r){_l(n[e]).empty().append(t)}return n}return n[0]?n[0].innerHTML:""},text:function(t){var e,n=this;if(Qs(t)){e=n.length;while(e--)"innerText"in n[e]?n[e].innerText=t:n[0].textContent=t;return n}return n[0]?n[0].innerText||n[0].textContent:""},append:function(){return rl(this,arguments,function(t){(1===this.nodeType||this.host&&1===this.host.nodeType)&&this.appendChild(t)})},prepend:function(){return rl(this,arguments,function(t){(1===this.nodeType||this.host&&1===this.host.nodeType)&&this.insertBefore(t,this.firstChild)},!0)},before:function(){var t=this;return t[0]&&t[0].parentNode?rl(t,arguments,function(t){this.parentNode.insertBefore(t,this)}):t},after:function(){var t=this;return t[0]&&t[0].parentNode?rl(t,arguments,function(t){this.parentNode.insertBefore(t,this.nextSibling)},!0):t},appendTo:function(t){return _l(t).append(this),this},prependTo:function(t){return _l(t).prepend(this),this},replaceWith:function(t){return this.before(t).remove()},wrap:function(t){return il(this,t)},wrapAll:function(t){return il(this,t,!0)},wrapInner:function(t){return this.each(function(){_l(this).contents().wrapAll(t)}),this},unwrap:function(){return this.parent().each(function(){_l(this).replaceWith(this.childNodes)})},clone:function(){var t=[];return this.each(function(){t.push(this.cloneNode(!0))}),_l(t)},addClass:function(t){return this.toggleClass(t,!0)},removeClass:function(t){return this.toggleClass(t,!1)},toggleClass:function(t,e){var n=this;return"string"!==typeof t?n:(-1!==t.indexOf(" ")?ml(t.split(" "),function(){n.toggleClass(this,e)}):n.each(function(n,r){var o=ol(r,t);if(o!==e){var i=r.className;o?r.className=gl((" "+i+" ").replace(" "+t+" "," ")):r.className+=i?" "+t:t}}),n)},hasClass:function(t){return ol(this[0],t)},each:function(t){return ml(this,t)},on:function(t,e){return this.each(function(){Ks.bind(this,t,e)})},off:function(t,e){return this.each(function(){Ks.unbind(this,t,e)})},trigger:function(t){return this.each(function(){"object"===typeof t?Ks.fire(this,t.type,t):Ks.fire(this,t)})},show:function(){return this.css("display","")},hide:function(){return this.css("display","none")},slice:function(){return _l(Zs.apply(this,arguments))},eq:function(t){return-1===t?this.slice(t):this.slice(t,+t+1)},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},find:function(t){var e,n,r=[];for(e=0,n=this.length;e<n;e++)_l.find(t,this[e],r);return _l(r)},filter:function(t){return _l("function"===typeof t?vl(this.toArray(),function(e,n){return t(n,e)}):_l.filter(t,this.toArray()))},closest:function(t){var e=[];return t instanceof _l&&(t=t[0]),this.each(function(n,r){while(r){if("string"===typeof t&&_l(r).is(t)){e.push(r);break}if(r===t){e.push(r);break}r=r.parentNode}}),_l(e)},offset:function(t){var e,n,r,o,i=0,a=0;return t?this.css(t):(e=this[0],e&&(n=e.ownerDocument,r=n.documentElement,e.getBoundingClientRect&&(o=e.getBoundingClientRect(),i=o.left+(r.scrollLeft||n.body.scrollLeft)-r.clientLeft,a=o.top+(r.scrollTop||n.body.scrollTop)-r.clientTop)),{left:i,top:a})},push:qs,sort:Array.prototype.sort,splice:Array.prototype.splice},dn.extend(dl,{extend:dn.extend,makeArray:function(t){return el(t)||t.nodeType?[t]:dn.toArray(t)},inArray:hl,isArray:dn.isArray,each:ml,trim:gl,grep:vl,find:Is,expr:Is.selectors,unique:Is.uniqueSort,text:Is.getText,contains:Is.contains,filter:function(t,e,n){var r=e.length;n&&(t=":not("+t+")");while(r--)1!==e[r].nodeType&&e.splice(r,1);return e=1===e.length?_l.find.matchesSelector(e[0],t)?[e[0]]:[]:_l.find.matches(t,e),e}});var bl=function(t,e,n){var r=[],o=t[e];"string"!==typeof n&&n instanceof _l&&(n=n[0]);while(o&&9!==o.nodeType){if(void 0!==n){if(o===n)break;if("string"===typeof n&&_l(o).is(n))break}1===o.nodeType&&r.push(o),o=o[e]}return r},xl=function(t,e,n,r){var o=[];for(r instanceof _l&&(r=r[0]);t;t=t[e])if(!n||t.nodeType===n){if(void 0!==r){if(t===r)break;if("string"===typeof r&&_l(t).is(r))break}o.push(t)}return o},wl=function(t,e,n){for(t=t[e];t;t=t[e])if(t.nodeType===n)return t;return null};ml({parent:function(t){var e=t.parentNode;return e&&11!==e.nodeType?e:null},parents:function(t){return bl(t,"parentNode")},next:function(t){return wl(t,"nextSibling",1)},prev:function(t){return wl(t,"previousSibling",1)},children:function(t){return xl(t.firstChild,"nextSibling",1)},contents:function(t){return dn.toArray(("iframe"===t.nodeName?t.contentDocument||t.contentWindow.document:t).childNodes)}},function(t,e){dl.fn[t]=function(n){var r=this,o=[];r.each(function(){var t=e.call(o,this,n,o);t&&(_l.isArray(t)?o.push.apply(o,t):o.push(t))}),this.length>1&&(Js[t]||(o=_l.unique(o)),0===t.indexOf("parents")&&(o=o.reverse()));var i=_l(o);return n?i.filter(n):i}}),ml({parentsUntil:function(t,e){return bl(t,"parentNode",e)},nextUntil:function(t,e){return xl(t,"nextSibling",1,e).slice(1)},prevUntil:function(t,e){return xl(t,"previousSibling",1,e).slice(1)}},function(t,e){dl.fn[t]=function(n,r){var o=this,i=[];o.each(function(){var t=e.call(i,this,n,i);t&&(_l.isArray(t)?i.push.apply(i,t):i.push(t))}),this.length>1&&(i=_l.unique(i),0!==t.indexOf("parents")&&"prevUntil"!==t||(i=i.reverse()));var a=_l(i);return r?a.filter(r):a}}),dl.fn.is=function(t){return!!t&&this.filter(t).length>0},dl.fn.init.prototype=dl.fn,dl.overrideDefaults=function(t){var e,n=function(r,o){return e=e||t(),0===arguments.length&&(r=e.element),o||(o=e.context),new n.fn.init(r,o)};return _l.extend(n,this),n},dl.attrHooks=cl,dl.cssHooks=fl;var _l=dl,Sl=dn.each,Cl=dn.grep,Ml=Je.ie,Tl=/^([a-z0-9],?)+$/i,kl=function(t,e,n){var r=e.keep_values,o={set:function(t,r,o){e.url_converter&&(r=e.url_converter.call(e.url_converter_scope||n(),r,o,t[0])),t.attr("data-mce-"+o,r).attr(o,r)},get:function(t,e){return t.attr("data-mce-"+e)||t.attr(e)}},i={style:{set:function(e,n){null===n||"object"!==typeof n?(r&&e.attr("data-mce-style",n),null!==n&&"string"===typeof n?(e.removeAttr("style"),e.css(t.parse(n))):e.attr("style",n)):e.css(n)},get:function(e){var n=e.attr("data-mce-style")||e.attr("style");return n=t.serialize(t.parse(n),e[0].nodeName),n}}};return r&&(i.href=i.src=o),i},Dl=function(t,e){var n=e.attr("style"),r=t.serialize(t.parse(n),e[0].nodeName);r||(r=null),e.attr("data-mce-style",r)},Al=function(t,e){var n,r,o=0;if(t)for(n=t.nodeType,t=t.previousSibling;t;t=t.previousSibling)r=t.nodeType,(!e||3!==r||r!==n&&t.nodeValue.length)&&(o++,n=r);return o},Il=function(t,e){void 0===e&&(e={});var n={},r=window,o={},i=0,a=!0,u=!0,s=Li.forElement(yn.fromDom(t),{contentCssCors:e.contentCssCors,referrerPolicy:e.referrerPolicy}),l=[],c=e.schema?e.schema:Lu({}),f=Nu({url_converter:e.url_converter,url_converter_scope:e.url_converter_scope},e.schema),d=e.ownEvents?new Xu:Xu.Event,h=c.getBlockElements(),p=_l.overrideDefaults(function(){return{context:t,element:It.getRoot()}}),g=function(t){if("string"===typeof t)return!!h[t];if(t){var e=t.nodeType;if(e)return!(1!==e||!h[t.nodeName])}return!1},m=function(e){return e&&t&&v(e)?t.getElementById(e):e},y=function(t){return p("string"===typeof t?m(t):t)},b=function(t,e,n){var r,o,i=y(t);return i.length&&(r=Ot[e],o=r&&r.get?r.get(i,e):i.attr(e)),"undefined"===typeof o&&(o=n||""),o},x=function(t){var e=m(t);return e?e.attributes:[]},w=function(t,n,r){""===r&&(r=null);var o=y(t),i=o.attr(n);if(o.length){var a=Ot[n];a&&a.set?a.set(o,r,n):o.attr(n,r),i!==r&&e.onSetAttrib&&e.onSetAttrib({attrElm:o,attrName:n,attrValue:r})}},_=function(e,n){if(!Ml||1!==e.nodeType||n)return e.cloneNode(n);var r=t.createElement(e.nodeName);return Sl(x(e),function(t){w(r,t.nodeName,b(e,t.nodeName))}),r},C=function(){return e.root_element||t.body},M=function(t){var e=zr(t);return{x:e.x,y:e.y,w:e.width,h:e.height}},T=function(e,n){return ko(t.body,m(e),n)},D=function(t,n,r){var o=v(n)?y(t).css(n,r):y(t).css(n);e.update_styles&&Dl(f,o)},A=function(t,n){var r=y(t).css(n);e.update_styles&&Dl(f,r)},I=function(t,e,n){var r=y(t);return n?r.css(e):(e=e.replace(/-(\D)/g,function(t,e){return e.toUpperCase()}),"float"===e&&(e=Je.browser.isIE()?"styleFloat":"cssFloat"),r[0]&&r[0].style?r[0].style[e]:void 0)},O=function(t){var e,n;return t=m(t),e=I(t,"width"),n=I(t,"height"),-1===e.indexOf("px")&&(e=0),-1===n.indexOf("px")&&(n=0),{w:parseInt(e,10)||t.offsetWidth||t.clientWidth,h:parseInt(n,10)||t.offsetHeight||t.clientHeight}},L=function(t){t=m(t);var e=T(t),n=O(t);return{x:e.x,y:e.y,w:n.w,h:n.h}},E=function(t,e){var n;if(!t)return!1;if(!Array.isArray(t)){if("*"===e)return 1===t.nodeType;if(Tl.test(e)){var r=e.toLowerCase().split(/,/),o=t.nodeName.toLowerCase();for(n=r.length-1;n>=0;n--)if(r[n]===o)return!0;return!1}if(t.nodeType&&1!==t.nodeType)return!1}var i=Array.isArray(t)?t:[t];return Is(e,i[0].ownerDocument||i[0],null,i).length>0},N=function(t,e,n,r){var o,i=[],a=m(t);r=void 0===r,n=n||("BODY"!==C().nodeName?C().parentNode:null),dn.is(e,"string")&&(o=e,e="*"===e?function(t){return 1===t.nodeType}:function(t){return E(t,o)});while(a){if(a===n||S(a.nodeType)||Jr(a)||Qr(a))break;if(!e||"function"===typeof e&&e(a)){if(!r)return[a];i.push(a)}a=a.parentNode}return r?i:null},R=function(t,e,n){var r=N(t,e,n,!1);return r&&r.length>0?r[0]:null},P=function(t,e,n){var r=e;if(t)for("string"===typeof e&&(r=function(t){return E(t,e)}),t=t[n];t;t=t[n])if("function"===typeof r&&r(t))return t;return null},z=function(t,e){return P(t,e,"nextSibling")},B=function(t,e){return P(t,e,"previousSibling")},V=function(n,r){return Is(n,m(r)||e.root_element||t,[])},H=function(t,e,n){var r,o="string"===typeof t?m(t):t;if(!o)return!1;if(dn.isArray(o)&&(o.length||0===o.length))return r=[],Sl(o,function(t,o){t&&r.push(e.call(n,"string"===typeof t?m(t):t,o))}),r;var i=n||this;return e.call(i,o)},F=function(t,e){y(t).each(function(t,n){Sl(e,function(t,e){w(n,e,t)})})},W=function(t,e){var n=y(t);Ml?n.each(function(t,n){if(!1!==n.canHaveHTML){while(n.firstChild)n.removeChild(n.firstChild);try{n.innerHTML="<br>"+e,n.removeChild(n.firstChild)}catch(r){_l("<div></div>").html("<br>"+e).contents().slice(1).appendTo(n)}return e}}):n.html(e)},U=function(e,n,r,o,i){return H(e,function(e){var a="string"===typeof n?t.createElement(n):n;return F(a,r),o&&("string"!==typeof o&&o.nodeType?a.appendChild(o):"string"===typeof o&&W(a,o)),i?a:e.appendChild(a)})},G=function(e,n,r){return U(t.createElement(e),e,n,r,!0)},j=wu.decode,X=wu.encodeAllRaw,Y=function(t,e,n){var r,o="";for(r in o+="<"+t,e)e.hasOwnProperty(r)&&null!==e[r]&&"undefined"!==typeof e[r]&&(o+=" "+r+'="'+X(e[r])+'"');return"undefined"!==typeof n?o+">"+n+"</"+t+">":o+" />"},q=function(e){var n,r=t.createElement("div"),o=t.createDocumentFragment();o.appendChild(r),e&&(r.innerHTML=e);while(n=r.firstChild)o.appendChild(n);return o.removeChild(r),o},Z=function(t,e){var n=y(t);return e?n.each(function(){var t;while(t=this.firstChild)3===t.nodeType&&0===t.data.length?this.removeChild(t):this.parentNode.insertBefore(t,this)}).remove():n.remove(),n.length>1?n.toArray():n[0]},$=function(t){return H(t,function(t){var e,n=t.attributes;for(e=n.length-1;e>=0;e--)t.removeAttributeNode(n.item(e))})},K=function(t){return f.parse(t)},Q=function(t,e){return f.serialize(t,e)},tt=function(e){var r,o;if(It!==Il.DOM&&t===document){if(n[e])return;n[e]=!0}o=t.getElementById("mceDefaultStyles"),o||(o=t.createElement("style"),o.id="mceDefaultStyles",o.type="text/css",r=t.getElementsByTagName("head")[0],r.firstChild?r.insertBefore(o,r.firstChild):r.appendChild(o)),o.styleSheet?o.styleSheet.cssText+=e:o.appendChild(t.createTextNode(e))},et=function(t){t||(t=""),J(t.split(","),function(t){o[t]=!0,s.load(t,k)})},nt=function(t,e,n){y(t).toggleClass(e,n).each(function(){""===this.className&&_l(this).attr("class",null)})},rt=function(t,e){y(t).addClass(e)},ot=function(t,e){nt(t,e,!1)},it=function(t,e){return y(t).hasClass(e)},at=function(t){y(t).show()},ut=function(t){y(t).hide()},st=function(t){return"none"===y(t).css("display")},lt=function(t){return(t||"mce_")+i++},ct=function(t){var e="string"===typeof t?m(t):t;return Hr(e)?e.outerHTML:_l("<div></div>").append(_l(e).clone()).html()},ft=function(t,e){y(t).each(function(){try{if("outerHTML"in this)return void(this.outerHTML=e)}catch(t){}Z(_l(this).html(e),!0)})},dt=function(t,e){var n=m(e);return H(t,function(t){var e=n.parentNode,r=n.nextSibling;return r?e.insertBefore(t,r):e.appendChild(t),t})},ht=function(t,e,n){return H(e,function(e){return dn.is(e,"array")&&(t=t.cloneNode(!0)),n&&Sl(Cl(e.childNodes),function(e){t.appendChild(e)}),e.parentNode.replaceChild(t,e)})},pt=function(t,e){var n;return t.nodeName!==e.toUpperCase()&&(n=G(e),Sl(x(t),function(e){w(n,e.nodeName,b(t,e.nodeName))}),ht(n,t,!0)),n||t},gt=function(t,e){var n,r=t;while(r){n=e;while(n&&r!==n)n=n.parentNode;if(r===n)break;r=r.parentNode}return!r&&t.ownerDocument?t.ownerDocument.documentElement:r},mt=function(t){return f.toHex(dn.trim(t))},vt=function(t){if(Hr(t)){var e="a"===t.nodeName.toLowerCase()&&!b(t,"href")&&b(t,"id");if(b(t,"name")||b(t,"data-mce-bookmark")||e)return!0}return!1},yt=function(t,e){var n,r,o=0;if(vt(t))return!1;if(t=t.firstChild,t){var i=new Ei(t,t.parentNode),a=c?c.getWhiteSpaceElements():{};e=e||(c?c.getNonEmptyElements():null);do{if(n=t.nodeType,Hr(t)){var u=t.getAttribute("data-mce-bogus");if(u){t=i.next("all"===u);continue}if(r=t.nodeName.toLowerCase(),e&&e[r]){if("br"===r){o++,t=i.next();continue}return!1}if(vt(t))return!1}if(8===n)return!1;if(3===n&&!Ha(t.nodeValue))return!1;if(3===n&&t.parentNode&&a[t.parentNode.nodeName]&&Ha(t.nodeValue))return!1;t=i.next()}while(t)}return o<=1},bt=function(){return t.createRange()},xt=function(t,e,n){var r,o,i,a=bt();if(t&&e)return a.setStart(t.parentNode,Al(t)),a.setEnd(e.parentNode,Al(e)),r=a.extractContents(),a=bt(),a.setStart(e.parentNode,Al(e)+1),a.setEnd(t.parentNode,Al(t)+1),o=a.extractContents(),i=t.parentNode,i.insertBefore(ru(It,r),t),n?i.insertBefore(n,t):i.insertBefore(e,t),i.insertBefore(ru(It,o),t),Z(t),n||e},_t=function(n,o,i,a){if(dn.isArray(n)){var u=n.length,s=[];while(u--)s[u]=_t(n[u],o,i,a);return s}!e.collect||n!==t&&n!==r||l.push([n,o,i,a]);var c=d.bind(n,o,i,a||It);return c},St=function(e,n,o){if(dn.isArray(e)){var i=e.length,a=[];while(i--)a[i]=St(e[i],n,o);return a}if(l.length>0&&(e===t||e===r)){i=l.length;while(i--){var u=l[i];e!==u[0]||n&&n!==u[1]||o&&o!==u[2]||d.unbind(u[0],u[1],u[2])}}return d.unbind(e,n,o)},Ct=function(t,e,n){return d.fire(t,e,n)},Mt=function(t){if(t&&Hr(t)){var e=t.getAttribute("data-mce-contenteditable");return e&&"inherit"!==e?e:"inherit"!==t.contentEditable?t.contentEditable:null}return null},Tt=function(t){for(var e=C(),n=null;t&&t!==e;t=t.parentNode)if(n=Mt(t),null!==n)break;return n},kt=function(){if(l.length>0){var t=l.length;while(t--){var e=l[t];d.unbind(e[0],e[1],e[2])}}wt(o,function(t,e){s.unload(e),delete o[e]}),Is.setDocument&&Is.setDocument()},Dt=function(t,e){while(t){if(e===t)return!0;t=t.parentNode}return!1},At=function(t){return"startContainer: "+t.startContainer.nodeName+", startOffset: "+t.startOffset+", endContainer: "+t.endContainer.nodeName+", endOffset: "+t.endOffset},It={doc:t,settings:e,win:r,files:o,stdMode:a,boxModel:u,styleSheetLoader:s,boundEvents:l,styles:f,schema:c,events:d,isBlock:g,$:p,$$:y,root:null,clone:_,getRoot:C,getViewPort:M,getRect:L,getSize:O,getParent:R,getParents:N,get:m,getNext:z,getPrev:B,select:V,is:E,add:U,create:G,createHTML:Y,createFragment:q,remove:Z,setStyle:D,getStyle:I,setStyles:A,removeAllAttribs:$,setAttrib:w,setAttribs:F,getAttrib:b,getPos:T,parseStyle:K,serializeStyle:Q,addStyle:tt,loadCSS:et,addClass:rt,removeClass:ot,hasClass:it,toggleClass:nt,show:at,hide:ut,isHidden:st,uniqueId:lt,setHTML:W,getOuterHTML:ct,setOuterHTML:ft,decode:j,encode:X,insertAfter:dt,replace:ht,rename:pt,findCommonAncestor:gt,toHex:mt,run:H,getAttribs:x,isEmpty:yt,createRng:bt,nodeIndex:Al,split:xt,bind:_t,unbind:St,fire:Ct,getContentEditable:Mt,getContentEditableParent:Tt,destroy:kt,isChildOf:Dt,dumpRng:At},Ot=kl(f,e,function(){return It});return It};Il.DOM=Il(document),Il.nodeIndex=Al;var Ol=Il.DOM,Ll=dn.each,El=dn.grep,Nl=0,Rl=1,Pl=2,zl=3,Bl=function(){function t(t){void 0===t&&(t={}),this.states={},this.queue=[],this.scriptLoadedCallbacks={},this.queueLoadedCallbacks=[],this.loading=0,this.settings=t}return t.prototype._setReferrerPolicy=function(t){this.settings.referrerPolicy=t},t.prototype.loadScript=function(t,e,n){var r,o=Ol,i=function(){o.remove(s),r&&(r.onerror=r.onload=r=null)},a=function(){i(),e()},u=function(){i(),M(n)?n():"undefined"!==typeof console&&console.log&&console.log("Failed to load script: "+t)},s=o.uniqueId();r=document.createElement("script"),r.id=s,r.type="text/javascript",r.src=dn._addCacheSuffix(t),this.settings.referrerPolicy&&o.setAttrib(r,"referrerpolicy",this.settings.referrerPolicy),r.onload=a,r.onerror=u,(document.getElementsByTagName("head")[0]||document.body).appendChild(r)},t.prototype.isDone=function(t){return this.states[t]===Pl},t.prototype.markDone=function(t){this.states[t]=Pl},t.prototype.add=function(t,e,n,r){var o=this.states[t];this.queue.push(t),void 0===o&&(this.states[t]=Nl),e&&(this.scriptLoadedCallbacks[t]||(this.scriptLoadedCallbacks[t]=[]),this.scriptLoadedCallbacks[t].push({success:e,failure:r,scope:n||this}))},t.prototype.load=function(t,e,n,r){return this.add(t,e,n,r)},t.prototype.remove=function(t){delete this.states[t],delete this.scriptLoadedCallbacks[t]},t.prototype.loadQueue=function(t,e,n){this.loadScripts(this.queue,t,e,n)},t.prototype.loadScripts=function(t,e,n,r){var o=this,i=[],a=function(t,e){Ll(o.scriptLoadedCallbacks[e],function(e){M(e[t])&&e[t].call(e.scope)}),o.scriptLoadedCallbacks[e]=void 0};o.queueLoadedCallbacks.push({success:e,failure:r,scope:n||this});var u=function(){var e=El(t);if(t.length=0,Ll(e,function(t){o.states[t]!==Pl?o.states[t]!==zl?o.states[t]!==Rl&&(o.states[t]=Rl,o.loading++,o.loadScript(t,function(){o.states[t]=Pl,o.loading--,a("success",t),u()},function(){o.states[t]=zl,o.loading--,i.push(t),a("failure",t),u()})):a("failure",t):a("success",t)}),!o.loading){var n=o.queueLoadedCallbacks.slice(0);o.queueLoadedCallbacks.length=0,Ll(n,function(t){0===i.length?M(t.success)&&t.success.call(t.scope):M(t.failure)&&t.failure.call(t.scope,i)})}};u()},t.ScriptLoader=new t,t}(),Vl=function(t){var e=t,n=function(){return e},r=function(t){e=t};return{get:n,set:r}},Hl=function(t){return y(t)&&Ot(t,"raw")},Fl=function(t){return b(t)&&t.length>1},Wl={},Ul=Vl("en"),Gl=function(){return It(Wl,Ul.get())},jl=function(){return _t(Wl,function(t){return Ut({},t)})},Xl=function(t){t&&Ul.set(t)},Yl=function(){return Ul.get()},ql=function(t,e){var n=Wl[t];n||(Wl[t]=n={}),wt(e,function(t,e){n[e.toLowerCase()]=t})},Zl=function(t){var e=Gl().getOr({}),n=function(t){return M(t)?Object.prototype.toString.call(t):r(t)?"":""+t},r=function(t){return""===t||null===t||void 0===t},o=function(t){var r=n(t);return It(e,r.toLowerCase()).map(n).getOr(r)},i=function(t){return t.replace(/{context:\w+}$/,"")};if(r(t))return"";if(Hl(t))return n(t.raw);if(Fl(t)){var a=t.slice(1),u=o(t[0]).replace(/\{([0-9]+)\}/g,function(t,e){return Ot(a,e)?n(a[e]):t});return i(u)}return i(o(t))},$l=function(){return Gl().bind(function(t){return It(t,"_dir")}).exists(function(t){return"rtl"===t})},Kl=function(t){return Ot(Wl,t)},Jl={getData:jl,setCode:Xl,getCode:Yl,add:ql,translate:Zl,isRtl:$l,hasCode:Kl},Ql=function(){var t=[],e={},n={},r=[],o=function(t,e){var n=et(r,function(n){return n.name===t&&n.state===e});J(n,function(t){return t.callback()})},i=function(t){if(n[t])return n[t].instance},a=function(t){var e;return n[t]&&(e=n[t].dependencies),e||[]},u=function(t,n){!1!==Ql.languageLoad&&p(t,function(){var r=Jl.getCode(),o=","+(n||"")+",";!r||n&&-1===o.indexOf(","+r+",")||Bl.ScriptLoader.add(e[t]+"/langs/"+r+".js")},"loaded")},s=function(e,r,i){var a=r;return t.push(a),n[e]={instance:a,dependencies:i},o(e,"added"),a},l=function(t){delete e[t],delete n[t]},c=function(t,e){return"object"===typeof e?e:"string"===typeof t?{prefix:"",resource:e,suffix:""}:{prefix:t.prefix,resource:e,suffix:t.suffix}},f=function(t,n){var r=e[t];J(n,function(t){Bl.ScriptLoader.add(r+"/"+t)})},d=function(t,e,n,r){var o=a(t);J(o,function(t){var n=c(e,t);h(n.resource,n,void 0,void 0)}),n&&(r?n.call(r):n.call(Bl))},h=function(t,r,i,a,u){if(!e[t]){var s="string"===typeof r?r:r.prefix+r.resource+r.suffix;0!==s.indexOf("/")&&-1===s.indexOf("://")&&(s=Ql.baseURL+"/"+s),e[t]=s.substring(0,s.lastIndexOf("/"));var l=function(){o(t,"loaded"),d(t,r,i,a)};n[t]?l():Bl.ScriptLoader.add(s,l,a,u)}},p=function(t,o,i){void 0===i&&(i="added"),Ot(n,t)&&"added"===i?o():Ot(e,t)&&"loaded"===i?o():r.push({name:t,state:i,callback:o})};return{items:t,urls:e,lookup:n,_listeners:r,get:i,dependencies:a,requireLangPack:u,add:s,remove:l,createUrl:c,addComponents:f,load:h,waitFor:p}};Ql.languageLoad=!0,Ql.baseURL="",Ql.PluginManager=Ql(),Ql.ThemeManager=Ql();var tc=function(t,e){var n=null,r=function(){null!==n&&(clearTimeout(n),n=null)},o=function(){for(var r=[],o=0;o<arguments.length;o++)r[o]=arguments[o];null===n&&(n=setTimeout(function(){t.apply(null,r),n=null},e))};return{cancel:r,throttle:o}},ec=function(t,e){var n=null,r=function(){null!==n&&(clearTimeout(n),n=null)},o=function(){for(var r=[],o=0;o<arguments.length;o++)r[o]=arguments[o];null!==n&&clearTimeout(n),n=setTimeout(function(){t.apply(null,r),n=null},e)};return{cancel:r,throttle:o}},nc=function(t,e){var n=co(t,e);return void 0===n||""===n?[]:n.split(" ")},rc=function(t,e,n){var r=nc(t,e),o=r.concat([n]);return so(t,e,o.join(" ")),!0},oc=function(t,e,n){var r=et(nc(t,e),function(t){return t!==n});return r.length>0?so(t,e,r.join(" ")):po(t,e),!1},ic=function(t){return void 0!==t.dom.classList},ac=function(t){return nc(t,"class")},uc=function(t,e){return rc(t,"class",e)},sc=function(t,e){return oc(t,"class",e)},lc=function(t,e){ic(t)?t.dom.classList.add(e):uc(t,e)},cc=function(t){var e=ic(t)?t.dom.classList:ac(t);0===e.length&&po(t,"class")},fc=function(t,e){if(ic(t)){var n=t.dom.classList;n.remove(e)}else sc(t,e);cc(t)},dc=function(t,e){return ic(t)&&t.dom.classList.contains(e)},hc=function(t,e){var n=[];return J(tr(t),function(t){e(t)&&(n=n.concat([t])),n=n.concat(hc(t,e))}),n},pc=function(t,e){return An(e,t)},gc=I("mce-annotation"),mc=I("data-mce-annotation"),vc=I("data-mce-annotation-uid"),yc=function(t,e){var n=t.selection.getRng(),r=yn.fromDom(n.startContainer),o=yn.fromDom(t.getBody()),i=e.fold(function(){return"."+gc()},function(t){return"["+mc()+'="'+t+'"]'}),a=er(r,n.startOffset).getOr(r),u=xi(a,i,function(t){return On(t,o)}),s=function(t,e){return ho(t,e)?U.some(co(t,e)):U.none()};return u.bind(function(e){return s(e,""+vc()).bind(function(n){return s(e,""+mc()).map(function(e){var r=xc(t,n);return{uid:n,name:e,elements:r}})})})},bc=function(t){return Vn(t)&&dc(t,gc())},xc=function(t,e){var n=yn.fromDom(t.getBody());return pc(n,"["+vc()+'="'+e+'"]')},wc=function(t,e){var n=yn.fromDom(t.getBody()),r=pc(n,"["+mc()+'="'+e+'"]'),o={};return J(r,function(t){var e=co(t,vc()),n=o.hasOwnProperty(e)?o[e]:[];o[e]=n.concat([t])}),o},_c=function(t,e){var n=Vl({}),r=function(){return{listeners:[],previous:Vl(U.none())}},o=function(t,e){i(t,function(t){return e(t),t})},i=function(t,e){var o=n.get(),i=o.hasOwnProperty(t)?o[t]:r(),a=e(i);o[t]=a,n.set(o)},a=function(t,e,n){o(t,function(r){J(r.listeners,function(r){return r(!0,t,{uid:e,nodes:K(n,function(t){return t.dom})})})})},u=function(t){o(t,function(e){J(e.listeners,function(e){return e(!1,t)})})},s=ec(function(){var e=n.get(),r=ht(bt(e));J(r,function(e){i(e,function(n){var r=n.previous.get();return yc(t,U.some(e)).fold(function(){r.isSome()&&(u(e),n.previous.set(U.none()))},function(t){var e=t.uid,o=t.name,i=t.elements;r.is(e)||(a(o,e,i),n.previous.set(U.some(e)))}),{previous:n.previous,listeners:n.listeners}})})},30);t.on("remove",function(){s.cancel()}),t.on("NodeChange",function(){s.throttle()});var l=function(t,e){i(t,function(t){return{previous:t.previous,listeners:t.listeners.concat([e])}})};return{addListener:l}},Sc=function(t,e){var n=function(t){return U.from(t.attr(mc())).bind(e.lookup)};t.on("init",function(){t.serializer.addNodeFilter("span",function(t){J(t,function(t){n(t).each(function(e){!1===e.persistent&&t.unwrap()})})})})},Cc=function(){var t={},e=function(e,n){t[e]={name:e,settings:n}},n=function(e){return t.hasOwnProperty(e)?U.from(t[e]).map(function(t){return t.settings}):U.none()};return{register:e,lookup:n}},Mc=0,Tc=function(t){var e=new Date,n=e.getTime(),r=Math.floor(1e9*Math.random());return Mc++,t+"_"+r+Mc+String(n)},kc=function(t,e){J(e,function(e){lc(t,e)})},Dc=function(t,e){var n=e||document,r=n.createElement("div");return r.innerHTML=t,tr(yn.fromDom(r))},Ac=function(t){return t.dom.innerHTML},Ic=function(t,e){var n=Un(t),r=n.dom,o=yn.fromDom(r.createDocumentFragment()),i=Dc(e,r);wr(o,i),_r(t),yr(t,o)},Oc=function(t,e){return yn.fromDom(t.dom.cloneNode(e))},Lc=function(t){return Oc(t,!1)},Ec=function(t){return Oc(t,!0)},Nc=function(t,e,n){void 0===n&&(n=z);var r=new Ei(t,e),o=function(t){var e;do{e=r[t]()}while(e&&!$r(e)&&!n(e));return U.from(e).filter($r)};return{current:function(){return U.from(r.current()).filter($r)},next:function(){return o("next")},prev:function(){return o("prev")},prev2:function(){return o("prev2")}}},Rc=function(t,e){var n=e||function(e){return t.isBlock(e)||to(e)||ro(e)},r=function(t,e,n,o){if($r(t)){var i=o(t,e,t.data);if(-1!==i)return U.some({container:t,offset:i})}return n().bind(function(t){return r(t.container,t.offset,n,o)})},o=function(t,e,o,i){var a=Nc(t,i,n);return r(t,e,function(){return a.prev().map(function(t){return{container:t,offset:t.length}})},o).getOrNull()},i=function(t,e,o,i){var a=Nc(t,i,n);return r(t,e,function(){return a.next().map(function(t){return{container:t,offset:0}})},o).getOrNull()};return{backwards:o,forwards:i}},Pc=function(t){for(var e=[],n=function(t){e.push(t)},r=0;r<t.length;r++)t[r].each(n);return e},zc=function(t,e,n){return t.isSome()&&e.isSome()?U.some(n(t.getOrDie(),e.getOrDie())):U.none()},Bc=function(t,e,n,r){return t.isSome()&&e.isSome()&&n.isSome()?U.some(r(t.getOrDie(),e.getOrDie(),n.getOrDie())):U.none()},Vc=function(t,e){return t?U.some(e):U.none()},Hc=Math.round,Fc=function(t){return t?{left:Hc(t.left),top:Hc(t.top),bottom:Hc(t.bottom),right:Hc(t.right),width:Hc(t.width),height:Hc(t.height)}:{left:0,top:0,bottom:0,right:0,width:0,height:0}},Wc=function(t,e){return t=Fc(t),e?t.right=t.left:(t.left=t.left+t.width,t.right=t.left),t.width=0,t},Uc=function(t,e){return t.left===e.left&&t.top===e.top&&t.bottom===e.bottom&&t.right===e.right},Gc=function(t,e,n){return t>=0&&t<=Math.min(e.height,n.height)/2},jc=function(t,e){var n=Math.min(e.height/2,t.height/2);return t.bottom-n<e.top||!(t.top>e.bottom)&&Gc(e.top-t.bottom,t,e)},Xc=function(t,e){return t.top>e.bottom||!(t.bottom<e.top)&&Gc(e.bottom-t.top,t,e)},Yc=function(t,e,n){return e>=t.left&&e<=t.right&&n>=t.top&&n<=t.bottom},qc=function(t){var e=t.startContainer,n=t.startOffset;return e.hasChildNodes()&&t.endOffset===n+1?e.childNodes[n]:null},Zc=function(t,e){return 1===t.nodeType&&t.hasChildNodes()&&(e>=t.childNodes.length&&(e=t.childNodes.length-1),t=t.childNodes[e]),t},$c=new RegExp("[̀-ͯ҃-҇҈-҉֑-ֽֿׁ-ׂׄ-ׇׅؐ-ًؚ-ٰٟۖ-ۜ۟-ۤۧ-۪ۨ-ܑۭܰ-݊ަ-ް߫-߳ࠖ-࠙ࠛ-ࠣࠥ-ࠧࠩ-࡙࠭-࡛ࣣ-ंऺ़ु-ै्॑-ॗॢ-ॣঁ়াু-ৄ্ৗৢ-ৣਁ-ਂ਼ੁ-ੂੇ-ੈੋ-੍ੑੰ-ੱੵઁ-ં઼ુ-ૅે-ૈ્ૢ-ૣଁ଼ାିୁ-ୄ୍ୖୗୢ-ୣஂாீ்ௗఀా-ీె-ైొ-్ౕ-ౖౢ-ౣಁ಼ಿೂೆೌ-್ೕ-ೖೢ-ೣഁാു-ൄ്ൗൢ-ൣ්ාි-ුූෟัิ-ฺ็-๎ັິ-ູົ-ຼ່-ໍ༘-ཱ༹༙༵༷-ཾྀ-྄྆-྇ྍ-ྗྙ-ྼ࿆ိ-ူဲ-့္-်ွ-ှၘ-ၙၞ-ၠၱ-ၴႂႅ-ႆႍႝ፝-፟ᜒ-᜔ᜲ-᜴ᝒ-ᝓᝲ-ᝳ឴-឵ិ-ួំ៉-៓៝᠋-᠍ᢩᤠ-ᤢᤧ-ᤨᤲ᤹-᤻ᨗ-ᨘᨛᩖᩘ-ᩞ᩠ᩢᩥ-ᩬᩳ-᩿᩼᪰-᪽᪾ᬀ-ᬃ᬴ᬶ-ᬺᬼᭂ᭫-᭳ᮀ-ᮁᮢ-ᮥᮨ-ᮩ᮫-ᮭ᯦ᯨ-ᯩᯭᯯ-ᯱᰬ-ᰳᰶ-᰷᳐-᳔᳒-᳢᳠-᳨᳭᳴᳸-᳹᷀-᷵᷼-᷿‌-‍⃐-⃜⃝-⃠⃡⃢-⃤⃥-⃰⳯-⵿⳱ⷠ-〪ⷿ-〭〮-゙〯-゚꙯꙰-꙲ꙴ-꙽ꚞ-ꚟ꛰-꛱ꠂ꠆ꠋꠥ-ꠦ꣄꣠-꣱ꤦ-꤭ꥇ-ꥑꦀ-ꦂ꦳ꦶ-ꦹꦼꧥꨩ-ꨮꨱ-ꨲꨵ-ꨶꩃꩌꩼꪰꪲ-ꪴꪷ-ꪸꪾ-꪿꫁ꫬ-ꫭ꫶ꯥꯨ꯭ﬞ︀-️︠-︯ﾞ-ﾟ]"),Kc=function(t){return"string"===typeof t&&t.charCodeAt(0)>=768&&$c.test(t)},Jc=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return function(e){for(var n=0;n<t.length;n++)if(t[n](e))return!0;return!1}},Qc=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return function(e){for(var n=0;n<t.length;n++)if(!t[n](e))return!1;return!0}},tf=Hr,ef=La,nf=Wr("display","block table"),rf=Wr("float","left right"),of=Qc(tf,ef,E(rf)),af=E(Wr("white-space","pre pre-line pre-wrap")),uf=$r,sf=to,lf=Il.nodeIndex,cf=Zc,ff=function(t){return"createRange"in t?t.createRange():Il.DOM.createRng()},df=function(t){return t&&/[\r\n\t ]/.test(t)},hf=function(t){return!!t.setStart&&!!t.setEnd},pf=function(t){var e,n=t.startContainer,r=t.startOffset;return!!(df(t.toString())&&af(n.parentNode)&&$r(n)&&(e=n.data,df(e[r-1])||df(e[r+1])))},gf=function(t){var e=t.ownerDocument,n=ff(e),r=e.createTextNode(na),o=t.parentNode;o.insertBefore(r,t),n.setStart(r,0),n.setEnd(r,1);var i=Fc(n.getBoundingClientRect());return o.removeChild(r),i},mf=function(t){var e=t.startContainer,n=t.endContainer,r=t.startOffset,o=t.endOffset;if(e===n&&$r(n)&&0===r&&1===o){var i=t.cloneRange();return i.setEndAfter(n),yf(i)}return null},vf=function(t){return 0===t.left&&0===t.right&&0===t.top&&0===t.bottom},yf=function(t){var e,n=t.getClientRects();return e=n.length>0?Fc(n[0]):Fc(t.getBoundingClientRect()),!hf(t)&&sf(t)&&vf(e)?gf(t):vf(e)&&hf(t)?mf(t):e},bf=function(t,e){var n=Wc(t,e);return n.width=1,n.right=n.left+1,n},xf=function(t){var e,n,r=[],o=function(t){0!==t.height&&(r.length>0&&Uc(t,r[r.length-1])||r.push(t))},i=function(t,e){var n=ff(t.ownerDocument);if(e<t.data.length){if(Kc(t.data[e]))return r;if(Kc(t.data[e-1])&&(n.setStart(t,e),n.setEnd(t,e+1),!pf(n)))return o(bf(yf(n),!1)),r}e>0&&(n.setStart(t,e-1),n.setEnd(t,e),pf(n)||o(bf(yf(n),!1))),e<t.data.length&&(n.setStart(t,e),n.setEnd(t,e+1),pf(n)||o(bf(yf(n),!0)))};if(uf(t.container()))return i(t.container(),t.offset()),r;if(tf(t.container()))if(t.isAtEnd())n=cf(t.container(),t.offset()),uf(n)&&i(n,n.data.length),of(n)&&!sf(n)&&o(bf(yf(n),!1));else{if(n=cf(t.container(),t.offset()),uf(n)&&i(n,0),of(n)&&t.isAtEnd())return o(bf(yf(n),!1)),r;e=cf(t.container(),t.offset()-1),of(e)&&!sf(e)&&(nf(e)||nf(n)||!of(n))&&o(bf(yf(e),!1)),of(n)&&o(bf(yf(n),!0))}return r},wf=function(t,e,n){var r=function(){return uf(t),0===e},o=function(){return uf(t)?e>=t.data.length:e>=t.childNodes.length},i=function(){var n=ff(t.ownerDocument);return n.setStart(t,e),n.setEnd(t,e),n},a=function(){return n||(n=xf(wf(t,e))),n},u=function(){return a().length>0},s=function(n){return n&&t===n.container()&&e===n.offset()},l=function(n){return cf(t,n?e-1:e)};return{container:I(t),offset:I(e),toRange:i,getClientRects:a,isVisible:u,isAtStart:r,isAtEnd:o,isEqual:s,getNode:l}};wf.fromRangeStart=function(t){return wf(t.startContainer,t.startOffset)},wf.fromRangeEnd=function(t){return wf(t.endContainer,t.endOffset)},wf.after=function(t){return wf(t.parentNode,lf(t)+1)},wf.before=function(t){return wf(t.parentNode,lf(t))},wf.isAbove=function(t,e){return zc(gt(e.getClientRects()),mt(t.getClientRects()),jc).getOr(!1)},wf.isBelow=function(t,e){return zc(mt(e.getClientRects()),gt(t.getClientRects()),Xc).getOr(!1)},wf.isAtStart=function(t){return!!t&&t.isAtStart()},wf.isAtEnd=function(t){return!!t&&t.isAtEnd()},wf.isTextPosition=function(t){return!!t&&$r(t.container())},wf.isElementPosition=function(t){return!1===wf.isTextPosition(t)};var _f,Sf=function(t,e){$r(e)&&0===e.data.length&&t.remove(e)},Cf=function(t,e,n){e.insertNode(n),Sf(t,n.previousSibling),Sf(t,n.nextSibling)},Mf=function(t,e,n){var r=U.from(n.firstChild),o=U.from(n.lastChild);e.insertNode(n),r.each(function(e){return Sf(t,e.previousSibling)}),o.each(function(e){return Sf(t,e.nextSibling)})},Tf=function(t,e,n){Qr(n)?Mf(t,e,n):Cf(t,e,n)},kf=$r,Df=jr,Af=Il.nodeIndex,If=function(t){var e=t.parentNode;return Df(e)?If(e):e},Of=function(t){return t?Ht(t.childNodes,function(t,e){return Df(e)&&"BR"!==e.nodeName?t=t.concat(Of(e)):t.push(e),t},[]):[]},Lf=function(t,e){while(t=t.previousSibling){if(!kf(t))break;e+=t.data.length}return e},Ef=function(t){return function(e){return t===e}},Nf=function(t){var e,n;e=Of(If(t)),n=Ft(e,Ef(t),t),e=e.slice(0,n+1);var r=Ht(e,function(t,n,r){return kf(n)&&kf(e[r-1])&&t++,t},0);return e=Bt(e,Fr([t.nodeName])),n=Ft(e,Ef(t),t),n-r},Rf=function(t){var e;return e=kf(t)?"text()":t.nodeName.toLowerCase(),e+"["+Nf(t)+"]"},Pf=function(t,e,n){var r=[];for(e=e.parentNode;e!==t;e=e.parentNode){if(n&&n(e))break;r.push(e)}return r},zf=function(t,e){var n,r,o,i,a,u=[];return n=e.container(),r=e.offset(),kf(n)?o=Lf(n,r):(i=n.childNodes,r>=i.length?(o="after",r=i.length-1):o="before",n=i[r]),u.push(Rf(n)),a=Pf(t,n),a=Bt(a,E(jr)),u=u.concat(zt(a,function(t){return Rf(t)})),u.reverse().join("/")+","+o},Bf=function(t,e,n){var r=Of(t);return r=Bt(r,function(t,e){return!kf(t)||!kf(r[e-1])}),r=Bt(r,Fr([e])),r[n]},Vf=function(t,e){var n,r=t,o=0;while(kf(r)){if(n=r.data.length,e>=o&&e<=o+n){t=r,e-=o;break}if(!kf(r.nextSibling)){t=r,e=n;break}o+=n,r=r.nextSibling}return kf(t)&&e>t.data.length&&(e=t.data.length),wf(t,e)},Hf=function(t,e){var n;if(!e)return null;var r=e.split(","),o=r[0].split("/");n=r.length>1?r[1]:"before";var i=Ht(o,function(t,e){var n=/([\w\-\(\)]+)\[([0-9]+)\]/.exec(e);return n?("text()"===n[1]&&(n[1]="#text"),Bf(t,n[1],parseInt(n[2],10))):null},t);return i?kf(i)?Vf(i,parseInt(n,10)):(n="after"===n?Af(i)+1:Af(i),wf(i.parentNode,n)):null},Ff=ro,Wf=function(t,e,n){var r,o;for(o=t(e.data.slice(0,n)).length,r=e.previousSibling;r&&$r(r);r=r.previousSibling)o+=t(r.data).length;return o},Uf=function(t,e,n,r,o){var i,a=r[o?"startContainer":"endContainer"],u=r[o?"startOffset":"endOffset"],s=[],l=0,c=t.getRoot();for($r(a)?s.push(n?Wf(e,a,u):u):(i=a.childNodes,u>=i.length&&i.length&&(l=1,u=Math.max(0,i.length-1)),s.push(t.nodeIndex(i[u],n)+l));a&&a!==c;a=a.parentNode)s.push(t.nodeIndex(a,n));return s},Gf=function(t,e,n,r){var o=e.dom,i={};return i.start=Uf(o,t,n,r,!0),e.isCollapsed()||(i.end=Uf(o,t,n,r,!1)),i},jf=function(t,e,n){var r=0;return dn.each(t.select(e),function(t){if("all"!==t.getAttribute("data-mce-bogus"))return t!==n&&void r++}),r},Xf=function(t,e){var n,r,o,i=e?"start":"end";n=t[i+"Container"],r=t[i+"Offset"],Hr(n)&&"TR"===n.nodeName&&(o=n.childNodes,n=o[Math.min(e?r:r-1,o.length-1)],n&&(r=e?0:n.childNodes.length,t["set"+(e?"Start":"End")](n,r)))},Yf=function(t){return Xf(t,!0),Xf(t,!1),t},qf=function(t,e){var n;if(Hr(t)&&(t=Zc(t,e),Ff(t)))return t;if(da(t)){if($r(t)&&ca(t)&&(t=t.parentNode),n=t.previousSibling,Ff(n))return n;if(n=t.nextSibling,Ff(n))return n}},Zf=function(t){return qf(t.startContainer,t.startOffset)||qf(t.endContainer,t.endOffset)},$f=function(t,e,n){var r=n.getNode(),o=r?r.nodeName:null,i=n.getRng();if(Ff(r)||"IMG"===o)return{name:o,index:jf(n.dom,o,r)};var a=Zf(i);return a?(o=a.tagName,{name:o,index:jf(n.dom,o,a)}):Gf(t,n,e,i)},Kf=function(t){var e=t.getRng();return{start:zf(t.dom.getRoot(),wf.fromRangeStart(e)),end:zf(t.dom.getRoot(),wf.fromRangeEnd(e))}},Jf=function(t){return{rng:t.getRng()}},Qf=function(t,e,n){var r={"data-mce-type":"bookmark",id:e,style:"overflow:hidden;line-height:0px"};return n?t.create("span",r,"&#xFEFF;"):t.create("span",r)},td=function(t,e){var n=t.dom,r=t.getRng(),o=n.uniqueId(),i=t.isCollapsed(),a=t.getNode(),u=a.nodeName;if("IMG"===u)return{name:u,index:jf(n,u,a)};var s=Yf(r.cloneRange());if(!i){s.collapse(!1);var l=Qf(n,o+"_end",e);Tf(n,s,l)}r=Yf(r),r.collapse(!0);var c=Qf(n,o+"_start",e);return Tf(n,r,c),t.moveToBookmark({id:o,keep:!0}),{id:o}},ed=function(t,e,n){return 2===e?$f(ua,n,t):3===e?Kf(t):e?Jf(t):td(t,!1)},nd=L($f,O,!0),rd=Il.DOM,od="font-family font-size font-weight font-style text-decoration text-transform color background-color border border-radius outline text-shadow",id=function(t,e,n){var r=t.getParam(e,n);if(-1!==r.indexOf("=")){var o=t.getParam(e,"","hash");return o.hasOwnProperty(t.id)?o[t.id]:n}return r},ad=function(t){return t.getParam("iframe_attrs",{})},ud=function(t){return t.getParam("doctype","<!DOCTYPE html>")},sd=function(t){return t.getParam("document_base_url","")},ld=function(t){return id(t,"body_id","tinymce")},cd=function(t){return id(t,"body_class","")},fd=function(t){return t.getParam("content_security_policy","")},dd=function(t){return t.getParam("br_in_pre",!0)},hd=function(t){if(t.getParam("force_p_newlines",!1))return"p";var e=t.getParam("forced_root_block","p");return!1===e?"":!0===e?"p":e},pd=function(t){return t.getParam("forced_root_block_attrs",{})},gd=function(t){return t.getParam("br_newline_selector",".mce-toc h2,figcaption,caption")},md=function(t){return t.getParam("no_newline_selector","")},vd=function(t){return t.getParam("keep_styles",!0)},yd=function(t){return t.getParam("end_container_on_empty_block",!1)},bd=function(t){return dn.explode(t.getParam("font_size_style_values","xx-small,x-small,small,medium,large,x-large,xx-large"))},xd=function(t){return dn.explode(t.getParam("font_size_classes",""))},wd=function(t){return t.getParam("images_dataimg_filter",B,"function")},_d=function(t){return t.getParam("automatic_uploads",!0,"boolean")},Sd=function(t){return t.getParam("images_reuse_filename",!1,"boolean")},Cd=function(t){return t.getParam("images_replace_blob_uris",!0,"boolean")},Md=function(t){return t.getParam("icons","","string")},Td=function(t){return t.getParam("icons_url","","string")},kd=function(t){return t.getParam("images_upload_url","","string")},Dd=function(t){return t.getParam("images_upload_base_path","","string")},Ad=function(t){return t.getParam("images_upload_credentials",!1,"boolean")},Id=function(t){return t.getParam("images_upload_handler",null,"function")},Od=function(t){return t.getParam("content_css_cors",!1,"boolean")},Ld=function(t){return t.getParam("referrer_policy","","string")},Ed=function(t){return t.getParam("language","en","string")},Nd=function(t){return t.getParam("language_url","","string")},Rd=function(t){return t.getParam("indent_use_margin",!1)},Pd=function(t){return t.getParam("indentation","40px","string")},zd=function(t){var e=t.getParam("content_css");return v(e)?K(e.split(","),ce):b(e)?e:!1===e||t.inline?[]:["default"]},Bd=function(t){var e=t.getParam("font_css",[]);return b(e)?e:K(e.split(","),ce)},Vd=function(t){return t.getParam("directionality",Jl.isRtl()?"rtl":void 0)},Hd=function(t){return t.getParam("inline_boundaries_selector","a[href],code,.mce-annotation","string")},Fd=function(t){var e=t.getParam("object_resizing");return!1!==e&&!Je.iOS&&(v(e)?e:"table,img,figure.image,div,video,iframe")},Wd=function(t){return t.getParam("resize_img_proportional",!0,"boolean")},Ud=function(t){return t.getParam("placeholder",rd.getAttrib(t.getElement(),"placeholder"),"string")},Gd=function(t){return t.getParam("event_root")},jd=function(t){return t.getParam("service_message")},Xd=function(t){return t.getParam("theme")},Yd=function(t){return t.getParam("validate")},qd=function(t){return!1!==t.getParam("inline_boundaries")},Zd=function(t){return t.getParam("formats")},$d=function(t){var e=t.getParam("preview_styles",od);return v(e)?e:""},Kd=function(t){return t.getParam("format_empty_lines",!1,"boolean")},Jd=function(t){return t.getParam("custom_ui_selector","","string")},Qd=function(t){return t.getParam("theme_url")},th=function(t){return t.getParam("inline")},eh=function(t){return t.getParam("hidden_input")},nh=function(t){return t.getParam("submit_patch")},rh=function(t){return"xml"===t.getParam("encoding")},oh=function(t){return t.getParam("add_form_submit_trigger")},ih=function(t){return t.getParam("add_unload_trigger")},ah=function(t){return""!==hd(t)},uh=function(t){return t.getParam("custom_undo_redo_levels",0,"number")},sh=function(t){return t.getParam("disable_nodechange")},lh=function(t){return t.getParam("readonly")},ch=function(t){return t.getParam("content_css_cors")},fh=function(t){return t.getParam("plugins","","string")},dh=function(t){return t.getParam("external_plugins")},hh=function(t){return t.getParam("block_unsupported_drop",!0,"boolean")},ph=function(t){return t.getParam("visual",!0,"boolean")},gh=function(t){return t.getParam("visual_table_class","mce-item-table","string")},mh=function(t){return t.getParam("visual_anchor_class","mce-item-anchor","string")},vh=Hr,yh=$r,bh=function(t){var e=t.parentNode;e&&e.removeChild(t)},xh=function(t){var e=ua(t);return{count:t.length-e.length,text:e}},wh=function(t){var e;while(-1!==(e=t.data.lastIndexOf(ia)))t.deleteData(e,1)},_h=function(t,e){return Dh(t),e},Sh=function(t,e){var n=xh(t.data.substr(0,e.offset())),r=xh(t.data.substr(e.offset())),o=n.text+r.text;return o.length>0?(wh(t),wf(t,e.offset()-n.count)):e},Ch=function(t,e){var n=e.container(),r=q(vt(n.childNodes),t).map(function(t){return t<e.offset()?wf(n,e.offset()-1):e}).getOr(e);return Dh(t),r},Mh=function(t,e){return yh(t)&&e.container()===t?Sh(t,e):_h(t,e)},Th=function(t,e){return e.container()===t.parentNode?Ch(t,e):_h(t,e)},kh=function(t,e){return wf.isTextPosition(e)?Mh(t,e):Th(t,e)},Dh=function(t){vh(t)&&da(t)&&(ha(t)?t.removeAttribute("data-mce-caret"):bh(t)),yh(t)&&(wh(t),0===t.data.length&&bh(t))},Ah=Ue().browser,Ih=ro,Oh=io,Lh=oo,Eh="*[contentEditable=false],video,audio,embed,object",Nh=function(t,e,n){var r,o,i,a,u,s=Wc(e.getBoundingClientRect(),n);return"BODY"===t.tagName?(r=t.ownerDocument.documentElement,o=t.scrollLeft||r.scrollLeft,i=t.scrollTop||r.scrollTop):(u=t.getBoundingClientRect(),o=t.scrollLeft-u.left,i=t.scrollTop-u.top),s.left+=o,s.right+=o,s.top+=i,s.bottom+=i,s.width=1,a=e.offsetWidth-e.clientWidth,a>0&&(n&&(a*=-1),s.left+=a,s.right+=a),s},Rh=function(t){for(var e=pc(yn.fromDom(t),Eh),n=0;n<e.length;n++){var r=e[n].dom,o=r.previousSibling;if(xa(o)){var i=o.data;1===i.length?o.parentNode.removeChild(o):o.deleteData(i.length-1,1)}if(o=r.nextSibling,ba(o)){i=o.data;1===i.length?o.parentNode.removeChild(o):o.deleteData(0,1)}}},Ph=function(t,e,n,r){var o,i,a=Vl(U.none()),u=hd(t),s=u.length>0?u:"p",l=function(t,r){var o,u;if(c(),Lh(r))return null;if(!n(r))return i=pa(r,t),u=r.ownerDocument.createRange(),Bh(i.nextSibling)?(u.setStart(i,0),u.setEnd(i,0)):(u.setStart(i,1),u.setEnd(i,1)),u;i=ya(s,r,t),o=Nh(e,r,t),_l(i).css("top",o.top);var l=_l('<div class="mce-visual-caret" data-mce-bogus="all"></div>').css(o).appendTo(e)[0];return a.set(U.some({caret:l,element:r,before:t})),a.get().each(function(e){t&&_l(e.caret).addClass("mce-visual-caret-before")}),f(),u=r.ownerDocument.createRange(),u.setStart(i,0),u.setEnd(i,0),u},c=function(){Rh(e),i&&(Dh(i),i=null),a.get().each(function(t){_l(t.caret).remove(),a.set(U.none())}),o&&(Ai.clearInterval(o),o=null)},f=function(){o=Ai.setInterval(function(){r()?_l("div.mce-visual-caret",e).toggleClass("mce-visual-caret-hidden"):_l("div.mce-visual-caret",e).addClass("mce-visual-caret-hidden")},500)},d=function(){a.get().each(function(t){var n=Nh(e,t.element,t.before);_l(t.caret).css(Ut({},n))})},h=function(){return Ai.clearInterval(o)},p=function(){return".mce-visual-caret {position: absolute;background-color: black;background-color: currentcolor;}.mce-visual-caret-hidden {display: none;}*[data-mce-caret] {position: absolute;left: -1000px;right: auto;top: 0;margin: 0;padding: 0;}"};return{show:l,hide:c,getCss:p,reposition:d,destroy:h}},zh=function(){return Ah.isIE()||Ah.isEdge()||Ah.isFirefox()},Bh=function(t){return Ih(t)||Oh(t)},Vh=function(t){return Bh(t)||Yr(t)&&zh()},Hh=ro,Fh=io,Wh=Wr("display","block table table-cell table-caption list-item"),Uh=da,Gh=ca,jh=Hr,Xh=La,Yh=function(t){return t>0},qh=function(t){return t<0},Zh=function(t,e){var n;while(n=t(e))if(!Gh(n))return n;return null},$h=function(t,e,n,r,o){var i=new Ei(t,r),a=Hh(t)||Gh(t);if(qh(e)){if(a&&(t=Zh(i.prev.bind(i),!0),n(t)))return t;while(t=Zh(i.prev.bind(i),o))if(n(t))return t}if(Yh(e)){if(a&&(t=Zh(i.next.bind(i),!0),n(t)))return t;while(t=Zh(i.next.bind(i),o))if(n(t))return t}return null},Kh=function(t,e){while(t&&t!==e){if(Wh(t))return t;t=t.parentNode}return null},Jh=function(t,e,n){return Kh(t.container(),n)===Kh(e.container(),n)},Qh=function(t,e){if(!e)return null;var n=e.container(),r=e.offset();return jh(n)?n.childNodes[r+t]:null},tp=function(t,e){var n=e.ownerDocument.createRange();return t?(n.setStartBefore(e),n.setEndBefore(e)):(n.setStartAfter(e),n.setEndAfter(e)),n},ep=function(t,e,n){return Kh(e,t)===Kh(n,t)},np=function(t,e,n){var r,o;o=t?"previousSibling":"nextSibling";while(n&&n!==e){if(r=n[o],Uh(r)&&(r=r[o]),Hh(r)||Fh(r)){if(ep(e,r,n))return r;break}if(Xh(r))break;n=n.parentNode}return null},rp=L(tp,!0),op=L(tp,!1),ip=function(t,e,n){var r,o,i,a=L(np,!0,e),u=L(np,!1,e);o=n.startContainer;var s=n.startOffset;if(ca(o)){if(jh(o)||(o=o.parentNode),i=o.getAttribute("data-mce-caret"),"before"===i&&(r=o.nextSibling,Vh(r)))return rp(r);if("after"===i&&(r=o.previousSibling,Vh(r)))return op(r)}if(!n.collapsed)return n;if($r(o)){if(Uh(o)){if(1===t){if(r=u(o),r)return rp(r);if(r=a(o),r)return op(r)}if(-1===t){if(r=a(o),r)return op(r);if(r=u(o),r)return rp(r)}return n}if(xa(o)&&s>=o.data.length-1)return 1===t&&(r=u(o),r)?rp(r):n;if(ba(o)&&s<=1)return-1===t&&(r=a(o),r)?op(r):n;if(s===o.data.length)return r=u(o),r?rp(r):n;if(0===s)return r=a(o),r?op(r):n}return n},ap=function(t,e){return U.from(Qh(t?0:-1,e)).filter(Hh)},up=function(t,e,n){var r=ip(t,e,n);return-1===t?wf.fromRangeStart(r):wf.fromRangeEnd(r)},sp=function(t){return U.from(t.getNode()).map(yn.fromDom)},lp=function(t){return U.from(t.getNode(!0)).map(yn.fromDom)},cp=function(t,e){while(e=t(e))if(e.isVisible())return e;return e},fp=function(t,e){var n=Jh(t,e);return!(n||!to(t.getNode()))||n};(function(t){t[t["Backwards"]=-1]="Backwards",t[t["Forwards"]=1]="Forwards"})(_f||(_f={}));var dp=ro,hp=$r,pp=Hr,gp=to,mp=La,vp=za,yp=Ba,bp=function(t,e){var n=[];while(t&&t!==e)n.push(t),t=t.parentNode;return n},xp=function(t,e){return t.hasChildNodes()&&e<t.childNodes.length?t.childNodes[e]:null},wp=function(t,e){if(Yh(t)){if(mp(e.previousSibling)&&!hp(e.previousSibling))return wf.before(e);if(hp(e))return wf(e,0)}if(qh(t)){if(mp(e.nextSibling)&&!hp(e.nextSibling))return wf.after(e);if(hp(e))return wf(e,e.data.length)}return qh(t)?gp(e)?wf.before(e):wf.after(e):wf.before(e)},_p=function(t,e){var n=e.nextSibling;return n&&mp(n)?hp(n)?wf(n,0):wf.before(n):Sp(_f.Forwards,wf.after(e),t)},Sp=function(t,e,n){var r,o,i,a;if(!pp(n)||!e)return null;if(e.isEqual(wf.after(n))&&n.lastChild){if(a=wf.after(n.lastChild),qh(t)&&mp(n.lastChild)&&pp(n.lastChild))return gp(n.lastChild)?wf.before(n.lastChild):a}else a=e;var u=a.container(),s=a.offset();if(hp(u)){if(qh(t)&&s>0)return wf(u,--s);if(Yh(t)&&s<u.length)return wf(u,++s);r=u}else{if(qh(t)&&s>0&&(o=xp(u,s-1),mp(o)))return!vp(o)&&(i=$h(o,t,yp,o),i)?hp(i)?wf(i,i.data.length):wf.after(i):hp(o)?wf(o,o.data.length):wf.before(o);if(Yh(t)&&s<u.childNodes.length&&(o=xp(u,s),mp(o)))return gp(o)?_p(n,o):!vp(o)&&(i=$h(o,t,yp,o),i)?hp(i)?wf(i,0):wf.before(i):hp(o)?wf(o,0):wf.after(o);r=o||a.getNode()}if((Yh(t)&&a.isAtEnd()||qh(t)&&a.isAtStart())&&(r=$h(r,t,B,n,!0),yp(r,n)))return wp(t,r);o=$h(r,t,yp,n);var l=Wt(et(bp(u,n),dp));return!l||o&&l.contains(o)?o?wp(t,o):null:(a=Yh(t)?wf.after(l):wf.before(l),a)},Cp=function(t){return{next:function(e){return Sp(_f.Forwards,e,t)},prev:function(e){return Sp(_f.Backwards,e,t)}}},Mp=function(t,e,n){var r=t?wf.before(n):wf.after(n);return Lp(t,e,r)},Tp=function(t){return to(t)?wf.before(t):wf.after(t)},kp=function(t){return wf.isTextPosition(t)?0===t.offset():La(t.getNode())},Dp=function(t){if(wf.isTextPosition(t)){var e=t.container();return t.offset()===e.data.length}return La(t.getNode(!0))},Ap=function(t,e){return!wf.isTextPosition(t)&&!wf.isTextPosition(e)&&t.getNode()===e.getNode(!0)},Ip=function(t){return!wf.isTextPosition(t)&&to(t.getNode())},Op=function(t,e,n){return t?!Ap(e,n)&&!Ip(e)&&Dp(e)&&kp(n):!Ap(n,e)&&kp(e)&&Dp(n)},Lp=function(t,e,n){var r=Cp(e);return U.from(t?r.next(n):r.prev(n))},Ep=function(t,e,n){return Lp(t,e,n).bind(function(r){return Jh(n,r,e)&&Op(t,n,r)?Lp(t,e,r):U.some(r)})},Np=function(t,e,n,r){return Ep(t,e,n).bind(function(n){return r(n)?Np(t,e,n,r):U.some(n)})},Rp=function(t,e){var n=t?e.firstChild:e.lastChild;return $r(n)?U.some(wf(n,t?0:n.data.length)):n?La(n)?U.some(t?wf.before(n):Tp(n)):Mp(t,e,n):U.none()},Pp=L(Lp,!0),zp=L(Lp,!1),Bp=L(Rp,!0),Vp=L(Rp,!1),Hp="_mce_caret",Fp=function(t){return Hr(t)&&t.id===Hp},Wp=function(t,e){while(e&&e!==t){if(e.id===Hp)return e;e=e.parentNode}return null},Up=function(t){return v(t.start)},Gp=function(t){return t.hasOwnProperty("rng")},jp=function(t){return t.hasOwnProperty("id")},Xp=function(t){return t.hasOwnProperty("name")},Yp=function(t){return dn.isArray(t.start)},qp=function(t,e){return Hr(e)&&t.isBlock(e)&&!e.innerHTML&&!Je.ie&&(e.innerHTML='<br data-mce-bogus="1" />'),e},Zp=function(t,e){var n,r=t.createRng();return n=Hf(t.getRoot(),e.start),r.setStart(n.container(),n.offset()),n=Hf(t.getRoot(),e.end),r.setEnd(n.container(),n.offset()),r},$p=function(t,e){var n=t.ownerDocument.createTextNode(ia);t.appendChild(n),e.setStart(n,0),e.setEnd(n,0)},Kp=function(t){return!1===t.hasChildNodes()},Jp=function(t,e){return Vp(t).fold(z,function(t){return e.setStart(t.container(),t.offset()),e.setEnd(t.container(),t.offset()),!0})},Qp=function(t,e,n){return!(!Kp(e)||!Wp(t,e))&&($p(e,n),!0)},tg=function(t,e,n,r){var o,i,a,u,s=n[e?"start":"end"],l=t.getRoot();if(s){for(a=s[0],i=l,o=s.length-1;o>=1;o--){if(u=i.childNodes,Qp(l,i,r))return!0;if(s[o]>u.length-1)return!!Qp(l,i,r)||Jp(i,r);i=u[s[o]]}3===i.nodeType&&(a=Math.min(s[0],i.nodeValue.length)),1===i.nodeType&&(a=Math.min(s[0],i.childNodes.length)),e?r.setStart(i,a):r.setEnd(i,a)}return!0},eg=function(t){return $r(t)&&t.data.length>0},ng=function(t,e,n){var r,o,i,a,u,s,l=t.get(n.id+"_"+e),c=n.keep;if(l){if(r=l.parentNode,"start"===e?(c?l.hasChildNodes()?(r=l.firstChild,o=1):eg(l.nextSibling)?(r=l.nextSibling,o=0):eg(l.previousSibling)?(r=l.previousSibling,o=l.previousSibling.data.length):(r=l.parentNode,o=t.nodeIndex(l)+1):o=t.nodeIndex(l),u=r,s=o):(c?l.hasChildNodes()?(r=l.firstChild,o=1):eg(l.previousSibling)?(r=l.previousSibling,o=l.previousSibling.data.length):(r=l.parentNode,o=t.nodeIndex(l)):o=t.nodeIndex(l),u=r,s=o),!c){a=l.previousSibling,i=l.nextSibling,dn.each(dn.grep(l.childNodes),function(t){$r(t)&&(t.nodeValue=t.nodeValue.replace(/\uFEFF/g,""))});while(l=t.get(n.id+"_"+e))t.remove(l,!0);a&&i&&a.nodeType===i.nodeType&&$r(a)&&!Je.opera&&(o=a.nodeValue.length,a.appendData(i.nodeValue),t.remove(i),u=a,s=o)}return U.some(wf(u,s))}return U.none()},rg=function(t,e){var n=t.createRng();return tg(t,!0,e,n)&&tg(t,!1,e,n)?U.some(n):U.none()},og=function(t,e){var n=ng(t,"start",e),r=ng(t,"end",e);return zc(n,r.or(n),function(e,n){var r=t.createRng();return r.setStart(qp(t,e.container()),e.offset()),r.setEnd(qp(t,n.container()),n.offset()),r})},ig=function(t,e){return U.from(t.select(e.name)[e.index]).map(function(e){var n=t.createRng();return n.selectNode(e),n})},ag=function(t,e){var n=t.dom;if(e){if(Yp(e))return rg(n,e);if(Up(e))return U.some(Zp(n,e));if(jp(e))return og(n,e);if(Xp(e))return ig(n,e);if(Gp(e))return U.some(e.rng)}return U.none()},ug=function(t,e,n){return ed(t,e,n)},sg=function(t,e){ag(t,e).each(function(e){t.setRng(e)})},lg=function(t){return Hr(t)&&"SPAN"===t.tagName&&"bookmark"===t.getAttribute("data-mce-type")},cg=function(t){return function(e){return t===e}},fg=cg(na),dg=function(t){return""!==t&&-1!==" \f\n\r\t\v".indexOf(t)},hg=function(t){return!dg(t)&&!fg(t)},pg=function(t){return!!t.nodeType},gg=function(t){return t&&/^(IMG)$/.test(t.nodeName)},mg=function(t,e,n){var r,o,i,a=n.startOffset,u=n.startContainer;if((n.startContainer!==n.endContainer||!gg(n.startContainer.childNodes[n.startOffset]))&&1===u.nodeType)for(i=u.childNodes,a<i.length?(u=i[a],r=new Ei(u,t.getParent(u,t.isBlock))):(u=i[i.length-1],r=new Ei(u,t.getParent(u,t.isBlock)),r.next(!0)),o=r.current();o;o=r.next())if(3===o.nodeType&&!xg(o))return n.setStart(o,0),void e.setRng(n)},vg=function(t,e,n){if(t){var r=e?"nextSibling":"previousSibling";for(t=n?t:t[r];t;t=t[r])if(1===t.nodeType||!xg(t))return t}},yg=function(t,e){return pg(e)&&(e=e.nodeName),!!t.schema.getTextBlockElements()[e.toLowerCase()]},bg=function(t,e,n){return t.schema.isValidChild(e,n)},xg=function(t,e){if(void 0===e&&(e=!1),C(t)&&$r(t)){var n=e?t.data.replace(/ /g," "):t.data;return Ha(n)}return!1},wg=function(t){return C(t)&&$r(t)&&0===t.length},_g=function(t,e){return"string"!==typeof t?t=t(e):e&&(t=t.replace(/%(\w+)/g,function(t,n){return e[n]||t})),t},Sg=function(t,e){return t=t||"",e=e||"",t=""+(t.nodeName||t),e=""+(e.nodeName||e),t.toLowerCase()===e.toLowerCase()},Cg=function(t,e,n){return"color"!==n&&"backgroundColor"!==n||(e=t.toHex(e)),"fontWeight"===n&&700===e&&(e="bold"),"fontFamily"===n&&(e=e.replace(/[\'\"]/g,"").replace(/,\s+/g,",")),""+e},Mg=function(t,e,n){return Cg(t,t.getStyle(e,n),n)},Tg=function(t,e){var n;return t.getParent(e,function(e){return n=t.getStyle(e,"text-decoration"),n&&"none"!==n}),n},kg=function(t,e,n){return t.getParents(e,n,t.getRoot())},Dg=function(t,e){var n=function(t){var e=function(t){return t.length>1&&"%"===t.charAt(0)};return $(["styles","attributes"],function(n){return It(t,n).exists(function(t){var n=b(t)?t:At(t);return $(n,e)})})};return $(t.formatter.get(e),n)},Ag=function(t,e,n){var r=["inline","block","selector","attributes","styles","classes"],o=function(t){return kt(t,function(t,e){return $(r,function(t){return t===e})})};return $(t.formatter.get(e),function(e){var r=o(e);return $(t.formatter.get(n),function(t){var e=o(t);return Et(r,e)})})},Ig=function(t){return Lt(t,"block")},Og=function(t){return Lt(t,"selector")},Lg=function(t){return Lt(t,"inline")},Eg=function(t,e){return $(e.childNodes,t.isBlock)},Ng=lg,Rg=kg,Pg=xg,zg=yg,Bg=function(t){return to(t)&&t.getAttribute("data-mce-bogus")&&!t.nextSibling},Vg=function(t,e){var n=e;while(n){if(Hr(n)&&t.getContentEditable(n))return"false"===t.getContentEditable(n)?n:e;n=n.parentNode}return e},Hg=function(t,e,n,r){for(var o=e.data,i=n;t?i>=0:i<o.length;t?i--:i++)if(r(o.charAt(i)))return t?i+1:i;return-1},Fg=function(t,e,n){return Hg(t,e,n,function(t){return fg(t)||dg(t)})},Wg=function(t,e,n){return Hg(t,e,n,hg)},Ug=function(t,e,n,r,o,i){var a,u=t.getParent(n,t.isBlock)||e,s=function(e,n,r){var i=Rc(t),s=o?i.backwards:i.forwards;return U.from(s(e,n,function(t,e){return Ng(t.parentNode)?-1:(a=t,r(o,t,e))},u))},l=s(n,r,Fg);return l.bind(function(t){return i?s(t.container,t.offset+(o?-1:0),Wg):U.some(t)}).orThunk(function(){return a?U.some({container:a,offset:o?0:a.length}):U.none()})},Gg=function(t,e,n,r,o){$r(r)&&0===r.nodeValue.length&&r[o]&&(r=r[o]);for(var i=Rg(t,r),a=0;a<i.length;a++)for(var u=0;u<e.length;u++){var s=e[u];if(!("collapsed"in s&&s.collapsed!==n.collapsed)&&t.is(i[a],s.selector))return i[a]}return r},jg=function(t,e,n,r){var o,i=t.dom,a=i.getRoot();if(e[0].wrapper||(o=i.getParent(n,e[0].block,a)),!o){var u=i.getParent(n,"LI,TD,TH");o=i.getParent($r(n)?n.parentNode:n,function(e){return e!==a&&zg(t,e)},u)}if(o&&e[0].wrapper&&(o=Rg(i,o,"ul,ol").reverse()[0]||o),!o){o=n;while(o[r]&&!i.isBlock(o[r]))if(o=o[r],Sg(o,"br"))break}return o||n},Xg=function(t,e,n,r){var o=n.parentNode;return!C(n[r])&&(!(o!==e&&!S(o)&&!t.isBlock(o))||Xg(t,e,o,r))},Yg=function(t,e,n,r,o){var i,a=n,u=o?"previousSibling":"nextSibling",s=t.getRoot();if($r(n)&&!Pg(n)&&(o?r>0:r<n.data.length))return n;while(1){if(!e[0].block_expand&&t.isBlock(a))return a;for(i=a[u];i;i=i[u]){var l=$r(i)&&!Xg(t,s,i,u);if(!Ng(i)&&!Bg(i)&&!Pg(i,l))return a}if(a===s||a.parentNode===s){n=a;break}a=a.parentNode}return n},qg=function(t){return Ng(t.parentNode)||Ng(t)},Zg=function(t,e,n,r){void 0===r&&(r=!1);var o=e.startContainer,i=e.startOffset,a=e.endContainer,u=e.endOffset,s=t.dom;if(Hr(o)&&o.hasChildNodes()&&(o=Zc(o,i),$r(o)&&(i=0)),Hr(a)&&a.hasChildNodes()&&(a=Zc(a,e.collapsed?u:u-1),$r(a)&&(u=a.nodeValue.length)),o=Vg(s,o),a=Vg(s,a),qg(o)&&(o=Ng(o)?o:o.parentNode,o=e.collapsed?o.previousSibling||o:o.nextSibling||o,$r(o)&&(i=e.collapsed?o.length:0)),qg(a)&&(a=Ng(a)?a:a.parentNode,a=e.collapsed?a.nextSibling||a:a.previousSibling||a,$r(a)&&(u=e.collapsed?0:a.length)),e.collapsed){var l=Ug(s,t.getBody(),o,i,!0,r);l.each(function(t){var e=t.container,n=t.offset;o=e,i=n});var c=Ug(s,t.getBody(),a,u,!1,r);c.each(function(t){var e=t.container,n=t.offset;a=e,u=n})}return(n[0].inline||n[0].block_expand)&&(n[0].inline&&$r(o)&&0!==i||(o=Yg(s,n,o,i,!0)),n[0].inline&&$r(a)&&u!==a.nodeValue.length||(a=Yg(s,n,a,u,!1))),n[0].selector&&!1!==n[0].expand&&!n[0].inline&&(o=Gg(s,n,e,o,"previousSibling"),a=Gg(s,n,e,a,"nextSibling")),(n[0].block||n[0].selector)&&(o=jg(t,n,o,"previousSibling"),a=jg(t,n,a,"nextSibling"),n[0].block&&(s.isBlock(o)||(o=Yg(s,n,o,i,!0)),s.isBlock(a)||(a=Yg(s,n,a,u,!1)))),Hr(o)&&(i=s.nodeIndex(o),o=o.parentNode),Hr(a)&&(u=s.nodeIndex(a)+1,a=a.parentNode),{startContainer:o,startOffset:i,endContainer:a,endOffset:u}},$g=function(t,e){var n=t.childNodes;return e>=n.length?e=n.length-1:e<0&&(e=0),n[e]||t},Kg=function(t,e){return $g(t,e-1)},Jg=function(t,e,n){var r=e.startContainer,o=e.startOffset,i=e.endContainer,a=e.endOffset,u=function(t){var e;return e=t[0],3===e.nodeType&&e===r&&o>=e.nodeValue.length&&t.splice(0,1),e=t[t.length-1],0===a&&t.length>0&&e===i&&3===e.nodeType&&t.splice(t.length-1,1),t},s=function(t,e,n){for(var r=[];t&&t!==n;t=t[e])r.push(t);return r},l=function(t,e){do{if(t.parentNode===e)return t;t=t.parentNode}while(t)},c=function(t,e,r){for(var o=r?"nextSibling":"previousSibling",i=t,a=i.parentNode;i&&i!==e;i=a){a=i.parentNode;var l=s(i===t?i:i[o],o);l.length&&(r||l.reverse(),n(u(l)))}};if(1===r.nodeType&&r.hasChildNodes()&&(r=$g(r,o)),1===i.nodeType&&i.hasChildNodes()&&(i=Kg(i,a)),r===i)return n(u([r]));for(var f=t.findCommonAncestor(r,i),d=r;d;d=d.parentNode){if(d===i)return c(r,f,!0);if(d===f)break}for(d=i;d;d=d.parentNode){if(d===r)return c(i,f);if(d===f)break}var h=l(r,f)||r,p=l(i,f)||i;c(r,h,!0);var g=s(h===r?h:h.nextSibling,"nextSibling",p===i?p.nextSibling:p);g.length&&n(u(g)),c(i,p)},Qg=function(t){var e=[];if(t)for(var n=0;n<t.rangeCount;n++)e.push(t.getRangeAt(n));return e},tm=function(t){return st(t,function(t){var e=qc(t);return e?[yn.fromDom(e)]:[]})},em=function(t){return Qg(t).length>1},nm=function(t){return et(tm(t),Ji)},rm=function(t){return pc(t,"td[data-mce-selected],th[data-mce-selected]")},om=function(t,e){var n=rm(e);return n.length>0?n:nm(t)},im=function(t){return om(Qg(t.selection.getSel()),yn.fromDom(t.getBody()))},am=function(t){var e=t.startContainer,n=t.startOffset;return $r(e)?0===n?U.some(yn.fromDom(e)):U.none():U.from(e.childNodes[n]).map(yn.fromDom)},um=function(t){var e=t.endContainer,n=t.endOffset;return $r(e)?n===e.data.length?U.some(yn.fromDom(e)):U.none():U.from(e.childNodes[n-1]).map(yn.fromDom)},sm=function(t){return nr(t).fold(I([t]),function(e){return[t].concat(sm(e))})},lm=function(t){return rr(t).fold(I([t]),function(e){return"br"===Rn(e)?$n(e).map(function(e){return[t].concat(lm(e))}).getOr([]):[t].concat(lm(e))})},cm=function(t,e){return zc(am(e),um(e),function(e,n){var r=it(sm(t),L(On,e)),o=it(lm(t),L(On,n));return r.isSome()&&o.isSome()}).getOr(!1)},fm=function(t,e,n,r){var o=n,i=new Ei(n,o),a=kt(t.schema.getMoveCaretBeforeOnEnterElements(),function(t,e){return!Z(["td","th","table"],e.toLowerCase())});do{if($r(n)&&0!==dn.trim(n.nodeValue).length)return void(r?e.setStart(n,0):e.setEnd(n,n.nodeValue.length));if(a[n.nodeName])return void(r?e.setStartBefore(n):"BR"===n.nodeName?e.setEndBefore(n):e.setEndAfter(n))}while(n=r?i.next():i.prev());"BODY"===o.nodeName&&(r?e.setStart(o,0):e.setEnd(o,o.childNodes.length))},dm=function(t){var e=t.selection.getSel();return e&&e.rangeCount>0},hm=function(t,e){var n=im(t);n.length>0?J(n,function(n){var r=n.dom,o=t.dom.createRng();o.setStartBefore(r),o.setEndAfter(r),e(o,!0)}):e(t.selection.getRng(),!1)},pm=function(t,e,n){var r=td(t,e);n(r),t.moveToBookmark(r)},gm=function(t,e){var n=function(n){if(!t(n))throw new Error("Can only get "+e+" value of a "+e+" node");return r(n).getOr("")},r=function(e){return t(e)?U.from(e.dom.nodeValue):U.none()},o=function(n,r){if(!t(n))throw new Error("Can only set raw "+e+" value of a "+e+" node");n.dom.nodeValue=r};return{get:n,getOption:r,set:o}},mm=gm(Hn,"text"),vm=function(t){return mm.get(t)},ym=function(t){return Hn(t)&&vm(t)===ia},bm=function(t,e,n,r){return Yn(e).fold(function(){return"skipping"},function(o){return"br"===r||ym(e)?"valid":bc(e)?"existing":Fp(e.dom)?"caret":bg(t,n,r)&&bg(t,Rn(o),n)?"valid":"invalid-child"})},xm=function(t,e){var n=Zg(t,e,[{inline:!0}]);e.setStart(n.startContainer,n.startOffset),e.setEnd(n.endContainer,n.endOffset),t.selection.setRng(e)},wm=function(t,e,n,r){var o=e.uid,i=void 0===o?Tc("mce-annotation"):o,a=Gt(e,["uid"]),u=yn.fromTag("span",t);lc(u,gc()),so(u,""+vc(),i),so(u,""+mc(),n);var s=r(i,a),l=s.attributes,c=void 0===l?{}:l,f=s.classes,d=void 0===f?[]:f;return lo(u,c),kc(u,d),u},_m=function(t,e,n,r,o){var i=[],a=wm(t.getDoc(),o,n,r),u=Vl(U.none()),s=function(){u.set(U.none())},l=function(){return u.get().getOrThunk(function(){var t=Lc(a);return i.push(t),u.set(U.some(t)),t})},c=function(t){J(t,f)},f=function(e){var n=bm(t,e,"span",Rn(e));switch(n){case"invalid-child":s();var r=tr(e);c(r),s();break;case"valid":var o=l();br(e,o);break}},d=function(t){var e=K(t,yn.fromDom);c(e)};return Jg(t.dom,e,function(t){s(),d(t)}),i},Sm=function(t,e,n,r){t.undoManager.transact(function(){var o=t.selection,i=o.getRng(),a=im(t).length>0;if(i.collapsed&&!a&&xm(t,i),o.getRng().collapsed&&!a){var u=wm(t.getDoc(),r,e,n.decorate);Ic(u,na),o.getRng().insertNode(u.dom),o.select(u.dom)}else pm(o,!1,function(){hm(t,function(o){_m(t,o,e,n.decorate,r)})})})},Cm=function(t){var e=Cc();Sc(t,e);var n=_c(t);return{register:function(t,n){e.register(t,n)},annotate:function(n,r){e.lookup(n).each(function(e){Sm(t,n,e,r)})},annotationChanged:function(t,e){n.addListener(t,e)},remove:function(e){yc(t,U.some(e)).each(function(t){var e=t.elements;J(e,Cr)})},getAll:function(e){var n=wc(t,e);return _t(n,function(t){return K(t,function(t){return t.dom})})}}},Mm=function(t){return{getBookmark:L(ug,t),moveToBookmark:L(sg,t)}};Mm.isBookmarkNode=lg;var Tm=function(t,e){while(e&&e!==t){if(no(e)||ro(e))return e;e=e.parentNode}return null},km=function(t,e,n){if(n.collapsed)return!1;if(Je.browser.isIE()&&n.startOffset===n.endOffset-1&&n.startContainer===n.endContainer){var r=n.startContainer.childNodes[n.startOffset];if(Hr(r))return $(r.getClientRects(),function(n){return Yc(n,t,e)})}return $(n.getClientRects(),function(n){return Yc(n,t,e)})},Dm=function(t,e){return t.fire("PreProcess",e)},Am=function(t,e){return t.fire("PostProcess",e)},Im=function(t){return t.fire("remove")},Om=function(t){return t.fire("detach")},Lm=function(t,e){return t.fire("SwitchMode",{mode:e})},Em=function(t,e,n,r,o){t.fire("ObjectResizeStart",{target:e,width:n,height:r,origin:o})},Nm=function(t,e,n,r,o){t.fire("ObjectResized",{target:e,width:n,height:r,origin:o})},Rm=function(t){return t.fire("PreInit")},Pm=function(t){return t.fire("PostRender")},zm=function(t){return t.fire("Init")},Bm=function(t,e){return t.fire("PlaceholderToggle",{state:e})},Vm=function(t,e,n){return t.fire(e,n)},Hm={BACKSPACE:8,DELETE:46,DOWN:40,ENTER:13,LEFT:37,RIGHT:39,SPACEBAR:32,TAB:9,UP:38,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,modifierPressed:function(t){return t.shiftKey||t.ctrlKey||t.altKey||Hm.metaKeyPressed(t)},metaKeyPressed:function(t){return Je.mac?t.metaKey:t.ctrlKey&&!t.altKey}},Fm=ro,Wm=function(t,e){var n,r,o,i,a,u,s,l,c,f,d,h,p,g,m,v,y,b="data-mce-selected",x=e.dom,w=dn.each,_=e.getDoc(),S=document,M=Math.abs,T=Math.round,k=e.getBody(),D={nw:[0,0,-1,-1],ne:[1,0,1,-1],se:[1,1,1,1],sw:[0,1,-1,1]},A=function(t){return t&&("IMG"===t.nodeName||e.dom.is(t,"figure.image"))},I=function(t){return io(t)||x.hasClass(t,"mce-preview-object")},O=function(t,e){if("longpress"===t.type||0===t.type.indexOf("touch")){var n=t.touches[0];return A(t.target)&&!km(n.clientX,n.clientY,e)}return A(t.target)&&!km(t.clientX,t.clientY,e)},L=function(t){var n=t.target;O(t,e.selection.getRng())&&!t.isDefaultPrevented()&&e.selection.select(n)},E=function(t){return x.is(t,"figure.image")?[t.querySelector("img")]:x.hasClass(t,"mce-preview-object")&&C(t.firstElementChild)?[t,t.firstElementChild]:[t]},N=function(t){var n=Fd(e);return!!n&&("false"!==t.getAttribute("data-mce-resize")&&(t!==e.getBody()&&(x.hasClass(t,"mce-preview-object")?kn(yn.fromDom(t.firstElementChild),n):kn(yn.fromDom(t),n))))},R=function(t){return I(t)?x.create("img",{src:Je.transparentSrc}):t.cloneNode(!0)},P=function(t,n,r){if(C(r)){var o=E(t);J(o,function(t){t.style[n]||!e.schema.isValid(t.nodeName.toLowerCase(),n)?x.setStyle(t,n,r):x.setAttrib(t,n,""+r)})}},z=function(t,e,n){P(t,"width",e),P(t,"height",n)},B=function(t){var a,b,w,_,S;a=t.screenX-u,b=t.screenY-s,g=a*i[2]+f,m=b*i[3]+d,g=g<5?5:g,m=m<5?5:m,w=(A(n)||I(n))&&!1!==Wd(e)?!Hm.modifierPressed(t):Hm.modifierPressed(t),w&&(M(a)>M(b)?(m=T(g*h),g=T(m/h)):(g=T(m/h),m=T(g*h))),z(r,g,m),_=i.startPos.x+a,S=i.startPos.y+b,_=_>0?_:0,S=S>0?S:0,x.setStyles(o,{left:_,top:S,display:"block"}),o.innerHTML=g+" &times; "+m,i[2]<0&&r.clientWidth<=g&&x.setStyle(r,"left",l+(f-g)),i[3]<0&&r.clientHeight<=m&&x.setStyle(r,"top",c+(d-m)),a=k.scrollWidth-v,b=k.scrollHeight-y,a+b!==0&&x.setStyles(o,{left:_-a,top:S-b}),p||(Em(e,n,f,d,"corner-"+i.name),p=!0)},V=function(){var t=p;p=!1,t&&(P(n,"width",g),P(n,"height",m)),x.unbind(_,"mousemove",B),x.unbind(_,"mouseup",V),S!==_&&(x.unbind(S,"mousemove",B),x.unbind(S,"mouseup",V)),x.remove(r),x.remove(o),x.remove(a),H(n),t&&(Nm(e,n,g,m,"corner-"+i.name),x.setAttrib(n,"style",x.getAttrib(n,"style"))),e.nodeChanged()},H=function(t){G();var l=x.getPos(t,k),c=l.x,p=l.y,C=t.getBoundingClientRect(),M=C.width||C.right-C.left,T=C.height||C.bottom-C.top;n!==t&&(F(),n=t,g=m=0);var A=e.fire("ObjectSelected",{target:t}),I=x.getAttrib(n,b,"1");N(t)&&!A.isDefaultPrevented()?w(D,function(t,e){var l,g=function(l){var g=E(n)[0];u=l.screenX,s=l.screenY,f=g.clientWidth,d=g.clientHeight,h=d/f,i=t,i.name=e,i.startPos={x:M*t[0]+c,y:T*t[1]+p},v=k.scrollWidth,y=k.scrollHeight,a=x.add(k,"div",{class:"mce-resize-backdrop"}),x.setStyles(a,{position:"fixed",left:"0",top:"0",width:"100%",height:"100%"}),r=R(n),x.addClass(r,"mce-clonedresizable"),x.setAttrib(r,"data-mce-bogus","all"),r.contentEditable="false",x.setStyles(r,{left:c,top:p,margin:0}),z(r,M,T),r.removeAttribute(b),k.appendChild(r),x.bind(_,"mousemove",B),x.bind(_,"mouseup",V),S!==_&&(x.bind(S,"mousemove",B),x.bind(S,"mouseup",V)),o=x.add(k,"div",{class:"mce-resize-helper","data-mce-bogus":"all"},f+" &times; "+d)};l=x.get("mceResizeHandle"+e),l&&x.remove(l),l=x.add(k,"div",{id:"mceResizeHandle"+e,"data-mce-bogus":"all",class:"mce-resizehandle",unselectable:!0,style:"cursor:"+e+"-resize; margin:0; padding:0"}),11===Je.ie&&(l.contentEditable=!1),x.bind(l,"mousedown",function(t){t.stopImmediatePropagation(),t.preventDefault(),g(t)}),t.elm=l,x.setStyles(l,{left:M*t[0]+c-l.offsetWidth/2,top:T*t[1]+p-l.offsetHeight/2})}):F(),x.getAttrib(n,b)||n.setAttribute(b,I)},F=function(){G(),n&&n.removeAttribute(b),wt(D,function(t,e){var n=x.get("mceResizeHandle"+e);n&&(x.unbind(n),x.remove(n))})},W=function(n){var r,o,i=function(t,e){if(t)do{if(t===e)return!0}while(t=t.parentNode)};p||e.removed||(w(x.select("img[data-mce-selected],hr[data-mce-selected]"),function(t){t.removeAttribute(b)}),o="mousedown"===n.type?n.target:t.getNode(),o=x.$(o).closest("table,img,figure.image,hr,video,span.mce-preview-object")[0],i(o,k)&&(j(),r=t.getStart(!0),i(r,o)&&i(t.getEnd(!0),o))?H(o):F())},U=function(t){return Fm(Tm(e.getBody(),t))},G=function(){wt(D,function(t){t.elm&&(x.unbind(t.elm),delete t.elm)})},j=function(){try{e.getDoc().execCommand("enableObjectResizing",!1,"false")}catch(t){}};e.on("init",function(){if(j(),Je.browser.isIE()||Je.browser.isEdge()){e.on("mousedown click",function(t){var n=t.target,r=n.nodeName;p||!/^(TABLE|IMG|HR)$/.test(r)||U(n)||(2!==t.button&&e.selection.select(n,"TABLE"===r),"mousedown"===t.type&&e.nodeChanged())});var t=function(t){var n=function(t){Ai.setEditorTimeout(e,function(){return e.selection.select(t)})};if(U(t.target)||io(t.target))return t.preventDefault(),void n(t.target);/^(TABLE|IMG|HR)$/.test(t.target.nodeName)&&(t.preventDefault(),"IMG"===t.target.tagName&&n(t.target))};x.bind(k,"mscontrolselect",t),e.on("remove",function(){return x.unbind(k,"mscontrolselect",t)})}var r=Ai.throttle(function(t){e.composing||W(t)});e.on("nodechange ResizeEditor ResizeWindow ResizeContent drop FullscreenStateChanged",r),e.on("keyup compositionend",function(t){n&&"TABLE"===n.nodeName&&r(t)}),e.on("hide blur",F),e.on("contextmenu longpress",L,!0)}),e.on("remove",G);var X=function(){n=r=a=null};return{isResizable:N,showResizeRect:H,hideResizeRect:F,updateResizeRect:W,destroy:X}},Um=function(t){return no(t)||ro(t)},Gm=function(t,e,n){while(t&&t!==e){if(n(t))return t;t=t.parentNode}return null},jm=function(t,e,n){var r,o=n.elementFromPoint(t,e),i=n.body.createTextRange();if(o&&"HTML"!==o.tagName||(o=n.body),i.moveToElementText(o),r=dn.toArray(i.getClientRects()),r=r.sort(function(t,n){return t=Math.abs(Math.max(t.top-e,t.bottom-e)),n=Math.abs(Math.max(n.top-e,n.bottom-e)),t-n}),r.length>0){e=(r[0].bottom+r[0].top)/2;try{return i.moveToPoint(t,e),i.collapse(!0),i}catch(a){}}return null},Xm=function(t,e){var n=t&&t.parentElement?t.parentElement():null;return ro(Gm(n,e,Um))?null:t},Ym=function(t,e,n){var r,o,i=n;if(i.caretPositionFromPoint)o=i.caretPositionFromPoint(t,e),o&&(r=n.createRange(),r.setStart(o.offsetNode,o.offset),r.collapse(!0));else if(n.caretRangeFromPoint)r=n.caretRangeFromPoint(t,e);else if(i.body.createTextRange){r=i.body.createTextRange();try{r.moveToPoint(t,e),r.collapse(!0)}catch(a){r=jm(t,e,n)}return Xm(r,n.body)}return r},qm=function(t,e){return t&&e&&t.startContainer===e.startContainer&&t.startOffset===e.startOffset&&t.endContainer===e.endContainer&&t.endOffset===e.endOffset},Zm=function(t,e,n){while(t&&t!==e){if(n(t))return t;t=t.parentNode}return null},$m=function(t,e,n){return null!==Zm(t,e,n)},Km=function(t,e,n){return $m(t,e,function(t){return t.nodeName===n})},Jm=function(t){return t&&"TABLE"===t.nodeName},Qm=function(t){return t&&/^(TD|TH|CAPTION)$/.test(t.nodeName)},tv=function(t,e){return da(t)&&!1===$m(t,e,Fp)},ev=function(t,e,n){var r=new Ei(e,t.getParent(e.parentNode,t.isBlock)||t.getRoot());while(e=r[n?"prev":"next"]())if(to(e))return!0},nv=function(t,e){return t.previousSibling&&t.previousSibling.nodeName===e},rv=function(t,e){while(e&&e!==t){if(ro(e))return!0;e=e.parentNode}return!1},ov=function(t,e,n,r,o){var i,a,u=t.getRoot(),s=t.schema.getNonEmptyElements(),l=t.getParent(o.parentNode,t.isBlock)||u;if(r&&to(o)&&e&&t.isEmpty(l))return U.some(wf(o.parentNode,t.nodeIndex(o)));var c=new Ei(o,l);while(a=c[r?"prev":"next"]()){if("false"===t.getContentEditableParent(a)||tv(a,u))return U.none();if($r(a)&&a.nodeValue.length>0)return!1===Km(a,u,"A")?U.some(wf(a,r?a.nodeValue.length:0)):U.none();if(t.isBlock(a)||s[a.nodeName.toLowerCase()])return U.none();i=a}return n&&i?U.some(wf(i,0)):U.none()},iv=function(t,e,n,r){var o,i,a,u,s=t.getRoot(),l=!1;o=r[(n?"start":"end")+"Container"],i=r[(n?"start":"end")+"Offset"];var c=Hr(o)&&i===o.childNodes.length,f=t.schema.getNonEmptyElements();if(u=n,da(o))return U.none();if(Hr(o)&&i>o.childNodes.length-1&&(u=!1),Jr(o)&&(o=s,i=0),o===s){if(u&&(a=o.childNodes[i>0?i-1:0],a)){if(da(a))return U.none();if(f[a.nodeName]||Jm(a))return U.none()}if(o.hasChildNodes()){if(i=Math.min(!u&&i>0?i-1:i,o.childNodes.length-1),o=o.childNodes[i],i=$r(o)&&c?o.data.length:0,!e&&o===s.lastChild&&Jm(o))return U.none();if(rv(s,o)||da(o))return U.none();if(o.hasChildNodes()&&!1===Jm(o)){a=o;var d=new Ei(o,s);do{if(ro(a)||da(a)){l=!1;break}if($r(a)&&a.nodeValue.length>0){i=u?0:a.nodeValue.length,o=a,l=!0;break}if(f[a.nodeName.toLowerCase()]&&!Qm(a)){i=t.nodeIndex(a),o=a.parentNode,u||i++,l=!0;break}}while(a=u?d.next():d.prev())}}}return e&&($r(o)&&0===i&&ov(t,c,e,!0,o).each(function(t){o=t.container(),i=t.offset(),l=!0}),Hr(o)&&(a=o.childNodes[i],a||(a=o.childNodes[i-1]),!a||!to(a)||nv(a,"A")||ev(t,a,!1)||ev(t,a,!0)||ov(t,c,e,!0,a).each(function(t){o=t.container(),i=t.offset(),l=!0}))),u&&!e&&$r(o)&&i===o.nodeValue.length&&ov(t,c,e,!1,o).each(function(t){o=t.container(),i=t.offset(),l=!0}),l?U.some(wf(o,i)):U.none()},av=function(t,e){var n=e.collapsed,r=e.cloneRange(),o=wf.fromRangeStart(e);return iv(t,n,!0,r).each(function(t){n&&wf.isAbove(o,t)||r.setStart(t.container(),t.offset())}),n||iv(t,n,!1,r).each(function(t){r.setEnd(t.container(),t.offset())}),n&&r.collapse(!0),qm(e,r)?U.none():U.some(r)},uv=function(t,e){return t.splitText(e)},sv=function(t){var e=t.startContainer,n=t.startOffset,r=t.endContainer,o=t.endOffset;return e===r&&$r(e)?n>0&&n<e.nodeValue.length&&(r=uv(e,n),e=r.previousSibling,o>n?(o-=n,e=r=uv(r,o).previousSibling,o=r.nodeValue.length,n=0):o=0):($r(e)&&n>0&&n<e.nodeValue.length&&(e=uv(e,n),n=0),$r(r)&&o>0&&o<r.nodeValue.length&&(r=uv(r,o).previousSibling,o=r.nodeValue.length)),{startContainer:e,startOffset:n,endContainer:r,endOffset:o}},lv=function(t){var e=function(e,n){return Jg(t,e,n)},n=sv,r=function(e){return av(t,e).fold(z,function(t){return e.setStart(t.startContainer,t.startOffset),e.setEnd(t.endContainer,t.endOffset),!0})};return{walk:e,split:n,normalize:r}};lv.compareRanges=qm,lv.getCaretRangeFromPoint=Ym,lv.getSelectedNode=qc,lv.getNode=Zc;var cv,fv=function(t,e){var n=function(e,n){if(!T(n)&&!n.match(/^[0-9]+$/))throw new Error(t+".set accepts only positive integer values. Value was "+n);var r=e.dom;ao(r)&&(r.style[t]=n+"px")},r=function(n){var r=e(n);if(r<=0||null===r){var o=yo(n,t);return parseFloat(o)||0}return r},o=r,i=function(t,e){return rt(e,function(e,n){var r=yo(t,n),o=void 0===r?0:parseInt(r,10);return isNaN(o)?e:e+o},0)},a=function(t,e,n){var r=i(t,n),o=e>r?e-r:0;return o};return{set:n,get:r,getOuter:o,aggregate:i,max:a}},dv=fv("height",function(t){var e=t.dom;return Mr(t)?e.getBoundingClientRect().height:e.offsetHeight}),hv=function(t){return dv.get(t)},pv=function(t,e){var n=t.view(e);return n.fold(I([]),function(e){var n=t.owner(e),r=pv(t,n);return[e].concat(r)})},gv=function(t,e){var n=e.owner(t);return pv(e,n)},mv=function(t){var e,n=t.dom===document?U.none():U.from(null===(e=t.dom.defaultView)||void 0===e?void 0:e.frameElement);return n.map(yn.fromDom)},vv=function(t){return Gn(t)},yv=Object.freeze({__proto__:null,view:mv,owner:vv}),bv=function(t){var e=yn.fromDom(document),n=Lr(e),r=gv(t,yv),o=Or(t),i=nt(r,function(t,e){var n=Or(e);return{left:t.left+n.left,top:t.top+n.top}},{left:0,top:0});return kr(i.left+o.left+n.left,i.top+o.top+n.top)},xv=function(t){return"textarea"===Rn(t)},wv=function(t,e){var n=t.fire("ScrollIntoView",e);return n.isDefaultPrevented()},_v=function(t,e){t.fire("AfterScrollIntoView",e)},Sv=function(t,e){var n=tr(t);if(0===n.length||xv(t))return{element:t,offset:e};if(e<n.length&&!xv(n[e]))return{element:n[e],offset:0};var r=n[n.length-1];return xv(r)?{element:t,offset:e}:"img"===Rn(r)?{element:r,offset:1}:Hn(r)?{element:r,offset:vm(r).length}:{element:r,offset:tr(r).length}},Cv=function(t,e){var n=Ir(t),r=hv(t);return{element:t,bottom:n.top+r,height:r,pos:n,cleanup:e}},Mv=function(t,e){var n=Sv(t,e),r=yn.fromHtml('<span data-mce-bogus="all">'+ia+"</span>");return gr(n.element,r),Cv(r,function(){return Sr(r)})},Tv=function(t){return Cv(yn.fromDom(t),k)},kv=function(t,e,n,r){Ov(t,function(o,i){return Av(t,e,n,r)},n)},Dv=function(t,e,n,r,o){var i={elm:r.element.dom,alignToTop:o};if(!wv(t,i)){var a=Lr(e).top;n(e,a,r,o),_v(t,i)}},Av=function(t,e,n,r){var o=yn.fromDom(t.getBody()),i=yn.fromDom(t.getDoc());_o(o);var a=Mv(yn.fromDom(n.startContainer),n.startOffset);Dv(t,i,e,a,r),a.cleanup()},Iv=function(t,e,n,r){var o=yn.fromDom(t.getDoc());Dv(t,o,n,Tv(e),r)},Ov=function(t,e,n){var r=n.startContainer,o=n.startOffset,i=n.endContainer,a=n.endOffset;e(yn.fromDom(r),yn.fromDom(i));var u=t.dom.createRng();u.setStart(r,o),u.setEnd(i,a),t.selection.setRng(n)},Lv=function(t,e,n,r){var o=t.pos;if(n)Er(o.left,o.top,r);else{var i=o.top-e+t.height;Er(o.left,i,r)}},Ev=function(t,e,n,r,o){var i=n+e,a=r.pos.top,u=r.bottom,s=u-a>=n;if(a<e)Lv(r,n,!1!==o,t);else if(a>i){var l=s?!1!==o:!0===o;Lv(r,n,l,t)}else u>i&&!s&&Lv(r,n,!0===o,t)},Nv=function(t,e,n,r){var o=t.dom.defaultView.innerHeight;Ev(t,e,o,n,r)},Rv=function(t,e,n,r){var o=t.dom.defaultView.innerHeight;Ev(t,e,o,n,r);var i=bv(n.element),a=zr(window);i.top<a.y?Nr(n.element,!1!==r):i.top>a.bottom&&Nr(n.element,!0===r)},Pv=function(t,e,n){return kv(t,Nv,e,n)},zv=function(t,e,n){return Iv(t,e,Nv,n)},Bv=function(t,e,n){return kv(t,Rv,e,n)},Vv=function(t,e,n){return Iv(t,e,Rv,n)},Hv=function(t,e,n){var r=t.inline?zv:Vv;r(t,e,n)},Fv=function(t,e,n){var r=t.inline?Pv:Bv;r(t,e,n)},Wv=function(){return yn.fromDom(document)},Uv=function(t){return t.dom.focus()},Gv=function(t){var e=lr(t).dom;return t.dom===e.activeElement},jv=function(t){return void 0===t&&(t=Wv()),U.from(t.dom.activeElement).map(yn.fromDom)},Xv=function(t){return jv(lr(t)).filter(function(e){return t.dom.contains(e.dom)})},Yv=function(t,e,n,r){return{start:t,soffset:e,finish:n,foffset:r}},qv={create:Yv},Zv=Xo.generate([{before:["element"]},{on:["element","offset"]},{after:["element"]}]),$v=function(t,e,n,r){return t.fold(e,n,r)},Kv=function(t){return t.fold(O,O,O)},Jv=Zv.before,Qv=Zv.on,ty=Zv.after,ey={before:Jv,on:Qv,after:ty,cata:$v,getStart:Kv},ny=Xo.generate([{domRange:["rng"]},{relative:["startSitu","finishSitu"]},{exact:["start","soffset","finish","foffset"]}]),ry=function(t){return ny.exact(t.start,t.soffset,t.finish,t.foffset)},oy=function(t){return t.match({domRange:function(t){return yn.fromDom(t.startContainer)},relative:function(t,e){return ey.getStart(t)},exact:function(t,e,n,r){return t}})},iy=ny.domRange,ay=ny.relative,uy=ny.exact,sy=function(t){var e=oy(t);return Xn(e)},ly=qv.create,cy={domRange:iy,relative:ay,exact:uy,exactFromRange:ry,getWin:sy,range:ly},fy=Ue().browser,dy=function(t,e){var n=Hn(e)?vm(e).length:tr(e).length+1;return t>n?n:t<0?0:t},hy=function(t){return cy.range(t.start,dy(t.soffset,t.start),t.finish,dy(t.foffset,t.finish))},py=function(t,e){return!Vr(e.dom)&&(Nn(t,e)||On(t,e))},gy=function(t){return function(e){return py(t,e.start)&&py(t,e.finish)}},my=function(t){return!0===t.inline||fy.isIE()},vy=function(t){return cy.range(yn.fromDom(t.startContainer),t.startOffset,yn.fromDom(t.endContainer),t.endOffset)},yy=function(t){var e=t.getSelection(),n=e&&0!==e.rangeCount?U.from(e.getRangeAt(0)):U.none();return n.map(vy)},by=function(t){var e=Xn(t);return yy(e.dom).filter(gy(t))},xy=function(t,e){return U.from(e).filter(gy(t)).map(hy)},wy=function(t){var e=document.createRange();try{return e.setStart(t.start.dom,t.soffset),e.setEnd(t.finish.dom,t.foffset),U.some(e)}catch(n){return U.none()}},_y=function(t){var e=my(t)?by(yn.fromDom(t.getBody())):U.none();t.bookmark=e.isSome()?e:t.bookmark},Sy=function(t,e){var n=yn.fromDom(t.getBody()),r=my(t)?U.from(e):U.none(),o=r.map(vy).filter(gy(n));t.bookmark=o.isSome()?o:t.bookmark},Cy=function(t){var e=t.bookmark?t.bookmark:U.none();return e.bind(function(e){return xy(yn.fromDom(t.getBody()),e)}).bind(wy)},My=function(t){Cy(t).each(function(e){return t.selection.setRng(e)})},Ty=function(t){var e=t.className.toString();return-1!==e.indexOf("tox-")||-1!==e.indexOf("mce-")},ky={isEditorUIElement:Ty},Dy=function(t){return"nodechange"===t.type&&t.selectionChange},Ay=function(t,e){var n=function(){e.throttle()};Il.DOM.bind(document,"mouseup",n),t.on("remove",function(){Il.DOM.unbind(document,"mouseup",n)})},Iy=function(t){t.on("focusout",function(){_y(t)})},Oy=function(t,e){t.on("mouseup touchend",function(t){e.throttle()})},Ly=function(t,e){var n=Ue().browser;n.isIE()?Iy(t):Oy(t,e),t.on("keyup NodeChange",function(e){Dy(e)||_y(t)})},Ey=function(t){var e=tc(function(){_y(t)},0);t.on("init",function(){t.inline&&Ay(t,e),Ly(t,e)}),t.on("remove",function(){e.cancel()})},Ny=Il.DOM,Ry=function(t){return ky.isEditorUIElement(t)},Py=function(t){var e=t.classList;return void 0!==e&&(e.contains("tox-edit-area")||e.contains("tox-edit-area__iframe")||e.contains("mce-content-body"))},zy=function(t,e){var n=Jd(t),r=Ny.getParent(e,function(e){return Ry(e)||!!n&&t.dom.is(e,n)});return null!==r},By=function(t){try{var e=lr(yn.fromDom(t.getElement()));return jv(e).fold(function(){return document.body},function(t){return t.dom})}catch(n){return document.body}},Vy=function(t,e){var n=e.editor;Ey(n),n.on("focusin",function(){var e=t.focusedEditor;e!==n&&(e&&e.fire("blur",{focusedEditor:n}),t.setActive(n),t.focusedEditor=n,n.fire("focus",{blurredEditor:e}),n.focus(!0))}),n.on("focusout",function(){Ai.setEditorTimeout(n,function(){var e=t.focusedEditor;zy(n,By(n))||e!==n||(n.fire("blur",{focusedEditor:null}),t.focusedEditor=null)})}),cv||(cv=function(e){var n=t.activeEditor;n&&hr(e).each(function(e){e.ownerDocument===document&&(e===document.body||zy(n,e)||t.focusedEditor!==n||(n.fire("blur",{focusedEditor:null}),t.focusedEditor=null))})},Ny.bind(document,"focusin",cv))},Hy=function(t,e){t.focusedEditor===e.editor&&(t.focusedEditor=null),t.activeEditor||(Ny.unbind(document,"focusin",cv),cv=null)},Fy=function(t){t.on("AddEditor",L(Vy,t)),t.on("RemoveEditor",L(Hy,t))},Wy=function(t,e){return t.dom.getParent(e,function(e){return"true"===t.dom.getContentEditable(e)})},Uy=function(t){return t.collapsed?U.from(Zc(t.startContainer,t.startOffset)).map(yn.fromDom):U.none()},Gy=function(t,e){return Uy(e).bind(function(e){return Ki(e)?U.some(e):!1===Nn(t,e)?U.some(t):U.none()})},jy=function(t,e){Gy(yn.fromDom(t.getBody()),e).bind(function(t){return Bp(t.dom)}).fold(function(){t.selection.normalize()},function(e){return t.selection.setRng(e.toRange())})},Xy=function(t){if(t.setActive)try{t.setActive()}catch(e){t.focus()}else t.focus()},Yy=function(t){return Gv(t)||Xv(t).isSome()},qy=function(t){return t.iframeElement&&Gv(yn.fromDom(t.iframeElement))},Zy=function(t){var e=t.getBody();return e&&Yy(yn.fromDom(e))},$y=function(t){var e=lr(yn.fromDom(t.getElement()));return jv(e).filter(function(e){return!Py(e.dom)&&zy(t,e.dom)}).isSome()},Ky=function(t){return t.inline?Zy(t):qy(t)},Jy=function(t){return Ky(t)||$y(t)},Qy=function(t){var e=t.selection,n=t.getBody(),r=e.getRng();t.quirks.refreshContentEditable(),void 0!==t.bookmark&&!1===Ky(t)&&Cy(t).each(function(e){t.selection.setRng(e),r=e});var o=Wy(t,e.getNode());if(t.$.contains(n,o))return Xy(o),jy(t,r),void tb(t);t.inline||(Je.opera||Xy(n),t.getWin().focus()),(Je.gecko||t.inline)&&(Xy(n),jy(t,r)),tb(t)},tb=function(t){return t.editorManager.setActive(t)},eb=function(t,e){t.removed||(e?tb(t):Qy(t))},nb=function(t,e,n,r,o){var i=n?e.startContainer:e.endContainer,a=n?e.startOffset:e.endOffset;return U.from(i).map(yn.fromDom).map(function(t){return r&&e.collapsed?t:er(t,o(t,a)).getOr(t)}).bind(function(t){return Vn(t)?U.some(t):Yn(t).filter(Vn)}).map(function(t){return t.dom}).getOr(t)},rb=function(t,e,n){return nb(t,e,!0,n,function(t,e){return Math.min(or(t),e)})},ob=function(t,e,n){return nb(t,e,!1,n,function(t,e){return e>0?e-1:e})},ib=function(t,e){var n=t;while(t&&$r(t)&&0===t.length)t=e?t.nextSibling:t.previousSibling;return t||n},ab=function(t,e){var n,r,o;if(!e)return t;r=e.startContainer,o=e.endContainer;var i=e.startOffset,a=e.endOffset;return n=e.commonAncestorContainer,!e.collapsed&&(r===o&&a-i<2&&r.hasChildNodes()&&(n=r.childNodes[i]),3===r.nodeType&&3===o.nodeType&&(r=r.length===i?ib(r.nextSibling,!0):r.parentNode,o=0===a?ib(o.previousSibling,!1):o.parentNode,r&&r===o))?r:n&&3===n.nodeType?n.parentNode:n},ub=function(t,e,n,r){var o,i=[],a=t.getRoot();if(n=t.getParent(n||rb(a,e,e.collapsed),t.isBlock),r=t.getParent(r||ob(a,e,e.collapsed),t.isBlock),n&&n!==a&&i.push(n),n&&r&&n!==r){o=n;var u=new Ei(n,a);while((o=u.next())&&o!==r)t.isBlock(o)&&i.push(o)}return r&&n!==r&&r!==a&&i.push(r),i},sb=function(t,e,n){return U.from(e).map(function(e){var r=t.nodeIndex(e),o=t.createRng();return o.setStart(e.parentNode,r),o.setEnd(e.parentNode,r+1),n&&(fm(t,o,e,!0),fm(t,o,e,!1)),o})},lb=function(t,e){return K(e,function(e){var n=t.fire("GetSelectionRange",{range:e});return n.range!==e?n.range:e})},cb={"#text":3,"#comment":8,"#cdata":4,"#pi":7,"#doctype":10,"#document-fragment":11},fb=function(t,e,n){var r=n?"lastChild":"firstChild",o=n?"prev":"next";if(t[r])return t[r];if(t!==e){var i=t[o];if(i)return i;for(var a=t.parent;a&&a!==e;a=a.parent)if(i=a[o],i)return i}},db=function(t){if(!Ha(t.value))return!1;var e=t.parent;return!e||"span"===e.name&&!e.attr("style")||!/^[ ]+$/.test(t.value)},hb=function(t){var e="a"===t.name&&!t.attr("href")&&t.attr("id");return t.attr("name")||t.attr("id")&&!t.firstChild||t.attr("data-mce-bookmark")||e},pb=function(){function t(t,e){this.name=t,this.type=e,1===e&&(this.attributes=[],this.attributes.map={})}return t.create=function(e,n){var r=new t(e,cb[e]||1);return n&&wt(n,function(t,e){r.attr(e,t)}),r},t.prototype.replace=function(t){var e=this;return t.parent&&t.remove(),e.insert(t,e),e.remove(),e},t.prototype.attr=function(t,e){var n,r=this;if("string"!==typeof t)return void 0!==t&&null!==t&&wt(t,function(t,e){r.attr(e,t)}),r;if(n=r.attributes){if(void 0!==e){if(null===e){if(t in n.map){delete n.map[t];var o=n.length;while(o--)if(n[o].name===t)return n.splice(o,1),r}return r}if(t in n.map){o=n.length;while(o--)if(n[o].name===t){n[o].value=e;break}}else n.push({name:t,value:e});return n.map[t]=e,r}return n.map[t]}},t.prototype.clone=function(){var e,n=this,r=new t(n.name,n.type);if(e=n.attributes){var o=[];o.map={};for(var i=0,a=e.length;i<a;i++){var u=e[i];"id"!==u.name&&(o[o.length]={name:u.name,value:u.value},o.map[u.name]=u.value)}r.attributes=o}return r.value=n.value,r.shortEnded=n.shortEnded,r},t.prototype.wrap=function(t){var e=this;return e.parent.insert(t,e),t.append(e),e},t.prototype.unwrap=function(){for(var t=this,e=t.firstChild;e;){var n=e.next;t.insert(e,t,!0),e=n}t.remove()},t.prototype.remove=function(){var t=this,e=t.parent,n=t.next,r=t.prev;return e&&(e.firstChild===t?(e.firstChild=n,n&&(n.prev=null)):r.next=n,e.lastChild===t?(e.lastChild=r,r&&(r.next=null)):n.prev=r,t.parent=t.next=t.prev=null),t},t.prototype.append=function(t){var e=this;t.parent&&t.remove();var n=e.lastChild;return n?(n.next=t,t.prev=n,e.lastChild=t):e.lastChild=e.firstChild=t,t.parent=e,t},t.prototype.insert=function(t,e,n){t.parent&&t.remove();var r=e.parent||this;return n?(e===r.firstChild?r.firstChild=t:e.prev.next=t,t.prev=e.prev,t.next=e,e.prev=t):(e===r.lastChild?r.lastChild=t:e.next.prev=t,t.next=e.next,t.prev=e,e.next=t),t.parent=r,t},t.prototype.getAll=function(t){for(var e=this,n=[],r=e.firstChild;r;r=fb(r,e))r.name===t&&n.push(r);return n},t.prototype.empty=function(){var t=this;if(t.firstChild){for(var e=[],n=t.firstChild;n;n=fb(n,t))e.push(n);var r=e.length;while(r--){n=e[r];n.parent=n.firstChild=n.lastChild=n.next=n.prev=null}}return t.firstChild=t.lastChild=null,t},t.prototype.isEmpty=function(t,e,n){void 0===e&&(e={});var r=this,o=r.firstChild;if(hb(r))return!1;if(o)do{if(1===o.type){if(o.attr("data-mce-bogus"))continue;if(t[o.name])return!1;if(hb(o))return!1}if(8===o.type)return!1;if(3===o.type&&!db(o))return!1;if(3===o.type&&o.parent&&e[o.parent.name]&&Ha(o.value))return!1;if(n&&n(o))return!1}while(o=fb(o,r));return!0},t.prototype.walk=function(t){return fb(this,null,t)},t}(),gb=function(t){var e,n=/data:[^;]+;base64,([a-z0-9\+\/=]+)/gi,r=[],o={},i=Tc("img"),a=0,u=0;while(e=n.exec(t)){var s=e[0],l=i+"_"+u++;o[l]=s,a<e.index&&r.push(t.substr(a,e.index-a)),r.push(l),a=e.index+s.length}var c=new RegExp(i+"_[0-9]+","g");return 0===a?{prefix:i,uris:o,html:t,re:c}:(a<t.length&&r.push(t.substr(a)),{prefix:i,uris:o,html:r.join(""),re:c})},mb=function(t,e){return t.replace(e.re,function(t){return It(e.uris,t).getOr(t)})},vb=function(t){var e=/data:([^;]+);base64,([a-z0-9\+\/=]+)/i.exec(t);return e?U.some({type:e[1],data:decodeURIComponent(e[2])}):U.none()},yb=["img","video"],bb=function(t){return 0===t.indexOf("data-")||0===t.indexOf("aria-")},xb=function(t,e){var n=S(t)?Z(yb,e):t;return!n},wb=function(t,e,n){return!t.allow_html_data_urls&&(/^data:image\//i.test(e)?xb(t.allow_svg_data_urls,n)&&/^data:image\/svg\+xml/i.test(e):/^data:/i.test(e))},_b=function(t,e,n){var r,o,i=1,a=t.getShortEndedElements(),u=/<([!?\/])?([A-Za-z0-9\-_:.]+)(\s(?:[^'">]+(?:"[^"]*"|'[^']*'))*[^"'>]*(?:"[^">]*|'[^'>]*)?|\s*|\/)>/g;u.lastIndex=r=n;while(o=u.exec(e)){if(r=u.lastIndex,"/"===o[1])i--;else if(!o[1]){if(o[2]in a)continue;i++}if(0===i)break}return r},Sb=function(t,e){return/^\s*\[if [\w\W]+\]>.*<!\[endif\](--!?)?>/.test(t.substr(e))},Cb=function(t,e,n){void 0===n&&(n=0);var r=t.toLowerCase();if(-1!==r.indexOf("[if ",n)&&Sb(r,n)){var o=r.indexOf("[endif]",n);return r.indexOf(">",o)}if(e){var i=r.indexOf(">",n);return-1!==i?i:r.length}var a=/--!?>/g;a.lastIndex=n;var u=a.exec(t);return u?u.index+u[0].length:r.length},Mb=function(t,e){var n=t.exec(e);if(n){var r=n[1],o=n[2];return"string"===typeof r&&"data-mce-bogus"===r.toLowerCase()?o:null}return null},Tb=function(t,e){void 0===e&&(e=Lu()),t=t||{},!1!==t.fix_self_closing&&(t.fix_self_closing=!0);var n=t.comment?t.comment:k,r=t.cdata?t.cdata:k,o=t.text?t.text:k,i=t.start?t.start:k,a=t.end?t.end:k,u=t.pi?t.pi:k,s=t.doctype?t.doctype:k,l=function(l,c){void 0===c&&(c="html");var f,d,h,p,g,m,v,y,b,x,w,_,S,C,M,T,k,D,A,I,O=l.html,L=0,E=[],N=0,R=wu.decode,P=dn.makeMap("src,href,data,background,action,formaction,poster,xlink:href"),z=/((java|vb)script|mhtml):/i,B="html"===c?0:1,V=function(t){var e,n;e=E.length;while(e--)if(E[e].name===t)break;if(e>=0){for(n=E.length-1;n>=e;n--)t=E[n],t.valid&&a(t.name);E.length=e}},H=function(t,e){return o(mb(t,l),e)},F=function(e){""!==e&&(">"===e.charAt(0)&&(e=" "+e),t.allow_conditional_comments||"[if"!==e.substr(0,3).toLowerCase()||(e=" "+e),n(mb(e,l)))},W=function(t){return mb(t,l)},U=function(t,e){var n=t||"",r=!se(n,"--"),o=Cb(O,r,e);return t=O.substr(e,o-e),F(r?n+t:t),o+1},G=function(e,n,r,o,i){var a,u,s=/[\s\u0000-\u001F]+/g;if(n=n.toLowerCase(),r=W(n in Z?n:R(r||o||i||"")),$&&!y&&!1===bb(n)){if(a=C[n],!a&&M){u=M.length;while(u--)if(a=M[u],a.pattern.test(n))break;-1===u&&(a=null)}if(!a)return;if(a.validValues&&!(r in a.validValues))return}if(P[n]&&!t.allow_script_urls){var l=r.replace(s,"");try{l=decodeURIComponent(l)}catch(c){l=unescape(l)}if(z.test(l))return;if(wb(t,l,e))return}y&&(n in P||0===n.indexOf("on"))||(p.map[n]=r,p.push({name:n,value:r}))},j=new RegExp("<(?:(?:!--([\\w\\W]*?)--!?>)|(?:!\\[CDATA\\[([\\w\\W]*?)\\]\\]>)|(?:![Dd][Oo][Cc][Tt][Yy][Pp][Ee]([\\w\\W]*?)>)|(?:!(--)?)|(?:\\?([^\\s\\/<>]+) ?([\\w\\W]*?)[?/]>)|(?:\\/([A-Za-z][A-Za-z0-9\\-_\\:\\.]*)>)|(?:([A-Za-z][A-Za-z0-9\\-_:.]*)(\\s(?:[^'\">]+(?:\"[^\"]*\"|'[^']*'))*[^\"'>]*(?:\"[^\">]*|'[^'>]*)?|\\s*|\\/)>))","g"),X=/([\w:\-]+)(?:\s*=\s*(?:(?:\"((?:[^\"])*)\")|(?:\'((?:[^\'])*)\')|([^>\s]+)))?/g,Y=e.getShortEndedElements(),q=t.self_closing_elements||e.getSelfClosingElements(),Z=e.getBoolAttrs(),$=t.validate,K=t.remove_internals,J=t.fix_self_closing,Q=e.getSpecialElements(),tt=O+">";while(f=j.exec(tt)){var et=f[0];if(L<f.index&&H(R(O.substr(L,f.index-L))),d=f[7])d=d.toLowerCase(),":"===d.charAt(0)&&(d=d.substr(1)),V(d);else if(d=f[8]){if(f.index+et.length>O.length){H(R(O.substr(f.index))),L=f.index+et.length;continue}d=d.toLowerCase(),":"===d.charAt(0)&&(d=d.substr(1)),b=d in Y,J&&q[d]&&E.length>0&&E[E.length-1].name===d&&V(d);var nt=Mb(X,f[9]);if(null!==nt){if("all"===nt){L=_b(e,O,j.lastIndex),j.lastIndex=L;continue}w=!1}if(!$||(x=e.getElementRule(d))){if(w=!0,$&&(C=x.attributes,M=x.attributePatterns),(S=f[9])?(y=-1!==S.indexOf("data-mce-type"),y&&K&&(w=!1),p=[],p.map={},S.replace(X,function(t,e,n,r,o){return G(d,e,n,r,o),""})):(p=[],p.map={}),$&&!y){if(T=x.attributesRequired,k=x.attributesDefault,D=x.attributesForced,A=x.removeEmptyAttrs,A&&!p.length&&(w=!1),D){g=D.length;while(g--)_=D[g],v=_.name,I=_.value,"{$uid}"===I&&(I="mce_"+N++),p.map[v]=I,p.push({name:v,value:I})}if(k){g=k.length;while(g--)_=k[g],v=_.name,v in p.map||(I=_.value,"{$uid}"===I&&(I="mce_"+N++),p.map[v]=I,p.push({name:v,value:I}))}if(T){g=T.length;while(g--)if(T[g]in p.map)break;-1===g&&(w=!1)}if(_=p.map["data-mce-bogus"]){if("all"===_){L=_b(e,O,j.lastIndex),j.lastIndex=L;continue}w=!1}}w&&i(d,p,b)}else w=!1;if(h=Q[d]){h.lastIndex=L=f.index+et.length,(f=h.exec(O))?(w&&(m=O.substr(L,f.index-L)),L=f.index+f[0].length):(m=O.substr(L),L=O.length),w&&(m.length>0&&H(m,!0),a(d)),j.lastIndex=L;continue}b||(S&&S.indexOf("/")===S.length-1?w&&a(d):E.push({name:d,valid:w}))}else if(d=f[1])F(d);else if(d=f[2]){var rt=1===B||t.preserve_cdata||E.length>0&&e.isValidChild(E[E.length-1].name,"#cdata");if(!rt){L=U("",f.index+2),j.lastIndex=L;continue}r(d)}else if(d=f[3])s(d);else{if((d=f[4])||"<!"===et){L=U(d,f.index+et.length),j.lastIndex=L;continue}if(d=f[5]){if(1!==B){L=U("?",f.index+2),j.lastIndex=L;continue}u(d,f[6])}}L=f.index+et.length}for(L<O.length&&H(R(O.substr(L))),g=E.length-1;g>=0;g--)d=E[g],d.valid&&a(d.name)},c=function(t,e){void 0===e&&(e="html"),l(gb(t),e)};return{parse:c}};Tb.findEndTag=_b;var kb=function(t,e){var n=new RegExp(["\\s?("+t.join("|")+')="[^"]+"'].join("|"),"gi");return e.replace(n,"")},Db=function(t,e){var n,r,o,i,a=e,u=/<(\w+) [^>]*data-mce-bogus="all"[^>]*>/g,s=t.schema;a=kb(t.getTempAttrs(),a);var l=s.getShortEndedElements();while(i=u.exec(a))r=u.lastIndex,o=i[0].length,n=l[i[1]]?r:Tb.findEndTag(s,a,r),a=a.substring(0,r-o)+a.substring(n),u.lastIndex=r-o;return ua(a)},Ab=Db,Ib=function(t,e){var n=hd(t),r=new RegExp("^(<"+n+"[^>]*>(&nbsp;|&#160;|\\s| |<br \\/>|)<\\/"+n+">[\r\n]*|<br \\/>[\r\n]*)$");return e.replace(r,"")},Ob=function(t,e,n,r){var o;return e.format=n,e.get=!0,e.getInner=!0,e.no_events||t.fire("BeforeGetContent",e),o="raw"===e.format?dn.trim(Ab(t.serializer,r.innerHTML)):"text"===e.format?t.dom.isEmpty(r)?"":ua(r.innerText||r.textContent):"tree"===e.format?t.serializer.serialize(r,e):Ib(t,t.serializer.serialize(r,e)),Z(["text","tree"],e.format)||Qi(yn.fromDom(r))?e.content=o:e.content=dn.trim(o),e.no_events||t.fire("GetContent",e),e.content},Lb=function(t,e,n){return U.from(t.getBody()).fold(I("tree"===e.format?new pb("body",11):""),function(r){return Ob(t,e,n,r)})},Eb=dn.each,Nb=function(t){var e=function(e,n){if(e.nodeName!==n.nodeName)return!1;var r=function(e){var n={};return Eb(t.getAttribs(e),function(r){var o=r.nodeName.toLowerCase();0!==o.indexOf("_")&&"style"!==o&&0!==o.indexOf("data-")&&(n[o]=t.getAttrib(e,o))}),n},o=function(t,e){var n,r;for(r in t)if(t.hasOwnProperty(r)){if(n=e[r],"undefined"===typeof n)return!1;if(t[r]!==n)return!1;delete e[r]}for(r in e)if(e.hasOwnProperty(r))return!1;return!0};return!!o(r(e),r(n))&&(!!o(t.parseStyle(t.getAttrib(e,"style")),t.parseStyle(t.getAttrib(n,"style")))&&(!lg(e)&&!lg(n)))};return{compare:e}},Rb=dn.makeMap,Pb=function(t){var e=[];t=t||{};var n=t.indent,r=Rb(t.indent_before||""),o=Rb(t.indent_after||""),i=wu.getEncodeFunc(t.entity_encoding||"raw",t.entities),a="html"===t.element_format;return{start:function(t,u,s){var l,c,f,d;if(n&&r[t]&&e.length>0&&(d=e[e.length-1],d.length>0&&"\n"!==d&&e.push("\n")),e.push("<",t),u)for(l=0,c=u.length;l<c;l++)f=u[l],e.push(" ",f.name,'="',i(f.value,!0),'"');e[e.length]=!s||a?">":" />",s&&n&&o[t]&&e.length>0&&(d=e[e.length-1],d.length>0&&"\n"!==d&&e.push("\n"))},end:function(t){var r;e.push("</",t,">"),n&&o[t]&&e.length>0&&(r=e[e.length-1],r.length>0&&"\n"!==r&&e.push("\n"))},text:function(t,n){t.length>0&&(e[e.length]=n?t:i(t))},cdata:function(t){e.push("<![CDATA[",t,"]]>")},comment:function(t){e.push("\x3c!--",t,"--\x3e")},pi:function(t,r){r?e.push("<?",t," ",i(r),"?>"):e.push("<?",t,"?>"),n&&e.push("\n")},doctype:function(t){e.push("<!DOCTYPE",t,">",n?"\n":"")},reset:function(){e.length=0},getContent:function(){return e.join("").replace(/\n$/,"")}}},zb=function(t,e){void 0===e&&(e=Lu());var n=Pb(t);t=t||{},t.validate=!("validate"in t)||t.validate;var r=function(r){var o=t.validate,i={3:function(t){n.text(t.value,t.raw)},8:function(t){n.comment(t.value)},7:function(t){n.pi(t.name,t.value)},10:function(t){n.doctype(t.value)},4:function(t){n.cdata(t.value)},11:function(t){if(t=t.firstChild)do{a(t)}while(t=t.next)}};n.reset();var a=function(t){var r,u,s,l,c,f,d,h,p,g=i[t.type];if(g)g(t);else{if(r=t.name,u=t.shortEnded,s=t.attributes,o&&s&&s.length>1&&(f=[],f.map={},p=e.getElementRule(t.name),p)){for(d=0,h=p.attributesOrder.length;d<h;d++)l=p.attributesOrder[d],l in s.map&&(c=s.map[l],f.map[l]=c,f.push({name:l,value:c}));for(d=0,h=s.length;d<h;d++)l=s[d].name,l in f.map||(c=s.map[l],f.map[l]=c,f.push({name:l,value:c}));s=f}if(n.start(t.name,s,u),!u){if(t=t.firstChild)do{a(t)}while(t=t.next);n.end(r)}}};return 1!==r.type||t.inner?i[11](r):a(r),n.getContent()};return{serialize:r}},Bb=new Set;(function(){var t=["margin","margin-left","margin-right","margin-top","margin-bottom","padding","padding-left","padding-right","padding-top","padding-bottom","border","border-width","border-style","border-color","background","background-attachment","background-clip","background-color","background-image","background-origin","background-position","background-repeat","background-size","float","position","left","right","top","bottom","z-index","display","transform","width","max-width","min-width","height","max-height","min-height","overflow","overflow-x","overflow-y","text-overflow","vertical-align","transition","transition-delay","transition-duration","transition-property","transition-timing-function"];J(t,function(t){Bb.add(t)})})();var Vb=["font","text-decoration","text-emphasis"],Hb=function(t,e){return bt(t.parseStyle(t.getAttrib(e,"style")))},Fb=function(t){return Bb.has(t)},Wb=function(t,e){return lt(Hb(t,e),function(t){return!Fb(t)})},Ub=function(t){return et(t,function(t){return $(Vb,function(e){return se(t,e)})})},Gb=function(t,e,n){var r=Hb(t,e),o=Hb(t,n),i=function(r){var o=t.getStyle(e,r),i=t.getStyle(n,r);return he(o)&&he(i)&&o!==i};return $(r,function(t){var e=function(e){return $(e,function(e){return e===t})};if(!e(o)&&e(Vb)){var n=Ub(o);return $(n,i)}return i(t)})},jb=function(t,e,n){return U.from(n.container()).filter($r).exists(function(r){var o=t?0:-1;return e(r.data.charAt(n.offset()+o))})},Xb=L(jb,!0,dg),Yb=L(jb,!1,dg),qb=function(t){var e=t.container();return $r(e)&&(0===e.data.length||aa(e.data)&&Mm.isBookmarkNode(e.parentNode))},Zb=function(t,e){return function(n){return U.from(Qh(t?0:-1,n)).filter(e).isSome()}},$b=function(t){return eo(t)&&"block"===yo(yn.fromDom(t),"display")},Kb=function(t){return ro(t)&&!Xr(t)},Jb=Zb(!0,$b),Qb=Zb(!1,$b),tx=Zb(!0,io),ex=Zb(!1,io),nx=Zb(!0,Yr),rx=Zb(!1,Yr),ox=Zb(!0,Kb),ix=Zb(!1,Kb),ax=function(t){var e=[],n=t.dom;while(n)e.push(yn.fromDom(n)),n=n.lastChild;return e},ux=function(t){var e=pc(t,"br"),n=et(ax(t).slice(-1),Yi);e.length===n.length&&J(n,Sr)},sx=function(t){_r(t),yr(t,yn.fromHtml('<br data-mce-bogus="1">'))},lx=function(t){rr(t).each(function(e){$n(e).each(function(n){Gi(t)&&Yi(e)&&Gi(n)&&Sr(e)})})},cx=function(t){return t.slice(0,-1)},fx=function(t,e,n){return Nn(e,t)?cx(qn(t,function(t){return n(t)||On(t,e)})):[]},dx=function(t,e){return fx(t,e,z)},hx=function(t,e){return[t].concat(dx(t,e))},px=function(t,e,n){return Np(t,e,n,qb)},gx=function(t,e){return it(hx(yn.fromDom(e.container()),t),Gi)},mx=function(t,e,n){return px(t,e.dom,n).forall(function(t){return gx(e,n).fold(function(){return!1===Jh(t,n,e.dom)},function(r){return!1===Jh(t,n,e.dom)&&Nn(r,yn.fromDom(t.container()))})})},vx=function(t,e,n){return gx(e,n).fold(function(){return px(t,e.dom,n).forall(function(t){return!1===Jh(t,n,e.dom)})},function(e){return px(t,e.dom,n).isNone()})},yx=L(vx,!1),bx=L(vx,!0),xx=L(mx,!1),wx=L(mx,!0),_x=function(t){return sp(t).exists(Yi)},Sx=function(t,e,n){var r=et(hx(yn.fromDom(n.container()),e),Gi),o=gt(r).getOr(e);return Lp(t,o.dom,n).filter(_x)},Cx=function(t,e){return sp(e).exists(Yi)||Sx(!0,t,e).isSome()},Mx=function(t,e){return lp(e).exists(Yi)||Sx(!1,t,e).isSome()},Tx=L(Sx,!1),kx=L(Sx,!0),Dx=function(t){return wf.isTextPosition(t)&&!t.isAtStart()&&!t.isAtEnd()},Ax=function(t,e){var n=et(hx(yn.fromDom(e.container()),t),Gi);return gt(n).getOr(t)},Ix=function(t,e){return Dx(e)?Yb(e):Yb(e)||zp(Ax(t,e).dom,e).exists(Yb)},Ox=function(t,e){return Dx(e)?Xb(e):Xb(e)||Pp(Ax(t,e).dom,e).exists(Xb)},Lx=function(t){return Z(["pre","pre-wrap"],t)},Ex=function(t){return sp(t).bind(function(t){return gi(t,Vn)}).exists(function(t){return Lx(yo(t,"white-space"))})},Nx=function(t,e){return zp(t.dom,e).isNone()},Rx=function(t,e){return Pp(t.dom,e).isNone()},Px=function(t,e){return Nx(t,e)||Rx(t,e)||yx(t,e)||bx(t,e)||Mx(t,e)||Cx(t,e)},zx=function(t,e){return!Ex(e)&&(Px(t,e)||Ix(t,e)||Ox(t,e))},Bx=function(t,e){return!Ex(e)&&(yx(t,e)||xx(t,e)||Mx(t,e)||Ix(t,e))},Vx=function(t){var e=t.container(),n=t.offset();return $r(e)&&n<e.data.length?wf(e,n+1):t},Hx=function(t,e){return!Ex(e)&&(bx(t,e)||wx(t,e)||Cx(t,e)||Ox(t,e))},Fx=function(t,e){return Bx(t,e)||Hx(t,Vx(e))},Wx=function(t,e){return fg(t.charAt(e))},Ux=function(t){var e=t.container();return $r(e)&&ue(e.data,na)},Gx=function(t){var e=t.split("");return K(e,function(t,n){return fg(t)&&n>0&&n<e.length-1&&hg(e[n-1])&&hg(e[n+1])?" ":t}).join("")},jx=function(t,e){var n=e.data,r=wf(e,0);return!(!Wx(n,0)||Fx(t,r))&&(e.data=" "+n.slice(1),!0)},Xx=function(t){var e=t.data,n=Gx(e);return n!==e&&(t.data=n,!0)},Yx=function(t,e){var n=e.data,r=wf(e,n.length-1);return!(!Wx(n,n.length-1)||Fx(t,r))&&(e.data=n.slice(0,-1)+" ",!0)},qx=function(t,e){return U.some(e).filter(Ux).bind(function(e){var n=e.container(),r=jx(t,n)||Xx(n)||Yx(t,n);return r?U.some(e):U.none()})},Zx=function(t){var e=yn.fromDom(t.getBody());t.selection.isCollapsed()&&qx(e,wf.fromRangeStart(t.selection.getRng())).each(function(e){t.selection.setRng(e.toRange())})},$x=function(t,e,n){var r=rt(t,function(r,o){return dg(o)||fg(o)?r.previousCharIsSpace||""===r.str&&e||r.str.length===t.length-1&&n?{previousCharIsSpace:!1,str:r.str+na}:{previousCharIsSpace:!0,str:r.str+" "}:{previousCharIsSpace:!1,str:r.str+o}},{previousCharIsSpace:!1,str:""});return r.str},Kx=function(t,e,n){if(0!==n){var r=yn.fromDom(t),o=pi(r,Gi).getOr(r),i=t.data.slice(e,e+n),a=e+n>=t.data.length&&Hx(o,wf(t,t.data.length)),u=0===e&&Bx(o,wf(t,0));t.replaceData(e,n,$x(i,u,a))}},Jx=function(t,e){var n=t.data.slice(e),r=n.length-fe(n).length;return Kx(t,e,r)},Qx=function(t,e){var n=t.data.slice(0,e),r=n.length-de(n).length;return Kx(t,e-r,r)},tw=function(t,e,n,r){void 0===r&&(r=!0);var o=de(t.data).length,i=r?t:e,a=r?e:t;return r?i.appendData(a.data):i.insertData(0,a.data),Sr(yn.fromDom(a)),n&&Jx(i,o),i},ew=function(t,e){var n=t.container(),r=t.offset();return!1===wf.isTextPosition(t)&&n===e.parentNode&&r>wf.before(e).offset()},nw=function(t,e){return ew(e,t)?wf(e.container(),e.offset()-1):e},rw=function(t){return $r(t)?wf(t,0):wf.before(t)},ow=function(t){return $r(t)?wf(t,t.data.length):wf.after(t)},iw=function(t){return La(t.previousSibling)?U.some(ow(t.previousSibling)):t.previousSibling?Vp(t.previousSibling):U.none()},aw=function(t){return La(t.nextSibling)?U.some(rw(t.nextSibling)):t.nextSibling?Bp(t.nextSibling):U.none()},uw=function(t,e){var n=wf.before(e.previousSibling?e.previousSibling:e.parentNode);return zp(t,n).fold(function(){return Pp(t,wf.after(e))},U.some)},sw=function(t,e){return Pp(t,wf.after(e)).fold(function(){return zp(t,wf.before(e))},U.some)},lw=function(t,e){return iw(e).orThunk(function(){return aw(e)}).orThunk(function(){return uw(t,e)})},cw=function(t,e){return aw(e).orThunk(function(){return iw(e)}).orThunk(function(){return sw(t,e)})},fw=function(t,e,n){return t?cw(e,n):lw(e,n)},dw=function(t,e,n){return fw(t,e,n).map(L(nw,n))},hw=function(t,e,n){n.fold(function(){t.focus()},function(n){t.selection.setRng(n.toRange(),e)})},pw=function(t){return function(e){return e.dom===t}},gw=function(t,e){return e&&Ot(t.schema.getBlockElements(),Rn(e))},mw=function(t){if(Za(t)){var e=yn.fromHtml('<br data-mce-bogus="1">');return _r(t),yr(t,e),U.some(wf.before(e.dom))}return U.none()},vw=function(t,e,n){var r=$n(t).filter(Hn),o=Kn(t).filter(Hn);return Sr(t),Bc(r,o,e,function(t,e,r){var o=t.dom,i=e.dom,a=o.data.length;return tw(o,i,n),r.container()===i?wf(o,a):r}).orThunk(function(){return n&&(r.each(function(t){return Qx(t.dom,t.dom.length)}),o.each(function(t){return Jx(t.dom,0)})),e})},yw=function(t,e){return Ot(t.schema.getTextInlineElements(),Rn(e))},bw=function(t,e,n,r){void 0===r&&(r=!0);var o=dw(e,t.getBody(),n.dom),i=pi(n,L(gw,t),pw(t.getBody())),a=vw(n,o,yw(t,n));t.dom.isEmpty(t.getBody())?(t.setContent(""),t.selection.setCursorLocation()):i.bind(mw).fold(function(){r&&hw(t,e,a)},function(n){r&&hw(t,e,U.some(n))})},xw=function(t,e){return{start:t,end:e}},ww=function(t,e,n){return{rng:t,table:e,cells:n}},_w=Xo.generate([{removeTable:["element"]},{emptyCells:["cells"]},{deleteCellSelection:["rng","cell"]}]),Sw=function(t){return function(e){return On(t,e)}},Cw=function(t,e){return xi(yn.fromDom(t),"td,th",e)},Mw=function(t,e){return yi(t,"table",e)},Tw=function(t){return!On(t.start,t.end)},kw=function(t,e){return Mw(t.start,e).bind(function(n){return Mw(t.end,e).bind(function(t){return Vc(On(n,t),n)})})},Dw=function(t,e){return!Tw(t)&&kw(t,e).exists(function(t){var e=t.dom.rows;return 1===e.length&&1===e[0].cells.length})},Aw=function(t){return pc(t,"td,th")},Iw=function(t,e){var n=Cw(t.startContainer,e),r=Cw(t.endContainer,e);return zc(n,r,xw)},Ow=function(t,e){return Mw(t.start,e).bind(function(e){return mt(Aw(e)).map(function(e){return xw(t.start,e)})})},Lw=function(t,e){var n=Cw(e.startContainer,t),r=Cw(e.endContainer,t);return e.collapsed?U.none():zc(n,r,xw).fold(function(){return n.fold(function(){return r.bind(function(e){return Mw(e,t).bind(function(t){return gt(Aw(t)).map(function(t){return xw(t,e)})})})},function(e){return Mw(e,t).bind(function(t){return mt(Aw(t)).map(function(t){return xw(e,t)})})})},function(e){return Ew(t,e)?U.none():Ow(e,t)})},Ew=function(t,e){return kw(e,t).isSome()},Nw=function(t,e){return kw(t,e).map(function(e){return ww(t,e,Aw(e))})},Rw=function(t,e,n){return t.filter(function(t){return Tw(t)&&Ew(n,t)}).orThunk(function(){return Lw(n,e)}).bind(function(t){return Nw(t,n)})},Pw=function(t,e){return at(t,function(t){return On(t,e)})},zw=function(t){return zc(Pw(t.cells,t.rng.start),Pw(t.cells,t.rng.end),function(e,n){return t.cells.slice(e,n+1)})},Bw=function(t,e,n){return t.filter(function(t){return Dw(t,n)&&cm(t.start,e)}).map(function(t){return t.start})},Vw=function(t){return zw(t).map(function(e){var n=t.cells;return e.length===n.length?_w.removeTable(t.table):_w.emptyCells(e)})},Hw=function(t,e){var n=Sw(t),r=Iw(e,n);return Bw(r,e,n).map(function(t){return _w.deleteCellSelection(e,t)}).orThunk(function(){return Rw(r,e,n).bind(Vw)})},Fw=function(t){var e=Bn(t)?$n(t):rr(t);return e.bind(Fw).orThunk(function(){return U.some(t)})},Ww=function(t,e){return J(e,sx),t.selection.setCursorLocation(e[0].dom,0),!0},Uw=function(t,e,n){e.deleteContents();var r=Fw(n).getOr(n),o=yn.fromDom(t.dom.getParent(r.dom,t.dom.isBlock));if(Za(o)&&(sx(o),t.selection.setCursorLocation(o.dom,0)),!On(n,o)){var i=Yn(o).is(n)?[]:Zn(o);J(i.concat(tr(n)),function(t){On(t,o)||Nn(t,o)||Sr(t)})}return!0},Gw=function(t,e){return bw(t,!1,e),!0},jw=function(t,e,n){return Hw(e,n).map(function(e){return e.fold(L(Gw,t),L(Ww,t),L(Uw,t))})},Xw=function(t,e){return Jw(t,e)},Yw=function(t,e,n,r){return $w(e,r).fold(function(){return jw(t,e,n)},function(e){return Xw(t,e)}).getOr(!1)},qw=function(t,e){var n=yn.fromDom(t.getBody()),r=t.selection.getRng(),o=im(t);return 0!==o.length?Ww(t,o):Yw(t,n,r,e)},Zw=function(t,e){return it(hx(e,t),Ji)},$w=function(t,e){return it(hx(e,t),function(t){return"caption"===Rn(t)})},Kw=function(t,e,n,r,o){return Ep(n,t.getBody(),o).bind(function(t){return Zw(e,yn.fromDom(t.getNode())).map(function(t){return!1===On(t,r)})})},Jw=function(t,e){return sx(e),t.selection.setCursorLocation(e.dom,0),U.some(!0)},Qw=function(t,e,n,r){return Bp(t.dom).bind(function(o){return Vp(t.dom).map(function(t){return e?n.isEqual(o)&&r.isEqual(t):n.isEqual(t)&&r.isEqual(o)})}).getOr(!0)},t_=function(t,e){return Jw(t,e)},e_=function(t,e,n){return $w(t,yn.fromDom(n.getNode())).map(function(t){return!1===On(t,e)})},n_=function(t,e,n,r,o){return Ep(n,t.getBody(),o).bind(function(i){return Qw(r,n,o,i)?t_(t,r):e_(e,r,i)}).or(U.some(!0))},r_=function(t,e,n,r){var o=wf.fromRangeStart(t.selection.getRng());return Zw(n,r).bind(function(r){return Za(r)?Jw(t,r):Kw(t,n,e,r,o)}).getOr(!1)},o_=function(t,e,n,r){var o=wf.fromRangeStart(t.selection.getRng());return Za(r)?Jw(t,r):n_(t,n,e,r,o)},i_=function(t,e){return t?nx(e):rx(e)},a_=function(t,e){var n=wf.fromRangeStart(t.selection.getRng());return i_(e,n)||Lp(e,t.getBody(),n).exists(function(t){return i_(e,t)})},u_=function(t,e,n){var r=yn.fromDom(t.getBody());return $w(r,n).fold(function(){return r_(t,e,r,n)||a_(t,e)},function(n){return o_(t,e,r,n).getOr(!1)})},s_=function(t,e){var n=yn.fromDom(t.selection.getStart(!0)),r=im(t);return t.selection.isCollapsed()&&0===r.length?u_(t,e,n):qw(t,n)},l_=function(t,e,n,r){var o=document.createRange();return o.setStart(t,e),o.setEnd(n,r),o},c_=function(t){var e=wf.fromRangeStart(t),n=wf.fromRangeEnd(t),r=t.commonAncestorContainer;return Lp(!1,r,n).map(function(o){return!Jh(e,n,r)&&Jh(e,o,r)?l_(e.container(),e.offset(),o.container(),o.offset()):t}).getOr(t)},f_=function(t){return t.collapsed?t:c_(t)},d_=function(t){return t.firstChild&&t.firstChild===t.lastChild},h_=function(t){return"br"===t.name||t.value===na},p_=function(t,e){var n=t.getBlockElements();return n[e.name]&&d_(e)&&h_(e.firstChild)},g_=function(t,e){var n=t.getNonEmptyElements();return e&&(e.isEmpty(n)||p_(t,e))},m_=function(t,e){var n=e.firstChild,r=e.lastChild;return n&&"meta"===n.name&&(n=n.next),r&&"mce_marker"===r.attr("id")&&(r=r.prev),g_(t,r)&&(r=r.prev),!(!n||n!==r)&&("ul"===n.name||"ol"===n.name)},v_=function(t){var e=t.firstChild,n=t.lastChild;return e&&"META"===e.nodeName&&e.parentNode.removeChild(e),n&&"mce_marker"===n.id&&n.parentNode.removeChild(n),t},y_=function(t,e,n){var r=e.serialize(n),o=t.createFragment(r);return v_(o)},b_=function(t){return dn.grep(t.childNodes,function(t){return"LI"===t.nodeName})},x_=function(t){return t.data===na||to(t)},w_=function(t){return t&&t.firstChild&&t.firstChild===t.lastChild&&x_(t.firstChild)},__=function(t){return!t.firstChild||w_(t)},S_=function(t){return t.length>0&&__(t[t.length-1])?t.slice(0,-1):t},C_=function(t,e){var n=t.getParent(e,t.isBlock);return n&&"LI"===n.nodeName?n:null},M_=function(t,e){return!!C_(t,e)},T_=function(t,e){var n=e.cloneRange(),r=e.cloneRange();return n.setStartBefore(t),r.setEndAfter(t),[n.cloneContents(),r.cloneContents()]},k_=function(t,e){var n=wf.before(t),r=Cp(e),o=r.next(n);return o?o.toRange():null},D_=function(t,e){var n=wf.after(t),r=Cp(e),o=r.prev(n);return o?o.toRange():null},A_=function(t,e,n,r){var o=T_(t,r),i=t.parentNode;return i.insertBefore(o[0],t),dn.each(e,function(e){i.insertBefore(e,t)}),i.insertBefore(o[1],t),i.removeChild(t),D_(e[e.length-1],n)},I_=function(t,e,n){var r=t.parentNode;return dn.each(e,function(e){r.insertBefore(e,t)}),k_(t,n)},O_=function(t,e,n,r){return r.insertAfter(e.reverse(),t),D_(e[0],n)},L_=function(t,e,n,r){var o=y_(e,t,r),i=C_(e,n.startContainer),a=S_(b_(o.firstChild)),u=1,s=2,l=e.getRoot(),c=function(t){var r=wf.fromRangeStart(n),o=Cp(e.getRoot()),a=t===u?o.prev(r):o.next(r);return!a||C_(e,a.getNode())!==i};return c(u)?I_(i,a,l):c(s)?O_(i,a,l,e):A_(i,a,l,n)},E_=function(t,e,n){var r=yn.fromDom(t.getRoot());return n=Bx(r,wf.fromRangeStart(e))?n.replace(/^ /,"&nbsp;"):n.replace(/^&nbsp;/," "),n=Hx(r,wf.fromRangeEnd(e))?n.replace(/(&nbsp;| )(<br( \/)>)?$/,"&nbsp;"):n.replace(/&nbsp;(<br( \/)?>)?$/," "),n},N_=oo,R_=function(t,e,n){if(null!==n){var r=t.getParent(e.endContainer,N_);return n===r&&cm(yn.fromDom(n),e)}return!1},P_=function(t,e,n){if("all"===n.getAttribute("data-mce-bogus"))n.parentNode.insertBefore(t.dom.createFragment(e),n);else{var r=n.firstChild,o=n.lastChild;!r||r===o&&"BR"===r.nodeName?t.dom.setHTML(n,e):t.selection.setContent(e)}},z_=function(t,e){U.from(t.getParent(e,"td,th")).map(yn.fromDom).each(lx)},B_=function(t,e){var n=t.schema.getTextInlineElements(),r=t.dom;if(e){var o=t.getBody(),i=Nb(r);dn.each(r.select("*[data-mce-fragment]"),function(t){var e=C(n[t.nodeName.toLowerCase()]);if(e&&Wb(r,t))for(var a=t.parentNode;C(a)&&a!==o;a=a.parentNode){var u=Gb(r,t,a);if(u)break;if(i.compare(a,t)){r.remove(t,!0);break}}})}},V_=function(t){var e=t;while(e=e.walk())1===e.type&&e.attr("data-mce-fragment","1")},H_=function(t){dn.each(t.getElementsByTagName("*"),function(t){t.removeAttribute("data-mce-fragment")})},F_=function(t){return!!t.getAttribute("data-mce-fragment")},W_=function(t,e){return e&&!t.schema.getShortEndedElements()[e.nodeName]},U_=function(t,e){var n,r,o=t.dom,i=t.selection,a=function(e){for(var n=t.getBody();e&&e!==n;e=e.parentNode)if("false"===o.getContentEditable(e))return e;return null};if(e){i.scrollIntoView(e);var u=a(e);if(u)return o.remove(e),void i.select(u);var s=o.createRng(),l=e.previousSibling;l&&3===l.nodeType?(s.setStart(l,l.nodeValue.length),Je.ie||(r=e.nextSibling,r&&3===r.nodeType&&(l.appendData(r.data),r.parentNode.removeChild(r)))):(s.setStartBefore(e),s.setEndBefore(e));var c=function(e){var n=wf.fromRangeStart(e),r=Cp(t.getBody());if(n=r.next(n),n)return n.toRange()},f=o.getParent(e,o.isBlock);o.remove(e),f&&o.isEmpty(f)&&(t.$(f).empty(),s.setStart(f,0),s.setEnd(f,0),N_(f)||F_(f)||!(n=c(s))?o.add(f,o.create("br",{"data-mce-bogus":"1"})):(s=n,o.remove(f))),i.setRng(s)}},G_=function(t){var e=t.dom,n=f_(t.selection.getRng());t.selection.setRng(n);var r=e.getParent(n.startContainer,N_);R_(e,n,r)?Uw(t,n,yn.fromDom(r)):t.getDoc().execCommand("Delete",!1,null)},j_=function(t,e,n){var r,o,i,a,u,s,l=t.selection,c=t.dom;/^ | $/.test(e)&&(e=E_(c,l.getRng(),e));var f=t.parser,d=n.merge,h=zb({validate:Yd(t)},t.schema),p='<span id="mce_marker" data-mce-type="bookmark">&#xFEFF;</span>';if(i={content:e,format:"html",selection:!0,paste:n.paste},i=t.fire("BeforeSetContent",i),i.isDefaultPrevented())t.fire("SetContent",{content:i.content,format:"html",selection:!0,paste:n.paste});else{e=i.content,-1===e.indexOf("{$caret}")&&(e+="{$caret}"),e=e.replace(/\{\$caret\}/,p),u=l.getRng();var g=u.startContainer||(u.parentElement?u.parentElement():null),m=t.getBody();g===m&&l.isCollapsed()&&c.isBlock(m.firstChild)&&W_(t,m.firstChild)&&c.isEmpty(m.firstChild)&&(u=c.createRng(),u.setStart(m.firstChild,0),u.setEnd(m.firstChild,0),l.setRng(u)),l.isCollapsed()||G_(t),r=l.getNode();var v={context:r.nodeName.toLowerCase(),data:n.data,insert:!0},y=f.parse(e,v);if(!0===n.paste&&m_(t.schema,y)&&M_(c,r))return u=L_(h,c,l.getRng(),y),l.setRng(u),void t.fire("SetContent",i);if(V_(y),s=y.lastChild,"mce_marker"===s.attr("id"))for(a=s,s=s.prev;s;s=s.walk(!0))if(3===s.type||!c.isBlock(s.name)){t.schema.isValidChild(s.parent.name,"span")&&s.parent.insert(a,s,"br"===s.name);break}if(t._selectionOverrides.showBlockCaretContainer(r),v.invalid){t.selection.setContent(p),r=l.getNode(),o=t.getBody(),9===r.nodeType?r=s=o:s=r;while(s!==o)r=s,s=s.parentNode;e=r===o?o.innerHTML:c.getOuterHTML(r),e=h.serialize(f.parse(e.replace(/<span (id="mce_marker"|id=mce_marker).+?<\/span>/i,function(){return h.serialize(y)}))),r===o?c.setHTML(o,e):c.setOuterHTML(r,e)}else e=h.serialize(y),P_(t,e,r);B_(t,d),U_(t,c.get("mce_marker")),H_(t.getBody()),z_(c,l.getStart()),t.fire("SetContent",i),t.addVisual()}},X_=function(t,e){e(t),t.firstChild&&X_(t.firstChild,e),t.next&&X_(t.next,e)},Y_=function(t,e,n){var r={},o={},i=[];for(var a in n.firstChild&&X_(n.firstChild,function(n){J(t,function(t){t.name===n.name&&(r[t.name]?r[t.name].nodes.push(n):r[t.name]={filter:t,nodes:[n]})}),J(e,function(t){"string"===typeof n.attr(t.name)&&(o[t.name]?o[t.name].nodes.push(n):o[t.name]={filter:t,nodes:[n]})})}),r)r.hasOwnProperty(a)&&i.push(r[a]);for(var u in o)o.hasOwnProperty(u)&&i.push(o[u]);return i},q_=function(t,e,n){var r=Y_(t,e,n);J(r,function(t){J(t.filter.callbacks,function(e){e(t.nodes,t.filter.name,{})})})},Z_="html",$_=function(t){return t instanceof pb},K_=function(t){Ky(t)&&Bp(t.getBody()).each(function(e){var n=e.getNode(),r=Yr(n)?Bp(n).getOr(e):e;t.selection.setRng(r.toRange())})},J_=function(t,e){t.dom.setHTML(t.getBody(),e),K_(t)},Q_=function(t,e,n,r){var o,i;return 0===n.length||/^\s+$/.test(n)?(i='<br data-mce-bogus="1">',"TABLE"===e.nodeName?n="<tr><td>"+i+"</td></tr>":/^(UL|OL)$/.test(e.nodeName)&&(n="<li>"+i+"</li>"),o=hd(t),o&&t.schema.isValidChild(e.nodeName.toLowerCase(),o.toLowerCase())?(n=i,n=t.dom.createHTML(o,pd(t),n)):n||(n='<br data-mce-bogus="1">'),J_(t,n),t.fire("SetContent",r)):("raw"!==r.format&&(n=zb({validate:t.validate},t.schema).serialize(t.parser.parse(n,{isRootContent:!0,insert:!0}))),r.content=Qi(yn.fromDom(e))?n:dn.trim(n),J_(t,r.content),r.no_events||t.fire("SetContent",r)),r.content},tS=function(t,e,n,r){q_(t.parser.getNodeFilters(),t.parser.getAttributeFilters(),n);var o=zb({validate:t.validate},t.schema).serialize(n);return r.content=Qi(yn.fromDom(e))?o:dn.trim(o),J_(t,r.content),r.no_events||t.fire("SetContent",r),n},eS=function(t,e,n){return n.format=n.format?n.format:Z_,n.set=!0,n.content=$_(e)?"":e,n.no_events||t.fire("BeforeSetContent",n),$_(e)||(e=n.content),U.from(t.getBody()).fold(I(e),function(r){return $_(e)?tS(t,r,e,n):Q_(t,r,e,n)})},nS=function(t,e){return mi(t,e).isSome()},rS=function(t){return M(t)?t:z},oS=function(t,e,n){var r=t.dom,o=rS(n);while(r.parentNode){r=r.parentNode;var i=yn.fromDom(r),a=e(i);if(a.isSome())return a;if(o(i))break}return U.none()},iS=function(t,e,n){var r=e(t),o=rS(n);return r.orThunk(function(){return o(t)?U.none():oS(t,e,o)})},aS=Sg,uS=function(t,e,n){var r=t.formatter.get(n);if(r)for(var o=0;o<r.length;o++)if(!1===r[o].inherit&&t.dom.is(e,r[o].selector))return!0;return!1},sS=function(t,e,n,r){var o=t.dom.getRoot();return e!==o&&(e=t.dom.getParent(e,function(e){return!!uS(t,e,n)||(e.parentNode===o||!!fS(t,e,n,r,!0))}),fS(t,e,n,r))},lS=function(t,e,n){return!!aS(e,n.inline)||(!!aS(e,n.block)||(n.selector?1===e.nodeType&&t.is(e,n.selector):void 0))},cS=function(t,e,n,r,o,i){var a,u,s,l=n[r];if(n.onmatch)return n.onmatch(e,n,r);if(l)if("undefined"===typeof l.length){for(a in l)if(l.hasOwnProperty(a)){if(u="attributes"===r?t.getAttrib(e,a):Mg(t,e,a),o&&!u&&!n.exact)return;if((!o||n.exact)&&!aS(u,Cg(t,_g(l[a],i),a)))return}}else for(s=0;s<l.length;s++)if("attributes"===r?t.getAttrib(e,l[s]):Mg(t,e,l[s]))return n;return n},fS=function(t,e,n,r,o){var i,a,u,s,l=t.formatter.get(n),c=t.dom;if(l&&e)for(a=0;a<l.length;a++)if(i=l[a],lS(t.dom,e,i)&&cS(c,e,i,"attributes",o,r)&&cS(c,e,i,"styles",o,r)){if(s=i.classes)for(u=0;u<s.length;u++)if(!t.dom.hasClass(e,_g(s[u],r)))return;return i}},dS=function(t,e,n,r){if(r)return sS(t,r,e,n);if(r=t.selection.getNode(),sS(t,r,e,n))return!0;var o=t.selection.getStart();return!(o===r||!sS(t,o,e,n))},hS=function(t,e,n){var r=[],o={},i=t.selection.getStart();return t.dom.getParent(i,function(i){for(var a=0;a<e.length;a++){var u=e[a];!o[u]&&fS(t,i,u,n)&&(o[u]=!0,r.push(u))}},t.dom.getRoot()),r},pS=function(t,e){var n=function(e){return On(e,yn.fromDom(t.getBody()))},r=function(e,n){return fS(t,e.dom,n)?U.some(n):U.none()};return U.from(t.selection.getStart(!0)).bind(function(t){return iS(yn.fromDom(t),function(t){return yt(e,function(e){return r(t,e)})},n)}).getOrNull()},gS=function(t,e){var n,r,o,i,a,u=t.formatter.get(e),s=t.dom;if(u)for(n=t.selection.getStart(),r=kg(s,n),i=u.length-1;i>=0;i--){if(a=u[i].selector,!a||u[i].defaultBlock)return!0;for(o=r.length-1;o>=0;o--)if(s.is(r[o],a))return!0}return!1},mS=function(t,e,n){return rt(n,function(n,r){var o=Dg(t,r);return t.formatter.matchNode(e,r,{},o)?n.concat([r]):n},[])},vS=ia,yS="_mce_caret",bS=function(t,e){return t.importNode(e,!0)},xS=function(t){var e=[];while(t){if(3===t.nodeType&&t.nodeValue!==vS||t.childNodes.length>1)return[];1===t.nodeType&&e.push(t),t=t.firstChild}return e},wS=function(t){return xS(t).length>0},_S=function(t){if(t){var e=new Ei(t,t);for(t=e.current();t;t=e.next())if($r(t))return t}return null},SS=function(t){var e=yn.fromTag("span");return lo(e,{id:yS,"data-mce-bogus":"1","data-mce-type":"format-caret"}),t&&yr(e,yn.fromText(vS)),e},CS=function(t){var e=_S(t);return e&&e.nodeValue.charAt(0)===vS&&e.deleteData(0,1),e},MS=function(t,e,n){void 0===n&&(n=!0);var r=t.dom,o=t.selection;if(wS(e))bw(t,!1,yn.fromDom(e),n);else{var i=o.getRng(),a=r.getParent(e,r.isBlock),u=i.startContainer,s=i.startOffset,l=i.endContainer,c=i.endOffset,f=CS(e);r.remove(e,!0),u===f&&s>0&&i.setStart(f,s-1),l===f&&c>0&&i.setEnd(f,c-1),a&&r.isEmpty(a)&&sx(yn.fromDom(a)),o.setRng(i)}},TS=function(t,e,n){void 0===n&&(n=!0);var r=t.dom,o=t.selection;if(e)MS(t,e,n);else if(e=Wp(t.getBody(),o.getStart()),!e)while(e=r.get(yS))MS(t,e,!1)},kS=function(t,e,n){var r=t.dom,o=r.getParent(n,L(yg,t));o&&r.isEmpty(o)?n.parentNode.replaceChild(e,n):(ux(yn.fromDom(n)),r.isEmpty(n)?n.parentNode.replaceChild(e,n):r.insertAfter(e,n))},DS=function(t,e){return t.appendChild(e),e},AS=function(t,e){var n=nt(t,function(t,e){return DS(t,e.cloneNode(!1))},e);return DS(n,n.ownerDocument.createTextNode(vS))},IS=function(t,e,n,r,o,i){var a=t.formatter,u=t.dom,s=et(bt(a.get()),function(t){return t!==r&&!ue(t,"removeformat")}),l=mS(t,n,s),c=et(l,function(e){return!Ag(t,e,r)});if(c.length>0){var f=n.cloneNode(!1);return u.add(e,f),a.remove(r,o,f,i),u.remove(f),U.some(f)}return U.none()},OS=function(t,e,n){var r,o,i=t.selection,a=i.getRng(),u=a.startOffset,s=a.startContainer,l=s.nodeValue;r=Wp(t.getBody(),i.getStart()),r&&(o=_S(r));var c=/[^\s\u00a0\u00ad\u200b\ufeff]/;if(l&&u>0&&u<l.length&&c.test(l.charAt(u))&&c.test(l.charAt(u-1))){var f=i.getBookmark();a.collapse(!0);var d=Zg(t,a,t.formatter.get(e));d=sv(d),t.formatter.apply(e,n,d),i.moveToBookmark(f)}else r&&o.nodeValue===vS?t.formatter.apply(e,n,r):(r=bS(t.getDoc(),SS(!0).dom),o=r.firstChild,a.insertNode(r),u=1,t.formatter.apply(e,n,r)),i.setCursorLocation(o,u)},LS=function(t,e,n,r){var o,i,a,u=t.dom,s=t.selection,l=[],c=s.getRng(),f=c.startContainer,d=c.startOffset;i=f,3===f.nodeType&&(d!==f.nodeValue.length&&(o=!0),i=i.parentNode);while(i){if(fS(t,i,e,n,r)){a=i;break}i.nextSibling&&(o=!0),l.push(i),i=i.parentNode}if(a)if(o){var h=s.getBookmark();c.collapse(!0);var p=Zg(t,c,t.formatter.get(e),!0);p=sv(p),t.formatter.remove(e,n,p,r),s.moveToBookmark(h)}else{var g=Wp(t.getBody(),a),m=SS(!1).dom;kS(t,m,null!==g?g:a);var v=IS(t,m,a,e,n,r),y=AS(l.concat(v.toArray()),m);MS(t,g,!1),s.setCursorLocation(y,1),u.isEmpty(a)&&u.remove(a)}},ES=function(t,e){var n=t.selection,r=t.getBody();TS(t,null,!1),8!==e&&46!==e||!n.isCollapsed()||n.getStart().innerHTML!==vS||TS(t,Wp(r,n.getStart())),37!==e&&39!==e||TS(t,Wp(r,n.getStart()))},NS=function(t){t.on("mouseup keydown",function(e){ES(t,e.keyCode)})},RS=function(t,e){var n=SS(!1),r=AS(e,n.dom);return gr(yn.fromDom(t),n),Sr(yn.fromDom(t)),wf(r,0)},PS=function(t,e){var n=t.schema.getTextInlineElements();return n.hasOwnProperty(Rn(e))&&!Fp(e.dom)&&!jr(e.dom)},zS=function(t){return Fp(t.dom)&&wS(t.dom)},BS={},VS=Bt,HS=Pt,FS=function(t,e){var n=BS[t];n||(BS[t]=[]),BS[t].push(e)},WS=function(t,e){HS(BS[t],function(t){t(e)})};FS("pre",function(t){var e,n=t.selection.getRng(),r=function(t){return i(t.previousSibling)&&-1!==Vt(e,t.previousSibling)},o=function(t,e){_l(e).remove(),_l(t).append("<br><br>").append(e.childNodes)},i=Fr(["pre"]);n.collapsed||(e=t.selection.getSelectedBlocks(),HS(VS(VS(e,i),r),function(t){o(t.previousSibling,t)}))});var US=dn.each,GS=function(t){return Hr(t)&&!lg(t)&&!Fp(t)&&!jr(t)},jS=function(t,e){var n;for(n=t;n;n=n[e]){if($r(n)&&0!==n.nodeValue.length)return t;if(Hr(n)&&!lg(n))return n}return t},XS=function(t,e,n){var r,o,i=Nb(t);if(e&&n&&(e=jS(e,"previousSibling"),n=jS(n,"nextSibling"),i.compare(e,n))){for(r=e.nextSibling;r&&r!==n;)o=r,r=r.nextSibling,e.appendChild(o);return t.remove(n),dn.each(dn.grep(n.childNodes),function(t){e.appendChild(t)}),e}return n},YS=function(t,e,n,r){if(r&&!1!==e.merge_siblings){var o=XS(t,vg(r),r);XS(t,o,vg(o,!0))}},qS=function(t,e,n){if(e.clear_child_styles){var r=e.links?"*:not(a)":"*";US(t.select(r,n),function(n){GS(n)&&US(e.styles,function(e,r){t.setStyle(n,r,"")})})}},ZS=function(t,e,n){US(t.childNodes,function(t){GS(t)&&(e(t)&&n(t),t.hasChildNodes()&&ZS(t,e,n))})},$S=function(t,e){"SPAN"===e.nodeName&&0===t.getAttribs(e).length&&t.remove(e,!0)},KS=function(t,e){return function(n){return!(!n||!Mg(t,n,e))}},JS=function(t,e,n){return function(r){t.setStyle(r,e,n),""===r.getAttribute("style")&&r.removeAttribute("style"),$S(t,r)}},QS=Xo.generate([{keep:[]},{rename:["name"]},{removed:[]}]),tC=/^(src|href|style)$/,eC=dn.each,nC=Sg,rC=function(t){return/^(TR|TH|TD)$/.test(t.nodeName)},oC=function(t,e,n){return t.isChildOf(e,n)&&e!==n&&!t.isBlock(n)},iC=function(t,e,n){var r,o;if(r=e[n?"startContainer":"endContainer"],o=e[n?"startOffset":"endOffset"],Hr(r)){var i=r.childNodes.length-1;!n&&o&&o--,r=r.childNodes[o>i?i:o]}return $r(r)&&n&&o>=r.nodeValue.length&&(r=new Ei(r,t.getBody()).next()||r),$r(r)&&!n&&0===o&&(r=new Ei(r,t.getBody()).prev()||r),r},aC=function(t,e){var n=e?"firstChild":"lastChild";if(rC(t)&&t[n]){var r=t[n];return"TR"===t.nodeName&&r[n]||r}return t},uC=function(t,e,n,r){var o=t.create(n,r);return e.parentNode.insertBefore(o,e),o.appendChild(e),o},sC=function(t,e,n,r,o){var i=yn.fromDom(e),a=yn.fromDom(t.create(r,o)),u=n?Qn(i):Jn(i);return wr(a,u),n?(gr(i,a),vr(a,i)):(mr(i,a),yr(a,i)),a.dom},lC=function(t,e,n){return!!nC(e,n.inline)||(!!nC(e,n.block)||(n.selector?Hr(e)&&t.is(e,n.selector):void 0))},cC=function(t,e){return e.links&&"A"===t.nodeName},fC=function(t,e,n,r){return e=vg(e,n,r),!e||"BR"===e.nodeName||t.isBlock(e)},dC=function(t,e,n){var r,o=e.parentNode,i=t.dom,a=hd(t);n.block&&(a?o===i.getRoot()&&(n.list_block&&nC(e,n.list_block)||J(vt(e.childNodes),function(e){bg(t,a,e.nodeName.toLowerCase())?r?r.appendChild(e):(r=uC(i,e,a),i.setAttribs(r,t.settings.forced_root_block_attrs)):r=0})):i.isBlock(e)&&!i.isBlock(o)&&(fC(i,e,!1)||fC(i,e.firstChild,!0,!0)||e.insertBefore(i.create("br"),e.firstChild),fC(i,e,!0)||fC(i,e.lastChild,!1,!0)||e.appendChild(i.create("br")))),n.selector&&n.inline&&!nC(n.inline,e)||i.remove(e,!0)},hC=function(t,e,n,r,o){var i,a=t.dom;if(!lC(a,r,e)&&!cC(r,e))return QS.keep();var u=r;if(e.inline&&"all"===e.remove&&b(e.preserve_attributes)){var s=et(a.getAttribs(u),function(t){return Z(e.preserve_attributes,t.name.toLowerCase())});if(a.removeAllAttribs(u),J(s,function(t){return a.setAttrib(u,t.name,t.value)}),s.length>0)return QS.rename("span")}if("all"!==e.remove){eC(e.styles,function(t,r){t=Cg(a,_g(t,n),r+""),T(r)&&(r=t,o=null),(e.remove_similar||!o||nC(Mg(a,o,r),t))&&a.setStyle(u,r,""),i=!0}),i&&""===a.getAttrib(u,"style")&&(u.removeAttribute("style"),u.removeAttribute("data-mce-style")),eC(e.attributes,function(t,r){var i;if(t=_g(t,n),T(r)&&(r=t,o=null),e.remove_similar||!o||nC(a.getAttrib(o,r),t)){if("class"===r&&(t=a.getAttrib(u,r),t&&(i="",J(t.split(/\s+/),function(t){/mce\-\w+/.test(t)&&(i+=(i?" ":"")+t)}),i)))return void a.setAttrib(u,r,i);if(tC.test(r)&&u.removeAttribute("data-mce-"+r),"style"===r&&Fr(["li"])(u)&&"none"===a.getStyle(u,"list-style-type"))return u.removeAttribute(r),void a.setStyle(u,"list-style-type","none");"class"===r&&u.removeAttribute("className"),u.removeAttribute(r)}}),eC(e.classes,function(t){t=_g(t,n),o&&!a.hasClass(o,t)||a.removeClass(u,t)});for(var l=a.getAttribs(u),c=0;c<l.length;c++){var f=l[c].nodeName;if(0!==f.indexOf("_")&&0!==f.indexOf("data-"))return QS.keep()}}return"none"!==e.remove?(dC(t,u,e),QS.removed()):QS.keep()},pC=function(t,e,n,r,o){return hC(t,e,n,r,o).fold(z,function(e){return t.dom.rename(r,e),!0},B)},gC=function(t,e,n,r,o){var i;return J(kg(t.dom,e.parentNode).reverse(),function(e){if(!i&&"_start"!==e.id&&"_end"!==e.id){var a=fS(t,e,n,r,o);a&&!1!==a.split&&(i=e)}}),i},mC=function(t,e,n,r){return hC(t,e,n,r,r).fold(I(r),function(e){var n=t.dom.createFragment();return n.appendChild(r),t.dom.rename(r,e)},I(null))},vC=function(t,e,n,r,o,i,a,u){var s,l,c,f=t.dom;if(n){for(var d=n.parentNode,h=r.parentNode;h&&h!==d;h=h.parentNode){s=f.clone(h,!1);for(var p=0;p<e.length;p++)if(s=mC(t,e[p],u,s),null===s)break;s&&(l&&s.appendChild(l),c||(c=s),l=s)}!i||a.mixed&&f.isBlock(n)||(r=f.split(n,r)),l&&(o.parentNode.insertBefore(l,o),c.appendChild(o),a.inline&&YS(f,a,u,l))}return r},yC=function(t,e,n,r,o){var i=t.formatter.get(e),a=i[0],u=!0,s=t.dom,l=t.selection,c=function(r){var u=gC(t,r,e,n,o);return vC(t,i,u,r,r,!0,a,n)},f=function(t){return lg(t)&&Hr(t)&&("_start"===t.id||"_end"===t.id)},d=function(e){var r,o,l=e.parentNode;$r(e)&&Eg(s,l)&&pC(t,a,n,l,l),Hr(e)&&s.getContentEditable(e)&&(r=u,u="true"===s.getContentEditable(e),o=!0);var c=vt(e.childNodes);if(u&&!o)for(var f=0;f<i.length;f++)if(pC(t,i[f],n,e,e))break;if(a.deep&&c.length){for(f=0;f<c.length;f++)d(c[f]);o&&(u=r)}},h=function(t){var e=s.get(t?"_start":"_end"),n=e[t?"firstChild":"lastChild"];return f(n)&&(n=n[t?"firstChild":"lastChild"]),$r(n)&&0===n.data.length&&(n=t?e.previousSibling||e.nextSibling:e.nextSibling||e.previousSibling),s.remove(e,!0),n},p=function(e){var n,r,o=Zg(t,e,i,e.collapsed);if(a.split){if(o=sv(o),n=iC(t,o,!0),r=iC(t,o),n!==r){if(n=aC(n,!0),r=aC(r,!1),oC(s,n,r)){var u=U.from(n.firstChild).getOr(n);return c(sC(s,u,!0,"span",{id:"_start","data-mce-type":"bookmark"})),void h(!0)}if(oC(s,r,n)){u=U.from(r.lastChild).getOr(r);return c(sC(s,u,!1,"span",{id:"_end","data-mce-type":"bookmark"})),void h(!1)}n=uC(s,n,"span",{id:"_start","data-mce-type":"bookmark"}),r=uC(s,r,"span",{id:"_end","data-mce-type":"bookmark"});var l=s.createRng();l.setStartAfter(n),l.setEndBefore(r),Jg(s,l,function(t){J(t,function(t){lg(t)||lg(t.parentNode)||c(t)})}),c(n),c(r),n=h(!0),r=h()}else n=r=c(n);o.startContainer=n.parentNode?n.parentNode:n,o.startOffset=s.nodeIndex(n),o.endContainer=r.parentNode?r.parentNode:r,o.endOffset=s.nodeIndex(r)+1}Jg(s,o,function(e){J(e,function(e){d(e);var n=["underline","line-through","overline"];J(n,function(n){Hr(e)&&t.dom.getStyle(e,"text-decoration")===n&&e.parentNode&&Tg(s,e.parentNode)===n&&pC(t,{deep:!1,exact:!0,inline:"span",styles:{textDecoration:n}},null,e)})})})};if(r)if(pg(r)){var g=s.createRng();g.setStartBefore(r),g.setEndAfter(r),p(g)}else p(r);else if("false"!==s.getContentEditable(l.getNode()))l.isCollapsed()&&a.inline&&!im(t).length?LS(t,e,n,o):(pm(l,!0,function(){hm(t,p)}),a.inline&&dS(t,e,n,l.getStart())&&mg(s,l,l.getRng()),t.nodeChanged());else{r=l.getNode();for(var m=0;m<i.length;m++)if(i[m].ceFalseOverride&&pC(t,i[m],n,r,r))break}},bC=dn.each,xC=function(t,e,n,r){var o=function(e){if(1===e.nodeType&&e.parentNode&&1===e.parentNode.nodeType){var n=Tg(t,e.parentNode);t.getStyle(e,"color")&&n?t.setStyle(e,"text-decoration",n):t.getStyle(e,"text-decoration")===n&&t.setStyle(e,"text-decoration",null)}};e.styles&&(e.styles.color||e.styles.textDecoration)&&(dn.walk(r,o,"childNodes"),o(r))},wC=function(t,e,n,r){e.styles&&e.styles.backgroundColor&&ZS(r,KS(t,"fontSize"),JS(t,"backgroundColor",_g(e.styles.backgroundColor,n)))},_C=function(t,e,n,r){"sub"!==e.inline&&"sup"!==e.inline||(ZS(r,KS(t,"fontSize"),JS(t,"fontSize","")),t.remove(t.select("sup"===e.inline?"sub":"sup",r),!0))},SC=function(t,e,n,r){bC(e,function(e){bC(t.dom.select(e.inline,r),function(r){GS(r)&&pC(t,e,n,r,e.exact?r:null)}),qS(t.dom,e,r)})},CC=function(t,e,n,r,o){fS(t,o.parentNode,n,r)&&pC(t,e,r,o)||e.merge_with_parents&&t.dom.getParent(o.parentNode,function(i){if(fS(t,i,n,r))return pC(t,e,r,o),!0})},MC=dn.each,TC=function(t,e){return Lt(t,e)},kC=function(t){return t&&1===t.nodeType&&!lg(t)&&!Fp(t)&&!jr(t)},DC=function(t,e,n,r){if(Kd(t)&&Lg(e)){var o=Ut(Ut({},t.schema.getTextBlockElements()),{td:{},th:{},li:{},dt:{},dd:{},figcaption:{},caption:{},details:{},summary:{}}),i=nS(yn.fromDom(n),function(t){return Fp(t.dom)});return Lt(o,r)&&Za(yn.fromDom(n.parentNode),!1)&&!i}return!1},AC=function(t,e,n,r){var o=t.formatter.get(e),i=o[0],a=!r&&t.selection.isCollapsed(),u=t.dom,s=t.selection,l=function(t,e){if(e=e||i,t){if(e.onformat&&e.onformat(t,e,n,r),MC(e.styles,function(e,r){u.setStyle(t,r,_g(e,n))}),e.styles){var o=u.getAttrib(t,"style");o&&u.setAttrib(t,"data-mce-style",o)}MC(e.attributes,function(e,r){u.setAttrib(t,r,_g(e,n))}),MC(e.classes,function(e){e=_g(e,n),u.hasClass(t,e)||u.addClass(t,e)})}},c=function(t,e){var n=!1;return!!Og(i)&&(MC(t,function(t){if(!("collapsed"in t&&t.collapsed!==a))return u.is(e,t.selector)&&!Fp(e)?(l(e,t),n=!0,!1):void 0}),n)},f=function(r,a,u,s){var f=[],d=!0,h=i.inline||i.block,p=r.create(h);l(p),Jg(r,a,function(a){var u,g=function(a){var m=!1,v=d,y=a.nodeName.toLowerCase(),b=a.parentNode.nodeName.toLowerCase();if(Hr(a)&&r.getContentEditable(a)&&(v=d,d="true"===r.getContentEditable(a),m=!0),to(a)&&!DC(t,i,a,b))return u=null,void(Ig(i)&&r.remove(a));if(i.wrapper&&fS(t,a,e,n))u=null;else{if(d&&!m&&Ig(i)&&!i.wrapper&&yg(t,y)&&bg(t,b,h)){var x=r.rename(a,h);return l(x),f.push(x),void(u=null)}if(Og(i)){var w=c(o,a);if($r(a)&&Eg(r,a.parentNode)&&c(o,a.parentNode),!TC(i,"inline")||w)return void(u=null)}!d||m||!bg(t,h,y)||!bg(t,b,h)||!s&&3===a.nodeType&&1===a.nodeValue.length&&65279===a.nodeValue.charCodeAt(0)||Fp(a)||TC(i,"inline")&&r.isBlock(a)?(u=null,MC(dn.grep(a.childNodes),g),m&&(d=v),u=null):(u||(u=r.clone(p,!1),a.parentNode.insertBefore(u,a),f.push(u)),u.appendChild(a))}};MC(a,g)}),!0===i.links&&MC(f,function(t){var e=function(t){"A"===t.nodeName&&l(t,i),MC(dn.grep(t.childNodes),e)};e(t)}),MC(f,function(a){var u=function(t){var e=0;return MC(t.childNodes,function(t){wg(t)||lg(t)||e++}),e},s=function(t){var e=!1;return MC(t.childNodes,function(t){if(kC(t))return e=t,!1}),e},c=function(t){var e,n=s(t);return n&&!lg(n)&&lS(r,n,i)&&(e=r.clone(n,!1),l(e),r.replace(e,t,!0),r.remove(n,!0)),e||t},d=u(a);!(f.length>1)&&r.isBlock(a)||0!==d?(Lg(i)||i.wrapper)&&(i.exact||1!==d||(a=c(a)),SC(t,o,n,a),CC(t,i,e,n,a),wC(r,i,n,a),xC(r,i,n,a),_C(r,i,n,a),YS(r,i,n,a)):r.remove(a,!0)})};if("false"!==u.getContentEditable(s.getNode())){if(i){if(r)if(pg(r)){if(!c(o,r)){var d=u.createRng();d.setStartBefore(r),d.setEndAfter(r),f(u,Zg(t,d,o),null,!0)}}else f(u,r,null,!0);else if(a&&Lg(i)&&!im(t).length)OS(t,e,n);else{var h=s.getNode(),p=o[0];t.settings.forced_root_block||!p.defaultBlock||u.getParent(h,u.isBlock)||AC(t,p.defaultBlock),s.setRng(f_(s.getRng())),pm(s,!0,function(e){hm(t,function(e,n){var r=n?e:Zg(t,e,o);f(u,r)})}),mg(u,s,s.getRng()),t.nodeChanged()}WS(e,t)}}else{r=s.getNode();for(var g=0,m=o.length;g<m;g++){var v=o[g];if(v.ceFalseOverride&&Og(v)&&u.is(r,v.selector))return void l(r,v)}}},IC=function(t,e){var n=Vl({});t.set({}),e.on("NodeChange",function(r){OC(e,r.element,n,t.get())})},OC=function(t,e,n,r){var o=bt(n.get()),i={},a={},u=et(kg(t.dom,e),function(t){return 1===t.nodeType&&!t.getAttribute("data-mce-bogus")});wt(r,function(e,n){dn.each(u,function(r){return t.formatter.matchNode(r,n,{},e.similar)?(-1===o.indexOf(n)&&(J(e.callbacks,function(t){t(!0,{node:r,format:n,parents:u})}),i[n]=e.callbacks),a[n]=e.callbacks,!1):!uS(t,r,n)&&void 0})});var s=LC(n.get(),a,e,u);n.set(Ut(Ut({},i),s))},LC=function(t,e,n,r){return Tt(t,function(t,o){return!!Ot(e,o)||(J(t,function(t){t(!1,{node:n,format:o,parents:r})}),!1)}).t},EC=function(t,e,n,r){var o=t.get();J(e.split(","),function(t){o[t]||(o[t]={similar:r,callbacks:[]}),o[t].callbacks.push(n)}),t.set(o)},NC=function(t,e,n){var r=t.get();J(e.split(","),function(t){r[t].callbacks=et(r[t].callbacks,function(t){return t!==n}),0===r[t].callbacks.length&&delete r[t]}),t.set(r)},RC=function(t,e,n,r,o){return null===e.get()&&IC(e,t),EC(e,n,r,o),{unbind:function(){return NC(e,n,r)}}},PC=function(t,e,n,r){var o=t.formatter.get(e);!dS(t,e,n,r)||"toggle"in o[0]&&!o[0].toggle?AC(t,e,n,r):yC(t,e,n,r)},zC=function(t,e){var n=e||document,r=n.createDocumentFragment();return J(t,function(t){r.appendChild(t.dom)}),yn.fromDom(r)},BC=function(t,e,n){return{element:t,width:e,rows:n}},VC=function(t,e){return{element:t,cells:e}},HC=function(t,e){return{x:t,y:e}},FC=function(t,e){var n=parseInt(co(t,e),10);return isNaN(n)?1:n},WC=function(t,e,n,r,o){for(var i=FC(o,"rowspan"),a=FC(o,"colspan"),u=t.rows,s=n;s<n+i;s++){u[s]||(u[s]=VC(Ec(r),[]));for(var l=e;l<e+a;l++){var c=u[s].cells;c[l]=s===n&&l===e?o:Lc(o)}}},UC=function(t,e,n){var r=t.rows,o=r[n]?r[n].cells:[];return!!o[e]},GC=function(t,e,n){while(UC(t,e,n))e++;return e},jC=function(t){return rt(t,function(t,e){return e.cells.length>t?e.cells.length:t},0)},XC=function(t,e){for(var n=t.rows,r=0;r<n.length;r++)for(var o=n[r].cells,i=0;i<o.length;i++)if(On(o[i],e))return U.some(HC(i,r));return U.none()},YC=function(t,e,n,r,o){for(var i=[],a=t.rows,u=n;u<=o;u++){var s=a[u].cells,l=e<r?s.slice(e,r+1):s.slice(r,e+1);i.push(VC(a[u].element,l))}return i},qC=function(t,e,n){var r=e.x,o=e.y,i=n.x,a=n.y,u=o<a?YC(t,r,o,i,a):YC(t,r,a,i,o);return BC(t.element,jC(u),u)},ZC=function(t,e){var n=Lc(t.element),r=yn.fromTag("tbody");return wr(r,e),yr(n,r),n},$C=function(t){return K(t.rows,function(t){var e=K(t.cells,function(t){var e=Ec(t);return po(e,"colspan"),po(e,"rowspan"),e}),n=Lc(t.element);return wr(n,e),n})},KC=function(t){var e=BC(Lc(t),0,[]);return J(pc(t,"tr"),function(t,n){J(pc(t,"td,th"),function(r,o){WC(e,GC(e,o,n),n,t,r)})}),BC(e.element,jC(e.rows),e.rows)},JC=function(t){return ZC(t,$C(t))},QC=function(t,e,n){return XC(t,e).bind(function(e){return XC(t,n).map(function(n){return qC(t,e,n)})})},tM=function(t){return it(t,function(t){return"ul"===Rn(t)||"ol"===Rn(t)})},eM=function(t,e){return it(t,function(t){return"li"===Rn(t)&&cm(t,e)}).fold(I([]),function(e){return tM(t).map(function(t){var e=yn.fromTag(Rn(t)),n=kt(wo(t),function(t,e){return se(e,"list-style")});return vo(e,n),[yn.fromTag("li"),e]}).getOr([])})},nM=function(t,e){var n=rt(e,function(t,e){return yr(e,t),e},t);return e.length>0?zC([n]):n},rM=function(t){return $i(t)?Yn(t).filter(Zi).fold(I([]),function(e){return[t,e]}):Zi(t)?[t]:[]},oM=function(t,e){var n=yn.fromDom(e.commonAncestorContainer),r=hx(n,t),o=et(r,function(t){return Xi(t)||Ui(t)}),i=eM(r,e),a=o.concat(i.length?i:rM(n));return K(a,Lc)},iM=function(){return zC([])},aM=function(t,e){return nM(yn.fromDom(e.cloneContents()),oM(t,e))},uM=function(t,e){return yi(e,"table",L(On,t))},sM=function(t,e){return uM(t,e[0]).bind(function(t){var n=e[0],r=e[e.length-1],o=KC(t);return QC(o,n,r).map(function(t){return zC([JC(t)])})}).getOrThunk(iM)},lM=function(t,e){return e.length>0&&e[0].collapsed?iM():aM(t,e[0])},cM=function(t,e){var n=om(e,t);return n.length>0?sM(t,n):lM(t,e)},fM=function(t){return t.replace(/^[ \f\n\r\t\v]+/,"")},dM=function(t,e){return e>=0&&e<t.length&&dg(t.charAt(e))},hM=function(t,e){var n=ua(t.innerText);return e?fM(n):n},pM=function(t){return t.map(function(t){return t.nodeName}).getOr("div").toLowerCase()},gM=function(t){return U.from(t.selection.getRng()).map(function(e){var n=U.from(t.dom.getParent(e.commonAncestorContainer,t.dom.isBlock)),r=t.getBody(),o=pM(n),i=Je.browser.isIE()&&"pre"!==o,a=t.dom.add(r,o,{"data-mce-bogus":"all",style:"overflow: hidden; opacity: 0;"},e.cloneContents()),u=hM(a,i),s=ua(a.textContent);if(t.dom.remove(a),dM(s,0)||dM(s,s.length-1)){var l=n.getOr(r),c=hM(l,i),f=c.indexOf(u);if(-1===f)return u;var d=dM(c,f-1),h=dM(c,f+u.length);return(d?" ":"")+u+(h?" ":"")}return u}).getOr("")},mM=function(t,e){var n=t.selection.getRng(),r=t.dom.create("body"),o=t.selection.getSel(),i=lb(t,Qg(o)),a=e.contextual?cM(yn.fromDom(t.getBody()),i).dom:n.cloneContents();return a&&r.appendChild(a),t.selection.serializer.serialize(r,e)},vM=function(t,e,n){if(void 0===n&&(n={}),n.get=!0,n.format=e,n.selection=!0,n=t.fire("BeforeGetContent",n),n.isDefaultPrevented())return t.fire("GetContent",n),n.content;if("text"===n.format)return gM(t);n.getInner=!0;var r=mM(t,n);return"tree"===n.format?r:(n.content=t.selection.isCollapsed()?"":r,t.fire("GetContent",n),n.content)},yM=0,bM=1,xM=2,wM=function(t,e){var n=t.length+e.length+2,r=new Array(n),o=new Array(n),i=function(t,e,n){return{start:t,end:e,diag:n}},a=function(n,r,o,i,u){var l=s(n,r,o,i);if(null===l||l.start===r&&l.diag===r-i||l.end===n&&l.diag===n-o){var c=n,f=o;while(c<r||f<i)c<r&&f<i&&t[c]===e[f]?(u.push([yM,t[c]]),++c,++f):r-n>i-o?(u.push([xM,t[c]]),++c):(u.push([bM,e[f]]),++f)}else{a(n,l.start,o,l.start-l.diag,u);for(var d=l.start;d<l.end;++d)u.push([yM,t[d]]);a(l.end,r,l.end-l.diag,i,u)}},u=function(n,r,o,a){var u=n;while(u-r<a&&u<o&&t[u]===e[u-r])++u;return i(n,u,r)},s=function(n,i,a,s){var l=i-n,c=s-a;if(0===l||0===c)return null;var f,d,h,p,g,m=l-c,v=c+l,y=(v%2===0?v:v+1)/2;for(r[1+y]=n,o[1+y]=i+1,f=0;f<=y;++f){for(d=-f;d<=f;d+=2){h=d+y,d===-f||d!==f&&r[h-1]<r[h+1]?r[h]=r[h+1]:r[h]=r[h-1]+1,p=r[h],g=p-n+a-d;while(p<i&&g<s&&t[p]===e[g])r[h]=++p,++g;if(m%2!==0&&m-f<=d&&d<=m+f&&o[h-m]<=r[h])return u(o[h-m],d+n-a,i,s)}for(d=m-f;d<=m+f;d+=2){h=d+y-m,d===m-f||d!==m+f&&o[h+1]<=o[h-1]?o[h]=o[h+1]-1:o[h]=o[h-1],p=o[h]-1,g=p-n+a-d;while(p>=n&&g>=a&&t[p]===e[g])o[h]=p--,g--;if(m%2===0&&-f<=d&&d<=f&&o[h]<=r[h+m])return u(o[h],d+n-a,i,s)}}},l=[];return a(0,t.length,0,e.length,l),l},_M=function(t){return Hr(t)?t.outerHTML:$r(t)?wu.encodeRaw(t.data,!1):Kr(t)?"\x3c!--"+t.data+"--\x3e":""},SM=function(t){var e,n=document.createElement("div"),r=document.createDocumentFragment();t&&(n.innerHTML=t);while(e=n.firstChild)r.appendChild(e);return r},CM=function(t,e,n){var r=SM(e);if(t.hasChildNodes()&&n<t.childNodes.length){var o=t.childNodes[n];o.parentNode.insertBefore(r,o)}else t.appendChild(r)},MM=function(t,e){if(t.hasChildNodes()&&e<t.childNodes.length){var n=t.childNodes[e];n.parentNode.removeChild(n)}},TM=function(t,e){var n=0;J(t,function(t){t[0]===yM?n++:t[0]===bM?(CM(e,t[1],n),n++):t[0]===xM&&MM(e,n)})},kM=function(t){return et(K(vt(t.childNodes),_M),function(t){return t.length>0})},DM=function(t,e){var n=K(vt(e.childNodes),_M);return TM(wM(n,t),e),e},AM=Vl(U.none()),IM=function(){return AM.get().getOrThunk(function(){var t=document.implementation.createHTMLDocument("undo");return AM.set(U.some(t)),t})},OM=function(t){return-1!==t.indexOf("</iframe>")},LM=function(t){return{type:"fragmented",fragments:t,content:"",bookmark:null,beforeBookmark:null}},EM=function(t){return{type:"complete",fragments:null,content:t,bookmark:null,beforeBookmark:null}},NM=function(t){var e=kM(t.getBody()),n=st(e,function(e){var n=Db(t.serializer,e);return n.length>0?[n]:[]}),r=n.join("");return OM(r)?LM(n):EM(r)},RM=function(t,e,n){"fragmented"===e.type?DM(e.fragments,t.getBody()):t.setContent(e.content,{format:"raw"}),t.selection.moveToBookmark(n?e.beforeBookmark:e.bookmark)},PM=function(t){return"fragmented"===t.type?t.fragments.join(""):t.content},zM=function(t){var e=yn.fromTag("body",IM());return Ic(e,PM(t)),J(pc(e,"*[data-mce-bogus]"),Cr),Ac(e)},BM=function(t,e){return PM(t)===PM(e)},VM=function(t,e){return zM(t)===zM(e)},HM=function(t,e){return!(!t||!e)&&(!!BM(t,e)||VM(t,e))},FM=function(t){return 0===t.get()},WM=function(t,e,n){FM(n)&&(t.typing=e)},UM=function(t,e){t.typing&&(WM(t,!1,e),t.add())},GM=function(t){t.typing&&(t.typing=!1,t.add())},jM=function(t,e,n){FM(e)&&n.set(U.some(nd(t.selection)))},XM=function(t,e,n,r,o,i,a){var u=NM(t);if(i=i||{},i=dn.extend(i,u),!1===FM(r)||t.removed)return null;var s=e.data[n.get()];if(t.fire("BeforeAddUndo",{level:i,lastLevel:s,originalEvent:a}).isDefaultPrevented())return null;if(s&&HM(s,i))return null;e.data[n.get()]&&o.get().each(function(t){e.data[n.get()].beforeBookmark=t});var l=uh(t);if(l&&e.data.length>l){for(var c=0;c<e.data.length-1;c++)e.data[c]=e.data[c+1];e.data.length--,n.set(e.data.length)}i.bookmark=nd(t.selection),n.get()<e.data.length-1&&(e.data.length=n.get()+1),e.data.push(i),n.set(e.data.length-1);var f={level:i,lastLevel:s,originalEvent:a};return n.get()>0?(t.setDirty(!0),t.fire("AddUndo",f),t.fire("change",f)):t.fire("AddUndo",f),i},YM=function(t,e,n){e.data=[],n.set(0),e.typing=!1,t.fire("ClearUndos")},qM=function(t,e,n,r,o){if(e.transact(r)){var i=e.data[n.get()].bookmark,a=e.data[n.get()-1];RM(t,a,!0),e.transact(o)&&(e.data[n.get()-1].beforeBookmark=i)}},ZM=function(t,e,n){var r;return e.get()<n.length-1&&(e.set(e.get()+1),r=n[e.get()],RM(t,r,!1),t.setDirty(!0),t.fire("Redo",{level:r})),r},$M=function(t,e,n,r){var o;return e.typing&&(e.add(),e.typing=!1,WM(e,!1,n)),r.get()>0&&(r.set(r.get()-1),o=e.data[r.get()],RM(t,o,!0),t.setDirty(!0),t.fire("Undo",{level:o})),o},KM=function(t){t.clear(),t.add()},JM=function(t,e,n){return n.get()>0||e.typing&&e.data[0]&&!HM(NM(t),e.data[0])},QM=function(t,e){return e.get()<t.data.length-1&&!t.typing},tT=function(t,e,n){return UM(t,e),t.beforeChange(),t.ignore(n),t.add()},eT=function(t,e){try{t.set(t.get()+1),e()}finally{t.set(t.get()-1)}},nT=function(t,e){var n=t.dom,r=C(e)?e:t.getBody();_(t.hasVisual)&&(t.hasVisual=ph(t)),J(n.select("table,a",r),function(e){switch(e.nodeName){case"TABLE":var r=gh(t),o=n.getAttrib(e,"border");o&&"0"!==o||!t.hasVisual?n.removeClass(e,r):n.addClass(e,r);break;case"A":if(!n.getAttrib(e,"href")){var i=n.getAttrib(e,"name")||e.id,a=mh(t);i&&t.hasVisual?n.addClass(e,a):n.removeClass(e,a)}break}}),t.fire("VisualAid",{element:e,hasVisual:t.hasVisual})},rT=function(t){return{undoManager:{beforeChange:function(e,n){return jM(t,e,n)},addUndoLevel:function(e,n,r,o,i,a){return XM(t,e,n,r,o,i,a)},undo:function(e,n,r){return $M(t,e,n,r)},redo:function(e,n){return ZM(t,e,n)},clear:function(e,n){return YM(t,e,n)},reset:function(t){return KM(t)},hasUndo:function(e,n){return JM(t,e,n)},hasRedo:function(t,e){return QM(t,e)},transact:function(t,e,n){return tT(t,e,n)},ignore:function(t,e){return eT(t,e)},extra:function(e,n,r,o){return qM(t,e,n,r,o)}},formatter:{match:function(e,n,r){return dS(t,e,n,r)},matchAll:function(e,n){return hS(t,e,n)},matchNode:function(e,n,r,o){return fS(t,e,n,r,o)},canApply:function(e){return gS(t,e)},closest:function(e){return pS(t,e)},apply:function(e,n,r){return AC(t,e,n,r)},remove:function(e,n,r,o){return yC(t,e,n,r,o)},toggle:function(e,n,r){return PC(t,e,n,r)},formatChanged:function(e,n,r,o){return RC(t,e,n,r,o)}},editor:{getContent:function(e,n){return Lb(t,e,n)},setContent:function(e,n){return eS(t,e,n)},insertContent:function(e,n){return j_(t,e,n)},addVisual:function(e){return nT(t,e)}},selection:{getContent:function(e,n){return vM(t,e,n)}},raw:{getModel:function(){return U.none()}}}},oT=function(t){var e=function(t){return y(t)?t:{}},n=N("Unimplemented feature for rtc"),r=t.undoManager,o=t.formatter,i=t.editor,a=t.selection,u=t.raw,s=k;return{undoManager:{beforeChange:s,addUndoLevel:n,undo:function(){return r.undo()},redo:function(){return r.redo()},clear:function(){return r.clear()},reset:function(){return r.reset()},hasUndo:function(){return r.hasUndo()},hasRedo:function(){return r.hasRedo()},transact:function(t,e,n){return r.transact(n)},ignore:function(t,e){return r.ignore(e)},extra:function(t,e,n,o){return r.extra(n,o)}},formatter:{match:function(t,n,r){return o.match(t,e(n))},matchAll:n,matchNode:n,canApply:function(t){return o.canApply(t)},closest:function(t){return o.closest(t)},apply:function(t,n,r){return o.apply(t,e(n))},remove:function(t,n,r,i){return o.remove(t,e(n))},toggle:function(t,n,r){return o.toggle(t,e(n))},formatChanged:function(t,e,n,r){return o.formatChanged(e,n,r)}},editor:{getContent:function(t,e){return i.getContent(t)},setContent:function(t,e){return i.setContent(t,e)},insertContent:function(t,e){return i.insertContent(t)},addVisual:s},selection:{getContent:function(t,e){return a.getContent(e)}},raw:{getModel:function(){return U.some(u.getRawModel())}}}},iT=function(){var t=I(null),e=I("");return{undoManager:{beforeChange:k,addUndoLevel:t,undo:t,redo:t,clear:k,reset:k,hasUndo:z,hasRedo:z,transact:t,ignore:k,extra:k},formatter:{match:z,matchAll:I([]),matchNode:z,canApply:z,closest:e,apply:k,remove:k,toggle:k,formatChanged:I({unbind:k})},editor:{getContent:e,setContent:e,insertContent:k,addVisual:k},selection:{getContent:e},raw:{getModel:I(U.none())}}},aT=function(t){return Ot(t.plugins,"rtc")},uT=function(t){return It(t.plugins,"rtc").bind(function(t){return U.from(t.setup)})},sT=function(t){var e=t;return uT(t).fold(function(){return e.rtcInstance=rT(t),U.none()},function(t){return U.some(t().then(function(t){return e.rtcInstance=oT(t),t.rtc.isRemote},function(t){return e.rtcInstance=iT(),_i.reject(t)}))})},lT=function(t){return t.rtcInstance?t.rtcInstance:rT(t)},cT=function(t){var e=t.rtcInstance;if(e)return e;throw new Error("Failed to get RTC instance not yet initialized.")},fT=function(t,e,n){cT(t).undoManager.beforeChange(e,n)},dT=function(t,e,n,r,o,i,a){return cT(t).undoManager.addUndoLevel(e,n,r,o,i,a)},hT=function(t,e,n,r){return cT(t).undoManager.undo(e,n,r)},pT=function(t,e,n){return cT(t).undoManager.redo(e,n)},gT=function(t,e,n){cT(t).undoManager.clear(e,n)},mT=function(t,e){cT(t).undoManager.reset(e)},vT=function(t,e,n){return cT(t).undoManager.hasUndo(e,n)},yT=function(t,e,n){return cT(t).undoManager.hasRedo(e,n)},bT=function(t,e,n,r){return cT(t).undoManager.transact(e,n,r)},xT=function(t,e,n){cT(t).undoManager.ignore(e,n)},wT=function(t,e,n,r,o){cT(t).undoManager.extra(e,n,r,o)},_T=function(t,e,n,r){return cT(t).formatter.match(e,n,r)},ST=function(t,e,n){return cT(t).formatter.matchAll(e,n)},CT=function(t,e,n,r,o){return cT(t).formatter.matchNode(e,n,r,o)},MT=function(t,e){return cT(t).formatter.canApply(e)},TT=function(t,e){return cT(t).formatter.closest(e)},kT=function(t,e,n,r){cT(t).formatter.apply(e,n,r)},DT=function(t,e,n,r,o){cT(t).formatter.remove(e,n,r,o)},AT=function(t,e,n,r){cT(t).formatter.toggle(e,n,r)},IT=function(t,e,n,r,o){return void 0===o&&(o=!1),cT(t).formatter.formatChanged(e,n,r,o)},OT=function(t,e,n){return lT(t).editor.getContent(e,n)},LT=function(t,e,n){return lT(t).editor.setContent(e,n)},ET=function(t,e,n){return lT(t).editor.insertContent(e,n)},NT=function(t,e,n){return cT(t).selection.getContent(e,n)},RT=function(t,e){return cT(t).editor.addVisual(e)},PT=function(t,e){void 0===e&&(e={});var n=e.format?e.format:"html";return NT(t,n,e)},zT=function(t){return 0===t.dom.length?(Sr(t),U.none()):U.some(t)},BT=function(t,e){return t.filter(function(t){return Mm.isBookmarkNode(t.dom)}).bind(e?Kn:$n)},VT=function(t,e,n,r){var o=t.dom,i=e.dom,a=r?o.length:i.length;r?(tw(o,i,!1,!r),n.setStart(i,a)):(tw(i,o,!1,!r),n.setEnd(i,a))},HT=function(t,e){Yn(t).each(function(n){var r=t.dom;e&&Bx(n,wf(r,0))?Jx(r,0):!e&&Hx(n,wf(r,r.length))&&Qx(r,r.length)})},FT=function(t,e,n,r){t.bind(function(t){var o=r?Qx:Jx;return o(t.dom,r?t.dom.length:0),e.filter(Hn).map(function(e){return VT(t,e,n,r)})}).orThunk(function(){var t=BT(e,r).or(e).filter(Hn);return t.map(function(t){return HT(t,r)})})},WT=function(t,e){var n=U.from(e.firstChild).map(yn.fromDom),r=U.from(e.lastChild).map(yn.fromDom);t.deleteContents(),t.insertNode(e);var o=n.bind($n).filter(Hn).bind(zT),i=r.bind(Kn).filter(Hn).bind(zT);FT(o,n,t,!0),FT(i,r,t,!1),t.collapse(!1)},UT=function(t,e){return Ut(Ut({format:"html"},t),{set:!0,selection:!0,content:e})},GT=function(t,e){if("raw"!==e.format){var n=t.selection.getRng(),r=t.dom.getParent(n.commonAncestorContainer,t.dom.isBlock),o=r?{context:r.nodeName.toLowerCase()}:{},i=t.parser.parse(e.content,Ut(Ut({isRootContent:!0,forced_root_block:!1},o),e));return zb({validate:t.validate},t.schema).serialize(i)}return e.content},jT=function(t,e,n){void 0===n&&(n={});var r=UT(n,e);if(r.no_events||(r=t.fire("BeforeSetContent",r),!r.isDefaultPrevented())){n.content=GT(t,r);var o=t.selection.getRng();WT(o,o.createContextualFragment(n.content)),t.selection.setRng(o),Fv(t,o),r.no_events||t.fire("SetContent",r)}else t.fire("SetContent",r)},XT=function(t,e,n){if(t&&t.hasOwnProperty(e)){var r=et(t[e],function(t){return t!==n});0===r.length?delete t[e]:t[e]=r}};function YT(t,e){var n,r;return{selectorChangedWithUnbind:function(o,i){return n||(n={},r={},e.on("NodeChange",function(e){var o=e.element,i=t.getParents(o,null,t.getRoot()),a={};dn.each(n,function(e,n){dn.each(i,function(o){if(t.is(o,n))return r[n]||(dn.each(e,function(t){t(!0,{node:o,selector:n,parents:i})}),r[n]=e),a[n]=e,!1})}),dn.each(r,function(t,e){a[e]||(delete r[e],dn.each(t,function(t){t(!1,{node:o,selector:e,parents:i})}))})})),n[o]||(n[o]=[]),n[o].push(i),{unbind:function(){XT(n,o,i),XT(r,o,i)}}}}}var qT=function(t){return!!t.select},ZT=function(t){return!(!t||!t.ownerDocument)&&Nn(yn.fromDom(t.ownerDocument),yn.fromDom(t))},$T=function(t){return!!t&&(!!qT(t)||ZT(t.startContainer)&&ZT(t.endContainer))},KT=function(t,e,n,r){var o,i,a=YT(t,r).selectorChangedWithUnbind,u=function(e,n){var o=t.createRng();C(e)&&C(n)?(o.setStart(e,n),o.setEnd(e,n),b(o),m(!1)):(fm(t,o,r.getBody(),!0),b(o))},s=function(t){return PT(r,t)},l=function(t,e){return jT(r,t,e)},c=function(t){return rb(r.getBody(),y(),t)},f=function(t){return ob(r.getBody(),y(),t)},d=function(t,e){return E.getBookmark(t,e)},h=function(t){return E.moveToBookmark(t)},p=function(e,n){return sb(t,e,n).each(b),e},g=function(){var t=y(),e=v();return!(!t||t.item)&&(t.compareEndPoints?0===t.compareEndPoints("StartToEnd",t):!e||t.collapsed)},m=function(t){var e=y();e.collapse(!!t),b(e)},v=function(){return e.getSelection?e.getSelection():e.document.selection},y=function(){var n,a,u,s=function(t,e,n){try{return e.compareBoundaryPoints(t,n)}catch(r){return-1}},l=e.document;if(void 0!==r.bookmark&&!1===Ky(r)){var c=Cy(r);if(c.isSome())return c.map(function(t){return lb(r,[t])[0]}).getOr(l.createRange())}try{(n=v())&&!Vr(n.anchorNode)&&(a=n.rangeCount>0?n.getRangeAt(0):n.createRange?n.createRange():l.createRange(),a=lb(r,[a])[0])}catch(f){}return a||(a=l.createRange?l.createRange():l.body.createTextRange()),a.setStart&&9===a.startContainer.nodeType&&a.collapsed&&(u=t.getRoot(),a.setStart(u,0),a.setEnd(u,0)),o&&i&&(0===s(a.START_TO_START,a,o)&&0===s(a.END_TO_END,a,o)?a=i:(o=null,i=null)),a},b=function(t,e){var n;if($T(t)){var a=qT(t)?t:null;if(a){i=null;try{a.select()}catch(l){}}else{var u=v(),s=r.fire("SetSelectionRange",{range:t,forward:e});if(t=s.range,u){i=t;try{u.removeAllRanges(),u.addRange(t)}catch(l){}!1===e&&u.extend&&(u.collapse(t.endContainer,t.endOffset),u.extend(t.startContainer,t.startOffset)),o=u.rangeCount>0?u.getRangeAt(0):null}t.collapsed||t.startContainer!==t.endContainer||!u.setBaseAndExtent||Je.ie||t.endOffset-t.startOffset<2&&t.startContainer.hasChildNodes()&&(n=t.startContainer.childNodes[t.startOffset],n&&"IMG"===n.tagName&&(u.setBaseAndExtent(t.startContainer,t.startOffset,t.endContainer,t.endOffset),u.anchorNode===t.startContainer&&u.focusNode===t.endContainer||u.setBaseAndExtent(n,0,n,1))),r.fire("AfterSetSelectionRange",{range:t,forward:e})}}},x=function(e){return l(t.getOuterHTML(e)),e},w=function(){return ab(r.getBody(),y())},_=function(e,n){return ub(t,y(),e,n)},S=function(){var e=v(),n=null===e||void 0===e?void 0:e.anchorNode,r=null===e||void 0===e?void 0:e.focusNode;if(!e||!n||!r||Vr(n)||Vr(r))return!0;var o=t.createRng();o.setStart(n,e.anchorOffset),o.collapse(!0);var i=t.createRng();return i.setStart(r,e.focusOffset),i.collapse(!0),o.compareBoundaryPoints(o.START_TO_START,i)<=0},M=function(){var e=y(),n=v();if(!em(n)&&dm(r)){var o=av(t,e);return o.each(function(t){b(t,S())}),o.getOr(e)}return e},T=function(t,e){return a(t,e),L},k=function(){var e,n=t.getRoot();while(n&&"BODY"!==n.nodeName){if(n.scrollHeight>n.clientHeight){e=n;break}n=n.parentNode}return e},D=function(t,e){return Hv(r,t,e)},A=function(t,e){return b(Ym(t,e,r.getDoc()))},I=function(){var t=y();return t.collapsed?wf.fromRangeStart(t).getClientRects()[0]:t.getBoundingClientRect()},O=function(){e=o=i=null,N.destroy()},L={bookmarkManager:null,controlSelection:null,dom:t,win:e,serializer:n,editor:r,collapse:m,setCursorLocation:u,getContent:s,setContent:l,getBookmark:d,moveToBookmark:h,select:p,isCollapsed:g,isForward:S,setNode:x,getNode:w,getSel:v,setRng:b,getRng:y,getStart:c,getEnd:f,getSelectedBlocks:_,normalize:M,selectorChanged:T,selectorChangedWithUnbind:a,getScrollContainer:k,scrollIntoView:D,placeCaretAt:A,getBoundingClientRect:I,destroy:O},E=Mm(L),N=Wm(L,r);return L.bookmarkManager=E,L.controlSelection=N,L},JT=function(t,e){J(e,function(e){t.attr(e,null)})},QT=function(t,e,n){t.addNodeFilter("font",function(t){J(t,function(t){var r=e.parse(t.attr("style")),o=t.attr("color"),i=t.attr("face"),a=t.attr("size");o&&(r.color=o),i&&(r["font-family"]=i),a&&(r["font-size"]=n[parseInt(t.attr("size"),10)-1]),t.name="span",t.attr("style",e.serialize(r)),JT(t,["color","face","size"])})})},tk=function(t,e){t.addNodeFilter("strike",function(t){J(t,function(t){var n=e.parse(t.attr("style"));n["text-decoration"]="line-through",t.name="span",t.attr("style",e.serialize(n))})})},ek=function(t,e){var n=Nu();e.convert_fonts_to_spans&&QT(t,n,dn.explode(e.font_size_legacy_values)),tk(t,n)},nk=function(t,e){e.inline_styles&&ek(t,e)},rk=function(t){return new _i(function(e,n){var r=function(){n("Cannot convert "+t+" to Blob. Resource might not exist or is inaccessible.")};try{var o=new XMLHttpRequest;o.open("GET",t,!0),o.responseType="blob",o.onload=function(){200===o.status?e(o.response):r()},o.onerror=r,o.send()}catch(i){r()}})},ok=function(t){var e,n=decodeURIComponent(t).split(","),r=/data:([^;]+)/.exec(n[0]);return r&&(e=r[1]),{type:e,data:n[1]}},ik=function(t,e){var n;try{n=atob(e)}catch(EH){return U.none()}for(var r=new Uint8Array(n.length),o=0;o<r.length;o++)r[o]=n.charCodeAt(o);return U.some(new Blob([r],{type:t}))},ak=function(t){return new _i(function(e){var n=ok(t),r=n.type,o=n.data;ik(r,o).fold(function(){return e(new Blob([]))},e)})},uk=function(t){return 0===t.indexOf("blob:")?rk(t):0===t.indexOf("data:")?ak(t):null},sk=function(t){return new _i(function(e){var n=new FileReader;n.onloadend=function(){e(n.result)},n.readAsDataURL(t)})},lk=0,ck=function(t){return(t||"blobid")+lk++},fk=function(t,e,n,r){var o,i;if(0===e.src.indexOf("blob:"))return i=t.getByUri(e.src),void(i?n({image:e,blobInfo:i}):uk(e.src).then(function(r){sk(r).then(function(a){o=ok(a).data,i=t.create(ck(),r,o),t.add(i),n({image:e,blobInfo:i})})},function(t){r(t)}));var a=ok(e.src),u=a.data,s=a.type;o=u,i=t.getByData(o,s),i?n({image:e,blobInfo:i}):uk(e.src).then(function(r){i=t.create(ck(),r,o),t.add(i),n({image:e,blobInfo:i})},function(t){r(t)})},dk=function(t){return t?vt(t.getElementsByTagName("img")):[]},hk=function(t,e){var n={},r=function(r,o){o||(o=B);var i=et(dk(r),function(e){var n=e.src;return!!Je.fileApi&&(!e.hasAttribute("data-mce-bogus")&&(!e.hasAttribute("data-mce-placeholder")&&(!(!n||n===Je.transparentSrc)&&(0===n.indexOf("blob:")?!t.isUploaded(n)&&o(e):0===n.indexOf("data:")&&o(e)))))}),a=K(i,function(t){if(void 0!==n[t.src])return new _i(function(e){n[t.src].then(function(n){if("string"===typeof n)return n;e({image:t,blobInfo:n.blobInfo})})});var r=new _i(function(n,r){fk(e,t,n,r)}).then(function(t){return delete n[t.image.src],t}).catch(function(e){return delete n[t.src],e});return n[t.src]=r,r});return _i.all(a)};return{findAll:r}},pk=function(t,e,n,r){var o=t.padd_empty_with_br||e.insert;o&&n[r.name]?r.empty().append(new pb("br",1)).shortEnded=!0:r.empty().append(new pb("#text",3)).value=na},gk=function(t){return mk(t,"#text")&&t.firstChild.value===na},mk=function(t,e){return t&&t.firstChild&&t.firstChild===t.lastChild&&t.firstChild.name===e},vk=function(t,e){var n=t.getElementRule(e.name);return n&&n.paddEmpty},yk=function(t,e,n,r){return r.isEmpty(e,n,function(e){return vk(t,e)})},bk=function(t,e){return t&&(e[t.name]||"br"===t.name)},xk=function(t){return t.attr("data-mce-bogus")},wk=function(t){return t.attr("src")===Je.transparentSrc||t.attr("data-mce-placeholder")},_k=function(t,e){if(e.images_dataimg_filter){var n=new Image;return n.src=t.attr("src"),wt(t.attributes.map,function(t,e){n.setAttribute(e,t)}),e.images_dataimg_filter(n)}return!0},Sk=function(t,e){var n=e.blob_cache,r=function(t){var r=t.attr("src");wk(t)||xk(t)||vb(r).filter(function(){return _k(t,e)}).bind(function(t){var e=t.type,r=t.data;return U.from(n.getByData(r,e)).orThunk(function(){return ik(e,r).map(function(t){var e=n.create(ck(),t,r);return n.add(e),e})})}).each(function(e){t.attr("src",e.blobUri())})};n&&t.addAttributeFilter("src",function(t){return J(t,r)})},Ck=function(t,e){var n=t.schema;e.remove_trailing_brs&&t.addNodeFilter("br",function(t,r,o){var i,a,u,s,l,c,f,d,h=t.length,p=dn.extend({},n.getBlockElements()),g=n.getNonEmptyElements(),m=n.getWhiteSpaceElements();for(p.body=1,i=0;i<h;i++)if(a=t[i],u=a.parent,p[a.parent.name]&&a===u.lastChild){l=a.prev;while(l){if(c=l.name,"span"!==c||"bookmark"!==l.attr("data-mce-type")){"br"===c&&(a=null);break}l=l.prev}a&&(a.remove(),yk(n,g,m,u)&&(f=n.getElementRule(u.name),f&&(f.removeEmpty?u.remove():f.paddEmpty&&pk(e,o,p,u))))}else{s=a;while(u&&u.firstChild===s&&u.lastChild===s){if(s=u,p[u.name])break;u=u.parent}s===u&&!0!==e.padd_empty_with_br&&(d=new pb("#text",3),d.value=na,a.replace(d))}}),t.addAttributeFilter("href",function(t){var n=t.length,r=function(t){var e=t.split(" ").filter(function(t){return t.length>0});return e.concat(["noopener"]).sort().join(" ")},o=function(t){var e=t?dn.trim(t):"";return/\b(noopener)\b/g.test(e)?e:r(e)};if(!e.allow_unsafe_link_target)while(n--){var i=t[n];"a"===i.name&&"_blank"===i.attr("target")&&i.attr("rel",o(i.attr("rel")))}}),e.allow_html_in_named_anchor||t.addAttributeFilter("id,name",function(t){var e,n,r,o,i=t.length;while(i--)if(o=t[i],"a"===o.name&&o.firstChild&&!o.attr("href")){r=o.parent,e=o.lastChild;do{n=e.prev,r.insert(e,o),e=n}while(e)}}),e.fix_list_elements&&t.addNodeFilter("ul,ol",function(t){var e,n,r=t.length;while(r--)if(e=t[r],n=e.parent,"ul"===n.name||"ol"===n.name)if(e.prev&&"li"===e.prev.name)e.prev.append(e);else{var o=new pb("li",1);o.attr("style","list-style-type: none"),e.wrap(o)}}),e.validate&&n.getValidClasses()&&t.addAttributeFilter("class",function(t){var e,r,o,i,a,u,s,l=t.length,c=n.getValidClasses();while(l--){for(e=t[l],r=e.attr("class").split(" "),a="",o=0;o<r.length;o++)i=r[o],s=!1,u=c["*"],u&&u[i]&&(s=!0),u=c[e.name],!s&&u&&u[i]&&(s=!0),s&&(a&&(a+=" "),a+=i);a.length||(a=null),e.attr("class",a)}}),Sk(t,e)},Mk=dn.makeMap,Tk=dn.each,kk=dn.explode,Dk=dn.extend,Ak=function(t,e){void 0===e&&(e=Lu());var n={},r=[],o={},i={};t=t||{},t.validate=!("validate"in t)||t.validate,t.root_name=t.root_name||"body";var a=function(t){var n,r,o,i,a,s,l,c,f,d,h,p=Mk("tr,td,th,tbody,thead,tfoot,table"),g=e.getNonEmptyElements(),m=e.getWhiteSpaceElements(),v=e.getTextBlockElements(),y=e.getSpecialElements();for(n=0;n<t.length;n++)if(r=t[n],r.parent&&!r.fixed)if(v[r.name]&&"li"===r.parent.name){d=r.next;while(d){if(!v[d.name])break;d.name="li",d.fixed=!0,r.parent.insert(d,r.parent),d=d.next}r.unwrap(r)}else{for(i=[r],o=r.parent;o&&!e.isValidChild(o.name,r.name)&&!p[o.name];o=o.parent)i.push(o);if(o&&i.length>1){for(i.reverse(),a=s=u(i[0].clone()),f=0;f<i.length-1;f++){for(e.isValidChild(s.name,i[f].name)?(l=u(i[f].clone()),s.append(l)):l=s,c=i[f].firstChild;c&&c!==i[f+1];)h=c.next,l.append(c),c=h;s=l}yk(e,g,m,a)?o.insert(r,i[0],!0):(o.insert(a,i[0],!0),o.insert(r,a)),o=i[0],(yk(e,g,m,o)||mk(o,"br"))&&o.empty().remove()}else if(r.parent){if("li"===r.name){if(d=r.prev,d&&("ul"===d.name||"ol"===d.name)){d.append(r);continue}if(d=r.next,d&&("ul"===d.name||"ol"===d.name)){d.insert(r,d.firstChild,!0);continue}r.wrap(u(new pb("ul",1)));continue}e.isValidChild(r.parent.name,"div")&&e.isValidChild("div",r.name)?r.wrap(u(new pb("div",1))):y[r.name]?r.empty().remove():r.unwrap()}}},u=function(t){var e,a,u;a=t.name,a in n&&(u=o[a],u?u.push(t):o[a]=[t]),e=r.length;while(e--)a=r[e].name,a in t.attributes.map&&(u=i[a],u?u.push(t):i[a]=[t]);return t},s=function(t,e){Tk(kk(t),function(t){var r=n[t];r||(n[t]=r=[]),r.push(e)})},l=function(){var t=[];for(var e in n)n.hasOwnProperty(e)&&t.push({name:e,callbacks:n[e]});return t},c=function(t,e){Tk(kk(t),function(t){var n;for(n=0;n<r.length;n++)if(r[n].name===t)return void r[n].callbacks.push(e);r.push({name:t,callbacks:[e]})})},f=function(){return[].concat(r)},d=function(u,s){var l,c,f,d,h,p,g,m,v,y=[],b=function(t){return!1===t?"":!0===t?"p":t};s=s||{},o={},i={};var x=Dk(Mk("script,style,head,html,body,title,meta,param"),e.getBlockElements()),w=e.getNonEmptyElements(),_=e.children,S=t.validate,C="forced_root_block"in s?s.forced_root_block:t.forced_root_block,M=b(C),T=e.getWhiteSpaceElements(),k=/^[ \t\r\n]+/,D=/[ \t\r\n]+$/,A=/[ \t\r\n]+/g,I=/^[ \t\r\n]+$/;m=T.hasOwnProperty(s.context)||T.hasOwnProperty(t.root_name);var O=function(){var n,r,o=P.firstChild,i=function(t){t&&(o=t.firstChild,o&&3===o.type&&(o.value=o.value.replace(k,"")),o=t.lastChild,o&&3===o.type&&(o.value=o.value.replace(D,"")))};if(e.isValidChild(P.name,M.toLowerCase())){while(o)n=o.next,3===o.type||1===o.type&&"p"!==o.name&&!x[o.name]&&!o.attr("data-mce-type")?r?r.append(o):(r=L(M,1),r.attr(t.forced_root_block_attrs),P.insert(r,o),r.append(o)):(i(r),r=null),o=n;i(r)}},L=function(t,e){var r,i=new pb(t,e);return t in n&&(r=o[t],r?r.push(i):o[t]=[i]),i},E=function(t){var n,r,o,i,a=e.getBlockElements();for(n=t.prev;n&&3===n.type;){if(o=n.value.replace(D,""),o.length>0)return void(n.value=o);if(r=n.next,r){if(3===r.type&&r.value.length){n=n.prev;continue}if(!a[r.name]&&"script"!==r.name&&"style"!==r.name){n=n.prev;continue}}i=n.prev,n.remove(),n=i}},N=function(t){var e,n={};for(e in t)"li"!==e&&"p"!==e&&(n[e]=t[e]);return n},R=Tb({validate:S,allow_html_data_urls:t.allow_html_data_urls,allow_svg_data_urls:t.allow_svg_data_urls,allow_script_urls:t.allow_script_urls,allow_conditional_comments:t.allow_conditional_comments,preserve_cdata:t.preserve_cdata,self_closing_elements:N(e.getSelfClosingElements()),cdata:function(t){v.append(L("#cdata",4)).value=t},text:function(t,e){var n;m||(t=t.replace(A," "),bk(v.lastChild,x)&&(t=t.replace(k,""))),0!==t.length&&(n=L("#text",3),n.raw=!!e,v.append(n).value=t)},comment:function(t){v.append(L("#comment",8)).value=t},pi:function(t,e){v.append(L(t,7)).value=e,E(v)},doctype:function(t){var e=v.append(L("#doctype",10));e.value=t,E(v)},start:function(t,n,o){var a,u,s,l,c=S?e.getElementRule(t):{};if(c){a=L(c.outputName||t,1),a.attributes=n,a.shortEnded=o,v.append(a),l=_[v.name],l&&_[a.name]&&!l[a.name]&&y.push(a),u=r.length;while(u--)s=r[u].name,s in n.map&&(p=i[s],p?p.push(a):i[s]=[a]);x[t]&&E(a),o||(v=a),!m&&T[t]&&(m=!0)}},end:function(n){var r,o,i,a,u=S?e.getElementRule(n):{};if(u){if(x[n]&&!m){if(r=v.firstChild,r&&3===r.type)if(o=r.value.replace(k,""),o.length>0)r.value=o,r=r.next;else{i=r.next,r.remove(),r=i;while(r&&3===r.type)o=r.value,i=r.next,(0===o.length||I.test(o))&&(r.remove(),r=i),r=i}if(r=v.lastChild,r&&3===r.type)if(o=r.value.replace(D,""),o.length>0)r.value=o,r=r.prev;else{i=r.prev,r.remove(),r=i;while(r&&3===r.type)o=r.value,i=r.prev,(0===o.length||I.test(o))&&(r.remove(),r=i),r=i}}if(m&&T[n]&&(m=!1),u.removeEmpty&&yk(e,w,T,v))return a=v.parent,x[v.name]?v.empty().remove():v.unwrap(),void(v=a);u.paddEmpty&&(gk(v)||yk(e,w,T,v))&&pk(t,s,x,v),v=v.parent}}},e),P=v=new pb(s.context||t.root_name,11);if(R.parse(u,s.format),S&&y.length&&(s.context?s.invalid=!0:a(y)),M&&("body"===P.name||s.isRootContent)&&O(),!s.invalid){for(g in o)if(o.hasOwnProperty(g)){p=n[g],l=o[g],d=l.length;while(d--)l[d].parent||l.splice(d,1);for(c=0,f=p.length;c<f;c++)p[c](l,g,s)}for(c=0,f=r.length;c<f;c++)if(p=r[c],p.name in i){l=i[p.name],d=l.length;while(d--)l[d].parent||l.splice(d,1);for(d=0,h=p.callbacks.length;d<h;d++)p.callbacks[d](l,p.name,s)}}return P},h={schema:e,addAttributeFilter:c,getAttributeFilters:f,addNodeFilter:s,getNodeFilters:l,filterNode:u,parse:d};return Ck(h,t),nk(h,t),h},Ik=function(t,e,n){t.addAttributeFilter("data-mce-tabindex",function(t,e){var n,r=t.length;while(r--)n=t[r],n.attr("tabindex",n.attr("data-mce-tabindex")),n.attr(e,null)}),t.addAttributeFilter("src,href,style",function(t,r){var o,i,a=t.length,u="data-mce-"+r,s=e.url_converter,l=e.url_converter_scope;while(a--)o=t[a],i=o.attr(u),void 0!==i?(o.attr(r,i.length>0?i:null),o.attr(u,null)):(i=o.attr(r),"style"===r?i=n.serializeStyle(n.parseStyle(i),o.name):s&&(i=s.call(l,i,r,o.name)),o.attr(r,i.length>0?i:null))}),t.addAttributeFilter("class",function(t){var e,n,r=t.length;while(r--)e=t[r],n=e.attr("class"),n&&(n=e.attr("class").replace(/(?:^|\s)mce-item-\w+(?!\S)/g,""),e.attr("class",n.length>0?n:null))}),t.addAttributeFilter("data-mce-type",function(t,e,n){var r,o=t.length;while(o--)if(r=t[o],"bookmark"===r.attr("data-mce-type")&&!n.cleanup){var i=U.from(r.firstChild).exists(function(t){return!aa(t.value)});i?r.unwrap():r.remove()}}),t.addNodeFilter("noscript",function(t){var e,n=t.length;while(n--)e=t[n].firstChild,e&&(e.value=wu.decode(e.value))}),t.addNodeFilter("script,style",function(t,n){var r,o,i,a=t.length,u=function(t){return t.replace(/(<!--\[CDATA\[|\]\]-->)/g,"\n").replace(/^[\r\n]*|[\r\n]*$/g,"").replace(/^\s*((<!--)?(\s*\/\/)?\s*<!\[CDATA\[|(<!--\s*)?\/\*\s*<!\[CDATA\[\s*\*\/|(\/\/)?\s*<!--|\/\*\s*<!--\s*\*\/)\s*[\r\n]*/gi,"").replace(/\s*(\/\*\s*\]\]>\s*\*\/(-->)?|\s*\/\/\s*\]\]>(-->)?|\/\/\s*(-->)?|\]\]>|\/\*\s*-->\s*\*\/|\s*-->\s*)\s*$/g,"")};while(a--)r=t[a],o=r.firstChild?r.firstChild.value:"","script"===n?(i=r.attr("type"),i&&r.attr("type","mce-no/type"===i?null:i.replace(/^mce\-/,"")),"xhtml"===e.element_format&&o.length>0&&(r.firstChild.value="// <![CDATA[\n"+u(o)+"\n// ]]>")):"xhtml"===e.element_format&&o.length>0&&(r.firstChild.value="\x3c!--\n"+u(o)+"\n--\x3e")}),t.addNodeFilter("#comment",function(t){var r,o=t.length;while(o--)r=t[o],e.preserve_cdata&&0===r.value.indexOf("[CDATA[")?(r.name="#cdata",r.type=4,r.value=n.decode(r.value.replace(/^\[CDATA\[|\]\]$/g,""))):0===r.value.indexOf("mce:protected ")&&(r.name="#text",r.type=3,r.raw=!0,r.value=unescape(r.value).substr(14))}),t.addNodeFilter("xml:namespace,input",function(t,e){var n,r=t.length;while(r--)n=t[r],7===n.type?n.remove():1===n.type&&("input"!==e||n.attr("type")||n.attr("type","text"))}),t.addAttributeFilter("data-mce-type",function(e){J(e,function(e){"format-caret"===e.attr("data-mce-type")&&(e.isEmpty(t.schema.getNonEmptyElements())?e.remove():e.unwrap())})}),t.addAttributeFilter("data-mce-src,data-mce-href,data-mce-style,data-mce-selected,data-mce-expando,data-mce-type,data-mce-resize,data-mce-placeholder",function(t,e){var n=t.length;while(n--)t[n].attr(e,null)})},Ok=function(t){var e=function(t){return t&&"br"===t.name},n=t.lastChild;if(e(n)){var r=n.prev;e(r)&&(n.remove(),r.remove())}},Lk=function(t,e,n){var r,o,i=t.dom;e=e.cloneNode(!0);var a=document.implementation;return a.createHTMLDocument&&(r=a.createHTMLDocument(""),dn.each("BODY"===e.nodeName?e.childNodes:[e],function(t){r.body.appendChild(r.importNode(t,!0))}),e="BODY"!==e.nodeName?r.body.firstChild:r.body,o=i.doc,i.doc=r),Dm(t,Ut(Ut({},n),{node:e})),o&&(i.doc=o),e},Ek=function(t,e){return t&&t.hasEventListeners("PreProcess")&&!e.no_events},Nk=function(t,e,n){return Ek(t,n)?Lk(t,e,n):e},Rk=function(t,e,n){-1===dn.inArray(e,n)&&(t.addAttributeFilter(n,function(t,e){var n=t.length;while(n--)t[n].attr(e,null)}),e.push(n))},Pk=function(t,e,n){if(!e.no_events&&t){var r=Am(t,Ut(Ut({},e),{content:n}));return r.content}return n},zk=function(t,e,n){var r=ua(n.getInner?e.innerHTML:t.getOuterHTML(e));return n.selection||Qi(yn.fromDom(e))?r:dn.trim(r)},Bk=function(t,e,n){var r=n.selection?Ut({forced_root_block:!1},n):n,o=t.parse(e,r);return Ok(o),o},Vk=function(t,e,n){var r=zb(t,e);return r.serialize(n)},Hk=function(t,e,n,r,o){var i=Vk(e,n,r);return Pk(t,o,i)},Fk=function(t,e){var n=["data-mce-selected"],r=e&&e.dom?e.dom:Il.DOM,o=e&&e.schema?e.schema:Lu(t);t.entity_encoding=t.entity_encoding||"named",t.remove_trailing_brs=!("remove_trailing_brs"in t)||t.remove_trailing_brs;var i=Ak(t,o);Ik(i,t,r);var a=function(n,a){void 0===a&&(a={});var u=Ut({format:"html"},a),s=Nk(e,n,u),l=zk(r,s,u),c=Bk(i,l,u);return"tree"===u.format?c:Hk(e,t,o,c,u)};return{schema:o,addNodeFilter:i.addNodeFilter,addAttributeFilter:i.addAttributeFilter,serialize:a,addRules:function(t){o.addValidElements(t)},setRules:function(t){o.setValidElements(t)},addTempAttr:L(Rk,i,n),getTempAttrs:I(n),getNodeFilters:i.getNodeFilters,getAttributeFilters:i.getAttributeFilters}},Wk=function(t,e){var n=Fk(t,e);return{schema:n.schema,addNodeFilter:n.addNodeFilter,addAttributeFilter:n.addAttributeFilter,serialize:n.serialize,addRules:n.addRules,setRules:n.setRules,addTempAttr:n.addTempAttr,getTempAttrs:n.getTempAttrs,getNodeFilters:n.getNodeFilters,getAttributeFilters:n.getAttributeFilters}},Uk="html",Gk=function(t,e){void 0===e&&(e={});var n=e.format?e.format:Uk;return OT(t,e,n)},jk=function(t,e,n){return void 0===n&&(n={}),LT(t,e,n)},Xk=Il.DOM,Yk=function(t){Xk.setStyle(t.id,"display",t.orgDisplay)},qk=function(t){return U.from(t).each(function(t){return t.destroy()})},Zk=function(t){t.contentAreaContainer=t.formElement=t.container=t.editorContainer=null,t.bodyElement=t.contentDocument=t.contentWindow=null,t.iframeElement=t.targetElm=null,t.selection&&(t.selection=t.selection.win=t.selection.dom=t.selection.dom.doc=null)},$k=function(t){var e=t.formElement;e&&(e._mceOldSubmit&&(e.submit=e._mceOldSubmit,e._mceOldSubmit=null),Xk.unbind(e,"submit reset",t.formEventDelegate))},Kk=function(t){if(!t.removed){var e=t._selectionOverrides,n=t.editorUpload,r=t.getBody(),o=t.getElement();r&&t.save({is_removing:!0}),t.removed=!0,t.unbindAllNativeEvents(),t.hasHiddenInput&&o&&Xk.remove(o.nextSibling),Im(t),t.editorManager.remove(t),!t.inline&&r&&Yk(t),Om(t),Xk.remove(t.getContainer()),qk(e),qk(n),t.destroy()}},Jk=function(t,e){var n=t.selection,r=t.dom;t.destroyed||(e||t.removed?(e||(t.editorManager.off("beforeunload",t._beforeUnload),t.theme&&t.theme.destroy&&t.theme.destroy(),qk(n),qk(r)),$k(t),Zk(t),t.destroyed=!0):t.remove())},Qk=Object.prototype.hasOwnProperty,tD=function(t,e){var n=y(t)&&y(e);return n?nD(t,e):e},eD=function(t){return function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];if(0===e.length)throw new Error("Can't merge zero objects");for(var r={},o=0;o<e.length;o++){var i=e[o];for(var a in i)Qk.call(i,a)&&(r[a]=t(r[a],i[a]))}return r}},nD=eD(tD),rD=function(t,e){return{sections:I(t),settings:I(e)}},oD=Ue().deviceType,iD=oD.isTouch(),aD=oD.isPhone(),uD=oD.isTablet(),sD=["lists","autolink","autosave"],lD={table_grid:!1,object_resizing:!1,resize:!1},cD=function(t){var e=b(t)?t.join(" "):t,n=K(v(e)?e.split(" "):[],ce);return et(n,function(t){return t.length>0})},fD=function(t){return et(t,L(Z,sD))},dD=function(t,e){var n=Tt(e,function(e,n){return Z(t,n)});return rD(n.t,n.f)},hD=function(t,e,n){void 0===n&&(n={});var r=t.sections(),o=r.hasOwnProperty(e)?r[e]:{};return dn.extend({},n,o)},pD=function(t,e){return t.sections().hasOwnProperty(e)},gD=function(t,e,n){var r=t.sections();return pD(t,e)&&r[e].theme===n},mD=function(t,e){return pD(t,e)?t.sections()[e]:{}},vD=function(t,e){return It(t,"toolbar_mode").orThunk(function(){return It(t,"toolbar_drawer").map(function(t){return!1===t?"wrap":t})}).getOr(e)},yD=function(t,e,n,r,o){var i={id:e,theme:"silver",toolbar_mode:vD(t,"floating"),plugins:"",document_base_url:n,add_form_submit_trigger:!0,submit_patch:!0,add_unload_trigger:!0,convert_urls:!0,relative_urls:!0,remove_script_host:!0,object_resizing:!0,doctype:"<!DOCTYPE html>",visual:!0,font_size_legacy_values:"xx-small,small,medium,large,x-large,xx-large,300%",forced_root_block:"p",hidden_input:!0,inline_styles:!0,convert_fonts_to_spans:!0,indent:!0,indent_before:"p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,th,ul,ol,li,dl,dt,dd,area,table,thead,tfoot,tbody,tr,section,summary,article,hgroup,aside,figure,figcaption,option,optgroup,datalist",indent_after:"p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,th,ul,ol,li,dl,dt,dd,area,table,thead,tfoot,tbody,tr,section,summary,article,hgroup,aside,figure,figcaption,option,optgroup,datalist",entity_encoding:"named",url_converter:o.convertURL,url_converter_scope:o};return Ut(Ut({},i),r?lD:{})},bD=function(t,e){var n={resize:!1,toolbar_mode:vD(t,"scrolling"),toolbar_sticky:!1},r={menubar:!1};return Ut(Ut(Ut({},lD),n),e?r:{})},xD=function(t,e){var n=e.external_plugins?e.external_plugins:{};return t&&t.external_plugins?dn.extend({},t.external_plugins,n):n},wD=function(t,e){return[].concat(cD(t)).concat(cD(e))},_D=function(t,e,n,r){return t&&gD(e,"mobile","mobile")?fD(r):t&&pD(e,"mobile")?r:n},SD=function(t,e,n,r){var o=cD(n.forced_plugins),i=cD(r.plugins),a=mD(e,"mobile"),u=a.plugins?cD(a.plugins):i,s=_D(t,e,i,u),l=wD(o,s);if(Je.browser.isIE()&&Z(l,"rtc"))throw new Error("RTC plugin is not supported on IE 11.");return dn.extend(r,{plugins:l.join(" ")})},CD=function(t,e){return t&&pD(e,"mobile")},MD=function(t,e,n,r,o){var i=t?{mobile:bD(o.mobile||{},e)}:{},a=dD(["mobile"],nD(i,o)),u=dn.extend(n,r,a.settings(),CD(t,a)?hD(a,"mobile"):{},{validate:!0,external_plugins:xD(r,a.settings())});return SD(t,a,r,u)},TD=function(t,e,n,r,o){var i=yD(o,e,n,iD,t);return MD(aD||uD,aD,i,r,o)},kD=function(t,e,n){return U.from(e.settings[n]).filter(t)},DD=function(t){var e={};return"string"===typeof t?J(t.indexOf("=")>0?t.split(/[;,](?![^=;,]*(?:[;,]|$))/):t.split(","),function(t){var n=t.split("=");n.length>1?e[dn.trim(n[0])]=dn.trim(n[1]):e[dn.trim(n[0])]=dn.trim(n[0])}):e=t,e},AD=function(t){return function(e){return b(e)&&lt(e,t)}},ID=function(t,e,n,r){var o=e in t.settings?t.settings[e]:n;return"hash"===r?DD(o):"string"===r?kD(v,t,e).getOr(n):"number"===r?kD(T,t,e).getOr(n):"boolean"===r?kD(w,t,e).getOr(n):"object"===r?kD(y,t,e).getOr(n):"array"===r?kD(b,t,e).getOr(n):"string[]"===r?kD(AD(v),t,e).getOr(n):"function"===r?kD(M,t,e).getOr(n):o},OD=function(){var t={},e=function(e,n){t[e]=n},n=function(e){return t[e]?t[e]:{icons:{}}},r=function(e){return Ot(t,e)};return{add:e,get:n,has:r}},LD=OD(),ED=function(t,e){var n=e.dom;return n[t]},ND=function(t,e){return parseInt(yo(e,t),10)},RD=L(ED,"clientWidth"),PD=L(ED,"clientHeight"),zD=L(ND,"margin-top"),BD=L(ND,"margin-left"),VD=function(t){return t.dom.getBoundingClientRect()},HD=function(t,e,n){var r=RD(t),o=PD(t);return e>=0&&n>=0&&e<=r&&n<=o},FD=function(t,e,n,r){var o=VD(e),i=t?o.left+e.dom.clientLeft+BD(e):0,a=t?o.top+e.dom.clientTop+zD(e):0,u=n-i,s=r-a;return{x:u,y:s}},WD=function(t,e,n){var r=yn.fromDom(t.getBody()),o=t.inline?r:jn(r),i=FD(t.inline,o,e,n);return HD(o,i.x,i.y)},UD=function(t){return U.from(t).map(yn.fromDom)},GD=function(t){var e=t.inline?t.getBody():t.getContentAreaContainer();return UD(e).map(Mr).getOr(!1)},jD=function(){var t=function(){throw new Error("Theme did not provide a NotificationManager implementation.")};return{open:t,close:t,reposition:t,getArgs:t}},XD=function(t){var e=[],n=function(){var e=t.theme;return e&&e.getNotificationManagerImpl?e.getNotificationManagerImpl():jD()},r=function(){return U.from(e[0])},o=function(t,e){return t.type===e.type&&t.text===e.text&&!t.progressBar&&!t.timeout&&!e.progressBar&&!e.timeout},i=function(){e.length>0&&n().reposition(e)},a=function(t){e.push(t)},u=function(t){at(e,function(e){return e===t}).each(function(t){e.splice(t,1)})},s=function(s,l){if(void 0===l&&(l=!0),!t.removed&&GD(t))return l&&t.fire("BeforeOpenNotification",{notification:s}),it(e,function(t){return o(n().getArgs(t),s)}).getOrThunk(function(){t.editorManager.setActive(t);var e=n().open(s,function(){u(e),i(),r().fold(function(){return t.focus()},function(t){return Uv(yn.fromDom(t.getEl()))})});return a(e),i(),t.fire("OpenNotification",{notification:Ut({},e)}),e})},l=function(){r().each(function(t){n().close(t),u(t),i()})},c=function(){return e},f=function(t){t.on("SkinLoaded",function(){var e=jd(t);e&&s({text:e,type:"warning",timeout:0},!1)}),t.on("ResizeEditor ResizeWindow NodeChange",function(){Ai.requestAnimationFrame(i)}),t.on("remove",function(){J(e.slice(),function(t){n().close(t)})})};return f(t),{open:s,close:l,getNotifications:c}},YD=Ql.PluginManager,qD=Ql.ThemeManager;function ZD(){var t=function(){throw new Error("Theme did not provide a WindowManager implementation.")};return{open:t,openUrl:t,alert:t,confirm:t,close:t,getParams:t,setParams:t}}var $D,KD=function(t){var e=[],n=function(){var e=t.theme;return e&&e.getWindowManagerImpl?e.getWindowManagerImpl():ZD()},r=function(t,e){return function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return e?e.apply(t,n):void 0}},o=function(e){t.fire("OpenWindow",{dialog:e})},i=function(e){t.fire("CloseWindow",{dialog:e})},a=function(t){e.push(t),o(t)},u=function(n){i(n),e=et(e,function(t){return t!==n}),0===e.length&&t.focus()},s=function(){return U.from(e[e.length-1])},l=function(e){t.editorManager.setActive(t),_y(t);var n=e();return a(n),n},c=function(t,e){return l(function(){return n().open(t,e,u)})},f=function(t){return l(function(){return n().openUrl(t,u)})},d=function(t,e,o){var i=n();i.alert(t,r(o||i,e))},h=function(t,e,o){var i=n();i.confirm(t,r(o||i,e))},p=function(){s().each(function(t){n().close(t),u(t)})};return t.on("remove",function(){J(e,function(t){n().close(t)})}),{open:c,openUrl:f,alert:d,confirm:h,close:p}},JD=function(t,e){t.notificationManager.open({type:"error",text:e})},QD=function(t,e){t._skinLoaded?JD(t,e):t.on("SkinLoaded",function(){JD(t,e)})},tA=function(t,e){QD(t,Jl.translate(["Failed to upload image: {0}",e]))},eA=function(t,e,n){Vm(t,e,{message:n}),console.error(n)},nA=function(t,e,n){return n?"Failed to load "+t+": "+n+" from url "+e:"Failed to load "+t+" url: "+e},rA=function(t,e,n){eA(t,"PluginLoadError",nA("plugin",e,n))},oA=function(t,e,n){eA(t,"IconsLoadError",nA("icons",e,n))},iA=function(t,e,n){eA(t,"LanguageLoadError",nA("language",e,n))},aA=function(t,e,n){var r=Jl.translate(["Failed to initialize plugin: {0}",e]);Vm(t,"PluginLoadError",{message:r}),uA(r,n),QD(t,r)},uA=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];var r=window.console;r&&(r.error?r.error.apply(r,jt([t],e)):r.log.apply(r,jt([t],e)))},sA=function(t){return/^[a-z0-9\-]+$/i.test(t)},lA=function(t){return fA(t,zd(t))},cA=function(t){return fA(t,Bd(t))},fA=function(t,e){var n=t.editorManager.baseURL+"/skins/content",r=t.editorManager.suffix,o="content"+r+".css",i=!0===t.inline;return K(e,function(e){return sA(e)&&!i?n+"/"+e+"/"+o:t.documentBaseURI.toAbsolute(e)})},dA=function(t){t.contentCSS=t.contentCSS.concat(lA(t),cA(t))},hA=function(){var t=1,e=2,n={},r=function(t,e){return{status:t,resultUri:e}},o=function(t){return t in n},i=function(t){var e=n[t];return e?e.resultUri:null},a=function(e){return!!o(e)&&n[e].status===t},u=function(t){return!!o(t)&&n[t].status===e},s=function(e){n[e]=r(t,null)},l=function(t,o){n[t]=r(e,o)},c=function(t){delete n[t]},f=function(){n={}};return{hasBlobUri:o,getResultUri:i,isPending:a,isUploaded:u,markPending:s,markUploaded:l,removeFailed:c,destroy:f}},pA=0,gA=function(){var t=function(){return Math.round(4294967295*Math.random()).toString(36)},e=(new Date).getTime();return"s"+e.toString(36)+t()+t()+t()},mA=function(t){return t+pA+++gA()},vA=function(){var t=[],e=function(t){var e={"image/jpeg":"jpg","image/jpg":"jpg","image/gif":"gif","image/png":"png","image/apng":"apng","image/avif":"avif","image/svg+xml":"svg","image/webp":"webp","image/bmp":"bmp","image/tiff":"tiff"};return e[t.toLowerCase()]||"dat"},n=function(t,e,n,o,i){if(v(t)){var a=t;return r({id:a,name:o,filename:i,blob:e,base64:n})}if(y(t))return r(t);throw new Error("Unknown input type")},r=function(t){if(!t.blob||!t.base64)throw new Error("blob and base64 representations of the image are required for BlobInfo to be created");var n=t.id||mA("blobid"),r=t.name||n,o=t.blob;return{id:I(n),name:I(r),filename:I(t.filename||r+"."+e(o.type)),blob:I(o),base64:I(t.base64),blobUri:I(t.blobUri||URL.createObjectURL(o)),uri:I(t.uri)}},o=function(e){a(e.id())||t.push(e)},i=function(e){return it(t,e).getOrUndefined()},a=function(t){return i(function(e){return e.id()===t})},u=function(t){return i(function(e){return e.blobUri()===t})},s=function(t,e){return i(function(n){return n.base64()===t&&n.blob().type===e})},l=function(e){t=et(t,function(t){return t.blobUri()!==e||(URL.revokeObjectURL(t.blobUri()),!1)})},c=function(){J(t,function(t){URL.revokeObjectURL(t.blobUri())}),t=[]};return{create:n,add:o,get:a,getByUri:u,getByData:s,findFirst:i,removeByUri:l,destroy:c}},yA=function(t,e){var n={},r=function(t,e){return t?t.replace(/\/$/,"")+"/"+e.replace(/^\//,""):e},o=function(t,n,o,i){var a=new XMLHttpRequest;a.open("POST",e.url),a.withCredentials=e.credentials,a.upload.onprogress=function(t){i(t.loaded/t.total*100)},a.onerror=function(){o("Image upload failed due to a XHR Transport error. Code: "+a.status)},a.onload=function(){if(a.status<200||a.status>=300)o("HTTP Error: "+a.status);else{var t=JSON.parse(a.responseText);t&&"string"===typeof t.location?n(r(e.basePath,t.location)):o("Invalid JSON: "+a.responseText)}};var u=new FormData;u.append("file",t.blob(),t.filename()),a.send(u)},i=function(){return new _i(function(t){t([])})},a=function(t,e){return{url:e,blobInfo:t,status:!0}},u=function(t,e,n){return{url:"",blobInfo:t,status:!1,error:{message:e,options:n}}},s=function(t,e){dn.each(n[t],function(t){t(e)}),delete n[t]},l=function(e,n,r){return t.markPending(e.blobUri()),new _i(function(o){var i,l;try{var c=function(){i&&(i.close(),l=k)},f=function(n){c(),t.markUploaded(e.blobUri(),n),s(e.blobUri(),a(e,n)),o(a(e,n))},d=function(n,r){var i=r||{};c(),t.removeFailed(e.blobUri()),s(e.blobUri(),u(e,n,i)),o(u(e,n,i))};l=function(t){t<0||t>100||U.from(i).orThunk(function(){return U.from(r).map(R)}).each(function(e){i=e,e.progressBar.value(t)})},n(e,f,d,l)}catch(h){o(u(e,h.message,{}))}})},c=function(t){return t===o},f=function(t){var e=t.blobUri();return new _i(function(t){n[e]=n[e]||[],n[e].push(t)})},d=function(n,r){return n=dn.grep(n,function(e){return!t.isUploaded(e.blobUri())}),_i.all(dn.map(n,function(n){return t.isPending(n.blobUri())?f(n):l(n,e.handler,r)}))},h=function(t,n){return!e.url&&c(e.handler)?i():d(t,n)};return!1===M(e.handler)&&(e.handler=o),{upload:h}},bA=function(t){return function(){return t.notificationManager.open({text:t.translate("Image uploading..."),type:"info",timeout:-1,progressBar:!0})}},xA=function(t,e){return yA(e,{url:kd(t),basePath:Dd(t),credentials:Ad(t),handler:Id(t)})},wA=function(t){var e=hA(),n=xA(t,e);return{upload:function(e,r){return void 0===r&&(r=!0),n.upload(e,r?bA(t):void 0)}}},_A=function(t){var e=Vl(null);t.on("change AddUndo",function(t){e.set(Ut({},t.level))});var n=function(){var n=t.undoManager.data;mt(n).filter(function(t){return!HM(e.get(),t)}).each(function(e){t.setDirty(!0),t.fire("change",{level:e,lastLevel:pt(n,n.length-2).getOrNull()})})};return{fireIfChanged:n}},SA=function(t){var e,n,r=vA(),o=hA(),i=[],a=_A(t),u=function(e){return function(n){return t.selection?e(n):[]}},s=function(t){return t+(-1===t.indexOf("?")?"?":"&")+(new Date).getTime()},l=function(t,e,n){var r=0;do{r=t.indexOf(e,r),-1!==r&&(t=t.substring(0,r)+n+t.substr(r+e.length),r+=n.length-e.length+1)}while(-1!==r);return t},c=function(t,e,n){var r='src="'+n+'"'+(n===Je.transparentSrc?' data-mce-placeholder="1"':"");return t=l(t,'src="'+e+'"',r),t=l(t,'data-mce-src="'+e+'"','data-mce-src="'+n+'"'),t},f=function(e,n){J(t.undoManager.data,function(t){"fragmented"===t.type?t.fragments=K(t.fragments,function(t){return c(t,e,n)}):t.content=c(t.content,e,n)})},d=function(e,n){var r=t.convertURL(n,"src");f(e.src,n),t.$(e).attr({src:Sd(t)?s(n):n,"data-mce-src":r})},h=function(n){return e||(e=xA(t,o)),v().then(u(function(o){var i=K(o,function(t){return t.blobInfo});return e.upload(i,bA(t)).then(u(function(e){var i=[],u=K(e,function(e,n){var a=o[n].blobInfo,u=o[n].image;return e.status&&Cd(t)?(r.removeByUri(u.src),d(u,e.url)):e.error&&(e.error.options.remove&&(f(u.getAttribute("src"),Je.transparentSrc),i.push(u)),tA(t,e.error.message)),{element:u,status:e.status,uploadUri:e.url,blobInfo:a}});return u.length>0&&a.fireIfChanged(),i.length>0&&(aT(t)?console.error("Removing images on failed uploads is currently unsupported for RTC"):t.undoManager.transact(function(){J(i,function(e){t.dom.remove(e),r.removeByUri(e.src)})})),n&&n(u),u}))}))},p=function(e){if(_d(t))return h(e)},g=function(e){if(!1===lt(i,function(t){return t(e)}))return!1;if(0===e.getAttribute("src").indexOf("data:")){var n=wd(t);return n(e)}return!0},m=function(t){i.push(t)},v=function(){return n||(n=hk(o,r)),n.findAll(t.getBody(),g).then(u(function(e){return e=et(e,function(e){return"string"!==typeof e||(QD(t,e),!1)}),J(e,function(t){f(t.image.src,t.blobInfo.blobUri()),t.image.src=t.blobInfo.blobUri(),t.image.removeAttribute("data-mce-src")}),e}))},y=function(){r.destroy(),o.destroy(),n=e=null},b=function(e){return e.replace(/src="(blob:[^"]+)"/g,function(e,n){var i=o.getResultUri(n);if(i)return'src="'+i+'"';var a=r.getByUri(n);if(a||(a=rt(t.editorManager.get(),function(t,e){return t||e.editorUpload&&e.editorUpload.blobCache.getByUri(n)},null)),a){var u=a.blob();return'src="data:'+u.type+";base64,"+a.base64()+'"'}return e})};return t.on("SetContent",function(){_d(t)?p():v()}),t.on("RawSaveContent",function(t){t.content=b(t.content)}),t.on("GetContent",function(t){t.source_view||"raw"===t.format||"tree"===t.format||(t.content=b(t.content))}),t.on("PostRender",function(){t.parser.addNodeFilter("img",function(t){J(t,function(t){var e=t.attr("src");if(!r.getByUri(e)){var n=o.getResultUri(e);n&&t.attr("src",n)}})})}),{blobCache:r,addFilter:m,uploadImages:h,uploadImagesAuto:p,scanForImages:v,destroy:y}},CA=function(t){var e={valigntop:[{selector:"td,th",styles:{verticalAlign:"top"}}],valignmiddle:[{selector:"td,th",styles:{verticalAlign:"middle"}}],valignbottom:[{selector:"td,th",styles:{verticalAlign:"bottom"}}],alignleft:[{selector:"figure.image",collapsed:!1,classes:"align-left",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li",styles:{textAlign:"left"},inherit:!1,preview:!1,defaultBlock:"div"},{selector:"img,table,audio,video",collapsed:!1,styles:{float:"left"},preview:"font-family font-size"}],aligncenter:[{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li",styles:{textAlign:"center"},inherit:!1,preview:"font-family font-size",defaultBlock:"div"},{selector:"figure.image",collapsed:!1,classes:"align-center",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"img,audio,video",collapsed:!1,styles:{display:"block",marginLeft:"auto",marginRight:"auto"},preview:!1},{selector:"table",collapsed:!1,styles:{marginLeft:"auto",marginRight:"auto"},preview:"font-family font-size"}],alignright:[{selector:"figure.image",collapsed:!1,classes:"align-right",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li",styles:{textAlign:"right"},inherit:!1,preview:"font-family font-size",defaultBlock:"div"},{selector:"img,table,audio,video",collapsed:!1,styles:{float:"right"},preview:"font-family font-size"}],alignjustify:[{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li",styles:{textAlign:"justify"},inherit:!1,defaultBlock:"div",preview:"font-family font-size"}],bold:[{inline:"strong",remove:"all",preserve_attributes:["class","style"]},{inline:"span",styles:{fontWeight:"bold"}},{inline:"b",remove:"all",preserve_attributes:["class","style"]}],italic:[{inline:"em",remove:"all",preserve_attributes:["class","style"]},{inline:"span",styles:{fontStyle:"italic"}},{inline:"i",remove:"all",preserve_attributes:["class","style"]}],underline:[{inline:"span",styles:{textDecoration:"underline"},exact:!0},{inline:"u",remove:"all",preserve_attributes:["class","style"]}],strikethrough:[{inline:"span",styles:{textDecoration:"line-through"},exact:!0},{inline:"strike",remove:"all",preserve_attributes:["class","style"]},{inline:"s",remove:"all",preserve_attributes:["class","style"]}],forecolor:{inline:"span",styles:{color:"%value"},links:!0,remove_similar:!0,clear_child_styles:!0},hilitecolor:{inline:"span",styles:{backgroundColor:"%value"},links:!0,remove_similar:!0,clear_child_styles:!0},fontname:{inline:"span",toggle:!1,styles:{fontFamily:"%value"},clear_child_styles:!0},fontsize:{inline:"span",toggle:!1,styles:{fontSize:"%value"},clear_child_styles:!0},lineheight:{selector:"h1,h2,h3,h4,h5,h6,p,li,td,th,div",defaultBlock:"p",styles:{lineHeight:"%value"}},fontsize_class:{inline:"span",attributes:{class:"%value"}},blockquote:{block:"blockquote",wrapper:!0,remove:"all"},subscript:{inline:"sub"},superscript:{inline:"sup"},code:{inline:"code"},link:{inline:"a",selector:"a",remove:"all",split:!0,deep:!0,onmatch:function(t,e,n){return Hr(t)&&t.hasAttribute("href")},onformat:function(e,n,r){dn.each(r,function(n,r){t.setAttrib(e,r,n)})}},removeformat:[{selector:"b,strong,em,i,font,u,strike,s,sub,sup,dfn,code,samp,kbd,var,cite,mark,q,del,ins,small",remove:"all",split:!0,expand:!1,block_expand:!0,deep:!0},{selector:"span",attributes:["style","class"],remove:"empty",split:!0,expand:!1,deep:!0},{selector:"*",attributes:["style","class"],split:!1,expand:!1,deep:!0}]};return dn.each("p h1 h2 h3 h4 h5 h6 div address pre dt dd samp".split(/\s/),function(t){e[t]={block:t,remove:"all"}}),e},MA=function(t){var e={},n=function(t){return t?e[t]:e},r=function(t){return Ot(e,t)},o=function(t,n){t&&("string"!==typeof t?dn.each(t,function(t,e){o(e,t)}):(b(n)||(n=[n]),dn.each(n,function(t){"undefined"===typeof t.deep&&(t.deep=!t.selector),"undefined"===typeof t.split&&(t.split=!t.selector||t.inline),"undefined"===typeof t.remove&&t.selector&&!t.inline&&(t.remove="none"),t.selector&&t.inline&&(t.mixed=!0,t.block_expand=!0),"string"===typeof t.classes&&(t.classes=t.classes.split(/\s+/))}),e[t]=n))},i=function(t){return t&&e[t]&&delete e[t],e};return o(CA(t.dom)),o(Zd(t)),{get:n,has:r,register:o,unregister:i}},TA=dn.each,kA=Il.DOM,DA=function(t,e){var n,r,o,i=e&&e.schema||Lu({}),a=function(t,e){e.classes.length&&kA.addClass(t,e.classes.join(" ")),kA.setAttribs(t,e.attrs)},u=function(t){r="string"===typeof t?{name:t,classes:[],attrs:{}}:t;var e=kA.create(r.name);return a(e,r),e},s=function(t,e){var n="string"!==typeof t?t.nodeName.toLowerCase():t,r=i.getElementRule(n),o=r&&r.parentsRequired;return!(!o||!o.length)&&(e&&-1!==dn.inArray(o,e)?e:o[0])},l=function(t,e,n){var r,o,i=e.length>0&&e[0],a=i&&i.name,c=s(t,a);if(c)a===c?(o=e[0],e=e.slice(1)):o=c;else if(i)o=e[0],e=e.slice(1);else if(!n)return t;return o&&(r=u(o),r.appendChild(t)),n&&(r||(r=kA.create("div"),r.appendChild(t)),dn.each(n,function(e){var n=u(e);r.insertBefore(n,t)})),l(r,e,o&&o.siblings)};return t&&t.length?(r=t[0],n=u(r),o=kA.create("div"),o.appendChild(l(n,t.slice(1),r.siblings)),o):""},AA=function(t){var e,n={classes:[],attrs:{}};return t=n.selector=dn.trim(t),"*"!==t&&(e=t.replace(/(?:([#\.]|::?)([\w\-]+)|(\[)([^\]]+)\]?)/g,function(t,e,r,o,i){switch(e){case"#":n.attrs.id=r;break;case".":n.classes.push(r);break;case":":-1!==dn.inArray("checked disabled enabled read-only required".split(" "),r)&&(n.attrs[r]=r);break}if("["===o){var a=i.match(/([\w\-]+)(?:\=\"([^\"]+))?/);a&&(n.attrs[a[1]]=a[2])}return""})),n.name=e||"div",n},IA=function(t){return t&&"string"===typeof t?(t=t.split(/\s*,\s*/)[0],t=t.replace(/\s*(~\+|~|\+|>)\s*/g,"$1"),dn.map(t.split(/(?:>|\s+(?![^\[\]]+\]))/),function(t){var e=dn.map(t.split(/(?:~\+|~|\+)/),AA),n=e.pop();return e.length&&(n.siblings=e),n}).reverse()):[]},OA=function(t,e){var n,r,o,i="",a=$d(t);if(""===a)return"";var u=function(t){return t.replace(/%(\w+)/g,"")};if("string"===typeof e){if(e=t.formatter.get(e),!e)return;e=e[0]}if("preview"in e){var s=It(e,"preview");if(s.is(!1))return"";a=s.getOr(a)}n=e.block||e.inline||"span";var l=IA(e.selector);l.length?(l[0].name||(l[0].name=n),n=e.selector,r=DA(l,t)):r=DA([n],t);var c=kA.select(n,r)[0]||r.firstChild;return TA(e.styles,function(t,e){var n=u(t);n&&kA.setStyle(c,e,n)}),TA(e.attributes,function(t,e){var n=u(t);n&&kA.setAttrib(c,e,n)}),TA(e.classes,function(t){var e=u(t);kA.hasClass(c,e)||kA.addClass(c,e)}),t.fire("PreviewFormats"),kA.setStyles(r,{position:"absolute",left:-65535}),t.getBody().appendChild(r),o=kA.getStyle(t.getBody(),"fontSize",!0),o=/px$/.test(o)?parseInt(o,10):0,TA(a.split(" "),function(e){var n=kA.getStyle(c,e,!0);if(("background-color"!==e||!/transparent|rgba\s*\([^)]+,\s*0\)/.test(n)||(n=kA.getStyle(t.getBody(),e,!0),"#ffffff"!==kA.toHex(n).toLowerCase()))&&("color"!==e||"#000000"!==kA.toHex(n).toLowerCase())){if("font-size"===e&&/em|%$/.test(n)){if(0===o)return;var r=parseFloat(n)/(/%$/.test(n)?100:1);n=r*o+"px"}"border"===e&&n&&(i+="padding:0 2px;"),i+=e+":"+n+";"}}),t.fire("AfterPreviewFormats"),kA.remove(r),i},LA=function(t){t.addShortcut("meta+b","","Bold"),t.addShortcut("meta+i","","Italic"),t.addShortcut("meta+u","","Underline");for(var e=1;e<=6;e++)t.addShortcut("access+"+e,"",["FormatBlock",!1,"h"+e]);t.addShortcut("access+7","",["FormatBlock",!1,"p"]),t.addShortcut("access+8","",["FormatBlock",!1,"div"]),t.addShortcut("access+9","",["FormatBlock",!1,"address"])},EA=function(t){var e=MA(t),n=Vl(null);return LA(t),NS(t),{get:e.get,has:e.has,register:e.register,unregister:e.unregister,apply:function(e,n,r){kT(t,e,n,r)},remove:function(e,n,r,o){DT(t,e,n,r,o)},toggle:function(e,n,r){AT(t,e,n,r)},match:function(e,n,r){return _T(t,e,n,r)},closest:function(e){return TT(t,e)},matchAll:function(e,n){return ST(t,e,n)},matchNode:function(e,n,r,o){return CT(t,e,n,r,o)},canApply:function(e){return MT(t,e)},formatChanged:function(e,r,o){return IT(t,n,e,r,o)},getCssText:L(OA,t)}},NA=function(t,e,n){var r=Vl(!1),o=function(t){WM(e,!1,n),e.add({},t)};t.on("init",function(){e.add()}),t.on("BeforeExecCommand",function(t){var r=t.command.toLowerCase();"undo"!==r&&"redo"!==r&&"mcerepaint"!==r&&(UM(e,n),e.beforeChange())}),t.on("ExecCommand",function(t){var e=t.command.toLowerCase();"undo"!==e&&"redo"!==e&&"mcerepaint"!==e&&o(t)}),t.on("ObjectResizeStart cut",function(){e.beforeChange()}),t.on("SaveContent ObjectResized blur",o),t.on("dragend",o),t.on("keyup",function(n){var i=n.keyCode;n.isDefaultPrevented()||((i>=33&&i<=36||i>=37&&i<=40||45===i||n.ctrlKey)&&(o(),t.nodeChanged()),46!==i&&8!==i||t.nodeChanged(),r.get()&&e.typing&&!1===HM(NM(t),e.data[0])&&(!1===t.isDirty()&&(t.setDirty(!0),t.fire("change",{level:e.data[0],lastLevel:null})),t.fire("TypingUndo"),r.set(!1),t.nodeChanged()))}),t.on("keydown",function(t){var i=t.keyCode;if(!t.isDefaultPrevented())if(i>=33&&i<=36||i>=37&&i<=40||45===i)e.typing&&o(t);else{var a=t.ctrlKey&&!t.altKey||t.metaKey;!(i<16||i>20)||224===i||91===i||e.typing||a||(e.beforeChange(),WM(e,!0,n),e.add({},t),r.set(!0))}}),t.on("mousedown",function(t){e.typing&&o(t)});var i=function(t){return"insertReplacementText"===t.inputType},a=function(t){return"insertText"===t.inputType&&null===t.data},u=function(t){return"insertFromPaste"===t.inputType||"insertFromDrop"===t.inputType};t.on("input",function(t){t.inputType&&(i(t)||a(t)||u(t))&&o(t)}),t.on("AddUndo Undo Redo ClearUndos",function(e){e.isDefaultPrevented()||t.nodeChanged()})},RA=function(t){t.addShortcut("meta+z","","Undo"),t.addShortcut("meta+y,meta+shift+z","","Redo")},PA=function(t){var e=Vl(U.none()),n=Vl(0),r=Vl(0),o={data:[],typing:!1,beforeChange:function(){fT(t,n,e)},add:function(i,a){return dT(t,o,r,n,e,i,a)},undo:function(){return hT(t,o,n,r)},redo:function(){return pT(t,r,o.data)},clear:function(){gT(t,o,r)},reset:function(){mT(t,o)},hasUndo:function(){return vT(t,o,r)},hasRedo:function(){return yT(t,o,r)},transact:function(e){return bT(t,o,n,e)},ignore:function(e){xT(t,n,e)},extra:function(e,n){wT(t,o,r,e,n)}};return aT(t)||NA(t,o,n),RA(t),o},zA=[9,27,Hm.HOME,Hm.END,19,20,44,144,145,33,34,45,16,17,18,91,92,93,Hm.DOWN,Hm.UP,Hm.LEFT,Hm.RIGHT].concat(Je.browser.isFirefox()?[224]:[]),BA="data-mce-placeholder",VA=function(t){return"keydown"===t.type||"keyup"===t.type},HA=function(t){var e=t.keyCode;return e===Hm.BACKSPACE||e===Hm.DELETE},FA=function(t){if(VA(t)){var e=t.keyCode;return!HA(t)&&(Hm.metaKeyPressed(t)||t.altKey||e>=112&&e<=123||Z(zA,e))}return!1},WA=function(t){return VA(t)&&!(HA(t)||"keyup"===t.type&&229===t.keyCode)},UA=function(t,e,n){if(Za(yn.fromDom(e),!1)){var r=""===n,o=e.firstElementChild;return!o||!t.getStyle(e.firstElementChild,"padding-left")&&!t.getStyle(e.firstElementChild,"padding-right")&&(r?!t.isBlock(o):n===o.nodeName.toLowerCase())}return!1},GA=function(t){var e=t.dom,n=hd(t),r=Ud(t),o=function(i,a){if(!FA(i)){var u=t.getBody(),s=!WA(i)&&UA(e,u,n),l=""!==e.getAttrib(u,BA);(l!==s||a)&&(e.setAttrib(u,BA,s?r:null),e.setAttrib(u,"aria-placeholder",s?r:null),Bm(t,s),t.on(s?"keydown":"keyup",o),t.off(s?"keyup":"keydown",o))}};r&&t.on("init",function(e){o(e,!0),t.on("change SetContent ExecCommand",o),t.on("paste",function(e){return Ai.setEditorTimeout(t,function(){return o(e)})})})},jA=/[\u0591-\u07FF\uFB1D-\uFDFF\uFE70-\uFEFC]/,XA=function(t){return jA.test(t)},YA=function(t,e){return kn(yn.fromDom(e),Hd(t))},qA=function(t){return"rtl"===Il.DOM.getStyle(t,"direction",!0)||XA(t.textContent)},ZA=function(t,e,n){return et(Il.DOM.getParents(n.container(),"*",e),t)},$A=function(t,e,n){var r=ZA(t,e,n);return U.from(r[r.length-1])},KA=function(t,e,n){var r=Kh(e,t),o=Kh(n,t);return r&&r===o},JA=function(t){return ga(t)||ma(t)},QA=function(t,e){if(!e)return e;var n=e.container(),r=e.offset();return t?fa(n)?$r(n.nextSibling)?wf(n.nextSibling,0):wf.after(n):ga(e)?wf(n,r+1):e:fa(n)?$r(n.previousSibling)?wf(n.previousSibling,n.previousSibling.data.length):wf.before(n):ma(e)?wf(n,r-1):e},tI=L(QA,!0),eI=L(QA,!1),nI=function(t){return function(e){return On(t,yn.fromDom(e.dom.parentNode))}},rI=function(t,e){return Nn(t,e)?gi(e,function(t){return qi(t)||$i(t)},nI(t)):U.none()},oI=function(t){var e=t.getBody(),n=e.firstChild&&t.dom.isBlock(e.firstChild)?e.firstChild:e;t.selection.setCursorLocation(n,0)},iI=function(t){t.dom.isEmpty(t.getBody())&&(t.setContent(""),oI(t))},aI=function(t,e,n){return zc(Bp(n),Vp(n),function(r,o){var i=QA(!0,r),a=QA(!1,o),u=QA(!1,e);return t?Pp(n,u).exists(function(t){return t.isEqual(a)&&e.isEqual(i)}):zp(n,u).exists(function(t){return t.isEqual(i)&&e.isEqual(a)})}).getOr(!0)},uI=function(t,e){return{block:t,position:e}},sI=function(t,e){return{from:t,to:e}},lI=function(t,e){var n=yn.fromDom(t),r=yn.fromDom(e.container());return rI(n,r).map(function(t){return uI(t,e)})},cI=function(t){return!1===On(t.from.block,t.to.block)},fI=function(t){return Yn(t.from.block).bind(function(e){return Yn(t.to.block).filter(function(t){return On(e,t)})}).isSome()},dI=function(t){return!1===ro(t.from.block.dom)&&!1===ro(t.to.block.dom)},hI=function(t,e,n){return to(n.position.getNode())&&!1===Za(n.block)?Rp(!1,n.block.dom).bind(function(r){return r.isEqual(n.position)?Lp(e,t,r).bind(function(e){return lI(t,e)}):U.some(n)}).getOr(n):n},pI=function(t,e,n){var r=lI(t,wf.fromRangeStart(n)),o=r.bind(function(n){return Lp(e,t,n.position).bind(function(n){return lI(t,n).map(function(n){return hI(t,e,n)})})});return zc(r,o,sI).filter(function(t){return cI(t)&&fI(t)&&dI(t)})},gI=function(t,e,n){return n.collapsed?pI(t,e,n):U.none()},mI=function(t){var e=tr(t);return at(e,Gi).fold(function(){return e},function(t){return e.slice(0,t)})},vI=function(t){var e=mI(t);return J(e,Sr),e},yI=function(t,e){var n=hx(e,t);return it(n.reverse(),function(t){return Za(t)}).each(Sr)},bI=function(t){return 0===et(Jn(t),function(t){return!Za(t)}).length},xI=function(t,e,n,r){if(Za(n))return sx(n),Bp(n.dom);bI(r)&&Za(e)&&gr(r,yn.fromTag("br"));var o=zp(n.dom,wf.before(r.dom));return J(vI(e),function(t){gr(r,t)}),yI(t,e),o},wI=function(t,e,n){if(Za(n))return Sr(n),Za(e)&&sx(e),Bp(e.dom);var r=Vp(n.dom);return J(vI(e),function(t){yr(n,t)}),yI(t,e),r},_I=function(t,e){var n=hx(e,t);return U.from(n[n.length-1])},SI=function(t,e){return Nn(e,t)?_I(e,t):U.none()},CI=function(t,e){Rp(t,e.dom).map(function(t){return t.getNode()}).map(yn.fromDom).filter(Yi).each(Sr)},MI=function(t,e,n){return CI(!0,e),CI(!1,n),SI(e,n).fold(L(wI,t,e,n),L(xI,t,e,n))},TI=function(t,e,n,r){return e?MI(t,r,n):MI(t,n,r)},kI=function(t,e){var n=yn.fromDom(t.getBody()),r=gI(n.dom,e,t.selection.getRng()).bind(function(t){return TI(n,e,t.from.block,t.to.block)});return r.each(function(e){t.selection.setRng(e.toRange())}),r.isSome()},DI=function(t,e){var n=e.getRng();return zc(rI(t,yn.fromDom(n.startContainer)),rI(t,yn.fromDom(n.endContainer)),function(r,o){return!1===On(r,o)&&(n.deleteContents(),TI(t,!0,r,o).each(function(t){e.setRng(t.toRange())}),!0)}).getOr(!1)},AI=function(t,e){var n=yn.fromDom(e),r=L(On,t);return pi(n,Ji,r).isSome()},II=function(t,e){return AI(t,e.startContainer)||AI(t,e.endContainer)},OI=function(t,e){var n=zp(t.dom,wf.fromRangeStart(e)).isNone(),r=Pp(t.dom,wf.fromRangeEnd(e)).isNone();return!II(t,e)&&n&&r},LI=function(t){return t.setContent(""),t.selection.setCursorLocation(),!0},EI=function(t){var e=yn.fromDom(t.getBody()),n=t.selection.getRng();return OI(e,n)?LI(t):DI(e,t.selection)},NI=function(t,e){return!t.selection.isCollapsed()&&EI(t)},RI=no,PI=ro,zI=function(t,e,n,r,o){return U.from(e._selectionOverrides.showCaret(t,n,r,o))},BI=function(t){var e=t.ownerDocument.createRange();return e.selectNode(t),e},VI=function(t,e){var n=t.fire("BeforeObjectSelected",{target:e});return n.isDefaultPrevented()?U.none():U.some(BI(e))},HI=function(t,e,n){var r=ip(1,t.getBody(),e),o=wf.fromRangeStart(r),i=o.getNode();if(Bh(i))return zI(1,t,i,!o.isAtEnd(),!1);var a=o.getNode(!0);if(Bh(a))return zI(1,t,a,!1,!1);var u=t.dom.getParent(o.getNode(),function(t){return PI(t)||RI(t)});return Bh(u)?zI(1,t,u,!1,n):U.none()},FI=function(t,e,n){return e.collapsed?HI(t,e,n).getOr(e):e},WI=function(t){return ox(t)||tx(t)},UI=function(t){return ix(t)||ex(t)},GI=function(t,e){$r(e)&&0===e.data.length&&t.remove(e)},jI=function(t,e,n,r,o,i){return zI(r,t,i.getNode(!o),o,!0).each(function(n){if(e.collapsed){var r=e.cloneRange();o?r.setEnd(n.startContainer,n.startOffset):r.setStart(n.endContainer,n.endOffset),r.deleteContents()}else e.deleteContents();t.selection.setRng(n)}),GI(t.dom,n),!0},XI=function(t,e){var n=t.selection.getRng();if(!$r(n.commonAncestorContainer))return!1;var r=e?_f.Forwards:_f.Backwards,o=Cp(t.getBody()),i=L(cp,e?o.next:o.prev),a=e?WI:UI,u=up(r,t.getBody(),n),s=QA(e,i(u));if(!s||!fp(u,s))return!1;if(a(s))return jI(t,n,u.getNode(),r,e,s);var l=i(s);return!!(l&&a(l)&&fp(s,l))&&jI(t,n,u.getNode(),r,e,l)},YI=function(t,e){return XI(t,e)},qI=function(t){return Ji(yn.fromDom(t))||$i(yn.fromDom(t))},ZI=Xo.generate([{remove:["element"]},{moveToElement:["element"]},{moveToPosition:["position"]}]),$I=function(t,e){var n=e.getNode(!1===t),r=t?"after":"before";return Hr(n)&&n.getAttribute("data-mce-caret")===r},KI=function(t,e,n,r){var o=function(e){return Xi(yn.fromDom(e))&&!Jh(n,r,t)};return ap(!e,n).fold(function(){return ap(e,r).fold(z,o)},o)},JI=function(t,e,n,r){var o=r.getNode(!1===e);return rI(yn.fromDom(t),yn.fromDom(n.getNode())).map(function(t){return Za(t)?ZI.remove(t.dom):ZI.moveToElement(o)}).orThunk(function(){return U.some(ZI.moveToElement(o))})},QI=function(t,e,n){return Lp(e,t,n).bind(function(r){return qI(r.getNode())?U.none():KI(t,e,n,r)?U.none():e&&ro(r.getNode())?JI(t,e,n,r):!1===e&&ro(r.getNode(!0))?JI(t,e,n,r):e&&ix(n)?U.some(ZI.moveToPosition(r)):!1===e&&ox(n)?U.some(ZI.moveToPosition(r)):U.none()})},tO=function(t,e){return t&&ro(e.nextSibling)?U.some(ZI.moveToElement(e.nextSibling)):!1===t&&ro(e.previousSibling)?U.some(ZI.moveToElement(e.previousSibling)):U.none()},eO=function(t,e,n){return n.fold(function(t){return U.some(ZI.remove(t))},function(t){return U.some(ZI.moveToElement(t))},function(n){return Jh(e,n,t)?U.none():U.some(ZI.moveToPosition(n))})},nO=function(t,e,n){return $I(e,n)?tO(e,n.getNode(!1===e)).fold(function(){return QI(t,e,n)},U.some):QI(t,e,n).bind(function(e){return eO(t,n,e)})},rO=function(t,e,n){var r=ip(e?1:-1,t,n),o=wf.fromRangeStart(r),i=yn.fromDom(t);return!1===e&&ix(o)?U.some(ZI.remove(o.getNode(!0))):e&&ox(o)?U.some(ZI.remove(o.getNode())):!1===e&&ox(o)&&Mx(i,o)?Tx(i,o).map(function(t){return ZI.remove(t.getNode())}):e&&ix(o)&&Cx(i,o)?kx(i,o).map(function(t){return ZI.remove(t.getNode())}):nO(t,e,o)},oO=function(t,e){return function(n){return t._selectionOverrides.hideFakeCaret(),bw(t,e,yn.fromDom(n)),!0}},iO=function(t,e){return function(n){var r=e?wf.before(n):wf.after(n);return t.selection.setRng(r.toRange()),!0}},aO=function(t){return function(e){return t.selection.setRng(e.toRange()),!0}},uO=function(t,e){return U.from(Tm(t.getBody(),e))},sO=function(t,e){var n=t.selection.getNode();return uO(t,n).filter(ro).fold(function(){return rO(t.getBody(),e,t.selection.getRng()).exists(function(n){return n.fold(oO(t,e),iO(t,e),aO(t))})},B)},lO=function(t){J(pc(t,".mce-offscreen-selection"),Sr)},cO=function(t,e){var n=t.selection.getNode();if(ro(n)){var r=uO(t,n.parentNode).filter(ro);return r.fold(function(){return lO(yn.fromDom(t.getBody())),bw(t,e,yn.fromDom(t.selection.getNode())),iI(t),!0},B)}return!1},fO=function(t){var e=t.dom,n=t.selection,r=Tm(t.getBody(),n.getNode());if(no(r)&&e.isBlock(r)&&e.isEmpty(r)){var o=e.create("br",{"data-mce-bogus":"1"});e.setHTML(r,""),r.appendChild(o),n.setRng(wf.before(o).toRange())}return!0},dO=function(t,e){return t.selection.isCollapsed()?sO(t,e):cO(t,e)},hO=function(t,e){var n=wf.fromRangeStart(t.selection.getRng());return Lp(e,t.getBody(),n).filter(function(t){return e?Jb(t):Qb(t)}).bind(function(t){return U.from(Qh(e?0:-1,t))}).exists(function(e){return t.selection.select(e),!0})},pO=function(t,e){return!!t.selection.isCollapsed()&&hO(t,e)},gO=$r,mO=function(t){return gO(t)&&t.data[0]===ia},vO=function(t){return gO(t)&&t.data[t.data.length-1]===ia},yO=function(t){return t.ownerDocument.createTextNode(ia)},bO=function(t){if(gO(t.previousSibling))return vO(t.previousSibling)?t.previousSibling:(t.previousSibling.appendData(ia),t.previousSibling);if(gO(t))return mO(t)?t:(t.insertData(0,ia),t);var e=yO(t);return t.parentNode.insertBefore(e,t),e},xO=function(t){if(gO(t.nextSibling))return mO(t.nextSibling)?t.nextSibling:(t.nextSibling.insertData(0,ia),t.nextSibling);if(gO(t))return vO(t)?t:(t.appendData(ia),t);var e=yO(t);return t.nextSibling?t.parentNode.insertBefore(e,t.nextSibling):t.parentNode.appendChild(e),e},wO=function(t,e){return t?bO(e):xO(e)},_O=L(wO,!0),SO=L(wO,!1),CO=function(t,e){return $r(t.container())?wO(e,t.container()):wO(e,t.getNode())},MO=function(t,e){var n=e.get();return n&&t.container()===n&&fa(n)},TO=function(t,e){return e.fold(function(e){Dh(t.get());var n=_O(e);return t.set(n),U.some(wf(n,n.length-1))},function(e){return Bp(e).map(function(e){if(MO(e,t))return wf(t.get(),1);Dh(t.get());var n=CO(e,!0);return t.set(n),wf(n,1)})},function(e){return Vp(e).map(function(e){if(MO(e,t))return wf(t.get(),t.get().length-1);Dh(t.get());var n=CO(e,!1);return t.set(n),wf(n,n.length-1)})},function(e){Dh(t.get());var n=SO(e);return t.set(n),U.some(wf(n,1))})},kO=function(t,e){for(var n=0;n<t.length;n++){var r=t[n].apply(null,e);if(r.isSome())return r}return U.none()},DO=Xo.generate([{before:["element"]},{start:["element"]},{end:["element"]},{after:["element"]}]),AO=function(t,e){var n=Kh(e,t);return n||t},IO=function(t,e,n){var r=tI(n),o=AO(e,r.container());return $A(t,o,r).fold(function(){return Pp(o,r).bind(L($A,t,o)).map(function(t){return DO.before(t)})},U.none)},OO=function(t,e){return null===Wp(t,e)},LO=function(t,e,n){return $A(t,e,n).filter(L(OO,e))},EO=function(t,e,n){var r=eI(n);return LO(t,e,r).bind(function(t){var e=zp(t,r);return e.isNone()?U.some(DO.start(t)):U.none()})},NO=function(t,e,n){var r=tI(n);return LO(t,e,r).bind(function(t){var e=Pp(t,r);return e.isNone()?U.some(DO.end(t)):U.none()})},RO=function(t,e,n){var r=eI(n),o=AO(e,r.container());return $A(t,o,r).fold(function(){return zp(o,r).bind(L($A,t,o)).map(function(t){return DO.after(t)})},U.none)},PO=function(t){return!1===qA(BO(t))},zO=function(t,e,n){var r=kO([IO,EO,NO,RO],[t,e,n]);return r.filter(PO)},BO=function(t){return t.fold(O,O,O,O)},VO=function(t){return t.fold(I("before"),I("start"),I("end"),I("after"))},HO=function(t){return t.fold(DO.before,DO.before,DO.after,DO.after)},FO=function(t){return t.fold(DO.start,DO.start,DO.end,DO.end)},WO=function(t,e){return VO(t)===VO(e)&&BO(t)===BO(e)},UO=function(t,e,n,r,o,i){return zc($A(e,n,r),$A(e,n,o),function(e,r){return e!==r&&KA(n,e,r)?DO.after(t?e:r):i}).getOr(i)},GO=function(t,e){return t.fold(B,function(t){return!WO(t,e)})},jO=function(t,e,n,r,o){var i=QA(t,o),a=Lp(t,n,i).map(L(QA,t)),u=a.fold(function(){return r.map(HO)},function(o){return zO(e,n,o).map(L(UO,t,e,n,i,o)).filter(L(GO,r))});return u.filter(PO)},XO=function(t,e){return t?e.fold(D(U.some,DO.start),U.none,D(U.some,DO.after),U.none):e.fold(U.none,D(U.some,DO.before),U.none,D(U.some,DO.end))},YO=function(t,e,n,r){var o=QA(t,r),i=zO(e,n,o);return zO(e,n,o).bind(L(XO,t)).orThunk(function(){return jO(t,e,n,i,r)})},qO=(L(YO,!1),L(YO,!0),function(t){return M(t.selection.getSel().modify)}),ZO=function(t,e,n){var r=t?1:-1;return e.setRng(wf(n.container(),n.offset()+r).toRange()),e.getSel().modify("move",t?"forward":"backward","word"),!0},$O=function(t,e){var n=e.selection.getRng(),r=t?wf.fromRangeEnd(n):wf.fromRangeStart(n);return!!qO(e)&&(t&&ga(r)?ZO(!0,e.selection,r):!(t||!ma(r))&&ZO(!1,e.selection,r))};(function(t){t[t["Br"]=0]="Br",t[t["Block"]=1]="Block",t[t["Wrap"]=2]="Wrap",t[t["Eol"]=3]="Eol"})($D||($D={}));var KO,JO=function(t,e){return t===_f.Backwards?ct(e):e},QO=function(t,e,n){return t===_f.Forwards?e.next(n):e.prev(n)},tL=function(t,e,n,r){return to(r.getNode(e===_f.Forwards))?$D.Br:!1===Jh(n,r)?$D.Block:$D.Wrap},eL=function(t,e,n,r){var o,i=Cp(n),a=r,u=[];while(a){if(o=QO(e,i,a),!o)break;if(to(o.getNode(!1)))return e===_f.Forwards?{positions:JO(e,u).concat([o]),breakType:$D.Br,breakAt:U.some(o)}:{positions:JO(e,u),breakType:$D.Br,breakAt:U.some(o)};if(o.isVisible()){if(t(a,o)){var s=tL(n,e,a,o);return{positions:JO(e,u),breakType:s,breakAt:U.some(o)}}u.push(o),a=o}else a=o}return{positions:JO(e,u),breakType:$D.Eol,breakAt:U.none()}},nL=function(t,e,n,r){return e(n,r).breakAt.map(function(r){var o=e(n,r).positions;return t===_f.Backwards?o.concat(r):[r].concat(o)}).getOr([])},rL=function(t,e){return rt(t,function(t,n){return t.fold(function(){return U.some(n)},function(r){return zc(gt(r.getClientRects()),gt(n.getClientRects()),function(t,o){var i=Math.abs(e-t.left),a=Math.abs(e-o.left);return a<=i?n:r}).or(t)})},U.none())},oL=function(t,e){return gt(e.getClientRects()).bind(function(e){return rL(t,e.left)})},iL=L(eL,wf.isAbove,-1),aL=L(eL,wf.isBelow,1),uL=function(t,e){return iL(t,e).breakAt.isNone()},sL=function(t,e){return aL(t,e).breakAt.isNone()},lL=L(nL,-1,iL),cL=L(nL,1,aL),fL=function(t){return Bp(t).map(function(e){return[e].concat(aL(t,e).positions)}).getOr([])},dL=function(t){return Vp(t).map(function(e){return iL(t,e).positions.concat(e)}).getOr([])},hL=function(t){var e=function(e){return K(e,function(e){return e=Fc(e),e.node=t,e})};if(Hr(t))return e(t.getClientRects());if($r(t)){var n=t.ownerDocument.createRange();return n.setStart(t,0),n.setEnd(t,t.data.length),e(n.getClientRects())}},pL=function(t){return st(t,hL)};(function(t){t[t["Up"]=-1]="Up",t[t["Down"]=1]="Down"})(KO||(KO={}));var gL,mL,vL=function(t,e,n,r){while(r=$h(r,t,Ba,e))if(n(r))return},yL=function(t,e,n,r,o,i){var a=0,u=[],s=function(r){var i,s,c;for(c=pL([r]),-1===t&&(c=c.reverse()),i=0;i<c.length;i++)if(s=c[i],!n(s,l)){if(u.length>0&&e(s,Wt(u))&&a++,s.line=a,o(s))return!0;u.push(s)}},l=Wt(i.getClientRects());if(!l)return u;var c=i.getNode();return s(c),vL(t,r,s,c),u},bL=function(t,e){return e.line>t},xL=function(t,e){return e.line===t},wL=L(yL,KO.Up,jc,Xc),_L=L(yL,KO.Down,Xc,jc),SL=function(t,e,n,r){var o,i,a,u,s,l=Cp(e),c=[],f=0,d=function(t){return Wt(t.getClientRects())};1===t?(o=l.next,i=Xc,a=jc,u=wf.after(r)):(o=l.prev,i=jc,a=Xc,u=wf.before(r));var h=d(u);do{if(u.isVisible()&&(s=d(u),!a(s,h))){if(c.length>0&&i(s,Wt(c))&&f++,s=Fc(s),s.position=u,s.line=f,n(s))return c;c.push(s)}}while(u=o(u));return c},CL=function(t){return function(e){return bL(t,e)}},ML=function(t){return function(e){return xL(t,e)}},TL=ro,kL=$h,DL=function(t,e){return Math.abs(t.left-e)},AL=function(t,e){return Math.abs(t.right-e)},IL=function(t,e){return t>=e.left&&t<=e.right},OL=function(t,e){return t>=e.top&&t<=e.bottom},LL=function(t,e){return Ht(t,function(t,n){var r=Math.min(DL(t,e),AL(t,e)),o=Math.min(DL(n,e),AL(n,e));return IL(e,n)?n:IL(e,t)?t:o===r&&TL(n.node)?n:o<r?n:t})},EL=function(t,e,n,r,o){var i=kL(r,t,Ba,e,!o);do{if(!i||n(i))return}while(i=kL(i,t,Ba,e))},NL=function(t,e,n){void 0===n&&(n=!0);var r=[],o=function(t,n){var o=et(pL([n]),function(n){return!t(n,e)});return r=r.concat(o),0===o.length};return r.push(e),EL(KO.Up,t,L(o,jc),e.node,n),EL(KO.Down,t,L(o,Xc),e.node,n),r},RL=function(t){return et(vt(t.getElementsByTagName("*")),Vh)},PL=function(t,e){return{node:t.node,before:DL(t,e)<AL(t,e)}},zL=function(t,e,n){var r=pL(RL(t)),o=et(r,L(OL,n)),i=LL(o,e);if(i){var a=!Yr(i.node)&&!io(i.node);if(i=LL(NL(t,i,a),e),i&&Vh(i.node))return PL(i,e)}return null},BL=function(t,e){t.selection.setRng(e),Fv(t,t.selection.getRng())},VL=function(t,e,n){return U.some(FI(t,e,n))},HL=function(t,e,n,r,o,i){var a=e===_f.Forwards,u=Cp(t.getBody()),s=L(cp,a?u.next:u.prev),l=a?r:o;if(!n.collapsed){var c=qc(n);if(i(c))return zI(e,t,c,e===_f.Backwards,!1)}var f=up(e,t.getBody(),n);if(l(f))return VI(t,f.getNode(!a));var d=QA(a,s(f)),h=Sa(n);if(!d)return h?U.some(n):U.none();if(l(d))return zI(e,t,d.getNode(!a),a,!1);var p=s(d);return p&&l(p)&&fp(d,p)?zI(e,t,p.getNode(!a),a,!1):h?VL(t,d.toRange(),!1):U.none()},FL=function(t,e,n,r,o,i){var a=up(e,t.getBody(),n),u=Wt(a.getClientRects()),s=e===KO.Down;if(!u)return U.none();var l,c=s?_L:wL,f=c(t.getBody(),CL(1),a),d=et(f,ML(1)),h=u.left,p=LL(d,h);if(p&&i(p.node)){var g=Math.abs(h-p.left),m=Math.abs(h-p.right);return zI(e,t,p.node,g<m,!1)}if(l=r(a)?a.getNode():o(a)?a.getNode(!0):qc(n),l){var v=SL(e,t.getBody(),CL(1),l),y=LL(et(v,ML(1)),h);if(y)return VL(t,y.position.toRange(),!1);if(y=Wt(et(v,ML(0))),y)return VL(t,y.position.toRange(),!1)}return 0===d.length?WL(t,s).filter(s?o:r).map(function(e){return FI(t,e.toRange(),!1)}):U.none()},WL=function(t,e){var n=t.selection.getRng(),r=t.getBody();if(e){var o=wf.fromRangeEnd(n),i=aL(r,o);return mt(i.positions)}o=wf.fromRangeStart(n),i=iL(r,o);return gt(i.positions)},UL=function(t,e,n){return WL(t,e).filter(n).exists(function(e){return t.selection.setRng(e.toRange()),!0})},GL=function(t,e){var n=t.dom.createRng();n.setStart(e.container(),e.offset()),n.setEnd(e.container(),e.offset()),t.selection.setRng(n)},jL=function(t,e){t?e.setAttribute("data-mce-selected","inline-boundary"):e.removeAttribute("data-mce-selected")},XL=function(t,e,n){return TO(e,n).map(function(e){return GL(t,e),n})},YL=function(t,e,n){var r=t.getBody(),o=wf.fromRangeStart(t.selection.getRng()),i=L(YA,t),a=YO(n,i,r,o);return a.bind(function(n){return XL(t,e,n)})},qL=function(t,e,n){var r=K(pc(yn.fromDom(e.getRoot()),'*[data-mce-selected="inline-boundary"]'),function(t){return t.dom}),o=et(r,t),i=et(n,t);J(ft(o,i),L(jL,!1)),J(ft(i,o),L(jL,!0))},ZL=function(t,e){if(t.selection.isCollapsed()&&!0!==t.composing&&e.get()){var n=wf.fromRangeStart(t.selection.getRng());wf.isTextPosition(n)&&!1===JA(n)&&(GL(t,kh(e.get(),n)),e.set(null))}},$L=function(t,e,n,r){if(e.selection.isCollapsed()){var o=et(r,t);J(o,function(r){var o=wf.fromRangeStart(e.selection.getRng());zO(t,e.getBody(),o).bind(function(t){return XL(e,n,t)})})}},KL=function(t,e,n){return!!qd(t)&&YL(t,e,n).isSome()},JL=function(t,e,n){return!!qd(e)&&$O(t,e)},QL=function(t){var e=Vl(null),n=L(YA,t);return t.on("NodeChange",function(r){!qd(t)||Je.browser.isIE()&&r.initial||(qL(n,t.dom,r.parents),ZL(t,e),$L(n,t,e,r.parents))}),e},tE=L(JL,!0),eE=L(JL,!1),nE=function(t,e,n){if(qd(t)){var r=WL(t,e).getOrThunk(function(){var n=t.selection.getRng();return e?wf.fromRangeEnd(n):wf.fromRangeStart(n)});return zO(L(YA,t),t.getBody(),r).exists(function(e){var r=HO(e);return TO(n,r).exists(function(e){return GL(t,e),!0})})}return!1},rE=function(t,e){var n=document.createRange();return n.setStart(t.container(),t.offset()),n.setEnd(e.container(),e.offset()),n},oE=function(t){return zc(Bp(t),Vp(t),function(e,n){var r=QA(!0,e),o=QA(!1,n);return Pp(t,r).forall(function(t){return t.isEqual(o)})}).getOr(!0)},iE=function(t,e){return function(n){return TO(e,n).exists(function(e){return GL(t,e),!0})}},aE=function(t,e,n,r){var o=t.getBody(),i=L(YA,t);t.undoManager.ignore(function(){t.selection.setRng(rE(n,r)),t.execCommand("Delete"),zO(i,o,wf.fromRangeStart(t.selection.getRng())).map(FO).map(iE(t,e))}),t.nodeChanged()},uE=function(t,e){var n=Kh(e,t);return n||t},sE=function(t,e,n,r){var o=uE(t.getBody(),r.container()),i=L(YA,t),a=zO(i,o,r);return a.bind(function(t){return n?t.fold(I(U.some(FO(t))),U.none,I(U.some(HO(t))),U.none):t.fold(U.none,I(U.some(HO(t))),U.none,I(U.some(FO(t))))}).map(iE(t,e)).getOrThunk(function(){var u=Ep(n,o,r),s=u.bind(function(t){return zO(i,o,t)});return zc(a,s,function(){return $A(i,o,r).exists(function(e){return!!oE(e)&&(bw(t,n,yn.fromDom(e)),!0)})}).orThunk(function(){return s.bind(function(o){return u.map(function(o){return n?aE(t,e,r,o):aE(t,e,o,r),!0})})}).getOr(!1)})},lE=function(t,e,n){if(t.selection.isCollapsed()&&qd(t)){var r=wf.fromRangeStart(t.selection.getRng());return sE(t,e,n,r)}return!1},cE=function(t,e){var n=hx(e,t);return at(n,Gi).fold(I(n),function(t){return n.slice(0,t)})},fE=function(t){return 1===tr(t).length},dE=function(t,e,n,r){var o=L(PS,e),i=K(et(r,o),function(t){return t.dom});if(0===i.length)bw(e,t,n);else{var a=RS(n.dom,i);e.selection.setRng(a.toRange())}},hE=function(t,e){var n=yn.fromDom(t.getBody()),r=yn.fromDom(t.selection.getStart()),o=et(cE(n,r),fE);return mt(o).exists(function(n){var r=wf.fromRangeStart(t.selection.getRng());return!(!aI(e,r,n.dom)||zS(n))&&(dE(e,t,n,o),!0)})},pE=function(t,e){return!!t.selection.isCollapsed()&&hE(t,e)},gE=function(t,e,n){return t._selectionOverrides.hideFakeCaret(),bw(t,e,yn.fromDom(n)),!0},mE=function(t,e){var n=e?tx:ex,r=e?_f.Forwards:_f.Backwards,o=up(r,t.getBody(),t.selection.getRng());return n(o)?gE(t,e,o.getNode(!e)):U.from(QA(e,o)).filter(function(t){return n(t)&&fp(o,t)}).exists(function(n){return gE(t,e,n.getNode(!e))})},vE=function(t,e){var n=t.selection.getNode();return!!io(n)&&gE(t,e,n)},yE=function(t,e){return t.selection.isCollapsed()?mE(t,e):vE(t,e)},bE=function(t){return gi(t,function(t){return no(t.dom)||ro(t.dom)}).exists(function(t){return no(t.dom)})},xE=function(t){var e=parseInt(t,10);return isNaN(e)?0:e},wE=function(t,e){var n=t||ji(e)?"margin":"padding",r="rtl"===yo(e,"direction")?"-right":"-left";return n+r},_E=function(t,e,n,r,o,i){var a=wE(n,yn.fromDom(i));if("outdent"===e){var u=Math.max(0,xE(i.style[a])-r);t.setStyle(i,a,u?u+o:"")}else{u=xE(i.style[a])+r+o;t.setStyle(i,a,u)}},SE=function(t,e){return lt(e,function(e){var n=wE(Rd(t),e),r=xo(e,n).map(xE).getOr(0),o=t.dom.getContentEditable(e.dom);return"false"!==o&&r>0})},CE=function(t){var e=kE(t);return!t.mode.isReadOnly()&&(e.length>1||SE(t,e))},ME=function(t){return Zi(t)||$i(t)},TE=function(t){return Yn(t).map(ME).getOr(!1)},kE=function(t){return et(K(t.selection.getSelectedBlocks(),yn.fromDom),function(t){return!ME(t)&&!TE(t)&&bE(t)})},DE=function(t,e){var n=t.dom,r=t.selection,o=t.formatter,i=Pd(t),a=/[a-z%]+$/i.exec(i)[0],u=parseInt(i,10),s=Rd(t),l=hd(t);t.queryCommandState("InsertUnorderedList")||t.queryCommandState("InsertOrderedList")||""!==l||n.getParent(r.getNode(),n.isBlock)||o.apply("div"),J(kE(t),function(t){_E(n,e,s,u,a,t.dom)})},AE=function(t,e){if(t.selection.isCollapsed()&&CE(t)){var n=t.dom,r=t.selection.getRng(),o=wf.fromRangeStart(r),i=n.getParent(r.startContainer,n.isBlock);if(null!==i&&yx(yn.fromDom(i),o))return DE(t,"outdent"),!0}return!1},IE=function(t,e){t.getDoc().execCommand(e,!1,null)},OE=function(t,e){AE(t)||dO(t,!1)||YI(t,!1)||lE(t,e,!1)||kI(t,!1)||s_(t)||pO(t,!1)||yE(t,!1)||NI(t)||pE(t,!1)||(IE(t,"Delete"),iI(t))},LE=function(t,e){dO(t,!0)||YI(t,!0)||lE(t,e,!0)||kI(t,!0)||s_(t)||pO(t,!0)||yE(t,!0)||NI(t)||pE(t,!0)||IE(t,"ForwardDelete")},EE=function(t,e){t.addCommand("delete",function(){OE(t,e)}),t.addCommand("forwardDelete",function(){LE(t,e)})},NE=5,RE=400,PE=function(t){return void 0===t.touches||1!==t.touches.length?U.none():U.some(t.touches[0])},zE=function(t,e){var n=Math.abs(t.clientX-e.x),r=Math.abs(t.clientY-e.y);return n>NE||r>NE},BE=function(t){var e=Vl(U.none()),n=Vl(!1),r=ec(function(e){t.fire("longpress",Ut(Ut({},e),{type:"longpress"})),n.set(!0)},RE);t.on("touchstart",function(t){PE(t).each(function(o){r.cancel();var i={x:o.clientX,y:o.clientY,target:t.target};r.throttle(t),n.set(!1),e.set(U.some(i))})},!0),t.on("touchmove",function(o){r.cancel(),PE(o).each(function(r){e.get().each(function(o){zE(r,o)&&(e.set(U.none()),n.set(!1),t.fire("longpresscancel"))})})},!0),t.on("touchend touchcancel",function(o){r.cancel(),"touchcancel"!==o.type&&e.get().filter(function(t){return t.target.isEqualNode(o.target)}).each(function(){n.get()?o.preventDefault():t.fire("tap",Ut(Ut({},o),{type:"tap"}))})},!0)},VE=function(t,e){return t.hasOwnProperty(e.nodeName)},HE=function(t,e){return!!$r(e)||!!Hr(e)&&(!VE(t,e)&&!lg(e))},FE=function(t,e,n){return $(dx(yn.fromDom(n),yn.fromDom(e)),function(e){return VE(t,e.dom)})},WE=function(t,e){if($r(e)){if(0===e.nodeValue.length)return!0;if(/^\s+$/.test(e.nodeValue)&&(!e.nextSibling||VE(t,e.nextSibling)))return!0}return!1},UE=function(t){var e,n,r,o=t.dom,i=t.selection,a=t.schema,u=a.getBlockElements(),s=i.getStart(),l=t.getBody(),c=hd(t);if(s&&Hr(s)&&c){var f=l.nodeName.toLowerCase();if(a.isValidChild(f,c.toLowerCase())&&!FE(u,l,s)){var d=i.getRng(),h=d.startContainer,p=d.startOffset,g=d.endContainer,m=d.endOffset,v=Ky(t);s=l.firstChild;while(s)if(HE(u,s)){if(WE(u,s)){n=s,s=s.nextSibling,o.remove(n);continue}e||(e=o.create(c,pd(t)),s.parentNode.insertBefore(e,s),r=!0),n=s,s=s.nextSibling,e.appendChild(n)}else e=null,s=s.nextSibling;r&&v&&(d.setStart(h,p),d.setEnd(g,m),i.setRng(d),t.nodeChanged())}}},GE=function(t){hd(t)&&t.on("NodeChange",L(UE,t))},jE=function(t){return bi(yn.fromDom(t.getBody()),"*[data-mce-caret]").fold(I(null),function(t){return t.dom})},XE=function(t){t.selection.setRng(t.selection.getRng())},YE=function(t,e){e.hasAttribute("data-mce-caret")&&(_a(e),XE(t),t.selection.scrollIntoView(e))},qE=function(t,e){var n=jE(t);if(n)return"compositionstart"===e.type?(e.preventDefault(),e.stopPropagation(),void YE(t,n)):void(ha(n)&&(YE(t,n),t.undoManager.add()))},ZE=function(t){t.on("keyup compositionstart",L(qE,t))},$E=ro,KE=function(t,e,n){return HL(e,t,n,ox,ix,$E)},JE=function(t,e,n){var r=function(t){return ox(t)||nx(t)},o=function(t){return ix(t)||rx(t)};return FL(e,t,n,r,o,$E)},QE=function(t){var e=t.dom.create(hd(t));return(!Je.ie||Je.ie>=11)&&(e.innerHTML='<br data-mce-bogus="1">'),e},tN=function(t,e,n){var r=Cp(t.getBody()),o=L(cp,1===e?r.next:r.prev);if(n.collapsed&&ah(t)){var i=t.dom.getParent(n.startContainer,"PRE");if(!i)return;var a=o(wf.fromRangeStart(n));if(!a){var u=QE(t);1===e?t.$(i).after(u):t.$(i).before(u),t.selection.select(u,!0),t.selection.collapse()}}},eN=function(t,e){var n=e?_f.Forwards:_f.Backwards,r=t.selection.getRng();return KE(n,t,r).orThunk(function(){return tN(t,n,r),U.none()})},nN=function(t,e){var n=e?1:-1,r=t.selection.getRng();return JE(n,t,r).orThunk(function(){return tN(t,n,r),U.none()})},rN=function(t,e){return eN(t,e).exists(function(e){return BL(t,e),!0})},oN=function(t,e){return nN(t,e).exists(function(e){return BL(t,e),!0})},iN=function(t,e){var n=e?ix:ox;return UL(t,e,n)},aN=function(t){return Z(["figcaption"],Rn(t))},uN=function(t){var e=document.createRange();return e.setStartBefore(t.dom),e.setEndBefore(t.dom),e},sN=function(t,e,n){n?yr(t,e):vr(t,e)},lN=function(t,e){var n=yn.fromTag("br");return sN(t,n,e),uN(n)},cN=function(t,e,n,r){var o=yn.fromTag(n),i=yn.fromTag("br");return lo(o,r),yr(o,i),sN(t,o,e),uN(i)},fN=function(t,e,n,r){return""===e?lN(t,r):cN(t,r,e,n)},dN=function(t,e){var n=L(On,e);return gi(yn.fromDom(t.container()),Gi,n).filter(aN)},hN=function(t,e,n){return e?sL(t.dom,n):uL(t.dom,n)},pN=function(t,e){var n=yn.fromDom(t.getBody()),r=wf.fromRangeStart(t.selection.getRng()),o=hd(t),i=pd(t);return dN(r,n).exists(function(){if(hN(n,e,r)){var a=fN(n,o,i,e);return t.selection.setRng(a),!0}return!1})},gN=function(t,e){return!!t.selection.isCollapsed()&&pN(t,e)},mN=function(t){return K(t,function(t){return Ut({shiftKey:!1,altKey:!1,ctrlKey:!1,metaKey:!1,keyCode:0,action:k},t)})},vN=function(t,e){return e.keyCode===t.keyCode&&e.shiftKey===t.shiftKey&&e.altKey===t.altKey&&e.ctrlKey===t.ctrlKey&&e.metaKey===t.metaKey},yN=function(t,e){return st(mN(t),function(t){return vN(t,e)?[t]:[]})},bN=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];return function(){return t.apply(null,e)}},xN=function(t,e){return it(yN(t,e),function(t){return t.action()})},wN=function(t,e){var n=e?_f.Forwards:_f.Backwards,r=t.selection.getRng();return HL(t,n,r,tx,ex,io).exists(function(e){return BL(t,e),!0})},_N=function(t,e){var n=e?1:-1,r=t.selection.getRng();return FL(t,n,r,tx,ex,io).exists(function(e){return BL(t,e),!0})},SN=function(t,e){var n=e?ex:tx;return UL(t,e,n)},CN=function(t,e){return{left:t.left-e,top:t.top-e,right:t.right+2*e,bottom:t.bottom+2*e,width:t.width+e,height:t.height+e}},MN=function(t,e){return st(e,function(e){var n=CN(Fc(e.getBoundingClientRect()),-1);return[{x:n.left,y:t(n),cell:e},{x:n.right,y:t(n),cell:e}]})},TN=function(t,e,n){return rt(t,function(t,r){return t.fold(function(){return U.some(r)},function(t){var o=Math.sqrt(Math.abs(t.x-e)+Math.abs(t.y-n)),i=Math.sqrt(Math.abs(r.x-e)+Math.abs(r.y-n));return U.some(i<o?r:t)})},U.none())},kN=function(t,e,n,r,o){var i=pc(yn.fromDom(n),"td,th,caption").map(function(t){return t.dom}),a=et(MN(t,i),function(t){return e(t,o)});return TN(a,r,o).map(function(t){return t.cell})},DN=function(t){return t.bottom},AN=function(t){return t.top},IN=function(t,e){return t.y<e},ON=function(t,e){return t.y>e},LN=L(kN,DN,IN),EN=L(kN,AN,ON),NN=function(t,e){return gt(e.getClientRects()).bind(function(e){return LN(t,e.left,e.top)}).bind(function(t){return oL(dL(t),e)})},RN=function(t,e){return mt(e.getClientRects()).bind(function(e){return EN(t,e.left,e.top)}).bind(function(t){return oL(fL(t),e)})},PN=function(t,e,n){return n.breakAt.exists(function(n){return t(e,n).breakAt.isSome()})},zN=function(t){return t.breakType===$D.Wrap&&0===t.positions.length},BN=function(t){return t.breakType===$D.Br&&1===t.positions.length},VN=function(t,e,n){var r=t(e,n);return zN(r)||!to(n.getNode())&&BN(r)?!PN(t,e,r):r.breakAt.isNone()},HN=L(VN,iL),FN=L(VN,aL),WN=function(t,e,n){var r=wf.fromRangeStart(e);return Rp(!t,n).exists(function(t){return t.isEqual(r)})},UN=function(t,e,n,r){var o=t.selection.getRng(),i=e?1:-1;return!(!zh()||!WN(e,o,n))&&(zI(i,t,n,!e,!1).each(function(e){BL(t,e)}),!0)},GN=function(t,e,n){return NN(e,n).orThunk(function(){return gt(n.getClientRects()).bind(function(n){return rL(lL(t,wf.before(e)),n.left)})}).getOr(wf.before(e))},jN=function(t,e,n){return RN(e,n).orThunk(function(){return gt(n.getClientRects()).bind(function(n){return rL(cL(t,wf.after(e)),n.left)})}).getOr(wf.after(e))},XN=function(t,e){var n=e.getNode(t);return Hr(n)&&"TABLE"===n.nodeName?U.some(n):U.none()},YN=function(t,e,n,r){var o=hd(e);o?e.undoManager.transact(function(){var r=yn.fromTag(o);lo(r,pd(e)),yr(r,yn.fromTag("br")),t?mr(yn.fromDom(n),r):gr(yn.fromDom(n),r);var i=e.dom.createRng();i.setStart(r.dom,0),i.setEnd(r.dom,0),BL(e,i)}):BL(e,r.toRange())},qN=function(t,e,n){var r=XN(!!e,n),o=!1===e;r.fold(function(){return BL(t,n.toRange())},function(r){return Rp(o,t.getBody()).filter(function(t){return t.isEqual(n)}).fold(function(){return BL(t,n.toRange())},function(o){return YN(e,t,r,n)})})},ZN=function(t,e,n,r){var o=t.selection.getRng(),i=wf.fromRangeStart(o),a=t.getBody();if(!e&&HN(r,i)){var u=GN(a,n,i);return qN(t,e,u),!0}if(e&&FN(r,i)){u=jN(a,n,i);return qN(t,e,u),!0}return!1},$N=function(t,e,n){return U.from(t.dom.getParent(t.selection.getNode(),"td,th")).bind(function(r){return U.from(t.dom.getParent(r,"table")).map(function(o){return n(t,e,o,r)})}).getOr(!1)},KN=function(t,e){return $N(t,e,UN)},JN=function(t,e){return $N(t,e,ZN)},QN=function(t,e,n){var r=Ue().os;xN([{keyCode:Hm.RIGHT,action:bN(rN,t,!0)},{keyCode:Hm.LEFT,action:bN(rN,t,!1)},{keyCode:Hm.UP,action:bN(oN,t,!1)},{keyCode:Hm.DOWN,action:bN(oN,t,!0)},{keyCode:Hm.RIGHT,action:bN(KN,t,!0)},{keyCode:Hm.LEFT,action:bN(KN,t,!1)},{keyCode:Hm.UP,action:bN(JN,t,!1)},{keyCode:Hm.DOWN,action:bN(JN,t,!0)},{keyCode:Hm.RIGHT,action:bN(wN,t,!0)},{keyCode:Hm.LEFT,action:bN(wN,t,!1)},{keyCode:Hm.UP,action:bN(_N,t,!1)},{keyCode:Hm.DOWN,action:bN(_N,t,!0)},{keyCode:Hm.RIGHT,action:bN(KL,t,e,!0)},{keyCode:Hm.LEFT,action:bN(KL,t,e,!1)},{keyCode:Hm.RIGHT,ctrlKey:!r.isOSX(),altKey:r.isOSX(),action:bN(tE,t,e)},{keyCode:Hm.LEFT,ctrlKey:!r.isOSX(),altKey:r.isOSX(),action:bN(eE,t,e)},{keyCode:Hm.UP,action:bN(gN,t,!1)},{keyCode:Hm.DOWN,action:bN(gN,t,!0)}],n).each(function(t){n.preventDefault()})},tR=function(t,e){t.on("keydown",function(n){!1===n.isDefaultPrevented()&&QN(t,e,n)})},eR=function(t,e,n){xN([{keyCode:Hm.BACKSPACE,action:bN(AE,t,!1)},{keyCode:Hm.BACKSPACE,action:bN(dO,t,!1)},{keyCode:Hm.DELETE,action:bN(dO,t,!0)},{keyCode:Hm.BACKSPACE,action:bN(YI,t,!1)},{keyCode:Hm.DELETE,action:bN(YI,t,!0)},{keyCode:Hm.BACKSPACE,action:bN(lE,t,e,!1)},{keyCode:Hm.DELETE,action:bN(lE,t,e,!0)},{keyCode:Hm.BACKSPACE,action:bN(s_,t,!1)},{keyCode:Hm.DELETE,action:bN(s_,t,!0)},{keyCode:Hm.BACKSPACE,action:bN(pO,t,!1)},{keyCode:Hm.DELETE,action:bN(pO,t,!0)},{keyCode:Hm.BACKSPACE,action:bN(yE,t,!1)},{keyCode:Hm.DELETE,action:bN(yE,t,!0)},{keyCode:Hm.BACKSPACE,action:bN(NI,t,!1)},{keyCode:Hm.DELETE,action:bN(NI,t,!0)},{keyCode:Hm.BACKSPACE,action:bN(kI,t,!1)},{keyCode:Hm.DELETE,action:bN(kI,t,!0)},{keyCode:Hm.BACKSPACE,action:bN(pE,t,!1)},{keyCode:Hm.DELETE,action:bN(pE,t,!0)}],n).each(function(t){n.preventDefault()})},nR=function(t,e){xN([{keyCode:Hm.BACKSPACE,action:bN(fO,t)},{keyCode:Hm.DELETE,action:bN(fO,t)}],e)},rR=function(t,e){t.on("keydown",function(n){!1===n.isDefaultPrevented()&&eR(t,e,n)}),t.on("keyup",function(e){!1===e.isDefaultPrevented()&&nR(t,e)})},oR=function(t){while(t){if(1===t.nodeType||3===t.nodeType&&t.data&&/[\r\n\s]/.test(t.data))return t;t=t.nextSibling}},iR=function(t,e){var n,r=e,o=t.dom,i=t.schema.getMoveCaretBeforeOnEnterElements();if(e){if(/^(LI|DT|DD)$/.test(e.nodeName)){var a=oR(e.firstChild);a&&/^(UL|OL|DL)$/.test(a.nodeName)&&e.insertBefore(o.doc.createTextNode(na),e.firstChild)}var u=o.createRng();if(e.normalize(),e.hasChildNodes()){var s=new Ei(e,e);while(n=s.current()){if($r(n)){u.setStart(n,0),u.setEnd(n,0);break}if(i[n.nodeName.toLowerCase()]){u.setStartBefore(n),u.setEndBefore(n);break}r=n,n=s.next()}n||(u.setStart(r,0),u.setEnd(r,0))}else to(e)?e.nextSibling&&o.isBlock(e.nextSibling)?(u.setStartBefore(e),u.setEndBefore(e)):(u.setStartAfter(e),u.setEndAfter(e)):(u.setStart(e,0),u.setEnd(e,0));t.selection.setRng(u),Fv(t,u)}},aR=function(t,e){var n,r,o=t.getRoot();n=e;while(n!==o&&"false"!==t.getContentEditable(n))"true"===t.getContentEditable(n)&&(r=n),n=n.parentNode;return n!==o?r:o},uR=function(t){return U.from(t.dom.getParent(t.selection.getStart(!0),t.dom.isBlock))},sR=function(t){return uR(t).fold(I(""),function(t){return t.nodeName.toUpperCase()})},lR=function(t){return uR(t).filter(function(t){return $i(yn.fromDom(t))}).isSome()},cR=function(t,e){return t.firstChild&&t.firstChild.nodeName===e},fR=function(t){var e;return(null===(e=t.parentNode)||void 0===e?void 0:e.firstChild)===t},dR=function(t,e){return t&&t.parentNode&&t.parentNode.nodeName===e},hR=function(t){return t&&/^(OL|UL|LI)$/.test(t.nodeName)},pR=function(t){return hR(t)&&hR(t.parentNode)},gR=function(t){var e=t.parentNode;return/^(LI|DT|DD)$/.test(e.nodeName)?e:t},mR=function(t,e,n){var r=t[n?"firstChild":"lastChild"];while(r){if(Hr(r))break;r=r[n?"nextSibling":"previousSibling"]}return r===e},vR=function(t,e,n,r,o){var i=t.dom,a=t.selection.getRng();if(n!==t.getBody()){pR(n)&&(o="LI");var u=o?e(o):i.create("BR");if(mR(n,r,!0)&&mR(n,r,!1))if(dR(n,"LI")){var s=gR(n);i.insertAfter(u,s),fR(n)?i.remove(s):i.remove(n)}else i.replace(u,n);else if(mR(n,r,!0))dR(n,"LI")?(i.insertAfter(u,gR(n)),u.appendChild(i.doc.createTextNode(" ")),u.appendChild(n)):n.parentNode.insertBefore(u,n),i.remove(r);else if(mR(n,r,!1))i.insertAfter(u,gR(n)),i.remove(r);else{n=gR(n);var l=a.cloneRange();l.setStartAfter(r),l.setEndAfter(n);var c=l.extractContents();"LI"===o&&cR(c,"LI")?(u=c.firstChild,i.insertAfter(c,n)):(i.insertAfter(c,n),i.insertAfter(u,n)),i.remove(r)}iR(t,u)}},yR=function(t){J(hc(yn.fromDom(t),Hn),function(t){var e=t.dom;e.nodeValue=ua(e.nodeValue)})},bR=function(t,e){return e&&"A"===e.nodeName&&t.isEmpty(e)},xR=function(t){return t&&/^(TD|TH|CAPTION)$/.test(t.nodeName)},wR=function(t){t.innerHTML='<br data-mce-bogus="1">'},_R=function(t,e){return t.nodeName===e||t.previousSibling&&t.previousSibling.nodeName===e},SR=function(t,e){return e&&t.isBlock(e)&&!/^(TD|TH|CAPTION|FORM)$/.test(e.nodeName)&&!/^(fixed|absolute)/i.test(e.style.position)&&"true"!==t.getContentEditable(e)},CR=function(t,e,n){var r,o=n,i=[];if(o){while(o=o.firstChild){if(t.isBlock(o))return;Hr(o)&&!e[o.nodeName.toLowerCase()]&&i.push(o)}r=i.length;while(r--)o=i[r],!o.hasChildNodes()||o.firstChild===o.lastChild&&""===o.firstChild.nodeValue?t.remove(o):bR(t,o)&&t.remove(o)}},MR=function(t,e,n){return!1===$r(e)?n:t?1===n&&e.data.charAt(n-1)===ia?0:n:n===e.data.length-1&&e.data.charAt(n)===ia?e.data.length:n},TR=function(t){var e=t.cloneRange();return e.setStart(t.startContainer,MR(!0,t.startContainer,t.startOffset)),e.setEnd(t.endContainer,MR(!1,t.endContainer,t.endOffset)),e},kR=function(t){do{$r(t)&&(t.nodeValue=t.nodeValue.replace(/^[\r\n]+/,"")),t=t.firstChild}while(t)},DR=function(t,e){var n,r,o=t.getRoot();n=e;while(n!==o&&"false"!==t.getContentEditable(n))"true"===t.getContentEditable(n)&&(r=n),n=n.parentNode;return n!==o?r:o},AR=function(t,e,n){var r=t.dom;U.from(n.style).map(r.parseStyle).each(function(t){var n=wo(yn.fromDom(e)),o=Ut(Ut({},n),t);r.setStyles(e,o)});var o=U.from(n.class).map(function(t){return t.split(/\s+/)}),i=U.from(e.className).map(function(t){return et(t.split(/\s+/),function(t){return""!==t})});zc(o,i,function(t,n){var o=et(n,function(e){return!Z(t,e)}),i=jt(t,o);r.setAttrib(e,"class",i.join(" "))});var a=["style","class"],u=kt(n,function(t,e){return!Z(a,e)});r.setAttribs(e,u)},IR=function(t,e){var n=hd(t);if(n&&n.toLowerCase()===e.tagName.toLowerCase()){var r=pd(t);AR(t,e,r)}},OR=function(t,e,n,r,o){var i,a,u,s,l,c,f=e||"P",d=t.dom,h=DR(d,r);if(a=d.getParent(r,d.isBlock),!a||!SR(d,a)){if(a=a||h,c=a===t.getBody()||xR(a)?a.nodeName.toLowerCase():a.parentNode.nodeName.toLowerCase(),!a.hasChildNodes())return i=d.create(f),IR(t,i),a.appendChild(i),n.setStart(i,0),n.setEnd(i,0),i;s=r;while(s.parentNode!==a)s=s.parentNode;while(s&&!d.isBlock(s))u=s,s=s.previousSibling;if(u&&t.schema.isValidChild(c,f.toLowerCase())){i=d.create(f),IR(t,i),u.parentNode.insertBefore(i,u),s=u;while(s&&!d.isBlock(s))l=s.nextSibling,i.appendChild(s),s=l;n.setStart(r,o),n.setEnd(r,o)}}return r},LR=function(t,e){e.normalize();var n=e.lastChild;n&&!/^(left|right)$/gi.test(t.getStyle(n,"float",!0))||t.add(e,"br")},ER=function(t,e){var n,r,o,i,a,u,s,l,c,f,d=t.dom,h=t.schema,p=h.getNonEmptyElements(),g=t.selection.getRng(),m=function(e){var n,o,a,u=r,s=h.getTextInlineElements();if(n=e||"TABLE"===l||"HR"===l?d.create(e||c):i.cloneNode(!1),a=n,!1===vd(t))d.setAttrib(n,"style",null),d.setAttrib(n,"class",null);else do{if(s[u.nodeName]){if(Fp(u)||lg(u))continue;o=u.cloneNode(!1),d.setAttrib(o,"id",""),n.hasChildNodes()?(o.appendChild(n.firstChild),n.appendChild(o)):(a=o,n.appendChild(o))}}while((u=u.parentNode)&&u!==w);return IR(t,n),wR(a),n},v=function(t){var e,n,a=MR(t,r,o);if($r(r)&&(t?a>0:a<r.nodeValue.length))return!1;if(r.parentNode===i&&f&&!t)return!0;if(t&&Hr(r)&&r===i.firstChild)return!0;if(_R(r,"TABLE")||_R(r,"HR"))return f&&!t||!f&&t;var u=new Ei(r,i);$r(r)&&(t&&0===a?u.prev():t||a!==r.nodeValue.length||u.next());while(e=u.current()){if(Hr(e)){if(!e.getAttribute("data-mce-bogus")&&(n=e.nodeName.toLowerCase(),p[n]&&"br"!==n))return!1}else if($r(e)&&!Ha(e.nodeValue))return!1;t?u.prev():u.next()}return!0},y=function(){a=/^(H[1-6]|PRE|FIGURE)$/.test(l)&&"HGROUP"!==_?m(c):m(),yd(t)&&SR(d,s)&&d.isEmpty(i)?a=d.split(s,i):d.insertAfter(a,i),iR(t,a)};av(d,g).each(function(t){g.setStart(t.startContainer,t.startOffset),g.setEnd(t.endContainer,t.endOffset)}),r=g.startContainer,o=g.startOffset,c=hd(t);var b=!(!e||!e.shiftKey),x=!(!e||!e.ctrlKey);Hr(r)&&r.hasChildNodes()&&(f=o>r.childNodes.length-1,r=r.childNodes[Math.min(o,r.childNodes.length-1)]||r,o=f&&$r(r)?r.nodeValue.length:0);var w=DR(d,r);if(w){(c&&!b||!c&&b)&&(r=OR(t,c,g,r,o)),i=d.getParent(r,d.isBlock),s=i?d.getParent(i.parentNode,d.isBlock):null,l=i?i.nodeName.toUpperCase():"";var _=s?s.nodeName.toUpperCase():"";"LI"!==_||x||(i=s,s=s.parentNode,l=_),/^(LI|DT|DD)$/.test(l)&&d.isEmpty(i)?vR(t,m,s,i,c):c&&i===t.getBody()||(c=c||"P",ca(i)?(a=_a(i),d.isEmpty(i)&&wR(i),IR(t,a),iR(t,a)):v()?y():v(!0)?(a=i.parentNode.insertBefore(m(),i),iR(t,_R(i,"HR")?a:i)):(n=TR(g).cloneRange(),n.setEndAfter(i),u=n.extractContents(),yR(u),kR(u),a=u.firstChild,d.insertAfter(u,i),CR(d,p,a),LR(d,i),d.isEmpty(i)&&wR(i),a.normalize(),d.isEmpty(a)?(d.remove(a),y()):(IR(t,a),iR(t,a))),d.setAttrib(a,"id",""),t.fire("NewBlock",{newBlock:a}))}},NR=function(t,e,n){var r,o=new Ei(e,n),i=t.getNonEmptyElements();while(r=o.next())if(i[r.nodeName.toLowerCase()]||r.length>0)return!0},RR=function(t,e,n){var r=t.dom.createRng();n?(r.setStartBefore(e),r.setEndBefore(e)):(r.setStartAfter(e),r.setEndAfter(e)),t.selection.setRng(r),Fv(t,r)},PR=function(t,e){var n,r,o=t.selection,i=t.dom,a=o.getRng();av(i,a).each(function(t){a.setStart(t.startContainer,t.startOffset),a.setEnd(t.endContainer,t.endOffset)});var u=a.startOffset,s=a.startContainer;if(1===s.nodeType&&s.hasChildNodes()){var l=u>s.childNodes.length-1;s=s.childNodes[Math.min(u,s.childNodes.length-1)]||s,u=l&&3===s.nodeType?s.nodeValue.length:0}var c=i.getParent(s,i.isBlock),f=c?i.getParent(c.parentNode,i.isBlock):null,d=f?f.nodeName.toUpperCase():"",h=!(!e||!e.ctrlKey);"LI"!==d||h||(c=f),s&&3===s.nodeType&&u>=s.nodeValue.length&&(NR(t.schema,s,c)||(n=i.create("br"),a.insertNode(n),a.setStartAfter(n),a.setEndAfter(n),r=!0)),n=i.create("br"),Tf(i,a,n),RR(t,n,r),t.undoManager.add()},zR=function(t,e){var n=yn.fromTag("br");gr(yn.fromDom(e),n),t.undoManager.add()},BR=function(t,e){HR(t.getBody(),e)||mr(yn.fromDom(e),yn.fromTag("br"));var n=yn.fromTag("br");mr(yn.fromDom(e),n),RR(t,n.dom,!1),t.undoManager.add()},VR=function(t){return to(t.getNode())},HR=function(t,e){return!!VR(wf.after(e))||Pp(t,wf.after(e)).map(function(t){return to(t.getNode())}).getOr(!1)},FR=function(t){return t&&"A"===t.nodeName&&"href"in t},WR=function(t){return t.fold(z,FR,FR,z)},UR=function(t){var e=L(YA,t),n=wf.fromRangeStart(t.selection.getRng());return zO(e,t.getBody(),n).filter(WR)},GR=function(t,e){e.fold(k,L(zR,t),L(BR,t),k)},jR=function(t,e){var n=UR(t);n.isSome()?n.each(L(GR,t)):PR(t,e)},XR=function(t,e){return uR(t).filter(function(t){return e.length>0&&kn(yn.fromDom(t),e)}).isSome()},YR=function(t){return XR(t,gd(t))},qR=function(t){return XR(t,md(t))},ZR=Xo.generate([{br:[]},{block:[]},{none:[]}]),$R=function(t,e){return qR(t)},KR=function(t){return function(e,n){var r=""===hd(e);return r===t}},JR=function(t){return function(e,n){return lR(e)===t}},QR=function(t,e){return function(n,r){var o=sR(n)===t.toUpperCase();return o===e}},tP=function(t){return QR("pre",t)},eP=function(){return QR("summary",!0)},nP=function(t){return function(e,n){return dd(e)===t}},rP=function(t,e){return YR(t)},oP=function(t,e){return e},iP=function(t){var e=hd(t),n=aR(t.dom,t.selection.getStart());return n&&t.schema.isValidChild(n.nodeName,e||"P")},aP=function(t,e){return function(n,r){var o=rt(t,function(t,e){return t&&e(n,r)},!0);return o?U.some(e):U.none()}},uP=function(t,e){return kO([aP([$R],ZR.none()),aP([eP()],ZR.br()),aP([tP(!0),nP(!1),oP],ZR.br()),aP([tP(!0),nP(!1)],ZR.block()),aP([tP(!0),nP(!0),oP],ZR.block()),aP([tP(!0),nP(!0)],ZR.br()),aP([JR(!0),oP],ZR.br()),aP([JR(!0)],ZR.block()),aP([KR(!0),oP,iP],ZR.block()),aP([KR(!0)],ZR.br()),aP([rP],ZR.br()),aP([KR(!1),oP],ZR.br()),aP([iP],ZR.block())],[t,!(!e||!e.shiftKey)]).getOr(ZR.none())},sP=function(t,e){uP(t,e).fold(function(){jR(t,e)},function(){ER(t,e)},k)},lP=function(t,e){e.isDefaultPrevented()||(e.preventDefault(),GM(t.undoManager),t.undoManager.transact(function(){!1===t.selection.isCollapsed()&&t.execCommand("Delete"),sP(t,e)}))},cP=function(t){t.on("keydown",function(e){e.keyCode===Hm.ENTER&&lP(t,e)})},fP=function(t,e,n){xN([{keyCode:Hm.END,action:bN(iN,t,!0)},{keyCode:Hm.HOME,action:bN(iN,t,!1)},{keyCode:Hm.END,action:bN(SN,t,!0)},{keyCode:Hm.HOME,action:bN(SN,t,!1)},{keyCode:Hm.END,action:bN(nE,t,!0,e)},{keyCode:Hm.HOME,action:bN(nE,t,!1,e)}],n).each(function(t){n.preventDefault()})},dP=function(t,e){t.on("keydown",function(n){!1===n.isDefaultPrevented()&&fP(t,e,n)})},hP=Ue().browser,pP=function(t){var e=tc(function(){t.composing||Zx(t)},0);hP.isIE()&&(t.on("keypress",function(t){e.throttle()}),t.on("remove",function(t){e.cancel()}))},gP=function(t){pP(t),t.on("input",function(e){!1===e.isComposing&&Zx(t)})},mP=Ue(),vP=function(t,e,n){xN([{keyCode:Hm.PAGE_UP,action:bN(nE,t,!1,e)},{keyCode:Hm.PAGE_DOWN,action:bN(nE,t,!0,e)}],n)},yP=function(t){return t.stopImmediatePropagation()},bP=function(t){return t.keyCode===Hm.PAGE_UP||t.keyCode===Hm.PAGE_DOWN},xP=function(t,e,n){n&&!t.get()?e.on("NodeChange",yP,!0):!n&&t.get()&&e.off("NodeChange",yP),t.set(n)},wP=function(t,e){if(!mP.os.isOSX()){var n=Vl(!1);t.on("keydown",function(e){bP(e)&&xP(n,t,!0)}),t.on("keyup",function(r){!1===r.isDefaultPrevented()&&vP(t,e,r),bP(r)&&n.get()&&(xP(n,t,!1),t.nodeChanged())})}},_P=function(t,e){var n=e.container(),r=e.offset();return $r(n)?(n.insertData(r,t),U.some(wf(n,r+t.length))):sp(e).map(function(n){var r=yn.fromText(t);return e.isAtEnd()?mr(n,r):gr(n,r),wf(r.dom,t.length)})},SP=L(_P,na),CP=L(_P," "),MP=function(t){return function(e){return e.fold(function(e){return zp(t.dom,wf.before(e))},function(t){return Bp(t)},function(t){return Vp(t)},function(e){return Pp(t.dom,wf.after(e))})}},TP=function(t,e){return function(n){return zx(t,n)?SP(e):CP(e)}},kP=function(t){return function(e){return t.selection.setRng(e.toRange()),t.nodeChanged(),!0}},DP=function(t){var e=wf.fromRangeStart(t.selection.getRng()),n=yn.fromDom(t.getBody());if(t.selection.isCollapsed()){var r=L(YA,t),o=wf.fromRangeStart(t.selection.getRng());return zO(r,t.getBody(),o).bind(MP(n)).bind(TP(n,e)).exists(kP(t))}return!1},AP=function(t,e){xN([{keyCode:Hm.SPACEBAR,action:bN(DP,t)}],e).each(function(t){e.preventDefault()})},IP=function(t){t.on("keydown",function(e){!1===e.isDefaultPrevented()&&AP(t,e)})},OP=function(t){var e=QL(t);return ZE(t),tR(t,e),rR(t,e),cP(t),IP(t),gP(t),dP(t,e),wP(t,e),e},LP=function(t){return aT(t)?Vl(null):OP(t)},EP=function(){function t(t){var e;this.lastPath=[],this.editor=t;var n=this;"onselectionchange"in t.getDoc()||t.on("NodeChange click mouseup keyup focus",function(n){var r=t.selection.getRng(),o={startContainer:r.startContainer,startOffset:r.startOffset,endContainer:r.endContainer,endOffset:r.endOffset};"nodechange"!==n.type&&qm(o,e)||t.fire("SelectionChange"),e=o}),t.on("contextmenu",function(){t.fire("SelectionChange")}),t.on("SelectionChange",function(){var e=t.selection.getStart(!0);!e||!Je.range&&t.selection.isCollapsed()||dm(t)&&!n.isSameElementPath(e)&&t.dom.isChildOf(e,t.getBody())&&t.nodeChanged({selectionChange:!0})}),t.on("mouseup",function(e){!e.isDefaultPrevented()&&dm(t)&&("IMG"===t.selection.getNode().nodeName?Ai.setEditorTimeout(t,function(){t.nodeChanged()}):t.nodeChanged())})}return t.prototype.nodeChanged=function(t){var e,n,r,o=this.editor.selection;this.editor.initialized&&o&&!sh(this.editor)&&!this.editor.mode.isReadOnly()&&(r=this.editor.getBody(),e=o.getStart(!0)||r,e.ownerDocument===this.editor.getDoc()&&this.editor.dom.isChildOf(e,r)||(e=r),n=[],this.editor.dom.getParent(e,function(t){if(t===r)return!0;n.push(t)}),t=t||{},t.element=e,t.parents=n,this.editor.fire("NodeChange",t))},t.prototype.isSameElementPath=function(t){var e,n=this.editor.$(t).parentsUntil(this.editor.getBody()).add(t);if(n.length===this.lastPath.length){for(e=n.length;e>=0;e--)if(n[e]!==this.lastPath[e])break;if(-1===e)return this.lastPath=n,!0}return this.lastPath=n,!1},t}(),NP=function(t){t.on("click",function(e){t.dom.getParent(e.target,"details")&&e.preventDefault()})},RP=function(t){t.parser.addNodeFilter("details",function(t){J(t,function(t){t.attr("data-mce-open",t.attr("open")),t.attr("open","open")})}),t.serializer.addNodeFilter("details",function(t){J(t,function(t){var e=t.attr("data-mce-open");t.attr("open",v(e)?e:null),t.attr("data-mce-open",null)})})},PP=function(t){NP(t),RP(t)},zP=function(t){return Hr(t)&&qi(yn.fromDom(t))},BP=function(t){var e=t.selection.getRng(),n=wf.fromRangeStart(e),r=wf.fromRangeEnd(e);if(wf.isElementPosition(n)){var o=n.container();zP(o)&&Bp(o).each(function(t){return e.setStart(t.container(),t.offset())})}if(wf.isElementPosition(r)){o=n.container();zP(o)&&Vp(o).each(function(t){return e.setEnd(t.container(),t.offset())})}t.selection.setRng(f_(e))},VP=function(t){t.on("click",function(e){e.detail>=3&&BP(t)})},HP=function(){var t=Vl(U.none()),e=function(){return t.set(U.none())},n=function(e){return t.set(U.some(e))},r=function(){return t.get().isSome()},o=function(e){return t.get().each(e)};return{clear:e,set:n,isSet:r,on:o}},FP=function(t){var e=t.getBoundingClientRect(),n=t.ownerDocument,r=n.documentElement,o=n.defaultView;return{top:e.top+o.pageYOffset-r.clientTop,left:e.left+o.pageXOffset-r.clientLeft}},WP=function(t){return t.inline?FP(t.getBody()):{left:0,top:0}},UP=function(t){var e=t.getBody();return t.inline?{left:e.scrollLeft,top:e.scrollTop}:{left:0,top:0}},GP=function(t){var e=t.getBody(),n=t.getDoc().documentElement,r={left:e.scrollLeft,top:e.scrollTop},o={left:e.scrollLeft||n.scrollLeft,top:e.scrollTop||n.scrollTop};return t.inline?r:o},jP=function(t,e){if(e.target.ownerDocument!==t.getDoc()){var n=FP(t.getContentAreaContainer()),r=GP(t);return{left:e.pageX-n.left+r.left,top:e.pageY-n.top+r.top}}return{left:e.pageX,top:e.pageY}},XP=function(t,e,n){return{pageX:n.left-t.left+e.left,pageY:n.top-t.top+e.top}},YP=function(t,e){return XP(WP(t),UP(t),jP(t,e))},qP=ro,ZP=no,$P=function(t,e){return qP(e)&&e!==t},KP=function(t,e,n){return e!==n&&!t.dom.isChildOf(e,n)&&!qP(e)},JP=function(t){var e=t.cloneNode(!0);return e.removeAttribute("data-mce-selected"),e},QP=function(t,e,n,r){var o=t.dom,i=e.cloneNode(!0);o.setStyles(i,{width:n,height:r}),o.setAttrib(i,"data-mce-selected",null);var a=o.create("div",{class:"mce-drag-container","data-mce-bogus":"all",unselectable:"on",contenteditable:"false"});return o.setStyles(a,{position:"absolute",opacity:.5,overflow:"hidden",border:0,padding:0,margin:0,width:n,height:r}),o.setStyles(i,{margin:0,boxSizing:"border-box"}),a.appendChild(i),a},tz=function(t,e){t.parentNode!==e&&e.appendChild(t)},ez=function(t,e,n,r,o,i){var a=0,u=0;t.style.left=e.pageX+"px",t.style.top=e.pageY+"px",e.pageX+n>o&&(a=e.pageX+n-o),e.pageY+r>i&&(u=e.pageY+r-i),t.style.width=n-a+"px",t.style.height=r-u+"px"},nz=function(t){t&&t.parentNode&&t.parentNode.removeChild(t)},rz=function(t){return 0===t.button},oz=function(t,e){return{pageX:e.pageX-t.relX,pageY:e.pageY+5}},iz=function(t,e){return function(n){if(rz(n)){var r=it(e.dom.getParents(n.target),Jc(qP,ZP)).getOr(null);if($P(e.getBody(),r)){var o=e.dom.getPos(r),i=e.getBody(),a=e.getDoc().documentElement;t.set({element:r,dragging:!1,screenX:n.screenX,screenY:n.screenY,maxX:(e.inline?i.scrollWidth:a.offsetWidth)-2,maxY:(e.inline?i.scrollHeight:a.offsetHeight)-2,relX:n.pageX-o.x,relY:n.pageY-o.y,width:r.offsetWidth,height:r.offsetHeight,ghost:QP(e,r,r.offsetWidth,r.offsetHeight)})}}}},az=function(t,e){var n=Ai.throttle(function(t,n){e._selectionOverrides.hideFakeCaret(),e.selection.placeCaretAt(t,n)},0);return e.on("remove",n.stop),function(r){return t.on(function(t){var o=Math.max(Math.abs(r.screenX-t.screenX),Math.abs(r.screenY-t.screenY));if(!t.dragging&&o>10){var i=e.fire("dragstart",{target:t.element});if(i.isDefaultPrevented())return;t.dragging=!0,e.focus()}if(t.dragging){var a=oz(t,YP(e,r));tz(t.ghost,e.getBody()),ez(t.ghost,a,t.width,t.height,t.maxX,t.maxY),n(r.clientX,r.clientY)}})}},uz=function(t){var e=t.getSel().getRangeAt(0),n=e.startContainer;return 3===n.nodeType?n.parentNode:n},sz=function(t,e){return function(n){t.on(function(t){if(t.dragging&&KP(e,uz(e.selection),t.element)){var r=JP(t.element),o=e.fire("drop",{clientX:n.clientX,clientY:n.clientY});o.isDefaultPrevented()||e.undoManager.transact(function(){nz(t.element),e.insertContent(e.dom.getOuterHTML(r)),e._selectionOverrides.hideFakeCaret()})}}),cz(t)}},lz=function(t,e){return function(){t.on(function(t){t.dragging&&e.fire("dragend")}),cz(t)}},cz=function(t){t.on(function(t){nz(t.ghost)}),t.clear()},fz=function(t){var e=HP(),n=Il.DOM,r=document,o=iz(e,t),i=az(e,t),a=sz(e,t),u=lz(e,t);t.on("mousedown",o),t.on("mousemove",i),t.on("mouseup",a),n.bind(r,"mousemove",i),n.bind(r,"mouseup",u),t.on("remove",function(){n.unbind(r,"mousemove",i),n.unbind(r,"mouseup",u)})},dz=function(t){t.on("drop",function(e){var n="undefined"!==typeof e.clientX?t.getDoc().elementFromPoint(e.clientX,e.clientY):null;(qP(n)||"false"===t.dom.getContentEditableParent(n))&&e.preventDefault()})},hz=function(t){var e=function(e){if(!e.isDefaultPrevented()){var n=e.dataTransfer;n&&(Z(n.types,"Files")||n.files.length>0)&&(e.preventDefault(),"drop"===e.type&&QD(t,"Dropped file type is not supported"))}},n=function(n){zy(t,n.target)&&e(n)},r=function(){var r=Il.DOM,o=t.dom,i=document,a=t.inline?t.getBody():t.getDoc(),u=["drop","dragover"];J(u,function(t){r.bind(i,t,n),o.bind(a,t,e)}),t.on("remove",function(){J(u,function(t){r.unbind(i,t,n),o.unbind(a,t,e)})})};t.on("init",function(){Ai.setEditorTimeout(t,r,0)})},pz=function(t){fz(t),dz(t),hh(t)&&hz(t)},gz=function(t){var e=tc(function(){if(!t.removed&&t.getBody().contains(document.activeElement)){var e=t.selection.getRng();if(e.collapsed){var n=FI(t,e,!1);t.selection.setRng(n)}}},0);t.on("focus",function(){e.throttle()}),t.on("blur",function(){e.cancel()})},mz=function(t){t.on("init",function(){t.on("focusin",function(e){var n=e.target;if(io(n)){var r=Tm(t.getBody(),n),o=ro(r)?r:n;t.selection.getNode()!==o&&VI(t,o).each(function(e){return t.selection.setRng(e)})}})})},vz=no,yz=ro,bz=function(t,e){return Tm(t.getBody(),e)},xz=function(t){var e,n=t.selection,r=t.dom,o=r.isBlock,i=t.getBody(),a=Ph(t,i,o,function(){return Ky(t)}),u="sel-"+r.uniqueId(),s="data-mce-selected",l=function(t){return r.hasClass(t,"mce-offscreen-selection")},c=function(t){return t!==i&&(yz(t)||io(t))&&r.isChildOf(t,i)},f=function(t){return ox(t)||ix(t)||tx(t)||ex(t)},d=function(){var t=r.get(u);return t?t.getElementsByTagName("*")[0]:t},h=function(t){t&&n.setRng(t)},p=n.getRng,g=function(e,r,o,i){void 0===i&&(i=!0);var u=t.fire("ShowCaret",{target:r,direction:e,before:o});return u.isDefaultPrevented()?null:(i&&n.scrollIntoView(r,-1===e),a.show(o,r))},m=function(t){t.hasAttribute("data-mce-caret")&&(_a(t),h(p()),n.scrollIntoView(t))},v=function(){t.on("mouseup",function(e){var n=p();n.collapsed&&WD(t,e.clientX,e.clientY)&&HI(t,n,!1).each(h)}),t.on("click",function(e){var o=bz(t,e.target);o&&(yz(o)&&(e.preventDefault(),t.focus()),vz(o)&&r.isChildOf(o,n.getNode())&&C())}),t.on("blur NewBlock",C),t.on("ResizeWindow FullscreenStateChanged",a.reposition);var u=function(t){var e=Cp(t);if(!t.firstChild)return!1;var n=wf.before(t.firstChild),r=e.next(n);return r&&!f(r)},s=function(t,e){var n=r.getParent(t,o),i=r.getParent(e,o);return n===i},m=function(e,n){var i=r.getParent(e,o),a=r.getParent(n,o);return!(!i||e===a||!r.isChildOf(i,a)||!1!==yz(bz(t,i)))||i&&!s(i,a)&&u(i)};t.on("tap",function(e){var n=e.target,r=bz(t,n);yz(r)?(e.preventDefault(),VI(t,r).each(S)):c(n)&&VI(t,n).each(S)},!0),t.on("mousedown",function(e){var o=e.target;if((o===i||"HTML"===o.nodeName||r.isChildOf(o,i))&&!1!==WD(t,e.clientX,e.clientY)){var a=bz(t,o);if(a)yz(a)?(e.preventDefault(),VI(t,a).each(S)):(C(),vz(a)&&e.shiftKey||km(e.clientX,e.clientY,n.getRng())||(T(),n.placeCaretAt(e.clientX,e.clientY)));else if(c(o))VI(t,o).each(S);else if(!1===Vh(o)){C(),T();var u=zL(i,e.clientX,e.clientY);if(u&&!m(o,u.node)){e.preventDefault();var s=g(1,u.node,u.before,!1);t.getBody().focus(),h(s)}}}}),t.on("keypress",function(t){Hm.modifierPressed(t)||yz(n.getNode())&&t.preventDefault()}),t.on("GetSelectionRange",function(t){var n=t.range;if(e){if(!e.parentNode)return void(e=null);n=n.cloneRange(),n.selectNode(e),t.range=n}}),t.on("SetSelectionRange",function(t){t.range=x(t.range);var e=S(t.range,t.forward);e&&(t.range=e)});var v=function(t){return"mcepastebin"===t.id};t.on("AfterSetSelectionRange",function(t){var e=t.range,n=e.startContainer.parentNode;b(e)||v(n)||T(),l(n)||C()}),t.on("copy",function(t){var e=t.clipboardData;if(!t.isDefaultPrevented()&&t.clipboardData&&!Je.ie){var n=d();n&&(t.preventDefault(),e.clearData(),e.setData("text/html",n.outerHTML),e.setData("text/plain",n.outerText||n.innerText))}}),pz(t),gz(t),mz(t)},y=function(t){return da(t)||ba(t)||xa(t)},b=function(t){return y(t.startContainer)||y(t.endContainer)},x=function(e){var n=t.schema.getShortEndedElements(),o=r.createRng(),i=e.startContainer,a=e.startOffset,u=e.endContainer,s=e.endOffset;return Ot(n,i.nodeName.toLowerCase())?0===a?o.setStartBefore(i):o.setStartAfter(i):o.setStart(i,a),Ot(n,u.nodeName.toLowerCase())?0===s?o.setEndBefore(u):o.setEndAfter(u):o.setEnd(u,s),o},w=function(e,o,i){var a=t.$,s=bi(yn.fromDom(t.getBody()),"#"+u).fold(function(){return a([])},function(t){return a([t.dom])});0===s.length&&(s=a('<div data-mce-bogus="all" class="mce-offscreen-selection"></div>').attr("id",u),s.appendTo(t.getBody()));var l=r.createRng();o===i&&Je.ie?(s.empty().append('<p style="font-size: 0" data-mce-bogus="all"> </p>').append(o),l.setStartAfter(s[0].firstChild.firstChild),l.setEndAfter(o)):(s.empty().append(na).append(o).append(na),l.setStart(s[0].firstChild,1),l.setEnd(s[0].lastChild,0)),s.css({top:r.getPos(e,t.getBody()).y}),s[0].focus();var c=n.getSel();return c.removeAllRanges(),c.addRange(l),l},_=function(n){var o=n.cloneNode(!0),i=t.fire("ObjectSelected",{target:n,targetClone:o});if(i.isDefaultPrevented())return null;var a=w(n,i.targetClone,o),u=yn.fromDom(n);return J(pc(yn.fromDom(t.getBody()),"*[data-mce-selected]"),function(t){On(u,t)||po(t,s)}),r.getAttrib(n,s)||n.setAttribute(s,"1"),e=n,T(),a},S=function(t,e){if(!t)return null;if(t.collapsed){if(!b(t)){var n=e?1:-1,o=up(n,i,t),a=o.getNode(!e);if(Vh(a))return g(n,a,!!e&&!o.isAtEnd(),!1);var u=o.getNode(e);if(Vh(u))return g(n,u,!e&&!o.isAtEnd(),!1)}return null}var s=t.startContainer,l=t.startOffset,f=t.endOffset;if(3===s.nodeType&&0===l&&yz(s.parentNode)&&(s=s.parentNode,l=r.nodeIndex(s),s=s.parentNode),1!==s.nodeType)return null;if(f===l+1&&s===t.endContainer){var d=s.childNodes[l];if(c(d))return _(d)}return null},C=function(){e&&e.removeAttribute(s),bi(yn.fromDom(t.getBody()),"#"+u).each(Sr),e=null},M=function(){a.destroy(),e=null},T=function(){a.hide()};return Je.ceFalse&&!aT(t)&&v(),{showCaret:g,showBlockCaretContainer:m,hideFakeCaret:T,destroy:M}},wz=function(t){var e=dn.each,n=Hm.BACKSPACE,r=Hm.DELETE,o=t.dom,i=t.selection,a=t.parser,u=Je.gecko,s=Je.ie,l=Je.webkit,c="data:text/mce-internal,",f=s?"Text":"URL",d=function(e,n){try{t.getDoc().execCommand(e,!1,n)}catch(r){}},h=function(t){return t.isDefaultPrevented()},p=function(e){var n,r;e.dataTransfer&&(t.selection.isCollapsed()&&"IMG"===e.target.tagName&&i.select(e.target),n=t.selection.getContent(),n.length>0&&(r=c+escape(t.id)+","+escape(n),e.dataTransfer.setData(f,r)))},g=function(t){var e;return t.dataTransfer&&(e=t.dataTransfer.getData(f),e&&e.indexOf(c)>=0)?(e=e.substr(c.length).split(","),{id:unescape(e[0]),html:unescape(e[1])}):null},m=function(e,n){t.queryCommandSupported("mceInsertClipboardContent")?t.execCommand("mceInsertClipboardContent",!1,{content:e,internal:n}):t.execCommand("mceInsertContent",!1,e)},v=function(){var e=function(t){var e=o.create("body"),n=t.cloneContents();return e.appendChild(n),i.serializer.serialize(e,{format:"html"})},a=function(n){var r=e(n),i=o.createRng();i.selectNode(t.getBody());var a=e(i);return r===a};t.on("keydown",function(e){var i,u,s=e.keyCode;if(!h(e)&&(s===r||s===n)){if(i=t.selection.isCollapsed(),u=t.getBody(),i&&!o.isEmpty(u))return;if(!i&&!a(t.selection.getRng()))return;e.preventDefault(),t.setContent(""),u.firstChild&&o.isBlock(u.firstChild)?t.selection.setCursorLocation(u.firstChild,0):t.selection.setCursorLocation(u,0),t.nodeChanged()}})},y=function(){t.shortcuts.add("meta+a",null,"SelectAll")},b=function(){t.inline||o.bind(t.getDoc(),"mousedown mouseup",function(e){var n;if(e.target===t.getDoc().documentElement)if(n=i.getRng(),t.getBody().focus(),"mousedown"===e.type){if(da(n.startContainer))return;i.placeCaretAt(e.clientX,e.clientY)}else i.setRng(n)})},x=function(){t.on("keydown",function(e){if(!h(e)&&e.keyCode===n){if(!t.getBody().getElementsByTagName("hr").length)return;if(i.isCollapsed()&&0===i.getRng().startOffset){var r=i.getNode(),a=r.previousSibling;if("HR"===r.nodeName)return o.remove(r),void e.preventDefault();a&&a.nodeName&&"hr"===a.nodeName.toLowerCase()&&(o.remove(a),e.preventDefault())}}})},w=function(){Range.prototype.getClientRects||t.on("mousedown",function(e){if(!h(e)&&"HTML"===e.target.nodeName){var n=t.getBody();n.blur(),Ai.setEditorTimeout(t,function(){n.focus()})}})},_=function(){t.on("click",function(e){var n=e.target;/^(IMG|HR)$/.test(n.nodeName)&&"false"!==o.getContentEditableParent(n)&&(e.preventDefault(),t.selection.select(n),t.nodeChanged()),"A"===n.nodeName&&o.hasClass(n,"mce-item-anchor")&&(e.preventDefault(),i.select(n))})},S=function(){var n=function(){var n=o.getAttribs(i.getStart().cloneNode(!1));return function(){var r=i.getStart();r!==t.getBody()&&(o.setAttrib(r,"style",null),e(n,function(t){r.setAttributeNode(t.cloneNode(!0))}))}},r=function(){return!i.isCollapsed()&&o.getParent(i.getStart(),o.isBlock)!==o.getParent(i.getEnd(),o.isBlock)};t.on("keypress",function(e){var o;if(!h(e)&&(8===e.keyCode||46===e.keyCode)&&r())return o=n(),t.getDoc().execCommand("delete",!1,null),o(),e.preventDefault(),!1}),o.bind(t.getDoc(),"cut",function(e){var o;!h(e)&&r()&&(o=n(),Ai.setEditorTimeout(t,function(){o()}))})},C=function(){t.on("keydown",function(t){if(!h(t)&&t.keyCode===n&&i.isCollapsed()&&0===i.getRng().startOffset){var e=i.getNode().previousSibling;if(e&&e.nodeName&&"table"===e.nodeName.toLowerCase())return t.preventDefault(),!1}})},M=function(){t.on("keydown",function(e){var n,r;if(!h(e)&&e.keyCode===Hm.BACKSPACE){n=i.getRng();var a=n.startContainer,u=n.startOffset,s=o.getRoot();if(r=a,n.collapsed&&0===u){while(r&&r.parentNode&&r.parentNode.firstChild===r&&r.parentNode!==s)r=r.parentNode;"BLOCKQUOTE"===r.tagName&&(t.formatter.toggle("blockquote",null,r),n=o.createRng(),n.setStart(a,0),n.setEnd(a,0),i.setRng(n))}}})},T=function(){var e=function(){d("StyleWithCSS",!1),d("enableInlineTableEditing",!1),Fd(t)||d("enableObjectResizing",!1)};lh(t)||t.on("BeforeExecCommand mousedown",e)},D=function(){var n=function(){e(o.select("a"),function(t){var e=t.parentNode,n=o.getRoot();if(e.lastChild===t){while(e&&!o.isBlock(e)){if(e.parentNode.lastChild!==e||e===n)return;e=e.parentNode}o.add(e,"br",{"data-mce-bogus":1})}})};t.on("SetContent ExecCommand",function(t){"setcontent"!==t.type&&"mceInsertLink"!==t.command||n()})},A=function(){hd(t)&&t.on("init",function(){d("DefaultParagraphSeparator",hd(t))})},I=function(){t.on("keyup focusin mouseup",function(t){Hm.modifierPressed(t)||i.normalize()},!0)},O=function(){t.contentStyles.push("img:-moz-broken {-moz-force-broken-image-icon:1;min-width:24px;min-height:24px}")},L=function(){t.inline||t.on("keydown",function(){document.activeElement===document.body&&t.getWin().focus()})},E=function(){t.inline||(t.contentStyles.push("body {min-height: 150px}"),t.on("click",function(e){var n;if("HTML"===e.target.nodeName){if(Je.ie>11)return void t.getBody().focus();n=t.selection.getRng(),t.getBody().focus(),t.selection.setRng(n),t.selection.normalize(),t.nodeChanged()}}))},N=function(){Je.mac&&t.on("keydown",function(e){if(Hm.metaKeyPressed(e)&&!e.shiftKey&&(37===e.keyCode||39===e.keyCode)){e.preventDefault();var n=t.selection.getSel();n.modify("move",37===e.keyCode?"backward":"forward","lineboundary")}})},R=function(){d("AutoUrlDetect",!1)},P=function(){t.on("click",function(t){var e=t.target;do{if("A"===e.tagName)return void t.preventDefault()}while(e=e.parentNode)}),t.contentStyles.push(".mce-content-body {-webkit-touch-callout: none}")},z=function(){t.on("init",function(){t.dom.bind(t.getBody(),"submit",function(t){t.preventDefault()})})},B=function(){a.addNodeFilter("br",function(t){var e=t.length;while(e--)"Apple-interchange-newline"===t[e].attr("class")&&t[e].remove()})},V=function(){t.on("dragstart",function(t){p(t)}),t.on("drop",function(e){if(!h(e)){var n=g(e);if(n&&n.id!==t.id){e.preventDefault();var r=Ym(e.x,e.y,t.getDoc());i.setRng(r),m(n.html,!0)}}})},H=k,F=function(){if(!u||t.removed)return!1;var e=t.selection.getSel();return!e||!e.rangeCount||0===e.rangeCount},W=function(){l&&(_(),z(),y(),Je.iOS&&(L(),E(),P())),u&&(w(),T(),O(),N())},U=function(){M(),v(),Je.windowsPhone||I(),l&&(b(),_(),A(),z(),C(),B(),Je.iOS?(L(),E(),P()):y()),Je.ie>=11&&(E(),C()),Je.ie&&(y(),R(),V()),u&&(x(),w(),S(),T(),D(),O(),N(),C())};return aT(t)?W():U(),{refreshContentEditable:H,isHidden:F}},_z=Il.DOM,Sz=function(t,e){var n=yn.fromDom(t.getBody()),r=cr(lr(n)),o=yn.fromTag("style");so(o,"type","text/css"),yr(o,yn.fromText(e)),yr(r,o),t.on("remove",function(){Sr(o)})},Cz=function(t){return t.inline?t.getElement().nodeName.toLowerCase():void 0},Mz=function(t){return kt(t,function(t){return!1===_(t)})},Tz=function(t){var e=t.settings,n=t.editorUpload.blobCache;return Mz({allow_conditional_comments:e.allow_conditional_comments,allow_html_data_urls:e.allow_html_data_urls,allow_svg_data_urls:e.allow_svg_data_urls,allow_html_in_named_anchor:e.allow_html_in_named_anchor,allow_script_urls:e.allow_script_urls,allow_unsafe_link_target:e.allow_unsafe_link_target,convert_fonts_to_spans:e.convert_fonts_to_spans,fix_list_elements:e.fix_list_elements,font_size_legacy_values:e.font_size_legacy_values,forced_root_block:e.forced_root_block,forced_root_block_attrs:e.forced_root_block_attrs,padd_empty_with_br:e.padd_empty_with_br,preserve_cdata:e.preserve_cdata,remove_trailing_brs:e.remove_trailing_brs,inline_styles:e.inline_styles,root_name:Cz(t),validate:!0,blob_cache:n,images_dataimg_filter:e.images_dataimg_filter})},kz=function(t){var e=t.settings;return Ut(Ut({},Tz(t)),Mz({url_converter:e.url_converter,url_converter_scope:e.url_converter_scope,element_format:e.element_format,entities:e.entities,entity_encoding:e.entity_encoding,indent:e.indent,indent_after:e.indent_after,indent_before:e.indent_before,block_elements:e.block_elements,boolean_attributes:e.boolean_attributes,custom_elements:e.custom_elements,extended_valid_elements:e.extended_valid_elements,invalid_elements:e.invalid_elements,invalid_styles:e.invalid_styles,move_caret_before_on_enter_elements:e.move_caret_before_on_enter_elements,non_empty_elements:e.non_empty_elements,schema:e.schema,self_closing_elements:e.self_closing_elements,short_ended_elements:e.short_ended_elements,special:e.special,text_block_elements:e.text_block_elements,text_inline_elements:e.text_inline_elements,valid_children:e.valid_children,valid_classes:e.valid_classes,valid_elements:e.valid_elements,valid_styles:e.valid_styles,verify_html:e.verify_html,whitespace_elements:e.whitespace_elements}))},Dz=function(t){var e=Ak(Tz(t),t.schema);return e.addAttributeFilter("src,href,style,tabindex",function(e,n){var r,o,i=e.length,a=t.dom,u="data-mce-"+n;while(i--)if(r=e[i],o=r.attr(n),o&&!r.attr(u)){if(0===o.indexOf("data:")||0===o.indexOf("blob:"))continue;"style"===n?(o=a.serializeStyle(a.parseStyle(o),r.name),o.length||(o=null),r.attr(u,o),r.attr(n,o)):"tabindex"===n?(r.attr(u,o),r.attr(n,null)):r.attr(u,t.convertURL(o,n,r.name))}}),e.addNodeFilter("script",function(t){var e=t.length;while(e--){var n=t[e],r=n.attr("type")||"no/type";0!==r.indexOf("mce-")&&n.attr("type","mce-"+r)}}),t.settings.preserve_cdata&&e.addNodeFilter("#cdata",function(e){var n=e.length;while(n--){var r=e[n];r.type=8,r.name="#comment",r.value="[CDATA["+t.dom.encode(r.value)+"]]"}}),e.addNodeFilter("p,h1,h2,h3,h4,h5,h6,div",function(e){var n=e.length,r=t.schema.getNonEmptyElements();while(n--){var o=e[n];o.isEmpty(r)&&0===o.getAll("br").length&&(o.append(new pb("br",1)).shortEnded=!0)}}),e},Az=function(t){t.settings.auto_focus&&Ai.setEditorTimeout(t,function(){var e;e=!0===t.settings.auto_focus?t:t.editorManager.get(t.settings.auto_focus),e.destroyed||e.focus()},100)},Iz=function(t){var e=t.dom.getRoot();t.inline||dm(t)&&t.selection.getStart(!0)!==e||Bp(e).each(function(e){var n=e.getNode(),r=Yr(n)?Bp(n).getOr(e):e;Je.browser.isIE()?Sy(t,r.toRange()):t.selection.setRng(r.toRange())})},Oz=function(t){t.bindPendingEventDelegates(),t.initialized=!0,zm(t),t.focus(!0),Iz(t),t.nodeChanged({initial:!0}),t.execCallback("init_instance_callback",t),Az(t)},Lz=function(t){return t.inline?t.ui.styleSheetLoader:t.dom.styleSheetLoader},Ez=function(t,e,n){var r=[new _i(function(n,r){return Lz(t).loadAll(e,n,r)})];return t.inline?r:r.concat([new _i(function(e,r){return t.ui.styleSheetLoader.loadAll(n,e,r)})])},Nz=function(t,e){var n=Lz(t),r=Bd(t),o=function(){n.unloadAll(e),t.inline||t.ui.styleSheetLoader.unloadAll(r)},i=function(){t.removed?o():(t.on("remove",o),Oz(t))};_i.all(Ez(t,e,r)).then(i).catch(i)},Rz=function(t){var e=t.settings,n=t.getDoc(),r=t.getBody();e.browser_spellcheck||e.gecko_spellcheck||(n.body.spellcheck=!1,_z.setAttrib(r,"spellcheck","false")),t.quirks=wz(t),Pm(t);var o=Vd(t);if(void 0!==o&&(r.dir=o),e.protect&&t.on("BeforeSetContent",function(t){dn.each(e.protect,function(e){t.content=t.content.replace(e,function(t){return"\x3c!--mce:protected "+escape(t)+"--\x3e"})})}),t.on("SetContent",function(){t.addVisual(t.getBody())}),aT(t)||t.load({initial:!0,format:"html"}),t.startContent=t.getContent({format:"raw"}),t.on("compositionstart compositionend",function(e){t.composing="compositionstart"===e.type}),t.contentStyles.length>0){var i="";dn.each(t.contentStyles,function(t){i+=t+"\r\n"}),t.dom.addStyle(i)}Nz(t,t.contentCSS),e.content_style&&Sz(t,e.content_style)},Pz=function(t,e){var n=t.settings,r=t.getElement(),o=t.getDoc();n.inline||(t.getElement().style.visibility=t.orgVisibility),e||t.inline||(o.open(),o.write(t.iframeHTML),o.close()),t.inline&&(_z.addClass(r,"mce-content-body"),t.contentDocument=o=document,t.contentWindow=window,t.bodyElement=r,t.contentAreaContainer=r);var i=t.getBody();i.disabled=!0,t.readonly=!!n.readonly,t.readonly||(t.inline&&"static"===_z.getStyle(i,"position",!0)&&(i.style.position="relative"),i.contentEditable=t.getParam("content_editable_state",!0)),i.disabled=!1,t.editorUpload=SA(t),t.schema=Lu(n),t.dom=Il(o,{keep_values:!0,url_converter:t.convertURL,url_converter_scope:t,hex_colors:n.force_hex_style_colors,update_styles:!0,root_element:t.inline?t.getBody():null,collect:function(){return t.inline},schema:t.schema,contentCssCors:Od(t),referrerPolicy:Ld(t),onSetAttrib:function(e){t.fire("SetAttrib",e)}}),t.parser=Dz(t),t.serializer=Wk(kz(t),t),t.selection=KT(t.dom,t.getWin(),t.serializer,t),t.annotator=Cm(t),t.formatter=EA(t),t.undoManager=PA(t),t._nodeChangeDispatcher=new EP(t),t._selectionOverrides=xz(t),BE(t),PP(t),aT(t)||VP(t);var a=LP(t);EE(t,a),GE(t),GA(t),Rm(t),sT(t).fold(function(){Rz(t)},function(e){t.setProgressState(!0),e.then(function(e){t.setProgressState(!1),Rz(t)},function(e){t.notificationManager.open({type:"error",text:String(e)}),Rz(t)})})},zz=Il.DOM,Bz=function(t,e){if(document.domain!==window.location.hostname&&Je.browser.isIE()){var n=mA("mce");t[n]=function(){Pz(t)};var r='javascript:(function(){document.open();document.domain="'+document.domain+'";var ed = window.parent.tinymce.get("'+t.id+'");document.write(ed.iframeHTML);document.close();ed.'+n+"(true);})()";return zz.setAttrib(e,"src",r),!0}return!1},Vz=function(t,e,n,r){var o=yn.fromTag("iframe");return lo(o,r),lo(o,{id:t+"_ifr",frameBorder:"0",allowTransparency:"true",title:e}),lc(o,"tox-edit-area__iframe"),o},Hz=function(t){var e=ud(t)+"<html><head>";sd(t)!==t.documentBaseUrl&&(e+='<base href="'+t.documentBaseURI.getURI()+'" />'),e+='<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />';var n=ld(t),r=cd(t);return fd(t)&&(e+='<meta http-equiv="Content-Security-Policy" content="'+fd(t)+'" />'),e+='</head><body id="'+n+'" class="mce-content-body '+r+'" data-id="'+t.id+'"><br></body></html>',e},Fz=function(t,e){var n=t.editorManager.translate("Rich Text Area. Press ALT-0 for help."),r=Vz(t.id,n,e.height,ad(t)).dom;r.onload=function(){r.onload=null,t.fire("load")};var o=Bz(t,r);return t.contentAreaContainer=e.iframeContainer,t.iframeElement=r,t.iframeHTML=Hz(t),zz.add(e.iframeContainer,r),o},Wz=function(t,e){var n=Fz(t,e);e.editorContainer&&(zz.get(e.editorContainer).style.display=t.orgDisplay,t.hidden=zz.isHidden(e.editorContainer)),t.getElement().style.display="none",zz.setAttrib(t.id,"aria-hidden","true"),n||Pz(t)},Uz=Il.DOM,Gz=function(t,e,n){var r=YD.get(n),o=YD.urls[n]||t.documentBaseUrl.replace(/\/$/,"");if(n=dn.trim(n),r&&-1===dn.inArray(e,n)){if(dn.each(YD.dependencies(n),function(n){Gz(t,e,n)}),t.plugins[n])return;try{var i=new r(t,o,t.$);t.plugins[n]=i,i.init&&(i.init(t,o),e.push(n))}catch(EH){aA(t,n,EH)}}},jz=function(t){return t.replace(/^\-/,"")},Xz=function(t){var e=[];dn.each(fh(t).split(/[ ,]/),function(n){Gz(t,e,jz(n))})},Yz=function(t){var e=dn.trim(Md(t)),n=t.ui.registry.getAll().icons,r=Ut(Ut({},LD.get("default").icons),LD.get(e).icons);wt(r,function(e,r){Ot(n,r)||t.ui.registry.addIcon(r,e)})},qz=function(t){var e=Xd(t);if(v(e)){t.settings.theme=jz(e);var n=qD.get(e);t.theme=new n(t,qD.urls[e]),t.theme.init&&t.theme.init(t,qD.urls[e]||t.documentBaseUrl.replace(/\/$/,""),t.$)}else t.theme={}},Zz=function(t){return t.theme.renderUI()},$z=function(t){var e=t.getElement(),n=Xd(t),r=n(t,e);return r.editorContainer.nodeType&&(r.editorContainer.id=r.editorContainer.id||t.id+"_parent"),r.iframeContainer&&r.iframeContainer.nodeType&&(r.iframeContainer.id=r.iframeContainer.id||t.id+"_iframecontainer"),r.height=r.iframeHeight?r.iframeHeight:e.offsetHeight,r},Kz=function(t){return{editorContainer:t,iframeContainer:t,api:{}}},Jz=function(t){var e=Uz.create("div");return Uz.insertAfter(e,t),Kz(e)},Qz=function(t){var e=t.getElement();return t.inline?Kz(null):Jz(e)},tB=function(t){var e=t.getElement();return t.orgDisplay=e.style.display,v(Xd(t))?Zz(t):M(Xd(t))?$z(t):Qz(t)},eB=function(t,e){var n={show:U.from(e.show).getOr(k),hide:U.from(e.hide).getOr(k),disable:U.from(e.disable).getOr(k),isDisabled:U.from(e.isDisabled).getOr(z),enable:function(){t.mode.isReadOnly()||U.from(e.enable).map(P)}};t.ui=Ut(Ut({},t.ui),n)},nB=function(t){t.fire("ScriptsLoaded"),Yz(t),qz(t),Xz(t);var e=tB(t);eB(t,U.from(e.api).getOr({}));var n={editorContainer:e.editorContainer,iframeContainer:e.iframeContainer};return t.editorContainer=n.editorContainer?n.editorContainer:null,dA(t),t.inline?Pz(t):Wz(t,n)},rB=Il.DOM,oB=function(t){return"-"===t.charAt(0)},iB=function(t,e){var n=Ed(e),r=Nd(e);if(!1===Jl.hasCode(n)&&"en"!==n){var o=""!==r?r:e.editorManager.baseURL+"/langs/"+n+".js";t.add(o,k,void 0,function(){iA(e,o,n)})}},aB=function(t,e,n,r){var o=Xd(e);if(v(o)){if(!oB(o)&&!qD.urls.hasOwnProperty(o)){var i=Qd(e);i?qD.load(o,e.documentBaseURI.toAbsolute(i)):qD.load(o,"themes/"+o+"/theme"+n+".js")}t.loadQueue(function(){qD.waitFor(o,r)})}else r()},uB=function(t){return U.from(Td(t)).filter(function(t){return t.length>0}).map(function(t){return{url:t,name:U.none()}})},sB=function(t,e,n){return U.from(e).filter(function(t){return t.length>0&&!LD.has(t)}).map(function(e){return{url:t.editorManager.baseURL+"/icons/"+e+"/icons"+n+".js",name:U.some(e)}})},lB=function(t,e,n){var r=sB(e,"default",n),o=uB(e).orThunk(function(){return sB(e,Md(e),"")});J(Pc([r,o]),function(n){t.add(n.url,k,void 0,function(){oA(e,n.url,n.name.getOrUndefined())})})},cB=function(t,e){dn.each(dh(t),function(e,n){YD.load(n,e,k,void 0,function(){rA(t,e,n)}),t.settings.plugins+=" "+n}),dn.each(fh(t).split(/[ ,]/),function(n){if(n=dn.trim(n),n&&!YD.urls[n])if(oB(n)){n=n.substr(1,n.length);var r=YD.dependencies(n);dn.each(r,function(n){var r={prefix:"plugins/",resource:n,suffix:"/plugin"+e+".js"},o=YD.createUrl(r,n);YD.load(o.resource,o,k,void 0,function(){rA(t,o.prefix+o.resource+o.suffix,o.resource)})})}else{var o={prefix:"plugins/",resource:n,suffix:"/plugin"+e+".js"};YD.load(n,o,k,void 0,function(){rA(t,o.prefix+o.resource+o.suffix,n)})}})},fB=function(t,e){var n=Bl.ScriptLoader;aB(n,t,e,function(){iB(n,t),lB(n,t,e),cB(t,e),n.loadQueue(function(){t.removed||nB(t)},t,function(){t.removed||nB(t)})})},dB=function(t,e){return Li.forElement(t,{contentCssCors:ch(e),referrerPolicy:Ld(e)})},hB=function(t){var e=t.id;Jl.setCode(Ed(t));var n=function(){rB.unbind(window,"ready",n),t.render()};if(Xu.Event.domLoaded){if(t.getElement()&&Je.contentEditable){var r=yn.fromDom(t.getElement()),o=go(r);t.on("remove",function(){Q(r.dom.attributes,function(t){return po(r,t.name)}),lo(r,o)}),t.ui.styleSheetLoader=dB(r,t),th(t)?t.inline=!0:(t.orgVisibility=t.getElement().style.visibility,t.getElement().style.visibility="hidden");var i=t.getElement().form||rB.getParent(e,"form");i&&(t.formElement=i,eh(t)&&!Zr(t.getElement())&&(rB.insertAfter(rB.create("input",{type:"hidden",name:e}),e),t.hasHiddenInput=!0),t.formEventDelegate=function(e){t.fire(e.type,e)},rB.bind(i,"submit reset",t.formEventDelegate),t.on("reset",function(){t.resetContent()}),!nh(t)||i.submit.nodeType||i.submit.length||i._mceOldSubmit||(i._mceOldSubmit=i.submit,i.submit=function(){return t.editorManager.triggerSave(),t.setDirty(!1),i._mceOldSubmit(i)})),t.windowManager=KD(t),t.notificationManager=XD(t),rh(t)&&t.on("GetContent",function(t){t.save&&(t.content=rB.encode(t.content))}),oh(t)&&t.on("submit",function(){t.initialized&&t.save()}),ih(t)&&(t._beforeUnload=function(){!t.initialized||t.destroyed||t.isHidden()||t.save({format:"raw",no_events:!0,set_dirty:!1})},t.editorManager.on("BeforeUnload",t._beforeUnload)),t.editorManager.add(t),fB(t,t.suffix)}}else rB.bind(window,"ready",n)},pB=function(t,e){return RT(t,e)},gB={"font-size":"size","font-family":"face"},mB=function(t,e,n){var r=function(e){return xo(e,t).orThunk(function(){return"font"===Rn(e)?It(gB,t).bind(function(t){return fo(e,t)}):U.none()})},o=function(t){return On(yn.fromDom(e),t)};return iS(yn.fromDom(n),function(t){return r(t)},o)},vB=function(t){return t.replace(/[\'\"\\]/g,"").replace(/,\s+/g,",")},yB=function(t,e){return U.from(Il.DOM.getStyle(e,t,!0))},bB=function(t){return function(e,n){return U.from(n).map(yn.fromDom).filter(Vn).bind(function(n){return mB(t,e,n.dom).or(yB(t,n.dom))}).getOr("")}},xB=bB("font-size"),wB=D(vB,bB("font-family")),_B=function(t){return Bp(t.getBody()).map(function(t){var e=t.container();return $r(e)?e.parentNode:e})},SB=function(t){return U.from(t.selection.getRng()).bind(function(e){var n=t.getBody(),r=e.startContainer===n&&0===e.startOffset;return r?U.none():U.from(t.selection.getStart(!0))})},CB=function(t,e){return SB(t).orThunk(L(_B,t)).map(yn.fromDom).filter(Vn).map(e)},MB=function(t,e){if(/^[0-9.]+$/.test(e)){var n=parseInt(e,10);if(n>=1&&n<=7){var r=bd(t),o=xd(t);return o?o[n-1]||e:r[n-1]||e}return e}return e},TB=function(t){var e=t.split(/\s*,\s*/);return K(e,function(t){return-1===t.indexOf(" ")||se(t,'"')||se(t,"'")?t:"'"+t+"'"}).join(",")},kB=function(t,e){var n=MB(t,e);t.formatter.toggle("fontname",{value:TB(n)}),t.nodeChanged()},DB=function(t){return CB(t,function(e){return wB(t.getBody(),e.dom)}).getOr("")},AB=function(t,e){t.formatter.toggle("fontsize",{value:MB(t,e)}),t.nodeChanged()},IB=function(t){return CB(t,function(e){return xB(t.getBody(),e.dom)}).getOr("")},OB=function(t){return CB(t,function(e){var n=yn.fromDom(t.getBody()),r=iS(e,function(t){return xo(t,"line-height")},L(On,n)),o=function(){var t=parseFloat(yo(e,"line-height")),n=parseFloat(yo(e,"font-size"));return String(t/n)};return r.getOrThunk(o)}).getOr("")},LB=function(t,e){t.formatter.toggle("lineheight",{value:String(e)}),t.nodeChanged()},EB=function(t){var e;return"string"!==typeof t?(e=dn.extend({paste:t.paste,data:{paste:t.paste}},t),{content:t.content,details:e}):{content:t,details:{}}},NB=function(t,e){var n=EB(e);ET(t,n.content,n.details)},RB=dn.each,PB=dn.map,zB=dn.inArray,BB=function(){function t(t){this.commands={state:{},exec:{},value:{}},this.editor=t,this.setupCommands(t)}return t.prototype.execCommand=function(t,e,n,r){var o,i=!1,a=this;if(!a.editor.removed){if(/^(mceAddUndoLevel|mceEndUndoLevel|mceBeginUndoLevel|mceRepaint)$/.test(t)||r&&r.skip_focus?My(a.editor):a.editor.focus(),r=a.editor.fire("BeforeExecCommand",{command:t,ui:e,value:n}),r.isDefaultPrevented())return!1;var u=t.toLowerCase();if(o=a.commands.exec[u])return o(u,e,n),a.editor.fire("ExecCommand",{command:t,ui:e,value:n}),!0;if(RB(this.editor.plugins,function(r){if(r.execCommand&&r.execCommand(t,e,n))return a.editor.fire("ExecCommand",{command:t,ui:e,value:n}),i=!0,!1}),i)return i;if(a.editor.theme&&a.editor.theme.execCommand&&a.editor.theme.execCommand(t,e,n))return a.editor.fire("ExecCommand",{command:t,ui:e,value:n}),!0;try{i=a.editor.getDoc().execCommand(t,e,n)}catch(s){}return!!i&&(a.editor.fire("ExecCommand",{command:t,ui:e,value:n}),!0)}},t.prototype.queryCommandState=function(t){var e;if(!this.editor.quirks.isHidden()&&!this.editor.removed){if(t=t.toLowerCase(),e=this.commands.state[t])return e(t);try{return this.editor.getDoc().queryCommandState(t)}catch(n){}return!1}},t.prototype.queryCommandValue=function(t){var e;if(!this.editor.quirks.isHidden()&&!this.editor.removed){if(t=t.toLowerCase(),e=this.commands.value[t])return e(t);try{return this.editor.getDoc().queryCommandValue(t)}catch(n){}}},t.prototype.addCommands=function(t,e){void 0===e&&(e="exec");var n=this;RB(t,function(t,r){RB(r.toLowerCase().split(","),function(r){n.commands[e][r]=t})})},t.prototype.addCommand=function(t,e,n){var r=this;t=t.toLowerCase(),this.commands.exec[t]=function(t,o,i,a){return e.call(n||r.editor,o,i,a)}},t.prototype.queryCommandSupported=function(t){if(t=t.toLowerCase(),this.commands.exec[t])return!0;try{return this.editor.getDoc().queryCommandSupported(t)}catch(e){}return!1},t.prototype.addQueryStateHandler=function(t,e,n){var r=this;t=t.toLowerCase(),this.commands.state[t]=function(){return e.call(n||r.editor)}},t.prototype.addQueryValueHandler=function(t,e,n){var r=this;t=t.toLowerCase(),this.commands.value[t]=function(){return e.call(n||r.editor)}},t.prototype.hasCustomCommand=function(t){return t=t.toLowerCase(),!!this.commands.exec[t]},t.prototype.execNativeCommand=function(t,e,n){return void 0===e&&(e=!1),void 0===n&&(n=null),this.editor.getDoc().execCommand(t,e,n)},t.prototype.isFormatMatch=function(t){return this.editor.formatter.match(t)},t.prototype.toggleFormat=function(t,e){this.editor.formatter.toggle(t,e?{value:e}:void 0),this.editor.nodeChanged()},t.prototype.storeSelection=function(t){this.selectionBookmark=this.editor.selection.getBookmark(t)},t.prototype.restoreSelection=function(){this.editor.selection.moveToBookmark(this.selectionBookmark)},t.prototype.setupCommands=function(t){var e=this;this.addCommands({"mceResetDesignMode,mceBeginUndoLevel":k,"mceEndUndoLevel,mceAddUndoLevel":function(){t.undoManager.add()},"Cut,Copy,Paste":function(n){var r,o=t.getDoc();try{e.execNativeCommand(n)}catch(a){r=!0}if("paste"!==n||o.queryCommandEnabled(n)||(r=!0),r||!o.queryCommandSupported(n)){var i=t.translate("Your browser doesn't support direct access to the clipboard. Please use the Ctrl+X/C/V keyboard shortcuts instead.");Je.mac&&(i=i.replace(/Ctrl\+/g,"⌘+")),t.notificationManager.open({text:i,type:"error"})}},unlink:function(){if(t.selection.isCollapsed()){var e=t.dom.getParent(t.selection.getStart(),"a");e&&t.dom.remove(e,!0)}else t.formatter.remove("link")},"JustifyLeft,JustifyCenter,JustifyRight,JustifyFull,JustifyNone":function(n){var r=n.substring(7);"full"===r&&(r="justify"),RB("left,center,right,justify".split(","),function(e){r!==e&&t.formatter.remove("align"+e)}),"none"!==r&&e.toggleFormat("align"+r)},"InsertUnorderedList,InsertOrderedList":function(n){var r;e.execNativeCommand(n);var o=t.dom.getParent(t.selection.getNode(),"ol,ul");o&&(r=o.parentNode,/^(H[1-6]|P|ADDRESS|PRE)$/.test(r.nodeName)&&(e.storeSelection(),t.dom.split(r,o),e.restoreSelection()))},"Bold,Italic,Underline,Strikethrough,Superscript,Subscript":function(t){e.toggleFormat(t)},"ForeColor,HiliteColor":function(t,n,r){e.toggleFormat(t,r)},FontName:function(e,n,r){kB(t,r)},FontSize:function(e,n,r){AB(t,r)},LineHeight:function(e,n,r){LB(t,r)},RemoveFormat:function(e){t.formatter.remove(e)},mceBlockQuote:function(){e.toggleFormat("blockquote")},FormatBlock:function(t,n,r){return e.toggleFormat(r||"p")},mceCleanup:function(){var e=t.selection.getBookmark();t.setContent(t.getContent()),t.selection.moveToBookmark(e)},mceRemoveNode:function(n,r,o){var i=o||t.selection.getNode();i!==t.getBody()&&(e.storeSelection(),t.dom.remove(i,!0),e.restoreSelection())},mceSelectNodeDepth:function(e,n,r){var o=0;t.dom.getParent(t.selection.getNode(),function(e){if(1===e.nodeType&&o++===r)return t.selection.select(e),!1},t.getBody())},mceSelectNode:function(e,n,r){t.selection.select(r)},mceInsertContent:function(e,n,r){NB(t,r)},mceInsertRawHTML:function(e,n,r){t.selection.setContent("tiny_mce_marker");var o=t.getContent();t.setContent(o.replace(/tiny_mce_marker/g,function(){return r}))},mceInsertNewLine:function(e,n,r){sP(t,r)},mceToggleFormat:function(t,n,r){e.toggleFormat(r)},mceSetContent:function(e,n,r){t.setContent(r)},"Indent,Outdent":function(e){DE(t,e)},mceRepaint:k,InsertHorizontalRule:function(){t.execCommand("mceInsertContent",!1,"<hr />")},mceToggleVisualAid:function(){t.hasVisual=!t.hasVisual,t.addVisual()},mceReplaceContent:function(e,n,r){t.execCommand("mceInsertContent",!1,r.replace(/\{\$selection\}/g,t.selection.getContent({format:"text"})))},mceInsertLink:function(e,n,r){"string"===typeof r&&(r={href:r});var o=t.dom.getParent(t.selection.getNode(),"a");r.href=r.href.replace(/ /g,"%20"),o&&r.href||t.formatter.remove("link"),r.href&&t.formatter.apply("link",r,o)},selectAll:function(){var e=t.dom.getParent(t.selection.getStart(),no);if(e){var n=t.dom.createRng();n.selectNodeContents(e),t.selection.setRng(n)}},mceNewDocument:function(){t.setContent("")},InsertLineBreak:function(e,n,r){return jR(t,r),!0}});var n=function(e){return function(){var n=t.selection,r=n.isCollapsed()?[t.dom.getParent(n.getNode(),t.dom.isBlock)]:n.getSelectedBlocks(),o=PB(r,function(n){return!!t.formatter.matchNode(n,e)});return-1!==zB(o,!0)}};e.addCommands({JustifyLeft:n("alignleft"),JustifyCenter:n("aligncenter"),JustifyRight:n("alignright"),JustifyFull:n("alignjustify"),"Bold,Italic,Underline,Strikethrough,Superscript,Subscript":function(t){return e.isFormatMatch(t)},mceBlockQuote:function(){return e.isFormatMatch("blockquote")},Outdent:function(){return CE(t)},"InsertUnorderedList,InsertOrderedList":function(e){var n=t.dom.getParent(t.selection.getNode(),"ul,ol");return n&&("insertunorderedlist"===e&&"UL"===n.tagName||"insertorderedlist"===e&&"OL"===n.tagName)}},"state"),e.addCommands({Undo:function(){t.undoManager.undo()},Redo:function(){t.undoManager.redo()}}),e.addQueryValueHandler("FontName",function(){return DB(t)},this),e.addQueryValueHandler("FontSize",function(){return IB(t)},this),e.addQueryValueHandler("LineHeight",function(){return OB(t)},this)},t}(),VB="data-mce-contenteditable",HB=function(t,e,n){dc(t,e)&&!1===n?fc(t,e):n&&lc(t,e)},FB=function(t,e,n){try{t.getDoc().execCommand(e,!1,String(n))}catch(r){}},WB=function(t,e){t.dom.contentEditable=e?"true":"false"},UB=function(t){J(pc(t,'*[contenteditable="true"]'),function(t){so(t,VB,"true"),WB(t,!1)})},GB=function(t){J(pc(t,"*["+VB+'="true"]'),function(t){po(t,VB),WB(t,!0)})},jB=function(t){U.from(t.selection.getNode()).each(function(t){t.removeAttribute("data-mce-selected")})},XB=function(t){t.selection.setRng(t.selection.getRng())},YB=function(t,e){var n=yn.fromDom(t.getBody());HB(n,"mce-content-readonly",e),e?(t.selection.controlSelection.hideResizeRect(),t._selectionOverrides.hideFakeCaret(),jB(t),t.readonly=!0,WB(n,!1),UB(n)):(t.readonly=!1,WB(n,!0),GB(n),FB(t,"StyleWithCSS",!1),FB(t,"enableInlineTableEditing",!1),FB(t,"enableObjectResizing",!1),Jy(t)&&t.focus(),XB(t),t.nodeChanged())},qB=function(t){return t.readonly},ZB=function(t){t.parser.addAttributeFilter("contenteditable",function(e){qB(t)&&J(e,function(t){t.attr(VB,t.attr("contenteditable")),t.attr("contenteditable","false")})}),t.serializer.addAttributeFilter(VB,function(e){qB(t)&&J(e,function(t){t.attr("contenteditable",t.attr(VB))})}),t.serializer.addTempAttr(VB)},$B=function(t){t.serializer?ZB(t):t.on("PreInit",function(){ZB(t)})},KB=function(t){return"click"===t.type},JB=function(t,e){var n=function(e){return On(e,yn.fromDom(t.getBody()))};return xi(e,"a",n).bind(function(t){return fo(t,"href")})},QB=function(t,e){if(KB(e)&&!Hm.metaKeyPressed(e)){var n=yn.fromDom(e.target);JB(t,n).each(function(n){if(e.preventDefault(),/^#/.test(n)){var r=t.dom.select(n+',[name="'+ae(n,"#")+'"]');r.length&&t.selection.scrollIntoView(r[0],!0)}else window.open(n,"_blank","rel=noopener noreferrer,menubar=yes,toolbar=yes,location=yes,status=yes,resizable=yes,scrollbars=yes")})}},tV=function(t){t.on("ShowCaret",function(e){qB(t)&&e.preventDefault()}),t.on("ObjectSelected",function(e){qB(t)&&e.preventDefault()})},eV=dn.makeMap("focus blur focusin focusout click dblclick mousedown mouseup mousemove mouseover beforepaste paste cut copy selectionchange mouseout mouseenter mouseleave wheel keydown keypress keyup input beforeinput contextmenu dragstart dragend dragover draggesture dragdrop drop drag submit compositionstart compositionend compositionupdate touchstart touchmove touchend touchcancel"," "),nV=function(){function t(t){this.bindings={},this.settings=t||{},this.scope=this.settings.scope||this,this.toggleEvent=this.settings.toggleEvent||z}return t.isNative=function(t){return!!eV[t.toLowerCase()]},t.prototype.fire=function(t,e){var n=t.toLowerCase(),r=e||{};r.type=n,r.target||(r.target=this.scope),r.preventDefault||(r.preventDefault=function(){r.isDefaultPrevented=B},r.stopPropagation=function(){r.isPropagationStopped=B},r.stopImmediatePropagation=function(){r.isImmediatePropagationStopped=B},r.isDefaultPrevented=z,r.isPropagationStopped=z,r.isImmediatePropagationStopped=z),this.settings.beforeFire&&this.settings.beforeFire(r);var o=this.bindings[n];if(o)for(var i=0,a=o.length;i<a;i++){var u=o[i];if(u.once&&this.off(n,u.func),r.isImmediatePropagationStopped())return r.stopPropagation(),r;if(!1===u.func.call(this.scope,r))return r.preventDefault(),r}return r},t.prototype.on=function(t,e,n,r){if(!1===e&&(e=z),e){var o={func:e};r&&dn.extend(o,r);var i=t.toLowerCase().split(" "),a=i.length;while(a--){var u=i[a],s=this.bindings[u];s||(s=this.bindings[u]=[],this.toggleEvent(u,!0)),n?s.unshift(o):s.push(o)}}return this},t.prototype.off=function(t,e){var n=this;if(t){var r=t.toLowerCase().split(" "),o=r.length;while(o--){var i=r[o],a=this.bindings[i];if(!i)return wt(this.bindings,function(t,e){n.toggleEvent(e,!1),delete n.bindings[e]}),this;if(a){if(e){var u=a.length;while(u--)a[u].func===e&&(a=a.slice(0,u).concat(a.slice(u+1)),this.bindings[i]=a)}else a.length=0;a.length||(this.toggleEvent(t,!1),delete this.bindings[i])}}}else wt(this.bindings,function(t,e){n.toggleEvent(e,!1)}),this.bindings={};return this},t.prototype.once=function(t,e,n){return this.on(t,e,n,{once:!0})},t.prototype.has=function(t){return t=t.toLowerCase(),!(!this.bindings[t]||0===this.bindings[t].length)},t}(),rV=function(t){return t._eventDispatcher||(t._eventDispatcher=new nV({scope:t,toggleEvent:function(e,n){nV.isNative(e)&&t.toggleNativeEvent&&t.toggleNativeEvent(e,n)}})),t._eventDispatcher},oV={fire:function(t,e,n){var r=this;if(r.removed&&"remove"!==t&&"detach"!==t)return e;var o=rV(r).fire(t,e);if(!1!==n&&r.parent){var i=r.parent();while(i&&!o.isPropagationStopped())i.fire(t,o,!1),i=i.parent()}return o},on:function(t,e,n){return rV(this).on(t,e,n)},off:function(t,e){return rV(this).off(t,e)},once:function(t,e){return rV(this).once(t,e)},hasEventListeners:function(t){return rV(this).has(t)}},iV=Il.DOM,aV=function(t,e){if("selectionchange"===e)return t.getDoc();if(!t.inline&&/^mouse|touch|click|contextmenu|drop|dragover|dragend/.test(e))return t.getDoc().documentElement;var n=Gd(t);return n?(t.eventRoot||(t.eventRoot=iV.select(n)[0]),t.eventRoot):t.getBody()},uV=function(t){return!t.hidden&&!qB(t)},sV=function(t,e,n){uV(t)?t.fire(e,n):qB(t)&&QB(t,n)},lV=function(t,e){var n;if(t.delegates||(t.delegates={}),!t.delegates[e]&&!t.removed){var r=aV(t,e);if(Gd(t)){if(gL||(gL={},t.editorManager.on("removeEditor",function(){t.editorManager.activeEditor||gL&&(wt(gL,function(e,n){t.dom.unbind(aV(t,n))}),gL=null)})),gL[e])return;n=function(n){var r=n.target,o=t.editorManager.get(),i=o.length;while(i--){var a=o[i].getBody();(a===r||iV.isChildOf(r,a))&&sV(o[i],e,n)}},gL[e]=n,iV.bind(r,e,n)}else n=function(n){sV(t,e,n)},iV.bind(r,e,n),t.delegates[e]=n}},cV=Ut(Ut({},oV),{bindPendingEventDelegates:function(){var t=this;dn.each(t._pendingNativeEvents,function(e){lV(t,e)})},toggleNativeEvent:function(t,e){var n=this;"focus"!==t&&"blur"!==t&&(e?n.initialized?lV(n,t):n._pendingNativeEvents?n._pendingNativeEvents.push(t):n._pendingNativeEvents=[t]:n.initialized&&(n.dom.unbind(aV(n,t),t,n.delegates[t]),delete n.delegates[t]))},unbindAllNativeEvents:function(){var t=this,e=t.getBody(),n=t.dom;t.delegates&&(wt(t.delegates,function(e,n){t.dom.unbind(aV(t,n),n,e)}),delete t.delegates),!t.inline&&e&&n&&(e.onload=null,n.unbind(t.getWin()),n.unbind(t.getDoc())),n&&(n.unbind(e),n.unbind(t.getContainer()))}}),fV=["design","readonly"],dV=function(t,e,n,r){var o=n[e.get()],i=n[r];try{i.activate()}catch(EH){return void console.error("problem while activating editor mode "+r+":",EH)}o.deactivate(),o.editorReadOnly!==i.editorReadOnly&&YB(t,i.editorReadOnly),e.set(r),Lm(t,r)},hV=function(t,e,n,r){if(r!==n.get()){if(!Ot(e,r))throw new Error("Editor mode '"+r+"' is invalid");t.initialized?dV(t,n,e,r):t.on("init",function(){return dV(t,n,e,r)})}},pV=function(t,e,n){var r;if(Z(fV,e))throw new Error("Cannot override default mode "+e);return Ut(Ut({},t),(r={},r[e]=Ut(Ut({},n),{deactivate:function(){try{n.deactivate()}catch(EH){console.error("problem while deactivating editor mode "+e+":",EH)}}}),r))},gV=function(t){var e=Vl("design"),n=Vl({design:{activate:k,deactivate:k,editorReadOnly:!1},readonly:{activate:k,deactivate:k,editorReadOnly:!0}});return $B(t),tV(t),{isReadOnly:function(){return qB(t)},set:function(r){return hV(t,n.get(),e,r)},get:function(){return e.get()},register:function(t,e){n.set(pV(n.get(),t,e))}}},mV=dn.each,vV=dn.explode,yV={f1:112,f2:113,f3:114,f4:115,f5:116,f6:117,f7:118,f8:119,f9:120,f10:121,f11:122,f12:123},bV=dn.makeMap("alt,ctrl,shift,meta,access"),xV=function(t){var e,n={};mV(vV(t.toLowerCase(),"+"),function(t){t in bV?n[t]=!0:/^[0-9]{2,}$/.test(t)?n.keyCode=parseInt(t,10):(n.charCode=t.charCodeAt(0),n.keyCode=yV[t]||t.toUpperCase().charCodeAt(0))});var r=[n.keyCode];for(e in bV)n[e]?r.push(e):n[e]=!1;return n.id=r.join(","),n.access&&(n.alt=!0,Je.mac?n.ctrl=!0:n.shift=!0),n.meta&&(Je.mac?n.meta=!0:(n.ctrl=!0,n.meta=!1)),n},wV=function(){function t(t){this.shortcuts={},this.pendingPatterns=[],this.editor=t;var e=this;t.on("keyup keypress keydown",function(t){!e.hasModifier(t)&&!e.isFunctionKey(t)||t.isDefaultPrevented()||(mV(e.shortcuts,function(n){if(e.matchShortcut(t,n))return e.pendingPatterns=n.subpatterns.slice(0),"keydown"===t.type&&e.executeShortcutAction(n),!0}),e.matchShortcut(t,e.pendingPatterns[0])&&(1===e.pendingPatterns.length&&"keydown"===t.type&&e.executeShortcutAction(e.pendingPatterns[0]),e.pendingPatterns.shift()))})}return t.prototype.add=function(t,e,n,r){var o=this,i=o.normalizeCommandFunc(n);return mV(vV(dn.trim(t)),function(t){var n=o.createShortcut(t,e,i,r);o.shortcuts[n.id]=n}),!0},t.prototype.remove=function(t){var e=this.createShortcut(t);return!!this.shortcuts[e.id]&&(delete this.shortcuts[e.id],!0)},t.prototype.normalizeCommandFunc=function(t){var e=this,n=t;return"string"===typeof n?function(){e.editor.execCommand(n,!1,null)}:dn.isArray(n)?function(){e.editor.execCommand(n[0],n[1],n[2])}:n},t.prototype.createShortcut=function(t,e,n,r){var o=dn.map(vV(t,">"),xV);return o[o.length-1]=dn.extend(o[o.length-1],{func:n,scope:r||this.editor}),dn.extend(o[0],{desc:this.editor.translate(e),subpatterns:o.slice(1)})},t.prototype.hasModifier=function(t){return t.altKey||t.ctrlKey||t.metaKey},t.prototype.isFunctionKey=function(t){return"keydown"===t.type&&t.keyCode>=112&&t.keyCode<=123},t.prototype.matchShortcut=function(t,e){return!!e&&(e.ctrl===t.ctrlKey&&e.meta===t.metaKey&&(e.alt===t.altKey&&e.shift===t.shiftKey&&(!!(t.keyCode===e.keyCode||t.charCode&&t.charCode===e.charCode)&&(t.preventDefault(),!0))))},t.prototype.executeShortcutAction=function(t){return t.func?t.func.call(t.scope):null},t}(),_V=function(){var t={},e={},n={},r={},o={},i={},a={},u=function(t,e){return function(n,r){return t[n.toLowerCase()]=Ut(Ut({},r),{type:e})}},s=function(t,e){return r[t.toLowerCase()]=e};return{addButton:u(t,"button"),addGroupToolbarButton:u(t,"grouptoolbarbutton"),addToggleButton:u(t,"togglebutton"),addMenuButton:u(t,"menubutton"),addSplitButton:u(t,"splitbutton"),addMenuItem:u(e,"menuitem"),addNestedMenuItem:u(e,"nestedmenuitem"),addToggleMenuItem:u(e,"togglemenuitem"),addAutocompleter:u(n,"autocompleter"),addContextMenu:u(o,"contextmenu"),addContextToolbar:u(i,"contexttoolbar"),addContextForm:u(i,"contextform"),addSidebar:u(a,"sidebar"),addIcon:s,getAll:function(){return{buttons:t,menuItems:e,icons:r,popups:n,contextMenus:o,contextToolbars:i,sidebars:a}}}},SV=function(){var t=_V();return{addAutocompleter:t.addAutocompleter,addButton:t.addButton,addContextForm:t.addContextForm,addContextMenu:t.addContextMenu,addContextToolbar:t.addContextToolbar,addIcon:t.addIcon,addMenuButton:t.addMenuButton,addMenuItem:t.addMenuItem,addNestedMenuItem:t.addNestedMenuItem,addSidebar:t.addSidebar,addSplitButton:t.addSplitButton,addToggleButton:t.addToggleButton,addGroupToolbarButton:t.addGroupToolbarButton,addToggleMenuItem:t.addToggleMenuItem,getAll:t.getAll}},CV=dn.each,MV=dn.trim,TV="source protocol authority userInfo user password host port relative path directory file query anchor".split(" "),kV={ftp:21,http:80,https:443,mailto:25},DV=function(){function t(e,n){e=MV(e),this.settings=n||{};var r=this.settings.base_uri,o=this;if(/^([\w\-]+):([^\/]{2})/i.test(e)||/^\s*#/.test(e))o.source=e;else{var i=0===e.indexOf("//");if(0!==e.indexOf("/")||i||(e=(r&&r.protocol||"http")+"://mce_host"+e),!/^[\w\-]*:?\/\//.test(e)){var a=this.settings.base_uri?this.settings.base_uri.path:new t(document.location.href).directory;if(this.settings.base_uri&&""==this.settings.base_uri.protocol)e="//mce_host"+o.toAbsPath(a,e);else{var u=/([^#?]*)([#?]?.*)/.exec(e);e=(r&&r.protocol||"http")+"://mce_host"+o.toAbsPath(a,u[1])+u[2]}}e=e.replace(/@@/g,"(mce_at)");var s=/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@\/]*):?([^:@\/]*))?@)?(\[[a-zA-Z0-9:.%]+\]|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/.exec(e);CV(TV,function(t,e){var n=s[e];n&&(n=n.replace(/\(mce_at\)/g,"@@")),o[t]=n}),r&&(o.protocol||(o.protocol=r.protocol),o.userInfo||(o.userInfo=r.userInfo),o.port||"mce_host"!==o.host||(o.port=r.port),o.host&&"mce_host"!==o.host||(o.host=r.host),o.source=""),i&&(o.protocol="")}}return t.parseDataUri=function(t){var e,n=decodeURIComponent(t).split(","),r=/data:([^;]+)/.exec(n[0]);return r&&(e=r[1]),{type:e,data:n[1]}},t.getDocumentBaseUrl=function(t){var e;return e=0!==t.protocol.indexOf("http")&&"file:"!==t.protocol?t.href:t.protocol+"//"+t.host+t.pathname,/^[^:]+:\/\/\/?[^\/]+\//.test(e)&&(e=e.replace(/[\?#].*$/,"").replace(/[\/\\][^\/]+$/,""),/[\/\\]$/.test(e)||(e+="/")),e},t.prototype.setPath=function(t){var e=/^(.*?)\/?(\w+)?$/.exec(t);this.path=e[0],this.directory=e[1],this.file=e[2],this.source="",this.getURI()},t.prototype.toRelative=function(e){var n;if("./"===e)return e;var r=new t(e,{base_uri:this});if("mce_host"!==r.host&&this.host!==r.host&&r.host||this.port!==r.port||this.protocol!==r.protocol&&""!==r.protocol)return r.getURI();var o=this.getURI(),i=r.getURI();return o===i||"/"===o.charAt(o.length-1)&&o.substr(0,o.length-1)===i?o:(n=this.toRelPath(this.path,r.path),r.query&&(n+="?"+r.query),r.anchor&&(n+="#"+r.anchor),n)},t.prototype.toAbsolute=function(e,n){var r=new t(e,{base_uri:this});return r.getURI(n&&this.isSameOrigin(r))},t.prototype.isSameOrigin=function(t){if(this.host==t.host&&this.protocol==t.protocol){if(this.port==t.port)return!0;var e=kV[this.protocol];if(e&&(this.port||e)==(t.port||e))return!0}return!1},t.prototype.toRelPath=function(t,e){var n,r,o=0,i="",a=t.substring(0,t.lastIndexOf("/")).split("/"),u=e.split("/");if(a.length>=u.length)for(n=0,r=a.length;n<r;n++)if(n>=u.length||a[n]!==u[n]){o=n+1;break}if(a.length<u.length)for(n=0,r=u.length;n<r;n++)if(n>=a.length||a[n]!==u[n]){o=n+1;break}if(1===o)return e;for(n=0,r=a.length-(o-1);n<r;n++)i+="../";for(n=o-1,r=u.length;n<r;n++)i+=n!==o-1?"/"+u[n]:u[n];return i},t.prototype.toAbsPath=function(t,e){var n,r,o=0,i=[],a=/\/$/.test(e)?"/":"",u=t.split("/"),s=e.split("/");for(CV(u,function(t){t&&i.push(t)}),u=i,n=s.length-1,i=[];n>=0;n--)0!==s[n].length&&"."!==s[n]&&(".."!==s[n]?o>0?o--:i.push(s[n]):o++);return n=u.length-o,r=n<=0?ct(i).join("/"):u.slice(0,n).join("/")+"/"+ct(i).join("/"),0!==r.indexOf("/")&&(r="/"+r),a&&r.lastIndexOf("/")!==r.length-1&&(r+=a),r},t.prototype.getURI=function(t){var e;return void 0===t&&(t=!1),this.source&&!t||(e="",t||(this.protocol?e+=this.protocol+"://":e+="//",this.userInfo&&(e+=this.userInfo+"@"),this.host&&(e+=this.host),this.port&&(e+=":"+this.port)),this.path&&(e+=this.path),this.query&&(e+="?"+this.query),this.anchor&&(e+="#"+this.anchor),this.source=e),this.source},t}(),AV=Il.DOM,IV=dn.extend,OV=dn.each,LV=dn.resolve,EV=Je.ie,NV=function(){function t(t,e,n){var r=this;this.plugins={},this.contentCSS=[],this.contentStyles=[],this.loadedCSS={},this.isNotDirty=!1,this.editorManager=n,this.documentBaseUrl=n.documentBaseURL,IV(this,cV),this.settings=TD(this,t,this.documentBaseUrl,n.defaultSettings,e),this.settings.suffix&&(n.suffix=this.settings.suffix),this.suffix=n.suffix,this.settings.base_url&&n._setBaseUrl(this.settings.base_url),this.baseUri=n.baseURI,this.settings.referrer_policy&&(Bl.ScriptLoader._setReferrerPolicy(this.settings.referrer_policy),Il.DOM.styleSheetLoader._setReferrerPolicy(this.settings.referrer_policy)),Ql.languageLoad=this.settings.language_load,Ql.baseURL=n.baseURL,this.id=t,this.setDirty(!1),this.documentBaseURI=new DV(this.settings.document_base_url,{base_uri:this.baseUri}),this.baseURI=this.baseUri,this.inline=!!this.settings.inline,this.shortcuts=new wV(this),this.editorCommands=new BB(this),this.settings.cache_suffix&&(Je.cacheSuffix=this.settings.cache_suffix.replace(/^[\?\&]+/,"")),this.ui={registry:SV(),styleSheetLoader:void 0,show:k,hide:k,enable:k,disable:k,isDisabled:z};var o=this,i=gV(o);this.mode=i,this.setMode=i.set,n.fire("SetupEditor",{editor:this}),this.execCallback("setup",this),this.$=_l.overrideDefaults(function(){return{context:r.inline?r.getBody():r.getDoc(),element:r.getBody()}})}return t.prototype.render=function(){hB(this)},t.prototype.focus=function(t){eb(this,t)},t.prototype.hasFocus=function(){return Ky(this)},t.prototype.execCallback=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];var r,o=this,i=o.settings[t];if(i)return o.callbackLookup&&(r=o.callbackLookup[t])&&(i=r.func,r=r.scope),"string"===typeof i&&(r=i.replace(/\.\w+$/,""),r=r?LV(r):0,i=LV(i),o.callbackLookup=o.callbackLookup||{},o.callbackLookup[t]={func:i,scope:r}),i.apply(r||o,e)},t.prototype.translate=function(t){return Jl.translate(t)},t.prototype.getParam=function(t,e,n){return ID(this,t,e,n)},t.prototype.hasPlugin=function(t,e){var n=Z(fh(this).split(/[ ,]/),t);return!!n&&(!e||void 0!==YD.get(t))},t.prototype.nodeChanged=function(t){this._nodeChangeDispatcher.nodeChanged(t)},t.prototype.addCommand=function(t,e,n){this.editorCommands.addCommand(t,e,n)},t.prototype.addQueryStateHandler=function(t,e,n){this.editorCommands.addQueryStateHandler(t,e,n)},t.prototype.addQueryValueHandler=function(t,e,n){this.editorCommands.addQueryValueHandler(t,e,n)},t.prototype.addShortcut=function(t,e,n,r){this.shortcuts.add(t,e,n,r)},t.prototype.execCommand=function(t,e,n,r){return this.editorCommands.execCommand(t,e,n,r)},t.prototype.queryCommandState=function(t){return this.editorCommands.queryCommandState(t)},t.prototype.queryCommandValue=function(t){return this.editorCommands.queryCommandValue(t)},t.prototype.queryCommandSupported=function(t){return this.editorCommands.queryCommandSupported(t)},t.prototype.show=function(){var t=this;t.hidden&&(t.hidden=!1,t.inline?t.getBody().contentEditable="true":(AV.show(t.getContainer()),AV.hide(t.id)),t.load(),t.fire("show"))},t.prototype.hide=function(){var t=this,e=t.getDoc();t.hidden||(EV&&e&&!t.inline&&e.execCommand("SelectAll"),t.save(),t.inline?(t.getBody().contentEditable="false",t===t.editorManager.focusedEditor&&(t.editorManager.focusedEditor=null)):(AV.hide(t.getContainer()),AV.setStyle(t.id,"display",t.orgDisplay)),t.hidden=!0,t.fire("hide"))},t.prototype.isHidden=function(){return!!this.hidden},t.prototype.setProgressState=function(t,e){this.fire("ProgressState",{state:t,time:e})},t.prototype.load=function(t){var e,n=this,r=n.getElement();if(n.removed)return"";if(r){t=t||{},t.load=!0;var o=Zr(r)?r.value:r.innerHTML;return e=n.setContent(o,t),t.element=r,t.no_events||n.fire("LoadContent",t),t.element=r=null,e}},t.prototype.save=function(t){var e,n,r=this,o=r.getElement();if(o&&r.initialized&&!r.removed)return t=t||{},t.save=!0,t.element=o,e=t.content=r.getContent(t),t.no_events||r.fire("SaveContent",t),"raw"===t.format&&r.fire("RawSaveContent",t),e=t.content,Zr(o)?o.value=e:(!t.is_removing&&r.inline||(o.innerHTML=e),(n=AV.getParent(r.id,"form"))&&OV(n.elements,function(t){if(t.name===r.id)return t.value=e,!1})),t.element=o=null,!1!==t.set_dirty&&r.setDirty(!1),e},t.prototype.setContent=function(t,e){return jk(this,t,e)},t.prototype.getContent=function(t){return Gk(this,t)},t.prototype.insertContent=function(t,e){e&&(t=IV({content:t},e)),this.execCommand("mceInsertContent",!1,t)},t.prototype.resetContent=function(t){void 0===t?jk(this,this.startContent,{format:"raw"}):jk(this,t),this.undoManager.reset(),this.setDirty(!1),this.nodeChanged()},t.prototype.isDirty=function(){return!this.isNotDirty},t.prototype.setDirty=function(t){var e=!this.isNotDirty;this.isNotDirty=!t,t&&t!==e&&this.fire("dirty")},t.prototype.getContainer=function(){var t=this;return t.container||(t.container=AV.get(t.editorContainer||t.id+"_parent")),t.container},t.prototype.getContentAreaContainer=function(){return this.contentAreaContainer},t.prototype.getElement=function(){return this.targetElm||(this.targetElm=AV.get(this.id)),this.targetElm},t.prototype.getWin=function(){var t,e=this;return e.contentWindow||(t=e.iframeElement,t&&(e.contentWindow=t.contentWindow)),e.contentWindow},t.prototype.getDoc=function(){var t,e=this;return e.contentDocument||(t=e.getWin(),t&&(e.contentDocument=t.document)),e.contentDocument},t.prototype.getBody=function(){var t=this.getDoc();return this.bodyElement||(t?t.body:null)},t.prototype.convertURL=function(t,e,n){var r=this,o=r.settings;return o.urlconverter_callback?r.execCallback("urlconverter_callback",t,n,!0,e):!o.convert_urls||n&&"LINK"===n.nodeName||0===t.indexOf("file:")||0===t.length?t:o.relative_urls?r.documentBaseURI.toRelative(t):(t=r.documentBaseURI.toAbsolute(t,o.remove_script_host),t)},t.prototype.addVisual=function(t){pB(this,t)},t.prototype.remove=function(){Kk(this)},t.prototype.destroy=function(t){Jk(this,t)},t.prototype.uploadImages=function(t){return this.editorUpload.uploadImages(t)},t.prototype._scanForImages=function(){return this.editorUpload.scanForImages()},t.prototype.addButton=function(){throw new Error("editor.addButton has been removed in tinymce 5x, use editor.ui.registry.addButton or editor.ui.registry.addToggleButton or editor.ui.registry.addSplitButton instead")},t.prototype.addSidebar=function(){throw new Error("editor.addSidebar has been removed in tinymce 5x, use editor.ui.registry.addSidebar instead")},t.prototype.addMenuItem=function(){throw new Error("editor.addMenuItem has been removed in tinymce 5x, use editor.ui.registry.addMenuItem instead")},t.prototype.addContextToolbar=function(){throw new Error("editor.addContextToolbar has been removed in tinymce 5x, use editor.ui.registry.addContextToolbar instead")},t}(),RV=Il.DOM,PV=dn.explode,zV=dn.each,BV=dn.extend,VV=0,HV=!1,FV=[],WV=[],UV=function(t){return"length"!==t},GV=function(t){var e=t.type;zV(ZV.get(),function(n){switch(e){case"scroll":n.fire("ScrollWindow",t);break;case"resize":n.fire("ResizeWindow",t);break}})},jV=function(t){t!==HV&&(t?_l(window).on("resize scroll",GV):_l(window).off("resize scroll",GV),HV=t)},XV=function(t){var e=WV;delete FV[t.id];for(var n=0;n<FV.length;n++)if(FV[n]===t){FV.splice(n,1);break}return WV=et(WV,function(e){return t!==e}),ZV.activeEditor===t&&(ZV.activeEditor=WV.length>0?WV[0]:null),ZV.focusedEditor===t&&(ZV.focusedEditor=null),e.length!==WV.length},YV=function(t){return t&&t.initialized&&!(t.getContainer()||t.getBody()).parentNode&&(XV(t),t.unbindAllNativeEvents(),t.destroy(!0),t.removed=!0,t=null),t},qV="CSS1Compat"!==document.compatMode,ZV=Ut(Ut({},oV),{baseURI:null,baseURL:null,defaultSettings:{},documentBaseURL:null,suffix:null,$:_l,majorVersion:"5",minorVersion:"8.2",releaseDate:"2021-06-23",editors:FV,i18n:Jl,activeEditor:null,focusedEditor:null,settings:{},setup:function(){var t,e,n=this,r="";e=DV.getDocumentBaseUrl(document.location),/^[^:]+:\/\/\/?[^\/]+\//.test(e)&&(e=e.replace(/[\?#].*$/,"").replace(/[\/\\][^\/]+$/,""),/[\/\\]$/.test(e)||(e+="/"));var o=window.tinymce||window.tinyMCEPreInit;if(o)t=o.base||o.baseURL,r=o.suffix;else{for(var i=document.getElementsByTagName("script"),a=0;a<i.length;a++){var u=i[a].src||"";if(""!==u){var s=u.substring(u.lastIndexOf("/"));if(/tinymce(\.full|\.jquery|)(\.min|\.dev|)\.js/.test(u)){-1!==s.indexOf(".min")&&(r=".min"),t=u.substring(0,u.lastIndexOf("/"));break}}}if(!t&&document.currentScript){u=document.currentScript.src;-1!==u.indexOf(".min")&&(r=".min"),t=u.substring(0,u.lastIndexOf("/"))}}n.baseURL=new DV(e).toAbsolute(t),n.documentBaseURL=e,n.baseURI=new DV(n.baseURL),n.suffix=r,Fy(n)},overrideDefaults:function(t){var e=t.base_url;e&&this._setBaseUrl(e);var n=t.suffix;t.suffix&&(this.suffix=n),this.defaultSettings=t;var r=t.plugin_base_urls;void 0!==r&&wt(r,function(t,e){Ql.PluginManager.urls[e]=t})},init:function(t){var e,n=this,r=dn.makeMap("area base basefont br col frame hr img input isindex link meta param embed source wbr track colgroup option table tbody tfoot thead tr th td script noscript style textarea video audio iframe object menu"," "),o=function(t,e){return t.inline&&e.tagName.toLowerCase()in r},i=function(t){var e=t.id;return e||(e=It(t,"name").filter(function(t){return!RV.get(t)}).getOrThunk(RV.uniqueId),t.setAttribute("id",e)),e},a=function(e){var r=t[e];if(r)return r.apply(n,[])},u=function(t,e){return e.constructor===RegExp?e.test(t.className):RV.hasClass(t,e)},s=function(t){var e=[];if(Je.browser.isIE()&&Je.browser.version.major<11)return uA("TinyMCE does not support the browser you are using. For a list of supported browsers please see: https://www.tinymce.com/docs/get-started/system-requirements/"),[];if(qV)return uA("Failed to initialize the editor as the document is not in standards mode. TinyMCE requires standards mode."),[];if(t.types)return zV(t.types,function(t){e=e.concat(RV.select(t.selector))}),e;if(t.selector)return RV.select(t.selector);if(t.target)return[t.target];switch(t.mode){case"exact":var n=t.elements||"";n.length>0&&zV(PV(n),function(t){var n=RV.get(t);n?e.push(n):zV(document.forms,function(n){zV(n.elements,function(n){n.name===t&&(t="mce_editor_"+VV++,RV.setAttrib(n,"id",t),e.push(n))})})});break;case"textareas":case"specific_textareas":zV(RV.select("textarea"),function(n){t.editor_deselector&&u(n,t.editor_deselector)||t.editor_selector&&!u(n,t.editor_selector)||e.push(n)});break}return e},l=function(t){e=t},c=function(){var e,r=0,u=[],f=function(t,o,i){var a=new NV(t,o,n);u.push(a),a.on("init",function(){++r===e.length&&l(u)}),a.targetElm=a.targetElm||i,a.render()};RV.unbind(window,"ready",c),a("onpageload"),e=_l.unique(s(t)),t.types?zV(t.types,function(n){dn.each(e,function(e){return!RV.is(e,n.selector)||(f(i(e),BV({},t,n),e),!1)})}):(dn.each(e,function(t){YV(n.get(t.id))}),e=dn.grep(e,function(t){return!n.get(t.id)}),0===e.length?l([]):zV(e,function(e){o(t,e)?uA("Could not initialize inline editor on invalid inline target element",e):f(i(e),t,e)}))};return n.settings=t,RV.bind(window,"ready",c),new _i(function(t){e?t(e):l=function(e){t(e)}})},get:function(t){return 0===arguments.length?WV.slice(0):v(t)?it(WV,function(e){return e.id===t}).getOr(null):T(t)&&WV[t]?WV[t]:null},add:function(t){var e=this,n=FV[t.id];return n===t?t:(null===e.get(t.id)&&(UV(t.id)&&(FV[t.id]=t),FV.push(t),WV.push(t)),jV(!0),e.activeEditor=t,e.fire("AddEditor",{editor:t}),mL||(mL=function(t){var n=e.fire("BeforeUnload");if(n.returnValue)return t.preventDefault(),t.returnValue=n.returnValue,n.returnValue},window.addEventListener("beforeunload",mL)),t)},createEditor:function(t,e){return this.add(new NV(t,e,this))},remove:function(t){var e,n,r=this;if(t){if(!v(t))return n=t,x(r.get(n.id))?null:(XV(n)&&r.fire("RemoveEditor",{editor:n}),0===WV.length&&window.removeEventListener("beforeunload",mL),n.remove(),jV(WV.length>0),n);zV(RV.select(t),function(t){n=r.get(t.id),n&&r.remove(n)})}else for(e=WV.length-1;e>=0;e--)r.remove(WV[e])},execCommand:function(t,e,n){var r=this,o=r.get(n);switch(t){case"mceAddEditor":return r.get(n)||new NV(n,r.settings,r).render(),!0;case"mceRemoveEditor":return o&&o.remove(),!0;case"mceToggleEditor":return o?(o.isHidden()?o.show():o.hide(),!0):(r.execCommand("mceAddEditor",!1,n),!0)}return!!r.activeEditor&&r.activeEditor.execCommand(t,e,n)},triggerSave:function(){zV(WV,function(t){t.save()})},addI18n:function(t,e){Jl.add(t,e)},translate:function(t){return Jl.translate(t)},setActive:function(t){var e=this.activeEditor;this.activeEditor!==t&&(e&&e.fire("deactivate",{relatedTarget:t}),t.fire("activate",{relatedTarget:e})),this.activeEditor=t},_setBaseUrl:function(t){this.baseURL=new DV(this.documentBaseURL).toAbsolute(t.replace(/\/+$/,"")),this.baseURI=new DV(this.baseURL)}});ZV.setup();var $V,KV,JV=Math.min,QV=Math.max,tH=Math.round,eH=function(t,e,n){var r=e.x,o=e.y,i=t.w,a=t.h,u=e.w,s=e.h,l=(n||"").split("");return"b"===l[0]&&(o+=s),"r"===l[1]&&(r+=u),"c"===l[0]&&(o+=tH(s/2)),"c"===l[1]&&(r+=tH(u/2)),"b"===l[3]&&(o-=a),"r"===l[4]&&(r-=i),"c"===l[3]&&(o-=tH(a/2)),"c"===l[4]&&(r-=tH(i/2)),aH(r,o,i,a)},nH=function(t,e,n,r){var o,i;for(i=0;i<r.length;i++)if(o=eH(t,e,r[i]),o.x>=n.x&&o.x+o.w<=n.w+n.x&&o.y>=n.y&&o.y+o.h<=n.h+n.y)return r[i];return null},rH=function(t,e,n){return aH(t.x-e,t.y-n,t.w+2*e,t.h+2*n)},oH=function(t,e){var n=QV(t.x,e.x),r=QV(t.y,e.y),o=JV(t.x+t.w,e.x+e.w),i=JV(t.y+t.h,e.y+e.h);return o-n<0||i-r<0?null:aH(n,r,o-n,i-r)},iH=function(t,e,n){var r=t.x,o=t.y,i=t.x+t.w,a=t.y+t.h,u=e.x+e.w,s=e.y+e.h,l=QV(0,e.x-r),c=QV(0,e.y-o),f=QV(0,i-u),d=QV(0,a-s);return r+=l,o+=c,n&&(i+=l,a+=c,r-=f,o-=d),i-=f,a-=d,aH(r,o,i-r,a-o)},aH=function(t,e,n,r){return{x:t,y:e,w:n,h:r}},uH=function(t){return aH(t.left,t.top,t.width,t.height)},sH={inflate:rH,relativePosition:eH,findBestRelativePosition:nH,intersect:oH,clamp:iH,create:aH,fromClientRect:uH},lH=function(t,e,n){void 0===n&&(n=1e3);var r=!1,o=null,i=function(t){return function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];r||(r=!0,null!==o&&(clearTimeout(o),o=null),t.apply(null,e))}},a=i(t),u=i(e),s=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];r||null!==o||(o=setTimeout(function(){return u.apply(null,t)},n))};return{start:s,resolve:a,reject:u}},cH=function(){var t={},e={},n=function(n,r){var o='Script at URL "'+r+'" failed to load',i='Script at URL "'+r+"\" did not call `tinymce.Resource.add('"+n+"', data)` within 1 second";if(void 0!==t[n])return t[n];var a=new _i(function(t,a){var u=lH(t,a);e[n]=u.resolve,Bl.ScriptLoader.loadScript(r,function(){return u.start(i)},function(){return u.reject(o)})});return t[n]=a,a},r=function(n,r){void 0!==e[n]&&(e[n](r),delete e[n]),t[n]=_i.resolve(r)};return{load:n,add:r}},fH=cH(),dH=dn.each,hH=dn.extend,pH=function(){};pH.extend=$V=function(t){var e=this,n=e.prototype,r=function(){var t,e,n,r=this;if(!KV&&(r.init&&r.init.apply(r,arguments),e=r.Mixins,e)){t=e.length;while(t--)n=e[t],n.init&&n.init.apply(r,arguments)}},o=function(){return this},i=function(t,e){return function(){var r=this,o=r._super;r._super=n[t];var i=e.apply(r,arguments);return r._super=o,i}};KV=!0;var a=new e;return KV=!1,t.Mixins&&(dH(t.Mixins,function(e){for(var n in e)"init"!==n&&(t[n]=e[n])}),n.Mixins&&(t.Mixins=n.Mixins.concat(t.Mixins))),t.Methods&&dH(t.Methods.split(","),function(e){t[e]=o}),t.Properties&&dH(t.Properties.split(","),function(e){var n="_"+e;t[e]=function(t){var e=this;return void 0!==t?(e[n]=t,e):e[n]}}),t.Statics&&dH(t.Statics,function(t,e){r[e]=t}),t.Defaults&&n.Defaults&&(t.Defaults=hH({},n.Defaults,t.Defaults)),wt(t,function(t,e){"function"===typeof t&&n[e]?a[e]=i(e,t):a[e]=t}),r.prototype=a,r.constructor=r,r.extend=$V,r};var gH,mH=Math.min,vH=Math.max,yH=Math.round,bH=function(t){var e={},n=0,r=0,o=0,i=function(t,e,n){var r,o,i;r=0,o=0,i=0,t/=255,e/=255,n/=255;var a=mH(t,mH(e,n)),u=vH(t,vH(e,n));if(a===u)return i=a,{h:0,s:0,v:100*i};var s=t===a?e-n:n===a?t-e:n-t;return r=t===a?3:n===a?1:5,r=60*(r-s/(u-a)),o=(u-a)/u,i=u,{h:yH(r),s:yH(100*o),v:yH(100*i)}},a=function(t,e,i){if(t=(parseInt(t,10)||0)%360,e=parseInt(e,10)/100,i=parseInt(i,10)/100,e=vH(0,mH(e,1)),i=vH(0,mH(i,1)),0!==e){var a=t/60,u=i*e,s=u*(1-Math.abs(a%2-1)),l=i-u;switch(Math.floor(a)){case 0:n=u,r=s,o=0;break;case 1:n=s,r=u,o=0;break;case 2:n=0,r=u,o=s;break;case 3:n=0,r=s,o=u;break;case 4:n=s,r=0,o=u;break;case 5:n=u,r=0,o=s;break;default:n=r=o=0}n=yH(255*(n+l)),r=yH(255*(r+l)),o=yH(255*(o+l))}else n=r=o=yH(255*i)},u=function(){var t=function(t){return t=parseInt(t,10).toString(16),t.length>1?t:"0"+t};return"#"+t(n)+t(r)+t(o)},s=function(){return{r:n,g:r,b:o}},l=function(){return i(n,r,o)},c=function(t){var i;return"object"===typeof t?"r"in t?(n=t.r,r=t.g,o=t.b):"v"in t&&a(t.h,t.s,t.v):(i=/rgb\s*\(\s*([0-9]+)\s*,\s*([0-9]+)\s*,\s*([0-9]+)[^\)]*\)/gi.exec(t))?(n=parseInt(i[1],10),r=parseInt(i[2],10),o=parseInt(i[3],10)):(i=/#([0-F]{2})([0-F]{2})([0-F]{2})/gi.exec(t))?(n=parseInt(i[1],16),r=parseInt(i[2],16),o=parseInt(i[3],16)):(i=/#([0-F])([0-F])([0-F])/gi.exec(t))&&(n=parseInt(i[1]+i[1],16),r=parseInt(i[2]+i[2],16),o=parseInt(i[3]+i[3],16)),n=n<0?0:n>255?255:n,r=r<0?0:r>255?255:r,o=o<0?0:o>255?255:o,e};return t&&c(t),e.toRgb=s,e.toHsv=l,e.toHex=u,e.parse=c,e},xH=function(t){var e=JSON.stringify(t);return v(e)?e.replace(/[\u0080-\uFFFF]/g,function(t){var e=t.charCodeAt(0).toString(16);return"\\u"+"0000".substring(e.length)+e}):e},wH={serialize:xH,parse:function(t){try{return JSON.parse(t)}catch(e){}}},_H={callbacks:{},count:0,send:function(t){var e=this,n=Il.DOM,r=void 0!==t.count?t.count:e.count,o="tinymce_jsonp_"+r;e.callbacks[r]=function(i){n.remove(o),delete e.callbacks[r],t.callback(i)},n.add(n.doc.body,"script",{id:o,src:t.url,type:"text/javascript"}),e.count++}},SH=Ut(Ut({},oV),{send:function(t){var e,n=0,r=function(){!t.async||4===e.readyState||n++>1e4?(t.success&&n<1e4&&200===e.status?t.success.call(t.success_scope,""+e.responseText,e,t):t.error&&t.error.call(t.error_scope,n>1e4?"TIMED_OUT":"GENERAL",e,t),e=null):Ai.setTimeout(r,10)};if(t.scope=t.scope||this,t.success_scope=t.success_scope||t.scope,t.error_scope=t.error_scope||t.scope,t.async=!1!==t.async,t.data=t.data||"",SH.fire("beforeInitialize",{settings:t}),e=new XMLHttpRequest,e.overrideMimeType&&e.overrideMimeType(t.content_type),e.open(t.type||(t.data?"POST":"GET"),t.url,t.async),t.crossDomain&&(e.withCredentials=!0),t.content_type&&e.setRequestHeader("Content-Type",t.content_type),t.requestheaders&&dn.each(t.requestheaders,function(t){e.setRequestHeader(t.key,t.value)}),e.setRequestHeader("X-Requested-With","XMLHttpRequest"),e=SH.fire("beforeSend",{xhr:e,settings:t}).xhr,e.send(t.data),!t.async)return r();Ai.setTimeout(r,10)}}),CH=dn.extend,MH=function(){function t(t){this.settings=CH({},t),this.count=0}return t.sendRPC=function(e){return(new t).send(e)},t.prototype.send=function(t){var e=t.error,n=t.success,r=CH(this.settings,t);r.success=function(t,o){t=wH.parse(t),"undefined"===typeof t&&(t={error:"JSON Parse error."}),t.error?e.call(r.error_scope||r.scope,t.error,o):n.call(r.success_scope||r.scope,t.result)},r.error=function(t,n){e&&e.call(r.error_scope||r.scope,t,n)},r.data=wH.serialize({id:t.id||"c"+this.count++,method:t.method,params:t.params}),r.content_type="application/json",SH.send(r)},t}(),TH=function(){return function(){var t={},e=[],n={getItem:function(e){var n=t[e];return n||null},setItem:function(n,r){e.push(n),t[n]=String(r)},key:function(t){return e[t]},removeItem:function(n){e=e.filter(function(t){return t===n}),delete t[n]},clear:function(){e=[],t={}},length:0};return Object.defineProperty(n,"length",{get:function(){return e.length},configurable:!1,enumerable:!1}),n}()};try{var kH="__storage_test__";gH=window.localStorage,gH.setItem(kH,kH),gH.removeItem(kH)}catch(EH){gH=TH()}var DH=gH,AH={geom:{Rect:sH},util:{Promise:_i,Delay:Ai,Tools:dn,VK:Hm,URI:DV,Class:pH,EventDispatcher:nV,Observable:oV,I18n:Jl,XHR:SH,JSON:wH,JSONRequest:MH,JSONP:_H,LocalStorage:DH,Color:bH,ImageUploader:wA},dom:{EventUtils:Xu,Sizzle:Is,DomQuery:_l,TreeWalker:Ei,TextSeeker:Rc,DOMUtils:Il,ScriptLoader:Bl,RangeUtils:lv,Serializer:Wk,StyleSheetLoader:Ii,ControlSelection:Wm,BookmarkManager:Mm,Selection:KT,Event:Xu.Event},html:{Styles:Nu,Entities:wu,Node:pb,Schema:Lu,SaxParser:Tb,DomParser:Ak,Writer:Pb,Serializer:zb},Env:Je,AddOnManager:Ql,Annotator:Cm,Formatter:EA,UndoManager:PA,EditorCommands:BB,WindowManager:KD,NotificationManager:XD,EditorObservable:cV,Shortcuts:wV,Editor:NV,FocusManager:ky,EditorManager:ZV,DOM:Il.DOM,ScriptLoader:Bl.ScriptLoader,PluginManager:YD,ThemeManager:qD,IconManager:LD,Resource:fH,trim:dn.trim,isArray:dn.isArray,is:dn.is,toArray:dn.toArray,makeMap:dn.makeMap,each:dn.each,map:dn.map,grep:dn.grep,inArray:dn.inArray,extend:dn.extend,create:dn.create,walk:dn.walk,createNS:dn.createNS,resolve:dn.resolve,explode:dn.explode,_addCacheSuffix:dn._addCacheSuffix,isOpera:Je.opera,isWebKit:Je.webkit,isIE:Je.ie,isGecko:Je.gecko,isMac:Je.mac},IH=dn.extend(ZV,AH),OH=function(e){try{t.exports=e}catch(n){}},LH=function(t){window.tinymce=t,window.tinyMCE=t};LH(IH),OH(IH)})()}).call(this,n("c8ba"))},e8b0:function(t,e){(function(){"use strict";var t=tinymce.util.Tools.resolve("tinymce.PluginManager"),e=function(t){return t},n=function(){return n=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n],e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},n.apply(this,arguments)},r="\ufeff",o=function(t){return t.replace(/\uFEFF/g,"")},i=function(t,e){for(var n=t.length,r=new Array(n),o=0;o<n;o++){var i=t[o];r[o]=e(i,o)}return r},a="[!-#%-*,-\\/:;?@\\[-\\]_{}¡«·»¿;·՚-՟։֊־׀׃׆׳״؉؊،؍؛؞؟٪-٭۔܀-܍߷-߹࠰-࠾࡞।॥॰෴๏๚๛༄-༒༺-༽྅࿐-࿔࿙࿚၊-၏჻፡-፨᐀᙭᙮᚛᚜᛫-᛭᜵᜶។-៖៘-៚᠀-᠊᥄᥅᨞᨟᪠-᪦᪨-᪭᭚-᭠᯼-᯿᰻-᰿᱾᱿᳓‐-‧‰-⁃⁅-⁑⁓-⁞⁽⁾₍₎〈〉❨-❵⟅⟆⟦-⟯⦃-⦘⧘-⧛⧼⧽⳹-⳼⳾⳿⵰⸀-⸮⸰⸱、-〃〈-】〔-〟〰〽゠・꓾꓿꘍-꘏꙳꙾꛲-꛷꡴-꡷꣎꣏꣸-꣺꤮꤯꥟꧁-꧍꧞꧟꩜-꩟꫞꫟꯫﴾﴿︐-︙︰-﹒﹔-﹡﹣﹨﹪﹫！-＃％-＊，-／：；？＠［-］＿｛｝｟-･]",u={aletter:"[A-Za-zªµºÀ-ÖØ-öø-ˁˆ-ˑˠ-ˤˬˮͰ-ʹͶͷͺ-ͽΆΈ-ΊΌΎ-ΡΣ-ϵϷ-ҁҊ-ԧԱ-Ֆՙա-ևא-תװ-׳ؠ-يٮٯٱ-ۓەۥۦۮۯۺ-ۼۿܐܒ-ܯݍ-ޥޱߊ-ߪߴߵߺࠀ-ࠕࠚࠤࠨࡀ-ࡘऄ-हऽॐक़-ॡॱ-ॷॹ-ॿঅ-ঌএঐও-নপ-রলশ-হঽৎড়ঢ়য়-ৡৰৱਅ-ਊਏਐਓ-ਨਪ-ਰਲਲ਼ਵਸ਼ਸਹਖ਼-ੜਫ਼ੲ-ੴઅ-ઍએ-ઑઓ-નપ-રલળવ-હઽૐૠૡଅ-ଌଏଐଓ-ନପ-ରଲଳଵ-ହଽଡ଼ଢ଼ୟ-ୡୱஃஅ-ஊஎ-ஐஒ-கஙசஜஞடணதந-பம-ஹௐఅ-ఌఎ-ఐఒ-నప-ళవ-హఽౘౙౠౡಅ-ಌಎ-ಐಒ-ನಪ-ಳವ-ಹಽೞೠೡೱೲഅ-ഌഎ-ഐഒ-ഺഽൎൠൡൺ-ൿඅ-ඖක-නඳ-රලව-ෆༀཀ-ཇཉ-ཬྈ-ྌႠ-Ⴥა-ჺჼᄀ-ቈቊ-ቍቐ-ቖቘቚ-ቝበ-ኈኊ-ኍነ-ኰኲ-ኵኸ-ኾዀዂ-ዅወ-ዖዘ-ጐጒ-ጕጘ-ፚᎀ-ᎏᎠ-Ᏼᐁ-ᙬᙯ-ᙿᚁ-ᚚᚠ-ᛪᛮ-ᛰᜀ-ᜌᜎ-ᜑᜠ-ᜱᝀ-ᝑᝠ-ᝬᝮ-ᝰᠠ-ᡷᢀ-ᢨᢪᢰ-ᣵᤀ-ᤜᨀ-ᨖᬅ-ᬳᭅ-ᭋᮃ-ᮠᮮᮯᯀ-ᯥᰀ-ᰣᱍ-ᱏᱚ-ᱽᳩ-ᳬᳮ-ᳱᴀ-ᶿḀ-ἕἘ-Ἕἠ-ὅὈ-Ὅὐ-ὗὙὛὝὟ-ώᾀ-ᾴᾶ-ᾼιῂ-ῄῆ-ῌῐ-ΐῖ-Ίῠ-Ῥῲ-ῴῶ-ῼⁱⁿₐ-ₜℂℇℊ-ℓℕℙ-ℝℤΩℨK-ℭℯ-ℹℼ-ℿⅅ-ⅉⅎⅠ-ↈⒶ-ⓩⰀ-Ⱞⰰ-ⱞⱠ-ⳤⳫ-ⳮⴀ-ⴥⴰ-ⵥⵯⶀ-ⶖⶠ-ⶦⶨ-ⶮⶰ-ⶶⶸ-ⶾⷀ-ⷆⷈ-ⷎⷐ-ⷖⷘ-ⷞⸯ々〻〼ㄅ-ㄭㄱ-ㆎㆠ-ㆺꀀ-ꒌꓐ-ꓽꔀ-ꘌꘐ-ꘟꘪꘫꙀ-ꙮꙿ-ꚗꚠ-ꛯꜗ-ꜟꜢ-ꞈꞋ-ꞎꞐꞑꞠ-ꞩꟺ-ꠁꠃ-ꠅꠇ-ꠊꠌ-ꠢꡀ-ꡳꢂ-ꢳꣲ-ꣷꣻꤊ-ꤥꤰ-ꥆꥠ-ꥼꦄ-ꦲꧏꨀ-ꨨꩀ-ꩂꩄ-ꩋꬁ-ꬆꬉ-ꬎꬑ-ꬖꬠ-ꬦꬨ-ꬮꯀ-ꯢ가-힣ힰ-ퟆퟋ-ퟻﬀ-ﬆﬓ-ﬗיִײַ-ﬨשׁ-זּטּ-לּמּנּסּףּפּצּ-ﮱﯓ-ﴽﵐ-ﶏﶒ-ﷇﷰ-ﷻﹰ-ﹴﹶ-ﻼＡ-Ｚａ-ｚﾠ-ﾾￂ-ￇￊ-ￏￒ-ￗￚ-ￜ]",midnumlet:"[-'\\.‘’․﹒＇．]",midletter:"[:··״‧︓﹕：]",midnum:"[±+*/,;;։،؍٬߸⁄︐︔﹐﹔，；]",numeric:"[0-9٠-٩٫۰-۹߀-߉०-९০-৯੦-੯૦-૯୦-୯௦-௯౦-౯೦-೯൦-൯๐-๙໐-໙༠-༩၀-၉႐-႙០-៩᠐-᠙᥆-᥏᧐-᧙᪀-᪉᪐-᪙᭐-᭙᮰-᮹᱀-᱉᱐-᱙꘠-꘩꣐-꣙꤀-꤉꧐-꧙꩐-꩙꯰-꯹]",cr:"\\r",lf:"\\n",newline:"[\v\f\u2028\u2029]",extend:"[̀-ͯ҃-҉֑-ׇֽֿׁׂׅׄؐ-ًؚ-ٰٟۖ-ۜ۟-۪ۤۧۨ-ܑۭܰ-݊ަ-ް߫-߳ࠖ-࠙ࠛ-ࠣࠥ-ࠧࠩ-࡙࠭-࡛ऀ-ःऺ-़ा-ॏ॑-ॗॢॣঁ-ঃ়া-ৄেৈো-্ৗৢৣਁ-ਃ਼ਾ-ੂੇੈੋ-੍ੑੰੱੵઁ-ઃ઼ા-ૅે-ૉો-્ૢૣଁ-ଃ଼ା-ୄେୈୋ-୍ୖୗୢୣஂா-ூெ-ைொ-்ௗఁ-ఃా-ౄె-ైొ-్ౕౖౢౣಂಃ಼ಾ-ೄೆ-ೈೊ-್ೕೖೢೣംഃാ-ൄെ-ൈൊ-്ൗൢൣංඃ්ා-ුූෘ-ෟෲෳัิ-ฺ็-๎ັິ-ູົຼ່-ໍ༹༘༙༵༷༾༿ཱ-྄྆྇ྍ-ྗྙ-ྼ࿆ါ-ှၖ-ၙၞ-ၠၢ-ၤၧ-ၭၱ-ၴႂ-ႍႏႚ-ႝ፝-፟ᜒ-᜔ᜲ-᜴ᝒᝓᝲᝳា-៓៝᠋-᠍ᢩᤠ-ᤫᤰ-᤻ᦰ-ᧀᧈᧉᨗ-ᨛᩕ-ᩞ᩠-᩿᩼ᬀ-ᬄ᬴-᭄᭫-᭳ᮀ-ᮂᮡ-᯦᮪-᯳ᰤ-᰷᳐-᳔᳒-᳨᳭ᳲ᷀-ᷦ᷼-᷿‌‍⃐-⃰⳯-⵿⳱ⷠ-〪ⷿ-゙゚〯꙯-꙲꙼꙽꛰꛱ꠂ꠆ꠋꠣ-ꠧꢀꢁꢴ-꣄꣠-꣱ꤦ-꤭ꥇ-꥓ꦀ-ꦃ꦳-꧀ꨩ-ꨶꩃꩌꩍꩻꪰꪲ-ꪴꪷꪸꪾ꪿꫁ꯣ-ꯪ꯬꯭ﬞ︀-️︠-︦ﾞﾟ]",format:"[­؀-؃۝܏឴឵‎‏‪-‮⁠-⁤⁪-⁯\ufeff￹-￻]",katakana:"[〱-〵゛゜゠-ヺー-ヿㇰ-ㇿ㋐-㋾㌀-㍗ｦ-ﾝ]",extendnumlet:"[=_‿⁀⁔︳︴﹍-﹏＿∀-⋿<>]",punctuation:a},s={ALETTER:0,MIDNUMLET:1,MIDLETTER:2,MIDNUM:3,NUMERIC:4,CR:5,LF:6,NEWLINE:7,EXTEND:8,FORMAT:9,KATAKANA:10,EXTENDNUMLET:11,AT:12,OTHER:13},l=[new RegExp(u.aletter),new RegExp(u.midnumlet),new RegExp(u.midletter),new RegExp(u.midnum),new RegExp(u.numeric),new RegExp(u.cr),new RegExp(u.lf),new RegExp(u.newline),new RegExp(u.extend),new RegExp(u.format),new RegExp(u.katakana),new RegExp(u.extendnumlet),new RegExp("@")],c="",f=new RegExp("^"+u.punctuation+"$"),d=/^\s+$/,h=l,p=s.OTHER,g=function(t){for(var e=p,n=h.length,r=0;r<n;++r){var o=h[r];if(o&&o.test(t)){e=r;break}}return e},m=function(t){var e={};return function(n){if(e[n])return e[n];var r=t(n);return e[n]=r,r}},v=function(t){var e=m(g);return i(t,e)},y=function(t,e){var n=t[e],r=t[e+1];if(e<0||e>t.length-1&&0!==e)return!1;if(n===s.ALETTER&&r===s.ALETTER)return!1;var o=t[e+2];if(n===s.ALETTER&&(r===s.MIDLETTER||r===s.MIDNUMLET||r===s.AT)&&o===s.ALETTER)return!1;var i=t[e-1];return(n!==s.MIDLETTER&&n!==s.MIDNUMLET&&r!==s.AT||r!==s.ALETTER||i!==s.ALETTER)&&((n!==s.NUMERIC&&n!==s.ALETTER||r!==s.NUMERIC&&r!==s.ALETTER)&&((n!==s.MIDNUM&&n!==s.MIDNUMLET||r!==s.NUMERIC||i!==s.NUMERIC)&&((n!==s.NUMERIC||r!==s.MIDNUM&&r!==s.MIDNUMLET||o!==s.NUMERIC)&&(n!==s.EXTEND&&n!==s.FORMAT&&i!==s.EXTEND&&i!==s.FORMAT&&r!==s.EXTEND&&r!==s.FORMAT&&((n!==s.CR||r!==s.LF)&&(n===s.NEWLINE||n===s.CR||n===s.LF||(r===s.NEWLINE||r===s.CR||r===s.LF||(n!==s.KATAKANA||r!==s.KATAKANA)&&((r!==s.EXTENDNUMLET||n!==s.ALETTER&&n!==s.NUMERIC&&n!==s.KATAKANA&&n!==s.EXTENDNUMLET)&&((n!==s.EXTENDNUMLET||r!==s.ALETTER&&r!==s.NUMERIC&&r!==s.KATAKANA)&&n!==s.AT)))))))))},b=c,x=d,w=f,_=function(t){return"http"===t||"https"===t},S=function(t,e){var n;for(n=e;n<t.length;n++)if(x.test(t[n]))break;return n},C=function(t,e){var n=S(t,e+1),r=t.slice(e+1,n).join(b);return"://"===r.substr(0,3)?n:e},M=function(t,e,n,r){for(var o=[],i=[],a=0;a<n.length;++a)if(i.push(t[a]),y(n,a)){var u=e[a];if((r.includeWhitespace||!x.test(u))&&(r.includePunctuation||!w.test(u))){var s=a-i.length+1,l=a+1,c=e.slice(s,l).join(b);if(_(c)){var f=C(e,a),d=t.slice(l,f);Array.prototype.push.apply(i,d),a=f}o.push(i)}i=[]}return o},T=function(){return{includeWhitespace:!1,includePunctuation:!1}},k=function(t,e,o){o=n(n({},T()),o);for(var i=[],a=[],u=0;u<t.length;u++){var s=e(t[u]);s!==r&&(i.push(t[u]),a.push(s))}var l=v(a);return M(i,a,l,o)},D=k,A=tinymce.util.Tools.resolve("tinymce.dom.TreeWalker"),I=function(t,e){var n=e.getBlockElements(),r=e.getShortEndedElements(),i=function(t){return n[t.nodeName]||r[t.nodeName]},a=[],u="",s=new A(t,t);while(t=s.next())3===t.nodeType?u+=o(t.data):i(t)&&u.length&&(a.push(u),u="");return u.length&&a.push(u),a},O=function(t){return t.replace(/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,"_").length},L=function(t,n){var r=I(t,n).join("\n");return D(r.split(""),e).length},E=function(t,e){var n=I(t,e).join("");return O(n)},N=function(t,e){var n=I(t,e).join("").replace(/\s/g,"");return O(n)},R=function(t,e){return function(){return e(t.getBody(),t.schema)}},P=function(t,e){return function(){return e(t.selection.getRng().cloneContents(),t.schema)}},z=function(t){return R(t,L)},B=function(t){return{body:{getWordCount:z(t),getCharacterCount:R(t,E),getCharacterCountWithoutSpaces:R(t,N)},selection:{getWordCount:P(t,L),getCharacterCount:P(t,E),getCharacterCountWithoutSpaces:P(t,N)},getCount:z(t)}},V=tinymce.util.Tools.resolve("tinymce.util.Delay"),H=function(t,e){t.fire("wordCountUpdate",{wordCount:{words:e.body.getWordCount(),characters:e.body.getCharacterCount(),charactersWithoutSpaces:e.body.getCharacterCountWithoutSpaces()}})},F=function(t,e){H(t,e)},W=function(t,e,n){var r=V.debounce(function(){return F(t,e)},n);t.on("init",function(){F(t,e),V.setEditorTimeout(t,function(){t.on("SetContent BeforeAddUndo Undo Redo keyup",r)},0)})},U=function(t,e){t.windowManager.open({title:"Word Count",body:{type:"panel",items:[{type:"table",header:["Count","Document","Selection"],cells:[["Words",String(e.body.getWordCount()),String(e.selection.getWordCount())],["Characters (no spaces)",String(e.body.getCharacterCountWithoutSpaces()),String(e.selection.getCharacterCountWithoutSpaces())],["Characters",String(e.body.getCharacterCount()),String(e.selection.getCharacterCount())]]}]},buttons:[{type:"cancel",name:"close",text:"Close",primary:!0}]})},G=function(t,e){t.ui.registry.addButton("wordcount",{tooltip:"Word count",icon:"character-count",onAction:function(){return U(t,e)}}),t.ui.registry.addMenuItem("wordcount",{text:"Word count",icon:"character-count",onAction:function(){return U(t,e)}})};function j(e){void 0===e&&(e=300),t.add("wordcount",function(t){var n=B(t);return G(t,n),W(t,n,e),n})}j()})()},ec27:function(t,e,n){n("fc39")},f410:function(t,e,n){n("1af6"),t.exports=n("584a").Array.isArray},f557:function(t,e,n){n("5e4c")},fc39:function(t,e){tinymce.IconManager.add("default",{icons:{"accessibility-check":'<svg width="24" height="24"><path d="M12 2a2 2 0 012 2 2 2 0 01-2 2 2 2 0 01-2-2c0-1.1.9-2 2-2zm8 7h-5v12c0 .6-.4 1-1 1a1 1 0 01-1-1v-5c0-.6-.4-1-1-1a1 1 0 00-1 1v5c0 .6-.4 1-1 1a1 1 0 01-1-1V9H4a1 1 0 110-2h16c.6 0 1 .4 1 1s-.4 1-1 1z" fill-rule="nonzero"/></svg>',"action-next":'<svg width="24" height="24"><path fill-rule="nonzero" d="M5.7 7.3a1 1 0 00-1.4 1.4l7.7 7.7 7.7-7.7a1 1 0 10-1.4-1.4L12 13.6 5.7 7.3z"/></svg>',"action-prev":'<svg width="24" height="24"><path fill-rule="nonzero" d="M18.3 15.7a1 1 0 001.4-1.4L12 6.6l-7.7 7.7a1 1 0 001.4 1.4L12 9.4l6.3 6.3z"/></svg>',"align-center":'<svg width="24" height="24"><path d="M5 5h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 110-2zm3 4h8c.6 0 1 .4 1 1s-.4 1-1 1H8a1 1 0 110-2zm0 8h8c.6 0 1 .4 1 1s-.4 1-1 1H8a1 1 0 010-2zm-3-4h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 010-2z" fill-rule="evenodd"/></svg>',"align-justify":'<svg width="24" height="24"><path d="M5 5h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 110-2zm0 4h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 110-2zm0 4h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 010-2zm0 4h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 010-2z" fill-rule="evenodd"/></svg>',"align-left":'<svg width="24" height="24"><path d="M5 5h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 110-2zm0 4h8c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 110-2zm0 8h8c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 010-2zm0-4h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 010-2z" fill-rule="evenodd"/></svg>',"align-none":'<svg width="24" height="24"><path d="M14.2 5L13 7H5a1 1 0 110-2h9.2zm4 0h.8a1 1 0 010 2h-2l1.2-2zm-6.4 4l-1.2 2H5a1 1 0 010-2h6.8zm4 0H19a1 1 0 010 2h-4.4l1.2-2zm-6.4 4l-1.2 2H5a1 1 0 010-2h4.4zm4 0H19a1 1 0 010 2h-6.8l1.2-2zM7 17l-1.2 2H5a1 1 0 010-2h2zm4 0h8a1 1 0 010 2H9.8l1.2-2zm5.2-13.5l1.3.7-9.7 16.3-1.3-.7 9.7-16.3z" fill-rule="evenodd"/></svg>',"align-right":'<svg width="24" height="24"><path d="M5 5h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 110-2zm6 4h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 010-2zm0 8h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 010-2zm-6-4h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 010-2z" fill-rule="evenodd"/></svg>',"arrow-left":'<svg width="24" height="24"><path d="M5.6 13l12 6a1 1 0 001.4-1V6a1 1 0 00-1.4-.9l-12 6a1 1 0 000 1.8z" fill-rule="evenodd"/></svg>',"arrow-right":'<svg width="24" height="24"><path d="M18.5 13l-12 6A1 1 0 015 18V6a1 1 0 011.4-.9l12 6a1 1 0 010 1.8z" fill-rule="evenodd"/></svg>',bold:'<svg width="24" height="24"><path d="M7.8 19c-.3 0-.5 0-.6-.2l-.2-.5V5.7c0-.2 0-.4.2-.5l.6-.2h5c1.5 0 2.7.3 3.5 1 .7.6 1.1 1.4 1.1 2.5a3 3 0 01-.6 1.9c-.4.6-1 1-1.6 1.2.4.1.9.3 1.3.6s.8.7 1 1.2c.4.4.5 1 .5 1.6 0 1.3-.4 2.3-1.3 3-.8.7-2.1 1-3.8 1H7.8zm5-8.3c.6 0 1.2-.1 1.6-.5.4-.3.6-.7.6-1.3 0-1.1-.8-1.7-2.3-1.7H9.3v3.5h3.4zm.5 6c.7 0 1.3-.1 1.7-.4.4-.4.6-.9.6-1.5s-.2-1-.7-1.4c-.4-.3-1-.4-2-.4H9.4v3.8h4z" fill-rule="evenodd"/></svg>',bookmark:'<svg width="24" height="24"><path d="M6 4v17l6-4 6 4V4c0-.6-.4-1-1-1H7a1 1 0 00-1 1z" fill-rule="nonzero"/></svg>',"border-width":'<svg width="24" height="24"><path d="M5 14.8h14a1 1 0 010 2H5a1 1 0 010-2zm-.5 3.7h15c.3 0 .5.2.5.5s-.2.5-.5.5h-15a.5.5 0 110-1zm.5-8.3h14c.6 0 1 .4 1 1v1c0 .5-.4 1-1 1H5a1 1 0 01-1-1v-1c0-.6.4-1 1-1zm0-5.7h14c.6 0 1 .4 1 1v2c0 .6-.4 1-1 1H5a1 1 0 01-1-1v-2c0-.6.4-1 1-1z" fill-rule="evenodd"/></svg>',brightness:'<svg width="24" height="24"><path d="M12 17c.3 0 .5.1.7.3.2.2.3.4.3.7v1c0 .3-.1.5-.3.7a1 1 0 01-.7.3 1 1 0 01-.7-.3 1 1 0 01-.3-.7v-1c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3zm0-10a1 1 0 01-.7-.3A1 1 0 0111 6V5c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3.3 0 .5.1.7.3.2.2.3.4.3.7v1c0 .3-.1.5-.3.7a1 1 0 01-.7.3zm7 4c.3 0 .5.1.7.3.2.2.3.4.3.7 0 .3-.1.5-.3.7a1 1 0 01-.7.3h-1a1 1 0 01-.7-.3 1 1 0 01-.3-.7c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3h1zM7 12c0 .3-.1.5-.3.7a1 1 0 01-.7.3H5a1 1 0 01-.7-.3A1 1 0 014 12c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3h1c.3 0 .5.1.7.3.2.2.3.4.3.7zm10 3.5l.7.8c.2.1.3.4.3.6 0 .3-.1.6-.3.8a1 1 0 01-.8.3 1 1 0 01-.6-.3l-.8-.7a1 1 0 01-.3-.8c0-.2.1-.5.3-.7a1 1 0 011.4 0zm-10-7l-.7-.8a1 1 0 01-.3-.6c0-.3.1-.6.3-.8.2-.2.5-.3.8-.3.2 0 .5.1.7.3l.7.7c.2.2.3.5.3.8 0 .2-.1.5-.3.7a1 1 0 01-.7.3 1 1 0 01-.8-.3zm10 0a1 1 0 01-.8.3 1 1 0 01-.7-.3 1 1 0 01-.3-.7c0-.3.1-.6.3-.8l.8-.7c.1-.2.4-.3.6-.3.3 0 .6.1.8.3.2.2.3.5.3.8 0 .2-.1.5-.3.7l-.7.7zm-10 7c.2-.2.5-.3.8-.3.2 0 .5.1.7.3a1 1 0 010 1.4l-.8.8a1 1 0 01-.6.3 1 1 0 01-.8-.3 1 1 0 01-.3-.8c0-.2.1-.5.3-.6l.7-.8zM12 8a4 4 0 013.7 2.4 4 4 0 010 3.2A4 4 0 0112 16a4 4 0 01-3.7-2.4 4 4 0 010-3.2A4 4 0 0112 8zm0 6.5c.7 0 1.3-.2 1.8-.7.5-.5.7-1.1.7-1.8s-.2-1.3-.7-1.8c-.5-.5-1.1-.7-1.8-.7s-1.3.2-1.8.7c-.5.5-.7 1.1-.7 1.8s.2 1.3.7 1.8c.5.5 1.1.7 1.8.7z" fill-rule="evenodd"/></svg>',browse:'<svg width="24" height="24"><path d="M19 4a2 2 0 012 2v12a2 2 0 01-2 2h-4v-2h4V8H5v10h4v2H5a2 2 0 01-2-2V6c0-1.1.9-2 2-2h14zm-8 9.4l-2.3 2.3a1 1 0 11-1.4-1.4l4-4a1 1 0 011.4 0l4 4a1 1 0 01-1.4 1.4L13 13.4V20a1 1 0 01-2 0v-6.6z" fill-rule="nonzero"/></svg>',cancel:'<svg width="24" height="24"><path d="M12 4.6a7.4 7.4 0 110 14.8 7.4 7.4 0 010-14.8zM12 3a9 9 0 100 18 9 9 0 000-18zm0 8L14.8 8l1 1.1-2.7 2.8 2.7 2.7-1.1 1.1-2.7-2.7-2.7 2.7-1-1.1 2.6-2.7-2.7-2.7 1-1.1 2.8 2.7z" fill-rule="nonzero"/></svg>',"change-case":'<svg width="24" height="24"><path d="M18.4 18.2v-.6c-.5.8-1.3 1.2-2.4 1.2-2.2 0-3.3-1.6-3.3-4.8 0-3.1 1-4.7 3.3-4.7 1.1 0 1.8.3 2.4 1.1v-.6c0-.5.4-.8.8-.8s.8.3.8.8v8.4c0 .5-.4.8-.8.8a.8.8 0 01-.8-.8zm-2-7.4c-1.3 0-1.8.9-1.8 3.2 0 2.4.5 3.3 1.7 3.3 1.3 0 1.8-.9 1.8-3.2 0-2.4-.5-3.3-1.7-3.3zM10 15.7H5.5l-.8 2.6a1 1 0 01-1 .7h-.2a.7.7 0 01-.7-1l4-12a1 1 0 012 0l4 12a.7.7 0 01-.8 1h-.2a1 1 0 01-1-.7l-.8-2.6zm-.3-1.5l-2-6.5-1.9 6.5h3.9z" fill-rule="evenodd"/></svg>',"character-count":'<svg width="24" height="24"><path d="M4 11.5h16v1H4v-1zm4.8-6.8V10H7.7V5.8h-1v-1h2zM11 8.3V9h2v1h-3V7.7l2-1v-.9h-2v-1h3v2.4l-2 1zm6.3-3.4V10h-3.1V9h2.1V8h-2.1V6.8h2.1v-1h-2.1v-1h3.1zM5.8 16.4c0-.5.2-.8.5-1 .2-.2.6-.3 1.2-.3l.8.1c.2 0 .4.2.5.3l.4.4v2.8l.2.3H8.2v-.1-.2l-.6.3H7c-.4 0-.7 0-1-.2a1 1 0 01-.3-.9c0-.3 0-.6.3-.8.3-.2.7-.4 1.2-.4l.6-.2h.3v-.2l-.1-.2a.8.8 0 00-.5-.1 1 1 0 00-.4 0l-.3.4h-1zm2.3.8h-.2l-.2.1-.4.1a1 1 0 00-.4.2l-.2.2.1.3.5.1h.4l.4-.4v-.6zm2-3.4h1.2v1.7l.5-.3h.5c.5 0 .9.1 1.2.5.3.4.5.8.5 1.4 0 .6-.2 1.1-.5 1.5-.3.4-.7.6-1.3.6l-.6-.1-.4-.4v.4h-1.1v-5.4zm1.1 3.3c0 .3 0 .6.2.8a.7.7 0 001.2 0l.2-.8c0-.4 0-.6-.2-.8a.7.7 0 00-.6-.3l-.6.3-.2.8zm6.1-.5c0-.2 0-.3-.2-.4a.8.8 0 00-.5-.2c-.3 0-.5.1-.6.3l-.2.9c0 .3 0 .6.2.8.1.2.3.3.6.3.2 0 .4 0 .5-.2l.2-.4h1.1c0 .5-.3.8-.6 1.1a2 2 0 01-1.3.4c-.5 0-1-.2-1.3-.6a2 2 0 01-.5-1.4c0-.6.1-1.1.5-1.5.3-.4.8-.5 1.4-.5.5 0 1 0 1.2.3.4.3.5.7.5 1.2h-1v-.1z" fill-rule="evenodd"/></svg>',"checklist-rtl":'<svg width="24" height="24"><path d="M5 17h8c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 010-2zm0-6h8c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 010-2zm0-6h8c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 110-2zm14.2 11c.2-.4.6-.5.9-.3.3.2.4.6.2 1L18 20c-.2.3-.7.4-1 0l-1.3-1.3a.7.7 0 010-1c.3-.2.7-.2 1 0l.7.9 1.7-2.8zm0-6c.2-.4.6-.5.9-.3.3.2.4.6.2 1L18 14c-.2.3-.7.4-1 0l-1.3-1.3a.7.7 0 010-1c.3-.2.7-.2 1 0l.7.9 1.7-2.8zm0-6c.2-.4.6-.5.9-.3.3.2.4.6.2 1L18 8c-.2.3-.7.4-1 0l-1.3-1.3a.7.7 0 010-1c.3-.2.7-.2 1 0l.7.9 1.7-2.8z" fill-rule="evenodd"/></svg>',checklist:'<svg width="24" height="24"><path d="M11 17h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 010-2zm0-6h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 010-2zm0-6h8a1 1 0 010 2h-8a1 1 0 010-2zM7.2 16c.2-.4.6-.5.9-.3.3.2.4.6.2 1L6 20c-.2.3-.7.4-1 0l-1.3-1.3a.7.7 0 010-1c.3-.2.7-.2 1 0l.7.9 1.7-2.8zm0-6c.2-.4.6-.5.9-.3.3.2.4.6.2 1L6 14c-.2.3-.7.4-1 0l-1.3-1.3a.7.7 0 010-1c.3-.2.7-.2 1 0l.7.9 1.7-2.8zm0-6c.2-.4.6-.5.9-.3.3.2.4.6.2 1L6 8c-.2.3-.7.4-1 0L3.8 6.9a.7.7 0 010-1c.3-.2.7-.2 1 0l.7.9 1.7-2.8z" fill-rule="evenodd"/></svg>',checkmark:'<svg width="24" height="24"><path d="M18.2 5.4a1 1 0 011.6 1.2l-8 12a1 1 0 01-1.5.1l-5-5a1 1 0 111.4-1.4l4.1 4.1 7.4-11z" fill-rule="nonzero"/></svg>',"chevron-down":'<svg width="10" height="10"><path d="M8.7 2.2c.3-.3.8-.3 1 0 .4.4.4.9 0 1.2L5.7 7.8c-.3.3-.9.3-1.2 0L.2 3.4a.8.8 0 010-1.2c.3-.3.8-.3 1.1 0L5 6l3.7-3.8z" fill-rule="nonzero"/></svg>',"chevron-left":'<svg width="10" height="10"><path d="M7.8 1.3L4 5l3.8 3.7c.3.3.3.8 0 1-.4.4-.9.4-1.2 0L2.2 5.7a.8.8 0 010-1.2L6.6.2C7 0 7.4 0 7.8.2c.3.3.3.8 0 1.1z" fill-rule="nonzero"/></svg>',"chevron-right":'<svg width="10" height="10"><path d="M2.2 1.3a.8.8 0 010-1c.4-.4.9-.4 1.2 0l4.4 4.1c.3.4.3.9 0 1.2L3.4 9.8c-.3.3-.8.3-1.2 0a.8.8 0 010-1.1L6 5 2.2 1.3z" fill-rule="nonzero"/></svg>',"chevron-up":'<svg width="10" height="10"><path d="M8.7 7.8L5 4 1.3 7.8c-.3.3-.8.3-1 0a.8.8 0 010-1.2l4.1-4.4c.3-.3.9-.3 1.2 0l4.2 4.4c.3.3.3.9 0 1.2-.3.3-.8.3-1.1 0z" fill-rule="nonzero"/></svg>',close:'<svg width="24" height="24"><path d="M17.3 8.2L13.4 12l3.9 3.8a1 1 0 01-1.5 1.5L12 13.4l-3.8 3.9a1 1 0 01-1.5-1.5l3.9-3.8-3.9-3.8a1 1 0 011.5-1.5l3.8 3.9 3.8-3.9a1 1 0 011.5 1.5z" fill-rule="evenodd"/></svg>',"code-sample":'<svg width="24" height="26"><path d="M7.1 11a2.8 2.8 0 01-.8 2 2.8 2.8 0 01.8 2v1.7c0 .3.1.6.4.8.2.3.5.4.8.4.3 0 .4.2.4.4v.8c0 .2-.1.4-.4.4-.7 0-1.4-.3-2-.8-.5-.6-.8-1.3-.8-2V15c0-.3-.1-.6-.4-.8-.2-.3-.5-.4-.8-.4a.4.4 0 01-.4-.4v-.8c0-.2.2-.4.4-.4.3 0 .6-.1.8-.4.3-.2.4-.5.4-.8V9.3c0-.7.3-1.4.8-2 .6-.5 1.3-.8 2-.8.3 0 .4.2.4.4v.8c0 .2-.1.4-.4.4-.3 0-.6.1-.8.4-.3.2-.4.5-.4.8V11zm9.8 0V9.3c0-.3-.1-.6-.4-.8-.2-.3-.5-.4-.8-.4a.4.4 0 01-.4-.4V7c0-.2.1-.4.4-.4.7 0 1.4.3 2 .8.5.6.8 1.3.8 2V11c0 .3.1.6.4.8.2.3.5.4.8.4.2 0 .4.2.4.4v.8c0 .2-.2.4-.4.4-.3 0-.6.1-.8.4-.3.2-.4.5-.4.8v1.7c0 .7-.3 1.4-.8 2-.6.5-1.3.8-2 .8a.4.4 0 01-.4-.4v-.8c0-.2.1-.4.4-.4.3 0 .6-.1.8-.4.3-.2.4-.5.4-.8V15a2.8 2.8 0 01.8-2 2.8 2.8 0 01-.8-2zm-3.3-.4c0 .4-.1.8-.5 1.1-.3.3-.7.5-1.1.5-.4 0-.8-.2-1.1-.5-.4-.3-.5-.7-.5-1.1 0-.5.1-.9.5-1.2.3-.3.7-.4 1.1-.4.4 0 .8.1 1.1.4.4.3.5.7.5 1.2zM12 13c.4 0 .8.1 1.1.5.4.3.5.7.5 1.1 0 1-.1 1.6-.5 2a3 3 0 01-1.1 1c-.4.3-.8.4-1.1.4a.5.5 0 01-.5-.5V17a3 3 0 001-.2l.6-.6c-.6 0-1-.2-1.3-.5-.2-.3-.3-.7-.3-1 0-.5.1-1 .5-1.2.3-.4.7-.5 1.1-.5z" fill-rule="evenodd"/></svg>',"color-levels":'<svg width="24" height="24"><path d="M17.5 11.4A9 9 0 0118 14c0 .5 0 1-.2 1.4 0 .4-.3.9-.5 1.3a6.2 6.2 0 01-3.7 3 5.7 5.7 0 01-3.2 0A5.9 5.9 0 017.6 18a6.2 6.2 0 01-1.4-2.6 6.7 6.7 0 010-2.8c0-.4.1-.9.3-1.3a13.6 13.6 0 012.3-4A20 20 0 0112 4a26.4 26.4 0 013.2 3.4 18.2 18.2 0 012.3 4zm-2 4.5c.4-.7.5-1.4.5-2a7.3 7.3 0 00-1-3.2c.2.6.2 1.2.2 1.9a4.5 4.5 0 01-1.3 3 5.3 5.3 0 01-2.3 1.5 4.9 4.9 0 01-2 .1 4.3 4.3 0 002.4.8 4 4 0 002-.6 4 4 0 001.5-1.5z" fill-rule="evenodd"/></svg>',"color-picker":'<svg width="24" height="24"><path d="M12 3a9 9 0 000 18 1.5 1.5 0 001.1-2.5c-.2-.3-.4-.6-.4-1 0-.8.7-1.5 1.5-1.5H16a5 5 0 005-5c0-4.4-4-8-9-8zm-5.5 9a1.5 1.5 0 110-3 1.5 1.5 0 010 3zm3-4a1.5 1.5 0 110-3 1.5 1.5 0 010 3zm5 0a1.5 1.5 0 110-3 1.5 1.5 0 010 3zm3 4a1.5 1.5 0 110-3 1.5 1.5 0 010 3z" fill-rule="nonzero"/></svg>',"color-swatch-remove-color":'<svg width="24" height="24"><path stroke="#000" stroke-width="2" d="M21 3L3 21" fill-rule="evenodd"/></svg>',"color-swatch":'<svg width="24" height="24"><rect x="3" y="3" width="18" height="18" rx="1" fill-rule="evenodd"/></svg>',"comment-add":'<svg width="24" height="24"><g fill-rule="nonzero"><path d="M9 19l3-2h7c.6 0 1-.4 1-1V6c0-.6-.4-1-1-1H5a1 1 0 00-1 1v10c0 .6.4 1 1 1h4v2zm-2 4v-4H5a3 3 0 01-3-3V6a3 3 0 013-3h14a3 3 0 013 3v10a3 3 0 01-3 3h-6.4L7 23z"/><path d="M13 10h2a1 1 0 010 2h-2v2a1 1 0 01-2 0v-2H9a1 1 0 010-2h2V8a1 1 0 012 0v2z"/></g></svg>',comment:'<svg width="24" height="24"><path fill-rule="nonzero" d="M9 19l3-2h7c.6 0 1-.4 1-1V6c0-.6-.4-1-1-1H5a1 1 0 00-1 1v10c0 .6.4 1 1 1h4v2zm-2 4v-4H5a3 3 0 01-3-3V6a3 3 0 013-3h14a3 3 0 013 3v10a3 3 0 01-3 3h-6.4L7 23z"/></svg>',contrast:'<svg width="24" height="24"><path d="M12 4a7.8 7.8 0 015.7 2.3A8 8 0 1112 4zm-6 8a6 6 0 006 6V6a6 6 0 00-6 6z" fill-rule="evenodd"/></svg>',copy:'<svg width="24" height="24"><path d="M16 3H6a2 2 0 00-2 2v11h2V5h10V3zm1 4a2 2 0 012 2v10a2 2 0 01-2 2h-7a2 2 0 01-2-2V9c0-1.2.9-2 2-2h7zm0 12V9h-7v10h7z" fill-rule="nonzero"/></svg>',crop:'<svg width="24" height="24"><path d="M17 8v7h2c.6 0 1 .4 1 1s-.4 1-1 1h-2v2c0 .6-.4 1-1 1a1 1 0 01-1-1v-2H7V9H5a1 1 0 110-2h2V5c0-.6.4-1 1-1s1 .4 1 1v2h7l3-3 1 1-3 3zM9 9v5l5-5H9zm1 6h5v-5l-5 5z" fill-rule="evenodd"/></svg>',"cut-column":'<svg width="24" height="24"><path fill-rule="evenodd" d="M7.2 4.5c.9 0 1.6.4 2.2 1A3.7 3.7 0 0110.5 8v.5l1 1 4-4 1-.5a3.3 3.3 0 012 0c.4 0 .7.3 1 .5L17 8h4v13h-6V10l-1.5 1.5.5.5v4l-2.5-2.5-1 1v.5c0 .4 0 .8-.3 1.2-.2.5-.4.9-.8 1.2-.6.7-1.3 1-2.2 1-.8.2-1.5 0-2-.6l-.5-.8-.2-1c0-.4 0-.8.3-1.2A3.9 3.9 0 017 12.7c.5-.2 1-.3 1.5-.2l1-1-1-1c-.5 0-1 0-1.5-.2-.5-.1-1-.4-1.4-.9-.4-.3-.6-.7-.8-1.2L4.5 7c0-.4 0-.7.2-1 0-.3.3-.6.5-.8.5-.5 1.2-.8 2-.7zm12.3 5h-3v10h3v-10zM8 13.8h-.3l-.4.2a2.8 2.8 0 00-.7.4v.1a2.8 2.8 0 00-.6.8l-.1.4v.7l.2.5.5.2h.7a2.6 2.6 0 00.8-.3 2.4 2.4 0 00.7-.7 2.5 2.5 0 00.3-.8 1.5 1.5 0 000-.8 1 1 0 00-.2-.4 1 1 0 00-.5-.2H8zm3.5-3.7c-.4 0-.7.1-1 .4-.3.3-.4.6-.4 1s.1.7.4 1c.3.3.6.4 1 .4s.7-.1 1-.4c.3-.3.4-.6.4-1s-.1-.7-.4-1c-.3-.3-.6-.4-1-.4zM7 5.8h-.4a1 1 0 00-.5.3 1 1 0 00-.2.5v.7a2.5 2.5 0 00.3.8l.2.3h.1l.4.4.4.2.4.1h.7L9 9l.2-.4a1.6 1.6 0 000-.8 2.6 2.6 0 00-.3-.8A2.5 2.5 0 007.7 6l-.4-.1H7z"/></svg>',"cut-row":'<svg width="24" height="24"><path fill-rule="evenodd" d="M22 3v5H9l3 3 2-2h4l-4 4 1 1h.5c.4 0 .8 0 1.2.3.5.2.9.4 1.2.8.7.6 1 1.3 1 2.2.2.8 0 1.5-.6 2l-.8.5-1 .2c-.4 0-.8 0-1.2-.3a3.9 3.9 0 01-2.1-2.2c-.2-.5-.3-1-.2-1.5l-1-1-1 1c0 .5 0 1-.2 1.5-.1.5-.4 1-.9 1.4-.3.4-.7.6-1.2.8l-1.2.3c-.4 0-.7 0-1-.2-.3 0-.6-.3-.8-.5-.5-.5-.8-1.2-.7-2 0-.9.4-1.6 1-2.2A3.7 3.7 0 018.6 14H9l1-1-4-4-.5-1a3.3 3.3 0 010-2c0-.4.3-.7.5-1l2 2V3h14zM8.5 15.3h-.3a2.6 2.6 0 00-.8.4 2.5 2.5 0 00-.9 1.1l-.1.4v.7l.2.5.5.2h.7a2.5 2.5 0 00.8-.3L9 18V18l.4-.4.2-.4.1-.4v-.3-.4a1 1 0 00-.2-.5 1 1 0 00-.4-.2h-.5zm7 0H15a1 1 0 00-.4.3 1 1 0 00-.2.5 1.5 1.5 0 000 .7v.4a2.8 2.8 0 00.5.7h.1a2.8 2.8 0 00.8.6l.4.1h.7l.5-.2.2-.5v-.4-.3a2.6 2.6 0 00-.3-.8 2.4 2.4 0 00-.7-.7 2.5 2.5 0 00-.8-.3h-.3zM12 11.6c-.4 0-.7.1-1 .4-.3.3-.4.6-.4 1s.1.7.4 1c.3.3.6.4 1 .4s.7-.1 1-.4c.3-.3.4-.6.4-1s-.1-.7-.4-1c-.3-.3-.6-.4-1-.4zm8.5-7.1h-11v2h11v-2z"/></svg>',cut:'<svg width="24" height="24"><path d="M18 15c.6.7 1 1.4 1 2.3 0 .8-.2 1.5-.7 2l-.8.5-1 .2c-.4 0-.8 0-1.2-.3a3.9 3.9 0 01-2.1-2.2c-.2-.5-.3-1-.2-1.5l-1-1-1 1c0 .5 0 1-.2 1.5-.1.5-.4 1-.9 1.4-.3.4-.7.6-1.2.8l-1.2.3c-.4 0-.7 0-1-.2-.3 0-.6-.3-.8-.5-.5-.5-.8-1.2-.7-2 0-.9.4-1.6 1-2.2A3.7 3.7 0 018.6 14H9l1-1-4-4-.5-1a3.3 3.3 0 010-2c0-.4.3-.7.5-1l6 6 6-6 .5 1a3.3 3.3 0 010 2c0 .4-.3.7-.5 1l-4 4 1 1h.5c.4 0 .8 0 1.2.3.5.2.9.4 1.2.8zm-8.5 2.2l.1-.4v-.3-.4a1 1 0 00-.2-.5 1 1 0 00-.4-.2 1.6 1.6 0 00-.8 0 2.6 2.6 0 00-.8.3 2.5 2.5 0 00-.9 1.1l-.1.4v.7l.2.5.5.2h.7a2.5 2.5 0 00.8-.3 2.8 2.8 0 001-1zm2.5-2.8c.4 0 .7-.1 1-.4.3-.3.4-.6.4-1s-.1-.7-.4-1c-.3-.3-.6-.4-1-.4s-.7.1-1 .4c-.3.3-.4.6-.4 1s.1.7.4 1c.3.3.6.4 1 .4zm5.4 4l.2-.5v-.4-.3a2.6 2.6 0 00-.3-.8 2.4 2.4 0 00-.7-.7 2.5 2.5 0 00-.8-.3 1.5 1.5 0 00-.8 0 1 1 0 00-.4.2 1 1 0 00-.2.5 1.5 1.5 0 000 .7v.4l.3.4.3.4a2.8 2.8 0 00.8.5l.4.1h.7l.5-.2z" fill-rule="evenodd"/></svg>',"document-properties":'<svg width="24" height="24"><path d="M14.4 3H7a2 2 0 00-2 2v14c0 1.1.9 2 2 2h10a2 2 0 002-2V7.6L14.4 3zM17 19H7V5h6v4h4v10z" fill-rule="nonzero"/></svg>',drag:'<svg width="24" height="24"><path d="M13 5h2v2h-2V5zm0 4h2v2h-2V9zM9 9h2v2H9V9zm4 4h2v2h-2v-2zm-4 0h2v2H9v-2zm0 4h2v2H9v-2zm4 0h2v2h-2v-2zM9 5h2v2H9V5z" fill-rule="evenodd"/></svg>',"duplicate-column":'<svg width="24" height="24"><path d="M17 6v16h-7V6h7zm-2 2h-3v12h3V8zm-2-6v2H8v15H6V2h7z"/></svg>',"duplicate-row":'<svg width="24" height="24"><path d="M22 11v7H6v-7h16zm-2 2H8v3h12v-3zm-1-6v2H4v5H2V7h17z"/></svg>',duplicate:'<svg width="24" height="24"><g fill-rule="nonzero"><path d="M16 3v2H6v11H4V5c0-1.1.9-2 2-2h10zm3 8h-2V9h-7v10h9a2 2 0 01-2 2h-7a2 2 0 01-2-2V9c0-1.2.9-2 2-2h7a2 2 0 012 2v2z"/><path d="M17 14h1a1 1 0 010 2h-1v1a1 1 0 01-2 0v-1h-1a1 1 0 010-2h1v-1a1 1 0 012 0v1z"/></g></svg>',"edit-block":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19.8 8.8l-9.4 9.4c-.2.2-.5.4-.9.4l-5.4 1.2 1.2-5.4.5-.8 9.4-9.4c.7-.7 1.8-.7 2.5 0l2.1 2.1c.7.7.7 1.8 0 2.5zm-2-.2l1-.9v-.3l-2.2-2.2a.3.3 0 00-.3 0l-1 1L18 8.5zm-1 1l-2.5-2.4-6 6 2.5 2.5 6-6zm-7 7.1l-2.6-2.4-.3.3-.1.2-.7 3 3.1-.6h.1l.4-.5z"/></svg>',"edit-image":'<svg width="24" height="24"><path d="M18 16h2V7a2 2 0 00-2-2H7v2h11v9zM6 17h15a1 1 0 010 2h-1v1a1 1 0 01-2 0v-1H6a2 2 0 01-2-2V7H3a1 1 0 110-2h1V4a1 1 0 112 0v13zm3-5.3l1.3 2 3-4.7 3.7 6H7l2-3.3z" fill-rule="nonzero"/></svg>',"embed-page":'<svg width="24" height="24"><path d="M19 6V5H5v14h2A13 13 0 0119 6zm0 1.4c-.8.8-1.6 2.4-2.2 4.6H19V7.4zm0 5.6h-2.4c-.4 1.8-.6 3.8-.6 6h3v-6zm-4 6c0-2.2.2-4.2.6-6H13c-.7 1.8-1.1 3.8-1.1 6h3zm-4 0c0-2.2.4-4.2 1-6H9.6A12 12 0 008 19h3zM4 3h16c.6 0 1 .4 1 1v16c0 .6-.4 1-1 1H4a1 1 0 01-1-1V4c0-.6.4-1 1-1zm11.8 9c.4-1.9 1-3.4 1.8-4.5a9.2 9.2 0 00-4 4.5h2.2zm-3.4 0a12 12 0 012.8-4 12 12 0 00-5 4h2.2z" fill-rule="nonzero"/></svg>',embed:'<svg width="24" height="24"><path d="M4 3h16c.6 0 1 .4 1 1v16c0 .6-.4 1-1 1H4a1 1 0 01-1-1V4c0-.6.4-1 1-1zm1 2v14h14V5H5zm4.8 2.6l5.6 4a.5.5 0 010 .8l-5.6 4A.5.5 0 019 16V8a.5.5 0 01.8-.4z" fill-rule="nonzero"/></svg>',emoji:'<svg width="24" height="24"><path d="M9 11c.6 0 1-.4 1-1s-.4-1-1-1a1 1 0 00-1 1c0 .6.4 1 1 1zm6 0c.6 0 1-.4 1-1s-.4-1-1-1a1 1 0 00-1 1c0 .6.4 1 1 1zm-3 5.5c2.1 0 4-1.5 4.4-3.5H7.6c.5 2 2.3 3.5 4.4 3.5zM12 4a8 8 0 100 16 8 8 0 000-16zm0 14.5a6.5 6.5 0 110-13 6.5 6.5 0 010 13z" fill-rule="nonzero"/></svg>',export:'<svg width="24" height="24"><g fill-rule="nonzero"><path d="M14.4 3L18 7v1h-5V5H7v14h9a1 1 0 012 0c0 1-.8 2-1.9 2H7c-1 0-2-.8-2-1.9V5c0-1 .8-2 1.9-2h7.5z"/><path d="M18.1 12c.5 0 .9.4.9 1 0 .5-.3 1-.8 1h-7.3c-.5 0-.9-.4-.9-1 0-.5.3-1 .8-1h7.3z"/><path d="M16.4 9.2a1 1 0 011.4.2l2.4 3.6-2.4 3.6a1 1 0 01-1.7-1v-.2l1.7-2.4-1.6-2.4a1 1 0 01.2-1.4z"/></g></svg>',fill:'<svg width="24" height="26"><path d="M16.6 12l-9-9-1.4 1.4 2.4 2.4-5.2 5.1c-.5.6-.5 1.6 0 2.2L9 19.6a1.5 1.5 0 002.2 0l5.5-5.5c.5-.6.5-1.6 0-2.2zM5.2 13L10 8.2l4.8 4.8H5.2zM19 14.5s-2 2.2-2 3.5c0 1.1.9 2 2 2a2 2 0 002-2c0-1.3-2-3.5-2-3.5z" fill-rule="nonzero"/></svg>',"flip-horizontally":'<svg width="24" height="24"><path d="M14 19h2v-2h-2v2zm4-8h2V9h-2v2zM4 7v10c0 1.1.9 2 2 2h3v-2H6V7h3V5H6a2 2 0 00-2 2zm14-2v2h2a2 2 0 00-2-2zm-7 16h2V3h-2v18zm7-6h2v-2h-2v2zm-4-8h2V5h-2v2zm4 12a2 2 0 002-2h-2v2z" fill-rule="nonzero"/></svg>',"flip-vertically":'<svg width="24" height="24"><path d="M5 14v2h2v-2H5zm8 4v2h2v-2h-2zm4-14H7a2 2 0 00-2 2v3h2V6h10v3h2V6a2 2 0 00-2-2zm2 14h-2v2a2 2 0 002-2zM3 11v2h18v-2H3zm6 7v2h2v-2H9zm8-4v2h2v-2h-2zM5 18c0 1.1.9 2 2 2v-2H5z" fill-rule="nonzero"/></svg>',"format-painter":'<svg width="24" height="24"><path d="M18 5V4c0-.5-.4-1-1-1H5a1 1 0 00-1 1v4c0 .6.5 1 1 1h12c.6 0 1-.4 1-1V7h1v4H9v9c0 .6.4 1 1 1h2c.6 0 1-.4 1-1v-7h8V5h-3z" fill-rule="nonzero"/></svg>',format:'<svg width="24" height="24"><path fill-rule="evenodd" d="M17 5a1 1 0 010 2h-4v11a1 1 0 01-2 0V7H7a1 1 0 110-2h10z"/></svg>',fullscreen:'<svg width="24" height="24"><path d="M15.3 10l-1.2-1.3 2.9-3h-2.3a.9.9 0 110-1.7H19c.5 0 .9.4.9.9v4.4a.9.9 0 11-1.8 0V7l-2.9 3zm0 4l3 3v-2.3a.9.9 0 111.7 0V19c0 .5-.4.9-.9.9h-4.4a.9.9 0 110-1.8H17l-3-2.9 1.3-1.2zM10 15.4l-2.9 3h2.3a.9.9 0 110 1.7H5a.9.9 0 01-.9-.9v-4.4a.9.9 0 111.8 0V17l2.9-3 1.2 1.3zM8.7 10L5.7 7v2.3a.9.9 0 01-1.7 0V5c0-.5.4-.9.9-.9h4.4a.9.9 0 010 1.8H7l3 2.9-1.3 1.2z" fill-rule="nonzero"/></svg>',gallery:'<svg width="24" height="24"><path fill-rule="nonzero" d="M5 15.7l2.3-2.2c.3-.3.7-.3 1 0L11 16l5.1-5c.3-.4.8-.4 1 0l2 1.9V8H5v7.7zM5 18V19h3l1.8-1.9-2-2L5 17.9zm14-3l-2.5-2.4-6.4 6.5H19v-4zM4 6h16c.6 0 1 .4 1 1v13c0 .6-.4 1-1 1H4a1 1 0 01-1-1V7c0-.6.4-1 1-1zm6 7a2 2 0 110-4 2 2 0 010 4zM4.5 4h15a.5.5 0 110 1h-15a.5.5 0 010-1zm2-2h11a.5.5 0 110 1h-11a.5.5 0 010-1z"/></svg>',gamma:'<svg width="24" height="24"><path d="M4 3h16c.6 0 1 .4 1 1v16c0 .6-.4 1-1 1H4a1 1 0 01-1-1V4c0-.6.4-1 1-1zm1 2v14h14V5H5zm6.5 11.8V14L9.2 8.7a5.1 5.1 0 00-.4-.8l-.1-.2H8 8v-1l.3-.1.3-.1h.7a1 1 0 01.6.5l.1.3a8.5 8.5 0 01.3.6l1.9 4.6 2-5.2a1 1 0 011-.6.5.5 0 01.5.6L13 14v2.8a.7.7 0 01-1.4 0z" fill-rule="nonzero"/></svg>',help:'<svg width="24" height="24"><g fill-rule="evenodd"><path d="M12 5.5a6.5 6.5 0 00-6 9 6.3 6.3 0 001.4 2l1 1a6.3 6.3 0 003.6 1 6.5 6.5 0 006-9 6.3 6.3 0 00-1.4-2l-1-1a6.3 6.3 0 00-3.6-1zM12 4a7.8 7.8 0 015.7 2.3A8 8 0 1112 4z"/><path d="M9.6 9.7a.7.7 0 01-.7-.8c0-1.1 1.5-1.8 3.2-1.8 1.8 0 3.2.8 3.2 2.4 0 1.4-.4 2.1-1.5 2.8-.2 0-.3.1-.3.2a2 2 0 00-.8.8.8.8 0 01-1.4-.6c.3-.7.8-1 1.3-1.5l.4-.2c.7-.4.8-.6.8-1.5 0-.5-.6-.9-1.7-.9-.5 0-1 .1-1.4.3-.2 0-.3.1-.3.2v-.2c0 .4-.4.8-.8.8z" fill-rule="nonzero"/><circle cx="12" cy="16" r="1"/></g></svg>',"highlight-bg-color":'<svg width="24" height="24"><g fill-rule="evenodd"><path id="tox-icon-highlight-bg-color__color" d="M3 18h18v3H3z"/><path fill-rule="nonzero" d="M7.7 16.7H3l3.3-3.3-.7-.8L10.2 8l4 4.1-4 4.2c-.2.2-.6.2-.8 0l-.6-.7-1.1 1.1zm5-7.5L11 7.4l3-2.9a2 2 0 012.6 0L18 6c.7.7.7 2 0 2.7l-2.9 2.9-1.8-1.8-.5-.6"/></g></svg>',home:'<svg width="24" height="24"><path fill-rule="nonzero" d="M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8z"/></svg>',"horizontal-rule":'<svg width="24" height="24"><path d="M4 11h16v2H4z" fill-rule="evenodd"/></svg>',"image-options":'<svg width="24" height="24"><path d="M6 10a2 2 0 00-2 2c0 1.1.9 2 2 2a2 2 0 002-2 2 2 0 00-2-2zm12 0a2 2 0 00-2 2c0 1.1.9 2 2 2a2 2 0 002-2 2 2 0 00-2-2zm-6 0a2 2 0 00-2 2c0 1.1.9 2 2 2a2 2 0 002-2 2 2 0 00-2-2z" fill-rule="nonzero"/></svg>',image:'<svg width="24" height="24"><path d="M5 15.7l3.3-3.2c.3-.3.7-.3 1 0L12 15l4.1-4c.3-.4.8-.4 1 0l2 1.9V5H5v10.7zM5 18V19h3l2.8-2.9-2-2L5 17.9zm14-3l-2.5-2.4-6.4 6.5H19v-4zM4 3h16c.6 0 1 .4 1 1v16c0 .6-.4 1-1 1H4a1 1 0 01-1-1V4c0-.6.4-1 1-1zm6 8a2 2 0 100-4 2 2 0 000 4z" fill-rule="nonzero"/></svg>',indent:'<svg width="24" height="24"><path d="M7 5h12c.6 0 1 .4 1 1s-.4 1-1 1H7a1 1 0 110-2zm5 4h7c.6 0 1 .4 1 1s-.4 1-1 1h-7a1 1 0 010-2zm0 4h7c.6 0 1 .4 1 1s-.4 1-1 1h-7a1 1 0 010-2zm-5 4h12a1 1 0 010 2H7a1 1 0 010-2zm-2.6-3.8L6.2 12l-1.8-1.2a1 1 0 011.2-1.6l3 2a1 1 0 010 1.6l-3 2a1 1 0 11-1.2-1.6z" fill-rule="evenodd"/></svg>',info:'<svg width="24" height="24"><path d="M12 4a7.8 7.8 0 015.7 2.3A8 8 0 1112 4zm-1 3v2h2V7h-2zm3 10v-1h-1v-5h-3v1h1v4h-1v1h4z" fill-rule="evenodd"/></svg>',"insert-character":'<svg width="24" height="24"><path d="M15 18h4l1-2v4h-6v-3.3l1.4-1a6 6 0 001.8-2.9 6.3 6.3 0 00-.1-4.1 5.8 5.8 0 00-3-3.2c-.6-.3-1.3-.5-2.1-.5a5.1 5.1 0 00-3.9 1.8 6.3 6.3 0 00-1.3 6 6.2 6.2 0 001.8 3l1.4.9V20H4v-4l1 2h4v-.5l-2-1L5.4 15A6.5 6.5 0 014 11c0-1 .2-1.9.6-2.7A7 7 0 016.3 6C7.1 5.4 8 5 9 4.5c1-.3 2-.5 3.1-.5a8.8 8.8 0 015.7 2 7 7 0 011.7 2.3 6 6 0 01.2 4.8c-.2.7-.6 1.3-1 1.9a7.6 7.6 0 01-3.6 2.5v.5z" fill-rule="evenodd"/></svg>',"insert-time":'<svg width="24" height="24"><g fill-rule="nonzero"><path d="M12 19a7 7 0 100-14 7 7 0 000 14zm0 2a9 9 0 110-18 9 9 0 010 18z"/><path d="M16 12h-3V7c0-.6-.4-1-1-1a1 1 0 00-1 1v7h5c.6 0 1-.4 1-1s-.4-1-1-1z"/></g></svg>',invert:'<svg width="24" height="24"><path d="M18 19.3L16.5 18a5.8 5.8 0 01-3.1 1.9 6.1 6.1 0 01-5.5-1.6A5.8 5.8 0 016 14v-.3l.1-1.2A13.9 13.9 0 017.7 9l-3-3 .7-.8 2.8 2.9 9 8.9 1.5 1.6-.7.6zm0-5.5v.3l-.1 1.1-.4 1-1.2-1.2a4.3 4.3 0 00.2-1v-.2c0-.4 0-.8-.2-1.3l-.5-1.4a14.8 14.8 0 00-3-4.2L12 6a26.1 26.1 0 00-2.2 2.5l-1-1a20.9 20.9 0 012.9-3.3L12 4l1 .8a22.2 22.2 0 014 5.4c.6 1.2 1 2.4 1 3.6z" fill-rule="evenodd"/></svg>',italic:'<svg width="24" height="24"><path d="M16.7 4.7l-.1.9h-.3c-.6 0-1 0-1.4.3-.3.3-.4.6-.5 1.1l-2.1 9.8v.6c0 .5.4.8 1.4.8h.2l-.2.8H8l.2-.8h.2c1.1 0 1.8-.5 2-1.5l2-9.8.1-.5c0-.6-.4-.8-1.4-.8h-.3l.2-.9h5.8z" fill-rule="evenodd"/></svg>',"line-height":'<svg width="24" height="24"><path d="M21 5a1 1 0 01.1 2H13a1 1 0 01-.1-2H21zm0 4a1 1 0 01.1 2H13a1 1 0 01-.1-2H21zm0 4a1 1 0 01.1 2H13a1 1 0 01-.1-2H21zm0 4a1 1 0 01.1 2H13a1 1 0 01-.1-2H21zM7 3.6l3.7 3.7a1 1 0 01-1.3 1.5h-.1L8 7.3v9.2l1.3-1.3a1 1 0 011.3 0h.1c.4.4.4 1 0 1.3v.1L7 20.4l-3.7-3.7a1 1 0 011.3-1.5h.1L6 16.7V7.4L4.7 8.7a1 1 0 01-1.3 0h-.1a1 1 0 010-1.3v-.1L7 3.6z"/></svg>',line:'<svg width="24" height="24"><path d="M15 9l-8 8H4v-3l8-8 3 3zm1-1l-3-3 1-1h1c-.2 0 0 0 0 0l2 2s0 .2 0 0v1l-1 1zM4 18h16v2H4v-2z" fill-rule="evenodd"/></svg>',link:'<svg width="24" height="24"><path d="M6.2 12.3a1 1 0 011.4 1.4l-2.1 2a2 2 0 102.7 2.8l4.8-4.8a1 1 0 000-1.4 1 1 0 111.4-1.3 2.9 2.9 0 010 4L9.6 20a3.9 3.9 0 01-5.5-5.5l2-2zm11.6-.6a1 1 0 01-1.4-1.4l2-2a2 2 0 10-2.6-2.8L11 10.3a1 1 0 000 1.4A1 1 0 119.6 13a2.9 2.9 0 010-4L14.4 4a3.9 3.9 0 015.5 5.5l-2 2z" fill-rule="nonzero"/></svg>',"list-bull-circle":'<svg width="48" height="48"><g fill-rule="evenodd"><path d="M11 16a2 2 0 100-4 2 2 0 000 4zm0 1a3 3 0 110-6 3 3 0 010 6zM11 26a2 2 0 100-4 2 2 0 000 4zm0 1a3 3 0 110-6 3 3 0 010 6zM11 36a2 2 0 100-4 2 2 0 000 4zm0 1a3 3 0 110-6 3 3 0 010 6z" fill-rule="nonzero"/><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/></g></svg>',"list-bull-default":'<svg width="48" height="48"><g fill-rule="evenodd"><circle cx="11" cy="14" r="3"/><circle cx="11" cy="24" r="3"/><circle cx="11" cy="34" r="3"/><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/></g></svg>',"list-bull-square":'<svg width="48" height="48"><g fill-rule="evenodd"><path d="M8 11h6v6H8zM8 21h6v6H8zM8 31h6v6H8z"/><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/></g></svg>',"list-num-default-rtl":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M8 12h22v4H8zM8 22h22v4H8zM8 32h22v4H8z"/><path d="M37.4 17v-4.8l-1.6 1v-1.1l1.6-1h1.2V17zM33.3 17.1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7zm1.7 5.7c0-1.2 1-2 2.2-2 1.3 0 2.1.8 2.1 1.8 0 .7-.3 1.2-1.3 2.2l-1.2 1v.2h2.6v1h-4.3v-.9l2-1.9c.8-.8 1-1.1 1-1.5 0-.5-.4-.8-1-.8-.5 0-.9.3-.9.9H35zm-1.7 4.3c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7zm3.2 7.3v-1h.7c.6 0 1-.3 1-.8 0-.4-.4-.7-1-.7s-1 .3-1 .8H35c0-1.1 1-1.8 2.2-1.8 1.2 0 2.1.6 2.1 1.6 0 .7-.4 1.2-1 1.3v.1c.7.1 1.3.7 1.3 1.4 0 1-1 1.9-2.4 1.9-1.3 0-2.2-.8-2.3-2h1.2c0 .6.5 1 1.1 1 .6 0 1-.4 1-1 0-.5-.3-.8-1-.8h-.7zm-3.3 2.7c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .8.3.8.7 0 .4-.3.7-.8.7z"/></g></svg>',"list-num-default":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/><path d="M10 17v-4.8l-1.5 1v-1.1l1.6-1h1.2V17h-1.2zm3.6.1c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .7.3.7.7 0 .4-.2.7-.7.7zm-5 5.7c0-1.2.8-2 2.1-2s2.1.8 2.1 1.8c0 .7-.3 1.2-1.4 2.2l-1.1 1v.2h2.6v1H8.6v-.9l2-1.9c.8-.8 1-1.1 1-1.5 0-.5-.4-.8-1-.8-.5 0-.9.3-.9.9H8.5zm6.3 4.3c-.5 0-.7-.3-.7-.7 0-.4.2-.7.7-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7zM10 34.4v-1h.7c.6 0 1-.3 1-.8 0-.4-.4-.7-1-.7s-1 .3-1 .8H8.6c0-1.1 1-1.8 2.2-1.8 1.3 0 2.1.6 2.1 1.6 0 .7-.4 1.2-1 1.3v.1c.8.1 1.3.7 1.3 1.4 0 1-1 1.9-2.4 1.9-1.3 0-2.2-.8-2.3-2h1.2c0 .6.5 1 1.1 1 .7 0 1-.4 1-1 0-.5-.3-.8-1-.8h-.7zm4.7 2.7c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .8.3.8.7 0 .4-.3.7-.8.7z"/></g></svg>',"list-num-lower-alpha-rtl":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M8 12h22v4H8zM8 22h22v4H8zM8 32h22v4H8z"/><path d="M36.5 16c-.9 0-1.5-.5-1.5-1.3s.6-1.3 1.8-1.4h1v-.4c0-.4-.2-.6-.7-.6-.4 0-.7.1-.8.4h-1.1c0-.8.8-1.4 2-1.4S39 12 39 13V16h-1.2v-.6c-.3.4-.8.7-1.4.7zm.4-.8c.6 0 1-.4 1-.9V14h-1c-.5.1-.7.3-.7.6 0 .4.3.6.7.6zM33.1 16.1c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .8.3.8.7 0 .4-.3.7-.8.7zM37.7 26c-.7 0-1.2-.2-1.5-.7v.7H35v-6.3h1.2v2.5c.3-.5.8-.9 1.5-.9 1.1 0 1.8 1 1.8 2.4 0 1.5-.7 2.4-1.8 2.4zm-.5-3.6c-.6 0-1 .5-1 1.3s.4 1.4 1 1.4c.7 0 1-.6 1-1.4 0-.8-.3-1.3-1-1.3zM33.2 26.1c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .8.3.8.7 0 .4-.3.7-.8.7zm6 7h-1c-.1-.5-.4-.8-1-.8s-1 .5-1 1.4c0 1 .4 1.4 1 1.4.5 0 .9-.2 1-.7h1c0 1-.8 1.7-2 1.7-1.4 0-2.2-.9-2.2-2.4s.8-2.4 2.2-2.4c1.2 0 2 .7 2 1.7zm-6.1 3c-.5 0-.7-.3-.7-.7 0-.4.2-.7.7-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7z"/></g></svg>',"list-num-lower-alpha":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/><path d="M10.3 15.2c.5 0 1-.4 1-.9V14h-1c-.5.1-.8.3-.8.6 0 .4.3.6.8.6zm-.4.9c-1 0-1.5-.6-1.5-1.4 0-.8.6-1.3 1.7-1.4h1.1v-.4c0-.4-.2-.6-.7-.6-.5 0-.8.1-.9.4h-1c0-.8.8-1.4 2-1.4 1.1 0 1.8.6 1.8 1.6V16h-1.1v-.6h-.1c-.2.4-.7.7-1.3.7zm4.6 0c-.5 0-.7-.3-.7-.7 0-.4.2-.7.7-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7zm-3.2 10c-.6 0-1.2-.3-1.4-.8v.7H8.5v-6.3H10v2.5c.3-.5.8-.9 1.4-.9 1.2 0 1.9 1 1.9 2.4 0 1.5-.7 2.4-1.9 2.4zm-.4-3.7c-.7 0-1 .5-1 1.3s.3 1.4 1 1.4c.6 0 1-.6 1-1.4 0-.8-.4-1.3-1-1.3zm4 3.7c-.5 0-.7-.3-.7-.7 0-.4.2-.7.7-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7zm-2.2 7h-1.2c0-.5-.4-.8-.9-.8-.6 0-1 .5-1 1.4 0 1 .4 1.4 1 1.4.5 0 .8-.2 1-.7h1c0 1-.8 1.7-2 1.7-1.4 0-2.2-.9-2.2-2.4s.8-2.4 2.2-2.4c1.2 0 2 .7 2 1.7zm1.8 3c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7z"/></g></svg>',"list-num-lower-greek-rtl":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M8 12h22v4H8zM8 22h22v4H8zM8 32h22v4H8z"/><path d="M37.4 16c-1.2 0-2-.8-2-2.3 0-1.5.8-2.4 2-2.4.6 0 1 .4 1.3 1v-.9H40v3.2c0 .4.1.5.4.5h.2v.9h-.6c-.6 0-1-.2-1-.7h-.2c-.2.4-.7.8-1.3.8zm.3-1c.6 0 1-.5 1-1.3s-.4-1.3-1-1.3-1 .5-1 1.3.4 1.4 1 1.4zM33.3 16.1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7zM36 21.9c0-1.5.8-2.3 2.1-2.3 1.2 0 2 .6 2 1.6 0 .6-.3 1-.9 1.3.9.3 1.3.8 1.3 1.7 0 1.2-.7 1.9-1.8 1.9-.6 0-1.1-.3-1.4-.8v2.2H36V22zm1.8 1.2v-1h.3c.5 0 .9-.2.9-.7 0-.5-.3-.8-.9-.8-.5 0-.8.3-.8 1v2.2c0 .8.4 1.3 1 1.3s1-.4 1-1-.4-1-1.2-1h-.3zM33.3 26.1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7zM37.1 34.6L34.8 30h1.4l1.7 3.5 1.7-3.5h1.1l-2.2 4.6v.1c.5.8.7 1.4.7 1.8 0 .4-.2.8-.4 1-.2.2-.6.3-1 .3-.9 0-1.3-.4-1.3-1.2 0-.5.2-1 .5-1.7l.1-.2zm.7 1a2 2 0 00-.4.9c0 .3.1.4.4.4.3 0 .4-.1.4-.4 0-.2-.1-.6-.4-1zM33.3 36.1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7z"/></g></svg>',"list-num-lower-greek":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/><path d="M10.5 15c.7 0 1-.5 1-1.3s-.3-1.3-1-1.3c-.5 0-.9.5-.9 1.3s.4 1.4 1 1.4zm-.3 1c-1.1 0-1.8-.8-1.8-2.3 0-1.5.7-2.4 1.8-2.4.7 0 1.1.4 1.3 1h.1v-.9h1.2v3.2c0 .4.1.5.4.5h.2v.9h-.6c-.6 0-1-.2-1.1-.7h-.1c-.2.4-.7.8-1.4.8zm5 .1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.7-.7.5 0 .8.3.8.7 0 .4-.3.7-.8.7zm-4.9 7v-1h.3c.6 0 1-.2 1-.7 0-.5-.4-.8-1-.8-.5 0-.8.3-.8 1v2.2c0 .8.4 1.3 1.1 1.3.6 0 1-.4 1-1s-.5-1-1.3-1h-.3zM8.6 22c0-1.5.7-2.3 2-2.3 1.2 0 2 .6 2 1.6 0 .6-.3 1-.8 1.3.8.3 1.3.8 1.3 1.7 0 1.2-.8 1.9-1.9 1.9-.6 0-1.1-.3-1.3-.8v2.2H8.5V22zm6.2 4.2c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .7.3.7.7 0 .4-.2.7-.7.7zm-4.5 8.5L8 30h1.4l1.7 3.5 1.7-3.5h1.1l-2.2 4.6v.1c.5.8.7 1.4.7 1.8 0 .4-.1.8-.4 1-.2.2-.6.3-1 .3-.9 0-1.3-.4-1.3-1.2 0-.5.2-1 .5-1.7l.1-.2zm.7 1a2 2 0 00-.4.9c0 .3.1.4.4.4.3 0 .4-.1.4-.4 0-.2-.1-.6-.4-1zm4.5.5c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7z"/></g></svg>',"list-num-lower-roman-rtl":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M8 12h22v4H8zM8 22h22v4H8zM8 32h22v4H8z"/><path d="M32.9 16v-1.2h-1.3V16H33zm0 10v-1.2h-1.3V26H33zm0 10v-1.2h-1.3V36H33z"/><path fill-rule="nonzero" d="M36 21h-1.5v5H36zM36 31h-1.5v5H36zM39 21h-1.5v5H39zM39 31h-1.5v5H39zM42 31h-1.5v5H42zM36 11h-1.5v5H36zM36 19h-1.5v1H36zM36 29h-1.5v1H36zM39 19h-1.5v1H39zM39 29h-1.5v1H39zM42 29h-1.5v1H42zM36 9h-1.5v1H36z"/></g></svg>',"list-num-lower-roman":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/><path d="M15.1 16v-1.2h1.3V16H15zm0 10v-1.2h1.3V26H15zm0 10v-1.2h1.3V36H15z"/><path fill-rule="nonzero" d="M12 21h1.5v5H12zM12 31h1.5v5H12zM9 21h1.5v5H9zM9 31h1.5v5H9zM6 31h1.5v5H6zM12 11h1.5v5H12zM12 19h1.5v1H12zM12 29h1.5v1H12zM9 19h1.5v1H9zM9 29h1.5v1H9zM6 29h1.5v1H6zM12 9h1.5v1H12z"/></g></svg>',"list-num-upper-alpha-rtl":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M8 12h22v4H8zM8 22h22v4H8zM8 32h22v4H8z"/><path d="M39.3 17l-.5-1.4h-2l-.5 1.4H35l2-6h1.6l2 6h-1.3zm-1.6-4.7l-.7 2.3h1.6l-.8-2.3zM33.4 17c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .7.3.7.7 0 .4-.2.7-.7.7zm4.7 9.9h-2.7v-6H38c1.2 0 1.9.6 1.9 1.5 0 .6-.5 1.2-1 1.3.7.1 1.3.7 1.3 1.5 0 1-.8 1.7-2 1.7zm-1.4-5v1.5h1c.6 0 1-.3 1-.8 0-.4-.4-.7-1-.7h-1zm0 4h1.1c.7 0 1.1-.3 1.1-.8 0-.6-.4-.9-1.1-.9h-1.1V26zM33 27.1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7zm4.9 10c-1.8 0-2.8-1.1-2.8-3.1s1-3.1 2.8-3.1c1.4 0 2.5.9 2.6 2.2h-1.3c0-.7-.6-1.1-1.3-1.1-1 0-1.6.7-1.6 2s.6 2 1.6 2c.7 0 1.2-.4 1.4-1h1.2c-.1 1.3-1.2 2.2-2.6 2.2zm-4.5 0c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7z"/></g></svg>',"list-num-upper-alpha":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/><path d="M12.6 17l-.5-1.4h-2L9.5 17H8.3l2-6H12l2 6h-1.3zM11 12.3l-.7 2.3h1.6l-.8-2.3zm4.7 4.8c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .7.3.7.7 0 .4-.2.7-.7.7zM11.4 27H8.7v-6h2.6c1.2 0 1.9.6 1.9 1.5 0 .6-.5 1.2-1 1.3.7.1 1.3.7 1.3 1.5 0 1-.8 1.7-2 1.7zM10 22v1.5h1c.6 0 1-.3 1-.8 0-.4-.4-.7-1-.7h-1zm0 4H11c.7 0 1.1-.3 1.1-.8 0-.6-.4-.9-1.1-.9H10V26zm5.4 1.1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7zm-4.1 10c-1.8 0-2.8-1.1-2.8-3.1s1-3.1 2.8-3.1c1.4 0 2.5.9 2.6 2.2h-1.3c0-.7-.6-1.1-1.3-1.1-1 0-1.6.7-1.6 2s.6 2 1.6 2c.7 0 1.2-.4 1.4-1h1.2c-.1 1.3-1.2 2.2-2.6 2.2zm4.5 0c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7z"/></g></svg>',"list-num-upper-roman-rtl":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M8 12h22v4H8zM8 22h22v4H8zM8 32h22v4H8z"/><path d="M31.6 17v-1.2H33V17h-1.3zm0 10v-1.2H33V27h-1.3zm0 10v-1.2H33V37h-1.3z"/><path fill-rule="nonzero" d="M34.5 20H36v7h-1.5zM34.5 30H36v7h-1.5zM37.5 20H39v7h-1.5zM37.5 30H39v7h-1.5zM40.5 30H42v7h-1.5zM34.5 10H36v7h-1.5z"/></g></svg>',"list-num-upper-roman":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/><path d="M15.1 17v-1.2h1.3V17H15zm0 10v-1.2h1.3V27H15zm0 10v-1.2h1.3V37H15z"/><path fill-rule="nonzero" d="M12 20h1.5v7H12zM12 30h1.5v7H12zM9 20h1.5v7H9zM9 30h1.5v7H9zM6 30h1.5v7H6zM12 10h1.5v7H12z"/></g></svg>',lock:'<svg width="24" height="24"><path d="M16.3 11c.2 0 .3 0 .5.2l.2.6v7.4c0 .3 0 .4-.2.6l-.6.2H7.8c-.3 0-.4 0-.6-.2a.7.7 0 01-.2-.6v-7.4c0-.3 0-.4.2-.6l.5-.2H8V8c0-.8.3-1.5.9-2.1.6-.6 1.3-.9 2.1-.9h2c.8 0 1.5.3 2.1.9.6.6.9 1.3.9 2.1v3h.3zM10 8v3h4V8a1 1 0 00-.3-.7A1 1 0 0013 7h-2a1 1 0 00-.7.3 1 1 0 00-.3.7z" fill-rule="evenodd"/></svg>',ltr:'<svg width="24" height="24"><path d="M11 5h7a1 1 0 010 2h-1v11a1 1 0 01-2 0V7h-2v11a1 1 0 01-2 0v-6c-.5 0-1 0-1.4-.3A3.4 3.4 0 017.8 10a3.3 3.3 0 010-2.8 3.4 3.4 0 011.8-1.8L11 5zM4.4 16.2L6.2 15l-1.8-1.2a1 1 0 011.2-1.6l3 2a1 1 0 010 1.6l-3 2a1 1 0 11-1.2-1.6z" fill-rule="evenodd"/></svg>',"more-drawer":'<svg width="24" height="24"><path d="M6 10a2 2 0 00-2 2c0 1.1.9 2 2 2a2 2 0 002-2 2 2 0 00-2-2zm12 0a2 2 0 00-2 2c0 1.1.9 2 2 2a2 2 0 002-2 2 2 0 00-2-2zm-6 0a2 2 0 00-2 2c0 1.1.9 2 2 2a2 2 0 002-2 2 2 0 00-2-2z" fill-rule="nonzero"/></svg>',"new-document":'<svg width="24" height="24"><path d="M14.4 3H7a2 2 0 00-2 2v14c0 1.1.9 2 2 2h10a2 2 0 002-2V7.6L14.4 3zM17 19H7V5h6v4h4v10z" fill-rule="nonzero"/></svg>',"new-tab":'<svg width="24" height="24"><path d="M15 13l2-2v8H5V7h8l-2 2H7v8h8v-4zm4-8v5.5l-2-2-5.6 5.5H10v-1.4L15.5 7l-2-2H19z" fill-rule="evenodd"/></svg>',"non-breaking":'<svg width="24" height="24"><path d="M11 11H8a1 1 0 110-2h3V6c0-.6.4-1 1-1s1 .4 1 1v3h3c.6 0 1 .4 1 1s-.4 1-1 1h-3v3c0 .6-.4 1-1 1a1 1 0 01-1-1v-3zm10 4v5H3v-5c0-.6.4-1 1-1s1 .4 1 1v3h14v-3c0-.6.4-1 1-1s1 .4 1 1z" fill-rule="evenodd"/></svg>',notice:'<svg width="24" height="24"><path d="M17.8 9.8L15.4 4 20 8.5v7L15.5 20h-7L4 15.5v-7L8.5 4h7l2.3 5.8zm0 0l2.2 5.7-2.3-5.8zM13 17v-2h-2v2h2zm0-4V7h-2v6h2z" fill-rule="evenodd"/></svg>',"ordered-list-rtl":'<svg width="24" height="24"><path d="M6 17h8a1 1 0 010 2H6a1 1 0 010-2zm0-6h8a1 1 0 010 2H6a1 1 0 010-2zm0-6h8a1 1 0 010 2H6a1 1 0 110-2zm13-1v3.5a.5.5 0 11-1 0V5h-.5a.5.5 0 110-1H19zm-1 8.8l.2.2h1.3a.5.5 0 110 1h-1.6a1 1 0 01-.9-1V13c0-.4.3-.8.6-1l1.2-.4.2-.3a.2.2 0 00-.2-.2h-1.3a.5.5 0 01-.5-.5c0-.3.2-.5.5-.5h1.6c.5 0 .9.4.9 1v.1c0 .4-.3.8-.6 1l-1.2.4-.2.3zm2 4.2v2c0 .6-.4 1-1 1h-1.5a.5.5 0 010-1h1.2a.3.3 0 100-.6h-1.3a.4.4 0 110-.8h1.3a.3.3 0 000-.6h-1.2a.5.5 0 110-1H19c.6 0 1 .4 1 1z" fill-rule="evenodd"/></svg>',"ordered-list":'<svg width="24" height="24"><path d="M10 17h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 010-2zm0-6h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 010-2zm0-6h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 110-2zM6 4v3.5c0 .3-.2.5-.5.5a.5.5 0 01-.5-.5V5h-.5a.5.5 0 010-1H6zm-1 8.8l.2.2h1.3c.3 0 .5.2.5.5s-.2.5-.5.5H4.9a1 1 0 01-.9-1V13c0-.4.3-.8.6-1l1.2-.4.2-.3a.2.2 0 00-.2-.2H4.5a.5.5 0 01-.5-.5c0-.3.2-.5.5-.5h1.6c.5 0 .9.4.9 1v.1c0 .4-.3.8-.6 1l-1.2.4-.2.3zM7 17v2c0 .6-.4 1-1 1H4.5a.5.5 0 010-1h1.2c.2 0 .3-.1.3-.3 0-.2-.1-.3-.3-.3H4.4a.4.4 0 110-.8h1.3c.2 0 .3-.1.3-.3 0-.2-.1-.3-.3-.3H4.5a.5.5 0 110-1H6c.6 0 1 .4 1 1z" fill-rule="evenodd"/></svg>',orientation:'<svg width="24" height="24"><path d="M7.3 6.4L1 13l6.4 6.5 6.5-6.5-6.5-6.5zM3.7 13l3.6-3.7L11 13l-3.7 3.7-3.6-3.7zM12 6l2.8 2.7c.3.3.3.8 0 1-.3.4-.9.4-1.2 0L9.2 5.7a.8.8 0 010-1.2L13.6.2c.3-.3.9-.3 1.2 0 .3.3.3.8 0 1.1L12 4h1a9 9 0 11-4.3 16.9l1.5-1.5A7 7 0 1013 6h-1z" fill-rule="nonzero"/></svg>',outdent:'<svg width="24" height="24"><path d="M7 5h12c.6 0 1 .4 1 1s-.4 1-1 1H7a1 1 0 110-2zm5 4h7c.6 0 1 .4 1 1s-.4 1-1 1h-7a1 1 0 010-2zm0 4h7c.6 0 1 .4 1 1s-.4 1-1 1h-7a1 1 0 010-2zm-5 4h12a1 1 0 010 2H7a1 1 0 010-2zm1.6-3.8a1 1 0 01-1.2 1.6l-3-2a1 1 0 010-1.6l3-2a1 1 0 011.2 1.6L6.8 12l1.8 1.2z" fill-rule="evenodd"/></svg>',"page-break":'<svg width="24" height="24"><g fill-rule="evenodd"><path d="M5 11c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 010-2zm3 0h1c.6 0 1 .4 1 1s-.4 1-1 1H8a1 1 0 010-2zm4 0c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 010-2zm3 0h1c.6 0 1 .4 1 1s-.4 1-1 1h-1a1 1 0 010-2zm4 0c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 010-2zM7 3v5h10V3c0-.6.4-1 1-1s1 .4 1 1v7H5V3c0-.6.4-1 1-1s1 .4 1 1zM6 22a1 1 0 01-1-1v-7h14v7c0 .6-.4 1-1 1a1 1 0 01-1-1v-5H7v5c0 .6-.4 1-1 1z"/></g></svg>',paragraph:'<svg width="24" height="24"><path fill-rule="evenodd" d="M10 5h7a1 1 0 010 2h-1v11a1 1 0 01-2 0V7h-2v11a1 1 0 01-2 0v-6c-.5 0-1 0-1.4-.3A3.4 3.4 0 016.8 10a3.3 3.3 0 010-2.8 3.4 3.4 0 011.8-1.8L10 5z"/></svg>',"paste-column-after":'<svg width="24" height="24"><path fill-rule="evenodd" d="M12 1a3 3 0 012.8 2H18c1 0 2 .8 2 1.9V7h-2V5h-2v1c0 .6-.4 1-1 1H9a1 1 0 01-1-1V5H6v13h7v2H6c-1 0-2-.8-2-1.9V5c0-1 .8-2 1.9-2H9.2A3 3 0 0112 1zm8 7v12h-6V8h6zm-1.5 1.5h-3v9h3v-9zM12 3a1 1 0 100 2 1 1 0 000-2z"/></svg>',"paste-column-before":'<svg width="24" height="24"><path fill-rule="evenodd" d="M12 1a3 3 0 012.8 2H18c1 0 2 .8 2 1.9V18c0 1-.8 2-1.9 2H11v-2h7V5h-2v1c0 .6-.4 1-1 1H9a1 1 0 01-1-1V5H6v2H4V5c0-1 .8-2 1.9-2H9.2A3 3 0 0112 1zm-2 7v12H4V8h6zM8.5 9.5h-3v9h3v-9zM12 3a1 1 0 100 2 1 1 0 000-2z"/></svg>',"paste-row-after":'<svg width="24" height="24"><path fill-rule="evenodd" d="M12 1a3 3 0 012.8 2H18c1 0 2 .8 2 1.9V11h-2V5h-2v1c0 .6-.4 1-1 1H9a1 1 0 01-1-1V5H6v13h14c0 1-.8 2-1.9 2H6c-1 0-2-.8-2-1.9V5c0-1 .8-2 1.9-2H9.2A3 3 0 0112 1zm10 11v5H8v-5h14zm-1.5 1.5h-11v2h11v-2zM12 3a1 1 0 100 2 1 1 0 000-2z"/></svg>',"paste-row-before":'<svg width="24" height="24"><path fill-rule="evenodd" d="M12 1a3 3 0 012.8 2H18c1 0 2 .8 2 1.9V7h-2V5h-2v1c0 .6-.4 1-1 1H9a1 1 0 01-1-1V5H6v13h12v-4h2v4c0 1-.8 2-1.9 2H6c-1 0-2-.8-2-1.9V5c0-1 .8-2 1.9-2H9.2A3 3 0 0112 1zm10 7v5H8V8h14zm-1.5 1.5h-11v2h11v-2zM12 3a1 1 0 100 2 1 1 0 000-2z"/></svg>',"paste-text":'<svg width="24" height="24"><path d="M18 9V5h-2v1c0 .6-.4 1-1 1H9a1 1 0 01-1-1V5H6v13h3V9h9zM9 20H6a2 2 0 01-2-2V5c0-1.1.9-2 2-2h3.2A3 3 0 0112 1a3 3 0 012.8 2H18a2 2 0 012 2v4h1v12H9v-1zm1.5-9.5v9h9v-9h-9zM12 3a1 1 0 00-1 1c0 .5.4 1 1 1s1-.5 1-1-.4-1-1-1zm0 9h6v2h-.5l-.5-1h-1v4h.8v1h-3.6v-1h.8v-4h-1l-.5 1H12v-2z" fill-rule="nonzero"/></svg>',paste:'<svg width="24" height="24"><path d="M18 9V5h-2v1c0 .6-.4 1-1 1H9a1 1 0 01-1-1V5H6v13h3V9h9zM9 20H6a2 2 0 01-2-2V5c0-1.1.9-2 2-2h3.2A3 3 0 0112 1a3 3 0 012.8 2H18a2 2 0 012 2v4h1v12H9v-1zm1.5-9.5v9h9v-9h-9zM12 3a1 1 0 00-1 1c0 .5.4 1 1 1s1-.5 1-1-.4-1-1-1z" fill-rule="nonzero"/></svg>',"permanent-pen":'<svg width="24" height="24"><path d="M10.5 17.5L8 20H3v-3l3.5-3.5a2 2 0 010-3L14 3l1 1-7.3 7.3a1 1 0 000 1.4l3.6 3.6c.4.4 1 .4 1.4 0L20 9l1 1-7.6 7.6a2 2 0 01-2.8 0l-.1-.1z" fill-rule="nonzero"/></svg>',plus:'<svg width="24" height="24"><path d="M12 4c.5 0 1 .4 1 .9V11h6a1 1 0 01.1 2H13v6a1 1 0 01-2 .1V13H5a1 1 0 01-.1-2H11V5c0-.6.4-1 1-1z"/></svg>',preferences:'<svg width="24" height="24"><path d="M20.1 13.5l-1.9.2a5.8 5.8 0 01-.6 1.5l1.2 1.5c.4.4.3 1 0 1.4l-.7.7a1 1 0 01-1.4 0l-1.5-1.2a6.2 6.2 0 01-1.5.6l-.2 1.9c0 .5-.5.9-1 .9h-1a1 1 0 01-1-.9l-.2-1.9a5.8 5.8 0 01-1.5-.6l-1.5 1.2a1 1 0 01-1.4 0l-.7-.7a1 1 0 010-1.4l1.2-1.5a6.2 6.2 0 01-.6-1.5l-1.9-.2a1 1 0 01-.9-1v-1c0-.5.4-1 .9-1l1.9-.2a5.8 5.8 0 01.6-1.5L5.2 7.3a1 1 0 010-1.4l.7-.7a1 1 0 011.4 0l1.5 1.2a6.2 6.2 0 011.5-.6l.2-1.9c0-.5.5-.9 1-.9h1c.5 0 1 .4 1 .9l.2 1.9a5.8 5.8 0 011.5.6l1.5-1.2a1 1 0 011.4 0l.7.7c.3.4.4 1 0 1.4l-1.2 1.5a6.2 6.2 0 01.6 1.5l1.9.2c.5 0 .9.5.9 1v1c0 .5-.4 1-.9 1zM12 15a3 3 0 100-6 3 3 0 000 6z" fill-rule="evenodd"/></svg>',preview:'<svg width="24" height="24"><path d="M3.5 12.5c.5.8 1.1 1.6 1.8 2.3 2 2 4.2 3.2 6.7 3.2s4.7-1.2 6.7-3.2a16.2 16.2 0 002.1-2.8 15.7 15.7 0 00-2.1-2.8c-2-2-4.2-3.2-6.7-3.2a9.3 9.3 0 00-6.7 3.2A16.2 16.2 0 003.2 12c0 .2.2.3.3.5zm-2.4-1l.7-1.2L4 7.8C6.2 5.4 8.9 4 12 4c3 0 5.8 1.4 8.1 3.8a18.2 18.2 0 012.8 3.7v1l-.7 1.2-2.1 2.5c-2.3 2.4-5 3.8-8.1 3.8-3 0-5.8-1.4-8.1-3.8a18.2 18.2 0 01-2.8-3.7 1 1 0 010-1zm12-3.3a2 2 0 102.7 2.6 4 4 0 11-2.6-2.6z" fill-rule="nonzero"/></svg>',print:'<svg width="24" height="24"><path d="M18 8H6a3 3 0 00-3 3v6h2v3h14v-3h2v-6a3 3 0 00-3-3zm-1 10H7v-4h10v4zm.5-5c-.8 0-1.5-.7-1.5-1.5s.7-1.5 1.5-1.5 1.5.7 1.5 1.5-.7 1.5-1.5 1.5zm.5-8H6v2h12V5z" fill-rule="nonzero"/></svg>',quote:'<svg width="24" height="24"><path d="M7.5 17h.9c.4 0 .7-.2.9-.6L11 13V8c0-.6-.4-1-1-1H6a1 1 0 00-1 1v4c0 .6.4 1 1 1h2l-1.3 2.7a1 1 0 00.8 1.3zm8 0h.9c.4 0 .7-.2.9-.6L19 13V8c0-.6-.4-1-1-1h-4a1 1 0 00-1 1v4c0 .6.4 1 1 1h2l-1.3 2.7a1 1 0 00.8 1.3z" fill-rule="nonzero"/></svg>',redo:'<svg width="24" height="24"><path d="M17.6 10H12c-2.8 0-4.4 1.4-4.9 3.5-.4 2 .3 4 1.4 4.6a1 1 0 11-1 1.8c-2-1.2-2.9-4.1-2.3-6.8.6-3 3-5.1 6.8-5.1h5.6l-3.3-3.3a1 1 0 111.4-1.4l5 5a1 1 0 010 1.4l-5 5a1 1 0 01-1.4-1.4l3.3-3.3z" fill-rule="nonzero"/></svg>',reload:'<svg width="24" height="24"><g fill-rule="nonzero"><path d="M5 22.1l-1.2-4.7v-.2a1 1 0 011-1l5 .4a1 1 0 11-.2 2l-2.2-.2a7.8 7.8 0 008.4.2 7.5 7.5 0 003.5-6.4 1 1 0 112 0 9.5 9.5 0 01-4.5 8 9.9 9.9 0 01-10.2 0l.4 1.4a1 1 0 11-2 .5zM13.6 7.4c0-.5.5-1 1-.9l2.8.2a8 8 0 00-9.5-1 7.5 7.5 0 00-3.6 7 1 1 0 01-2 0 9.5 9.5 0 014.5-8.6 10 10 0 0110.9.3l-.3-1a1 1 0 012-.5l1.1 4.8a1 1 0 01-1 1.2l-5-.4a1 1 0 01-.9-1z"/></g></svg>',"remove-formatting":'<svg width="24" height="24"><path d="M13.2 6a1 1 0 010 .2l-2.6 10a1 1 0 01-1 .8h-.2a.8.8 0 01-.8-1l2.6-10H8a1 1 0 110-2h9a1 1 0 010 2h-3.8zM5 18h7a1 1 0 010 2H5a1 1 0 010-2zm13 1.5L16.5 18 15 19.5a.7.7 0 01-1-1l1.5-1.5-1.5-1.5a.7.7 0 011-1l1.5 1.5 1.5-1.5a.7.7 0 011 1L17.5 17l1.5 1.5a.7.7 0 01-1 1z" fill-rule="evenodd"/></svg>',remove:'<svg width="24" height="24"><path d="M16 7h3a1 1 0 010 2h-1v9a3 3 0 01-3 3H9a3 3 0 01-3-3V9H5a1 1 0 110-2h3V6a3 3 0 013-3h2a3 3 0 013 3v1zm-2 0V6c0-.6-.4-1-1-1h-2a1 1 0 00-1 1v1h4zm2 2H8v9c0 .6.4 1 1 1h6c.6 0 1-.4 1-1V9zm-7 3a1 1 0 012 0v4a1 1 0 01-2 0v-4zm4 0a1 1 0 012 0v4a1 1 0 01-2 0v-4z" fill-rule="nonzero"/></svg>',"resize-handle":'<svg width="10" height="10"><g fill-rule="nonzero"><path d="M8.1 1.1A.5.5 0 119 2l-7 7A.5.5 0 111 8l7-7zM8.1 5.1A.5.5 0 119 6l-3 3A.5.5 0 115 8l3-3z"/></g></svg>',resize:'<svg width="24" height="24"><path d="M4 5c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3h6c.3 0 .5.1.7.3.2.2.3.4.3.7 0 .3-.1.5-.3.7a1 1 0 01-.7.3H7.4L18 16.6V13c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3.3 0 .5.1.7.3.2.2.3.4.3.7v6c0 .3-.1.5-.3.7a1 1 0 01-.7.3h-6a1 1 0 01-.7-.3 1 1 0 01-.3-.7c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3h3.6L6 7.4V11c0 .3-.1.5-.3.7a1 1 0 01-.7.3 1 1 0 01-.7-.3A1 1 0 014 11V5z" fill-rule="evenodd"/></svg>',"restore-draft":'<svg width="24" height="24"><g fill-rule="evenodd"><path d="M17 13c0 .6-.4 1-1 1h-4V8c0-.6.4-1 1-1s1 .4 1 1v4h2c.6 0 1 .4 1 1z"/><path d="M4.7 10H9a1 1 0 010 2H3a1 1 0 01-1-1V5a1 1 0 112 0v3l2.5-2.4a9.2 9.2 0 0110.8-1.5A9 9 0 0113.4 21c-2.4.1-4.7-.7-6.5-2.2a1 1 0 111.3-1.5 7.2 7.2 0 0011.6-3.7 7 7 0 00-3.5-7.7A7.2 7.2 0 008 7L4.7 10z" fill-rule="nonzero"/></g></svg>',"rotate-left":'<svg width="24" height="24"><path d="M4.7 10H9a1 1 0 010 2H3a1 1 0 01-1-1V5a1 1 0 112 0v3l2.5-2.4a9.2 9.2 0 0110.8-1.5A9 9 0 0113.4 21c-2.4.1-4.7-.7-6.5-2.2a1 1 0 111.3-1.5 7.2 7.2 0 0011.6-3.7 7 7 0 00-3.5-7.7A7.2 7.2 0 008 7L4.7 10z" fill-rule="nonzero"/></svg>',"rotate-right":'<svg width="24" height="24"><path d="M20 8V5a1 1 0 012 0v6c0 .6-.4 1-1 1h-6a1 1 0 010-2h4.3L16 7A7.2 7.2 0 007.7 6a7 7 0 003 13.1c1.9.1 3.7-.5 5-1.7a1 1 0 011.4 1.5A9.2 9.2 0 012.2 14c-.9-3.9 1-8 4.5-9.9 3.5-1.9 8-1.3 10.8 1.5L20 8z" fill-rule="nonzero"/></svg>',rtl:'<svg width="24" height="24"><path d="M8 5h8v2h-2v12h-2V7h-2v12H8v-7c-.5 0-1 0-1.4-.3A3.4 3.4 0 014.8 10a3.3 3.3 0 010-2.8 3.4 3.4 0 011.8-1.8L8 5zm12 11.2a1 1 0 11-1 1.6l-3-2a1 1 0 010-1.6l3-2a1 1 0 111 1.6L18.4 15l1.8 1.2z" fill-rule="evenodd"/></svg>',save:'<svg width="24" height="24"><path d="M5 16h14a2 2 0 012 2v2a2 2 0 01-2 2H5a2 2 0 01-2-2v-2c0-1.1.9-2 2-2zm0 2v2h14v-2H5zm10 0h2v2h-2v-2zm-4-6.4L8.7 9.3a1 1 0 10-1.4 1.4l4 4c.4.4 1 .4 1.4 0l4-4a1 1 0 10-1.4-1.4L13 11.6V4a1 1 0 00-2 0v7.6z" fill-rule="nonzero"/></svg>',search:'<svg width="24" height="24"><path d="M16 17.3a8 8 0 111.4-1.4l4.3 4.4a1 1 0 01-1.4 1.4l-4.4-4.3zm-5-.3a6 6 0 100-12 6 6 0 000 12z" fill-rule="nonzero"/></svg>',"select-all":'<svg width="24" height="24"><path d="M3 5h2V3a2 2 0 00-2 2zm0 8h2v-2H3v2zm4 8h2v-2H7v2zM3 9h2V7H3v2zm10-6h-2v2h2V3zm6 0v2h2a2 2 0 00-2-2zM5 21v-2H3c0 1.1.9 2 2 2zm-2-4h2v-2H3v2zM9 3H7v2h2V3zm2 18h2v-2h-2v2zm8-8h2v-2h-2v2zm0 8a2 2 0 002-2h-2v2zm0-12h2V7h-2v2zm0 8h2v-2h-2v2zm-4 4h2v-2h-2v2zm0-16h2V3h-2v2zM7 17h10V7H7v10zm2-8h6v6H9V9z" fill-rule="nonzero"/></svg>',selected:'<svg width="24" height="24"><path fill-rule="nonzero" d="M6 4h12a2 2 0 012 2v12a2 2 0 01-2 2H6a2 2 0 01-2-2V6c0-1.1.9-2 2-2zm3.6 10.9L7 12.3a.7.7 0 00-1 1L9.6 17 18 8.6a.7.7 0 000-1 .7.7 0 00-1 0l-7.4 7.3z"/></svg>',settings:'<svg width="24" height="24"><path d="M11 6h8c.6 0 1 .4 1 1s-.4 1-1 1h-8v.3c0 .2 0 .3-.2.5l-.6.2H7.8c-.3 0-.4 0-.6-.2a.7.7 0 01-.2-.6V8H5a1 1 0 110-2h2v-.3c0-.2 0-.3.2-.5l.5-.2h2.5c.3 0 .4 0 .6.2l.2.5V6zM8 8h2V6H8v2zm9 2.8v.2h2c.6 0 1 .4 1 1s-.4 1-1 1h-2v.3c0 .2 0 .3-.2.5l-.6.2h-2.4c-.3 0-.4 0-.6-.2a.7.7 0 01-.2-.6V13H5a1 1 0 010-2h8v-.3c0-.2 0-.3.2-.5l.6-.2h2.4c.3 0 .4 0 .6.2l.2.6zM14 13h2v-2h-2v2zm-3 2.8v.2h8c.6 0 1 .4 1 1s-.4 1-1 1h-8v.3c0 .2 0 .3-.2.5l-.6.2H7.8c-.3 0-.4 0-.6-.2a.7.7 0 01-.2-.6V18H5a1 1 0 010-2h2v-.3c0-.2 0-.3.2-.5l.5-.2h2.5c.3 0 .4 0 .6.2l.2.6zM8 18h2v-2H8v2z" fill-rule="evenodd"/></svg>',sharpen:'<svg width="24" height="24"><path d="M16 6l4 4-8 9-8-9 4-4h8zm-4 10.2l5.5-6.2-.1-.1H12v-.3h5.1l-.2-.2H12V9h4.6l-.2-.2H12v-.3h4.1l-.2-.2H12V8h3.6l-.2-.2H8.7L6.5 10l.1.1H12v.3H6.9l.2.2H12v.3H7.3l.2.2H12v.3H7.7l.3.2h4v.3H8.2l.2.2H12v.3H8.6l.3.2H12v.3H9l.3.2H12v.3H9.5l.2.2H12v.3h-2l.2.2H12v.3h-1.6l.2.2H12v.3h-1.1l.2.2h.9v.3h-.7l.2.2h.5v.3h-.3l.3.2z" fill-rule="evenodd"/></svg>',sourcecode:'<svg width="24" height="24"><g fill-rule="nonzero"><path d="M9.8 15.7c.3.3.3.8 0 1-.3.4-.9.4-1.2 0l-4.4-4.1a.8.8 0 010-1.2l4.4-4.2c.3-.3.9-.3 1.2 0 .3.3.3.8 0 1.1L6 12l3.8 3.7zM14.2 15.7c-.3.3-.3.8 0 1 .4.4.9.4 1.2 0l4.4-4.1c.3-.3.3-.9 0-1.2l-4.4-4.2a.8.8 0 00-1.2 0c-.3.3-.3.8 0 1.1L18 12l-3.8 3.7z"/></g></svg>',"spell-check":'<svg width="24" height="24"><path d="M6 8v3H5V5c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3h2c.3 0 .5.1.7.3.2.2.3.4.3.7v6H8V8H6zm0-3v2h2V5H6zm13 0h-3v5h3v1h-3a1 1 0 01-.7-.3 1 1 0 01-.3-.7V5c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3h3v1zm-5 1.5l-.1.7c-.1.2-.3.3-.6.3.3 0 .5.1.6.3l.1.7V10c0 .3-.1.5-.3.7a1 1 0 01-.7.3h-3V4h3c.3 0 .5.1.7.3.2.2.3.4.3.7v1.5zM13 10V8h-2v2h2zm0-3V5h-2v2h2zm3 5l1 1-6.5 7L7 15.5l1.3-1 2.2 2.2L16 12z" fill-rule="evenodd"/></svg>',"strike-through":'<svg width="24" height="24"><g fill-rule="evenodd"><path d="M15.6 8.5c-.5-.7-1-1.1-1.3-1.3-.6-.4-1.3-.6-2-.6-2.7 0-2.8 1.7-2.8 2.1 0 1.6 1.8 2 3.2 2.3 4.4.9 4.6 2.8 4.6 3.9 0 1.4-.7 4.1-5 4.1A6.2 6.2 0 017 16.4l1.5-1.1c.4.6 1.6 2 3.7 2 1.6 0 2.5-.4 3-1.2.4-.8.3-2-.8-2.6-.7-.4-1.6-.7-2.9-1-1-.2-3.9-.8-3.9-3.6C7.6 6 10.3 5 12.4 5c2.9 0 4.2 1.6 4.7 2.4l-1.5 1.1z"/><path d="M5 11h14a1 1 0 010 2H5a1 1 0 010-2z" fill-rule="nonzero"/></g></svg>',subscript:'<svg width="24" height="24"><path d="M10.4 10l4.6 4.6-1.4 1.4L9 11.4 4.4 16 3 14.6 7.6 10 3 5.4 4.4 4 9 8.6 13.6 4 15 5.4 10.4 10zM21 19h-5v-1l1-.8 1.7-1.6c.3-.4.5-.8.5-1.2 0-.3 0-.6-.2-.7-.2-.2-.5-.3-.9-.3a2 2 0 00-.8.2l-.7.3-.4-1.1 1-.6 1.2-.2c.8 0 1.4.3 1.8.7.4.4.6.9.6 1.5s-.2 1.1-.5 1.6a8 8 0 01-1.3 1.3l-.6.6h2.6V19z" fill-rule="nonzero"/></svg>',superscript:'<svg width="24" height="24"><path d="M15 9.4L10.4 14l4.6 4.6-1.4 1.4L9 15.4 4.4 20 3 18.6 7.6 14 3 9.4 4.4 8 9 12.6 13.6 8 15 9.4zm5.9 1.6h-5v-1l1-.8 1.7-1.6c.3-.5.5-.9.5-1.3 0-.3 0-.5-.2-.7-.2-.2-.5-.3-.9-.3l-.8.2-.7.4-.4-1.2c.2-.2.5-.4 1-.5.3-.2.8-.2 1.2-.2.8 0 1.4.2 1.8.6.4.4.6 1 .6 1.6 0 .5-.2 1-.5 1.5l-1.3 1.4-.6.5h2.6V11z" fill-rule="nonzero"/></svg>',"table-cell-properties":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 012 2v12a2 2 0 01-2 2H5a2 2 0 01-2-2V6c0-1.1.9-2 2-2h14zm-8 9H5v5h6v-5zm8 0h-6v5h6v-5zm-8-7H5v5h6V6z"/></svg>',"table-cell-select-all":'<svg width="24" height="24"><g fill-rule="evenodd"><path fill-rule="nonzero" d="M19 4a2 2 0 012 2v12a2 2 0 01-2 2H5a2 2 0 01-2-2V6c0-1.1.9-2 2-2h14zm0 2H5v12h14V6z"/><path d="M13 6v5h6v2h-6v5h-2v-5H5v-2h6V6h2z" opacity=".2"/></g></svg>',"table-cell-select-inner":'<svg width="24" height="24"><g fill-rule="evenodd"><path fill-rule="nonzero" d="M19 4a2 2 0 012 2v12a2 2 0 01-2 2H5a2 2 0 01-2-2V6c0-1.1.9-2 2-2h14zm0 2H5v12h14V6z" opacity=".2"/><path d="M13 6v5h6v2h-6v5h-2v-5H5v-2h6V6h2z"/></g></svg>',"table-delete-column":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 012 2v12a2 2 0 01-2 2H5a2 2 0 01-2-2V6c0-1.1.9-2 2-2h14zm-4 4h-2V6h-2v2H9V6H5v12h4v-2h2v2h2v-2h2v2h4V6h-4v2zm.3.5l1 1.2-3 2.3 3 2.3-1 1.2L12 13l-3.3 2.6-1-1.2 3-2.3-3-2.3 1-1.2L12 11l3.3-2.5z"/></svg>',"table-delete-row":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 012 2v12a2 2 0 01-2 2H5a2 2 0 01-2-2V6c0-1.1.9-2 2-2h14zm0 2H5v3h2.5v2H5v2h2.5v2H5v3h14v-3h-2.5v-2H19v-2h-2.5V9H19V6zm-4.7 1.8l1.2 1L13 12l2.6 3.3-1.2 1-2.3-3-2.3 3-1.2-1L11 12 8.5 8.7l1.2-1 2.3 3 2.3-3z"/></svg>',"table-delete-table":'<svg width="24" height="24"><g fill-rule="nonzero"><path d="M19 4a2 2 0 012 2v12a2 2 0 01-2 2H5a2 2 0 01-2-2V6c0-1.1.9-2 2-2h14zM5 6v12h14V6H5z"/><path d="M14.4 8.6l1 1-2.3 2.4 2.3 2.4-1 1-2.4-2.3-2.4 2.3-1-1 2.3-2.4-2.3-2.4 1-1 2.4 2.3z"/></g></svg>',"table-insert-column-after":'<svg width="24" height="24"><path fill-rule="nonzero" d="M20 4c.6 0 1 .4 1 1v2a1 1 0 01-2 0V6h-8v12h8v-1a1 1 0 012 0v2c0 .5-.4 1-.9 1H5a2 2 0 01-2-2V6c0-1.1.9-2 2-2h15zM9 13H5v5h4v-5zm7-5c.5 0 1 .4 1 .9V11h2a1 1 0 01.1 2H17v2a1 1 0 01-2 .1V13h-2a1 1 0 01-.1-2H15V9c0-.6.4-1 1-1zM9 6H5v5h4V6z"/></svg>',"table-insert-column-before":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 012 2v12a2 2 0 01-2 2H4a1 1 0 01-1-1v-2a1 1 0 012 0v1h8V6H5v1a1 1 0 11-2 0V5c0-.6.4-1 1-1h15zm0 9h-4v5h4v-5zM8 8c.5 0 1 .4 1 .9V11h2a1 1 0 01.1 2H9v2a1 1 0 01-2 .1V13H5a1 1 0 01-.1-2H7V9c0-.6.4-1 1-1zm11-2h-4v5h4V6z"/></svg>',"table-insert-row-above":'<svg width="24" height="24"><path fill-rule="nonzero" d="M6 4a1 1 0 110 2H5v6h14V6h-1a1 1 0 010-2h2c.6 0 1 .4 1 1v13a2 2 0 01-2 2H5a2 2 0 01-2-2V5c0-.6.4-1 1-1h2zm5 10H5v4h6v-4zm8 0h-6v4h6v-4zM12 3c.5 0 1 .4 1 .9V6h2a1 1 0 010 2h-2v2a1 1 0 01-2 .1V8H9a1 1 0 010-2h2V4c0-.6.4-1 1-1z"/></svg>',"table-insert-row-after":'<svg width="24" height="24"><path fill-rule="nonzero" d="M12 13c.5 0 1 .4 1 .9V16h2a1 1 0 01.1 2H13v2a1 1 0 01-2 .1V18H9a1 1 0 01-.1-2H11v-2c0-.6.4-1 1-1zm6 7a1 1 0 010-2h1v-6H5v6h1a1 1 0 010 2H4a1 1 0 01-1-1V6c0-1.1.9-2 2-2h14a2 2 0 012 2v13c0 .5-.4 1-.9 1H18zM11 6H5v4h6V6zm8 0h-6v4h6V6z"/></svg>',"table-left-header":'<svg width="24" height="24"><path d="M19 4a2 2 0 012 2v12a2 2 0 01-2 2H5a2 2 0 01-2-2V6c0-1.1.9-2 2-2h14zm0 9h-4v5h4v-5zm-6 0H9v5h4v-5zm0-7H9v5h4V6zm6 0h-4v5h4V6z"/></svg>',"table-merge-cells":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 012 2v12a2 2 0 01-2 2H5a2 2 0 01-2-2V6c0-1.1.9-2 2-2h14zM5 15.5V18h3v-2.5H5zm14-5h-9V18h9v-7.5zM19 6h-4v2.5h4V6zM8 6H5v2.5h3V6zm5 0h-3v2.5h3V6zm-8 7.5h3v-3H5v3z"/></svg>',"table-row-properties":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 012 2v12a2 2 0 01-2 2H5a2 2 0 01-2-2V6c0-1.1.9-2 2-2h14zM5 15v3h6v-3H5zm14 0h-6v3h6v-3zm0-9h-6v3h6V6zM5 9h6V6H5v3z"/></svg>',"table-split-cells":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 012 2v12a2 2 0 01-2 2H5a2 2 0 01-2-2V6c0-1.1.9-2 2-2h14zM8 15.5H5V18h3v-2.5zm11-5h-9V18h9v-7.5zm-2.5 1l1 1-2 2 2 2-1 1-2-2-2 2-1-1 2-2-2-2 1-1 2 2 2-2zm-8.5-1H5v3h3v-3zM19 6h-4v2.5h4V6zM8 6H5v2.5h3V6zm5 0h-3v2.5h3V6z"/></svg>',"table-top-header":'<svg width="24" height="24"><path d="M19 4a2 2 0 012 2v12a2 2 0 01-2 2H5a2 2 0 01-2-2V6c0-1.1.9-2 2-2h14zm-8 11H5v3h6v-3zm8 0h-6v3h6v-3zm0-5h-6v3h6v-3zM5 13h6v-3H5v3z"/></svg>',table:'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 012 2v12a2 2 0 01-2 2H5a2 2 0 01-2-2V6c0-1.1.9-2 2-2h14zM5 14v4h6v-4H5zm14 0h-6v4h6v-4zm0-6h-6v4h6V8zM5 12h6V8H5v4z"/></svg>',template:'<svg width="24" height="24"><path d="M19 19v-1H5v1h14zM9 16v-4a5 5 0 116 0v4h4a2 2 0 012 2v3H3v-3c0-1.1.9-2 2-2h4zm4 0v-5l.8-.6a3 3 0 10-3.6 0l.8.6v5h2z" fill-rule="nonzero"/></svg>',"temporary-placeholder":'<svg width="24" height="24"><g fill-rule="evenodd"><path d="M9 7.6V6h2.5V4.5a.5.5 0 111 0V6H15v1.6a8 8 0 11-6 0zm-2.6 5.3a.5.5 0 00.3.6c.3 0 .6 0 .6-.3l.1-.2a5 5 0 013.3-2.8c.3-.1.4-.4.4-.6-.1-.3-.4-.5-.6-.4a6 6 0 00-4.1 3.7z"/><circle cx="14" cy="4" r="1"/><circle cx="12" cy="2" r="1"/><circle cx="10" cy="4" r="1"/></g></svg>',"text-color":'<svg width="24" height="24"><g fill-rule="evenodd"><path id="tox-icon-text-color__color" d="M3 18h18v3H3z"/><path d="M8.7 16h-.8a.5.5 0 01-.5-.6l2.7-9c.1-.3.3-.4.5-.4h2.8c.2 0 .4.1.5.4l2.7 9a.5.5 0 01-.5.6h-.8a.5.5 0 01-.4-.4l-.7-2.2c0-.3-.3-.4-.5-.4h-3.4c-.2 0-.4.1-.5.4l-.7 2.2c0 .3-.2.4-.4.4zm2.6-7.6l-.6 2a.5.5 0 00.5.6h1.6a.5.5 0 00.5-.6l-.6-2c0-.3-.3-.4-.5-.4h-.4c-.2 0-.4.1-.5.4z"/></g></svg>',toc:'<svg width="24" height="24"><path d="M5 5c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 110-2zm3 0h11c.6 0 1 .4 1 1s-.4 1-1 1H8a1 1 0 110-2zm-3 8c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 010-2zm3 0h11c.6 0 1 .4 1 1s-.4 1-1 1H8a1 1 0 010-2zm0-4c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 110-2zm3 0h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 010-2zm-3 8c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 010-2zm3 0h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 010-2z" fill-rule="evenodd"/></svg>',translate:'<svg width="24" height="24"><path d="M12.7 14.3l-.3.7-.4.7-2.2-2.2-3.1 3c-.3.4-.8.4-1 0a.7.7 0 010-1l3.1-3A12.4 12.4 0 016.7 9H8a10.1 10.1 0 001.7 2.4c.5-.5 1-1.1 1.4-1.8l.9-2H4.7a.7.7 0 110-1.5h4.4v-.7c0-.4.3-.8.7-.8.4 0 .7.4.7.8v.7H15c.4 0 .8.3.8.7 0 .4-.4.8-.8.8h-1.4a12.3 12.3 0 01-1 2.4 13.5 13.5 0 01-1.7 2.3l1.9 1.8zm4.3-3l2.7 7.3a.5.5 0 01-.4.7 1 1 0 01-1-.7l-.6-1.5h-3.4l-.6 1.5a1 1 0 01-1 .7.5.5 0 01-.4-.7l2.7-7.4a1 1 0 012 0zm-2.2 4.4h2.4L16 12.5l-1.2 3.2z" fill-rule="evenodd"/></svg>',underline:'<svg width="24" height="24"><path d="M16 5c.6 0 1 .4 1 1v5.5a4 4 0 01-.4 1.8l-1 1.4a5.3 5.3 0 01-5.5 1 5 5 0 01-1.6-1c-.5-.4-.8-.9-1.1-1.4a4 4 0 01-.4-1.8V6c0-.6.4-1 1-1s1 .4 1 1v5.5c0 .3 0 .6.2 1l.6.7a3.3 3.3 0 002.2.8 3.4 3.4 0 002.2-.8c.3-.2.4-.5.6-.8l.2-.9V6c0-.6.4-1 1-1zM8 17h8c.6 0 1 .4 1 1s-.4 1-1 1H8a1 1 0 010-2z" fill-rule="evenodd"/></svg>',undo:'<svg width="24" height="24"><path d="M6.4 8H12c3.7 0 6.2 2 6.8 5.1.6 2.7-.4 5.6-2.3 6.8a1 1 0 01-1-1.8c1.1-.6 1.8-2.7 1.4-4.6-.5-2.1-2.1-3.5-4.9-3.5H6.4l3.3 3.3a1 1 0 11-1.4 1.4l-5-5a1 1 0 010-1.4l5-5a1 1 0 011.4 1.4L6.4 8z" fill-rule="nonzero"/></svg>',unlink:'<svg width="24" height="24"><path d="M6.2 12.3a1 1 0 011.4 1.4l-2 2a2 2 0 102.6 2.8l4.8-4.8a1 1 0 000-1.4 1 1 0 111.4-1.3 2.9 2.9 0 010 4L9.6 20a3.9 3.9 0 01-5.5-5.5l2-2zm11.6-.6a1 1 0 01-1.4-1.4l2.1-2a2 2 0 10-2.7-2.8L11 10.3a1 1 0 000 1.4A1 1 0 119.6 13a2.9 2.9 0 010-4L14.4 4a3.9 3.9 0 015.5 5.5l-2 2zM7.6 6.3a.8.8 0 01-1 1.1L3.3 4.2a.7.7 0 111-1l3.2 3.1zM5.1 8.6a.8.8 0 010 1.5H3a.8.8 0 010-1.5H5zm5-3.5a.8.8 0 01-1.5 0V3a.8.8 0 011.5 0V5zm6 11.8a.8.8 0 011-1l3.2 3.2a.8.8 0 01-1 1L16 17zm-2.2 2a.8.8 0 011.5 0V21a.8.8 0 01-1.5 0V19zm5-3.5a.7.7 0 110-1.5H21a.8.8 0 010 1.5H19z" fill-rule="nonzero"/></svg>',unlock:'<svg width="24" height="24"><path d="M16 5c.8 0 1.5.3 2.1.9.6.6.9 1.3.9 2.1v3h-2V8a1 1 0 00-.3-.7A1 1 0 0016 7h-2a1 1 0 00-.7.3 1 1 0 00-.3.7v3h.3c.2 0 .3 0 .5.2l.2.6v7.4c0 .3 0 .4-.2.6l-.6.2H4.8c-.3 0-.4 0-.6-.2a.7.7 0 01-.2-.6v-7.4c0-.3 0-.4.2-.6l.5-.2H11V8c0-.8.3-1.5.9-2.1.6-.6 1.3-.9 2.1-.9h2z" fill-rule="evenodd"/></svg>',"unordered-list":'<svg width="24" height="24"><path d="M11 5h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 010-2zm0 6h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 010-2zm0 6h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 010-2zM4.5 6c0-.4.1-.8.4-1 .3-.4.7-.5 1.1-.5.4 0 .8.1 1 .4.4.3.5.7.5 1.1 0 .4-.1.8-.4 1-.3.4-.7.5-1.1.5-.4 0-.8-.1-1-.4-.4-.3-.5-.7-.5-1.1zm0 6c0-.4.1-.8.4-1 .3-.4.7-.5 1.1-.5.4 0 .8.1 1 .4.4.3.5.7.5 1.1 0 .4-.1.8-.4 1-.3.4-.7.5-1.1.5-.4 0-.8-.1-1-.4-.4-.3-.5-.7-.5-1.1zm0 6c0-.4.1-.8.4-1 .3-.4.7-.5 1.1-.5.4 0 .8.1 1 .4.4.3.5.7.5 1.1 0 .4-.1.8-.4 1-.3.4-.7.5-1.1.5-.4 0-.8-.1-1-.4-.4-.3-.5-.7-.5-1.1z" fill-rule="evenodd"/></svg>',unselected:'<svg width="24" height="24"><path fill-rule="nonzero" d="M6 4h12a2 2 0 012 2v12a2 2 0 01-2 2H6a2 2 0 01-2-2V6c0-1.1.9-2 2-2zm0 1a1 1 0 00-1 1v12c0 .6.4 1 1 1h12c.6 0 1-.4 1-1V6c0-.6-.4-1-1-1H6z"/></svg>',upload:'<svg width="24" height="24"><path d="M18 19v-2a1 1 0 012 0v3c0 .6-.4 1-1 1H5a1 1 0 01-1-1v-3a1 1 0 012 0v2h12zM11 6.4L8.7 8.7a1 1 0 01-1.4-1.4l4-4a1 1 0 011.4 0l4 4a1 1 0 11-1.4 1.4L13 6.4V16a1 1 0 01-2 0V6.4z" fill-rule="nonzero"/></svg>',user:'<svg width="24" height="24"><path d="M12 24a12 12 0 110-24 12 12 0 010 24zm-8.7-5.3a11 11 0 0017.4 0C19.4 16.3 14.6 15 12 15c-2.6 0-7.4 1.3-8.7 3.7zM12 13c2.2 0 4-2 4-4.5S14.2 4 12 4 8 6 8 8.5 9.8 13 12 13z" fill-rule="nonzero"/></svg>',visualblocks:'<svg width="24" height="24"><path d="M9 19v2H7v-2h2zm-4 0v2a2 2 0 01-2-2h2zm8 0v2h-2v-2h2zm8 0a2 2 0 01-2 2v-2h2zm-4 0v2h-2v-2h2zM15 7a1 1 0 010 2v7a1 1 0 01-2 0V9h-1v7a1 1 0 01-2 0v-4a2.5 2.5 0 01-.2-5H15zM5 15v2H3v-2h2zm16 0v2h-2v-2h2zM5 11v2H3v-2h2zm16 0v2h-2v-2h2zM5 7v2H3V7h2zm16 0v2h-2V7h2zM5 3v2H3c0-1.1.9-2 2-2zm8 0v2h-2V3h2zm6 0a2 2 0 012 2h-2V3zM9 3v2H7V3h2zm8 0v2h-2V3h2z" fill-rule="evenodd"/></svg>',visualchars:'<svg width="24" height="24"><path d="M10 5h7a1 1 0 010 2h-1v11a1 1 0 01-2 0V7h-2v11a1 1 0 01-2 0v-6c-.5 0-1 0-1.4-.3A3.4 3.4 0 016.8 10a3.3 3.3 0 010-2.8 3.4 3.4 0 011.8-1.8L10 5z" fill-rule="evenodd"/></svg>',warning:'<svg width="24" height="24"><path d="M19.8 18.3c.2.5.3.9 0 1.2-.1.3-.5.5-1 .5H5.2c-.5 0-.9-.2-1-.5-.3-.3-.2-.7 0-1.2L11 4.7l.5-.5.5-.2c.2 0 .3 0 .5.2.2 0 .3.3.5.5l6.8 13.6zM12 18c.3 0 .5-.1.7-.3.2-.2.3-.4.3-.7a1 1 0 00-.3-.7 1 1 0 00-.7-.3 1 1 0 00-.7.3 1 1 0 00-.3.7c0 .3.1.5.3.7.2.2.4.3.7.3zm.7-3l.3-4a1 1 0 00-.3-.7 1 1 0 00-.7-.3 1 1 0 00-.7.3 1 1 0 00-.3.7l.3 4h1.4z" fill-rule="evenodd"/></svg>',"zoom-in":'<svg width="24" height="24"><path d="M16 17.3a8 8 0 111.4-1.4l4.3 4.4a1 1 0 01-1.4 1.4l-4.4-4.3zm-5-.3a6 6 0 100-12 6 6 0 000 12zm-1-9a1 1 0 012 0v6a1 1 0 01-2 0V8zm-2 4a1 1 0 010-2h6a1 1 0 010 2H8z" fill-rule="nonzero"/></svg>',"zoom-out":'<svg width="24" height="24"><path d="M16 17.3a8 8 0 111.4-1.4l4.3 4.4a1 1 0 01-1.4 1.4l-4.4-4.3zm-5-.3a6 6 0 100-12 6 6 0 000 12zm-3-5a1 1 0 010-2h6a1 1 0 010 2H8z" fill-rule="nonzero"/></svg>'}})},fdef:function(t,e){t.exports="\t\n\v\f\r   ᠎             　\u2028\u2029\ufeff"}}]);