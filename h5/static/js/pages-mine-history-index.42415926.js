(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-mine-history-index"],{"1a03":function(t,i,e){var n=e("24fb");i=n(!1),i.push([t.i,".edit-goods[data-v-dc01686c]{width:100%;border-radius:6px;overflow:hidden;padding:10px 15px;box-sizing:border-box;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;justify-content:space-between;-webkit-box-align:center;-webkit-align-items:center;align-items:center;font-size:12px;background:#fff}.edit-goods .button[data-v-dc01686c]{font-size:14px}.edit-goods .goods-num[data-v-dc01686c]{font-weight:700;color:#f44;padding:0 5px}.group-date[data-v-dc01686c]{width:100%;border-radius:6px;overflow:hidden;padding:10px 15px;box-sizing:border-box;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;justify-content:space-between;-webkit-box-align:center;-webkit-align-items:center;align-items:center;font-size:12px}",""]),t.exports=i},"2ba2":function(t,i,e){"use strict";e.r(i);var n=e("3e13"),o=e("46b3");for(var a in o)"default"!==a&&function(t){e.d(i,t,(function(){return o[t]}))}(a);e("746a");var l,s=e("f0c5"),u=Object(s["a"])(o["default"],n["b"],n["c"],!1,null,"dc01686c",null,!1,n["a"],l);i["default"]=u.exports},"3a27":function(t,i,e){"use strict";e.r(i);var n=e("8116"),o=e("d211");for(var a in o)"default"!==a&&function(t){e.d(i,t,(function(){return o[t]}))}(a);var l,s=e("f0c5"),u=Object(s["a"])(o["default"],n["b"],n["c"],!1,null,null,null,!1,n["a"],l);i["default"]=u.exports},"3e13":function(t,i,e){"use strict";e.d(i,"b",(function(){return o})),e.d(i,"c",(function(){return a})),e.d(i,"a",(function(){return n}));var n={wuiLoadLoginList:e("3a27").default,uniSwipeAction:e("7a2e").default,uniSwipeActionItem:e("ffb6").default,wuiGoodsCard:e("215a").default,wuiLoadingMore:e("90ab").default,wuiSubmitBar:e("8975").default,wuiButton:e("6821").default},o=function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("v-uni-view",{staticClass:"container"},[e("wui-load-login-list",{attrs:{loading:t.loading,title:t.HISTORY_NOT_FIND,list:t.list}},[e("v-uni-view",{staticClass:"edit-goods fixed"},[e("v-uni-view",[t._v("共"),e("v-uni-text",{staticClass:"goods-num"},[t._v(t._s(t.total))]),t._v("条记录")],1),e("v-uni-view",{staticClass:"button"},[e("v-uni-text",{on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.edit=!t.edit}}},[t._v(t._s(t.edit?"完成":"管理"))])],1)],1),e("v-uni-view",{staticStyle:{"min-height":"38px"}}),t._l(t.list,(function(i,n){return e("v-uni-view",{key:n},[i.date?e("v-uni-view",{staticClass:"group-date"},[t._v(t._s(i.date))]):t._e(),e("uni-swipe-action",[e("uni-swipe-action-item",{attrs:{"right-options":t.rightOptions},on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.swipeClick.apply(void 0,arguments)},change:function(e){arguments[0]=e=t.$handleEvent(e),t.swipeChange(e,i.id)}}},[e("wui-goods-card",{staticStyle:{width:"100%"},attrs:{params:i.goods},on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.click.apply(void 0,arguments)}},scopedSlots:t._u([{key:"left",fn:function(){return[t.edit?e("v-uni-view",[e("v-uni-radio",{staticStyle:{transform:"scale(0.8)","margin-left":"-8px"},attrs:{checked:i.checked,color:"#f44"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.checkOne(i.id)}}})],1):t._e()]},proxy:!0}],null,!0)})],1)],1)],1)})),null!==t.list?e("wui-loading-more",{attrs:{page:t.query.page,"last-page":t.lastPage,loading:t.loadMore},on:{"update:loading":function(i){arguments[0]=i=t.$handleEvent(i),t.loadMore=i}}}):t._e(),t.edit?e("wui-submit-bar",{attrs:{"total-show":!1},scopedSlots:t._u([{key:"checkbox",fn:function(){return[e("v-uni-label",{on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.checkAll.apply(void 0,arguments)}}},[e("v-uni-radio",{staticStyle:{transform:"scale(0.8)"},attrs:{checked:t.all,color:"#f44"}}),t._v("全选")],1)]},proxy:!0},{key:"button",fn:function(){return[e("wui-button",{attrs:{type:"error",shape:"circle",size:"medium",disabled:t.disabled},on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.remove.apply(void 0,arguments)}}},[t._v("删除")])]},proxy:!0}],null,!1,4241119432)}):t._e()],2)],1)},a=[]},"46b3":function(t,i,e){"use strict";e.r(i);var n=e("51c4"),o=e.n(n);for(var a in n)"default"!==a&&function(t){e.d(i,t,(function(){return n[t]}))}(a);i["default"]=o.a},"51c4":function(t,i,e){"use strict";e("99af"),e("4160"),e("c975"),e("d3b7"),e("159b"),Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var n={data:function(){return{loading:!0,list:null,edit:!1,all:!1,rightOptions:[{text:"删除",style:{backgroundColor:"#f44",fontSize:"10px"}},{text:"收藏",style:{backgroundColor:"#ff9300",fontSize:"10px"}}],query:{page:1},loadMore:!1,lastPage:1,total:0}},computed:{selected:function(){var t=[];return null!=this.list&&this.list.forEach((function(i){i.checked&&t.push(i.id)})),t},disabled:function(){return 0==this.selected.length}},onLoad:function(t){this.getList()},onReachBottom:function(){!this.loadMore&&this.lastPage>this.query.page&&(this.loadMore=!0,this.query.page+=1,this.getList())},methods:{getList:function(){var t=this;this.$get("/member/history",this.query).then((function(i){var e=i.data;t.lastPage=e.last_page,t.total=e.total,t.list||(t.list=[]);var n=e.data,o=[];n.forEach((function(t){o.indexOf(t.view_time)<0?(o.push(t.view_time),t.date=t.view_time):t.date=""})),t.list=t.list.concat(n)})).finally((function(){t.loading=!1,t.loadMore=!1,t.$util.hideLoading()}))},swipeClick:function(t){var i=this;0==t.index?(this.checkOne(this.id,!0),this.remove()):this.list.forEach((function(t){t.id==i.id&&i.$post("/goods/favorite",{id:t.goods_id}).then((function(t){i.$util.toast("收藏成功",!1,"success")}))}))},swipeChange:function(t,i){this.id=i},remove:function(){var t=this;uni.showModal({title:"系统提示",content:"确定删除吗？",success:function(i){i.confirm&&(t.$util.showLoading("删除中"),t.$post("/member/history/remove",{id:t.selected}).then((function(i){t.loading=!0,t.list=null,t.query.page=1,t.getList(),t.$util.toast("删除成功")})).finally((function(){t.$util.hideLoading()})))}})},checkAll:function(t){var i=this;this.all=!this.all,this.list.forEach((function(t){t.checked=i.all})),this.list=JSON.parse(JSON.stringify(this.list))},checkOne:function(t){var i=arguments.length>1&&void 0!==arguments[1]&&arguments[1],e=!0;this.list.forEach((function(n){n.id==t&&(n.checked=!!i||!n.checked),!n.checked&&(e=!1)})),this.all=e,this.list=JSON.parse(JSON.stringify(this.list))},click:function(t){this.$util.redirect("/pages/goods/detail/index?id="+t)}}};i.default=n},"746a":function(t,i,e){"use strict";var n=e("dd04"),o=e.n(n);o.a},8116:function(t,i,e){"use strict";e.d(i,"b",(function(){return o})),e.d(i,"c",(function(){return a})),e.d(i,"a",(function(){return n}));var n={wuiEmpty:e("d0ab").default,wuiLoading:e("c32f").default,wuiLogin:e("e297").default},o=function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("v-uni-view",[t._t("login_static"),t.login?e("v-uni-view",[t.loading?e("wui-loading"):e("v-uni-view",[t._t("list_static"),null===t.list||t.list.length?t._t("default"):e("wui-empty",{attrs:{title:t.title,button:t.button},on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.handleClick.apply(void 0,arguments)}}})],2)],1):e("wui-empty",{attrs:{title:t.NOT_LOGIN,button:t.LOGIN},on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.loginShow=!0}}}),e("wui-login",{attrs:{show:t.loginShow},on:{"update:show":function(i){arguments[0]=i=t.$handleEvent(i),t.loginShow=i}}})],2)},a=[]},ce00:function(t,i,e){"use strict";var n=e("4ea4");Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var o=n(e("5530")),a=e("2f62"),l={name:"wui-load-login-list",props:{loading:{type:Boolean,default:!1},list:{default:null},title:{type:String,default:""},button:{type:String,default:""},image:{type:String,default:""}},data:function(){return{loginShow:!1}},computed:(0,o.default)({},(0,a.mapGetters)("user",["login"])),methods:{handleClick:function(){this.$emit("click")}}};i.default=l},d211:function(t,i,e){"use strict";e.r(i);var n=e("ce00"),o=e.n(n);for(var a in n)"default"!==a&&function(t){e.d(i,t,(function(){return n[t]}))}(a);i["default"]=o.a},dd04:function(t,i,e){var n=e("1a03");"string"===typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);var o=e("4f06").default;o("13e37faa",n,!0,{sourceMap:!1,shadowMode:!1})}}]);