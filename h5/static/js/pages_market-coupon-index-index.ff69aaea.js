(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages_market-coupon-index-index"],{"128d":function(t,e,i){"use strict";var a=i("5cc7"),n=i.n(a);n.a},"15ad":function(t,e,i){"use strict";i.d(e,"b",(function(){return n})),i.d(e,"c",(function(){return o})),i.d(e,"a",(function(){return a}));var a={wuiButton:i("6821").default},n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-uni-view",{staticClass:"coupon",class:{"coupon--disabled":t.disabled}},[i("v-uni-view",{staticClass:"coupon__content"},[i("v-uni-view",{staticClass:"coupon__head"},[i("v-uni-view",{staticClass:"coupon__amount"},[t._v(t._s(0==t.data.coupon_type?parseFloat(t.data.amount):t.data.discount)),i("v-uni-label",[t._v(t._s(0==t.data.coupon_type?"元":"折"))])],1),i("v-uni-text",{staticClass:"coupon__condition"},[t._v(t._s(0==t.data.condition?"无使用门槛":"满"+parseFloat(t.data.condition)+"元可用")+"\n        "+t._s(t.data.discount_limit>0?"最多优惠"+parseFloat(t.data.discount_limit)+"元":""))])],1),i("v-uni-view",{staticClass:"coupon__body"},[i("v-uni-view",{staticClass:"coupon__name",staticStyle:{width:"65%"}},[t._v(t._s(t.data.coupon_name))]),0==t.type?i("v-uni-view",{staticClass:"coupon__valid"},[0==t.data.expire_type?i("v-uni-text",[t._v("领取后 "+t._s(t.data.effective_time)+" 天内有效")]):i("v-uni-text",[t._v(t._s(t.formatDate(t.data.begin_time))+" - "+t._s(t.formatDate(t.data.end_time)))])],1):i("v-uni-view",{staticClass:"coupon__valid"},[t._v(t._s(t.formatDate(t.data.receive_time))+" - "+t._s(t.formatDate(t.data.expire_time)))]),i("v-uni-view",{staticClass:"checkbox coupon__corner"},[0==t.type?i("v-uni-view",[t.data.total>t.data.received?i("v-uni-label",[i("v-uni-view",[t._v("仅剩 "+t._s(t.data.total-t.data.received)+" 张")]),i("v-uni-view",{staticClass:"button"},[i("wui-button",{attrs:{type:"error",size:"mini",shape:"circle",plain:!0,"custom-style":{height:"24px"},loading:t.loading},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.receive(t.data.id)}}},[t._v("立即领取")])],1)],1):i("v-uni-text",[t._v("已抢完")])],1):t._e(),1==t.type?i("v-uni-view",[i("v-uni-radio",{staticStyle:{transform:"scale(0.8)"},attrs:{checked:t.value==t.data.id,color:"#ee0a24"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.select(t.data)}}})],1):t._e()],1)],1)],1),t.data.description?i("p",{staticClass:"coupon__description"},[t._v(t._s(t.data.description))]):t._e()],1)},o=[]},"5cc7":function(t,e,i){var a=i("a40c");"string"===typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);var n=i("4f06").default;n("60552726",a,!0,{sourceMap:!1,shadowMode:!1})},"605a":function(t,e,i){"use strict";i.r(e);var a=i("ece0"),n=i.n(a);for(var o in a)"default"!==o&&function(t){i.d(e,t,(function(){return a[t]}))}(o);e["default"]=n.a},"6ecb":function(t,e,i){var a=i("771f");"string"===typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);var n=i("4f06").default;n("1db4a16a",a,!0,{sourceMap:!1,shadowMode:!1})},7089:function(t,e,i){"use strict";i.d(e,"b",(function(){return n})),i.d(e,"c",(function(){return o})),i.d(e,"a",(function(){return a}));var a={wuiLoading:i("c32f").default,wuiEmpty:i("d0ab").default},n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-uni-view",[t.loading?i("wui-loading"):i("v-uni-view",[t._t("list_static"),null===t.list||t.list.length?i("v-uni-view",[t._t("default")],2):i("wui-empty",{attrs:{title:t.title,button:t.button},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.handleClick.apply(void 0,arguments)}}})],2)],1)},o=[]},"771f":function(t,e,i){var a=i("24fb");e=a(!1),e.push([t.i,".coupon[data-v-b2ff45d8]{margin:0 12px 12px;overflow:hidden;background-color:#fff;border-radius:8px;box-shadow:0 0 4px rgba(0,0,0,.1)}.coupon__content[data-v-b2ff45d8]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-align:center;-webkit-align-items:center;align-items:center;box-sizing:border-box;min-height:84px;padding:14px 0;color:#323233}.coupon__head[data-v-b2ff45d8]{position:relative;min-width:100px;max-width:100px;padding:0 8px;color:#ee0a24;text-align:center}.coupon__amount[data-v-b2ff45d8],\n.coupon__condition[data-v-b2ff45d8],\n.coupon__name[data-v-b2ff45d8],\n.coupon__valid[data-v-b2ff45d8]{overflow:hidden;text-overflow:ellipsis;font-size:12px}.coupon__condition[data-v-b2ff45d8]{word-break:break-all;display:-webkit-box;overflow:hidden;text-overflow:ellipsis;-webkit-line-clamp:2;-webkit-box-orient:vertical}.coupon__amount[data-v-b2ff45d8]{margin-bottom:6px;font-weight:500;font-size:26px;overflow:hidden;white-space:nowrap;text-overflow:ellipsis}.coupon__amount uni-label[data-v-b2ff45d8]{font-weight:400;font-size:40%}.coupon__amount uni-label[data-v-b2ff45d8]:not(:empty){margin-left:2px}.coupon__condition[data-v-b2ff45d8]{font-size:12px;line-height:16px;white-space:pre-wrap}.coupon__body[data-v-b2ff45d8]{position:relative;-webkit-box-flex:1;-webkit-flex:1;flex:1;border-radius:0 8px 8px 0;min-height:60px}.coupon__name[data-v-b2ff45d8]{margin-bottom:10px;font-weight:700;font-size:14px;line-height:20px;word-break:break-all;display:-webkit-box;overflow:hidden;text-overflow:ellipsis;-webkit-line-clamp:2;-webkit-box-orient:vertical}.coupon__valid[data-v-b2ff45d8]{font-size:12px}.coupon__corner[data-v-b2ff45d8]{position:absolute;top:0;right:16px;bottom:0;font-size:12px;text-align:center}.coupon__corner .button[data-v-b2ff45d8]{margin-top:5px}.coupon__description[data-v-b2ff45d8]{padding:8px 16px;font-size:12px;border-top:.5px dashed #ebedf0}.coupon--disabled .coupon-item__content[data-v-b2ff45d8]{height:74px}.coupon--disabled .coupon__head[data-v-b2ff45d8]{color:inherit}.checkbox[data-v-b2ff45d8]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-align:center;-webkit-align-items:center;align-items:center;overflow:hidden;cursor:pointer;-webkit-user-select:none;user-select:none}",""]),t.exports=e},7771:function(t,e,i){"use strict";i.r(e);var a=i("15ad"),n=i("605a");for(var o in n)"default"!==o&&function(t){i.d(e,t,(function(){return n[t]}))}(o);i("b06d");var d,l=i("f0c5"),u=Object(l["a"])(n["default"],a["b"],a["c"],!1,null,"b2ff45d8",null,!1,a["a"],d);e["default"]=u.exports},"7b6e":function(t,e,i){"use strict";i.d(e,"b",(function(){return n})),i.d(e,"c",(function(){return o})),i.d(e,"a",(function(){return a}));var a={wuiLoadList:i("b229").default,wuiCoupon:i("7771").default,wuiLoadingMore:i("90ab").default,wuiLogin:i("e297").default},n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-uni-view",{staticClass:"container"},[i("wui-load-list",{attrs:{loading:t.loading,title:t.COUPON_NOT_FIND,list:t.list}},[i("v-uni-view",{staticClass:"coupon-list"},[t._l(t.list,(function(e,a){return i("wui-coupon",{key:a,attrs:{data:e,disabled:e.total==e.received,loading:e.loading},on:{receive:function(e){arguments[0]=e=t.$handleEvent(e),t.receive.apply(void 0,arguments)}}})})),null!==t.list?i("wui-loading-more",{attrs:{page:t.query.page,"last-page":t.lastPage,loading:t.loadMore},on:{"update:loading":function(e){arguments[0]=e=t.$handleEvent(e),t.loadMore=e}}}):t._e()],2)],1),i("wui-login",{attrs:{show:t.loginShow},on:{"update:show":function(e){arguments[0]=e=t.$handleEvent(e),t.loginShow=e}}})],1)},o=[]},"89d1":function(t,e,i){"use strict";i.r(e);var a=i("7b6e"),n=i("df06");for(var o in n)"default"!==o&&function(t){i.d(e,t,(function(){return n[t]}))}(o);i("128d");var d,l=i("f0c5"),u=Object(l["a"])(n["default"],a["b"],a["c"],!1,null,"1db6cb76",null,!1,a["a"],d);e["default"]=u.exports},9556:function(t,e,i){"use strict";var a=i("4ea4");i("99af"),i("4160"),i("d3b7"),i("159b"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=a(i("5530")),o=i("2f62"),d={data:function(){return{loading:!0,loginShow:!1,list:null,query:{page:1},loadMore:!1,lastPage:0}},computed:(0,n.default)({},(0,o.mapGetters)("user",["login"])),onLoad:function(t){this.getList()},onReachBottom:function(){!this.loadMore&&this.lastPage>this.query.page&&(this.loadMore=!0,this.query.page+=1,this.getList())},methods:{getList:function(){var t=this;this.$get("/coupon",this.query).then((function(e){var i=e.data;t.lastPage=i.last_page,t.total=i.total,t.list||(t.list=[]),t.list=t.list.concat(i.data)})).finally((function(){t.loading=!1,t.loadMore=!1,t.$util.hideLoading()}))},receive:function(t){var e=this;if(!this.login)return this.loginShow=!0,!1;var i=null;this.list.forEach((function(e){e.id==t&&(i=e)})),i.loading=!0,this.$forceUpdate(),this.$post("/coupon/receive",{id:t}).then((function(t){e.$util.toast("领取成功",!1,"success"),i.received+=1,i.loading=!1})).catch((function(t){e.$util.toast(t.msg)})).finally((function(){i.loading=!1,e.$forceUpdate()}))}}};e.default=d},a40c:function(t,e,i){var a=i("24fb");e=a(!1),e.push([t.i,".coupon-list[data-v-1db6cb76]{box-sizing:border-box;padding-top:16px;overflow-y:auto;-webkit-overflow-scrolling:touch}",""]),t.exports=e},a5d4:function(t,e,i){"use strict";i.r(e);var a=i("ad89"),n=i.n(a);for(var o in a)"default"!==o&&function(t){i.d(e,t,(function(){return a[t]}))}(o);e["default"]=n.a},ad89:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a={name:"wui-load-list",props:{loading:{type:Boolean,default:!0},list:{default:null},title:{type:String,default:""},button:{type:String,default:""}},methods:{handleClick:function(){this.$emit("click")}}};e.default=a},b06d:function(t,e,i){"use strict";var a=i("6ecb"),n=i.n(a);n.a},b229:function(t,e,i){"use strict";i.r(e);var a=i("7089"),n=i("a5d4");for(var o in n)"default"!==o&&function(t){i.d(e,t,(function(){return n[t]}))}(o);var d,l=i("f0c5"),u=Object(l["a"])(n["default"],a["b"],a["c"],!1,null,null,null,!1,a["a"],d);e["default"]=u.exports},df06:function(t,e,i){"use strict";i.r(e);var a=i("9556"),n=i.n(a);for(var o in a)"default"!==o&&function(t){i.d(e,t,(function(){return a[t]}))}(o);e["default"]=n.a},ece0:function(t,e,i){"use strict";i("a9e3"),i("ac1f"),i("5319"),i("1276"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a={name:"wui-coupon",props:{value:{type:[String,Number],default:0},data:{type:Object,default:function(){return{}}},type:{type:Number,default:0},disabled:{type:Boolean,default:!1},loading:{type:Boolean,default:!1}},methods:{formatDate:function(t){var e=t.split(" ");return e[0].replace(/-/g,"/")},receive:function(t){this.$emit("receive",t)},select:function(t){this.$emit("select",t)}}};e.default=a}}]);