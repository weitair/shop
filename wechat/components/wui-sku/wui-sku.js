(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["components/wui-sku/wui-sku"],{"422b":function(t,n,e){},"44a2":function(t,n,e){"use strict";e.r(n);var i=e("7e20"),o=e.n(i);for(var u in i)"default"!==u&&function(t){e.d(n,t,(function(){return i[t]}))}(u);n["default"]=o.a},"73e1":function(t,n,e){"use strict";e.d(n,"b",(function(){return o})),e.d(n,"c",(function(){return u})),e.d(n,"a",(function(){return i}));var i={wuiPopup:function(){return e.e("components/wui-popup/wui-popup").then(e.bind(null,"418e"))},wuiNumberBox:function(){return Promise.all([e.e("common/vendor"),e.e("components/wui-number-box/wui-number-box")]).then(e.bind(null,"efac"))},wuiBottomAction:function(){return e.e("components/wui-bottom-action/wui-bottom-action").then(e.bind(null,"4892"))},wuiBottomActionButton:function(){return e.e("components/wui-bottom-action-button/wui-bottom-action-button").then(e.bind(null,"456c"))},wuiLogin:function(){return Promise.all([e.e("common/vendor"),e.e("components/wui-login/wui-login")]).then(e.bind(null,"e297"))}},o=function(){var t=this,n=t.$createElement,e=(t._self._c,t.sku&&parseFloat(t.sku.sales_price));t.$mp.data=Object.assign({},{$root:{m0:e}})},u=[]},"7e20":function(t,n,e){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var i=e("2f62"),o=u(e("f4df"));function u(t){return t&&t.__esModule?t:{default:t}}function s(t,n){var e=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);n&&(i=i.filter((function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable}))),e.push.apply(e,i)}return e}function r(t){for(var n=1;n<arguments.length;n++){var e=null!=arguments[n]?arguments[n]:{};n%2?s(Object(e),!0).forEach((function(n){c(t,n,e[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):s(Object(e)).forEach((function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(e,n))}))}return t}function c(t,n,e){return n in t?Object.defineProperty(t,n,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[n]=e,t}var a={name:"wui-sku",props:{show:{type:Boolean,default:!1},data:{type:Object,default:function(){return{}}}},data:function(){return{cartLoading:!1,submitLoading:!1,loginShow:!1,skuShow:!1,spec_list:[],sku_list:[],current:[],sku:null,detail:{},form:{goods_id:null,goods_sku_id:null,goods_name:"",sku_name:"",image:"",sales_price:"",quantity:1}}},computed:r(r({},(0,i.mapGetters)("user",["login"])),{},{stock:function(){return this.sku?this.sku.stock<10?"库存紧张":this.sku.stock:""}}),watch:{show:{handler:function(t){this.skuShow=t},immediate:!0},data:{handler:function(t){var n=t;this.sku_list=n.sku,this.spec_list=n.spec,this.form.goods_id=n.id,this.form.goods_name=n.goods_name,this.form.image=n.image,this.form.quantity=n.min_quantity,this.init()},immediate:!0}},methods:c({close:function(){this.$emit("update:show",!1)},init:function(){var t=this;this.sku_list&&(this.spec_list.forEach((function(n,e){n.children.forEach((function(n,i){n.checked=0==i,n.checked&&(t.current[e]=n.id)}))})),this.selectSku())},selectSpec:function(t,n){var e=this;this.spec_list.forEach((function(i,o){i.id==t&&i.children.forEach((function(t){t.checked=t.id==n,t.checked&&(e.current[o]=n)}))})),this.spec_list=JSON.parse(JSON.stringify(this.spec_list)),this.selectSku()},selectSku:function(){var t=this;if(10==this.data.sku_type)this.sku=this.sku_list[0];else{var n=this.current.join(":");this.sku_list.forEach((function(e){e.sku_code==n&&(t.sku=e)}))}this.form.goods_sku_id=this.sku.id,this.form.sku_name=this.sku.sku_name,this.form.sales_price=this.sku.sales_price,this.$emit("change",this.sku)},cart:function(){var t=this,n=this;if(!n.login)return n.loginShow=!0,!1;n.cartLoading=!0,n.$post("/cart/add",this.form).then((function(e){n.$emit("cart",t.form.quantity),n.$util.toast(n.CART_ADD)})).catch((function(t){n.$util.toast(t.msg)})).finally((function(){n.close(),n.cartLoading=!1}))},buy:function(){var t=this,n=[];if(!t.login)return t.loginShow=!0,!1;n.push({id:this.form.goods_sku_id,quantity:this.form.quantity}),o.default.set("sku",n),this.$util.redirect("/pages/order/confirm/index?id=123123")}},"close",(function(){this.$emit("update:show",!1)}))};n.default=a},"8f5b":function(t,n,e){"use strict";var i=e("422b"),o=e.n(i);o.a},da9a:function(t,n,e){"use strict";e.r(n);var i=e("73e1"),o=e("44a2");for(var u in o)"default"!==u&&function(t){e.d(n,t,(function(){return o[t]}))}(u);e("8f5b");var s,r=e("f0c5"),c=Object(r["a"])(o["default"],i["b"],i["c"],!1,null,"6a2d0c17",null,!1,i["a"],s);n["default"]=c.exports}}]);
;(global["webpackJsonp"] = global["webpackJsonp"] || []).push([
    'components/wui-sku/wui-sku-create-component',
    {
        'components/wui-sku/wui-sku-create-component':(function(module, exports, __webpack_require__){
            __webpack_require__('543d')['createComponent'](__webpack_require__("da9a"))
        })
    },
    [['components/wui-sku/wui-sku-create-component']]
]);
