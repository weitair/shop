(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/goods/detail/index"],{"1f59":function(n,t,i){},"24f7":function(n,t,i){"use strict";i.r(t);var e=i("cbbb"),o=i("7132");for(var u in o)"default"!==u&&function(n){i.d(t,n,(function(){return o[n]}))}(u);i("c52d");var r,c=i("f0c5"),a=Object(c["a"])(o["default"],e["b"],e["c"],!1,null,"1f075fa2",null,!1,e["a"],r);t["default"]=a.exports},"2b65":function(n,t,i){"use strict";(function(n){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var e=i("2f62");function o(n,t){var i=Object.keys(n);if(Object.getOwnPropertySymbols){var e=Object.getOwnPropertySymbols(n);t&&(e=e.filter((function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable}))),i.push.apply(i,e)}return i}function u(n){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?o(Object(i),!0).forEach((function(t){r(n,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(i)):o(Object(i)).forEach((function(t){Object.defineProperty(n,t,Object.getOwnPropertyDescriptor(i,t))}))}return n}function r(n,t,i){return t in n?Object.defineProperty(n,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):n[t]=i,n}var c={data:function(){return{loading:!0,title:"商品详情",opacity:0,h5:!1,id:null,detail:{},banner:[],favorite:!1,sku:{},skuShow:!1,loginShow:!1,serviceShow:!1,couponShow:!1,shareShow:!1,form:{goods_id:null,goods_sku_id:null}}},computed:u(u({},(0,e.mapGetters)("user",["login"])),{},{skuShowComputed:function(){return this.detail?this.detail.sku_type?this.sku.sku_name:"默认":""}}),onShareAppMessage:function(n){return{title:this.detail.goods_name,path:"/pages/goods/detail/index?id="+this.detail.id}},onLoad:function(t){this.id=t.id,n.setNavigationBarTitle({title:this.title})},onShow:function(){var t=this;this.$get("/goods/detail",{id:this.id}).then((function(i){var e=i.data;t.detail=e,t.coupon=e.coupon,e.images.forEach((function(n){t.banner.push({image:n.name})})),n.setNavigationBarTitle({title:t.detail.goods_name})})).catch((function(n){t.opacity=1})).finally((function(){t.loading=!1}))},onPageScroll:function(n){this.opacity=n.scrollTop/300},methods:{notFind:function(){n.navigateBack()},commentList:function(){this.detail.comment_count>0&&this.$util.redirect("/pages/goods/comment/index?id="+this.detail.id)},switchTab:function(t){n.switchTab({url:t})},clickFavorite:function(){var n=this;if(!this.login)return this.loginShow=!0,!1;this.$post("/goods/favorite",{id:this.id}).then((function(t){t.data;n.detail.favorite=!n.detail.favorite,n.detail.favorite?n.$util.toast("已加入收藏",!1,"success"):n.$util.toast("已取消收藏")})).finally((function(){n.loading=!1}))},showSku:function(){this.login?this.skuShow=!0:this.loginShow=!0},changeSku:function(n){this.sku=n},changeCart:function(n){this.detail.cart=parseInt(n)+parseInt(this.detail.cart)},preview:function(t){var i=[];this.banner.forEach((function(n){i.push(n.image)})),n.previewImage({urls:i,current:t})},formatName:function(n){var t="";if(2===n.length)t=n.substr(0,1)+"*";else if(n.length>2){for(var i="",e=0,o=n.length-2;e<o;e++)i+="*";t=n.substr(0,1)+i+n.substr(-1,1)}else t=n;return t},receiveCoupon:function(n){var t=this;if(!this.login)return this.loginShow=!0,!1;var i=null;this.detail.coupon.forEach((function(t){t.id==n&&(i=t)})),i.loading=!0,this.$forceUpdate(),this.$post("/coupon/receive",{id:n}).then((function(n){t.$util.toast("领取成功",!1,"success"),i.received+=1,i.loading=!1})).catch((function(n){t.$util.toast(n.msg)})).finally((function(){i.loading=!1,t.$forceUpdate()}))}}};t.default=c}).call(this,i("543d")["default"])},4008:function(n,t,i){"use strict";(function(n){i("2490");e(i("66fd"));var t=e(i("24f7"));function e(n){return n&&n.__esModule?n:{default:n}}n(t.default)}).call(this,i("543d")["createPage"])},7132:function(n,t,i){"use strict";i.r(t);var e=i("2b65"),o=i.n(e);for(var u in e)"default"!==u&&function(n){i.d(t,n,(function(){return e[n]}))}(u);t["default"]=o.a},c52d:function(n,t,i){"use strict";var e=i("1f59"),o=i.n(e);o.a},cbbb:function(n,t,i){"use strict";i.d(t,"b",(function(){return o})),i.d(t,"c",(function(){return u})),i.d(t,"a",(function(){return e}));var e={wuiNavbar:function(){return i.e("components/wui-navbar/wui-navbar").then(i.bind(null,"85a9"))},wuiLoadDetail:function(){return i.e("components/wui-load-detail/wui-load-detail").then(i.bind(null,"03c4"))},wuiSwiper:function(){return i.e("components/wui-swiper/wui-swiper").then(i.bind(null,"108b"))},wuiIcon:function(){return i.e("components/wui-icon/wui-icon").then(i.bind(null,"8901"))},wuiCell:function(){return i.e("components/wui-cell/wui-cell").then(i.bind(null,"d5e2"))},wuiTag:function(){return i.e("components/wui-tag/wui-tag").then(i.bind(null,"2dd1"))},uniRate:function(){return i.e("components/uni-rate/uni-rate").then(i.bind(null,"cb0d"))},wuiDivider:function(){return i.e("components/wui-divider/wui-divider").then(i.bind(null,"b718"))},uParse:function(){return Promise.all([i.e("common/vendor"),i.e("components/u-parse/u-parse")]).then(i.bind(null,"db8c"))},wuiBottomAction:function(){return i.e("components/wui-bottom-action/wui-bottom-action").then(i.bind(null,"4892"))},wuiBottomActionIcon:function(){return i.e("components/wui-bottom-action-icon/wui-bottom-action-icon").then(i.bind(null,"3252"))},wuiBottomActionButton:function(){return i.e("components/wui-bottom-action-button/wui-bottom-action-button").then(i.bind(null,"456c"))},wuiSku:function(){return Promise.all([i.e("common/vendor"),i.e("components/wui-sku/wui-sku")]).then(i.bind(null,"da9a"))},wuiPopup:function(){return i.e("components/wui-popup/wui-popup").then(i.bind(null,"418e"))},wuiCoupon:function(){return i.e("components/wui-coupon/wui-coupon").then(i.bind(null,"7771"))},wuiShare:function(){return Promise.all([i.e("common/vendor"),i.e("components/wui-share/wui-share")]).then(i.bind(null,"d63c"))},wuiLogin:function(){return Promise.all([i.e("common/vendor"),i.e("components/wui-login/wui-login")]).then(i.bind(null,"e297"))}},o=function(){var n=this,t=n.$createElement,i=(n._self._c,n.$util.price(n.detail.sales_price)),e=n.$util.price(n.detail.line_price),o=n.__map(n.detail.coupon,(function(t,i){var e=n.__get_orig(t),o=t.condition>0?parseFloat(t.condition):null,u=t.coupon_type>0?parseFloat(t.discount):null,r=t.coupon_type>0?null:parseFloat(t.amount);return{$orig:e,m0:o,m1:u,m2:r}})),u=n.__map(n.detail.comment,(function(t,i){var e=n.__get_orig(t),o=n.formatName(t.member.nickname);return{$orig:e,m3:o}}));n._isMounted||(n.e0=function(t){n.shareShow=!0},n.e1=function(t){n.serviceShow=!0},n.e2=function(t){n.couponShow=!0},n.e3=function(t){n.skuShow=!0},n.e4=function(t){n.serviceShow=!1},n.e5=function(t){n.serviceShow=!1}),n.$mp.data=Object.assign({},{$root:{g0:i,g1:e,l0:o,l1:u}})},u=[]}},[["4008","common/runtime","common/vendor"]]]);