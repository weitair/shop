(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/auth/login/index"],{"2f92":function(t,e,n){"use strict";(function(t){n("2490");r(n("66fd"));var e=r(n("3ff5"));function r(t){return t&&t.__esModule?t:{default:t}}t(e.default)}).call(this,n("543d")["createPage"])},"3ff5":function(t,e,n){"use strict";n.r(e);var r=n("c4eb"),o=n("6cc0");for(var i in o)"default"!==i&&function(t){n.d(e,t,(function(){return o[t]}))}(i);n("7cd7");var u,c=n("f0c5"),a=Object(c["a"])(o["default"],r["b"],r["c"],!1,null,"4329aa3d",null,!1,r["a"],u);e["default"]=a.exports},"5aac":function(t,e,n){},"6cc0":function(t,e,n){"use strict";n.r(e);var r=n("de6f"),o=n.n(r);for(var i in r)"default"!==i&&function(t){n.d(e,t,(function(){return r[t]}))}(i);e["default"]=o.a},"7cd7":function(t,e,n){"use strict";var r=n("5aac"),o=n.n(r);o.a},c4eb:function(t,e,n){"use strict";n.d(e,"b",(function(){return o})),n.d(e,"c",(function(){return i})),n.d(e,"a",(function(){return r}));var r={wuiField:function(){return n.e("components/wui-field/wui-field").then(n.bind(null,"b0fe"))},wuiButton:function(){return n.e("components/wui-button/wui-button").then(n.bind(null,"6821"))}},o=function(){var t=this,e=t.$createElement,n=(t._self._c,"string"===typeof t.$$v?t.$$v.trim():null);t._isMounted||(t.e0=function(e){return t.$router.replace("/pages/auth/login?redirect="+t.redirect)},t.e1=function(e){return t.$router.replace("/pages/auth/register/index?redirect="+t.redirect)}),t.$mp.data=Object.assign({},{$root:{g0:n}})},i=[]},de6f:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r=i(n("5231")),o=n("2f62");function i(t){return t&&t.__esModule?t:{default:t}}function u(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function c(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?u(Object(n),!0).forEach((function(e){a(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):u(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function a(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var s={data:function(){return{loading:!1,top:this.$navHeight+"px",login:"password",countdown:!1,second:60,redirect:void 0,form:{phone:"",password:"",code:""}}},computed:c({},(0,o.mapGetters)("app",["title","logo"])),watch:{$route:{handler:function(t){this.redirect=t.query&&t.query.redirect},immediate:!0}},methods:{changeMethod:function(){this.login="password"==this.login?"code":"password"},fetchCode:function(){var t=this,e=this;if(!r.default.phone(e.form.phone))return e.$util.toast("请输入正确的手机号"),!1;e.$util.showLoading(),e.$post("/auth/login/fetch/code",{phone:e.form.phone}).then((function(t){e.$util.toast(t.msg),e.countdown=!0,e.count()})).catch((function(e){t.$util.toast(e.msg)})).finally((function(){e.$util.hideLoading()}))},count:function(){var t=this,e=setInterval((function(){t.second-=1,0==t.second&&(t.second=60,t.countdown=!1,clearInterval(e))}),1e3)},submit:function(){var t=this;if(!r.default.phone(this.form.phone))return this.$util.toast("请输入正确的手机号"),!1;if("password"==this.login){if(!this.form.password)return this.$util.toast("请输入登录密码"),!1;this.loading=!0,this.$store.dispatch("user/h5Login",{url:"/auth/login/password",params:this.form}).then((function(e){t.$router.replace(t.redirect||"/")})).catch((function(e){t.$util.toast(e.msg)})).finally((function(){t.loading=!1}))}else{if(!this.form.code)return this.$util.toast("请输入验证码"),!1;this.loading=!0,this.form.channel=this.$util.isWechat()?0:2,this.$store.dispatch("user/h5Login",{url:"/auth/login/code",params:this.form}).then((function(e){t.$router.replace(t.redirect||"/")})).catch((function(e){t.$util.toast(e.msg)})).finally((function(){t.loading=!1}))}}}};e.default=s}},[["2f92","common/runtime","common/vendor"]]]);